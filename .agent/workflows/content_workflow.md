---
description: Workflow for content creation, validation, and import (Quests, NPC, Lore).
---
# Content Creation & Import Workflow

This workflow implements the content lifecycle from `.cursor/CONTENT_WORKFLOW.md`.

## 1. Role: Content Writer

If you are acting as Content Writer:

1. **Create/Update YAML**: Edit files in `knowledge/canon/` (e.g. `knowledge/canon/quests/`).
2. **Validate YAML**:
   // turbo

   ```bash
   python scripts/validation/validate-all-quests.py
   ```

3. **Commit & Handoff**:
   - Do NOT send to QA/DB directly.
   - Send to **Backend**.

## 2. Role: Backend (Import)

If you are acting as Backend receiving content:

1. **Check Tables**: Verify if `gameplay.quest_definitions` (or relevant table) exists.
   - IF NO TABLES: -> **Status: Blocked**, Create Issue for **Database Agent**.
   - IF TABLES EXIST: Proceed.

2. **Choose Method**:
   - **Scenario A (Small, <10 items)**: Use API Import.
     // turbo

     ```bash
     python scripts/migrations/validate-quest-imports.py
     ```

   - **Scenario B (Large, >10 items)**: Generate Migrations.
     // turbo

     ```bash
     python scripts/migrations/run_generator.py --type quests --output-dir infrastructure/liquibase/data/
     ```

     // turbo

     ```bash
     python scripts/migrations/validate-quest-migrations.py
     ```

3. **Handoff**:
   - Check = 1.
   - If Migrations generated -> Send to **Database Agent**.
   - If API Import done -> Send to **QA Agent**.

## 3. Role: Database (Migrations)

If you are acting as Database Agent receiving content migrations:

1. **Apply Migrations**: Implement the SQL files generated by Backend.
2. **Validate**:
   // turbo

   ```bash
   python scripts/migrations/validate-all-migrations.py
   ```

3. **Handoff**:
   - Send to **QA Agent**.

## 4. Role: QA (Verification)

If you are acting as QA:

1. **Verify Import**: Check via API or DB query (do not rely on labels).
2. **Test Functionality**: Ensure quest/content works in-game.
3. **Finish**:
   - If OK -> **Status: Done** (or Release).
   - If Fail -> **Status: Returned** -> Send to **Backend** (NOT Content Writer).
