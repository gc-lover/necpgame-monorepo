# Idea Writer: Вернуть задачу

Вернуть задачу другому агенту с объяснением причины возврата.

## Инструкции

1. **Прочитай Issue через MCP GitHub (используй кэширование):**
   ```javascript
   const issue = await getCachedIssue(issueNumber);
   ```

2. **Определи причину возврата:**
   - Задача уже обработана
   - Неправильный тип задачи
   - Недостаточно информации для работы

3. **Определи правильного агента для передачи:**
   - Если неясно → используй `needs-review`

4. **Обнови метки Issue:**
   - Удали: `agent:idea-writer`, `stage:idea`
   - Добавь: `returned` (или `needs-review` если неясно)
   - Добавь: `agent:{correct-agent}`, `stage:{correct-stage}` (если известен)

5. **Обнови статус Project:**
   - Верни на предыдущий этап (если знаешь)
   - Или оставь текущий этап с меткой `returned`

6. **Добавь комментарий с объяснением:**
   ```markdown
   WARNING Задача возвращена: {причина}
   
   **Причина возврата:**
   - {детальное описание}
   
   **Требуется:**
   - {что нужно для продолжения работы}
   
   **Метки обновлены:**
   - Удалено: `agent:idea-writer`, `stage:idea`
   - Добавлено: `returned`, `agent:{correct-agent}`
   ```

7. **Используй батчинг для >=3 Issues:**
   - Батчи по 5 Issues
   - Задержка 300ms между запросами
   - Задержка 1000ms между батчами

## Оптимизация

- Для <3 Issues: последовательно с задержками (300-500ms)
- Для 3-9 Issues: батчинг по 5 Issues
- Для >=10 Issues: используй GitHub Actions Batch Processor

## Ссылки

- `.cursor/rules/AGENT_TASK_RETURN.md` - полная документация возврата задач
- `.cursor/rules/AGENT_LABEL_MANAGEMENT.md` - управление метками
- `.cursor/rules/GITHUB_API_OPTIMIZATION.md` - оптимизация запросов

