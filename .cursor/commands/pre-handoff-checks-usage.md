# Pre-Handoff Checks: How to Use

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –∑–∞–¥–∞—á–∏ —Å–ª–µ–¥—É—é—â–µ–º—É –∞–≥–µ–Ω—Ç—É**

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –°–ø–æ—Å–æ–± 1: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ Issue

–ü—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–≤—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ Issue —Å –∫–æ–º–∞–Ω–¥–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏:

```markdown
/backend-validate-result
```

**Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –û–±–Ω–∞—Ä—É–∂–∏—Ç –∫–æ–º–∞–Ω–¥—É
- –ù–∞–π–¥—ë—Ç Issue number
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç –∞–≥–µ–Ω—Ç–∞ (backend)
- –ó–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

### –°–ø–æ—Å–æ–± 2: Manual trigger (workflow_dispatch)

1. –ó–∞–π–¥–∏ –≤ Actions ‚Üí Pre-Handoff Checks
2. –ù–∞–∂–º–∏ "Run workflow"
3. –í–≤–µ–¥–∏:
   - Issue number: `123`
   - Agent: –≤—ã–±–µ—Ä–∏ –∏–∑ —Å–ø–∏—Å–∫–∞

## üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

### Backend

1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞:**
   - –ò–∑ Issue labels (–Ω–∞–ø—Ä–∏–º–µ—Ä, `companion-service`)
   - –ò–∑ Issue body (—É–ø–æ–º–∏–Ω–∞–Ω–∏–µ `companion-service-go`)
   - –ò–∑ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ PR (–∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã)
   - –ò–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∫–æ–º–º–∏—Ç–æ–≤

2. **–ü—Ä–æ–≤–µ—Ä–∫–∏:**
   - OK OpenAPI spec —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –≤–∞–ª–∏–¥–µ–Ω
   - OK Go –∫–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
   - OK –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
   - OK Docker –æ–±—Ä–∞–∑ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è (–µ—Å–ª–∏ –µ—Å—Ç—å Dockerfile)

3. **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
   - OK Success ‚Üí –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
   - ‚ùå Failure ‚Üí –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –æ—à–∏–±–∫–∞–º–∏
   - WARNING Service not found ‚Üí –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∫–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

### UE5

- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è UE5 –ø—Ä–æ–µ–∫—Ç–∞
- –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ C++ —Ñ–∞–π–ª–æ–≤

### API Designer

- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è common.yaml
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤ (<500 —Å—Ç—Ä–æ–∫)

### Database

- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–æ–≤ –º–∏–≥—Ä–∞—Ü–∏–π

## WARNING –í–∞–∂–Ω–æ

**–≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –ù–ï –∑–∞–º–µ–Ω—è—é—Ç —Ä—É—á–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é!**

1. Workflow –ø—Ä–æ–≤–µ—Ä—è–µ—Ç **—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ** –∞—Å–ø–µ–∫—Ç—ã:
   - –ö–æ–º–ø–∏–ª—è—Ü–∏—è
   - –¢–µ—Å—Ç—ã
   - –°–∏–Ω—Ç–∞–∫—Å–∏—Å

2. –ê–≥–µ–Ω—Ç –≤—Å—ë —Ä–∞–≤–Ω–æ –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç—å **—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ** –∞—Å–ø–µ–∫—Ç—ã:
   - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º Issue
   - Acceptance criteria
   - Business logic

3. **–ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—à–ª–∏:**
   - OK –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å –≥–æ—Ç–æ–≤–∞
   - WARNING –í—Å—ë —Ä–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π `/backend-validate-result` –¥–ª—è –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

4. **–ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å:**
   - ‚ùå –ò—Å–ø—Ä–∞–≤—å –æ—à–∏–±–∫–∏
   - üîÑ –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–Ω–æ–≤–∞
   - ‚õî –ù–ï –ø–µ—Ä–µ–¥–∞–≤–∞–π –∑–∞–¥–∞—á—É –ø–æ–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ –ø—Ä–æ–π–¥—É—Ç

## üêõ Troubleshooting

### "Cannot determine service name"

**–ü—Ä–∏—á–∏–Ω–∞:** Workflow –Ω–µ –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫–æ–π —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–≤–µ—Ä—è—Ç—å.

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤—å label –Ω–∞ Issue: `companion-service` (–∏–ª–∏ –¥—Ä—É–≥–æ–π)
2. –£–ø–æ–º—è–Ω–∏ —Å–µ—Ä–≤–∏—Å –≤ Issue body: `companion-service-go`
3. –°–≤—è–∂–∏ PR —Å Issue, –∫–æ—Ç–æ—Ä—ã–π –º–µ–Ω—è–µ—Ç —Ñ–∞–π–ª—ã –≤ `services/companion-service-go/`

### "OpenAPI spec not found"

**–ü—Ä–∏—á–∏–Ω–∞:** OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `proto/openapi/{service-name}-service.yaml`
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ—á–Ω–æ–µ –∏–º—è –∏–∑ Issue

### "Tests failed"

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç.

**–†–µ—à–µ–Ω–∏–µ:**
- –ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ: `cd services/{service}-go && go test ./...`
- –ò—Å–ø—Ä–∞–≤—å –ø–∞–¥–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

## üìä –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```markdown
# –í Issue –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:

@agent /backend-validate-result

# Workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –û–±–Ω–∞—Ä—É–∂–∏–ª –∫–æ–º–∞–Ω–¥—É
2. –û–ø—Ä–µ–¥–µ–ª–∏–ª —á—Ç–æ —ç—Ç–æ backend validation
3. –ù–∞—à—ë–ª Issue #123
4. –û–ø—Ä–µ–¥–µ–ª–∏–ª —Å–µ—Ä–≤–∏—Å –∏–∑ labels: companion-service
5. –ó–∞–ø—É—Å—Ç–∏–ª –ø—Ä–æ–≤–µ—Ä–∫–∏:
   - OK OpenAPI spec found
   - OK Go build successful
   - OK Tests passed
   - OK Docker build successful
6. –û—Å—Ç–∞–≤–∏–ª –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

# –ê–≥–µ–Ω—Ç –≤–∏–¥–∏—Ç:
OK Automated checks passed. Ready for handoff to Network.
```

## OK Best Practices

1. **–ó–∞–ø—É—Å–∫–∞–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –î–û —Ä—É—á–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**
   - –°–Ω–∞—á–∞–ª–∞ `/backend-validate-result` (automatic)
   - –ü–æ—Ç–æ–º –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (manual checklist)

2. **–ò—Å–ø—Ä–∞–≤–ª—è–π –æ—à–∏–±–∫–∏ —Å—Ä–∞–∑—É:**
   - –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å ‚Üí –∏—Å–ø—Ä–∞–≤—å
   - –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π –∑–∞–¥–∞—á—É —Å –æ—à–∏–±–∫–∞–º–∏

3. **–ò—Å–ø–æ–ª—å–∑—É–π labels:**
   - –î–æ–±–∞–≤–ª—è–π service labels –Ω–∞ Issue
   - –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç workflow –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

4. **–ü—Ä–æ–≤–µ—Ä—è–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
   - –ß–∏—Ç–∞–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ—Ç workflow
   - –£–±–µ–¥–∏—Å—å —á—Ç–æ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—à–ª–∏

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

**Workflow –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–æ –º–æ–∂–Ω–æ:**

1. **–î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
   - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `.github/workflows/pre-handoff-checks.yml`

2. **–ò–∑–º–µ–Ω–∏—Ç—å —É—Å–ª–æ–≤–∏—è –∑–∞–ø—É—Å–∫–∞:**
   - –¢–µ–∫—É—â–µ–µ: –ø—Ä–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–ª–∏ manual trigger
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å: –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞, –Ω–∞ PR creation

3. **–†–∞—Å—à–∏—Ä–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏:**
   - –î–æ–±–∞–≤–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä—ã
   - –î–æ–±–∞–≤–∏—Ç—å security scans
   - –î–æ–±–∞–≤–∏—Ç—å coverage checks

