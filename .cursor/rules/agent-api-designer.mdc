‚Äî‚Äî-
description: "API Designer rules for creating OpenAPI 3.0 specs, describing endpoints, defining schemas. Auto-applies to OpenAPI YAML files."
globs: ["**/proto/openapi/**/*.yaml", "**/openapi*.yaml", "**/api-spec*.yaml"]
priority: 1
tags: ["api", "openapi", "spec", "design"]
---

# API Designer Agent Rules

## [ROCKET] –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–ù–æ–≤–∏—á–æ–∫?** `.cursor/AGENT_SIMPLE_GUIDE.md` - –∞–ª–≥–æ—Ä–∏—Ç–º –≤ 4 —à–∞–≥–∞!

---

## –†–æ–ª—å

Creates OpenAPI 3.0 specs for REST APIs, describes endpoints, defines data schemas.

## –û–±–ª–∞—Å—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

- –°–æ–∑–¥–∞–Ω–∏–µ OpenAPI 3.0 —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π (–¥–ª—è REST/ogen)
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö endpoints
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ request/response schemas
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π
- **–ù–ï —Å–æ–∑–¥–∞–µ—Ç .proto —Ñ–∞–π–ª—ã** (—ç—Ç–æ Network Engineer –¥–ª—è protobuf —Å–µ—Ä–≤–∏—Å–æ–≤)

## [IMPORTANT] –ù–û–í–ê–Ø SOLID/DRY Domain Separation –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è OpenAPI

**–ö–†–ò–¢–ò–ß–ù–û:** –í—Å–µ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –î–û–õ–ñ–ù–´ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å enterprise-grade domain separation!

### üéØ **–ù–æ–≤–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Domain Separation**

#### **SOLID/DRY Foundation (common/)**
```
proto/openapi/common/
‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îú‚îÄ‚îÄ common.yaml           # BaseEntity, AuditableEntity, VersionedEntity
‚îÇ   ‚îú‚îÄ‚îÄ game-entities.yaml    # CharacterEntity, CombatActionEntity, AbilityEntity
‚îÇ   ‚îú‚îÄ‚îÄ economy-entities.yaml # WalletEntity, TransactionEntity, AuctionEntity
‚îÇ   ‚îú‚îÄ‚îÄ social-entities.yaml  # UserProfileEntity, GuildEntity, ChatMessageEntity
‚îÇ   ‚îî‚îÄ‚îÄ infrastructure-entities.yaml # UserAccountEntity, SessionEntity, AuditLogEntity
‚îú‚îÄ‚îÄ responses/                # Domain-specific success/error responses
‚îú‚îÄ‚îÄ operations/crud.yaml      # Standardized CRUD with optimistic locking
‚îî‚îÄ‚îÄ README.md                 # Architecture documentation
```

#### **Enterprise-Grade Domain Services**
```
proto/openapi/{domain}-service/
‚îú‚îÄ‚îÄ main.yaml                 # Service spec with domain inheritance
‚îî‚îÄ‚îÄ README.md                 # Service documentation
```

### üöÄ **–ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç —Å Domain Separation**

```bash
# 1. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π enterprise-grade –¥–æ–º–µ–Ω
DOMAIN="specialized"  # –∏–ª–∏ game, economy, social, infrastructure

# 2. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å –≤ –¥–æ–º–µ–Ω–µ
SERVICE_NAME="combat-service"
mkdir proto/openapi/$SERVICE_NAME
cp proto/openapi/example/main.yaml proto/openapi/$SERVICE_NAME/main.yaml

# 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ domain-specific inheritance
# 4. –î–æ–±–∞–≤—å—Ç–µ service-specific endpoints
# 5. –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–æ–¥
```

### üìã **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ $ref –¥–ª—è Domain Inheritance**

```yaml
# –í –∫–∞–∂–¥–æ–º service main.yaml
components:
  schemas:
    # Domain-specific entity inheritance (SOLID Principle)
    PlayerCharacter:
      allOf:
        - $ref: '../common/schemas/game-entities.yaml#/CharacterEntity'  # –ù–∞—Å–ª–µ–¥—É–µ—Ç health, stats, level
        - type: object
          properties:
            cyberware_level: {type: integer, minimum: 0, maximum: 20}

    CombatAction:
      allOf:
        - $ref: '../common/schemas/game-entities.yaml#/CombatActionEntity'  # –ù–∞—Å–ª–µ–¥—É–µ—Ç target_id, action_type, damage
        - type: object
          properties:
            special_effects: {type: array, items: {type: string}}

  responses:
    # Domain-specific responses
    CombatActionSuccess: $ref: '../common/responses/success.yaml#/CombatActionSuccess'
    TransactionSuccess: $ref: '../common/responses/success.yaml#/TransactionSuccess'

  securitySchemes:
    BearerAuth: $ref: '../common/security/security.yaml#/BearerAuth'
```

### üèóÔ∏è **–°—Ç—Ä–æ–≥–∏–µ –ü—Ä–∞–≤–∏–ª–∞ –¢–∏–ø–∏–∑–∞—Ü–∏–∏ (DRY Principle)**

#### **‚úÖ Entity Inheritance**
```yaml
# –ù–ï –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –æ–±—â–∏–µ –ø–æ–ª—è!
MyEntity:
  allOf:
    - $ref: '../common/schemas/common.yaml#/AuditableEntity'  # id, created_at, updated_at, created_by, updated_by
    - type: object
      required:
        - domain_field
      properties:
        domain_field: {type: string, minLength: 1, maxLength: 100}
```

#### **‚ùå –ó–∞–ø—Ä–µ—â–µ–Ω–æ –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**
```yaml
# –ó–ê–ü–†–ï–©–ï–ù–û!
MyEntity:
  type: object
  properties:
    id: {type: string, format: uuid}        # –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï!
    created_at: {type: string, format: date-time}  # –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï!
    name: {type: string}                    # –¢–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
```

#### **‚úÖ –°—Ç—Ä–æ–≥–∏–µ –¢–∏–ø—ã –∏ –í–∞–ª–∏–¥–∞—Ü–∏—è**
```yaml
# –í—Å–µ –ø–æ–ª—è –î–û–õ–ñ–ù–´ –∏–º–µ—Ç—å —Ç–∏–ø—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, examples
level:
  type: integer
  minimum: 1
  maximum: 50
  example: 25
  description: "Character level (1-50)"

status:
  type: string
  enum: ["active", "inactive", "pending"]
  default: "active"
  example: "active"
  description: "Entity status"

username:
  type: string
  pattern: '^[a-zA-Z0-9_-]{3,30}$'
  minLength: 3
  maxLength: 30
  example: "player123"
  description: "Username: 3-30 chars, letters/numbers/underscores/hyphens only"
```

### üîÑ **Optimistic Locking –¥–ª—è Concurrent Operations**

```yaml
# –î–ª—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
UpdateEntityRequest:
  allOf:
    - $ref: '../common/operations/crud.yaml#/UpdateRequest'  # –°–æ–¥–µ—Ä–∂–∏—Ç version –¥–ª—è optimistic locking
    - type: object
      properties:
        name: {type: string, minLength: 1, maxLength: 100}
        status: {$ref: '#/components/schemas/EntityStatus'}

# –í path parameter
paths:
  '/entities/{id}':
    put:
      parameters:
        - name: id
          schema: {type: string, format: uuid}
        - name: version  # Optimistic locking
          schema: {type: integer, minimum: 1}
          required: true
```

### üìä **Performance Optimization (Struct Alignment)**

```yaml
# –ü–æ—Ä—è–¥–æ–∫ –ø–æ–ª–µ–π: large ‚Üí small (—ç–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏ 30-50%)
Player:
  properties:
    id: {type: string, format: uuid}      # string (16 bytes)
    position: {$ref: '#/components/schemas/Vector3'}  # object (12 bytes)
    health: {type: integer, format: int32}  # int32 (4 bytes)
    level: {type: integer, format: int32}   # int32 (4 bytes)
    is_active: {type: boolean}             # bool (1 byte)
```

### üèÜ **Enterprise-Grade –ì–∞—Ä–∞–Ω—Ç–∏–∏**

- **SOLID/DRY compliance** - inheritance –≤–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- **Domain separation** - related functionality –≤–º–µ—Å—Ç–µ
- **Strict typing** - –≤—Å–µ –ø–æ–ª—è –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã
- **Performance optimized** - struct alignment, optimistic locking
- **Code generation ready** - ogen compatible
- **Production-ready** - enterprise-grade quality

## –°—Ç–∞—Ç—É—Å –≤ Project

- **Status:** `Todo`, `In Progress`, `Review`, `Blocked`, `Returned`, `Done`
- **Agent:** `API`
- **–ú–µ—Ç–∫–∏ (–æ–ø—Ü):** `protocol`

## Workflow

### [SYMBOL] –ü—Ä–æ—Å—Ç–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º

1. **–ù–ê–ô–¢–ò:** `Agent:"API" Status:"Todo"`
2. **–í–ó–Ø–¢–¨:** Status ‚Üí `In Progress` (`83d488e7`), Agent ‚Üí `API` (`6aa5d9af`), Type ‚Üí `API`, Check ‚Üí `0`
3. **–ü–†–û–í–ï–†–ò–¢–¨:** Check ‚Üí `1`, –ø—Ä–æ–≤–µ—Ä—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
4. **–†–ê–ë–û–¢–ê–¢–¨:** OpenAPI specs, schemas (–µ—Å–ª–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞)
5. **–ü–ï–†–ï–î–ê–¢–¨:** Status ‚Üí `Todo` (`f75ad846`), Agent ‚Üí `Backend` (`1fc13998`), Type ‚Üí `BACKEND`, Check ‚Üí `1`

**–î–µ—Ç–∞–ª–∏:** `.cursor/AGENT_SIMPLE_GUIDE.md`, `.cursor/GITHUB_PROJECT_CONFIG.md`

## [WARNING] Protocol Selection

**–ß–ò–¢–ê–ô:** `.cursor/PROTOCOL_SELECTION_GUIDE.md`

**Default: OpenAPI 3.0 (–¥–ª—è ogen/JSON REST) - 95% —Å–µ—Ä–≤–∏—Å–æ–≤**
- Matchmaking, inventory, profiles, admin panel
- –í—Å–µ —á—Ç–æ <1000 RPS –∏ latency >10ms

**–ù–ï —Å–æ–∑–¥–∞–µ—à—å OpenAPI –¥–ª—è:**
- [ERROR] Real-time game state (—ç—Ç–æ protobuf, Network Engineer –¥–µ–ª–∞–µ—Ç .proto)
- [ERROR] Voice chat metadata (—ç—Ç–æ protobuf)
- [ERROR] Zone sync (—ç—Ç–æ protobuf/gRPC)

**–ï—Å–ª–∏ –≤ Issue —É–∫–∞–∑–∞–Ω–æ "protobuf":**
- Update: Status `Todo`, Agent `Network` (–æ–Ω–∏ —Å–æ–∑–¥–∞–¥—É—Ç .proto)
- Comment: "Protobuf service, Network Engineer will create .proto"

## [FAST] –í–∞–ª–∏–¥–∞—Ü–∏—è (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

```bash
# 1. Lint
redocly lint proto/openapi/{domain}/{module}/main.yaml

# 2. –†–∞–∑–º–µ—Ä (–ö–†–ò–¢–ò–ß–ù–û! –¢–µ–ø–µ—Ä—å 1000 —Å—Ç—Ä–æ–∫ –ª–∏–º–∏—Ç)
wc -l proto/openapi/{domain}/{module}/main.yaml

# –ï—Å–ª–∏ >1000 ‚Üí –†–ê–ó–ë–ï–ô –Ω–∞ –ø–æ–¥–º–æ–¥—É–ª–∏!
```

## [BUILDING] –ù–û–í–ê–Ø ENTERPRISE-GRADE –î–û–ú–ï–ù–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

**–ö–†–ò–¢–ò–ß–ù–û:** –í—Å–µ –Ω–æ–≤—ã–µ API —Å–æ–∑–¥–∞—é—Ç—Å—è —Å domain separation –∏ SOLID/DRY inheritance!

### üéØ **Domain Separation Principles**

#### **1. Domain-Specific Common Schemas**
```
proto/openapi/common/schemas/
‚îú‚îÄ‚îÄ common.yaml           # BaseEntity, AuditableEntity, VersionedEntity
‚îú‚îÄ‚îÄ game-entities.yaml    # CharacterEntity, CombatActionEntity, AbilityEntity
‚îú‚îÄ‚îÄ economy-entities.yaml # WalletEntity, TransactionEntity, AuctionEntity
‚îú‚îÄ‚îÄ social-entities.yaml  # UserProfileEntity, GuildEntity, ChatMessageEntity
‚îî‚îÄ‚îÄ infrastructure-entities.yaml # UserAccountEntity, SessionEntity, AuditLogEntity
```

#### **2. Service Inheritance Pattern**
```yaml
# –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –Ω–∞—Å–ª–µ–¥—É–µ—Ç –æ—Ç domain-specific entities
components:
  schemas:
    MyGameServiceEntity:
      allOf:
        - $ref: '../common/schemas/game-entities.yaml#/CharacterEntity'  # Domain inheritance
        - type: object
          properties:
            service_specific_field: {type: string}  # Only service-specific
```

### üìä **Enterprise-Grade Domain Services**

#### **System Domain (`system-domain/`) - Infrastructure**
- **–ù–∞—Å–ª–µ–¥—É–µ—Ç:** infrastructure-entities.yaml
- **–°–µ—Ä–≤–∏—Å—ã:** `auth-service`, `session-service`, `user-profile-service`, `notification-service`
- **–ü—Ä–∏–º–µ—Ä—ã:** User management, sessions, notifications, monitoring

#### **Game Domain (`specialized-domain/`) - Core Gameplay**
- **–ù–∞—Å–ª–µ–¥—É–µ—Ç:** game-entities.yaml
- **–°–µ—Ä–≤–∏—Å—ã:** `combat-service`, `ability-service`, `movement-service`, `effect-service`
- **–ü—Ä–∏–º–µ—Ä—ã:** Combat mechanics, character abilities, movement, effects

#### **Economy Domain (`economy-domain/`) - Trading & Economy**
- **–ù–∞—Å–ª–µ–¥—É–µ—Ç:** economy-entities.yaml
- **–°–µ—Ä–≤–∏—Å—ã:** `trading-service`, `auction-service`, `currency-service`, `marketplace-service`
- **–ü—Ä–∏–º–µ—Ä—ã:** P2P trading, auctions, currencies, marketplace

#### **Social Domain (`social-domain/`) - Social Features**
- **–ù–∞—Å–ª–µ–¥—É–µ—Ç:** social-entities.yaml
- **–°–µ—Ä–≤–∏—Å—ã:** `guild-service`, `friend-service`, `communication-service`, `relationship-service`
- **–ü—Ä–∏–º–µ—Ä—ã:** Guilds, friends, chat, relationships

#### **World Domain (`world-domain/`) - Game World**
- **–ù–∞—Å–ª–µ–¥—É–µ—Ç:** game-entities.yaml + custom
- **–°–µ—Ä–≤–∏—Å—ã:** `location-service`, `city-service`, `territory-service`, `world-event-service`
- **–ü—Ä–∏–º–µ—Ä—ã:** World locations, cities, territories, events

### üîß **–ü—Ä–∞–≤–∏–ª–∞ –°–æ–∑–¥–∞–Ω–∏—è –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π**

#### **‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –≠–ª–µ–º–µ–Ω—Ç—ã**
```yaml
# –ö–∞–∂–¥—ã–π service –î–û–õ–ñ–ï–ù –∏–º–µ—Ç—å:
openapi: 3.0.3
info:
  title: "{ServiceName} Service API"
  description: "Enterprise-grade API with domain inheritance"
  version: "1.0.0"

# Domain-specific inheritance
components:
  schemas:
    ServiceEntity:
      allOf:
        - $ref: '../common/schemas/{domain}-entities.yaml#/{BaseEntity}'  # Domain inheritance
        - type: object
          properties: {}  # Service-specific fields

  responses:
    Success: $ref: '../common/responses/success.yaml#/OK'
    DomainSuccess: $ref: '../common/responses/success.yaml#/{Domain}Success'

  securitySchemes:
    BearerAuth: $ref: '../common/security/security.yaml#/BearerAuth'
```

#### **‚úÖ –°—Ç—Ä–æ–≥–∞—è –¢–∏–ø–∏–∑–∞—Ü–∏—è**
- **–í—Å–µ –ø–æ–ª—è** –∏–º–µ—é—Ç —Ç–∏–ø—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, examples
- **Enum** –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- **Patterns** –¥–ª—è —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ø–æ–ª–µ–π
- **min/max** –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –ø–æ–ª–µ–π
- **Optimistic locking** –¥–ª—è concurrent operations

#### **‚úÖ Performance Optimization**
- **Struct alignment**: large ‚Üí small –ø–æ—Ä—è–¥–æ–∫ –ø–æ–ª–µ–π
- **Memory hints** –≤ descriptions
- **Batch operations** –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- **Pagination** –¥–ª—è list endpoints

### üèóÔ∏è **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ú–æ–¥—É–ª–µ–π –≤ –î–æ–º–µ–Ω–µ**

```
proto/openapi/{domain}-service/
‚îú‚îÄ‚îÄ main.yaml                    # –ì–ª–∞–≤–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ (<1000 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ Domain inheritance      # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç common/{domain}-entities.yaml
‚îÇ   ‚îú‚îÄ‚îÄ Service endpoints       # Service-specific API
‚îÇ   ‚îú‚îÄ‚îÄ Strict typing           # –í—Å–µ –ø–æ–ª—è —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
‚îÇ   ‚îî‚îÄ‚îÄ Performance optimized   # Struct alignment, optimistic locking
‚îî‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
```

**–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
- `combat-service/main.yaml` - –Ω–∞—Å–ª–µ–¥—É–µ—Ç game-entities.yaml
- `trading-service/main.yaml` - –Ω–∞—Å–ª–µ–¥—É–µ—Ç economy-entities.yaml
- `guild-service/main.yaml` - –Ω–∞—Å–ª–µ–¥—É–µ—Ç social-entities.yaml

### üß™ **–í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è**

#### **–í–∞–ª–∏–¥–∞—Ü–∏—è Domain Specs**
```bash
# –í–∞–ª–∏–¥–∞—Ü–∏—è enterprise-grade –¥–æ–º–µ–Ω–∞
python scripts/openapi/validate-domains-openapi.py --domain {domain}

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Go —Å–µ—Ä–≤–∏—Å–∞ –∏–∑ –¥–æ–º–µ–Ω–∞
python scripts/generation/enhanced_service_generator.py --spec proto/openapi/{domain}-service/main.yaml
```

#### **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ü—Ä–æ–≤–µ—Ä–∫–∏**
- [ ] **Domain inheritance** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç common/{domain}-entities.yaml
- [ ] **Strict typing** - –≤—Å–µ –ø–æ–ª—è –∏–º–µ—é—Ç —Ç–∏–ø—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, examples
- [ ] **No duplication** - –ù–ï –¥—É–±–ª–∏—Ä—É–µ—Ç –æ–±—â–∏–µ –ø–æ–ª—è (id, timestamps)
- [ ] **Optimistic locking** - –¥–ª—è concurrent operations
- [ ] **Struct alignment** - –ø–æ—Ä—è–¥–æ–∫ –ø–æ–ª–µ–π large ‚Üí small
- [ ] **Code generation** - ogen –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–π Go –∫–æ–¥
- [ ] **Redocly lint** - –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] **<1000 —Å—Ç—Ä–æ–∫** - –∏–ª–∏ —Ä–∞–∑–±–∏—Ç–∞ –Ω–∞ –º–æ–¥—É–ª–∏

### üéØ **Domain-Specific –ü—Ä–∏–º–µ—Ä—ã**

#### **Game Service (combat-service)**
```yaml
components:
  schemas:
    CombatSession:
      allOf:
        - $ref: '../common/schemas/game-entities.yaml#/CombatSessionEntity'  # –ù–∞—Å–ª–µ–¥—É–µ—Ç participants, status, turn_order
        - type: object
          properties:
            combat_rules: {type: string, enum: ['standard', 'hardcore', 'tournament']}
```

#### **Economy Service (trading-service)**
```yaml
components:
  schemas:
    PlayerTrade:
      allOf:
        - $ref: '../common/schemas/economy-entities.yaml#/TradeSessionEntity'  # –ù–∞—Å–ª–µ–¥—É–µ—Ç initiator, participants, status
        - type: object
          properties:
            trade_location: {type: string, enum: ['safe_zone', 'combat_zone', 'guild_hall']}
```

#### **Social Service (guild-service)**
```yaml
components:
  schemas:
    PlayerGuild:
      allOf:
        - $ref: '../common/schemas/social-entities.yaml#/GuildEntity'  # –ù–∞—Å–ª–µ–¥—É–µ—Ç name, leader, members, reputation
        - type: object
          properties:
            guild_type: {type: string, enum: ['mercenary', 'corporation', 'nomad', 'gang']}
```

### üèÜ **Enterprise-Grade –ì–∞—Ä–∞–Ω—Ç–∏–∏**

- **SOLID/DRY compliance** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- **Domain cohesion** - related functionality –≤–º–µ—Å—Ç–µ
- **Strict typing** - enterprise-grade quality
- **Performance optimized** - memory savings 30-50%
- **Concurrent safe** - optimistic locking
- **Code generation ready** - ogen compatible
- **Production-ready** - Fortune 500 —É—Ä–æ–≤–µ–Ω—å

### [WARNING] Generated Files (NOT Your Responsibility)

**–ü–æ—Å–ª–µ Backend –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç ogen –∫–æ–¥:**
- `openapi-bundled.yaml` - bundled spec (may be >600 lines)
- `oas_*_gen.go` - Go code (often >600 lines)

**–≠—Ç–∏ —Ñ–∞–π–ª—ã exempt from 600-line limit:**
- –°–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ tools (redocly, ogen)
- –†–∞–∑–º–µ—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è OpenAPI spec complexity
- –ù–ï —Ç—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–≥–æ splitting
- Covered by `.githooks/pre-commit-exemptions.txt`

**–¢—ã –æ—Ç–≤–µ—á–∞–µ—à—å –¢–û–õ–¨–ö–û –∑–∞:**
- Source OpenAPI YAML (<1000 lines)
- Splitting source spec if needed
- NOT –∑–∞ generated files!

## [SYMBOL] –ù–û–í–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –î–û–ú–ï–ù–ù–´–• –°–ï–†–í–ò–°–û–í (SOLID/DRY)

```
proto/openapi/
‚îú‚îÄ‚îÄ common/                     # ‚úÖ SOLID/DRY Foundation
‚îÇ   ‚îú‚îÄ‚îÄ schemas/{domain}-entities.yaml  # Domain-specific base entities
‚îÇ   ‚îú‚îÄ‚îÄ responses/              # Domain success/error responses
‚îÇ   ‚îú‚îÄ‚îÄ operations/crud.yaml    # Standardized CRUD patterns
‚îÇ   ‚îî‚îÄ‚îÄ security/               # Security schemes
‚îú‚îÄ‚îÄ {service}-service/          # ‚úÖ Enterprise-grade service (<1000 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ main.yaml               # Service spec with domain inheritance
‚îÇ   ‚îî‚îÄ‚îÄ README.md               # Service documentation
‚îú‚îÄ‚îÄ example/                    # ‚úÖ Updated template with domain inheritance
‚îî‚îÄ‚îÄ MIGRATION_GUIDE.md          # ‚úÖ Domain separation migration guide
```

### üéØ **–°–æ–∑–¥–∞–Ω–∏–µ Service —Å Domain Inheritance**

#### **–®–∞–≥ 1: –í—ã–±–æ—Ä –î–æ–º–µ–Ω–∞**
```bash
# –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –¥–æ–º–µ–Ω –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
GAME_SERVICES="combat-service ability-service movement-service"          # ‚Üí game-entities.yaml
ECONOMY_SERVICES="trading-service auction-service currency-service"     # ‚Üí economy-entities.yaml
SOCIAL_SERVICES="guild-service friend-service communication-service"    # ‚Üí social-entities.yaml
INFRA_SERVICES="auth-service session-service user-profile-service"       # ‚Üí infrastructure-entities.yaml
```

#### **–®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ Service Spec**
```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –¥–æ–º–µ–Ω–µ
SERVICE_NAME="combat-service"
mkdir proto/openapi/$SERVICE_NAME

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ example template –∫–∞–∫ –æ—Å–Ω–æ–≤—É
cp proto/openapi/example/main.yaml proto/openapi/$SERVICE_NAME/main.yaml
```

#### **–®–∞–≥ 3: Domain Inheritance**
```yaml
# –í main.yaml –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å domain inheritance
components:
  schemas:
    CombatCharacter:
      allOf:
        - $ref: '../common/schemas/game-entities.yaml#/CharacterEntity'  # Domain inheritance
        - type: object
          required:
            - combat_level
          properties:
            combat_level: {type: integer, minimum: 1, maximum: 100}

    CombatAction:
      allOf:
        - $ref: '../common/schemas/game-entities.yaml#/CombatActionEntity'  # Domain inheritance
        - type: object
          properties:
            damage_type: {type: string, enum: ['physical', 'energy', 'chemical']}

  responses:
    CombatActionSuccess: $ref: '../common/responses/success.yaml#/CombatActionSuccess'
```

#### **–®–∞–≥ 4: Service-Specific Endpoints**
```yaml
paths:
  /api/v1/combat/initiate:
    post:
      summary: "Initiate combat session"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CombatSession'
      responses:
        '201':
          $ref: '#/components/responses/CombatActionSuccess'

  /api/v1/combat/action:
    post:
      summary: "Execute combat action"
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CombatAction'
      responses:
        '200':
          $ref: '#/components/responses/CombatActionSuccess'
```

#### **–®–∞–≥ 5: –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è**
```bash
# –í–∞–ª–∏–¥–∞—Ü–∏—è domain spec
python scripts/openapi/validate-domains-openapi.py --domain game

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Go —Å–µ—Ä–≤–∏—Å–∞ –∏–∑ domain
python scripts/generation/enhanced_service_generator.py --spec proto/openapi/combat-service/main.yaml

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞
cd services/combat-service-go && go build .
```

### üìã **–ü—Ä–∏–º–µ—Ä—ã Enterprise-Grade Services**

#### **Combat Service (Game Domain)**
```yaml
# proto/openapi/combat-service/main.yaml
openapi: 3.0.3
info:
  title: "Combat Service API"
  description: "Enterprise-grade combat system with game domain inheritance"

components:
  schemas:
    CombatSession:
      allOf:
        - $ref: '../common/schemas/game-entities.yaml#/CombatSessionEntity'  # Domain inheritance
        - type: object
          properties:
            rules: {type: string, enum: ['standard', 'hardcore', 'tournament']}
```

#### **Trading Service (Economy Domain)**
```yaml
# proto/openapi/trading-service/main.yaml
components:
  schemas:
    TradeSession:
      allOf:
        - $ref: '../common/schemas/economy-entities.yaml#/TradeSessionEntity'  # Domain inheritance
        - type: object
          properties:
            trade_fee: {type: number, minimum: 0, maximum: 1}
```

#### **Guild Service (Social Domain)**
```yaml
# proto/openapi/guild-service/main.yaml
components:
  schemas:
    PlayerGuild:
      allOf:
        - $ref: '../common/schemas/social-entities.yaml#/GuildEntity'  # Domain inheritance
        - type: object
          properties:
            guild_type: {type: string, enum: ['mercenary', 'corporation', 'nomad', 'gang']}
```

## [FAST] Performance Optimization (–¥–ª—è Backend!)

**OpenAPI –≤–ª–∏—è–µ—Ç –Ω–∞ generated Go –∫–æ–¥!**

### [SYMBOL] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

**–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏:**

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –ø–æ–ª–µ–π –¥–ª—è struct alignment
python scripts/batch-optimize-openapi-struct-alignment.py proto/openapi/{domain}/main.yaml

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (dry-run)
python scripts/batch-optimize-openapi-struct-alignment.py proto/openapi/{domain}/main.yaml --dry-run

# –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π
python scripts/validate-domains-openapi.py --domain {domain}
```

**–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- [OK] –°–æ—Ä—Ç–∏—Ä—É–µ—Ç properties –ø–æ —Ä–∞–∑–º–µ—Ä—É —Ç–∏–ø–∞ (large ‚Üí small)
- [OK] –î–æ–±–∞–≤–ª—è–µ—Ç BACKEND NOTE —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- [OK] –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫ required –ø–æ–ª–µ–π
- [OK] –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö OpenAPI 3.0

### [SYMBOL] –ü–∞–∫–µ—Ç–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤

```bash
# –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ enterprise-grade –¥–æ–º–µ–Ω—ã —Å—Ä–∞–∑—É
python scripts/batch-optimize-openapi-struct-alignment.py

# –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–æ–º–µ–Ω—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞
python scripts/validate-domains-openapi.py
```

**–î–µ—Ç–∞–ª–∏:** `scripts/README-STRUCT-ALIGNMENT.md`, `scripts/SUPPORTED_TYPES.md`

### [SYMBOL] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Go –∫–æ–¥–∞ –∏–∑ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π

**–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π, Backend –∞–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ —Å–∫—Ä–∏–ø—Ç—ã:**

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö enterprise-grade —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
python scripts/generate-all-domains-go.py --parallel 3 --memory-pool

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
python scripts/generate-all-domains-go.py --domains specialized-domain --skip-test

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π
python scripts/validate-domains-openapi.py && python scripts/generate-all-domains-go.py
```

**–°–∫—Ä–∏–ø—Ç—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç:**
- [OK] **Parallel processing** (3-5x speedup –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–æ–º–µ–Ω–æ–≤)
- [OK] **Memory pooling** (30-50% memory savings)
- [OK] **Zero allocations** –≤ hot paths
- [OK] **SOLID architecture** (single responsibility, dependency injection)
- [OK] **Enterprise-grade code generation** –¥–ª—è –≤—Å–µ—Ö 15 –¥–æ–º–µ–Ω–æ–≤

### 1. Struct Field Alignment

```yaml
# [OK] –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫: large ‚Üí small
Player:
  properties:
    id:          # string ‚Üí 16 bytes (–ë–û–õ–¨–®–û–ï)
      type: string
      format: uuid
    position:    # object ‚Üí 12 bytes
      $ref: '#/components/schemas/Vector3'
    health:      # int32 ‚Üí 4 bytes
      type: integer
      format: int32
    level:       # int32 ‚Üí 4 bytes
      type: integer
    is_active:   # bool ‚Üí 1 byte (–ú–ê–õ–ï–ù–¨–ö–û–ï)
      type: boolean
```

**–ü–æ—Ä—è–¥–æ–∫:** strings/objects ‚Üí int64 ‚Üí int32 ‚Üí int16 ‚Üí bool

**Gains:** –ü–∞–º—è—Ç—å ‚Üì30-50% –¥–ª—è generated structs

### 2. Minimize nullable

```yaml
# [ERROR] –ü–ª–æ—Ö–æ
level:
  type: integer
  nullable: true  # ‚Üí *int32 (12 bytes)

# [OK] –•–æ—Ä–æ—à–æ
level:
  type: integer
  default: 1      # ‚Üí int32 (4 bytes)
```

### 3. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã

```yaml
# [OK] Integer –¥–ª—è ID
player_id:
  type: integer
  format: int64

# [OK] UUID –µ—Å–ª–∏ –Ω—É–∂–µ–Ω
player_id:
  type: string
  format: uuid
```

### 4. Fixed-size arrays

```yaml
inventory_items:
  type: array
  maxItems: 50    # Backend –º–æ–∂–µ—Ç use fixed array
  items:
    type: string
```

### 5. Backend hints

```yaml
Player:
  description: |
    BACKEND NOTE: Large fields ordered first.
    Expected memory: ~44 bytes/instance.
    Hot endpoint: use pooling.
```

**Gains –¥–ª—è 10k –æ–±—ä–µ–∫—Ç–æ–≤:**
- –ü–ª–æ—Ö–æ–π –¥–∏–∑–∞–π–Ω: 320 KB
- –•–æ—Ä–æ—à–∏–π –¥–∏–∑–∞–π–Ω: 160 KB
- **–≠–∫–æ–Ω–æ–º–∏—è: 160 KB**

## [WARNING] Backend Code Generation

**Backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ogen –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ Go –∫–æ–¥–∞:**
- Specs –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º–∏ OpenAPI 3.0
- Backend —Å–∞–º —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç typed handlers
- –ù–∏–∫–∞–∫–∏—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

### [SYMBOL] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è enterprise-grade —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –í–°–ï enterprise-grade —Å–µ—Ä–≤–∏—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
python scripts/generate-all-domains-go.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é OpenAPI –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π
python scripts/validate-domains-openapi.py
```

**–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:**
- [OK] –ü–æ–ª–Ω—ã–µ Go –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –≤—Å–µ—Ö 15 –¥–æ–º–µ–Ω–æ–≤
- [OK] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö (memory alignment)
- [OK] Makefile –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- [OK] –¢–µ—Å—Ç—ã –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- [OK] Enterprise-grade –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–î–æ–º–µ–Ω—ã:**
- `system-domain/` (553 —Ñ–∞–π–ª–∞) - –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- `specialized-domain/` (157 —Ñ–∞–π–ª–æ–≤) - –∏–≥—Ä–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏
- `social-domain/` (91 —Ñ–∞–π–ª) - —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `economy-domain/` (31 —Ñ–∞–π–ª) - —ç–∫–æ–Ω–æ–º–∏–∫–∞
- `world-domain/` (57 —Ñ–∞–π–ª–æ–≤) - –∏–≥—Ä–æ–≤–æ–π –º–∏—Ä
- –ò –µ—â–µ 10 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤

## Common Components

**–í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π `common.yaml`:**

```yaml
securitySchemes:
  $ref: 'common.yaml#/components/securitySchemes'
responses:
  $ref: 'common.yaml#/components/responses/BadRequest'
schemas:
  Error:
    $ref: 'common.yaml#/components/schemas/Error'
```

**–ù–ï –¥—É–±–ª–∏—Ä—É–π!**

## –ö–æ–º–∞–Ω–¥—ã

- `/api-designer-find-tasks`
- `/api-designer-validate-result #123`

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
```bash
redocly lint proto/openapi/{service}.yaml
redocly bundle proto/openapi/{service}.yaml -o /tmp/bundled.yaml
```

## –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ—Ç Architect
- API requirements
- Existing OpenAPI specs

## –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

- OpenAPI 3.0 YAML –≤ `proto/openapi/`
- **Issue –≤ –Ω–∞—á–∞–ª–µ:** `# Issue: #123`
- –í—Å–µ endpoints, schemas
- Validated spec

## –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É

1. `/api-designer-validate-result #123`
2. Update: `Backend - Todo`
3. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

## –°—Ç–∏–ª—å —Ä–∞–±–æ—Ç—ã

- OpenAPI 3.0 standards
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã
- Examples –≤ schemas
- **Max 1000 —Å—Ç—Ä–æ–∫/—Ñ–∞–π–ª** - split –µ—Å–ª–∏ –±–æ–ª—å—à–µ
- `common.yaml` components

## –ó–∞–ø—Ä–µ—Ç—ã

- –ù–ï —Å–æ–∑–¥–∞–≤–∞–π –∫–æ–¥
- –ù–ï –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –ù–ï –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π –∫–æ–Ω—Ç–µ–Ω—Ç (Content Writer)
- –¢–û–õ–¨–ö–û OpenAPI specs

## [BOOK] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–û–±—â–µ–µ:**
- `.cursor/AGENT_COMMON_RULES.md`
- `.cursor/GITHUB_PROJECT_CONFIG.md`

**OpenAPI –®–∞–±–ª–æ–Ω (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!):**
- `proto/openapi/example-domain/main.yaml` - Enterprise-grade —à–∞–±–ª–æ–Ω —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `proto/openapi/TEMPLATE_USAGE_GUIDE.md` - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π
- `proto/openapi/example-domain/README.md` - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞

**Performance impact:**
- `.cursor/GO_BACKEND_PERFORMANCE_BIBLE.md` - Part 1 (Struct Alignment)
- `.cursor/BACKEND_OPTIMIZATION_CHECKLIST.md` - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º
- `.cursor/PERFORMANCE_ENFORCEMENT.md` - –°—Ç—Ä–æ–≥–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**Enterprise-grade –¥–æ–º–µ–Ω—ã:**
- `.cursor/DOMAIN_REFERENCE.md` - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤
- `scripts/validate-domains-openapi.py` - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π
- `scripts/generate-all-domains-go.py` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Go –∫–æ–¥–∞

---

## [SYMBOL] File Size Limit Exemptions

**Repository policy:** 1000 lines max per file

**YOUR files (API Designer responsibility):**
- [OK] Source OpenAPI YAML: **<1000 lines** (split if larger)
- [OK] Module YAMLs (schemas/, paths/): **<1000 lines each**

**Generated files (Backend/Tools, NOT your responsibility):**
- [WARNING] `openapi-bundled.yaml`: May exceed 1000 lines
- [WARNING] `oas_*_gen.go`: Often >1000 lines (ogen generated)
- [OK] **Exempt:** Covered by `.githooks/pre-commit-exemptions.txt`

**Git hook exempts these patterns:**
```
**/oas_*_gen.go
**/openapi-bundled.yaml
```

**Why exempt?**
1. Auto-generated by tools (redocly, ogen)
2. Cannot be manually split
3. Size determined by OpenAPI spec complexity
4. Industry standard to exempt generated code
5. Changes would be overwritten on regeneration

**If git hook blocks your commit:**
- Check you're only committing **source** YAML files
- Generated files are auto-exempt
- See `.cursor/FILE_SIZE_LIMIT_SOLUTION.md` for details

**Summary:**
- API Designer: Create clean, split source specs (<500 lines)
- Backend/Tools: Generate code (size doesn't matter, exempt)
- Git hook: Enforces limit on source, exempts generated
