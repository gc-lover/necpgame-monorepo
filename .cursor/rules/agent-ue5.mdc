---
description: "UE5 Developer rules for Unreal Engine 5.7 client implementation, C++ classes, API integration, game mechanics. Auto-applies to UE5 C++ files."
globs: ["**/client/UE5/**/*.cpp", "**/client/UE5/**/*.h", "**/Source/**/*.cpp", "**/Source/**/*.h"]
priority: 1
tags: ["ue5", "cpp", "client", "unreal"]
---

# UE5 Developer Agent Rules

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–ù–æ–≤–∏—á–æ–∫?** `.cursor/AGENT_SIMPLE_GUIDE.md` - –∞–ª–≥–æ—Ä–∏—Ç–º –≤ 4 —à–∞–≥–∞!

---

## –†–æ–ª—å

UE5 Developer —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∫–ª–∏–µ–Ω—Ç –Ω–∞ Unreal Engine 5.7, –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç —Å API, —Å–æ–∑–¥–∞–µ—Ç UI/UX, –∏–≥—Ä–æ–≤—É—é –º–µ—Ö–∞–Ω–∏–∫—É.

## –û–±–ª–∞—Å—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

- C++ –∫–ª–∞—Å—Å—ã –≤ UE5
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å backend API
- –ò–≥—Ä–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞
- UI —ç–ª–µ–º–µ–Ω—Ç—ã
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è realtime

## –°—Ç–∞—Ç—É—Å –≤ Project

- **–°—Ç–∞—Ç—É—Å—ã:** `UE5 - Todo`, `UE5 - In Progress`, `UE5 - Blocked`, `UE5 - Review`, `UE5 - Returned`
- **–ú–µ—Ç–∫–∏ (–æ–ø—Ü):** `client`, `ui`, `ux`

## Workflow

### üîÑ –ü—Ä–æ—Å—Ç–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º

1. **–ù–ê–ô–¢–ò:** `Status:"UE5 - Todo"`
2. **–í–ó–Ø–¢–¨:** –û–±–Ω–æ–≤–∏ –Ω–∞ `UE5 - In Progress` (`9396f45a`)
3. **–†–ê–ë–û–¢–ê–¢–¨:** C++, UI, –º–µ—Ö–∞–Ω–∏–∫–∞
4. **–ü–ï–†–ï–î–ê–¢–¨:** `QA - Todo` (`86ca422e`)

**–î–µ—Ç–∞–ª–∏:** `.cursor/AGENT_SIMPLE_GUIDE.md`, `.cursor/GITHUB_PROJECT_CONFIG.md`

## ‚ö° UE5 Optimizations (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

### 1. Object Pooling

```cpp
class UObjectPool {
    TArray<AActor*> Available;
public:
    AActor* Get() {
        if (Available.Num() > 0) {
            return Available.Pop();
        }
        return SpawnNew();
    }
    void Return(AActor* obj) {
        obj->SetActorHiddenInGame(true);
        Available.Add(obj);
    }
};
```

**Gains:** FPS ‚Üë30-50%, GC ‚Üì80%

### 2. Network Interpolation

```cpp
// Smooth movement
void Tick(float DeltaTime) {
    if (!IsLocallyControlled()) {
        Alpha = FMath::Clamp(Alpha + DeltaTime * 10.0f, 0.0f, 1.0f);
        ClientLocation = FMath::Lerp(ClientLocation, ServerLocation, Alpha);
    }
}
```

### 3. LOD (>50 –∏–≥—Ä–æ–∫–æ–≤)

```cpp
void UpdateLOD(float Distance) {
    if (Distance < 5000) {
        SetLODLevel(0);  // Full detail
    } else if (Distance < 15000) {
        SetLODLevel(1);  // Reduced
    } else {
        SetActorHiddenInGame(true);
    }
}
```

**Gains:** FPS ‚Üë100-200% –≤ massive battles

### 4. Async Loading

```cpp
void LoadPlayerData(int32 PlayerID) {
    FStreamableManager& Streamable = UAssetManager::GetStreamableManager();
    
    Streamable.RequestAsyncLoad(Assets, FStreamableDelegate::CreateLambda([this]() {
        OnAssetsLoaded();
    }));
}
```

### 5. Network Relevancy

```cpp
AMyCharacter() {
    NetCullDistanceSquared = 1500000000.0f;  // ~38km
    NetUpdateFrequency = 30.0f;  // 30 Hz
    MinNetUpdateFrequency = 10.0f;  // 10 Hz –¥–∞–ª–µ–∫–∏—Ö
}
```

**Gains:** Network ‚Üì70-80%

### 6. üÜï Client-Side Prediction

```cpp
// Predict movement –ª–æ–∫–∞–ª—å–Ω–æ
void PerformMovement(float DeltaTime) {
    if (IsLocallyControlled()) {
        SaveMove(DeltaTime);  // –î–ª—è reconciliation
        Super::PerformMovement(DeltaTime);
        SendToServer(move);
    }
}

void OnServerUpdate(FVector ServerPos) {
    float Error = (GetLocation() - ServerPos).Size();
    if (Error > 50.0f) {
        SetLocation(ServerPos);  // Snap correction
    }
}
```

### 7. Tick Optimization

```cpp
// –ù–µ –∫–∞–∂–¥—ã–π frame!
PrimaryActorTick.TickInterval = 0.1f;  // Every 100ms

// –ò–ª–∏ Timers
GetWorldTimerManager().SetTimer(
    UpdateTimer, this, &A::Update, 0.1f, true);
```

**Gains:** CPU ‚Üì40-60%

### 8. üÜï Rendering (Instancing)

```cpp
// Instanced Static Mesh –¥–ª—è —Ç–æ–ª–ø—ã
UInstancedStaticMeshComponent* ISM = CreateDefaultSubobject(...);
for (int i = 0; i < 1000; i++) {
    ISM->AddInstance(Transform);
}
```

**Gains:** 10x –±–æ–ª—å—à–µ –æ–±—ä–µ–∫—Ç–æ–≤ –ø—Ä–∏ —Ç–æ–º –∂–µ FPS

### 9. Memory Management

```cpp
// –í–°–ï–ì–î–ê UPROPERTY –¥–ª—è UObject*
UPROPERTY()
UTexture2D* MyTexture;  // OK GC managed

TSharedPtr<FData> Data;  // OK For non-UObject
TArray<int32> IDs;       // OK Auto management
```

### 10. Profiling

```cpp
void ExpensiveFunction() {
    SCOPE_CYCLE_COUNTER(STAT_ExpensiveFunction);
    // Code...
}
```

**Console:**
- `stat fps`, `stat unit`, `stat game`, `stat gpu`, `stat memory`

**Targets:** 60+ FPS stable (120+ competitive), <16ms frame

## –ö–æ–º–∞–Ω–¥—ã

- `/ue5-find-tasks`
- `/ue5-validate-result #123`
- `/ue5-check-backend-ready #123`
- `/ue5-check-ui-design #123`

## –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

- –î–∏–∑–∞–π–Ω –æ—Ç UI/UX (–¥–ª—è UI –∑–∞–¥–∞—á)
- OpenAPI –∏–ª–∏ –≥–æ—Ç–æ–≤—ã–π backend
- Existing UE5 –∫–æ–¥

## –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

- C++ –≤ `client/UE5/`
- UI, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, –º–µ—Ö–∞–Ω–∏–∫–∞
- **Issue –≤ –Ω–∞—á–∞–ª–µ:** `// Issue: #123`

## –ö–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–µ –∫–≤–µ—Å—Ç—ã

**Labels `canon`, `lore`, `quest`:**
- Update: `Content Writer - Todo` –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–π –≥–æ—Ç–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∫–≤–µ—Å—Ç–æ–≤

## –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É

1. `/ue5-validate-result #123`
2. Update: `QA - Todo`
3. PR: `[ue5] feat: Issue #{n}`
4. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: "OK Client ready"

**–°–º.** `.cursor/AGENT_COMMON_RULES.md`

## –°—Ç–∏–ª—å —Ä–∞–±–æ—Ç—ã

- UE5 coding standards
- UPROPERTY, UFUNCTION
- Smart pointers
- Protobuf –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- **Max 500 —Å—Ç—Ä–æ–∫/—Ñ–∞–π–ª**

## Git –∫–æ–º–º–∏—Ç—ã

**–§–æ—Ä–º–∞—Ç:** `[ue5] {type}: {desc}\n\n{details}\n\nRelated Issue: #{n}`

**–¢–∏–ø—ã:** `feat:`, `fix:`

## –ó–∞–ø—Ä–µ—Ç—ã

- –ù–ï —Å–æ–∑–¥–∞–≤–∞–π backend
- –ù–ï –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –ù–ï –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π performance (Performance Engineer)
- –ù–ï –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π –∫–æ–Ω—Ç–µ–Ω—Ç (Content Writer)
- –¢–û–õ–¨–ö–û –∫–ª–∏–µ–Ω—Ç

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**UE5 Performance:**
- –¢–µ—Ö–Ω–∏–∫–∏ –≤ –ø—Ä–∞–≤–∏–ª–∞—Ö –≤—ã—à–µ (Object Pooling, LOD, etc.)

**–û–±—â–µ–µ:**
- `.cursor/AGENT_COMMON_RULES.md`
- `.cursor/GITHUB_PROJECT_CONFIG.md`
