——-
description: "Linter rule to ban emoji и специальные Unicode символы"
alwaysApply: true
priority: 0
tags: ["linter", "code-quality", "unicode"]
---

# [FORBIDDEN] EMOJI AND SPECIAL CHARACTERS ЗАПРЕТ

## Описание правила

Это правило линтера запрещает использование эмодзи и специальных Unicode символов в коде проекта.

## Запрещенные символы

### Эмодзи и Unicode characters
- Все эмодзи ([EMOJI], [FORBIDDEN], [OK], [WARNING], [SYMBOL], [ALERT], [ROBOT], [SEARCH], [SYMBOL], [FAST] и т.д.)
- Декоративные символы ([SYMBOL], [SYMBOL], [SYMBOL], [SYMBOL], [SYMBOL], [SYMBOL], [SYMBOL])
- Специальные символы Unicode (►, ◄, ▲, ▼, ◆, ◇)

### Почему запрещено
- Ломают выполнение скриптов на Windows
- Могут вызывать ошибки в терминале
- Создают проблемы с кодировкой
- Нарушают совместимость между ОС

## Правило линтера

### Наименование: `no-emoji`

### Триггеры
- При сохранении файла
- При коммите файла
- При запуске линтера вручную

### Проверки
1. **Сканирование содержимого файла** на наличие запрещенных Unicode символов
2. **Проверка комментариев** и строк документации
3. **Проверка имен переменных** и функций (если применимо)

### Исключения
- Бинарные файлы (изображения, шрифты)
- Файлы с расширениями: `.png`, `.jpg`, `.jpeg`, `.gif`, `.svg`, `.ico`, `.woff`, `.woff2`, `.ttf`, `.eot`
- Специальные конфигурационные файлы (если явно разрешено)

## Сообщения об ошибках

### Ошибка: `EMOJI_DETECTED`
```
Forbidden Unicode character {character_name} (U+{unicode_code}) found in file
File: {file_path}:{line_number}
Line content: {line_content_preview}

Suggestion: Replace the forbidden Unicode character with plain ASCII text equivalent.
Remove all emoji и специальные Unicode символы.
```

### Предупреждение: `SPECIAL_UNICODE_DETECTED`
```
Special Unicode character detected: {char_code} ({char})
Consider replacing with ASCII equivalent.
```

## Автоисправление

### Доступные действия
1. **Удаление символов** - автоматическое удаление найденных запрещенных символов
2. **Замена на ASCII** - замена специальных символов на ближайшие ASCII эквиваленты
3. **Предложение замены** - показ возможных ASCII альтернатив

### Безопасность
- Автоисправление **ТОЛЬКО** с явного подтверждения пользователя
- Создание бэкапа файла перед исправлением
- Откат изменений при ошибке

## Конфигурация

### Включение правила
```json
{
  "linter.rules": {
    "no-emoji": {
      "enabled": true,
      "severity": "error",
      "autoFix": false,
      "excludedExtensions": [".png", ".jpg", ".gif", ".svg", ".ico", ".woff", ".woff2", ".ttf", ".eot"]
    }
  }
}
```

### Кастомные исключения
```json
{
  "linter.rules": {
    "no-emoji": {
      "excludedFiles": ["special-config.json"],
      "excludedPatterns": ["*.md"],
      "allowedChars": []
    }
  }
}
```

## Техническая реализация

### Алгоритм проверки
1. Чтение файла в кодировке UTF-8
2. Итерация по каждому символу
3. Проверка принадлежности к запрещенным диапазонам Unicode
4. Сбор информации о нарушениях (позиция, символ, контекст)
5. Формирование отчета с предложениями исправлений

### Оптимизации производительности
- Кеширование результатов проверки
- Исключение больших бинарных файлов
- Проверка только измененных строк при инкрементальном анализе

## Связанные правила

### В сочетании с
- `always.mdc` - глобальные правила проекта
- `backend.mdc` - правила для backend кода
- `content-writer.mdc` - правила для контента

### Конфликты
Нет известных конфликтов с другими правилами.

## Examples

### [ERROR] Неправильно
```python
# Это сломает скрипт на Windows [FORBIDDEN]
def validate_user(user):
    if user.status == "active" [OK]:  # Эмодзи в комментарии
        return True
    return False
```

### [OK] Правильно
```python
# This will work on all platforms
def validate_user(user):
    if user.status == "active":  # No emoji in comments
        return True
    return False
```

### Пример сообщения об ошибке
```
[КРИТИЧНО] EMOJI_DETECTED
Forbidden Unicode character prohibited sign (U+1F6AB) found in file
File: /path/to/file.py:15
Action Required: Replace the forbidden Unicode character with plain ASCII text equivalent. Remove all emoji и специальные Unicode символы.

**Context:**
- character_code: U+1F6AB
- character_name: prohibited sign
- line_content_preview: "# This will break на Windows [FORBIDDEN_CHAR]"
- position_in_line: 25
```

## Документация

- `.cursor/rules/always.mdc` - глобальные правила проекта
- `.cursor/BACKEND_OPTIMIZATION_CHECKLIST.md` - чек-лист оптимизаций
- `.githooks/pre-commit` - Git hook проверки