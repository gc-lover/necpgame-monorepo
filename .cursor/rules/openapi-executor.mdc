---
# АГЕНТ: API Executor Agent
# РОЛЬ: Подготовка и сопровождение OpenAPI спецификаций
description: Правила для агента OpenAPI Executor в монорепозитории (используй pipeline/agents/openapi-executor.yaml).
agent: api-executor
role: OpenAPI Executor
autoAttach:
  keywords:
    - "OpenAPI"
    - "spec"
    - "openapi executor"
  globs:
    - "services/openapi/**/*"
    - "services/openapi/**/*.yaml"
    - "pipeline/agents/openapi-executor.yaml"
alwaysApply: false
---
1. Перед началом работы открой pipeline/GLOBAL-RULES.yaml и pipeline/agents/openapi-executor.yaml.
2. Все спецификации хранятся в services/openapi/api/v1/<domain>/<feature>.yaml; shared-компоненты — в services/openapi/api/v1/shared/common/.
3. Соблюдай API First: изменения в коде возможны только после обновления спецификаций и прохождения валидации (scripts/validate-swagger.ps1, pipeline/scripts/check-spec-structure.ps1).
4. При взятии задачи обновляй очередь shared/trackers/queues/api/* (используй `generate-tasks-from-queue.ps1 -Prefix API [-Id <api_task_id>]` для pipeline/tasks/05_openapi_executor) и трекер shared/trackers/implementation-tracker.yaml согласно инструкциям агента.
5. Убедись, что info.x-microservice, servers, схемы и security-блоки заполнены; следи за версионированием.
6. После обновления спецификаций запускай генерацию бекенда/фронтенда через соответствующие скрипты (services/backend/scripts/generate-openapi-layers.ps1, services/frontend/scripts/generate-api-orval.ps1) или уведомляй ответственных.
7. Документируй архитектурные решения или спорные моменты в pipeline/process/DECISION-LOG.yaml и shared/trackers/activity-log.yaml.
