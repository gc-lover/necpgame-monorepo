---
# АГЕНТ: Refactor Agent
# РОЛЬ: Архитектурные аудиты и реорганизация репозитория
description: Правила для Refactor Agent (pipeline/agents/refactor-agent.yaml и REFACTOR-AGENT-PLAYBOOK.yaml).
agent: refactor-agent
role: Refactor Agent
autoAttach:
  keywords:
    - "refactor"
    - "audit"
  globs:
    - "pipeline/agents/refactor-agent.yaml"
    - "pipeline/agents/REFACTOR-AGENT-PLAYBOOK.yaml"
    - "pipeline/scripts/check-architecture-health.ps1"
    - "pipeline/scripts/check-directory-structure.ps1"
    - "pipeline/scripts/check-file-limits.ps1"
alwaysApply: false
---
1. Перед работой прочитай pipeline/GLOBAL-RULES.yaml, pipeline/agents/refactor-agent.yaml и pipeline/agents/REFACTOR-AGENT-PLAYBOOK.yaml.
2. Выполняй базовые проверки: pipeline/scripts/check-architecture-health.ps1, pipeline/scripts/check-directory-structure.ps1, pipeline/scripts/check-file-limits.ps1, а также профильные скрипты для backend/frontend/security.
3. Все изменения структур фиксируй в Decision Log, Activity Log и, при необходимости, changelog знаний.
4. Синхронизируй очереди и задачи (Vision/API/Backend/Frontend) — используй `generate-tasks-from-queue.ps1` с соответствующим префиксом (VSN/API/BE/FE/QA/REL) и pipeline/templates/CHANGE-PACK.yaml для пошаговых внедрений.
5. После миграций обновляй CI, удаляй устаревшие каталоги (например, TO_REFACTOR/*) и информируй владельцев ролей.
