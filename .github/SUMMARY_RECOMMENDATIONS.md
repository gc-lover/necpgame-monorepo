# Итоговые рекомендации по полям и веткам

## Кастомные поля в GitHub Project

### ✅ УЖЕ ЕСТЬ (достаточно)
1. **Developmen Stage** - этап разработки (idea-writer, architect, ...)
2. **Status** - Todo / In Progress / Done
3. **Labels** - все метки (agent:*, stage:*, priority:*, component:*)

### ➕ РЕКОМЕНДУЕТСЯ ДОБАВИТЬ
1. **Branch** (Text) - название ветки для задачи
   - Автоматически заполняется при создании ветки
   - Формат: `feature/issue-{number}-{description}`
   - Полезно для быстрой навигации к коду

### ⚠️ ОПЦИОНАЛЬНО (если нужны метрики)
2. **Blocked By** (Linked Issues) - блокирующие задачи
3. **Estimated Time** (Number) - оценка времени
4. **Actual Time** (Number) - реальное время
5. **Last Agent Activity** (Date) - последняя активность

### ❌ НЕ НУЖНО
- **Assigned Agent** - дублирует метки `agent:*`
- **Priority** - уже есть в метках `priority-*`
- **Component** - уже есть в метках `backend`, `client`, etc.

## Стратегия веток

### ✅ РЕКОМЕНДУЕМЫЙ ПОДХОД

**Одна ветка на одну задачу (Issue)**

```
feature/issue-{number}-{short-description}
```

**Примеры:**
- `feature/issue-42-inventory-system`
- `feature/issue-55-character-creation`
- `feature/issue-78-quest-system`

### Как это работает

1. **Создание ветки:**
   - Автоматически при добавлении метки `ready-for-dev`
   - Или при переходе к этапу `stage:idea`
   - Workflow: `.github/workflows/auto-create-branch.yml`

2. **Работа агентов:**
   - Все агенты работают в одной ветке последовательно
   - Каждый агент делает коммиты с префиксом: `[agent-name]`
   - Примеры:
     - `[idea-writer] Add quest concept`
     - `[architect] Design system architecture`
     - `[backend] Implement service`

3. **Pull Request:**
   - Создается когда все этапы завершены
   - Или когда нужен промежуточный ревью
   - Связан с Issue через `Closes #42`

4. **Merge:**
   - PR → `develop` → тестирование → `main`
   - Используется squash merge для чистоты

### ❌ НЕ РЕКОМЕНДУЕТСЯ

**Отдельные ветки для каждого агента:**
```
feature/issue-42-idea
feature/issue-42-architect
feature/issue-42-backend
...
```

**Почему:**
- Слишком много веток
- Много мерджей между этапами
- Сложно отслеживать прогресс
- Избыточно для работы в одном IDE

## Преимущества подхода

### Для полей
- ✅ Минимальный набор полей (не перегружаем Project)
- ✅ Используем метки для гибкости
- ✅ Автоматическое заполнение через workflows

### Для веток
- ✅ Простота - одна ветка на задачу
- ✅ История - видно кто что делал по префиксам
- ✅ Гибкость - можно работать параллельно если нужно
- ✅ Чистота - меньше веток, проще управление
- ✅ Автоматизация - создание веток и проверка коммитов

## Следующие шаги

### 1. Добавить поле "Branch" в Project
1. Откройте Project → Settings → Fields
2. Добавьте новое поле:
   - Тип: **Text**
   - Название: **Branch**
3. Workflow автоматически заполнит его

### 2. Настроить автоматическое создание веток
1. Workflow уже создан: `.github/workflows/auto-create-branch.yml`
2. Добавьте метку `ready-for-dev` к Issue для создания ветки
3. Или ветка создастся автоматически при переходе к `stage:idea`

### 3. Использовать префиксы в коммитах
- Каждый агент должен использовать префикс: `[agent-name]`
- Примеры: `[idea-writer]`, `[backend]`, `[ue5]`
- Это помогает отслеживать кто что делал

## Автоматизация

### Созданные workflows

1. **auto-create-branch.yml**
   - Создает ветку при добавлении метки `ready-for-dev`
   - Обновляет поле Branch в Project
   - Добавляет комментарий в Issue

2. **project-status-automation.yml**
   - Обновляет поле Developmen Stage
   - Добавляет метки агентов
   - Создает комментарии о переходах

3. **agent-stage-transition.yml**
   - Отслеживает выполнение критериев приемки
   - Автоматически переводит задачи между этапами

## Итог

**Минимальный набор полей:**
- Developmen Stage ✅
- Status ✅
- Labels ✅
- Branch ➕ (добавить)

**Стратегия веток:**
- Одна ветка на Issue ✅
- Префиксы агентов в коммитах ✅
- Автоматическое создание ✅

**Результат:**
- Простая и понятная структура
- Легко отслеживать прогресс
- Автоматизация работает
- Не перегружено лишними полями и ветками

