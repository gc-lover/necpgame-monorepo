extends: ["spectral:oas", "spectral:asyncapi"]

rules:
  # Required fields
  info-title: error
  info-version: error
  paths-defined: error

  # Security requirements
  security-defined: warning
  security-scheme-defined: error

  # Response schemas
  response-schema-defined: error
  success-response-defined: error

  # Project standards
  operation-id-camel-case: warning
  parameter-description: warning
  schema-description: warning

  # NECPGAME specific rules
  necpgame-pagination-pattern:
    description: "Ensure pagination follows project pattern"
    given: "$.paths[*][*]"
    then:
      - field: parameters
        function: schema
        functionOptions:
          schema:
            type: array
            contains:
              properties:
                name:
                  enum: ["limit", "offset"]

  necpgame-error-responses:
    description: "Standard error response schemas"
    given: "$.paths[*][*].responses"
    then:
      - field: "400"
        function: truthy
      - field: "500"
        function: truthy
