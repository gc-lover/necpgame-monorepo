version: "3.8"
services:
  keycloak:
    image: quay.io/keycloak/keycloak:24.0
    command: start-dev --http-enabled=true --hostname-strict=false
    environment:
      KEYCLOAK_ADMIN: admin
      KEYCLOAK_ADMIN_PASSWORD: admin
    ports:
      - "8080:8080"
    volumes:
      - ./realm-export:/opt/keycloak/data/import
  envoy:
    image: envoyproxy/envoy:v1.31.0
    depends_on:
      - keycloak
    ports:
      - "9901:9901"   # admin
      - "8443:8443"   # HTTPS/HTTP3
    volumes:
      - ../../envoy/envoy.yaml:/etc/envoy/envoy.yaml:ro
      - ../../envoy/certs:/etc/envoy/certs:ro


