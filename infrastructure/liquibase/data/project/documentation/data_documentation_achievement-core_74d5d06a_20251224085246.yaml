databaseChangeLog:
- changeSet:
    id: documentation-achievement-core-74d5d06a
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '5498001637841662'
        - column:
            name: doc_id
            value: backend-achievement-core
        - column:
            name: title
            value: 'Achievement System: Core Mechanics'
        - column:
            name: document_type
            value: implementation
        - column:
            name: category
            value: backend
        - column:
            name: status
            value: approved
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-08 02:38:00+00:00
        - column:
            name: concept_approved
            value: true
        - column:
            name: concept_reviewed_at
            value: 2025-11-07 01:59:00+00:00
        - column:
            name: owners
            value: '[{"role": "backend_architect", "contact": "backend@necp.game"}]'
        - column:
            name: tags
            value:
            - achievements
            - progression
            - retention
        - column:
            name: topics
            value:
            - player-engagement
            - reward-systems
        - column:
            name: related_systems
            value:
            - achievement-service
            - event-bus
            - notification-service
        - column:
            name: related_documents
            value: '[{"id": "backend-achievement-tracking", "relation": "references"},
              {"id": "backend-achievement-examples-api", "relation": "complements"}]'
        - column:
            name: source
            value: shared/docs/knowledge/implementation/backend/achievement/achievement-core.md
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - backend
            - gameplay
            - analytics
            - operations
        - column:
            name: risk_level
            value: high
        - column:
            name: content
            value: '{"metadata": {"id": "backend-achievement-core", "title": "Achievement
              System: Core Mechanics", "document_type": "implementation", "category":
              "backend", "status": "approved", "version": "1.0.0", "last_updated":
              "2025-11-08T02:38:00+00:00", "concept_approved": true, "concept_reviewed_at":
              "2025-11-07T01:59:00+00:00", "owners": [{"role": "backend_architect",
              "contact": "backend@necp.game"}], "tags": ["achievements", "progression",
              "retention"], "topics": ["player-engagement", "reward-systems"], "related_systems":
              ["achievement-service", "event-bus", "notification-service"], "related_documents":
              [{"id": "backend-achievement-tracking", "relation": "references"}, {"id":
              "backend-achievement-examples-api", "relation": "complements"}], "source":
              "shared/docs/knowledge/implementation/backend/achievement/achievement-core.md",
              "visibility": "internal", "audience": ["backend", "gameplay", "analytics",
              "operations"], "risk_level": "high"}, "review": {"chain": [{"role":
              "backend_lead", "reviewer": "", "reviewed_at": "", "status": "pending"}],
              "next_actions": []}, "summary": {"problem": "Нужна масштабируемая система
              достижений, поддерживающая сотни сценариев и удержание игроков.", "goal":
              "Описать ядро подсистемы достижений с типами, категориями, моделями
              данных и редкостями наград.", "essence": "Документ фиксирует архитектуру
              обработки событий, структуру категорий, схему данных и правила наград.",
              "key_points": ["Единый обработчик событий с асинхронными слушателями
              и проверкой условий.", "Поддержка одноразовых, прогрессивных, сезонных,
              скрытых и метадостижений.", "Нормализованная схема БД с таблицами `achievements`,
              `player_achievements`, `achievement_categories`.", "Редкости задают
              стоимость в очках и визуальные параметры наград."]}, "content": {"sections":
              [{"id": "architecture", "title": "Архитектура и поток событий", "body":
              "Игровые события публикуются в Event Bus, где асинхронный Achievement
              Listener сопоставляет их с релевантными достижениями, обновляет прогресс,
              проверяет условия и выдаёт награды. После unlock создаются уведомления
              для UI.\n", "mechanics_links": [], "assets": []}, {"id": "achievement_types",
              "title": "Типы достижений", "body": "Система поддерживает одноразовые,
              прогрессивные с тировой шкалой, скрытые, сезонные и метадостижения.
              Каждый тип определяет способ подсчёта и отображения, а также влияет
              на UX (например, скрытые не раскрываются до получения).\n", "mechanics_links":
              [], "assets": []}, {"id": "categories", "title": "Категории и примеры",
              "body": "Категории охватывают Combat, Quests, Social, Economy, Exploration,
              Skills, Collections и Special. Для каждой категории заданы примеры и
              подсистемы: убийства, репутация, коллекции, скрытые точки и пр.\n",
              "mechanics_links": [], "assets": []}, {"id": "data_model", "title":
              "Схема данных", "body": "Таблица `achievements` хранит описание, тип,
              условия, награды и параметры отображения. `player_achievements` содержит
              прогресс, статус, временные метки и контекст. `achievement_categories`
              управляет сортировкой и иконографикой категорий. Предусмотрены индексы
              по категории, типу, редкости и сезонности.\n", "mechanics_links": [],
              "assets": []}, {"id": "rarity_rewards", "title": "Редкости и награды",
              "body": "Редкости COMMON -> LEGENDARY задают диапазон очков (10-250)
              и цветов. Награды включают титулы, косметику, перки, валюту и предметы.
              Приведён формат JSON для описания условий и наград.\n", "mechanics_links":
              [], "assets": []}, {"id": "integration", "title": "Интеграция сервисов",
              "body": "AchievementService взаимодействует с репозиторием, событийной
              шиной и Notification Service. Представлен пример сервиса с методами
              `trackProgress`, `unlockAchievement`, `grantRewards` и интеграцией с
              аналитикой.\n", "mechanics_links": [], "assets": []}]}, "appendix":
              {"glossary": [], "references": [], "decisions": []}, "implementation":
              {"needs_task": false, "github_issue": 78, "queue_reference": ["shared/trackers/queues/concept/queued.yaml"],
              "blockers": []}, "history": [{"version": "1.0.0", "date": "2025-11-07",
              "author": "ai_brain_manager", "changes": "Задокументировано ядро системы
              достижений, типы, категории и схема данных."}], "validation": {"checksum":
              "", "schema_version": "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "backend-achievement-core", "title": "Achievement System:
              Core Mechanics", "document_type": "implementation", "category": "backend",
              "status": "approved", "version": "1.0.0", "last_updated": "2025-11-08T02:38:00+00:00",
              "concept_approved": true, "concept_reviewed_at": "2025-11-07T01:59:00+00:00",
              "owners": [{"role": "backend_architect", "contact": "backend@necp.game"}],
              "tags": ["achievements", "progression", "retention"], "topics": ["player-engagement",
              "reward-systems"], "related_systems": ["achievement-service", "event-bus",
              "notification-service"], "related_documents": [{"id": "backend-achievement-tracking",
              "relation": "references"}, {"id": "backend-achievement-examples-api",
              "relation": "complements"}], "source": "shared/docs/knowledge/implementation/backend/achievement/achievement-core.md",
              "visibility": "internal", "audience": ["backend", "gameplay", "analytics",
              "operations"], "risk_level": "high"}'
        - column:
            name: source_file
            value: knowledge\implementation\backend\achievement\achievement-core.yaml
