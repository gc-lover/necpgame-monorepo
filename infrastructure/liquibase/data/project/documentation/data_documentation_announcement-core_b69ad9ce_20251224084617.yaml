databaseChangeLog:
- changeSet:
    id: documentation-announcement-core-b69ad9ce
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '8977224698436285'
        - column:
            name: doc_id
            value: announcement-core
        - column:
            name: title
            value: Архитектура системы объявлений - Основная структура
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.1.0
        - column:
            name: last_updated
            value: 2025-11-30 20:30:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - live-ops
            - communications
            - announcements
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value:
            - announcement-service
            - notification-service
            - admin-api
            - player-service
        - column:
            name: related_documents
            value: '[{"id": "backend-announcement-system", "relation": "implements"},
              {"id": "announcement-mechanics", "relation": "extends"}, {"id": "announcement-data-flows",
              "relation": "extends"}, {"id": "announcement-database", "relation":
              "extends"}, {"id": "announcement-integrations", "relation": "extends"},
              {"id": "announcement-technical", "relation": "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - live-ops
            - api-designer
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "announcement-core", "title": "Архитектура
              системы объявлений - Основная структура", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.1.0", "last_updated":
              "2025-11-30T20:30:00+00:00", "owners": [{"role": "architect", "contact":
              "architect@necp.game"}], "tags": ["architecture", "live-ops", "communications",
              "announcements"], "related_systems": ["announcement-service", "notification-service",
              "admin-api", "player-service"], "related_documents": [{"id": "backend-announcement-system",
              "relation": "implements"}, {"id": "announcement-mechanics", "relation":
              "extends"}, {"id": "announcement-data-flows", "relation": "extends"},
              {"id": "announcement-database", "relation": "extends"}, {"id": "announcement-integrations",
              "relation": "extends"}, {"id": "announcement-technical", "relation":
              "extends"}], "github_issue": 323, "visibility": "internal", "audience":
              ["architect", "backend", "live-ops", "api-designer"]}, "summary": {"problem":
              "Требуется спроектировать полную архитектуру системы объявлений, включающую:\n-
              Управление новостями, патчноутами, событиями\n- Систему публикации объявлений\n-
              Систему доставки объявлений (много канальная)\n- Систему таргетинга\n-
              Систему учёта прочтений\n- Интеграции с уведомлениями и админ-панелью\n",
              "goal": "Создать архитектурную схему системы объявлений с определением:\n-
              Компонентов для управления объявлениями\n- REST, WebSocket и Event Bus
              контрактов\n- Интеграций с другими системами\n- Структуры БД\n- Технического
              задания для реализации\n", "essence": "Полная архитектура системы объявлений
              с поддержкой публикации, доставки,\nтаргетинга и учёта прочтений.\n"},
              "architecture": {"overview": "Архитектура системы объявлений состоит
              из следующих компонентов:\n1. Announcement Manager - управление системой
              объявлений\n2. Announcement Publisher - публикация объявлений\n3. Announcement
              Scheduler - планирование публикации\n4. Announcement Delivery Manager
              - управление доставкой\n5. Announcement Targeting Manager - управление
              таргетингом\n6. Announcement Read Tracker - учёт прочтений\n7. Patch
              Notes Manager - управление патчноутами\n8. News Feed Manager - управление
              новостной лентой\n9. Announcement Analytics Collector - сбор аналитики\n10.
              Announcement Telemetry Collector - сбор телеметрии\n", "microservices":
              [{"name": "announcement-service", "port": 8094, "responsibility": "Обработка
              системы объявлений:\n- Управление системой объявлений\n- Публикация
              объявлений\n- Планирование публикации\n- Управление доставкой\n- Управление
              таргетингом\n- Учёт прочтений\n- Управление патчноутами\n- Управление
              новостной лентой\n- Сбор аналитики\n- Сбор телеметрии\n", "components":
              [{"announcement-manager": "управление системой объявлений"}, {"announcement-publisher":
              "публикация объявлений"}, {"announcement-scheduler": "планирование публикации"},
              {"announcement-delivery-manager": "управление доставкой"}, {"announcement-targeting-manager":
              "управление таргетингом"}, {"announcement-read-tracker": "учёт прочтений"},
              {"patch-notes-manager": "управление патчноутами"}, {"news-feed-manager":
              "управление новостной лентой"}, {"announcement-analytics-collector":
              "сбор аналитики"}, {"announcement-telemetry-collector": "сбор телеметрии"}],
              "endpoints": ["GET /api/v1/announcements - список объявлений", "GET
              /api/v1/announcements/{announcementId} - информация об объявлении",
              "POST /api/v1/announcements - создание объявления", "PUT /api/v1/announcements/{announcementId}
              - обновление объявления", "DELETE /api/v1/announcements/{announcementId}
              - удаление объявления", "POST /api/v1/announcements/{announcementId}/publish
              - публикация объявления", "POST /api/v1/announcements/{announcementId}/schedule
              - планирование публикации", "GET /api/v1/announcements/{characterId}/feed
              - новостная лента персонажа", "GET /api/v1/announcements/{characterId}/unread
              - непрочитанные объявления", "POST /api/v1/announcements/{announcementId}/read
              - отметка о прочтении", "GET /api/v1/announcements/patch-notes - список
              патчноутов", "GET /api/v1/announcements/patch-notes/{version} - патчноут
              по версии", "POST /api/v1/announcements/patch-notes - создание патчноута",
              "GET /api/v1/announcements/{characterId}/stats - статистика объявлений"],
              "websocket_channels": ["wss://api.necp.game/v1/announcements/{characterId}
              - поток новых объявлений персонажа"], "events_published": [{"announcement.created":
              "создано объявление"}, {"announcement.updated": "обновлено объявление"},
              {"announcement.published": "опубликовано объявление"}, {"announcement.scheduled":
              "запланировано объявление"}, {"announcement.delivered": "доставлено
              объявление"}, {"announcement.read": "прочитано объявление"}, {"announcement.patch-notes-published":
              "опубликован патчноут"}], "events_subscribed": [{"character.created":
              "создан персонаж"}, {"character.level-up": "повышение уровня персонажа"},
              {"maintenance.started": "начато обслуживание"}, {"maintenance.ended":
              "завершено обслуживание"}, {"event.started": "начато событие"}, {"event.ended":
              "завершено событие"}]}]}}'
        - column:
            name: metadata
            value: '{"id": "announcement-core", "title": "Архитектура системы объявлений
              - Основная структура", "document_type": "architecture", "category":
              "systems", "status": "draft", "version": "1.1.0", "last_updated": "2025-11-30T20:30:00+00:00",
              "owners": [{"role": "architect", "contact": "architect@necp.game"}],
              "tags": ["architecture", "live-ops", "communications", "announcements"],
              "related_systems": ["announcement-service", "notification-service",
              "admin-api", "player-service"], "related_documents": [{"id": "backend-announcement-system",
              "relation": "implements"}, {"id": "announcement-mechanics", "relation":
              "extends"}, {"id": "announcement-data-flows", "relation": "extends"},
              {"id": "announcement-database", "relation": "extends"}, {"id": "announcement-integrations",
              "relation": "extends"}, {"id": "announcement-technical", "relation":
              "extends"}], "github_issue": 323, "visibility": "internal", "audience":
              ["architect", "backend", "live-ops", "api-designer"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\announcement-core.yaml
