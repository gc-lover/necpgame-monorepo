databaseChangeLog:
- changeSet:
    id: documentation-announcement-technical-3330041d
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '8304630060267836'
        - column:
            name: doc_id
            value: announcement-technical
        - column:
            name: title
            value: Архитектура системы объявлений - Техническое задание
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.1.0
        - column:
            name: last_updated
            value: 2025-11-30 20:30:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[]'
        - column:
            name: tags
            value: []
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value: []
        - column:
            name: related_documents
            value: '[{"id": "announcement-core", "relation": "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: ''
        - column:
            name: audience
            value: []
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "announcement-technical", "title": "Архитектура
              системы объявлений - Техническое задание", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.1.0", "last_updated":
              "2025-11-30T20:30:00+00:00", "github_issue": 323, "related_documents":
              [{"id": "announcement-core", "relation": "extends"}]}, "technical_specification":
              {"subtasks": [{"id": "announcement-manager", "title": "Реализация менеджера
              системы объявлений", "description": "Реализация Announcement Manager
              с управлением системой объявлений\nи интеграцией с другими компонентами.\n",
              "dependencies": [], "estimated_effort": "4 days"}, {"id": "announcement-publisher",
              "title": "Реализация публикатора объявлений", "description": "Реализация
              Announcement Publisher с публикацией объявлений,\nуправлением статусами
              и валидацией.\n", "dependencies": ["announcement-manager"], "estimated_effort":
              "4 days"}, {"id": "announcement-scheduler", "title": "Реализация планировщика
              публикации", "description": "Реализация Announcement Scheduler с планированием
              публикации,\nавтоматическим запуском и управлением расписанием.\n",
              "dependencies": ["announcement-manager"], "estimated_effort": "4 days"},
              {"id": "announcement-delivery-manager", "title": "Реализация менеджера
              доставки", "description": "Реализация Announcement Delivery Manager
              с управлением доставкой,\nвыбором каналов и интеграцией с Notification
              Service.\n", "dependencies": ["announcement-manager"], "estimated_effort":
              "5 days"}, {"id": "announcement-targeting-manager", "title": "Реализация
              менеджера таргетинга", "description": "Реализация Announcement Targeting
              Manager с управлением таргетингом,\nфильтрацией аудитории и проверкой
              критериев.\n", "dependencies": ["announcement-manager"], "estimated_effort":
              "4 days"}, {"id": "announcement-read-tracker", "title": "Реализация
              трекера прочтений", "description": "Реализация Announcement Read Tracker
              с учётом прочтений,\nотслеживанием взаимодействий и сбором метрик.\n",
              "dependencies": ["announcement-manager"], "estimated_effort": "4 days"},
              {"id": "patch-notes-manager", "title": "Реализация менеджера патчноутов",
              "description": "Реализация Patch Notes Manager с управлением патчноутами,\nверсионированием
              и отображением.\n", "dependencies": ["announcement-manager"], "estimated_effort":
              "4 days"}, {"id": "news-feed-manager", "title": "Реализация менеджера
              новостной ленты", "description": "Реализация News Feed Manager с управлением
              новостной лентой,\nсортировкой и фильтрацией объявлений.\n", "dependencies":
              ["announcement-manager"], "estimated_effort": "3 days"}, {"id": "announcement-analytics-collector",
              "title": "Реализация сборщика аналитики", "description": "Реализация
              Announcement Analytics Collector с логированием операций,\nсбором метрик
              и интеграцией с Analytics Service.\n", "dependencies": ["announcement-manager"],
              "estimated_effort": "3 days"}, {"id": "announcement-telemetry-collector",
              "title": "Реализация сборщика телеметрии", "description": "Реализация
              Announcement Telemetry Collector с логированием событий,\nсбором телеметрии
              и интеграцией с Analytics Service.\n", "dependencies": ["announcement-manager"],
              "estimated_effort": "2 days"}, {"id": "websocket-channels", "title":
              "Реализация WebSocket каналов", "description": "Реализация WebSocket
              каналов для realtime обновлений объявлений,\nновостной ленты и уведомлений.\n",
              "dependencies": ["announcement-manager"], "estimated_effort": "3 days"},
              {"id": "event-bus-integration", "title": "Интеграция с Event Bus", "description":
              "Реализация публикации и подписки на события через Kafka\nдля всех компонентов
              системы объявлений.\n", "dependencies": ["announcement-manager"], "estimated_effort":
              "2 days"}, {"id": "database-schema", "title": "Создание схемы БД", "description":
              "Создание таблиц БД для объявлений, прочтений, патчноутов\nи телеметрии
              с миграциями Liquibase.\n", "dependencies": [], "estimated_effort":
              "3 days"}]}, "diagrams": {"component_diagram": "```mermaid\ngraph TB\n    Client[UE5
              Client] --> Gateway[API Gateway]\n\n    Gateway --> AnnouncementService[Announcement
              Service<br/>8094]\n\n    AnnouncementService --> AM[Announcement Manager]\n    AnnouncementService
              --> AP[Announcement Publisher]\n    AnnouncementService --> AS[Announcement
              Scheduler]\n    AnnouncementService --> ADM[Announcement Delivery Manager]\n    AnnouncementService
              --> ATM[Announcement Targeting Manager]\n    AnnouncementService -->
              ART[Announcement Read Tracker]\n    AnnouncementService --> PNM[Patch
              Notes Manager]\n    AnnouncementService --> NFM[News Feed Manager]\n    AnnouncementService
              --> AAC[Announcement Analytics Collector]\n    AnnouncementService -->
              ATC[Announcement Telemetry Collector]\n\n    AM --> AP\n    AM --> AS\n    AM
              --> ADM\n    AM --> ATM\n    AM --> ART\n    AM --> PNM\n    AM -->
              NFM\n\n    AnnouncementService --> AdminAPI[Admin API]\n    AnnouncementService
              --> NotificationService[Notification Service]\n    AnnouncementService
              --> PlayerService[Player Service]\n    AnnouncementService --> CharacterService[Character
              Service]\n    AnnouncementService --> MaintenanceService[Maintenance
              Service]\n    AnnouncementService --> EventService[Event Service]\n    AnnouncementService
              --> AnalyticsService[Analytics Service]\n\n    AnnouncementService -->
              EventBus[Event Bus<br/>Kafka]\n    EventBus --> RealtimeGateway[Realtime
              Gateway]\n\n    AnnouncementService --> DB[(Announcement DB)]\n\n    Client
              --> WSAnnouncements[WebSocket<br/>Announcements]\n    WSAnnouncements
              --> AnnouncementService\n```\n", "publication_flow_diagram": "```mermaid\nsequenceDiagram\n    participant
              Admin as Administrator\n    participant AP as Announcement Publisher\n    participant
              ATM as Announcement Targeting Manager\n    participant AS as Announcement
              Scheduler\n    participant ADM as Announcement Delivery Manager\n    participant
              EB as Event Bus\n\n    Admin->>AP: Create announcement\n    AP->>AP:
              Save to DB\n    AP->>ATM: Setup targeting\n    AP->>AS: Schedule publication\n    AS->>AS:
              Wait for scheduled time\n    AS->>AP: Publish announcement\n    AP->>ADM:
              Deliver announcement\n    AP->>EB: Publish announcement.published\n```\n",
              "delivery_flow_diagram": "```mermaid\nsequenceDiagram\n    participant
              ADM as Announcement Delivery Manager\n    participant ATM as Announcement
              Targeting Manager\n    participant NS as Notification Service\n    participant
              ART as Announcement Read Tracker\n    participant EB as Event Bus\n\n    ADM->>ATM:
              Get target audience\n    ATM->>ATM: Filter by criteria\n    ADM->>ADM:
              Select delivery channels\n    ADM->>ADM: Deliver in-game\n    ADM->>NS:
              Deliver push/email\n    ADM->>ART: Track delivery\n    ADM->>EB: Publish
              announcement.delivered\n```\n"}, "history": [{"version": "1.1.0", "date":
              "2025-11-30", "author": "Architect Agent", "changes": "Добавлена детальная
              синхронизация данных:\n- Event Sourcing для всех изменений состояния
              объявлений\n- CQRS Pattern для разделения команд и запросов\n- Saga
              Pattern для распределенных операций (публикация объявлений, доставка,
              отслеживание прочтений)\n- Outbox Pattern для гарантированной доставки
              событий\n- Обновлена секция data_consistency с механизмами синхронизации\n-
              Добавлена спецификация тикрейта для объявлений, публикации, доставки,
              таргетинга, отслеживания прочтений, новостной ленты, патчноутов, статистики
              и обработки событий\n"}, {"version": "1.0.0", "date": "2025-11-23",
              "author": "Architect Agent", "changes": "Создана полная архитектура
              системы объявлений:\n- Определены компоненты (Announcement Manager,
              Announcement Publisher, Announcement Scheduler, Announcement Delivery
              Manager, Announcement Targeting Manager, Announcement Read Tracker,
              Patch Notes Manager, News Feed Manager)\n- Описаны API endpoints (высокоуровнево)\n-
              Спроектированы потоки данных\n- Определена структура БД (announcements,
              player_announcement_reads, patch_notes, announcement_telemetry)\n- Спроектирована
              система публикации объявлений\n- Спроектирована система доставки объявлений\n-
              Спроектирована система таргетинга\n- Спроектирована система учёта прочтений\n-
              Создано техническое задание\n- Разбито на подзадачи\n"}]}'
        - column:
            name: metadata
            value: '{"id": "announcement-technical", "title": "Архитектура системы
              объявлений - Техническое задание", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.1.0", "last_updated":
              "2025-11-30T20:30:00+00:00", "github_issue": 323, "related_documents":
              [{"id": "announcement-core", "relation": "extends"}]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\announcement-technical.yaml
