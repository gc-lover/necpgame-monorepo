databaseChangeLog:
- changeSet:
    id: documentation-api-gateway-architecture-6891c23c
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '6390620401902324'
        - column:
            name: doc_id
            value: implementation-infrastructure-api-gateway-architecture
        - column:
            name: title
            value: API Gateway Architecture
        - column:
            name: document_type
            value: implementation
        - column:
            name: category
            value: infrastructure
        - column:
            name: status
            value: approved
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-07 00:18:00+00:00
        - column:
            name: concept_approved
            value: true
        - column:
            name: concept_reviewed_at
            value: 2025-11-07 00:18:00+00:00
        - column:
            name: owners
            value: '[{"role": "concept_director", "contact": "concept@necp.game"}]'
        - column:
            name: tags
            value:
            - api_gateway
            - microservices
            - infrastructure
        - column:
            name: topics
            value:
            - platform_architecture
            - service_mesh
        - column:
            name: related_systems
            value:
            - api-gateway
            - service-registry
            - observability-stack
        - column:
            name: related_documents
            value: '[{"id": "implementation-infrastructure-caching-strategy", "relation":
              "references"}, {"id": "implementation-infrastructure-database-architecture",
              "relation": "references"}]'
        - column:
            name: source
            value: shared/docs/knowledge/implementation/infrastructure/api-gateway-architecture.md
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - concept
            - platform
            - backend
        - column:
            name: risk_level
            value: high
        - column:
            name: content
            value: '{"metadata": {"id": "implementation-infrastructure-api-gateway-architecture",
              "title": "API Gateway Architecture", "document_type": "implementation",
              "category": "infrastructure", "status": "approved", "version": "1.0.0",
              "last_updated": "2025-11-07T00:18:00+00:00", "concept_approved": true,
              "concept_reviewed_at": "2025-11-07T00:18:00+00:00", "owners": [{"role":
              "concept_director", "contact": "concept@necp.game"}], "tags": ["api_gateway",
              "microservices", "infrastructure"], "topics": ["platform_architecture",
              "service_mesh"], "related_systems": ["api-gateway", "service-registry",
              "observability-stack"], "related_documents": [{"id": "implementation-infrastructure-caching-strategy",
              "relation": "references"}, {"id": "implementation-infrastructure-database-architecture",
              "relation": "references"}], "source": "shared/docs/knowledge/implementation/infrastructure/api-gateway-architecture.md",
              "visibility": "internal", "audience": ["concept", "platform", "backend"],
              "risk_level": "high"}, "review": {"chain": [{"role": "concept_director",
              "reviewer": "", "reviewed_at": "2025-11-07T00:18:00+00:00", "status":
              "approved"}], "next_actions": []}, "summary": {"problem": "Требуется
              единая точка входа для микросервисов с управлением безопасностью и нагрузкой.",
              "goal": "Описать архитектуру API Gateway, покрывающую маршрутизацию,
              балансировку, защиту и наблюдаемость.", "essence": "Spring Cloud Gateway
              обслуживает входящий трафик, применяя аутентификацию, rate limiting,
              кэширование и логирование перед передачей запросов сервисам.", "key_points":
              ["Маршруты регистрируются через сервис-дискавери и обрабатываются как
              единая конфигурация.", "Балансировка нагрузки использует Round Robin,
              Least Connections и IP Hash.", "Модули безопасности включают JWT-проверку,
              rate limiting и DDoS-защиту.", "Логи и метрики централизованы, поддерживается
              версия API и circuit breaker."]}, "content": {"sections": [{"id": "implementation_status",
              "title": "Статус реализации", "body": "Первая фаза готова в production:
              развёрнут Spring Cloud Gateway на порту 8080, подключён к Eureka и Docker
              Compose.\nЗапуск производится через `docker-compose -f docker-compose-microservices.yml
              up api-gateway`.\n", "mechanics_links": [], "assets": []}, {"id": "routing",
              "title": "Маршрутизация", "body": "Gateway принимает HTTP-запросы и
              направляет их микросервисам по шаблонам путей.\nКонфигурация содержит
              маршруты к Auth, Character, Gameplay, Social, Economy и World сервисам
              через `lb://` URI.\n", "mechanics_links": [], "assets": []}, {"id":
              "load_balancing", "title": "Балансировка нагрузки", "body": "Поддерживаются
              Round Robin, Least Connections и IP Hash.\nРегулярные health-check''и
              удаляют неработоспособные инстансы и уведомляют администраторов.\n",
              "mechanics_links": [], "assets": []}, {"id": "security", "title": "Безопасность
              и rate limiting", "body": "Gateway валидирует JWT, применяет лимиты
              на IP и пользователя, фиксирует всплески трафика и включает механизмы
              DDoS-защиты.\n", "mechanics_links": [], "assets": []}, {"id": "observability",
              "title": "Наблюдаемость и кэширование", "body": "Система логирования
              и кэширования ответов снижает задержки и упрощает анализ инцидентов.\nПоддерживается
              SSL/TLS termination, circuit breaker и версия API.\n", "mechanics_links":
              [], "assets": []}]}, "appendix": {"glossary": [], "references": [{"title":
              "Database Architecture", "link": "./database-architecture.md"}, {"title":
              "Caching Strategy", "link": "./caching-strategy.md"}], "decisions":
              []}, "implementation": {"github_issue": 136, "needs_task": false, "queue_reference":
              ["shared/trackers/queues/concept/queued.yaml#implementation-infrastructure-api-gateway-architecture"],
              "blockers": []}, "history": [{"version": "1.0.0", "date": "2025-11-06",
              "author": "AI Brain Manager", "changes": "Описана архитектура API Gateway
              и статус внедрения."}], "validation": {"checksum": "", "schema_version":
              "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "implementation-infrastructure-api-gateway-architecture",
              "title": "API Gateway Architecture", "document_type": "implementation",
              "category": "infrastructure", "status": "approved", "version": "1.0.0",
              "last_updated": "2025-11-07T00:18:00+00:00", "concept_approved": true,
              "concept_reviewed_at": "2025-11-07T00:18:00+00:00", "owners": [{"role":
              "concept_director", "contact": "concept@necp.game"}], "tags": ["api_gateway",
              "microservices", "infrastructure"], "topics": ["platform_architecture",
              "service_mesh"], "related_systems": ["api-gateway", "service-registry",
              "observability-stack"], "related_documents": [{"id": "implementation-infrastructure-caching-strategy",
              "relation": "references"}, {"id": "implementation-infrastructure-database-architecture",
              "relation": "references"}], "source": "shared/docs/knowledge/implementation/infrastructure/api-gateway-architecture.md",
              "visibility": "internal", "audience": ["concept", "platform", "backend"],
              "risk_level": "high"}'
        - column:
            name: source_file
            value: knowledge\implementation\infrastructure\api-gateway-architecture.yaml
