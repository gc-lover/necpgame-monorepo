databaseChangeLog:
- changeSet:
    id: documentation-backend-architecture-compact-aa648a89
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-131477836006441'
        - column:
            name: doc_id
            value: backend-architecture-compact
        - column:
            name: title
            value: Backend Architecture Overview
        - column:
            name: document_type
            value: implementation
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 2.1.0
        - column:
            name: last_updated
            value: 2025-11-08 12:20:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: ''
        - column:
            name: owners
            value: '[{"role": "concept_director", "contact": "concept@necp.game"}]'
        - column:
            name: tags
            value:
            - backend
            - architecture
        - column:
            name: topics
            value:
            - services
            - infrastructure
        - column:
            name: related_systems
            value:
            - api-gateway
            - auth-service
            - character-service
            - gameplay-service
            - social-service
            - economy-service
            - world-service
        - column:
            name: related_documents
            value: '[{"id": "frontend-architecture", "relation": "complements"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - concept
            - backend
        - column:
            name: risk_level
            value: medium
        - column:
            name: content
            value: '{"metadata": {"id": "backend-architecture-compact", "title": "Backend
              Architecture Overview", "document_type": "implementation", "category":
              "systems", "status": "draft", "version": "2.1.0", "last_updated": "2025-11-08T12:20:00+00:00",
              "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role":
              "concept_director", "contact": "concept@necp.game"}], "tags": ["backend",
              "architecture"], "topics": ["services", "infrastructure"], "related_systems":
              ["api-gateway", "auth-service", "character-service", "gameplay-service",
              "social-service", "economy-service", "world-service"], "related_documents":
              [{"id": "frontend-architecture", "relation": "complements"}], "source":
              "", "visibility": "internal", "audience": ["concept", "backend"], "risk_level":
              "medium"}, "review": {"chain": [{"role": "concept_director", "reviewer":
              "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary":
              {"problem": "Требуется единая компактная спецификация бэкенд-архитектуры
              для новых сервисов и ревью.", "goal": "Задать актуальную структуру микросервисов
              и принципы интеграции через API Gateway.", "essence": "Упрощённое описание
              ключевых сервисов и правил разработки бэкенда после отказа от монолита.",
              "key_points": ["Перечень основных микросервисов и точки доступа.", "Требования
              к OpenAPI спецификациям и ревью новых доменных сервисов.", "Ограничение
              прямого доступа к сервисам только dev-портами."]}, "content": {"sections":
              [{"id": "architecture-overview", "title": "Микросервисная структура",
              "body": "Бэкенд построен на наборе доменных микросервисов, каждый из
              которых развёрнут за API Gateway.\nВ production доступ разрешён только
              через gateway, локальные порты (`8081-8086`) используются\nразработчиками
              для отладки. Каждая OpenAPI спецификация должна содержать поле `info.x-microservice`\nс
              именем, портом и доменом сервиса, чтобы автоматически собирать реестр
              интеграций.\n", "mechanics_links": [], "assets": []}, {"id": "governance",
              "title": "Управление архитектурой", "body": "Монолитные компоненты удалены,
              а новые доменные сервисы проходят обязательное архитектурное ревью.\nДетализированные
              схемы и sequence diagram размещены в `shared/docs/knowledge/implementation/backend/`\nи
              `shared/docs/knowledge/implementation/architecture/`. Требуется синхронизировать
              описания перед\nрелизами и обновлять версии в OpenAPI при каждом изменении
              контрактов.\n", "mechanics_links": [], "assets": []}]}, "appendix":
              {"glossary": [], "references": [{"type": "directory", "path": "shared/docs/knowledge/implementation/backend/"},
              {"type": "directory", "path": "shared/docs/knowledge/implementation/architecture/"}],
              "decisions": [{"id": "adr-backend-microservices", "summary": "Переход
              на микросервисную архитектуру без монолитных модулей."}]}, "implementation":
              {"needs_task": false, "github_issue": 89, "queue_reference": ["shared/trackers/queues/concept/queued.yaml"],
              "blockers": []}, "history": [{"version": "2.1.0", "date": "2025-11-08",
              "author": "Concept Director", "changes": "Актуализирована компактная
              версия описания микросервисов."}, {"version": "2.0.0", "date": "2025-11-07",
              "author": "Concept Director", "changes": "Сокращена до компактного формата
              (<100 строк)."}, {"version": "1.0.0", "date": "2025-11-06", "author":
              "Concept Director", "changes": "Исходное подробное описание (522 строки)."}],
              "validation": {"checksum": "", "schema_version": "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "backend-architecture-compact", "title": "Backend Architecture
              Overview", "document_type": "implementation", "category": "systems",
              "status": "draft", "version": "2.1.0", "last_updated": "2025-11-08T12:20:00+00:00",
              "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role":
              "concept_director", "contact": "concept@necp.game"}], "tags": ["backend",
              "architecture"], "topics": ["services", "infrastructure"], "related_systems":
              ["api-gateway", "auth-service", "character-service", "gameplay-service",
              "social-service", "economy-service", "world-service"], "related_documents":
              [{"id": "frontend-architecture", "relation": "complements"}], "source":
              "", "visibility": "internal", "audience": ["concept", "backend"], "risk_level":
              "medium"}'
        - column:
            name: source_file
            value: knowledge\implementation\backend-architecture-compact.yaml
