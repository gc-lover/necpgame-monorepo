databaseChangeLog:
- changeSet:
    id: documentation-black-ice-systems-architecture-dedb348c
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-835495626854663'
        - column:
            name: doc_id
            value: black-ice-systems-architecture
        - column:
            name: title
            value: Архитектура систем Black ICE
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-29 00:00:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - black-ice
            - hacking
            - lethal
            - high-risk
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value: []
        - column:
            name: related_documents
            value: '[{"id": "cyber-network-systems-architecture", "relation": "extends"},
              {"id": "black-ice-core-architecture", "relation": "references"}, {"id":
              "black-ice-types-defense-architecture", "relation": "references"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - gameplay
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "black-ice-systems-architecture", "title":
              "Архитектура систем Black ICE", "document_type": "architecture", "category":
              "systems", "status": "draft", "version": "1.0.0", "last_updated": "2025-11-29T00:00:00+00:00",
              "owners": [{"role": "architect", "contact": "architect@necp.game"}],
              "tags": ["architecture", "black-ice", "hacking", "lethal", "high-risk"],
              "related_documents": [{"id": "cyber-network-systems-architecture", "relation":
              "extends"}, {"id": "black-ice-core-architecture", "relation": "references"},
              {"id": "black-ice-types-defense-architecture", "relation": "references"}],
              "github_issues": [1475, 1476, 1477, 1482], "visibility": "internal",
              "audience": ["architect", "backend", "gameplay"]}, "summary": {"problem":
              "Black ICE упоминается в лоре как летальная ICE-программа, но детализированная
              игровая механика\nотсутствует. Требуется система, которая реализует
              Black ICE как уникальную угрозу с\nперегрузкой нейроимплантов и психологическим
              воздействием.\n", "goal": "Спроектировать архитектуру систем Black ICE:\n-
              Основная механика перегрузки нейроимплантов\n- Типы Black ICE программ
              с уникальным поведением\n- Система защиты и контрмер\n- Интеграция с
              перегревом и последствиями\n- Психологическое воздействие через эффект
              зловещей долины\n", "essence": "Black ICE — активный хищник в цифровом
              пространстве, использующий перегрузку нейроимплантов\nдля убийства netrunner.
              Создаёт ощущение борьбы за выживание с разумным, но нечеловеческим\nпротивником.\n"},
              "architecture": {"overview": "Системы Black ICE состоят из следующих
              компонентов:\n1. Black ICE Engine - основной движок Black ICE\n2. Overload
              System - система перегрузки нейроимплантов\n3. Black ICE Types Registry
              - типы и варианты программ\n4. Defense System - демоны и импланты защиты\n5.
              Psychological Engine - психологическое воздействие\n6. Integration Layer
              - интеграция с существующей системой ICE\n", "design_principles": [{"name":
              "Lethality", "description": "Black ICE нацелена на убийство, не просто
              блокировку"}, {"name": "Active Hunting", "description": "Black ICE активно
              охотится, а не пассивно защищает"}, {"name": "Intelligence Simulation",
              "description": "Демонстрирует признаки разума, но нечеловеческую логику"},
              {"name": "Psychological Horror", "description": "Эффект зловещей долины
              для создания атмосферы ужаса"}, {"name": "Preparation Critical", "description":
              "Без защиты встреча почти всегда смертельна"}], "component_diagram":
              "```mermaid\ngraph TB\n    Client[UE5 Client] --> Gateway[API Gateway]\n\n    Gateway
              --> HackingService[Hacking Service]\n\n    HackingService --> BlackICEModule[Black
              ICE Module]\n\n    BlackICEModule --> ICEEngine[Black ICE Engine]\n    BlackICEModule
              --> OverloadSys[Overload System]\n    BlackICEModule --> TypesRegistry[Types
              Registry]\n    BlackICEModule --> DefenseSys[Defense System]\n    BlackICEModule
              --> PsychEngine[Psychological Engine]\n\n    ICEEngine --> CharacterService[Character
              Service]\n    OverloadSys --> CharacterService\n    DefenseSys --> InventoryService[Inventory
              Service]\n\n    BlackICEModule --> EventBus[Event Bus]\n    BlackICEModule
              --> DB[(Black ICE DB)]\n```\n", "microservices": [{"name": "hacking-service",
              "location": "gameplay-service (модуль hacking, подмодуль black-ice)",
              "responsibility": "Интеграция Black ICE в систему взлома:\n- Обработка
              встреч с Black ICE\n- Перегрузка нейроимплантов\n- Защита и контрмеры\n-
              Типы и варианты Black ICE\n", "endpoints": ["POST /api/v1/hacking/blackice/encounter
              - встреча с Black ICE", "POST /api/v1/hacking/blackice/{iceId}/interact
              - взаимодействие", "GET /api/v1/hacking/blackice/{iceId}/analysis -
              анализ типа", "POST /api/v1/hacking/blackice/{iceId}/defend - активация
              защиты", "POST /api/v1/hacking/blackice/{iceId}/overload - обработка
              перегрузки", "POST /api/v1/hacking/blackice/{iceId}/escape - экстренное
              отключение"]}], "components": [{"name": "black-ice-engine", "location":
              "hacking-service (black-ice-module)", "responsibility": "Основной движок
              Black ICE:\n- Управление экземплярами Black ICE\n- Обработка охоты и
              преследования\n- Координация с типами ICE\n- Интеграция с системой ICE\n",
              "estimated_lines": 450, "dependencies": ["hacking-service (ICE система)",
              "character-service"]}, {"name": "overload-system", "location": "hacking-service
              (black-ice-module)", "responsibility": "Система перегрузки нейроимплантов:\n-
              Процесс перегрузки\n- Индикация опасности\n- Критические точки\n- Система
              сопротивления\n", "estimated_lines": 400, "dependencies": ["character-service",
              "medical-service"]}, {"name": "black-ice-types-registry", "location":
              "hacking-service (black-ice-module)", "responsibility": "Реестр типов
              и вариантов Black ICE:\n- Killer, Hunter, Deception, Corruption, Collective\n-
              Уровни Alpha, Beta, Gamma\n- Уникальные способности\n- Визуальные представления\n",
              "estimated_lines": 450, "dependencies": ["black-ice-engine"]}, {"name":
              "defense-system", "location": "hacking-service (black-ice-module)",
              "responsibility": "Система защиты от Black ICE:\n- Демоны защиты\n-
              Импланты защиты\n- Оборудование\n- Тактические приёмы\n", "estimated_lines":
              400, "dependencies": ["inventory-service", "character-service"]}, {"name":
              "psychological-engine", "location": "hacking-service (black-ice-module)",
              "responsibility": "Психологическое воздействие:\n- Визуальные эффекты
              (зловещая долина)\n- Звуковые эффекты\n- Поведенческие паттерны\n- Неопределённость\n",
              "estimated_lines": 300, "dependencies": ["atmosphere-system", "character-service"]}],
              "integrations": [{"name": "hacking-service", "purpose": "Интеграция
              с существующей системой ICE и взлома", "endpoints": ["GET /api/v1/hacking/ice/types
              - типы ICE (включая blackwall)", "POST /api/v1/hacking/ice/{iceId}/analyze
              - анализ ICE"]}, {"name": "character-service", "purpose": "Применение
              последствий перегрузки, проверка навыков", "endpoints": ["POST /api/v1/characters/{id}/overload/apply",
              "GET /api/v1/characters/{id}/skills/blackice-defense"]}, {"name": "inventory-service",
              "purpose": "Проверка защиты, выдача демонов", "endpoints": ["GET /api/v1/inventory/{id}/equipment/blackice-protection",
              "GET /api/v1/inventory/{id}/demons/defense"]}, {"name": "medical-service",
              "purpose": "Лечение последствий встречи", "endpoints": ["POST /api/v1/medical/overload-damage/treat",
              "POST /api/v1/medical/neural-damage/treat"]}, {"name": "event-bus",
              "purpose": "Публикация событий встреч с Black ICE", "events": ["blackice.encountered",
              "blackice.overload.started", "blackice.overload.critical", "blackice.defended",
              "blackice.escaped", "blackice.fatal"]}], "risk_reward_balance": {"encounter_rates":
              {"basic_zones": "5-10%", "corporate_zones": "15-25%", "blackwall_proximity":
              "30-50%", "deep_cyberspace": "40-60%"}, "mortality_rates": {"unprepared":
              "80-95%", "basic_defense": "40-60%", "good_defense": "10-25%", "excellent_defense":
              "2-5%"}, "rewards": {"successful_defense": {"experience": "1000-5000
              XP", "skills": "Black ICE Defense +1-3", "reputation": "+10-30 to hacker
              factions"}, "analysis_complete": {"data": "ICE behavior logs (sellable)",
              "knowledge": "Type-specific tactics", "experience": "500-2000 XP"}}},
              "class_interaction": {"netrunner": {"defense_effectiveness": "high",
              "special_demons": true, "understanding": "Better understanding of behavior",
              "risk_modifier": "-20%"}, "techie": {"defense_effectiveness": "medium",
              "technical_solutions": true, "risk_modifier": "+10%"}, "other_classes":
              {"defense_effectiveness": "low", "risk_modifier": "+40%", "recommendation":
              "Avoid encounters or team up"}}}, "implementation_notes": {"lethality_design":
              "Black ICE спроектирована как смертельная угроза:\n- Перегрузка нейроимплантов
              → реальный физический вред\n- Без защиты встреча почти всегда смертельна\n-
              Подготовка критически важна\n- Ошибки фатальны\n", "psychological_design":
              "Психологическое воздействие:\n- Эффект зловещей долины через визуальные
              эффекты\n- Почти человеческое поведение, но неправильное\n- Ощущение
              разумного противника\n- Постоянное беспокойство и страх\n", "defense_importance":
              "Защита критически важна:\n- Без защиты: 80-95% смертность\n- С базовой
              защитой: 40-60%\n- С хорошей защитой: 10-25%\n- С отличной защитой:
              2-5%\n"}, "next_steps": ["Создать детальную архитектуру компонентов
              (отдельные файлы)", "Определить структуру БД для Black ICE", "Спроектировать
              API endpoints детально", "Разбить на технические задачи"]}'
        - column:
            name: metadata
            value: '{"id": "black-ice-systems-architecture", "title": "Архитектура
              систем Black ICE", "document_type": "architecture", "category": "systems",
              "status": "draft", "version": "1.0.0", "last_updated": "2025-11-29T00:00:00+00:00",
              "owners": [{"role": "architect", "contact": "architect@necp.game"}],
              "tags": ["architecture", "black-ice", "hacking", "lethal", "high-risk"],
              "related_documents": [{"id": "cyber-network-systems-architecture", "relation":
              "extends"}, {"id": "black-ice-core-architecture", "relation": "references"},
              {"id": "black-ice-types-defense-architecture", "relation": "references"}],
              "github_issues": [1475, 1476, 1477, 1482], "visibility": "internal",
              "audience": ["architect", "backend", "gameplay"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\black-ice-systems-architecture.yaml
