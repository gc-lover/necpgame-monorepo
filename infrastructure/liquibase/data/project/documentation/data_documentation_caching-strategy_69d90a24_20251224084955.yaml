databaseChangeLog:
- changeSet:
    id: documentation-caching-strategy-69d90a24
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '1294081702450758'
        - column:
            name: doc_id
            value: implementation-infrastructure-caching-strategy
        - column:
            name: title
            value: Caching Strategy
        - column:
            name: document_type
            value: implementation
        - column:
            name: category
            value: infrastructure
        - column:
            name: status
            value: approved
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-07 05:20:00+00:00
        - column:
            name: concept_approved
            value: true
        - column:
            name: concept_reviewed_at
            value: 2025-11-07 05:20:00+00:00
        - column:
            name: owners
            value: '[{"role": "concept_director", "contact": "concept@necp.game"}]'
        - column:
            name: tags
            value:
            - caching
            - performance
            - infrastructure
        - column:
            name: topics
            value:
            - performance
            - platform_architecture
        - column:
            name: related_systems
            value:
            - cdn
            - redis-cluster
            - gateway-cache-layer
        - column:
            name: related_documents
            value: '[{"id": "implementation-infrastructure-api-gateway-architecture",
              "relation": "complements"}, {"id": "implementation-infrastructure-database-architecture",
              "relation": "references"}]'
        - column:
            name: source
            value: shared/docs/knowledge/implementation/infrastructure/caching-strategy.md
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - concept
            - platform
            - backend
        - column:
            name: risk_level
            value: high
        - column:
            name: content
            value: '{"metadata": {"id": "implementation-infrastructure-caching-strategy",
              "title": "Caching Strategy", "document_type": "implementation", "category":
              "infrastructure", "status": "approved", "version": "1.0.0", "last_updated":
              "2025-11-07T05:20:00+00:00", "concept_approved": true, "concept_reviewed_at":
              "2025-11-07T05:20:00+00:00", "owners": [{"role": "concept_director",
              "contact": "concept@necp.game"}], "tags": ["caching", "performance",
              "infrastructure"], "topics": ["performance", "platform_architecture"],
              "related_systems": ["cdn", "redis-cluster", "gateway-cache-layer"],
              "related_documents": [{"id": "implementation-infrastructure-api-gateway-architecture",
              "relation": "complements"}, {"id": "implementation-infrastructure-database-architecture",
              "relation": "references"}], "source": "shared/docs/knowledge/implementation/infrastructure/caching-strategy.md",
              "visibility": "internal", "audience": ["concept", "platform", "backend"],
              "risk_level": "high"}, "review": {"chain": [{"role": "concept_director",
              "reviewer": "", "reviewed_at": "2025-11-07T05:20:00+00:00", "status":
              "approved"}], "next_actions": []}, "summary": {"problem": "Производительность
              микросервисов падает без централизованной стратегии кэширования.", "goal":
              "Определить многоуровневую схему кэшей для статических и динамических
              данных.", "essence": "Архитектура делит кэширование на CDN, Redis и
              in-memory уровни с отдельными TTL и правилами инвалидирования.", "key_points":
              ["CDN обслуживает статические ассеты с версионным инвалидацией.", "Redis
              хранит горячие игровые данные с гибкими TTL.", "Приложения кэшируют
              справочники до перезапуска или ручной очистки.", "Политики ключей и
              метрик поддерживают высокую долю cache hit."]}, "content": {"sections":
              [{"id": "cache_layers", "title": "Уровни кэширования", "body": "L1 CDN
              хранит статические ассеты до 30 дней с версионными ключами.\nL2 Redis
              держит сессии, профили, рыночные данные и квесты с различными TTL.\nL3
              приложений сохраняет шаблоны предметов, диалоги NPC и достижения до
              рестарта.\n", "mechanics_links": [], "assets": []}, {"id": "key_schema",
              "title": "Схема ключей", "body": "Ключи формируются по шаблону `{service}:{entity}:{id}:{field}`,
              что исключает конфликты и упрощает очистку.\nПримеры: `player:{id}:profile`,
              `market:orderbook:{itemId}`.\n", "mechanics_links": [], "assets": []},
              {"id": "ttl_policy", "title": "Политика TTL", "body": "Статические данные
              кэшируются от 24 часов до 7 дней, пользовательские — от 5 минут до часа,\nа
              данные реального времени обновляются каждые 10 секунд — 1 минуту.\n",
              "mechanics_links": [], "assets": []}, {"id": "invalidation", "title":
              "Инвалидация", "body": "Используются три подхода: истечение TTL, событийная
              очистка при изменении данных и ручная очистка через админ-инструменты.\n",
              "mechanics_links": [], "assets": []}, {"id": "monitoring", "title":
              "Мониторинг эффективности", "body": "Целевые показатели hit-rate: CDN
              95%+, Redis 80%+, in-memory 90%+.\nМетрики собираются из Redis INFO
              и dashboards observability-стека.\n", "mechanics_links": [], "assets":
              []}, {"id": "redis_topology", "title": "Топология Redis", "body": "Кластер
              разделён на инстансы для сессий, приложений и real-time данных с разной
              политикой TTL и персистентности (AOF, RDB, без сохранения).\n", "mechanics_links":
              [], "assets": []}]}, "appendix": {"glossary": [], "references": [{"title":
              "Database Architecture", "link": "./database-architecture.md"}, {"title":
              "API Gateway Architecture", "link": "./api-gateway-architecture.md"}],
              "decisions": []}, "implementation": {"github_issue": 136, "needs_task":
              false, "queue_reference": ["shared/trackers/queues/concept/queued.yaml#implementation-infrastructure-caching-strategy"],
              "blockers": []}, "history": [{"version": "1.0.0", "date": "2025-11-06",
              "author": "AI Brain Manager", "changes": "Описана многоуровневая стратегия
              кэширования и правила обслуживания."}], "validation": {"checksum": "",
              "schema_version": "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "implementation-infrastructure-caching-strategy", "title":
              "Caching Strategy", "document_type": "implementation", "category": "infrastructure",
              "status": "approved", "version": "1.0.0", "last_updated": "2025-11-07T05:20:00+00:00",
              "concept_approved": true, "concept_reviewed_at": "2025-11-07T05:20:00+00:00",
              "owners": [{"role": "concept_director", "contact": "concept@necp.game"}],
              "tags": ["caching", "performance", "infrastructure"], "topics": ["performance",
              "platform_architecture"], "related_systems": ["cdn", "redis-cluster",
              "gateway-cache-layer"], "related_documents": [{"id": "implementation-infrastructure-api-gateway-architecture",
              "relation": "complements"}, {"id": "implementation-infrastructure-database-architecture",
              "relation": "references"}], "source": "shared/docs/knowledge/implementation/infrastructure/caching-strategy.md",
              "visibility": "internal", "audience": ["concept", "platform", "backend"],
              "risk_level": "high"}'
        - column:
            name: source_file
            value: knowledge\implementation\infrastructure\caching-strategy.yaml
