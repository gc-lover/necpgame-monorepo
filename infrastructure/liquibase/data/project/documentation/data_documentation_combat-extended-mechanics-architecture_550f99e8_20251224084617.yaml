databaseChangeLog:
- changeSet:
    id: documentation-combat-extended-mechanics-architecture-550f99e8
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-874585664478914'
        - column:
            name: doc_id
            value: combat-extended-mechanics-architecture
        - column:
            name: title
            value: Архитектура расширенных механик боевой системы
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-12-01 00:00:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - combat
            - hacking
            - implants
            - shooting
            - loadouts
            - realtime
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value:
            - gameplay-service
            - combat-service
            - realtime-service
            - hacking-service
            - progression-service
        - column:
            name: related_documents
            value: '[{"id": "combat-overview", "relation": "implements"}, {"id": "combat-hacking-types",
              "relation": "implements"}, {"id": "combat-hacking-networks", "relation":
              "implements"}, {"id": "combat-hacking-combat-integration", "relation":
              "implements"}, {"id": "combat-implants", "relation": "implements"},
              {"id": "combat-implants-types", "relation": "implements"}, {"id": "combat-implants-mechanics",
              "relation": "implements"}, {"id": "combat-implants-acquisition", "relation":
              "implements"}, {"id": "combat-implants-limits", "relation": "implements"},
              {"id": "combat-implants-visuals", "relation": "implements"}, {"id":
              "combat-shooting-advanced", "relation": "implements"}, {"id": "combat-loadouts-system",
              "relation": "implements"}, {"id": "combat-implants-architecture", "relation":
              "extends"}, {"id": "combat-shooting-architecture", "relation": "extends"},
              {"id": "combat-abilities-architecture", "relation": "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - gameplay
            - api-designer
            - network
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"<!-- Issue": null, "metadata": {"id": "combat-extended-mechanics-architecture",
              "title": "Архитектура расширенных механик боевой системы", "document_type":
              "architecture", "category": "systems", "status": "draft", "version":
              "1.0.0", "last_updated": "2025-12-01T00:00:00+00:00", "owners": [{"role":
              "architect", "contact": "architect@necp.game"}], "tags": ["architecture",
              "combat", "hacking", "implants", "shooting", "loadouts", "realtime"],
              "related_systems": ["gameplay-service", "combat-service", "realtime-service",
              "hacking-service", "progression-service"], "related_documents": [{"id":
              "combat-overview", "relation": "implements"}, {"id": "combat-hacking-types",
              "relation": "implements"}, {"id": "combat-hacking-networks", "relation":
              "implements"}, {"id": "combat-hacking-combat-integration", "relation":
              "implements"}, {"id": "combat-implants", "relation": "implements"},
              {"id": "combat-implants-types", "relation": "implements"}, {"id": "combat-implants-mechanics",
              "relation": "implements"}, {"id": "combat-implants-acquisition", "relation":
              "implements"}, {"id": "combat-implants-limits", "relation": "implements"},
              {"id": "combat-implants-visuals", "relation": "implements"}, {"id":
              "combat-shooting-advanced", "relation": "implements"}, {"id": "combat-loadouts-system",
              "relation": "implements"}, {"id": "combat-implants-architecture", "relation":
              "extends"}, {"id": "combat-shooting-architecture", "relation": "extends"},
              {"id": "combat-abilities-architecture", "relation": "extends"}], "github_issue":
              41, "visibility": "internal", "audience": ["architect", "backend", "gameplay",
              "api-designer", "network"]}, "summary": {"problem": "Требуется спроектировать
              архитектуру расширенных механик боевой системы,\nобъединяющую взлом
              и сети, импланты, продвинутую стрельбу и систему лоадаутов.\nВсе механики
              должны быть интегрированы с combat-service и сбалансированы\nдля киберспортивного
              геймплея.\n", "goal": "Создать архитектурную схему расширенных механик
              боевой системы с определением:\n- Компонентов для управления всеми расширенными
              механиками\n- REST, WebSocket и Event Bus контрактов\n- Синхронизации
              данных между слоями (Event Sourcing, CQRS)\n- Тикрейта и требований
              к сетевой нагрузке\n- Интеграций между механиками\n- Структуры БД\n-
              Технического задания для реализации\n", "essence": "Объединенная архитектура
              расширенных механик боевой системы, интегрирующая\nвзлом, импланты,
              продвинутую стрельбу и лоадауты в единую систему с поддержкой\nкиберспортивного
              геймплея и realtime синхронизации.\n"}, "architecture": {"overview":
              "Архитектура расширенных механик боевой системы состоит из следующих
              компонентов:\n1. Hacking Combat Integration - интеграция взлома в бой\n2.
              Implant Combat System - система боевых имплантов\n3. Advanced Shooting
              System - продвинутая стрельба\n4. Loadout Management System - управление
              лоадаутами\n5. Combat Mechanics Orchestrator - оркестратор боевых механик\n6.
              Realtime Combat Sync - realtime синхронизация боя\n", "microservices":
              [{"name": "gameplay-service", "port": 8083, "responsibility": "Обработка
              расширенных механик боевой системы:\n- Интеграция взлома в бой (hacking
              combat integration)\n- Управление боевыми имплантами\n- Продвинутая
              стрельба (advanced shooting)\n- Управление лоадаутами\n- Оркестрация
              боевых механик\n", "components": [{"hacking-combat-integration": "интеграция
              взлома в бой"}, {"implant-combat-system": "система боевых имплантов"},
              {"advanced-shooting-system": "продвинутая стрельба"}, {"loadout-management-system":
              "управление лоадаутами"}, {"combat-mechanics-orchestrator": "оркестратор
              боевых механик"}], "endpoints": ["POST /api/v1/gameplay/combat/hacking/execute
              - выполнение взлома в бою", "GET /api/v1/gameplay/combat/hacking/networks
              - доступные сети для взлома", "POST /api/v1/gameplay/combat/implants/activate
              - активация импланта в бою", "GET /api/v1/gameplay/combat/implants/effects
              - эффекты активных имплантов", "POST /api/v1/gameplay/combat/shooting/advanced/aim
              - продвинутое прицеливание", "POST /api/v1/gameplay/combat/shooting/advanced/recoil
              - управление отдачей", "GET /api/v1/gameplay/combat/loadouts - получение
              лоадаутов", "POST /api/v1/gameplay/combat/loadouts - создание/обновление
              лоадаута", "POST /api/v1/gameplay/combat/loadouts/equip - экипировка
              лоадаута", "GET /api/v1/gameplay/combat/mechanics/status - статус всех
              механик"], "websocket_channels": ["wss://api.necp.game/v1/gameplay/combat/{sessionId}
              - live события боя", "wss://api.necp.game/v1/gameplay/combat/loadouts/{characterId}
              - обновления лоадаутов"], "events_published": [{"combat.hacking.executed":
              "выполнение взлома в бою"}, {"combat.hacking.network-accessed": "доступ
              к сети"}, {"combat.implant.activated": "активация импланта"}, {"combat.implant.effects-applied":
              "применение эффектов импланта"}, {"combat.shooting.advanced-aim": "продвинутое
              прицеливание"}, {"combat.shooting.recoil-controlled": "управление отдачей"},
              {"combat.loadout.created": "создание лоадаута"}, {"combat.loadout.updated":
              "обновление лоадаута"}, {"combat.loadout.equipped": "экипировка лоадаута"},
              {"combat.mechanics.orchestrated": "оркестрация механик"}], "events_subscribed":
              [{"combat.ability.activated": "активация способностей"}, {"combat.weapon.fired":
              "выстрел из оружия"}, {"progression.attribute-updated": "обновление
              атрибутов"}, {"inventory.item-equipped": "экипировка предмета"}]}, {"name":
              "hacking-service", "port": 8086, "responsibility": "Обработка взлома
              и сетей:\n- Управление типами взлома\n- Управление сетями для взлома\n-
              Интеграция взлома в боевые сценарии\n", "components": [{"hacking-types-manager":
              "управление типами взлома"}, {"hacking-networks-manager": "управление
              сетями"}, {"hacking-combat-integration": "интеграция в бой"}], "endpoints":
              ["GET /api/v1/hacking/types - типы взлома", "GET /api/v1/hacking/networks
              - доступные сети", "POST /api/v1/hacking/networks/access - доступ к
              сети", "POST /api/v1/hacking/combat/execute - выполнение взлома в бою"],
              "events_published": [{"hacking.type-executed": "выполнение типа взлома"},
              {"hacking.network-accessed": "доступ к сети"}, {"hacking.combat-integrated":
              "интеграция в бой"}], "events_subscribed": [{"combat.session.started":
              "начало боевой сессии"}, {"combat.ability.activated": "активация способности"}]},
              {"name": "realtime-service", "port": 8085, "responsibility": "Realtime
              синхронизация расширенных механик:\n- Синхронизация взлома в реальном
              времени\n- Синхронизация эффектов имплантов\n- Синхронизация продвинутой
              стрельбы\n- Синхронизация лоадаутов\n", "components": [{"hacking-realtime-sync":
              "синхронизация взлома"}, {"implant-effects-sync": "синхронизация эффектов
              имплантов"}, {"shooting-realtime-sync": "синхронизация стрельбы"}, {"loadout-realtime-sync":
              "синхронизация лоадаутов"}], "endpoints": ["POST /api/v1/realtime/combat/hacking/sync
              - синхронизация взлома", "POST /api/v1/realtime/combat/implants/sync
              - синхронизация имплантов", "POST /api/v1/realtime/combat/shooting/sync
              - синхронизация стрельбы", "POST /api/v1/realtime/combat/loadouts/sync
              - синхронизация лоадаутов"], "websocket_channels": ["wss://api.necp.game/v1/realtime/combat/{sessionId}
              - realtime события"], "events_published": [{"realtime.combat.hacking-synced":
              "синхронизация взлома"}, {"realtime.combat.implants-synced": "синхронизация
              имплантов"}, {"realtime.combat.shooting-synced": "синхронизация стрельбы"},
              {"realtime.combat.loadouts-synced": "синхронизация лоадаутов"}], "events_subscribed":
              [{"combat.hacking.executed": "выполнение взлома"}, {"combat.implant.activated":
              "активация импланта"}, {"combat.shooting.advanced-aim": "продвинутое
              прицеливание"}, {"combat.loadout.equipped": "экипировка лоадаута"}]}],
              "data_synchronization": {"strategy": "Event Sourcing + CQRS", "event_store":
              "Все события расширенных механик сохраняются в Event Store:\n- combat.hacking.executed\n-
              combat.hacking.network-accessed\n- combat.implant.activated\n- combat.implant.effects-applied\n-
              combat.shooting.advanced-aim\n- combat.shooting.recoil-controlled\n-
              combat.loadout.created\n- combat.loadout.updated\n- combat.loadout.equipped\n-
              combat.mechanics.orchestrated\n", "command_side": "Command Side (Write
              Model):\n- gameplay-service: обработка команд взлома, имплантов, стрельбы,
              лоадаутов\n- hacking-service: обработка команд взлома\n- realtime-service:
              обработка realtime синхронизации\n", "query_side": "Query Side (Read
              Model):\n- gameplay-service: получение статуса механик, лоадаутов\n-
              hacking-service: получение типов взлома, сетей\n- realtime-service:
              получение состояния синхронизации\n", "saga_pattern": "Saga для оркестрации
              механик:\n1. Start Combat Mechanics Saga\n2. Check Loadout Requirements\n3.
              Activate Implants\n4. Initialize Hacking Networks\n5. Setup Advanced
              Shooting\n6. If failure: Compensate (rollback активации, восстановление
              состояния)\n", "consistency": "Strong Consistency для критичных операций:\n-
              Активация имплантов\n- Выполнение взлома\n- Экипировка лоадаута\n- Применение
              эффектов\nEventual Consistency для:\n- Визуальные эффекты\n- Realtime
              синхронизация (клиентская)\n- Статистика использования\n"}, "network_requirements":
              {"tick_rate": {"pve_zones": "- Протокол: WebSocket (TCP)\n- Тикрейт:
              20-30 Hz\n- Задержка: <100 мс\n- Игроков: 100-500\n", "pvp_small": "-
              Протокол: UDP\n- Тикрейт: 60-128 Hz\n- Задержка: <30 мс\n- Игроков:
              5-20\n", "pvp_gvg_200": "- Протокол: UDP\n- Тикрейт: 60-80 Hz\n- Задержка:
              <40 мс\n- Игроков: 200 (100v100)\n- Оптимизация: Spatial partitioning\n",
              "pvp_gvg_400": "- Протокол: UDP\n- Тикрейт: 40-60 Hz\n- Задержка: <50
              мс\n- Игроков: 400 (200v200)\n- Оптимизация: Spatial sharding (2-4 shards)\n",
              "massive_war": "- Протокол: UDP\n- Тикрейт: 20-40 Hz\n- Задержка: <100
              мс\n- Игроков: 2000+\n- Архитектура: Cluster (5-10 servers)\n"}, "hacking_network_sync":
              "- Синхронизация сетей: 10-20 Hz\n- Задержка доступа к сети: <50 мс\n-
              Батчинг запросов взлома для оптимизации\n", "implant_effects_sync":
              "- Синхронизация эффектов: 30-60 Hz (зависит от типа эффекта)\n- Задержка
              применения эффектов: <20 мс\n- Event aggregation для множественных эффектов\n",
              "advanced_shooting_sync": "- Синхронизация прицеливания: 60-128 Hz (UDP)\n-
              Синхронизация отдачи: 60-128 Hz (UDP)\n- Задержка выстрела: <16 мс\n-
              Квантование координат для уменьшения размера сообщений\n", "loadout_sync":
              "- Синхронизация лоадаутов: on-demand (при изменении)\n- Задержка экипировки:
              <100 мс\n- Кэширование лоадаутов на клиенте\n", "bandwidth_optimization":
              "- Spatial partitioning для снижения трафика на 80-90%\n- Event aggregation
              (батчинг) для больших битв\n- Адаптивный тикрейт в зависимости от количества
              игроков\n- Квантование координат для уменьшения размера сообщений\n-
              Сжатие данных для лоадаутов\n"}, "data_flows": {"hacking_combat_integration_flow":
              "1. Игрок активирует взлом в бою\n2. Hacking Combat Integration проверяет
              доступные сети и требования\n3. Hacking Service выполняет взлом и применяет
              эффекты\n4. Gameplay Service публикует событие combat.hacking.executed\n5.
              Realtime Service синхронизирует эффекты взлома\n", "implant_activation_flow":
              "1. Игрок активирует имплант в бою\n2. Implant Combat System проверяет
              доступность и лимиты\n3. Implant Combat System активирует имплант и
              применяет эффекты\n4. Gameplay Service публикует событие combat.implant.activated\n5.
              Realtime Service синхронизирует эффекты импланта\n", "advanced_shooting_flow":
              "1. Игрок выполняет продвинутое прицеливание\n2. Advanced Shooting System
              рассчитывает точность и отдачу\n3. Realtime Service валидирует выстрел
              и применяет урон\n4. Gameplay Service публикует событие combat.shooting.advanced-aim\n",
              "loadout_equip_flow": "1. Игрок выбирает лоадаут\n2. Loadout Management
              System проверяет доступность и требования\n3. Loadout Management System
              экипирует лоадаут и активирует способности\n4. Gameplay Service публикует
              событие combat.loadout.equipped\n5. Realtime Service синхронизирует
              лоадаут\n", "mechanics_orchestration_flow": "1. Игрок входит в боевую
              сессию\n2. Combat Mechanics Orchestrator загружает активный лоадаут\n3.
              Combat Mechanics Orchestrator активирует импланты и инициализирует сети\n4.
              Combat Mechanics Orchestrator настраивает продвинутую стрельбу\n5. Gameplay
              Service публикует событие combat.mechanics.orchestrated\n"}, "database_structure":
              {"tables": [{"name": "combat_hacking_executions", "description": "Выполнения
              взлома в бою", "columns": [{"id": "UUID PRIMARY KEY"}, {"character_id":
              "UUID FOREIGN KEY"}, {"session_id": "UUID FOREIGN KEY"}, {"hacking_type":
              "VARCHAR(100)"}, {"network_id": "UUID FOREIGN KEY"}, {"target_id": "UUID
              (nullable)"}, {"target_type": "ENUM (player, npc, device, infrastructure)"},
              {"executed_at": "TIMESTAMP"}, {"effects_applied": "JSONB"}, {"created_at":
              "TIMESTAMP"}]}, {"name": "combat_hacking_networks", "description": "Сети
              для взлома", "columns": [{"id": "UUID PRIMARY KEY"}, {"network_name":
              "VARCHAR(255)"}, {"network_type": "ENUM (enemy, device, infrastructure,
              combat_scenario)"}, {"access_level": "INTEGER"}, {"requirements": "JSONB"},
              {"available_demons": "JSONB"}, {"created_at": "TIMESTAMP"}]}, {"name":
              "combat_implant_activations", "description": "Активации имплантов в
              бою", "columns": [{"id": "UUID PRIMARY KEY"}, {"character_id": "UUID
              FOREIGN KEY"}, {"session_id": "UUID FOREIGN KEY"}, {"implant_id": "UUID
              FOREIGN KEY"}, {"activated_at": "TIMESTAMP"}, {"effects_applied": "JSONB"},
              {"energy_used": "INTEGER"}, {"humanity_cost": "INTEGER"}, {"created_at":
              "TIMESTAMP"}]}, {"name": "combat_advanced_shooting_stats", "description":
              "Статистика продвинутой стрельбы", "columns": [{"id": "UUID PRIMARY
              KEY"}, {"character_id": "UUID FOREIGN KEY"}, {"session_id": "UUID FOREIGN
              KEY"}, {"weapon_id": "UUID FOREIGN KEY"}, {"aim_accuracy": "DECIMAL(5,2)"},
              {"recoil_control": "DECIMAL(5,2)"}, {"shots_fired": "INTEGER"}, {"hits_landed":
              "INTEGER"}, {"created_at": "TIMESTAMP"}]}, {"name": "combat_loadouts",
              "description": "Лоадауты боевой системы", "columns": [{"id": "UUID PRIMARY
              KEY"}, {"character_id": "UUID FOREIGN KEY"}, {"name": "VARCHAR(255)"},
              {"weapons": "JSONB"}, {"abilities": "JSONB"}, {"implants": "JSONB"},
              {"equipment": "JSONB"}, {"is_active": "BOOLEAN"}, {"created_at": "TIMESTAMP"},
              {"updated_at": "TIMESTAMP"}]}, {"name": "combat_mechanics_state", "description":
              "Состояние всех механик в боевой сессии", "columns": [{"id": "UUID PRIMARY
              KEY"}, {"session_id": "UUID FOREIGN KEY"}, {"character_id": "UUID FOREIGN
              KEY"}, {"loadout_id": "UUID FOREIGN KEY"}, {"active_implants": "JSONB"},
              {"active_hacking_networks": "JSONB"}, {"shooting_config": "JSONB"},
              {"last_update": "TIMESTAMP"}, {"created_at": "TIMESTAMP"}]}]}, "integrations":
              {"combat_service": "Получение данных о боевых сессиях, применение урона
              и эффектов, интеграция с системой способностей\n", "hacking_service":
              "Получение типов взлома, доступ к сетям, выполнение взлома в боевых
              сценариях\n", "implant_service": "Получение данных об имплантах, проверка
              лимитов, обновление состояния\n", "progression_service": "Проверка требований
              для механик, обновление прогрессии, применение модификаторов\n", "inventory_service":
              "Получение данных об экипировке, проверка наличия предметов, обновление
              инвентаря\n", "realtime_service": "Синхронизация всех механик в реальном
              времени, валидация действий, применение эффектов\n", "analytics_service":
              "Логирование всех действий, сбор метрик использования, античит мониторинг\n"}},
              "technical_specification": {"subtasks": [{"id": "hacking-combat-integration",
              "title": "Реализация интеграции взлома в бой", "description": "Реализация
              Hacking Combat Integration с поддержкой типов взлома,\nсетей и интеграции
              в боевые сценарии.\n", "dependencies": [], "estimated_effort": "5 days"},
              {"id": "implant-combat-system", "title": "Реализация системы боевых
              имплантов", "description": "Реализация Implant Combat System с активацией
              имплантов в бою,\nприменением эффектов и обновлением киберпсихоза.\n",
              "dependencies": [], "estimated_effort": "6 days"}, {"id": "advanced-shooting-system",
              "title": "Реализация продвинутой стрельбы", "description": "Реализация
              Advanced Shooting System с продвинутым прицеливанием,\nуправлением отдачей
              и синхронизацией выстрелов.\n", "dependencies": [], "estimated_effort":
              "5 days"}, {"id": "loadout-management-system", "title": "Реализация
              системы управления лоадаутами", "description": "Реализация Loadout Management
              System с созданием, обновлением\nи экипировкой лоадаутов.\n", "dependencies":
              [], "estimated_effort": "4 days"}, {"id": "combat-mechanics-orchestrator",
              "title": "Реализация оркестратора боевых механик", "description": "Реализация
              Combat Mechanics Orchestrator с координацией всех\nрасширенных механик
              в боевой сессии.\n", "dependencies": ["hacking-combat-integration",
              "implant-combat-system", "advanced-shooting-system", "loadout-management-system"],
              "estimated_effort": "6 days"}, {"id": "realtime-combat-sync", "title":
              "Реализация realtime синхронизации", "description": "Реализация Realtime
              Combat Sync с синхронизацией всех механик\nв реальном времени.\n", "dependencies":
              ["combat-mechanics-orchestrator"], "estimated_effort": "5 days"}, {"id":
              "websocket-channels", "title": "Реализация WebSocket каналов", "description":
              "Реализация WebSocket каналов для realtime обновлений всех механик.\n",
              "dependencies": ["realtime-combat-sync"], "estimated_effort": "3 days"},
              {"id": "event-bus-integration", "title": "Интеграция с Event Bus", "description":
              "Реализация публикации и подписки на события через Kafka\nдля всех компонентов
              расширенных механик.\n", "dependencies": ["combat-mechanics-orchestrator"],
              "estimated_effort": "2 days"}, {"id": "database-schema", "title": "Создание
              схемы БД", "description": "Создание таблиц БД для взлома, имплантов,
              стрельбы, лоадаутов\nи состояния механик с миграциями Liquibase.\n",
              "dependencies": [], "estimated_effort": "3 days"}]}, "diagrams": {"component_diagram":
              "```mermaid\ngraph TB\n    Client[UE5 Client] --> Gateway[API Gateway]\n\n    Gateway
              --> GameplayService[Gameplay Service<br/>8083]\n    Gateway --> HackingService[Hacking
              Service<br/>8086]\n    Gateway --> RealtimeService[Realtime Service<br/>8085]\n\n    GameplayService
              --> HCI[Hacking Combat Integration]\n    GameplayService --> ICS[Implant
              Combat System]\n    GameplayService --> ASS[Advanced Shooting System]\n    GameplayService
              --> LMS[Loadout Management System]\n    GameplayService --> CMO[Combat
              Mechanics Orchestrator]\n\n    HackingService --> HTM[Hacking Types
              Manager]\n    HackingService --> HNM[Hacking Networks Manager]\n    HackingService
              --> HCI2[Hacking Combat Integration]\n\n    RealtimeService --> HRS[Hacking
              Realtime Sync]\n    RealtimeService --> IES[Implant Effects Sync]\n    RealtimeService
              --> SRS[Shooting Realtime Sync]\n    RealtimeService --> LRS[Loadout
              Realtime Sync]\n\n    CMO --> HCI\n    CMO --> ICS\n    CMO --> ASS\n    CMO
              --> LMS\n\n    GameplayService --> CombatService[Combat Service]\n    GameplayService
              --> ProgressionService[Progression Service]\n    GameplayService -->
              InventoryService[Inventory Service]\n    GameplayService --> ImplantService[Implant
              Service]\n    GameplayService --> AnalyticsService[Analytics Service]\n\n    GameplayService
              --> EventBus[Event Bus<br/>Kafka]\n    HackingService --> EventBus\n    RealtimeService
              --> EventBus\n    EventBus --> RealtimeGateway[Realtime Gateway]\n\n    GameplayService
              --> DB[(Gameplay DB)]\n    HackingService --> DB\n    RealtimeService
              --> DB\n\n    Client --> WSCombat[WebSocket<br/>Combat]\n    WSCombat
              --> GameplayService\n    WSCombat --> HackingService\n    WSCombat -->
              RealtimeService\n```\n", "mechanics_orchestration_flow_diagram": "```mermaid\nsequenceDiagram\n    participant
              C as Client\n    participant CMO as Combat Mechanics Orchestrator\n    participant
              LMS as Loadout Management System\n    participant ICS as Implant Combat
              System\n    participant HCI as Hacking Combat Integration\n    participant
              RS as Realtime Service\n\n    C->>CMO: Enter combat session\n    CMO->>LMS:
              Load active loadout\n    LMS-->>CMO: Loadout data\n    CMO->>ICS: Activate
              implants\n    ICS-->>CMO: Implants activated\n    CMO->>HCI: Initialize
              hacking networks\n    HCI-->>CMO: Networks initialized\n    CMO->>RS:
              Sync all mechanics\n    CMO-->>C: Mechanics orchestrated\n```\n"}}'
        - column:
            name: metadata
            value: '{"id": "combat-extended-mechanics-architecture", "title": "Архитектура
              расширенных механик боевой системы", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.0.0", "last_updated":
              "2025-12-01T00:00:00+00:00", "owners": [{"role": "architect", "contact":
              "architect@necp.game"}], "tags": ["architecture", "combat", "hacking",
              "implants", "shooting", "loadouts", "realtime"], "related_systems":
              ["gameplay-service", "combat-service", "realtime-service", "hacking-service",
              "progression-service"], "related_documents": [{"id": "combat-overview",
              "relation": "implements"}, {"id": "combat-hacking-types", "relation":
              "implements"}, {"id": "combat-hacking-networks", "relation": "implements"},
              {"id": "combat-hacking-combat-integration", "relation": "implements"},
              {"id": "combat-implants", "relation": "implements"}, {"id": "combat-implants-types",
              "relation": "implements"}, {"id": "combat-implants-mechanics", "relation":
              "implements"}, {"id": "combat-implants-acquisition", "relation": "implements"},
              {"id": "combat-implants-limits", "relation": "implements"}, {"id": "combat-implants-visuals",
              "relation": "implements"}, {"id": "combat-shooting-advanced", "relation":
              "implements"}, {"id": "combat-loadouts-system", "relation": "implements"},
              {"id": "combat-implants-architecture", "relation": "extends"}, {"id":
              "combat-shooting-architecture", "relation": "extends"}, {"id": "combat-abilities-architecture",
              "relation": "extends"}], "github_issue": 41, "visibility": "internal",
              "audience": ["architect", "backend", "gameplay", "api-designer", "network"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\combat-extended-mechanics-architecture.yaml
