databaseChangeLog:
- changeSet:
    id: documentation-combat-hacking-integration-architecture-73a72d31
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-141950134116694'
        - column:
            name: doc_id
            value: combat-hacking-integration-architecture
        - column:
            name: title
            value: Архитектура боевой интеграции взлома
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-12-01 00:00:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - combat
            - hacking
            - networks
            - realtime
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value:
            - gameplay-service
            - hacking-service
            - combat-service
            - realtime-service
        - column:
            name: related_documents
            value: '[{"id": "combat-hacking-types", "relation": "implements"}, {"id":
              "combat-hacking-networks", "relation": "implements"}, {"id": "combat-hacking-combat-integration",
              "relation": "implements"}, {"id": "combat-extended-mechanics-architecture",
              "relation": "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - gameplay
            - api-designer
            - network
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"<!-- Issue": null, "metadata": {"id": "combat-hacking-integration-architecture",
              "title": "Архитектура боевой интеграции взлома", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.0.0", "last_updated":
              "2025-12-01T00:00:00+00:00", "owners": [{"role": "architect", "contact":
              "architect@necp.game"}], "tags": ["architecture", "combat", "hacking",
              "networks", "realtime"], "related_systems": ["gameplay-service", "hacking-service",
              "combat-service", "realtime-service"], "related_documents": [{"id":
              "combat-hacking-types", "relation": "implements"}, {"id": "combat-hacking-networks",
              "relation": "implements"}, {"id": "combat-hacking-combat-integration",
              "relation": "implements"}, {"id": "combat-extended-mechanics-architecture",
              "relation": "extends"}], "github_issue": 57, "visibility": "internal",
              "audience": ["architect", "backend", "gameplay", "api-designer", "network"]},
              "summary": {"problem": "Требуется спроектировать архитектуру боевой
              интеграции взлома, включающую\nтипы взлома, сети и интеграцию взлома
              в боевые сценарии. Механики взлома\nдолжны быть интегрированы с combat-service
              и hacking-service.\n", "goal": "Создать архитектурную схему боевой интеграции
              взлома с определением:\n- Компонентов для управления типами взлома и
              сетями\n- REST, WebSocket и Event Bus контрактов\n- Синхронизации данных
              между слоями (Event Sourcing, CQRS)\n- Тикрейта и требований к сетевой
              нагрузке\n- Интеграций с боевой системой\n- Структуры БД\n- Технического
              задания для реализации\n", "essence": "Детальная архитектура боевой
              интеграции взлома, интегрирующая типы взлома,\nсети и боевые сценарии
              в единую систему с поддержкой realtime синхронизации.\n"}, "architecture":
              {"overview": "Архитектура боевой интеграции взлома состоит из следующих
              компонентов:\n1. Hacking Types Manager - управление типами взлома (враги,
              устройства, инфраструктура, боевой сценарий)\n2. Hacking Networks Manager
              - управление сетями (локальные, корпоративные, городские, персональные)\n3.
              Hacking Combat Integration - интеграция взлома в боевые сценарии\n4.
              Hacking Overheat Manager - управление перегревом и охлаждением\n5. Hacking
              Access Control - контроль доступа к сетям\n6. Hacking Realtime Sync
              - realtime синхронизация взлома\n", "microservices": [{"name": "hacking-service",
              "port": 8086, "responsibility": "Обработка боевой интеграции взлома:\n-
              Управление типами взлома\n- Управление сетями для взлома\n- Интеграция
              взлома в боевые сценарии\n- Управление перегревом\n- Контроль доступа
              к сетям\n", "components": [{"hacking-types-manager": "управление типами
              взлома"}, {"hacking-networks-manager": "управление сетями"}, {"hacking-combat-integration":
              "интеграция в бой"}, {"hacking-overheat-manager": "управление перегревом"},
              {"hacking-access-control": "контроль доступа"}], "endpoints": ["GET
              /api/v1/hacking/types - типы взлома", "GET /api/v1/hacking/types/{typeId}
              - информация о типе взлома", "GET /api/v1/hacking/networks - доступные
              сети", "GET /api/v1/hacking/networks/{networkId} - информация о сети",
              "POST /api/v1/hacking/networks/{networkId}/access - доступ к сети",
              "POST /api/v1/hacking/combat/execute - выполнение взлома в бою", "POST
              /api/v1/hacking/combat/overheat/check - проверка перегрева", "POST /api/v1/hacking/combat/cooling
              - охлаждение системы"], "websocket_channels": ["wss://api.necp.game/v1/hacking/combat/{sessionId}
              - live события взлома", "wss://api.necp.game/v1/hacking/networks/{characterId}
              - обновления сетей"], "events_published": [{"hacking.type-executed":
              "выполнение типа взлома"}, {"hacking.network-accessed": "доступ к сети"},
              {"hacking.combat-integrated": "интеграция в бой"}, {"hacking.overheat-triggered":
              "перегрев системы"}, {"hacking.cooling-applied": "применение охлаждения"}],
              "events_subscribed": [{"combat.session.started": "начало боевой сессии"},
              {"combat.ability.activated": "активация способности"}, {"progression.skill-updated":
              "обновление навыков"}]}, {"name": "gameplay-service", "port": 8083,
              "responsibility": "Интеграция взлома с боевой системой:\n- Координация
              взлома в боевых сценариях\n- Применение эффектов взлома\n- Интеграция
              с системой способностей\n", "components": [{"hacking-combat-coordinator":
              "координация взлома в бою"}, {"hacking-effects-applier": "применение
              эффектов взлома"}], "endpoints": ["POST /api/v1/gameplay/combat/hacking/execute
              - выполнение взлома в бою", "GET /api/v1/gameplay/combat/hacking/effects
              - эффекты активного взлома"], "events_published": [{"combat.hacking.executed":
              "выполнение взлома в бою"}, {"combat.hacking.effects-applied": "применение
              эффектов взлома"}], "events_subscribed": [{"hacking.type-executed":
              "выполнение типа взлома"}, {"hacking.network-accessed": "доступ к сети"}]},
              {"name": "realtime-service", "port": 8085, "responsibility": "Realtime
              синхронизация взлома:\n- Синхронизация взлома в реальном времени\n-
              Синхронизация эффектов взлома\n- Синхронизация перегрева\n", "components":
              [{"hacking-realtime-sync": "синхронизация взлома"}, {"hacking-effects-sync":
              "синхронизация эффектов"}, {"hacking-overheat-sync": "синхронизация
              перегрева"}], "endpoints": ["POST /api/v1/realtime/combat/hacking/sync
              - синхронизация взлома", "POST /api/v1/realtime/combat/hacking/overheat/sync
              - синхронизация перегрева"], "websocket_channels": ["wss://api.necp.game/v1/realtime/combat/{sessionId}
              - realtime события"], "events_published": [{"realtime.combat.hacking-synced":
              "синхронизация взлома"}, {"realtime.combat.hacking-overheat-synced":
              "синхронизация перегрева"}], "events_subscribed": [{"hacking.type-executed":
              "выполнение типа взлома"}, {"hacking.overheat-triggered": "перегрев
              системы"}]}], "data_synchronization": {"strategy": "Event Sourcing +
              CQRS", "event_store": "Все события взлома сохраняются в Event Store:\n-
              hacking.type-executed\n- hacking.network-accessed\n- hacking.combat-integrated\n-
              hacking.overheat-triggered\n- hacking.cooling-applied\n- combat.hacking.executed\n-
              combat.hacking.effects-applied\n", "command_side": "Command Side (Write
              Model):\n- hacking-service: обработка команд взлома, доступа к сетям\n-
              gameplay-service: обработка команд интеграции взлома в бой\n- realtime-service:
              обработка realtime синхронизации\n", "query_side": "Query Side (Read
              Model):\n- hacking-service: получение типов взлома, сетей, статуса доступа\n-
              gameplay-service: получение статуса взлома в бою, эффектов\n- realtime-service:
              получение состояния синхронизации\n", "saga_pattern": "Saga для боевой
              интеграции взлома:\n1. Start Hacking Combat Saga\n2. Check Network Access\n3.
              Validate Hacking Type\n4. Check Overheat Status\n5. Execute Hacking\n6.
              Apply Effects\n7. If failure: Compensate (rollback доступа, восстановление
              состояния)\n", "consistency": "Strong Consistency для критичных операций:\n-
              Доступ к сетям\n- Выполнение взлома\n- Применение эффектов\n- Управление
              перегревом\nEventual Consistency для:\n- Визуальные эффекты\n- Realtime
              синхронизация (клиентская)\n- Статистика использования\n"}, "network_requirements":
              {"tick_rate": {"hacking_execution": "- Протокол: WebSocket (TCP)\n-
              Тикрейт: 10-20 Hz\n- Задержка: <50 мс\n- Оптимизация: Батчинг запросов
              взлома\n", "network_access": "- Протокол: HTTP REST + WebSocket\n- Тикрейт:
              on-demand (при изменении)\n- Задержка: <100 мс\n- Оптимизация: Кэширование
              сетей\n", "overheat_sync": "- Протокол: WebSocket (TCP)\n- Тикрейт:
              5-10 Hz (при активном перегреве)\n- Задержка: <100 мс\n- Оптимизация:
              Агрегация обновлений\n"}, "bandwidth_optimization": "- Батчинг запросов
              взлома для оптимизации\n- Кэширование сетей и типов взлома\n- Агрегация
              обновлений перегрева\n- Сжатие данных для WebSocket\n- Rate limiting
              для предотвращения злоупотреблений\n"}, "data_flows": {"hacking_execution_flow":
              "1. Игрок активирует взлом в бою\n2. Hacking Combat Integration проверяет
              доступные сети\n3. Hacking Combat Integration проверяет требования (класс,
              навыки)\n4. Hacking Types Manager проверяет тип взлома\n5. Hacking Overheat
              Manager проверяет перегрев\n6. Hacking Service выполняет взлом\n7. Hacking
              Service применяет эффекты взлома\n8. Hacking Service обновляет перегрев\n9.
              Gameplay Service публикует событие combat.hacking.executed\n10. Realtime
              Service синхронизирует эффекты взлома\n11. Realtime Gateway отправляет
              обновление клиентам\n", "network_access_flow": "1. Игрок запрашивает
              доступ к сети\n2. Hacking Networks Manager проверяет доступность сети\n3.
              Hacking Access Control проверяет требования (уровень защиты, навыки)\n4.
              Hacking Networks Manager предоставляет доступ\n5. Hacking Service публикует
              событие hacking.network-accessed\n6. Realtime Gateway отправляет обновление
              клиентам\n", "overheat_management_flow": "1. Игрок выполняет взлом\n2.
              Hacking Overheat Manager рассчитывает нагрев\n3. Hacking Overheat Manager
              проверяет порог перегрева\n4. Если перегрев: Hacking Overheat Manager
              блокирует взлом\n5. Игрок применяет охлаждение\n6. Hacking Overheat
              Manager снижает нагрев\n7. Hacking Service публикует событие hacking.cooling-applied\n8.
              Realtime Service синхронизирует состояние перегрева\n9. Realtime Gateway
              отправляет обновление клиентам\n"}, "database_structure": {"tables":
              [{"name": "hacking_types", "description": "Типы взлома", "columns":
              [{"id": "UUID PRIMARY KEY"}, {"type_name": "VARCHAR(100)"}, {"category":
              "ENUM (enemy, device, infrastructure, combat_scenario)"}, {"class_requirement":
              "VARCHAR(50)"}, {"skill_requirement": "JSONB"}, {"overheat_cost": "INTEGER"},
              {"cooldown_duration": "INTEGER"}, {"created_at": "TIMESTAMP"}]}, {"name":
              "hacking_networks", "description": "Сети для взлома", "columns": [{"id":
              "UUID PRIMARY KEY"}, {"network_name": "VARCHAR(255)"}, {"network_type":
              "ENUM (local, corporate, city, personal)"}, {"security_level": "INTEGER"},
              {"access_method": "ENUM (remote, physical, hybrid)"}, {"protection_levels":
              "JSONB"}, {"available_demons": "JSONB"}, {"created_at": "TIMESTAMP"}]},
              {"name": "combat_hacking_executions", "description": "Выполнения взлома
              в бою", "columns": [{"id": "UUID PRIMARY KEY"}, {"character_id": "UUID
              FOREIGN KEY"}, {"session_id": "UUID FOREIGN KEY"}, {"hacking_type_id":
              "UUID FOREIGN KEY"}, {"network_id": "UUID FOREIGN KEY"}, {"target_id":
              "UUID (nullable)"}, {"target_type": "ENUM (player, npc, device, infrastructure)"},
              {"executed_at": "TIMESTAMP"}, {"effects_applied": "JSONB"}, {"overheat_generated":
              "INTEGER"}, {"created_at": "TIMESTAMP"}]}, {"name": "hacking_overheat_state",
              "description": "Состояние перегрева", "columns": [{"id": "UUID PRIMARY
              KEY"}, {"character_id": "UUID FOREIGN KEY"}, {"session_id": "UUID FOREIGN
              KEY"}, {"current_heat": "INTEGER"}, {"max_heat": "INTEGER"}, {"is_overheated":
              "BOOLEAN"}, {"cooling_applied": "INTEGER"}, {"last_update": "TIMESTAMP"},
              {"created_at": "TIMESTAMP"}]}, {"name": "hacking_network_access", "description":
              "Доступ к сетям", "columns": [{"id": "UUID PRIMARY KEY"}, {"character_id":
              "UUID FOREIGN KEY"}, {"network_id": "UUID FOREIGN KEY"}, {"access_level":
              "INTEGER"}, {"access_method": "ENUM (remote, physical, hybrid)"}, {"granted_at":
              "TIMESTAMP"}, {"expires_at": "TIMESTAMP (nullable)"}, {"created_at":
              "TIMESTAMP"}]}]}, "integrations": {"combat_service": "Получение данных
              о боевых сессиях, применение урона и эффектов\n", "progression_service":
              "Проверка навыков и требований для взлома, обновление прогрессии\n",
              "inventory_service": "Проверка наличия кибердеков и гаджетов для взлома\n",
              "realtime_service": "Синхронизация взлома в реальном времени, валидация
              действий\n", "analytics_service": "Логирование всех действий взлома,
              сбор метрик использования\n"}}, "technical_specification": {"subtasks":
              [{"id": "hacking-types-manager", "title": "Реализация менеджера типов
              взлома", "description": "Реализация Hacking Types Manager с управлением
              типами взлома,\nтребованиями к классам и навыкам, механикой перегрева.\n",
              "dependencies": [], "estimated_effort": "4 days"}, {"id": "hacking-networks-manager",
              "title": "Реализация менеджера сетей", "description": "Реализация Hacking
              Networks Manager с управлением сетями,\nуровнями защиты и методами доступа.\n",
              "dependencies": [], "estimated_effort": "5 days"}, {"id": "hacking-combat-integration",
              "title": "Реализация боевой интеграции взлома", "description": "Реализация
              Hacking Combat Integration с интеграцией взлома\nв боевые сценарии и
              применением эффектов.\n", "dependencies": ["hacking-types-manager",
              "hacking-networks-manager"], "estimated_effort": "5 days"}, {"id": "hacking-overheat-manager",
              "title": "Реализация менеджера перегрева", "description": "Реализация
              Hacking Overheat Manager с управлением перегревом\nи охлаждением системы.\n",
              "dependencies": [], "estimated_effort": "3 days"}, {"id": "hacking-access-control",
              "title": "Реализация контроля доступа", "description": "Реализация Hacking
              Access Control с проверкой требований\nи управлением доступом к сетям.\n",
              "dependencies": ["hacking-networks-manager"], "estimated_effort": "3
              days"}, {"id": "hacking-realtime-sync", "title": "Реализация realtime
              синхронизации", "description": "Реализация Hacking Realtime Sync с синхронизацией
              взлома\nв реальном времени.\n", "dependencies": ["hacking-combat-integration"],
              "estimated_effort": "4 days"}, {"id": "websocket-channels", "title":
              "Реализация WebSocket каналов", "description": "Реализация WebSocket
              каналов для realtime обновлений взлома.\n", "dependencies": ["hacking-realtime-sync"],
              "estimated_effort": "2 days"}, {"id": "event-bus-integration", "title":
              "Интеграция с Event Bus", "description": "Реализация публикации и подписки
              на события через Kafka\nдля всех компонентов боевой интеграции взлома.\n",
              "dependencies": ["hacking-combat-integration"], "estimated_effort":
              "2 days"}, {"id": "database-schema", "title": "Создание схемы БД", "description":
              "Создание таблиц БД для типов взлома, сетей, выполнений взлома,\nперегрева
              и доступа с миграциями Liquibase.\n", "dependencies": [], "estimated_effort":
              "3 days"}]}, "diagrams": {"component_diagram": "```mermaid\ngraph TB\n    Client[UE5
              Client] --> Gateway[API Gateway]\n\n    Gateway --> HackingService[Hacking
              Service<br/>8086]\n    Gateway --> GameplayService[Gameplay Service<br/>8083]\n    Gateway
              --> RealtimeService[Realtime Service<br/>8085]\n\n    HackingService
              --> HTM[Hacking Types Manager]\n    HackingService --> HNM[Hacking Networks
              Manager]\n    HackingService --> HCI[Hacking Combat Integration]\n    HackingService
              --> HOM[Hacking Overheat Manager]\n    HackingService --> HAC[Hacking
              Access Control]\n\n    GameplayService --> HCC[Hacking Combat Coordinator]\n    GameplayService
              --> HEA[Hacking Effects Applier]\n\n    RealtimeService --> HRS[Hacking
              Realtime Sync]\n    RealtimeService --> HES[Hacking Effects Sync]\n    RealtimeService
              --> HOS[Hacking Overheat Sync]\n\n    HCI --> HTM\n    HCI --> HNM\n    HCI
              --> HOM\n    HCI --> HAC\n\n    HackingService --> CombatService[Combat
              Service]\n    HackingService --> ProgressionService[Progression Service]\n    HackingService
              --> InventoryService[Inventory Service]\n    HackingService --> AnalyticsService[Analytics
              Service]\n\n    HackingService --> EventBus[Event Bus<br/>Kafka]\n    GameplayService
              --> EventBus\n    RealtimeService --> EventBus\n    EventBus --> RealtimeGateway[Realtime
              Gateway]\n\n    HackingService --> DB[(Hacking DB)]\n    GameplayService
              --> DB\n    RealtimeService --> DB\n\n    Client --> WSHacking[WebSocket<br/>Hacking]\n    WSHacking
              --> HackingService\n    WSHacking --> GameplayService\n    WSHacking
              --> RealtimeService\n```\n", "hacking_execution_flow_diagram": "```mermaid\nsequenceDiagram\n    participant
              P as Player\n    participant HCI as Hacking Combat Integration\n    participant
              HTM as Hacking Types Manager\n    participant HNM as Hacking Networks
              Manager\n    participant HOM as Hacking Overheat Manager\n    participant
              HS as Hacking Service\n    participant RS as Realtime Service\n\n    P->>HCI:
              Execute hacking in combat\n    HCI->>HNM: Check available networks\n    HNM-->>HCI:
              Networks available\n    HCI->>HTM: Check hacking type\n    HTM-->>HCI:
              Type validated\n    HCI->>HOM: Check overheat\n    HOM-->>HCI: Overheat
              status\n    HCI->>HS: Execute hacking\n    HS->>HS: Apply effects\n    HS->>HOM:
              Update overheat\n    HS->>RS: Sync hacking\n    RS->>P: Hacking executed\n```\n"}}'
        - column:
            name: metadata
            value: '{"id": "combat-hacking-integration-architecture", "title": "Архитектура
              боевой интеграции взлома", "document_type": "architecture", "category":
              "systems", "status": "draft", "version": "1.0.0", "last_updated": "2025-12-01T00:00:00+00:00",
              "owners": [{"role": "architect", "contact": "architect@necp.game"}],
              "tags": ["architecture", "combat", "hacking", "networks", "realtime"],
              "related_systems": ["gameplay-service", "hacking-service", "combat-service",
              "realtime-service"], "related_documents": [{"id": "combat-hacking-types",
              "relation": "implements"}, {"id": "combat-hacking-networks", "relation":
              "implements"}, {"id": "combat-hacking-combat-integration", "relation":
              "implements"}, {"id": "combat-extended-mechanics-architecture", "relation":
              "extends"}], "github_issue": 57, "visibility": "internal", "audience":
              ["architect", "backend", "gameplay", "api-designer", "network"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\combat-hacking-integration-architecture.yaml
