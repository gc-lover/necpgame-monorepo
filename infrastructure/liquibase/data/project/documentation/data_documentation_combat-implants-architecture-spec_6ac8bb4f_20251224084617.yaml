databaseChangeLog:
- changeSet:
    id: documentation-combat-implants-architecture-spec-6ac8bb4f
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-454557268687814'
        - column:
            name: doc_id
            value: combat-implants-architecture-spec
        - column:
            name: title
            value: Техническое задание и диаграммы Combat Implants
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-30 15:30:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - combat
            - implants
            - technical-specification
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value: []
        - column:
            name: related_documents
            value: '[{"id": "combat-implants-architecture", "relation": "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - database
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "combat-implants-architecture-spec", "title":
              "Техническое задание и диаграммы Combat Implants", "document_type":
              "architecture", "category": "systems", "status": "draft", "version":
              "1.0.0", "last_updated": "2025-11-30T15:30:00+00:00", "owners": [{"role":
              "architect", "contact": "architect@necp.game"}], "tags": ["architecture",
              "combat", "implants", "technical-specification"], "related_documents":
              [{"id": "combat-implants-architecture", "relation": "extends"}], "github_issue":
              80, "visibility": "internal", "audience": ["architect", "backend", "database"]},
              "technical_specification": {"subtasks": [{"id": "implant-catalog-manager",
              "title": "Реализация менеджера каталога имплантов", "description": "Реализация
              Implant Catalog Manager с управлением типами имплантов,\nих эффектами,
              редкостью и совместимостью.\n", "dependencies": [], "estimated_effort":
              "4 days"}, {"id": "implant-acquisition-manager", "title": "Реализация
              менеджера приобретения имплантов", "description": "Реализация Implant
              Acquisition Manager с поддержкой покупки, лута,\nквестов и крафта имплантов.\n",
              "dependencies": ["implant-catalog-manager"], "estimated_effort": "5
              days"}, {"id": "implant-limits-manager", "title": "Реализация менеджера
              лимитов имплантов", "description": "Реализация Implant Limits Manager
              с проверкой слотов, совместимости,\nэнергии и человечности.\n", "dependencies":
              ["implant-catalog-manager"], "estimated_effort": "6 days"}, {"id": "implant-visuals-manager",
              "title": "Реализация менеджера визуализации имплантов", "description":
              "Реализация Implant Visuals Manager с управлением визуальными эффектами\nимплантов
              на персонаже.\n", "dependencies": ["implant-catalog-manager"], "estimated_effort":
              "4 days"}, {"id": "cyberpsychosis-tracker", "title": "Реализация трекера
              киберпсихоза", "description": "Реализация Cyberpsychosis Tracker с отслеживанием
              уровня киберпсихоза\nи применением эффектов при достижении порогов.\n",
              "dependencies": ["implant-limits-manager"], "estimated_effort": "5 days"},
              {"id": "implant-effects-calculator", "title": "Реализация калькулятора
              эффектов имплантов", "description": "Реализация Implant Effects Calculator
              с расчетом эффектов имплантов\nи их применением к характеристикам персонажа.\n",
              "dependencies": ["implant-catalog-manager"], "estimated_effort": "4
              days"}, {"id": "implant-synergy-system", "title": "Реализация системы
              синергий имплантов", "description": "Реализация Implant Synergy System
              с проверкой синергий между имплантами\nи применением бонусов.\n", "dependencies":
              ["implant-effects-calculator"], "estimated_effort": "5 days"}, {"id":
              "websocket-channels", "title": "Реализация WebSocket каналов", "description":
              "Реализация WebSocket каналов для realtime обновлений имплантов,\nкиберпсихоза
              и синергий.\n", "dependencies": ["implant-acquisition-manager", "cyberpsychosis-tracker"],
              "estimated_effort": "3 days"}, {"id": "event-bus-integration", "title":
              "Интеграция с Event Bus", "description": "Реализация публикации и подписки
              на события через Kafka\nдля всех компонентов системы имплантов.\n",
              "dependencies": ["implant-acquisition-manager", "implant-limits-manager"],
              "estimated_effort": "2 days"}, {"id": "database-schema", "title": "Создание
              схемы БД", "description": "Создание таблиц БД для каталога имплантов,
              имплантов персонажей,\nприобретений, лимитов, киберпсихоза и синергий
              с миграциями Liquibase.\n", "dependencies": [], "estimated_effort":
              "3 days"}]}, "diagrams": {"component_diagram": "```mermaid\ngraph TB\n    Client[UE5
              Client] --> Gateway[API Gateway]\n\n    Gateway --> GameplayService[Gameplay
              Service<br/>8083]\n\n    GameplayService --> ICM[Implant Catalog Manager]\n    GameplayService
              --> IAM[Implant Acquisition Manager]\n    GameplayService --> ILM[Implant
              Limits Manager]\n    GameplayService --> IVM[Implant Visuals Manager]\n    GameplayService
              --> CT[Cyberpsychosis Tracker]\n    GameplayService --> IEC[Implant
              Effects Calculator]\n    GameplayService --> ISS[Implant Synergy System]\n\n    IAM
              --> ILM\n    IAM --> IEC\n    ILM --> CT\n    IEC --> ISS\n\n    GameplayService
              --> CharacterService[Character Service]\n    GameplayService --> ProgressionService[Progression
              Service]\n    GameplayService --> EconomyService[Economy Service]\n    GameplayService
              --> InventoryService[Inventory Service]\n    GameplayService --> AbilityService[Ability
              Service]\n    GameplayService --> CombatService[Combat Service]\n\n    GameplayService
              --> EventBus[Event Bus<br/>Kafka]\n    EventBus --> RealtimeGateway[Realtime
              Gateway]\n\n    GameplayService --> DB[(Gameplay DB)]\n\n    Client
              --> WSImplants[WebSocket<br/>Implants]\n    WSImplants --> GameplayService\n```\n",
              "implant_installation_flow_diagram": "```mermaid\nsequenceDiagram\n    participant
              C as Client\n    participant IAM as Implant Acquisition Manager\n    participant
              ILM as Implant Limits Manager\n    participant IEC as Implant Effects
              Calculator\n    participant CT as Cyberpsychosis Tracker\n    participant
              ISS as Implant Synergy System\n    participant CS as Character Service\n    participant
              EB as Event Bus\n\n    C->>IAM: POST /implants/install\n    IAM->>ILM:
              Check limits\n    ILM->>ILM: Check slots\n    ILM->>ILM: Check compatibility\n    ILM->>ILM:
              Check energy\n    ILM-->>IAM: Limits OK\n    IAM->>IEC: Calculate effects\n    IEC-->>IAM:
              Effects calculated\n    IAM->>CT: Update cyberpsychosis\n    CT-->>IAM:
              Cyberpsychosis updated\n    IAM->>ISS: Check synergies\n    ISS-->>IAM:
              Synergies checked\n    IAM->>CS: Update character stats\n    CS-->>IAM:
              Stats updated\n    IAM->>EB: Publish combat.implant.installed\n    IAM-->>C:
              Implant installed\n```\n", "cyberpsychosis_update_diagram": "```mermaid\nsequenceDiagram\n    participant
              ILM as Implant Limits Manager\n    participant CT as Cyberpsychosis
              Tracker\n    participant CS as Character Service\n    participant EB
              as Event Bus\n\n    Note over ILM: Implant installed/uninstalled\n    ILM->>CT:
              Update humanity\n    CT->>CT: Calculate cyberpsychosis level\n    CT->>CT:
              Check thresholds\n\n    alt Threshold reached\n        CT->>CT: Apply
              cyberpsychosis effects\n        CT->>CS: Update character effects\n        CS-->>CT:
              Effects applied\n    end\n\n    CT->>EB: Publish combat.implant.cyberpsychosis.updated\n```\n"}}'
        - column:
            name: metadata
            value: '{"id": "combat-implants-architecture-spec", "title": "Техническое
              задание и диаграммы Combat Implants", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.0.0", "last_updated":
              "2025-11-30T15:30:00+00:00", "owners": [{"role": "architect", "contact":
              "architect@necp.game"}], "tags": ["architecture", "combat", "implants",
              "technical-specification"], "related_documents": [{"id": "combat-implants-architecture",
              "relation": "extends"}], "github_issue": 80, "visibility": "internal",
              "audience": ["architect", "backend", "database"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\combat-implants-architecture-spec.yaml
