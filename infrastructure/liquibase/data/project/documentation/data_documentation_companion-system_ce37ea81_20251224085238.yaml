databaseChangeLog:
- changeSet:
    id: documentation-companion-system-ce37ea81
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-698613155756728'
        - column:
            name: doc_id
            value: backend-companion-system
        - column:
            name: title
            value: Companion System — Система компаньонов
        - column:
            name: document_type
            value: implementation
        - column:
            name: category
            value: backend
        - column:
            name: status
            value: approved
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-07 02:34:00+00:00
        - column:
            name: concept_approved
            value: true
        - column:
            name: concept_reviewed_at
            value: 2025-11-07 02:34:00+00:00
        - column:
            name: owners
            value: '[{"role": "gameplay_lead", "contact": "gameplay@necp.game"}]'
        - column:
            name: tags
            value:
            - companions
            - pets
            - drones
        - column:
            name: topics
            value:
            - gameplay-companions
            - player-progression
        - column:
            name: related_systems
            value:
            - companion-service
            - combat-service
            - inventory-service
        - column:
            name: related_documents
            value: '[{"id": "combat-shooter-core", "relation": "references"}]'
        - column:
            name: source
            value: shared/docs/knowledge/implementation/backend/companion/companion-system.md
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - gameplay
            - backend
            - live-ops
        - column:
            name: risk_level
            value: medium
        - column:
            name: content
            value: '{"metadata": {"id": "backend-companion-system", "title": "Companion
              System — Система компаньонов", "document_type": "implementation", "category":
              "backend", "status": "approved", "version": "1.0.0", "last_updated":
              "2025-11-07T02:34:00+00:00", "concept_approved": true, "concept_reviewed_at":
              "2025-11-07T02:34:00+00:00", "owners": [{"role": "gameplay_lead", "contact":
              "gameplay@necp.game"}], "tags": ["companions", "pets", "drones"], "topics":
              ["gameplay-companions", "player-progression"], "related_systems": ["companion-service",
              "combat-service", "inventory-service"], "related_documents": [{"id":
              "combat-shooter-core", "relation": "references"}], "source": "shared/docs/knowledge/implementation/backend/companion/companion-system.md",
              "visibility": "internal", "audience": ["gameplay", "backend", "live-ops"],
              "risk_level": "medium"}, "review": {"chain": [{"role": "gameplay_lead",
              "reviewer": "", "reviewed_at": "2025-11-07T02:34:00+00:00", "status":
              "approved"}], "next_actions": []}, "summary": {"problem": "Требовалось
              описать серверную систему компаньонов (боевые дроны, утилитарные помощники,
              питомцы) и их прогрессию.", "goal": "Сформировать спецификацию типов
              компаньонов, схем данных, логики призыва и прокачки.", "essence": "Документ
              фиксирует категории компаньонов, таблицы `companion_types` и `player_companions`,
              процедуры призыва, прогрессии и API.", "key_points": ["Компаньоны делятся
              на боевых дронов, утилитарных помощников и социальных питомцев с уникальными
              эффектами.", "Данные хранятся в `companion_types` и `player_companions`
              с кастомизацией, уровнем и статистикой.", "Сервис поддерживает призыв/отзыв,
              применение бонусов, прокачку и способности (активные и пассивные)."]},
              "content": {"sections": [{"id": "companion_types", "title": "Категории
              компаньонов", "body": "Combat drones (attack/support/recon), Utility
              (loot collector, hacking assistant, crafting bot) и Social pets (cat,
              dog,\ndrone-bird) задают различные функции и ограничения.\n", "mechanics_links":
              [], "assets": []}, {"id": "data_model", "title": "Схемы данных", "body":
              "`companion_types` описывает код, категорию, статы, способности и стоимость.
              `player_companions` хранит связь с игроком,\nуровень, опыт, экипировку
              и статус призыва.\n", "mechanics_links": [], "assets": []}, {"id": "summon",
              "title": "Призыв и управление", "body": "CompanionService проверяет
              владение, отзывает активного компаньона, сохраняет статус призыва и
              спавнит сущность в мире.\nОтзыв удаляет эффекты и деспаунит компаньона.\n",
              "mechanics_links": [], "assets": []}, {"id": "progression", "title":
              "Прогрессия компаньона", "body": "XP повышает уровень до 50, улучшает
              здоровье и урон. Функции рассчитывают XP для следующего уровня, применяют
              бонусы и\nуведомляют игрока.\n", "mechanics_links": [], "assets": []},
              {"id": "abilities", "title": "Способности компаньонов", "body": "Активные
              способности (например, ATTACK_COMMAND, DEFENSIVE_MODE) имеют cooldown
              и эффекты. Пассивные способности обеспечивают\nпостоянные бонусы вроде
              auto-collect или combat assistance.\n", "mechanics_links": [], "assets":
              []}, {"id": "api", "title": "API операций", "body": "REST API покрывает
              получение списка доступных компаньонов, покупку, управление призывом,
              переименование и использование\nспособностей.\n", "mechanics_links":
              [], "assets": []}]}, "appendix": {"glossary": [], "references": [],
              "decisions": []}, "implementation": {"needs_task": false, "github_issue":
              79, "queue_reference": ["shared/trackers/queues/concept/queued.yaml#backend-companion-system"],
              "blockers": []}, "history": [{"version": "1.0.0", "date": "2025-11-07",
              "author": "ai_brain_manager", "changes": "Определены типы компаньонов,
              схемы данных, логика призыва, прогрессии и API."}], "validation": {"checksum":
              "", "schema_version": "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "backend-companion-system", "title": "Companion System
              — Система компаньонов", "document_type": "implementation", "category":
              "backend", "status": "approved", "version": "1.0.0", "last_updated":
              "2025-11-07T02:34:00+00:00", "concept_approved": true, "concept_reviewed_at":
              "2025-11-07T02:34:00+00:00", "owners": [{"role": "gameplay_lead", "contact":
              "gameplay@necp.game"}], "tags": ["companions", "pets", "drones"], "topics":
              ["gameplay-companions", "player-progression"], "related_systems": ["companion-service",
              "combat-service", "inventory-service"], "related_documents": [{"id":
              "combat-shooter-core", "relation": "references"}], "source": "shared/docs/knowledge/implementation/backend/companion/companion-system.md",
              "visibility": "internal", "audience": ["gameplay", "backend", "live-ops"],
              "risk_level": "medium"}'
        - column:
            name: source_file
            value: knowledge\implementation\backend\companion\companion-system.yaml
