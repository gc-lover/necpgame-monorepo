databaseChangeLog:
- changeSet:
    id: documentation-cooperative-challenges-system-architecture-67bf0836
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '1136791517539827'
        - column:
            name: doc_id
            value: cooperative-challenges-system-architecture
        - column:
            name: title
            value: Архитектура системы кооперативных испытаний
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-12-XXT00:00:00Z
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - gameplay
            - cooperative
            - challenges
            - teamwork
            - hardcore
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value:
            - gameplay-service
            - social-service
            - achievement-service
        - column:
            name: related_documents
            value: '[{"id": "cooperative-challenges-idea", "relation": "implements"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - gameplay
            - api-designer
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "cooperative-challenges-system-architecture",
              "title": "Архитектура системы кооперативных испытаний", "document_type":
              "architecture", "category": "systems", "status": "draft", "version":
              "1.0.0", "last_updated": "2025-12-XXT00:00:00Z", "owners": [{"role":
              "architect", "contact": "architect@necp.game"}], "tags": ["architecture",
              "gameplay", "cooperative", "challenges", "teamwork", "hardcore"], "related_systems":
              ["gameplay-service", "social-service", "achievement-service"], "related_documents":
              [{"id": "cooperative-challenges-idea", "relation": "implements"}], "github_issue":
              1507, "visibility": "internal", "audience": ["architect", "backend",
              "gameplay", "api-designer"]}, "summary": {"problem": "Не хватает испытаний,
              которые бы требовали высокой координации команды.\nБольшинство контента
              можно пройти без идеальной координации.\n", "goal": "Создать архитектуру
              кооперативных испытаний, которая:\n- Требует синхронизированных действий
              команды\n- Предоставляет ролевые испытания\n- Тестирует координацию
              команды\n- Награждает за идеальную координацию\n", "essence": "Система
              кооперативных испытаний предоставляет три типа испытаний: Synchronized
              Actions,\nRole-Specific Challenges и Team Coordination Tests. Каждый
              тип требует идеальной координации.\n"}, "architecture": {"overview":
              "Система кооперативных испытаний состоит из следующих компонентов:\n1.
              Cooperative Challenge Manager - управление кооперативными испытаниями\n2.
              Synchronization Tracker - отслеживание синхронизации действий\n3. Role
              Challenge Controller - управление ролевыми испытаниями\n4. Coordination
              Tester - тестирование координации команды\n5. Coordination Reward Calculator
              - расчёт наград за координацию\n", "microservices": [{"name": "gameplay-service",
              "port": 8083, "responsibility": "Обработка кооперативных испытаний:\n-
              Управление испытаниями\n- Отслеживание синхронизации\n- Тестирование
              координации\n", "components": [{"cooperative-challenge-manager": "управление
              испытаниями"}, {"synchronization-tracker": "отслеживание синхронизации"},
              {"role-challenge-controller": "управление ролевыми испытаниями"}, {"coordination-tester":
              "тестирование координации"}, {"coordination-reward-calculator": "расчёт
              наград"}], "endpoints": ["POST /api/v1/gameplay/cooperative-challenges/start
              - начало испытания", "POST /api/v1/gameplay/cooperative-challenges/synchronize
              - синхронизация действия", "GET /api/v1/gameplay/cooperative-challenges/{id}/status
              - статус испытания", "POST /api/v1/gameplay/cooperative-challenges/{id}/complete
              - завершение"], "websocket_channels": ["wss://api.necp.game/v1/gameplay/cooperative-challenges/{challengeId}
              - события испытания"], "events_published": [{"gameplay.cooperative-challenge.started":
              "начало испытания"}, {"gameplay.cooperative-challenge.synchronized":
              "синхронизация действия"}, {"gameplay.cooperative-challenge.completed":
              "завершение испытания"}, {"gameplay.cooperative-challenge.coordination.perfect":
              "идеальная координация"}]}], "data_flows": {"synchronization_flow":
              "1. Игроки должны выполнить синхронизированное действие\n2. Synchronization
              Tracker отслеживает действия всех игроков\n3. Synchronization Tracker
              проверяет окно синхронизации (±0.5 сек)\n4. При успешной синхронизации
              Coordination Reward Calculator увеличивает бонус\n5. Gameplay Service
              публикует событие gameplay.cooperative-challenge.synchronized\n", "coordination_test_flow":
              "1. Coordination Tester активирует тест координации\n2. Coordination
              Tester отслеживает позиционирование команды\n3. Coordination Tester
              отслеживает коммуникацию команды\n4. Coordination Tester отслеживает
              распределение ресурсов\n5. Coordination Tester оценивает координацию
              команды\n6. При идеальной координации выдается максимальный бонус\n"},
              "database_structure": {"tables": [{"name": "cooperative_challenge_sessions",
              "description": "Сессии кооперативных испытаний", "columns": [{"id":
              "UUID PRIMARY KEY"}, {"challenge_type": "VARCHAR(100)"}, {"team_id":
              "UUID FOREIGN KEY"}, {"synchronization_score": "DECIMAL(5,2)"}, {"coordination_score":
              "DECIMAL(5,2)"}, {"started_at": "TIMESTAMP"}, {"completed_at": "TIMESTAMP
              (nullable)"}]}, {"name": "synchronization_events", "description": "События
              синхронизации", "columns": [{"id": "UUID PRIMARY KEY"}, {"challenge_session_id":
              "UUID FOREIGN KEY"}, {"player_id": "UUID FOREIGN KEY"}, {"action_type":
              "VARCHAR(100)"}, {"timestamp": "TIMESTAMP"}, {"synchronized": "BOOLEAN"}]}]},
              "integrations": {"social_service": "- Координация команд\n- Управление
              группами\n", "achievement_service": "- Отслеживание достижений\n- Выдача
              титулов\n- Уведомления о достижениях\n"}, "technical_tasks": {"phases":
              {"phase_1": {"name": "Cooperative Challenge Manager и Synchronization
              Tracker", "tasks": ["Реализация Cooperative Challenge Manager", "Реализация
              Synchronization Tracker", "Управление испытаниями", "Отслеживание синхронизации",
              "Интеграция с Gameplay Service"], "estimated_effort": "4 days"}, "phase_2":
              {"name": "Role Challenge Controller и Coordination Tester", "tasks":
              ["Реализация Role Challenge Controller", "Реализация Coordination Tester",
              "Управление ролевыми испытаниями", "Тестирование координации", "Интеграция
              с Social Service"], "estimated_effort": "4 days"}}}}}'
        - column:
            name: metadata
            value: '{"id": "cooperative-challenges-system-architecture", "title":
              "Архитектура системы кооперативных испытаний", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.0.0", "last_updated":
              "2025-12-XXT00:00:00Z", "owners": [{"role": "architect", "contact":
              "architect@necp.game"}], "tags": ["architecture", "gameplay", "cooperative",
              "challenges", "teamwork", "hardcore"], "related_systems": ["gameplay-service",
              "social-service", "achievement-service"], "related_documents": [{"id":
              "cooperative-challenges-idea", "relation": "implements"}], "github_issue":
              1507, "visibility": "internal", "audience": ["architect", "backend",
              "gameplay", "api-designer"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\cooperative-challenges-system-architecture.yaml
