databaseChangeLog:
- changeSet:
    id: documentation-corporate-npc-integration-architecture-8261ba86
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-899575508837082'
        - column:
            name: doc_id
            value: corporate-npc-integration-architecture
        - column:
            name: title
            value: Архитектура интеграции корпоративных NPC с системами корпоративных
              войн и лояльности (на примере Джеймса Рида)
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-23 12:00:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - npc
            - corporate
            - loyalty
            - corporate-wars
            - integration
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value:
            - gameplay-service-go
            - world-service-go
            - quest-engine
            - clan-war-system
        - column:
            name: related_documents
            value: '[{"id": "npc-integration-system-architecture", "relation": "extends"},
              {"id": "npc-james-iron-reed", "relation": "extends"}, {"id": "clan-war-system-architecture",
              "relation": "references"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - game-design
            - api-designer
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "corporate-npc-integration-architecture",
              "title": "Архитектура интеграции корпоративных NPC с системами корпоративных
              войн и лояльности (на примере Джеймса Рида)", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.0.0", "last_updated":
              "2025-11-23T12:00:00+00:00", "owners": [{"role": "architect", "contact":
              "architect@necp.game"}], "tags": ["architecture", "npc", "corporate",
              "loyalty", "corporate-wars", "integration"], "related_systems": ["gameplay-service-go",
              "world-service-go", "quest-engine", "clan-war-system"], "related_documents":
              [{"id": "npc-integration-system-architecture", "relation": "extends"},
              {"id": "npc-james-iron-reed", "relation": "extends"}, {"id": "clan-war-system-architecture",
              "relation": "references"}], "github_issue": 24, "visibility": "internal",
              "audience": ["architect", "backend", "game-design", "api-designer"]},
              "summary": {"problem": "Корпоративные NPC (такие как Джеймс Рид из Militech)
              требуют специфической интеграции\nс системами корпоративных войн, лояльности
              корпораций, программ набора и военных операций,\nкоторые отличаются
              от интеграции с бандами и уличными войнами.\n", "goal": "Создать архитектурную
              схему интеграции корпоративных NPC с игровыми системами:\n- Система
              корпоративных войн (Militech vs Arasaka)\n- Система лояльности корпораций\n-
              Программы набора и операций\n- Военные ресурсы и контракты\n- API endpoints
              (высокоуровнево)\n- Техническое задание для реализации\n", "essence":
              "Архитектура интеграции корпоративных NPC с системами корпоративных
              войн и лояльности\nдля обеспечения динамического корпоративного контента
              и PvP/PvE конфликтов.\n"}, "architecture": {"overview": "Система интеграции
              корпоративных NPC расширяет общую архитектуру NPC интеграции\nследующими
              компонентами:\n1. Corporate War Manager - управление корпоративными
              войнами\n2. Corporate Loyalty System - система лояльности корпорациям\n3.
              Corporate Recruitment Manager - управление программами набора\n4. Corporate
              Operations Coordinator - координация военных операций\n5. Corporate
              Resource Manager - управление военными ресурсами\n6. Corporate Contract
              System - система корпоративных контрактов\n7. Corporate Reputation Tracker
              - отслеживание корпоративной репутации\n", "microservices": [{"name":
              "corporate-war-manager", "location": "gameplay-service-go (модуль corporate-wars)",
              "responsibility": "Управление корпоративными войнами:\n- Инициация корпоративных
              войн (Militech vs Arasaka)\n- Координация PvP/PvE конфликтов между корпорациями\n-
              Управление территориальным контролем корпораций\n- Отслеживание результатов
              войн\n", "corporate_war_types": ["Proxy Wars (прокси-войны через наёмников)",
              "Direct Conflicts (прямые конфликты)", "Economic Wars (экономические
              войны)", "Information Wars (информационные войны)"], "endpoints": ["GET
              /api/v1/corporate/{corp_id}/wars - активные войны корпорации", "POST
              /api/v1/corporate/{corp_id}/wars/{war_id}/initiate - инициация войны",
              "GET /api/v1/corporate/{corp_id}/wars/{war_id}/status - статус войны",
              "POST /api/v1/corporate/{corp_id}/wars/{war_id}/join - присоединение
              к войне", "POST /api/v1/corporate/{corp_id}/wars/{war_id}/resolve -
              разрешение войны"]}, {"name": "corporate-loyalty-system", "location":
              "gameplay-service-go (модуль corporate-loyalty)", "responsibility":
              "Система лояльности корпорациям:\n- Отслеживание лояльности игроков
              к корпорациям\n- Управление уровнями лояльности\n- Проверка верности
              игроков\n- Влияние на доступность контента\n", "loyalty_features": [{"Loyalty
              levels (уровни лояльности": "neutral, friendly, trusted, loyal, devoted)"},
              "Loyalty decay (угасание лояльности при бездействии)", "Betrayal detection
              (детекция предательства)", "Content gating (ограничение доступа к контенту)"],
              "endpoints": ["GET /api/v1/corporate/{corp_id}/loyalty/{player_id} -
              лояльность игрока", "POST /api/v1/corporate/{corp_id}/loyalty/{player_id}/update
              - обновление лояльности", "GET /api/v1/corporate/{corp_id}/loyalty/{player_id}/history
              - история лояльности", "POST /api/v1/corporate/{corp_id}/loyalty/{player_id}/betrayal
              - детекция предательства"]}, {"name": "corporate-recruitment-manager",
              "location": "gameplay-service-go (модуль corporate-recruitment)", "responsibility":
              "Управление программами набора:\n- Создание программ набора для корпораций\n-
              Управление условиями набора\n- Отслеживание кандидатов\n- Управление
              процессом найма\n", "recruitment_features": ["Recruitment programs (программы
              набора)", "Candidate tracking (отслеживание кандидатов)", "Hiring process
              (процесс найма)", "Onboarding (ввод в должность)"], "endpoints": ["GET
              /api/v1/corporate/{corp_id}/recruitment/programs - программы набора",
              "POST /api/v1/corporate/{corp_id}/recruitment/programs/{program_id}/apply
              - подача заявки", "GET /api/v1/corporate/{corp_id}/recruitment/candidates/{player_id}
              - статус кандидата", "POST /api/v1/corporate/{corp_id}/recruitment/candidates/{player_id}/accept
              - принятие кандидата"]}, {"name": "corporate-operations-coordinator",
              "location": "gameplay-service-go (модуль corporate-operations)", "responsibility":
              "Координация военных операций:\n- Создание военных операций от корпораций\n-
              Координация участников операций\n- Управление целями операций\n- Отслеживание
              результатов операций\n", "operation_types": ["Military Operations (военные
              операции)", "Intelligence Operations (разведывательные операции)", "Sabotage
              Operations (операции саботажа)", "Defense Operations (оборонительные
              операции)"], "endpoints": ["GET /api/v1/corporate/{corp_id}/operations
              - доступные операции", "POST /api/v1/corporate/{corp_id}/operations/{op_id}/start
              - запуск операции", "GET /api/v1/corporate/{corp_id}/operations/{op_id}/status
              - статус операции", "POST /api/v1/corporate/{corp_id}/operations/{op_id}/complete
              - завершение операции"]}, {"name": "corporate-resource-manager", "location":
              "economy-service-go (модуль corporate-resources)", "responsibility":
              "Управление военными ресурсами:\n- Управление доступом к военным ресурсам\n-
              Контроль распределения ресурсов\n- Управление военным снаряжением\n-
              Интеграция с экономикой корпораций\n", "resource_types": ["Military
              Equipment (военное снаряжение)", "Intelligence Data (разведывательные
              данные)", "Corporate Contracts (корпоративные контракты)", "Access Permissions
              (разрешения доступа)"], "endpoints": ["GET /api/v1/corporate/{corp_id}/resources
              - доступные ресурсы", "GET /api/v1/corporate/{corp_id}/resources/{resource_id}
              - информация о ресурсе", "POST /api/v1/corporate/{corp_id}/resources/{resource_id}/request
              - запрос ресурса", "GET /api/v1/corporate/{corp_id}/resources/{resource_id}/access
              - проверка доступа"]}, {"name": "corporate-contract-system", "location":
              "gameplay-service-go (модуль corporate-contracts)", "responsibility":
              "Система корпоративных контрактов:\n- Создание контрактов от корпораций\n-
              Управление условиями контрактов\n- Отслеживание выполнения контрактов\n-
              Управление наградами за контракты\n", "contract_types": ["Mercenary
              Contracts (контракты наёмников)", "Intelligence Contracts (разведывательные
              контракты)", "Sabotage Contracts (контракты саботажа)", "Protection
              Contracts (контракты защиты)"], "endpoints": ["GET /api/v1/corporate/{corp_id}/contracts
              - доступные контракты", "GET /api/v1/corporate/{corp_id}/contracts/{contract_id}
              - информация о контракте", "POST /api/v1/corporate/{corp_id}/contracts/{contract_id}/accept
              - принятие контракта", "POST /api/v1/corporate/{corp_id}/contracts/{contract_id}/complete
              - завершение контракта"]}, {"name": "corporate-reputation-tracker",
              "location": "gameplay-service-go (модуль corporate-reputation)", "responsibility":
              "Отслеживание корпоративной репутации:\n- Управление репутацией с корпорациями\n-
              Отслеживание истории взаимодействий\n- Влияние на доступность контента\n-
              Интеграция с системой лояльности\n", "reputation_features": ["Reputation
              levels (уровни репутации)", "Interaction history (история взаимодействий)",
              "Content gating (ограничение доступа)", "Loyalty integration (интеграция
              с лояльностью)"], "endpoints": ["GET /api/v1/corporate/{corp_id}/reputation/{player_id}
              - репутация игрока", "GET /api/v1/corporate/{corp_id}/reputation/{player_id}/history
              - история репутации", "POST /api/v1/corporate/{corp_id}/reputation/{player_id}/update
              - обновление репутации"]}], "data_flow": {"corporate_war_flow": "1.
              NPC Джеймс Рид инициирует корпоративную войну против Arasaka\n2. Corporate
              War Manager создаёт войну\n3. Игроки получают уведомление о начале войны\n4.
              Игроки присоединяются к стороне (Militech или Arasaka)\n5. Corporate
              War Manager координирует конфликт\n6. Игроки участвуют в PvP/PvE боях\n7.
              Corporate War Manager отслеживает прогресс войны\n8. При завершении
              войны определяются последствия\n9. Corporate Loyalty System обновляет
              лояльность игроков\n", "loyalty_flow": "1. Игрок взаимодействует с NPC
              Джеймсом Ридом\n2. Игрок выполняет задания Militech\n3. Corporate Loyalty
              System увеличивает лояльность\n4. Игрок получает доступ к новому контенту\n5.
              Игрок работает с конкурентами (Arasaka)\n6. Corporate Loyalty System
              детектирует предательство\n7. Лояльность к Militech снижается\n8. Доступ
              к контенту Militech ограничивается\n", "recruitment_flow": "1. Игрок
              взаимодействует с NPC Джеймсом Ридом\n2. NPC Dialogue System показывает
              опцию \"Подать заявку на набор\"\n3. Corporate Recruitment Manager проверяет
              условия\n4. Игрок подаёт заявку на программу набора\n5. Corporate Recruitment
              Manager отслеживает кандидата\n6. Игрок выполняет задания для набора\n7.
              Corporate Recruitment Manager принимает кандидата\n8. Corporate Resource
              Manager открывает доступ к ресурсам\n", "operation_flow": "1. NPC Джеймс
              Рид создаёт военную операцию\n2. Corporate Operations Coordinator публикует
              операцию\n3. Игроки просматривают доступные операции\n4. Игроки присоединяются
              к операции\n5. Corporate Operations Coordinator координирует участников\n6.
              Операция проходит (рейд, PvP, PvE)\n7. Corporate Operations Coordinator
              отслеживает прогресс\n8. При завершении операции выдаются награды\n9.
              Corporate Reputation Tracker обновляет репутацию\n"}, "integrations":
              {"with_npc_integration_system": "- Использование NPC Quest Manager для
              квестов\n- Использование NPC Relationship Tracker для отношений\n- Использование
              NPC Dialogue System для диалогов\n- Использование NPC Event Trigger
              System для событий\n", "with_clan_war_system": "- Интеграция с системой
              клановых войн\n- Использование общих механизмов PvP\n- Координация больших
              конфликтов\n", "with_quest_engine": "- Создание корпоративных квестов\n-
              Интеграция с цепочками квестов\n- Управление наградами за квесты\n",
              "with_economy_service": "- Управление экономикой корпораций\n- Контроль
              ресурсов и контрактов\n- Интеграция с рынками\n", "with_world_service":
              "- Управление корпоративными событиями\n- Синхронизация состояния войн\n-
              Интеграция с Live Ops\n"}, "database_schema": {"tables": [{"name": "corporate_wars",
              "description": "Корпоративные войны", "fields": [{"id": "UUID (PK)"},
              {"initiator_corp": "VARCHAR(50) (FK corporations)"}, {"target_corp":
              "VARCHAR(50) (FK corporations)"}, {"war_type": "ENUM (proxy, direct,
              economic, information)"}, {"status": "ENUM (pending, active, resolved)"},
              {"participants": "UUID[] (array of player IDs)"}, {"outcome": "JSONB
              (результат войны)"}, {"created_at": "TIMESTAMP"}, {"updated_at": "TIMESTAMP"}],
              "indexes": ["initiator_corp, status", "target_corp, status"]}, {"name":
              "corporate_loyalty", "description": "Лояльность игроков к корпорациям",
              "fields": [{"id": "UUID (PK)"}, {"player_id": "UUID (FK accounts)"},
              {"corporation_id": "VARCHAR(50) (FK corporations)"}, {"loyalty_level":
              "ENUM (neutral, friendly, trusted, loyal, devoted)"}, {"loyalty_points":
              "INTEGER (очки лояльности)"}, {"last_interaction": "TIMESTAMP"}, {"betrayal_count":
              "INTEGER (количество предательств)"}, {"created_at": "TIMESTAMP"}, {"updated_at":
              "TIMESTAMP"}], "constraints": "- UNIQUE(player_id, corporation_id)\n",
              "indexes": ["player_id, corporation_id", "corporation_id, loyalty_level"]},
              {"name": "corporate_recruitment_programs", "description": "Программы
              набора корпораций", "fields": [{"id": "UUID (PK)"}, {"corporation_id":
              "VARCHAR(50) (FK corporations)"}, {"program_name": "VARCHAR(255)"},
              {"requirements": "JSONB (требования для участия)"}, {"rewards": "JSONB
              (награды за участие)"}, {"status": "ENUM (active, closed, completed)"},
              {"created_at": "TIMESTAMP"}, {"updated_at": "TIMESTAMP"}], "indexes":
              ["corporation_id, status"]}, {"name": "corporate_recruitment_candidates",
              "description": "Кандидаты на набор в корпорации", "fields": [{"id":
              "UUID (PK)"}, {"program_id": "UUID (FK corporate_recruitment_programs)"},
              {"player_id": "UUID (FK accounts)"}, {"status": "ENUM (applied, reviewing,
              accepted, rejected)"}, {"application_data": "JSONB (данные заявки)"},
              {"created_at": "TIMESTAMP"}, {"updated_at": "TIMESTAMP"}], "constraints":
              "- UNIQUE(program_id, player_id)\n", "indexes": ["program_id, status",
              "player_id, status"]}, {"name": "corporate_operations", "description":
              "Военные операции корпораций", "fields": [{"id": "UUID (PK)"}, {"corporation_id":
              "VARCHAR(50) (FK corporations)"}, {"operation_type": "ENUM (military,
              intelligence, sabotage, defense)"}, {"title": "VARCHAR(255)"}, {"description":
              "TEXT"}, {"requirements": "JSONB (требования для участия)"}, {"rewards":
              "JSONB (награды за операцию)"}, {"status": "ENUM (pending, active, completed,
              failed)"}, {"participants": "UUID[] (array of player IDs)"}, {"created_at":
              "TIMESTAMP"}, {"updated_at": "TIMESTAMP"}], "indexes": ["corporation_id,
              status", "operation_type, status"]}, {"name": "corporate_resources",
              "description": "Ресурсы корпораций", "fields": [{"id": "UUID (PK)"},
              {"corporation_id": "VARCHAR(50) (FK corporations)"}, {"resource_type":
              "ENUM (equipment, intelligence, contract, permission)"}, {"resource_id":
              "VARCHAR(50) (FK на соответствующие таблицы)"}, {"access_level": "ENUM
              (public, member, trusted, loyal, devoted)"}, {"availability": "INTEGER
              (количество доступных)"}, {"created_at": "TIMESTAMP"}, {"updated_at":
              "TIMESTAMP"}], "indexes": ["corporation_id, resource_type", "access_level,
              availability"]}, {"name": "corporate_contracts", "description": "Корпоративные
              контракты", "fields": [{"id": "UUID (PK)"}, {"corporation_id": "VARCHAR(50)
              (FK corporations)"}, {"contract_type": "ENUM (mercenary, intelligence,
              sabotage, protection)"}, {"title": "VARCHAR(255)"}, {"description":
              "TEXT"}, {"requirements": "JSONB (требования для принятия)"}, {"rewards":
              "JSONB (награды за выполнение)"}, {"status": "ENUM (available, accepted,
              in_progress, completed, failed)"}, {"contractor_id": "UUID (FK accounts,
              nullable)"}, {"created_at": "TIMESTAMP"}, {"updated_at": "TIMESTAMP"}],
              "indexes": ["corporation_id, status", "contract_type, status", "contractor_id,
              status"]}, {"name": "corporate_reputation", "description": "Репутация
              игроков с корпорациями", "fields": [{"id": "UUID (PK)"}, {"player_id":
              "UUID (FK accounts)"}, {"corporation_id": "VARCHAR(50) (FK corporations)"},
              {"reputation_level": "ENUM (hated, disliked, neutral, liked, respected,
              revered)"}, {"reputation_points": "INTEGER (очки репутации)"}, {"interaction_count":
              "INTEGER (количество взаимодействий)"}, {"last_interaction": "TIMESTAMP"},
              {"created_at": "TIMESTAMP"}]}]}}}'
        - column:
            name: metadata
            value: '{"id": "corporate-npc-integration-architecture", "title": "Архитектура
              интеграции корпоративных NPC с системами корпоративных войн и лояльности
              (на примере Джеймса Рида)", "document_type": "architecture", "category":
              "systems", "status": "draft", "version": "1.0.0", "last_updated": "2025-11-23T12:00:00+00:00",
              "owners": [{"role": "architect", "contact": "architect@necp.game"}],
              "tags": ["architecture", "npc", "corporate", "loyalty", "corporate-wars",
              "integration"], "related_systems": ["gameplay-service-go", "world-service-go",
              "quest-engine", "clan-war-system"], "related_documents": [{"id": "npc-integration-system-architecture",
              "relation": "extends"}, {"id": "npc-james-iron-reed", "relation": "extends"},
              {"id": "clan-war-system-architecture", "relation": "references"}], "github_issue":
              24, "visibility": "internal", "audience": ["architect", "backend", "game-design",
              "api-designer"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\corporate-npc-integration-architecture.yaml
