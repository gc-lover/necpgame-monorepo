databaseChangeLog:
- changeSet:
    id: documentation-cosmetic-core-9861ec28
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-512065120356003'
        - column:
            name: doc_id
            value: cosmetic-core
        - column:
            name: title
            value: Архитектура системы косметики - Основная структура
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.1.0
        - column:
            name: last_updated
            value: 2025-11-30 20:50:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - monetization
            - personalization
            - cosmetics
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value:
            - cosmetic-service
            - inventory-service
            - shop-service
            - economy-service
            - analytics-service
        - column:
            name: related_documents
            value: '[{"id": "backend-cosmetic-system", "relation": "implements"},
              {"id": "cosmetic-mechanics", "relation": "extends"}, {"id": "cosmetic-data-flows",
              "relation": "extends"}, {"id": "cosmetic-database", "relation": "extends"},
              {"id": "cosmetic-integrations", "relation": "extends"}, {"id": "cosmetic-technical",
              "relation": "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - monetization
            - api-designer
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "cosmetic-core", "title": "Архитектура системы
              косметики - Основная структура", "document_type": "architecture", "category":
              "systems", "status": "draft", "version": "1.1.0", "last_updated": "2025-11-30T20:50:00+00:00",
              "owners": [{"role": "architect", "contact": "architect@necp.game"}],
              "tags": ["architecture", "monetization", "personalization", "cosmetics"],
              "related_systems": ["cosmetic-service", "inventory-service", "shop-service",
              "economy-service", "analytics-service"], "related_documents": [{"id":
              "backend-cosmetic-system", "relation": "implements"}, {"id": "cosmetic-mechanics",
              "relation": "extends"}, {"id": "cosmetic-data-flows", "relation": "extends"},
              {"id": "cosmetic-database", "relation": "extends"}, {"id": "cosmetic-integrations",
              "relation": "extends"}, {"id": "cosmetic-technical", "relation": "extends"}],
              "github_issue": 315, "visibility": "internal", "audience": ["architect",
              "backend", "monetization", "api-designer"]}, "summary": {"problem":
              "Требуется спроектировать полную архитектуру системы косметики, включающую:\n-
              Управление каталогом косметических предметов\n- Систему покупки косметики\n-
              Систему экипировки косметики\n- Систему магазина и ротации\n- Систему
              редкостей\n- Интеграции с экономикой и инвентарем\n", "goal": "Создать
              архитектурную схему системы косметики с определением:\n- Компонентов
              для управления косметикой\n- REST, WebSocket и Event Bus контрактов\n-
              Интеграций с другими системами\n- Структуры БД\n- Технического задания
              для реализации\n", "essence": "Полная архитектура системы косметики
              с поддержкой покупки, экипировки,\nмагазина и редкостей.\n"}, "architecture":
              {"overview": "Архитектура системы косметики состоит из следующих компонентов:\n1.
              Cosmetic Manager - управление системой косметики\n2. Cosmetic Catalog
              Manager - управление каталогом косметики\n3. Cosmetic Ownership Manager
              - управление владением косметикой\n4. Cosmetic Shop Manager - управление
              магазином и ротацией\n5. Cosmetic Equip Manager - управление экипировкой
              косметики\n6. Cosmetic Rarity Manager - управление редкостями\n7. Cosmetic
              Purchase Manager - управление покупкой косметики\n8. Cosmetic Preview
              Manager - управление предпросмотром косметики\n9. Cosmetic Analytics
              Collector - сбор аналитики\n10. Cosmetic Telemetry Collector - сбор
              телеметрии\n", "microservices": [{"name": "cosmetic-service", "port":
              8092, "responsibility": "Обработка системы косметики:\n- Управление
              системой косметики\n- Управление каталогом косметики\n- Управление владением
              косметикой\n- Управление магазином и ротацией\n- Управление экипировкой\n-
              Управление редкостями\n- Управление покупкой\n- Управление предпросмотром\n-
              Сбор аналитики\n- Сбор телеметрии\n", "components": [{"cosmetic-manager":
              "управление системой косметики"}, {"cosmetic-catalog-manager": "управление
              каталогом косметики"}, {"cosmetic-ownership-manager": "управление владением
              косметикой"}, {"cosmetic-shop-manager": "управление магазином и ротацией"},
              {"cosmetic-equip-manager": "управление экипировкой косметики"}, {"cosmetic-rarity-manager":
              "управление редкостями"}, {"cosmetic-purchase-manager": "управление
              покупкой косметики"}, {"cosmetic-preview-manager": "управление предпросмотром
              косметики"}, {"cosmetic-analytics-collector": "сбор аналитики"}, {"cosmetic-telemetry-collector":
              "сбор телеметрии"}], "endpoints": ["GET /api/v1/cosmetic/catalog - каталог
              косметики", "GET /api/v1/cosmetic/catalog/{cosmeticId} - информация
              о косметике", "GET /api/v1/cosmetic/shop - ежедневный магазин", "GET
              /api/v1/cosmetic/shop/rotation - информация о ротации", "POST /api/v1/cosmetic/purchase
              - покупка косметики", "GET /api/v1/cosmetic/{characterId}/cosmetics
              - список косметики персонажа", "GET /api/v1/cosmetic/{characterId}/cosmetics/owned
              - владение косметикой", "GET /api/v1/cosmetic/{characterId}/cosmetics/equipped
              - экипированная косметика", "POST /api/v1/cosmetic/{characterId}/cosmetics/{cosmeticId}/equip
              - экипировка косметики", "POST /api/v1/cosmetic/{characterId}/cosmetics/{cosmeticId}/unequip
              - снятие косметики", "GET /api/v1/cosmetic/{characterId}/cosmetics/{cosmeticId}/preview
              - предпросмотр косметики", "GET /api/v1/cosmetic/rarities - список редкостей",
              "GET /api/v1/cosmetic/{characterId}/cosmetics/stats - статистика косметики"],
              "websocket_channels": ["wss://api.necp.game/v1/cosmetic/{characterId}
              - поток обновлений косметики персонажа"], "events_published": [{"cosmetic.purchased":
              "куплена косметика"}, {"cosmetic.equipped": "экипирована косметика"},
              {"cosmetic.unequipped": "снята косметика"}, {"cosmetic.shop-rotated":
              "обновлен магазин"}, {"cosmetic.rarity-unlocked": "разблокирована редкость"},
              {"cosmetic.stats-updated": "обновлена статистика"}], "events_subscribed":
              [{"character.created": "создан персонаж"}, {"economy.transaction": "транзакция
              в экономике"}, {"inventory.item-added": "добавлен предмет в инвентарь"},
              {"achievement.unlocked": "разблокировано достижение"}]}]}}'
        - column:
            name: metadata
            value: '{"id": "cosmetic-core", "title": "Архитектура системы косметики
              - Основная структура", "document_type": "architecture", "category":
              "systems", "status": "draft", "version": "1.1.0", "last_updated": "2025-11-30T20:50:00+00:00",
              "owners": [{"role": "architect", "contact": "architect@necp.game"}],
              "tags": ["architecture", "monetization", "personalization", "cosmetics"],
              "related_systems": ["cosmetic-service", "inventory-service", "shop-service",
              "economy-service", "analytics-service"], "related_documents": [{"id":
              "backend-cosmetic-system", "relation": "implements"}, {"id": "cosmetic-mechanics",
              "relation": "extends"}, {"id": "cosmetic-data-flows", "relation": "extends"},
              {"id": "cosmetic-database", "relation": "extends"}, {"id": "cosmetic-integrations",
              "relation": "extends"}, {"id": "cosmetic-technical", "relation": "extends"}],
              "github_issue": 315, "visibility": "internal", "audience": ["architect",
              "backend", "monetization", "api-designer"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\cosmetic-core.yaml
