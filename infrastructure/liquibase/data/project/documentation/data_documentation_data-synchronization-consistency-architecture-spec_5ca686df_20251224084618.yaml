databaseChangeLog:
- changeSet:
    id: documentation-data-synchronization-consistency-architecture-spec-5ca686df
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-780167509553650'
        - column:
            name: doc_id
            value: data-synchronization-consistency-architecture-spec
        - column:
            name: title
            value: Техническое задание и диаграммы синхронизации данных
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-30 15:10:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - data-synchronization
            - technical-specification
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value: []
        - column:
            name: related_documents
            value: '[{"id": "data-synchronization-consistency-architecture", "relation":
              "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - database
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "data-synchronization-consistency-architecture-spec",
              "title": "Техническое задание и диаграммы синхронизации данных", "document_type":
              "architecture", "category": "systems", "status": "draft", "version":
              "1.0.0", "last_updated": "2025-11-30T15:10:00+00:00", "owners": [{"role":
              "architect", "contact": "architect@necp.game"}], "tags": ["architecture",
              "data-synchronization", "technical-specification"], "related_documents":
              [{"id": "data-synchronization-consistency-architecture", "relation":
              "extends"}], "github_issue": 1521, "visibility": "internal", "audience":
              ["architect", "backend", "database"]}, "technical_specification": {"subtasks":
              [{"id": "sync-1", "title": "Event Bus Manager", "description": "Реализация
              управления Event Bus (Kafka)", "effort": 8, "files": ["services/sync-service/internal/eventbus/manager.go
              (350 строк)", "services/sync-service/internal/eventbus/publisher.go
              (280 строк)", "services/sync-service/internal/eventbus/subscriber.go
              (320 строк)"]}, {"id": "sync-2", "title": "Outbox Pattern Processor",
              "description": "Реализация Outbox Pattern для гарантированной доставки",
              "effort": 6, "files": ["services/sync-service/internal/outbox/processor.go
              (380 строк)", "services/sync-service/internal/outbox/repository.go (250
              строк)"]}, {"id": "sync-3", "title": "Saga Orchestrator", "description":
              "Реализация Saga Orchestrator для распределенных транзакций", "effort":
              10, "files": ["services/sync-service/internal/saga/orchestrator.go (420
              строк)", "services/sync-service/internal/saga/step.go (280 строк)",
              "services/sync-service/internal/saga/compensation.go (300 строк)"]},
              {"id": "sync-4", "title": "State Synchronization Manager", "description":
              "Реализация синхронизации состояния между сервисами", "effort": 8, "files":
              ["services/sync-service/internal/sync/manager.go (400 строк)", "services/sync-service/internal/sync/strategies.go
              (350 строк)"]}, {"id": "sync-5", "title": "Conflict Resolution Engine",
              "description": "Реализация разрешения конфликтов", "effort": 6, "files":
              ["services/sync-service/internal/conflict/resolver.go (380 строк)",
              "services/sync-service/internal/conflict/strategies.go (320 строк)"]},
              {"id": "sync-6", "title": "Consistency Monitor", "description": "Реализация
              мониторинга консистентности", "effort": 5, "files": ["services/sync-service/internal/consistency/monitor.go
              (350 строк)", "services/sync-service/internal/consistency/validator.go
              (280 строк)"]}, {"id": "sync-7", "title": "API Endpoints", "description":
              "Реализация REST API endpoints", "effort": 4, "files": ["services/sync-service/internal/api/handlers.go
              (450 строк)"]}, {"id": "sync-8", "title": "Database Migrations", "description":
              "Создание миграций БД для синхронизации", "effort": 3, "files": ["infrastructure/liquibase/changelogs/sync-service/V1_0__create_sync_tables.sql
              (200 строк)"]}]}, "diagrams": {"component_diagram": "```mermaid\ngraph
              TB\n  Client[Client] -->|WebSocket| Gateway[Realtime Gateway]\n  Gateway
              -->|gRPC| Gameplay[Gameplay Service]\n  Gameplay -->|Transaction| DB1[(Database)]\n  Gameplay
              -->|Outbox| Outbox[Outbox Table]\n  Outbox -->|Read| Processor[Outbox
              Processor]\n  Processor -->|Publish| EventBus[Event Bus Kafka]\n  EventBus
              -->|Subscribe| Character[Character Service]\n  EventBus -->|Subscribe|
              Inventory[Inventory Service]\n  EventBus -->|Subscribe| Quest[Quest
              Service]\n  Character -->|State| Sync[State Sync Manager]\n  Inventory
              -->|State| Sync\n  Quest -->|State| Sync\n  Sync -->|Sync| Redis[(Redis)]\n  Sync
              -->|WebSocket| Gateway\n  Gateway -->|Update| Client\n```\n", "saga_flow":
              "```mermaid\nsequenceDiagram\n  Client->>Saga Orchestrator: Start Saga\n  Saga
              Orchestrator->>Service A: Execute Step 1\n  Service A-->>Saga Orchestrator:
              Success\n  Saga Orchestrator->>Service B: Execute Step 2\n  Service
              B-->>Saga Orchestrator: Success\n  Saga Orchestrator->>Service C: Execute
              Step 3\n  Service C-->>Saga Orchestrator: Error\n  Saga Orchestrator->>Service
              B: Compensate Step 2\n  Saga Orchestrator->>Service A: Compensate Step
              1\n  Saga Orchestrator-->>Client: Saga Failed\n```\n"}}'
        - column:
            name: metadata
            value: '{"id": "data-synchronization-consistency-architecture-spec", "title":
              "Техническое задание и диаграммы синхронизации данных", "document_type":
              "architecture", "category": "systems", "status": "draft", "version":
              "1.0.0", "last_updated": "2025-11-30T15:10:00+00:00", "owners": [{"role":
              "architect", "contact": "architect@necp.game"}], "tags": ["architecture",
              "data-synchronization", "technical-specification"], "related_documents":
              [{"id": "data-synchronization-consistency-architecture", "relation":
              "extends"}], "github_issue": 1521, "visibility": "internal", "audience":
              ["architect", "backend", "database"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\data-synchronization-consistency-architecture-spec.yaml
