databaseChangeLog:
- changeSet:
    id: documentation-economy-contracts-3e3334b6
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-842022823855910'
        - column:
            name: doc_id
            value: economy-contracts
        - column:
            name: title
            value: Экономика — Контракты и сделки
        - column:
            name: document_type
            value: mechanics
        - column:
            name: category
            value: economy
        - column:
            name: status
            value: approved
        - column:
            name: version
            value: 1.2.0
        - column:
            name: last_updated
            value: 2025-12-06 12:15:00+00:00
        - column:
            name: concept_approved
            value: true
        - column:
            name: concept_reviewed_at
            value: 2025-11-09 03:22:00+00:00
        - column:
            name: owners
            value: '[{"role": "concept_director", "contact": "concept@necp.game"}]'
        - column:
            name: tags
            value:
            - contracts
            - economy
            - escrow
        - column:
            name: topics
            value:
            - player-economy
            - trade
        - column:
            name: related_systems
            value:
            - economy-service
            - inventory-service
            - wallet-service
        - column:
            name: related_documents
            value: '[{"id": "economy-overview", "relation": "references"}, {"id":
              "economy-logistics", "relation": "integrates_with"}, {"id": "economy-analytics",
              "relation": "monitors"}, {"id": "github-issue-217", "title": "GitHub
              Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/217",
              "relation": "processed_by", "processed_at": "2025-11-29T10:45:00+00:00"}]'
        - column:
            name: source
            value: shared/docs/knowledge/mechanics/economy/economy-contracts.md
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - concept
            - economy
            - social
        - column:
            name: risk_level
            value: medium
        - column:
            name: content
            value: '{"metadata": {"id": "economy-contracts", "title": "Экономика —
              Контракты и сделки", "document_type": "mechanics", "category": "economy",
              "status": "approved", "version": "1.2.0", "last_updated": "2025-12-06T12:15:00+00:00",
              "concept_approved": true, "concept_reviewed_at": "2025-11-09T03:22:00+00:00",
              "processed_by": "idea-writer", "processed_at": "2025-11-29T10:45:00+00:00",
              "github_issue_number": 217, "owners": [{"role": "concept_director",
              "contact": "concept@necp.game"}], "tags": ["contracts", "economy", "escrow"],
              "topics": ["player-economy", "trade"], "related_systems": ["economy-service",
              "inventory-service", "wallet-service"], "related_documents": [{"id":
              "economy-overview", "relation": "references"}, {"id": "economy-logistics",
              "relation": "integrates_with"}, {"id": "economy-analytics", "relation":
              "monitors"}, {"id": "github-issue-217", "title": "GitHub Issue", "link":
              "https://github.com/gc-lover/necpgame-monorepo/issues/217", "relation":
              "processed_by", "processed_at": "2025-11-29T10:45:00+00:00"}], "source":
              "shared/docs/knowledge/mechanics/economy/economy-contracts.md", "visibility":
              "internal", "audience": ["concept", "economy", "social"], "risk_level":
              "medium"}, "review": {"chain": [{"role": "concept_director", "reviewer":
              "", "reviewed_at": "2025-11-09T03:22:00+00:00", "status": "approved"}],
              "next_actions": []}, "summary": {"problem": "Игрокам нужен безопасный
              способ заключать сделки с контролем исполнения и арбитражем.", "goal":
              "Описать типы контрактов, работу эскроу, залоги, арбитраж и техническую
              реализацию.", "essence": "Контракты используют эскроу и залоги для обмена
              предметами, услуг и перевозок c подробным audit trail и интеграциями.",
              "key_points": ["Поддержка обменных, доставочных, крафтовых и сервисных
              контрактов.", "Эскроу и залоги гарантируют исполнение и управляются
              через state machine.", "API покрывает переговоры, выполнение, споры
              и мониторинг."]}, "content": {"sections": [{"id": "world_lore", "title":
              {"Мир и лор": "Контракты в Night City"}, "body": "В Night City, где
              каждый контракт — это сделка с дьяволом, система контрактов — это не
              просто безопасные сделки, это выживание. В мире, где корпорации контролируют
              всё, а банды правят улицами, контракты становятся оружием. Каждый контракт,
              каждая сделка, каждый риск — это выбор, который может сделать тебя богатым
              или убить тебя. Это игра в долгую, где каждый контракт становится частью
              сложной паутины экономических отношений, которая определяет судьбу города.\n\n**Эскроу
              и залоги:** В киберпанк-мире доверие — это роскошь, которую мало кто
              может себе позволить. Эскроу блокирует активы обеих сторон до завершения
              сделки, гарантируя исполнение условий. Залог мотивирует выполнение условий
              и частично удерживается при нарушениях. В Night City эскроу — это не
              просто механизм безопасности, это способ выжить в мире, где каждый может
              предать.\n\n**Арбитраж:** В мире, где споры решаются силой, арбитраж
              — это последний бастион справедливости. При нарушении условий запускается
              арбитраж, система собирает доказательства, AI-модератор принимает решение
              и распределяет эскроу. В Night City арбитраж — это не просто разрешение
              споров, это способ защитить свои интересы в мире, где закон — это то,
              что ты можешь себе позволить.\n\n**Типы контрактов:** От обмена предметами
              до доставки, от крафта до сервисных услуг — каждый тип контракта имеет
              свои риски и награды. В Night City контракты — это не просто сделки,
              это способ заработать, способ выжить, способ изменить мир. Каждый контракт
              — это выбор, каждое решение определяет исход.\n\n**Риски и награды:**
              В Night City контракты — это всегда риск. Каждая сделка может привести
              к потере активов, каждый партнёр может предать. Но и награды здесь огромны.
              От простых обменов до сложных крафтовых контрактов — каждый уровень
              открывает новые возможности и новые риски. В киберпанк-мире контракты
              — это не просто экономика, это искусство выживания.\n"}, {"id": "introduction",
              "title": "Введение", "body": "Система контрактов обеспечивает безопасные
              P2P сделки в экономике игры и связывает участников через эскроу и арбитраж.\n",
              "mechanics_links": ["shared/docs/knowledge/mechanics/economy/economy-overview.yaml"],
              "assets": []}, {"id": "contract_types", "title": "Типы контрактов",
              "body": "Поддерживаются обмен предметами, доставка, крафт и сервисные
              услуги. Для каждого типа указаны ключевые условия, оплата, сроки и штрафы.\n",
              "mechanics_links": ["shared/docs/knowledge/mechanics/economy/economy-logistics.yaml"],
              "assets": []}, {"id": "escrow", "title": "Эскроу и залоги", "body":
              "Эскроу блокирует активы обеих сторон до завершения сделки. Залог мотивирует
              выполнение условий и частично удерживается при нарушениях.\n", "mechanics_links":
              ["shared/docs/knowledge/mechanics/economy/economy-investments.yaml"],
              "assets": []}, {"id": "arbitration", "title": "Арбитраж и споры", "body":
              "Арбитраж запускается при нарушении условий. Система собирает доказательства,
              AI-модератор принимает решение и распределяет эскроу.\n", "mechanics_links":
              ["shared/docs/knowledge/mechanics/social/social-mechanics-overview.yaml"],
              "assets": []}, {"id": "data_model", "title": "Структура данных", "body":
              "Таблица `player_contracts` хранит тип контракта, стороны, условия,
              информация об эскроу и статусе. Приведена схема и state machine.\n",
              "mechanics_links": ["shared/docs/knowledge/implementation/backend/trade-system.yaml"],
              "assets": []}, {"id": "lifecycle", "title": "Жизненный цикл контракта",
              "body": "Состояния DRAFT, NEGOTIATION, ESCROW_PENDING, ACTIVE, COMPLETED,
              CANCELLED и DISPUTED описывают переходы и триггеры.\n", "mechanics_links":
              ["shared/docs/knowledge/mechanics/economy/economy-logistics.yaml"],
              "assets": []}, {"id": "api", "title": "API контрактов", "body": "REST
              маршруты дают доступ к созданию, переговорам, внесению эскроу, загрузке
              результатов и открытию споров. Интеграционные события синхронизируют
              инвентарь, кошельки и репутацию.\n", "mechanics_links": ["shared/docs/knowledge/mechanics/economy/economy-analytics.yaml"],
              "assets": []}, {"id": "validation", "title": "Правила, лимиты и безопасность",
              "body": "Определены требования по уровню, KYC, лимитам collateral, ограничению
              параллельных контрактов и проверкам на мошенничество.\n", "mechanics_links":
              ["shared/docs/knowledge/mechanics/economy/economy-investments.yaml"],
              "assets": []}, {"id": "notifications", "title": "Уведомления и UX",
              "body": "Игроки получают уведомления в HUD, push/email и имеют доступ
              к таймлайну контракта с комментариями и оценками.\n", "mechanics_links":
              ["shared/docs/knowledge/mechanics/economy/economy-analytics.yaml"],
              "assets": []}, {"id": "integrations", "title": "Интеграции", "body":
              "Контракты взаимодействуют с inventory-service, wallet-service, reputation-service,
              logistics-service и social-service для полного цикла сделки.\n", "mechanics_links":
              ["shared/docs/knowledge/mechanics/economy/economy-logistics.yaml"],
              "assets": []}]}, "appendix": {"glossary": [], "references": [], "decisions":
              []}, "implementation": {"github_issue": 217, "needs_task": false, "queue_reference":
              ["shared/trackers/queues/concept/queued.yaml#economy-contracts"], "blockers":
              []}, "history": [{"version": "1.2.0", "date": "2025-12-06", "author":
              "idea-writer", "changes": "Добавлен лор и атмосферные описания в стиле
              Cyberpunk 2077, расширены описания контрактной системы с контекстом
              киберпанк-мира."}, {"version": "1.1.0", "date": "2025-11-10", "author":
              "AI Brain Manager", "changes": "Конвертация описания контрактной системы
              в YAML с детализацией API и ограничений."}], "validation": {"checksum":
              "", "schema_version": "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "economy-contracts", "title": "Экономика — Контракты и
              сделки", "document_type": "mechanics", "category": "economy", "status":
              "approved", "version": "1.2.0", "last_updated": "2025-12-06T12:15:00+00:00",
              "concept_approved": true, "concept_reviewed_at": "2025-11-09T03:22:00+00:00",
              "processed_by": "idea-writer", "processed_at": "2025-11-29T10:45:00+00:00",
              "github_issue_number": 217, "owners": [{"role": "concept_director",
              "contact": "concept@necp.game"}], "tags": ["contracts", "economy", "escrow"],
              "topics": ["player-economy", "trade"], "related_systems": ["economy-service",
              "inventory-service", "wallet-service"], "related_documents": [{"id":
              "economy-overview", "relation": "references"}, {"id": "economy-logistics",
              "relation": "integrates_with"}, {"id": "economy-analytics", "relation":
              "monitors"}, {"id": "github-issue-217", "title": "GitHub Issue", "link":
              "https://github.com/gc-lover/necpgame-monorepo/issues/217", "relation":
              "processed_by", "processed_at": "2025-11-29T10:45:00+00:00"}], "source":
              "shared/docs/knowledge/mechanics/economy/economy-contracts.md", "visibility":
              "internal", "audience": ["concept", "economy", "social"], "risk_level":
              "medium"}'
        - column:
            name: source_file
            value: knowledge\mechanics\economy\economy-contracts.yaml
