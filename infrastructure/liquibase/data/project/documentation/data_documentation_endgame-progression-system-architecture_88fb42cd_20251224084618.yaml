databaseChangeLog:
- changeSet:
    id: documentation-endgame-progression-system-architecture-88fb42cd
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '7426673196701972'
        - column:
            name: doc_id
            value: endgame-progression-system-architecture
        - column:
            name: title
            value: Архитектура системы эндгейм-прогрессии (Paragon/Prestige)
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-12-XXT00:00:00Z
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - progression
            - endgame
            - paragon
            - prestige
            - mastery
            - hardcore
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value:
            - progression-service
            - character-service
            - achievement-service
            - leaderboard-service
        - column:
            name: related_documents
            value: '[{"id": "endgame-progression-idea", "relation": "implements"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - progression
            - api-designer
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "endgame-progression-system-architecture",
              "title": "Архитектура системы эндгейм-прогрессии (Paragon/Prestige)",
              "document_type": "architecture", "category": "systems", "status": "draft",
              "version": "1.0.0", "last_updated": "2025-12-XXT00:00:00Z", "owners":
              [{"role": "architect", "contact": "architect@necp.game"}], "tags": ["architecture",
              "progression", "endgame", "paragon", "prestige", "mastery", "hardcore"],
              "related_systems": ["progression-service", "character-service", "achievement-service",
              "leaderboard-service"], "related_documents": [{"id": "endgame-progression-idea",
              "relation": "implements"}], "github_issue": 1497, "visibility": "internal",
              "audience": ["architect", "backend", "progression", "api-designer"]},
              "summary": {"problem": "После достижения максимального уровня (50) игроки
              теряют мотивацию к прогрессии.\nНе хватает системы бесконечной прогрессии,
              которая бы мотивировала игроков продолжать играть.\n", "goal": "Создать
              архитектуру эндгейм-прогрессии, которая:\n- Предоставляет бесконечную
              прогрессию после уровня 50\n- Добавляет специализацию по типам контента\n-
              Награждает игроков за долгосрочную игру\n- Интегрируется с существующими
              системами прогрессии\n", "essence": "Система эндгейм-прогрессии объединяет
              три подсистемы: Paragon Levels (бесконечные уровни),\nPrestige System
              (сброс прогресса за бонусы) и Mastery System (специализация по контенту).\n"},
              "architecture": {"overview": "Система эндгейм-прогрессии состоит из
              следующих компонентов:\n1. Paragon Level Manager - управление Paragon
              Levels\n2. Prestige Manager - управление Prestige System\n3. Mastery
              Manager - управление Mastery System\n4. Progression Calculator - расчёт
              прогрессии и наград\n5. Bonus Applicator - применение бонусов престижа\n",
              "microservices": [{"name": "progression-service", "port": 8084, "responsibility":
              "Обработка эндгейм-прогрессии:\n- Управление Paragon Levels\n- Управление
              Prestige System\n- Управление Mastery System\n- Начисление опыта и наград\n",
              "components": [{"paragon-level-manager": "управление Paragon Levels"},
              {"prestige-manager": "управление Prestige System"}, {"mastery-manager":
              "управление Mastery System"}, {"progression-calculator": "расчёт прогрессии"},
              {"bonus-applicator": "применение бонусов"}], "endpoints": ["GET /api/v1/progression/paragon/levels
              - получение Paragon Levels", "POST /api/v1/progression/paragon/distribute
              - распределение очков", "GET /api/v1/progression/paragon/stats - статистика
              Paragon", "GET /api/v1/progression/prestige/info - информация о престиже",
              "POST /api/v1/progression/prestige/reset - сброс престижа", "GET /api/v1/progression/prestige/bonuses
              - бонусы престижа", "GET /api/v1/progression/mastery/levels - уровни
              мастерства", "GET /api/v1/progression/mastery/{type}/progress - прогресс
              мастерства", "GET /api/v1/progression/mastery/rewards - награды мастерства"],
              "websocket_channels": ["wss://api.necp.game/v1/progression/paragon -
              события Paragon", "wss://api.necp.game/v1/progression/prestige - события
              Prestige", "wss://api.necp.game/v1/progression/mastery - события Mastery"],
              "events_published": [{"progression.paragon.leveled": "повышение Paragon
              Level"}, {"progression.paragon.points.distributed": "распределение очков"},
              {"progression.prestige.reset": "сброс престижа"}, {"progression.prestige.bonus.applied":
              "применение бонуса"}, {"progression.mastery.leveled": "повышение уровня
              мастерства"}, {"progression.mastery.reward.unlocked": "разблокировка
              награды"}]}], "data_flows": {"paragon_progression_flow": "1. Игрок получает
              опыт после уровня 50\n2. Paragon Level Manager проверяет накопленный
              опыт\n3. При достижении порога Paragon Level Manager повышает Paragon
              Level\n4. Paragon Level Manager начисляет Paragon Points\n5. Progression
              Service публикует событие progression.paragon.leveled\n6. Realtime Gateway
              отправляет уведомление игроку\n7. Character Service обновляет характеристики\n",
              "prestige_reset_flow": "1. Игрок запрашивает сброс престижа\n2. Prestige
              Manager проверяет требования для престижа\n3. Prestige Manager сбрасывает
              уровень до 1\n4. Prestige Manager сбрасывает Paragon Levels\n5. Prestige
              Manager сбрасывает часть Mastery\n6. Prestige Manager увеличивает Prestige
              Level\n7. Bonus Applicator применяет бонусы престижа\n8. Progression
              Service публикует событие progression.prestige.reset\n9. Character Service
              обновляет характеристики с бонусами\n", "mastery_progression_flow":
              "1. Игрок завершает контент определенного типа\n2. Mastery Manager начисляет
              опыт мастерства\n3. При достижении порога Mastery Manager повышает уровень
              мастерства\n4. Mastery Manager проверяет награды за уровень\n5. Progression
              Service публикует событие progression.mastery.leveled\n6. Realtime Gateway
              отправляет уведомление игроку\n"}, "database_structure": {"tables":
              [{"name": "paragon_levels", "description": "Paragon Levels игроков",
              "columns": [{"id": "UUID PRIMARY KEY"}, {"character_id": "UUID FOREIGN
              KEY"}, {"paragon_level": "INTEGER"}, {"paragon_points_total": "INTEGER"},
              {"paragon_points_spent": "INTEGER"}, {"experience_current": "BIGINT"},
              {"experience_required": "BIGINT"}, {"updated_at": "TIMESTAMP"}]}, {"name":
              "paragon_allocations", "description": "Распределение Paragon Points",
              "columns": [{"id": "UUID PRIMARY KEY"}, {"character_id": "UUID FOREIGN
              KEY"}, {"stat_type": "VARCHAR(50)"}, {"points_allocated": "INTEGER"},
              {"updated_at": "TIMESTAMP"}]}, {"name": "prestige_levels", "description":
              "Prestige Levels игроков", "columns": [{"id": "UUID PRIMARY KEY"}, {"character_id":
              "UUID FOREIGN KEY"}, {"prestige_level": "INTEGER"}, {"bonuses_applied":
              "JSONB"}, {"reset_count": "INTEGER"}, {"last_reset_at": "TIMESTAMP"},
              {"updated_at": "TIMESTAMP"}]}, {"name": "mastery_levels", "description":
              "Mastery Levels игроков", "columns": [{"id": "UUID PRIMARY KEY"}, {"character_id":
              "UUID FOREIGN KEY"}, {"mastery_type": "VARCHAR(50)"}, {"mastery_level":
              "INTEGER"}, {"experience_current": "BIGINT"}, {"experience_required":
              "BIGINT"}, {"updated_at": "TIMESTAMP"}]}]}, "integrations": {"character_service":
              "- Хранение прогрессии\n- Применение бонусов\n- Синхронизация характеристик\n",
              "achievement_service": "- Отслеживание достижений\n- Выдача титулов\n-
              Уведомления о достижениях\n", "leaderboard_service": "- Рейтинги по
              Paragon Levels\n- Рейтинги по Prestige\n- Рейтинги по Mastery\n"}, "technical_tasks":
              {"phases": {"phase_1": {"name": "Paragon Level Manager", "tasks": ["Реализация
              Paragon Level Manager", "Управление Paragon Levels", "Начисление Paragon
              Points", "Распределение очков", "Интеграция с Character Service"], "estimated_effort":
              "4 days"}, "phase_2": {"name": "Prestige Manager", "tasks": ["Реализация
              Prestige Manager", "Управление Prestige System", "Сброс прогресса",
              "Применение бонусов", "Интеграция с Character Service"], "estimated_effort":
              "4 days"}, "phase_3": {"name": "Mastery Manager", "tasks": ["Реализация
              Mastery Manager", "Управление Mastery System", "Начисление опыта мастерства",
              "Награды мастерства", "Интеграция с Gameplay Service"], "estimated_effort":
              "4 days"}}}}}'
        - column:
            name: metadata
            value: '{"id": "endgame-progression-system-architecture", "title": "Архитектура
              системы эндгейм-прогрессии (Paragon/Prestige)", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.0.0", "last_updated":
              "2025-12-XXT00:00:00Z", "owners": [{"role": "architect", "contact":
              "architect@necp.game"}], "tags": ["architecture", "progression", "endgame",
              "paragon", "prestige", "mastery", "hardcore"], "related_systems": ["progression-service",
              "character-service", "achievement-service", "leaderboard-service"],
              "related_documents": [{"id": "endgame-progression-idea", "relation":
              "implements"}], "github_issue": 1497, "visibility": "internal", "audience":
              ["architect", "backend", "progression", "api-designer"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\endgame-progression-system-architecture.yaml
