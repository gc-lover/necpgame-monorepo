databaseChangeLog:
- changeSet:
    id: documentation-enhanced-content-versions-system-architecture-6f333d13
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-468806485109380'
        - column:
            name: doc_id
            value: enhanced-content-versions-system-architecture
        - column:
            name: title
            value: Архитектура системы усиленных версий контента
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-12-XXT00:00:00Z
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - gameplay
            - enhanced-content
            - elite
            - champion
            - mythic-plus
            - hardcore
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value:
            - gameplay-service
            - world-service
            - progression-service
        - column:
            name: related_documents
            value: '[{"id": "enhanced-content-idea", "relation": "implements"}, {"id":
              "combat-ai-enemies-architecture", "relation": "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - gameplay
            - api-designer
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "enhanced-content-versions-system-architecture",
              "title": "Архитектура системы усиленных версий контента", "document_type":
              "architecture", "category": "systems", "status": "draft", "version":
              "1.0.0", "last_updated": "2025-12-XXT00:00:00Z", "owners": [{"role":
              "architect", "contact": "architect@necp.game"}], "tags": ["architecture",
              "gameplay", "enhanced-content", "elite", "champion", "mythic-plus",
              "hardcore"], "related_systems": ["gameplay-service", "world-service",
              "progression-service"], "related_documents": [{"id": "enhanced-content-idea",
              "relation": "implements"}, {"id": "combat-ai-enemies-architecture",
              "relation": "extends"}], "github_issue": 1504, "visibility": "internal",
              "audience": ["architect", "backend", "gameplay", "api-designer"]}, "summary":
              {"problem": "Существующий контент становится предсказуемым после многократного
              прохождения.\nНе хватает усиленных версий контента, которые бы предоставляли
              новые вызовы.\n", "goal": "Создать архитектуру усиленных версий контента,
              которая:\n- Предоставляет усиленные версии существующего контента\n-
              Добавляет новые механики и вызовы\n- Масштабирует сложность динамически\n-
              Награждает игроков за прохождение\n", "essence": "Система усиленных
              версий контента предоставляет три типа усилений: Elite World Bosses,\nChampion
              Raids и Mythic+ Dungeons. Каждый тип имеет уникальные механики и награды.\n"},
              "architecture": {"overview": "Система усиленных версий контента состоит
              из следующих компонентов:\n1. Enhanced Content Manager - управление
              усиленными версиями\n2. Elite Boss Spawner - управление появлением Elite
              боссов\n3. Champion Raid Manager - управление Champion рейдами\n4. MythicPlus
              Scaler - масштабирование Mythic+ подземелий\n5. Enhanced Reward Calculator
              - расчёт наград для усиленного контента\n", "microservices": [{"name":
              "gameplay-service", "port": 8083, "responsibility": "Обработка усиленного
              контента:\n- Управление усиленными версиями\n- Применение модификаторов\n-
              Отслеживание прогресса\n", "components": [{"enhanced-content-manager":
              "управление усиленными версиями"}, {"elite-boss-spawner": "управление
              Elite боссами"}, {"champion-raid-manager": "управление Champion рейдами"},
              {"mythicplus-scaler": "масштабирование Mythic+"}, {"enhanced-reward-calculator":
              "расчёт наград"}], "endpoints": ["GET /api/v1/gameplay/enhanced/elite-bosses/active
              - активные Elite боссы", "GET /api/v1/gameplay/enhanced/champion-raids/available
              - доступные Champion рейды", "GET /api/v1/gameplay/enhanced/mythicplus/{dungeonId}/levels
              - уровни Mythic+", "POST /api/v1/gameplay/enhanced/mythicplus/{dungeonId}/start
              - начало Mythic+"], "websocket_channels": ["wss://api.necp.game/v1/gameplay/enhanced/elite-bosses
              - события Elite боссов"], "events_published": [{"gameplay.enhanced.elite-boss.spawned":
              "появление Elite босса"}, {"gameplay.enhanced.champion-raid.completed":
              "завершение Champion рейда"}, {"gameplay.enhanced.mythicplus.completed":
              "завершение Mythic+"}]}], "data_flows": {"elite_boss_spawn_flow": "1.
              Elite Boss Spawner проверяет условия появления\n2. Elite Boss Spawner
              создает Elite версию босса\n3. Enhanced Content Manager применяет усиления
              (+200% HP, +100% урон)\n4. Enhanced Content Manager добавляет новые
              механики\n5. World Service публикует событие gameplay.enhanced.elite-boss.spawned\n6.
              Realtime Gateway отправляет уведомление игрокам\n", "mythicplus_scaling_flow":
              "1. Игрок выбирает уровень Mythic+\n2. MythicPlus Scaler рассчитывает
              модификаторы для уровня\n3. MythicPlus Scaler применяет модификаторы
              (+8% HP, +5% урон за уровень)\n4. Enhanced Content Manager активирует
              усиленные механики\n5. Gameplay Service запускает подземелье с модификаторами\n"},
              "database_structure": {"tables": [{"name": "enhanced_content_versions",
              "description": "Усиленные версии контента", "columns": [{"id": "UUID
              PRIMARY KEY"}, {"content_id": "UUID FOREIGN KEY"}, {"version_type":
              "ENUM (elite, champion, mythicplus)"}, {"hp_modifier": "DECIMAL(5,2)"},
              {"damage_modifier": "DECIMAL(5,2)"}, {"mechanics": "JSONB"}, {"rewards":
              "JSONB"}, {"created_at": "TIMESTAMP"}]}, {"name": "elite_boss_spawns",
              "description": "Появления Elite боссов", "columns": [{"id": "UUID PRIMARY
              KEY"}, {"boss_id": "UUID FOREIGN KEY"}, {"spawn_time": "TIMESTAMP"},
              {"despawn_time": "TIMESTAMP"}, {"defeated": "BOOLEAN"}, {"defeated_by":
              "UUID FOREIGN KEY (nullable)"}]}, {"name": "mythicplus_sessions", "description":
              "Сессии Mythic+ подземелий", "columns": [{"id": "UUID PRIMARY KEY"},
              {"dungeon_id": "UUID FOREIGN KEY"}, {"mythicplus_level": "INTEGER"},
              {"completion_time": "INTEGER (nullable)"}, {"success": "BOOLEAN"}, {"started_at":
              "TIMESTAMP"}, {"completed_at": "TIMESTAMP (nullable)"}]}]}, "integrations":
              {"world_service": "- Управление появлением Elite боссов\n- Интеграция
              с событиями мира\n", "progression_service": "- Начисление наград\n-
              Обновление прогресса\n"}, "technical_tasks": {"phases": {"phase_1":
              {"name": "Enhanced Content Manager и Elite Boss Spawner", "tasks": ["Реализация
              Enhanced Content Manager", "Реализация Elite Boss Spawner", "Управление
              усиленными версиями", "Появление Elite боссов", "Интеграция с World
              Service"], "estimated_effort": "4 days"}, "phase_2": {"name": "Champion
              Raid Manager и MythicPlus Scaler", "tasks": ["Реализация Champion Raid
              Manager", "Реализация MythicPlus Scaler", "Управление Champion рейдами",
              "Масштабирование Mythic+", "Интеграция с Combat Service"], "estimated_effort":
              "4 days"}}}}}'
        - column:
            name: metadata
            value: '{"id": "enhanced-content-versions-system-architecture", "title":
              "Архитектура системы усиленных версий контента", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.0.0", "last_updated":
              "2025-12-XXT00:00:00Z", "owners": [{"role": "architect", "contact":
              "architect@necp.game"}], "tags": ["architecture", "gameplay", "enhanced-content",
              "elite", "champion", "mythic-plus", "hardcore"], "related_systems":
              ["gameplay-service", "world-service", "progression-service"], "related_documents":
              [{"id": "enhanced-content-idea", "relation": "implements"}, {"id": "combat-ai-enemies-architecture",
              "relation": "extends"}], "github_issue": 1504, "visibility": "internal",
              "audience": ["architect", "backend", "gameplay", "api-designer"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\enhanced-content-versions-system-architecture.yaml
