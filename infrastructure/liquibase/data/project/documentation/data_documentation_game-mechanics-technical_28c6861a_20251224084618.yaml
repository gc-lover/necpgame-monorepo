databaseChangeLog:
- changeSet:
    id: documentation-game-mechanics-technical-28c6861a
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '7444522503018649'
        - column:
            name: doc_id
            value: game-mechanics-technical
        - column:
            name: title
            value: Архитектура систем игровых механик - Технические задачи и диаграммы
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-23 13:00:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - mechanics
            - technical
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value: []
        - column:
            name: related_documents
            value: '[{"id": "game-mechanics-core", "relation": "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - gameplay
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "game-mechanics-technical", "title": "Архитектура
              систем игровых механик - Технические задачи и диаграммы", "document_type":
              "architecture", "category": "systems", "status": "draft", "version":
              "1.0.0", "last_updated": "2025-11-23T13:00:00+00:00", "owners": [{"role":
              "architect", "contact": "architect@necp.game"}], "tags": ["architecture",
              "mechanics", "technical"], "related_documents": [{"id": "game-mechanics-core",
              "relation": "extends"}], "github_issue": 104, "visibility": "internal",
              "audience": ["architect", "backend", "gameplay"]}, "architecture": {"technical_specification":
              {"subtasks": [{"id": "gameplay-service-core", "title": "Реализация основного
              функционала gameplay-service", "description": "Реализация базовой инфраструктуры
              gameplay-service с поддержкой боевых механик,\nспособностей, имплантов
              и интеграции с другими сервисами.\n", "dependencies": [], "estimated_effort":
              "7 days"}, {"id": "combat-engine", "title": "Реализация боевого движка",
              "description": "Реализация Combat Engine с обработкой атак, способностей,
              стелса, паркура\nи интеграцией с progression-service.\n", "dependencies":
              ["gameplay-service-core"], "estimated_effort": "5 days"}, {"id": "economy-service-core",
              "title": "Реализация основного функционала economy-service", "description":
              "Реализация базовой инфраструктуры economy-service с поддержкой торговли,\nкрафта,
              инвентаря и валют.\n", "dependencies": [], "estimated_effort": "7 days"},
              {"id": "trading-system", "title": "Реализация системы торговли", "description":
              "Реализация Trading Engine с поддержкой рынка, аукционов, биржи\nи интеграцией
              с inventory-manager.\n", "dependencies": ["economy-service-core"], "estimated_effort":
              "5 days"}, {"id": "crafting-system", "title": "Реализация системы крафта",
              "description": "Реализация Crafting System с поддержкой рецептов, производственных
              цепочек\nи интеграцией с progression-service для проверки навыков.\n",
              "dependencies": ["economy-service-core"], "estimated_effort": "4 days"},
              {"id": "social-service-core", "title": "Реализация основного функционала
              social-service", "description": "Реализация базовой инфраструктуры social-service
              с поддержкой отношений,\nнайма NPC, заказов и гильдий.\n", "dependencies":
              [], "estimated_effort": "6 days"}, {"id": "npc-systems", "title": "Реализация
              систем работы с NPC", "description": "Реализация Relationship Manager,
              NPC Hiring System и Player Orders System\nс интеграцией с economy-service
              и progression-service.\n", "dependencies": ["social-service-core"],
              "estimated_effort": "5 days"}, {"id": "world-service-core", "title":
              "Реализация основного функционала world-service", "description": "Реализация
              базовой инфраструктуры world-service с поддержкой событий,\nрейдов,
              боссов и синхронизации состояния мира.\n", "dependencies": [], "estimated_effort":
              "6 days"}, {"id": "progression-service-core", "title": "Реализация основного
              функционала progression-service", "description": "Реализация базовой
              инфраструктуры progression-service с поддержкой атрибутов,\nнавыков,
              перков и классов.\n", "dependencies": [], "estimated_effort": "5 days"},
              {"id": "database-schema", "title": "Создание схемы БД для механик",
              "description": "Создание таблиц БД для всех систем механик с миграциями
              Liquibase.\n", "dependencies": [], "estimated_effort": "3 days"}]}},
              "diagrams": {"component_diagram": "```mermaid\ngraph TB\n    Client[UE5
              Client] --> Gateway[API Gateway]\n\n    Gateway --> GameplayService[Gameplay
              Service]\n    Gateway --> EconomyService[Economy Service]\n    Gateway
              --> SocialService[Social Service]\n    Gateway --> WorldService[World
              Service]\n    Gateway --> ProgressionService[Progression Service]\n\n    GameplayService
              --> CombatEngine[Combat Engine]\n    GameplayService --> AbilitySystem[Ability
              System]\n    GameplayService --> ImplantManager[Implant Manager]\n    GameplayService
              --> StealthSystem[Stealth System]\n    GameplayService --> FreerunSystem[Freerun
              System]\n\n    EconomyService --> TradingEngine[Trading Engine]\n    EconomyService
              --> CraftingSystem[Crafting System]\n    EconomyService --> InventoryManager[Inventory
              Manager]\n    EconomyService --> MarketManager[Market Manager]\n    EconomyService
              --> AuctionHouse[Auction House]\n\n    SocialService --> RelationshipManager[Relationship
              Manager]\n    SocialService --> NPCHiringSystem[NPC Hiring System]\n    SocialService
              --> PlayerOrdersSystem[Player Orders System]\n    SocialService -->
              MentorshipSystem[Mentorship System]\n    SocialService --> GuildManager[Guild
              Manager]\n\n    WorldService --> EventManager[Event Manager]\n    WorldService
              --> RaidManager[Raid Manager]\n    WorldService --> BossManager[Boss
              Manager]\n    WorldService --> TerritoryManager[Territory Manager]\n\n    ProgressionService
              --> AttributeManager[Attribute Manager]\n    ProgressionService -->
              SkillManager[Skill Manager]\n    ProgressionService --> PerkManager[Perk
              Manager]\n    ProgressionService --> ClassManager[Class Manager]\n\n    GameplayService
              --> ProgressionService\n    EconomyService --> ProgressionService\n    SocialService
              --> EconomyService\n    WorldService --> EconomyService\n    WorldService
              --> GameplayService\n\n    GameplayService --> CharacterService[Character
              Service]\n    EconomyService --> CharacterService\n    SocialService
              --> CharacterService\n    WorldService --> CharacterService\n    ProgressionService
              --> CharacterService\n\n    GameplayService --> EventBus[Event Bus]\n    EconomyService
              --> EventBus\n    SocialService --> EventBus\n    WorldService --> EventBus\n    ProgressionService
              --> EventBus\n\n    EventBus --> RealtimeGateway[Realtime Gateway]\n\n    GameplayService
              --> DB1[(Gameplay DB)]\n    EconomyService --> DB2[(Economy DB)]\n    SocialService
              --> DB3[(Social DB)]\n    WorldService --> DB4[(World DB)]\n    ProgressionService
              --> DB5[(Progression DB)]\n```\n", "mechanics_interaction_diagram":
              "```mermaid\nsequenceDiagram\n    participant C as Client\n    participant
              GS as Gameplay Service\n    participant ES as Economy Service\n    participant
              SS as Social Service\n    participant PS as Progression Service\n    participant
              EB as Event Bus\n\n    C->>GS: POST /combat/attack\n    GS->>GS: Process
              combat action\n    GS->>EB: Publish combat:action-executed\n    GS-->>C:
              Combat result\n\n    EB->>PS: combat:action-executed\n    PS->>PS: Calculate
              XP\n    PS->>PS: Update skills\n    PS->>EB: Publish progression:skill-leveled\n\n    EB->>ES:
              combat:enemy-killed\n    ES->>ES: Generate loot\n    ES->>ES: Add to
              inventory\n    ES->>EB: Publish economy:loot-generated\n\n    EB->>SS:
              combat:action-executed\n    SS->>SS: Update reputation (if applicable)\n\n    Note
              over C,EB: Player crafts item\n\n    C->>ES: POST /crafting/craft\n    ES->>PS:
              Check skills\n    PS-->>ES: Skills data\n    ES->>ES: Calculate success
              chance\n    ES->>ES: Consume resources\n    ES->>ES: Generate item\n    ES->>EB:
              Publish economy:item-crafted\n    ES-->>C: Craft result\n\n    EB->>PS:
              economy:item-crafted\n    PS->>PS: Update crafting XP\n```\n"}}'
        - column:
            name: metadata
            value: '{"id": "game-mechanics-technical", "title": "Архитектура систем
              игровых механик - Технические задачи и диаграммы", "document_type":
              "architecture", "category": "systems", "status": "draft", "version":
              "1.0.0", "last_updated": "2025-11-23T13:00:00+00:00", "owners": [{"role":
              "architect", "contact": "architect@necp.game"}], "tags": ["architecture",
              "mechanics", "technical"], "related_documents": [{"id": "game-mechanics-core",
              "relation": "extends"}], "github_issue": 104, "visibility": "internal",
              "audience": ["architect", "backend", "gameplay"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\game-mechanics-technical.yaml
