databaseChangeLog:
- changeSet:
    id: documentation-league-system-architecture-part1-6f3d12d6
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-844927122155824'
        - column:
            name: doc_id
            value: league-system-architecture
        - column:
            name: title
            value: Архитектура системы лиг
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-23 15:00:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - meta
            - seasons
            - progression
            - reset
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value:
            - league-service
            - progression-service
            - matchmaking-service
            - world-service
            - economy-service
            - character-service
            - analytics-service
        - column:
            name: related_documents
            value: '[{"id": "league-system-mechanics", "relation": "implements"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - game-design
            - api-designer
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "league-system-architecture", "title": "Архитектура
              системы лиг", "document_type": "architecture", "category": "systems",
              "status": "draft", "version": "1.0.0", "last_updated": "2025-11-23T15:00:00+00:00",
              "owners": [{"role": "architect", "contact": "architect@necp.game"}],
              "tags": ["architecture", "meta", "seasons", "progression", "reset"],
              "related_systems": ["league-service", "progression-service", "matchmaking-service",
              "world-service", "economy-service", "character-service", "analytics-service"],
              "related_documents": [{"id": "league-system-mechanics", "relation":
              "implements"}], "github_issue": 83, "visibility": "internal", "audience":
              ["architect", "backend", "game-design", "api-designer"]}, "summary":
              {"problem": "Требуется спроектировать архитектуру сезонной системы лиг,
              которая обеспечивает:\n- Циклические сезоны с глобальным сбросом (3-6
              месяцев)\n- Мета-прогресс между сезонами (титулы, косметика, Legacy
              Items)\n- Интеграцию с matchmaking и progression системами\n- Динамическую
              вариативность миров и событий\n- Hall of Fame и рейтинговую систему\n",
              "goal": "Создать архитектурную схему системы лиг с определением:\n-
              Микросервисов для управления лигами\n- Компонентов для сезонов, сброса,
              мета-прогресса\n- API endpoints (высокоуровнево)\n- Интеграций с другими
              системами\n- Структуры БД для лиг, мета-прогресса и статистики\n- Технического
              задания для реализации\n"}, "architecture": {"overview": "Система лиг
              состоит из следующих компонентов:\n1. League Manager - управление текущей
              лигой и переходами между сезонами\n2. Season Controller - контроль фаз
              сезона (Start, Rise, Crisis, Endgame, Finale)\n3. Global Reset Engine
              - выполнение глобального сброса персонажей и экономики\n4. Meta Progression
              Manager - управление мета-прогрессом (титулы, косметика, Legacy Items)\n5.
              Hall of Fame Manager - управление Hall of Fame и рейтингами\n6. League
              Statistics Collector - сбор и анализ статистики лиг\n7. Legacy Shop
              Manager - управление Legacy Shop и наградами\n8. Time Acceleration Controller
              - управление ускорением игрового времени\n", "microservices": [{"name":
              "league-service", "port": 8093, "responsibility": "Основной сервис для
              управления лигами:\n- Управление текущей лигой и её фазами\n- Контроль
              времени и ускорения\n- Координация глобального сброса\n- Управление
              мета-прогрессом\n- Hall of Fame и рейтинги\n", "components": ["League
              Manager", "Season Controller", "Global Reset Engine", "Meta Progression
              Manager", "Hall of Fame Manager", "League Statistics Collector", "Legacy
              Shop Manager", "Time Acceleration Controller"], "endpoints": ["GET /api/v1/league/current
              - текущая лига", "GET /api/v1/league/{leagueId}/statistics - статистика
              лиги", "GET /api/v1/league/countdown - таймер до конца лиги", "POST
              /api/v1/league/end-event/register - регистрация на финал", "GET /api/v1/player/legacy-progress
              - мета-прогресс игрока", "GET /api/v1/league/hall-of-fame - Hall of
              Fame", "GET /api/v1/league/phases - текущая фаза лиги", "POST /api/v1/league/reset/trigger
              - триггер сброса (admin)"]}, {"name": "progression-service", "port":
              8082, "responsibility": "Интеграция с мета-прогрессом:\n- Управление
              титулами и достижениями\n- Косметика и разблокировки\n- Legacy Items
              и их эффекты\n- Глобальный рейтинг (MMR/ELO)\n", "components": ["Title
              Manager", "Cosmetic Unlock Manager", "Legacy Items Manager", "Global
              Rating Manager"], "endpoints": ["GET /api/v1/progression/titles - список
              титулов", "GET /api/v1/progression/cosmetics - разблокированная косметика",
              "GET /api/v1/progression/legacy-items - Legacy Items", "GET /api/v1/progression/rating
              - глобальный рейтинг"]}, {"name": "matchmaking-service", "port": 8081,
              "responsibility": "Интеграция с матчмейкингом:\n- Использование глобального
              рейтинга для матчмейкинга\n- Учет текущей фазы лиги\n- Сезонные рейтинги\n",
              "components": ["League Rating Adapter", "Season Phase Adapter"], "endpoints":
              ["GET /api/v1/matchmaking/league-rating - рейтинг для матчмейкинга"]}],
              "components": [{"name": "League Manager", "location": "league-service",
              "responsibility": "Управление жизненным циклом лиг:\n- Создание новой
              лиги\n- Управление текущей лигой\n- Переходы между фазами\n- Завершение
              лиги и подготовка к сбросу\n- Хранение конфигурации лиги (seed, вариации)\n",
              "dependencies": ["Database", "Event Bus", "Season Controller"]}, {"name":
              "Season Controller", "location": "league-service", "responsibility":
              "Контроль фаз сезона:\n- Start (месяц 1): создание персонажей, выбор
              фракций\n- Rise (месяцы 2-3): корпоративные войны\n- Crisis (месяцы
              4-5): поздние конфликты\n- Endgame (последние 2 недели): кульминация\n-
              Finale (27 июля 2093): глобальный сброс\n- Управление ускорением времени
              (15-30 игровых дней за реальный день)\n", "dependencies": ["League Manager",
              "Time Acceleration Controller", "Event Bus"]}, {"name": "Global Reset
              Engine", "location": "league-service", "responsibility": "Выполнение
              глобального сброса:\n- Удаление персонажей текущей лиги\n- Очистка прогресса
              квестов\n- Сброс экономики\n- Распад гильдий (с возможностью восстановления)\n-
              Сохранение мета-прогресса\n- Выдача итоговых наград\n", "dependencies":
              ["Character Service", "Economy Service", "Social Service", "Quest Service",
              "Meta Progression Manager", "Event Bus"]}, {"name": "Meta Progression
              Manager", "location": "league-service", "responsibility": "Управление
              мета-прогрессом:\n- Сохранение достижений и титулов\n- Косметика и разблокировки\n-
              Legacy Items (мощные предметы старта новой лиги)\n- Глобальный рейтинг
              с мягким сбросом (20%)\n- Legacy Points и их использование\n", "dependencies":
              ["Progression Service", "Database", "Event Bus"]}, {"name": "Hall of
              Fame Manager", "location": "league-service", "responsibility": "Управление
              Hall of Fame:\n- Фиксация лучших игроков каждой лиги\n- Категории: первые
              прохождения, экономика, PvP, альтернативные режимы\n- Статуя победителя
              лиги (3D-модель)\n- Вечное отображение имен\n- Уникальная косметика
              для победителей\n", "dependencies": ["League Statistics Collector",
              "Database", "Event Bus"]}, {"name": "League Statistics Collector", "location":
              "league-service", "responsibility": "Сбор и анализ статистики:\n- Статистика
              по фазам лиги\n- Экономические метрики\n- PvP метрики\n- Квестовые метрики\n-
              Интеграция с Analytics Service\n", "dependencies": ["Analytics Service",
              "Database", "Event Bus"]}, {"name": "Legacy Shop Manager", "location":
              "league-service", "responsibility": "Управление Legacy Shop:\n- Legacy
              Points за участие\n- Покупка Legacy Items\n- Косметические награды\n-
              Ограничения на использование Legacy Items\n", "dependencies": ["Meta
              Progression Manager", "Economy Service", "Database"]}, {"name": "Time
              Acceleration Controller", "location": "league-service", "responsibility":
              "Управление ускорением времени:\n- Масштабирование времени (15-30 игровых
              дней за реальный день)\n- Учет сценарных событий (замедление для драматургии)\n-
              Синхронизация с World Service\n- Расчет текущей игровой даты\n", "dependencies":
              ["World Service", "Season Controller", "Event Bus"]}], "integrations":
              [{"service": "world-service", "purpose": "Синхронизация игрового времени
              и мировых событий:\n- Получение текущей игровой даты\n- Триггеры мировых
              событий по фазам лиги\n- Влияние решений игроков на мир\n", "events":
              ["league:phase-changed", "league:time-acceleration-updated", "world:league-event-triggered"]},
              {"service": "character-service", "purpose": "Управление персонажами
              в контексте лиг:\n- Создание персонажей в новой лиге\n- Удаление персонажей
              при сбросе\n- Сохранение мета-данных\n", "events": ["league:reset-started",
              "league:reset-completed", "character:league-created", "character:league-deleted"]},
              {"service": "economy-service", "purpose": "Сброс экономики и Legacy
              Items:\n- Очистка экономики при сбросе\n- Выдача Legacy Items в новой
              лиге\n- Экономические метрики для статистики\n", "events": ["league:reset-economy",
              "league:legacy-items-distributed", "economy:league-statistics"]}, {"service":
              "social-service", "purpose": "Управление гильдиями и социальными связями:\n-
              Распад гильдий при сбросе\n- Восстановление составов в новой лиге\n-
              Сохранение социальных связей\n", "events": ["league:guilds-disbanded",
              "league:guilds-restored", "social:league-statistics"]}, {"service":
              "quest-service", "purpose": "Сброс прогресса квестов:\n- Очистка прогресса
              квестов\n- Сохранение завершенных квестов для мета-прогресса\n- Триггеры
              квестов по фазам лиги\n", "events": ["league:quests-reset", "quest:league-phase-triggered",
              "quest:league-completion-tracked"]}, {"service": "matchmaking-service",
              "purpose": "Использование глобального рейтинга:\n- Получение глобального
              рейтинга для матчмейкинга\n- Учет текущей фазы лиги\n- Сезонные рейтинги\n",
              "events": ["league:rating-updated", "matchmaking:league-rating-requested"]},
              {"service": "analytics-service", "purpose": "Телеметрия и аналитика:\n-
              События лиги (contract_viewed, league_phase_transition, hall_of_fame_update)\n-
              Статистика по фазам\n- Аналитические панели\n", "events": ["league:telemetry-event",
              "analytics:league-statistics-requested"]}], "data_models": [{"name":
              "League"}]}}'
        - column:
            name: metadata
            value: '{"id": "league-system-architecture", "title": "Архитектура системы
              лиг", "document_type": "architecture", "category": "systems", "status":
              "draft", "version": "1.0.0", "last_updated": "2025-11-23T15:00:00+00:00",
              "owners": [{"role": "architect", "contact": "architect@necp.game"}],
              "tags": ["architecture", "meta", "seasons", "progression", "reset"],
              "related_systems": ["league-service", "progression-service", "matchmaking-service",
              "world-service", "economy-service", "character-service", "analytics-service"],
              "related_documents": [{"id": "league-system-mechanics", "relation":
              "implements"}], "github_issue": 83, "visibility": "internal", "audience":
              ["architect", "backend", "game-design", "api-designer"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\league-system-architecture-part1.yaml
