databaseChangeLog:
- changeSet:
    id: documentation-maintenance-mode-core-ec41f15d
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '8631745723057296'
        - column:
            name: doc_id
            value: maintenance-mode-core
        - column:
            name: title
            value: Архитектура системы режима обслуживания - Основная структура
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.1.0
        - column:
            name: last_updated
            value: 2025-11-30 20:55:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - infrastructure
            - operations
            - maintenance
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value:
            - infrastructure-service
            - social-service
            - gameplay-service
            - notification-service
            - api-gateway
        - column:
            name: related_documents
            value: '[{"id": "backend-maintenance-mode-system", "relation": "implements"},
              {"id": "maintenance-mode-mechanics", "relation": "extends"}, {"id":
              "maintenance-mode-data-flows", "relation": "extends"}, {"id": "maintenance-mode-database",
              "relation": "extends"}, {"id": "maintenance-mode-integrations", "relation":
              "extends"}, {"id": "maintenance-mode-technical", "relation": "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - infrastructure
            - api-designer
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "maintenance-mode-core", "title": "Архитектура
              системы режима обслуживания - Основная структура", "document_type":
              "architecture", "category": "systems", "status": "draft", "version":
              "1.1.0", "last_updated": "2025-11-30T20:55:00+00:00", "owners": [{"role":
              "architect", "contact": "architect@necp.game"}], "tags": ["architecture",
              "infrastructure", "operations", "maintenance"], "related_systems": ["infrastructure-service",
              "social-service", "gameplay-service", "notification-service", "api-gateway"],
              "related_documents": [{"id": "backend-maintenance-mode-system", "relation":
              "implements"}, {"id": "maintenance-mode-mechanics", "relation": "extends"},
              {"id": "maintenance-mode-data-flows", "relation": "extends"}, {"id":
              "maintenance-mode-database", "relation": "extends"}, {"id": "maintenance-mode-integrations",
              "relation": "extends"}, {"id": "maintenance-mode-technical", "relation":
              "extends"}], "github_issue": 316, "visibility": "internal", "audience":
              ["architect", "backend", "infrastructure", "api-designer"]}, "summary":
              {"problem": "Требуется спроектировать полную архитектуру системы режима
              обслуживания, включающую:\n- Управление плановым обслуживанием\n- Управление
              экстренным обслуживанием\n- Систему graceful shutdown\n- Систему уведомлений
              игроков\n- Блокировку новых соединений\n- Интеграции с инфраструктурой\n",
              "goal": "Создать архитектурную схему системы режима обслуживания с определением:\n-
              Компонентов для управления обслуживанием\n- REST, WebSocket и Event
              Bus контрактов\n- Интеграций с другими системами\n- Структуры БД\n-
              Технического задания для реализации\n", "essence": "Полная архитектура
              системы режима обслуживания с поддержкой планового и экстренного обслуживания,\ngraceful
              shutdown и уведомлений.\n"}, "architecture": {"overview": "Архитектура
              системы режима обслуживания состоит из следующих компонентов:\n1. Maintenance
              Manager - управление системой обслуживания\n2. Maintenance Window Manager
              - управление окнами обслуживания\n3. Maintenance Status Manager - управление
              статусом обслуживания\n4. Scheduled Maintenance Manager - управление
              плановым обслуживанием\n5. Emergency Maintenance Manager - управление
              экстренным обслуживанием\n6. Graceful Shutdown Manager - управление
              graceful shutdown\n7. Connection Blocker - блокировка новых соединений\n8.
              Maintenance Notification Manager - управление уведомлениями\n9. Maintenance
              Analytics Collector - сбор аналитики\n10. Maintenance Telemetry Collector
              - сбор телеметрии\n", "microservices": [{"name": "infrastructure-service",
              "port": 8093, "responsibility": "Обработка системы режима обслуживания:\n-
              Управление системой обслуживания\n- Управление окнами обслуживания\n-
              Управление статусом обслуживания\n- Управление плановым обслуживанием\n-
              Управление экстренным обслуживанием\n- Управление graceful shutdown\n-
              Блокировка новых соединений\n- Управление уведомлениями\n- Сбор аналитики\n-
              Сбор телеметрии\n", "components": [{"maintenance-manager": "управление
              системой обслуживания"}, {"maintenance-window-manager": "управление
              окнами обслуживания"}, {"maintenance-status-manager": "управление статусом
              обслуживания"}, {"scheduled-maintenance-manager": "управление плановым
              обслуживанием"}, {"emergency-maintenance-manager": "управление экстренным
              обслуживанием"}, {"graceful-shutdown-manager": "управление graceful
              shutdown"}, {"connection-blocker": "блокировка новых соединений"}, {"maintenance-notification-manager":
              "управление уведомлениями"}, {"maintenance-analytics-collector": "сбор
              аналитики"}, {"maintenance-telemetry-collector": "сбор телеметрии"}],
              "endpoints": ["GET /api/v1/maintenance/status - текущий статус обслуживания",
              "GET /api/v1/maintenance/windows - список окон обслуживания", "GET /api/v1/maintenance/windows/{windowId}
              - информация об окне обслуживания", "POST /api/v1/maintenance/windows
              - создание окна обслуживания", "PUT /api/v1/maintenance/windows/{windowId}
              - обновление окна обслуживания", "DELETE /api/v1/maintenance/windows/{windowId}
              - удаление окна обслуживания", "POST /api/v1/maintenance/emergency -
              запуск экстренного обслуживания", "POST /api/v1/maintenance/start -
              начало обслуживания", "POST /api/v1/maintenance/end - завершение обслуживания",
              "GET /api/v1/maintenance/notifications - список уведомлений", "POST
              /api/v1/maintenance/notifications - создание уведомления"], "websocket_channels":
              ["wss://api.necp.game/v1/maintenance/status - поток обновлений статуса
              обслуживания"], "events_published": [{"maintenance.window-created":
              "создано окно обслуживания"}, {"maintenance.window-updated": "обновлено
              окно обслуживания"}, {"maintenance.window-deleted": "удалено окно обслуживания"},
              {"maintenance.started": "начато обслуживание"}, {"maintenance.ended":
              "завершено обслуживание"}, {"maintenance.emergency-started": "начато
              экстренное обслуживание"}, {"maintenance.graceful-shutdown-started":
              "начат graceful shutdown"}, {"maintenance.graceful-shutdown-completed":
              "завершен graceful shutdown"}, {"maintenance.notification-sent": "отправлено
              уведомление"}], "events_subscribed": [{"infrastructure.health-check-failed":
              "проверка здоровья не прошла"}, {"deployment.started": "начат деплой"},
              {"deployment.completed": "завершен деплой"}, {"infrastructure.alert":
              "инфраструктурная тревога"}]}]}}'
        - column:
            name: metadata
            value: '{"id": "maintenance-mode-core", "title": "Архитектура системы
              режима обслуживания - Основная структура", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.1.0", "last_updated":
              "2025-11-30T20:55:00+00:00", "owners": [{"role": "architect", "contact":
              "architect@necp.game"}], "tags": ["architecture", "infrastructure",
              "operations", "maintenance"], "related_systems": ["infrastructure-service",
              "social-service", "gameplay-service", "notification-service", "api-gateway"],
              "related_documents": [{"id": "backend-maintenance-mode-system", "relation":
              "implements"}, {"id": "maintenance-mode-mechanics", "relation": "extends"},
              {"id": "maintenance-mode-data-flows", "relation": "extends"}, {"id":
              "maintenance-mode-database", "relation": "extends"}, {"id": "maintenance-mode-integrations",
              "relation": "extends"}, {"id": "maintenance-mode-technical", "relation":
              "extends"}], "github_issue": 316, "visibility": "internal", "audience":
              ["architect", "backend", "infrastructure", "api-designer"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\maintenance-mode-core.yaml
