databaseChangeLog:
- changeSet:
    id: documentation-mvp-backend-architecture-5362e914
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '5631942032310144'
        - column:
            name: doc_id
            value: architecture-mvp-backend
        - column:
            name: title
            value: MVP Backend Architecture
        - column:
            name: document_type
            value: implementation
        - column:
            name: category
            value: architecture
        - column:
            name: status
            value: approved
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-08 12:20:00+00:00
        - column:
            name: concept_approved
            value: true
        - column:
            name: concept_reviewed_at
            value: 2025-11-08 12:20:00+00:00
        - column:
            name: owners
            value: '[{"role": "backend_architect", "contact": "backend@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - mvp
            - backend
        - column:
            name: topics
            value:
            - microservices
            - deployment
        - column:
            name: related_systems
            value:
            - api-gateway
            - auth-service
            - character-service
            - gameplay-service
            - social-service
            - economy-service
            - world-service
        - column:
            name: related_documents
            value: '[{"id": "architecture-mvp-frontend", "relation": "complements"},
              {"id": "backend-systems-overview", "relation": "references"}, {"id":
              "infrastructure-index", "relation": "references"}]'
        - column:
            name: source
            value: shared/docs/knowledge/implementation/architecture/mvp-backend-architecture.md
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - backend
            - devops
            - platform
        - column:
            name: risk_level
            value: high
        - column:
            name: content
            value: '{"metadata": {"id": "architecture-mvp-backend", "title": "MVP
              Backend Architecture", "document_type": "implementation", "category":
              "architecture", "status": "approved", "version": "1.0.0", "last_updated":
              "2025-11-08T12:20:00+00:00", "concept_approved": true, "concept_reviewed_at":
              "2025-11-08T12:20:00+00:00", "owners": [{"role": "backend_architect",
              "contact": "backend@necp.game"}], "tags": ["architecture", "mvp", "backend"],
              "topics": ["microservices", "deployment"], "related_systems": ["api-gateway",
              "auth-service", "character-service", "gameplay-service", "social-service",
              "economy-service", "world-service"], "related_documents": [{"id": "architecture-mvp-frontend",
              "relation": "complements"}, {"id": "backend-systems-overview", "relation":
              "references"}, {"id": "infrastructure-index", "relation": "references"}],
              "source": "shared/docs/knowledge/implementation/architecture/mvp-backend-architecture.md",
              "visibility": "internal", "audience": ["backend", "devops", "platform"],
              "risk_level": "high"}, "review": {"chain": [{"role": "backend_architect",
              "reviewer": "", "reviewed_at": "2025-11-08T12:20:00+00:00", "status":
              "approved"}], "next_actions": []}, "summary": {"problem": "Нужно зафиксировать
              целевую архитектуру backend для MVP, чтобы выровнять сервисы, интеграции
              и инфраструктуру.", "goal": "Описать сервисный ландшафт, коммуникационные
              паттерны, observability, безопасность и CI/CD практики для запуска MVP.",
              "essence": "Документ структурирует микросервисы, их ответственность,
              интеграционные каналы, прозрачность и защиту, формируя основу для релиза.",
              "key_points": ["MVP состоит из gateway и шести микросервисов с перечислением
              портов, хранилищ и ответственности.", "Интеграции покрывают REST цепочку
              через gateway, Kafka топики и outbox-паттерн.", "Observability построена
              на OpenTelemetry, Prometheus и Jaeger; безопасность опирается на Keycloak
              и RBAC.", "CI/CD использует GitHub Actions, Gradle и ArgoCD для развёртывания
              контейнеров."]}, "content": {"sections": [{"id": "architecture_overview",
              "title": "Архитектурный обзор", "body": "Архитектура основывается на
              контейнеризованных микросервисах (Docker, Kubernetes). Сервисы взаимодействуют
              через REST\nи Kafka, используют PostgreSQL и Redis, а также Keycloak
              для аутентификации. Перечислены gateway, auth, character,\ngameplay,
              social, economy и world сервисы.\n", "mechanics_links": [], "assets":
              []}, {"id": "service_matrix", "title": "Ответственность сервисов", "body":
              "Приведена таблица с портами, хранилищами и зонами ответственности для
              каждого сервиса. Auth-service управляет регистрацией\nи OAuth, character-service
              ведёт персонажей и профиль, gameplay-service отвечает за боевые подсистемы
              и Redis, social-\nservice обрабатывает заказы и рейтинги, economy-service
              управляет крафтом и escrow, world-service — событиями мира.\n", "mechanics_links":
              [], "assets": []}, {"id": "integrations", "title": "Интеграции и потоки",
              "body": "REST-трафик проходит через API Gateway. Kafka используется
              для событий (например, `world.unrest.updates`), а outbox\nреализован
              через таблицу `mvp_meta.outbox` и Debezium. Документ фиксирует ключевые
              темы и схемы обмена.\n", "mechanics_links": [], "assets": []}, {"id":
              "observability", "title": "Observability", "body": "Используются OpenTelemetry
              с отправкой логов в Loki, Prometheus для метрик и Grafana дашборд `mvp-backend`.
              Трейсинг\nнастраивается через Jaeger с пробросом `traceId` из gateway.\n",
              "mechanics_links": [], "assets": []}, {"id": "security", "title": "Безопасность",
              "body": "Аутентификация базируется на Keycloak и проверке JWT через
              JWKS. RBAC применяется на уровне gateway и сервисов, секреты\nхранятся
              во Vault.\n", "mechanics_links": [], "assets": []}, {"id": "cicd", "title":
              "CI/CD", "body": "Конвейер GitHub Actions выполняет сборку Gradle, тесты
              и создание контейнеров (Buildx). ArgoCD разворачивает манифесты\nна
              dev-кластере.\n", "mechanics_links": [], "assets": []}]}, "appendix":
              {"glossary": [], "references": [], "decisions": []}, "implementation":
              {"github_issue": 136, "needs_task": false, "queue_reference": ["shared/trackers/queues/concept/queued.yaml#architecture-mvp-backend"],
              "blockers": []}, "history": [{"version": "1.0.0", "date": "2025-11-08",
              "author": "backend_guild", "changes": "Зафиксирована архитектура backend
              MVP, интеграции и практики observability/CI-CD."}], "validation": {"checksum":
              "", "schema_version": "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "architecture-mvp-backend", "title": "MVP Backend Architecture",
              "document_type": "implementation", "category": "architecture", "status":
              "approved", "version": "1.0.0", "last_updated": "2025-11-08T12:20:00+00:00",
              "concept_approved": true, "concept_reviewed_at": "2025-11-08T12:20:00+00:00",
              "owners": [{"role": "backend_architect", "contact": "backend@necp.game"}],
              "tags": ["architecture", "mvp", "backend"], "topics": ["microservices",
              "deployment"], "related_systems": ["api-gateway", "auth-service", "character-service",
              "gameplay-service", "social-service", "economy-service", "world-service"],
              "related_documents": [{"id": "architecture-mvp-frontend", "relation":
              "complements"}, {"id": "backend-systems-overview", "relation": "references"},
              {"id": "infrastructure-index", "relation": "references"}], "source":
              "shared/docs/knowledge/implementation/architecture/mvp-backend-architecture.md",
              "visibility": "internal", "audience": ["backend", "devops", "platform"],
              "risk_level": "high"}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\mvp-backend-architecture.yaml
