databaseChangeLog:
- changeSet:
    id: documentation-npc-relationships-system-детально-312d857b
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-552348058915034'
        - column:
            name: doc_id
            value: npc-relationships-system-detailed
        - column:
            name: title
            value: Система отношений с NPC — Детально
        - column:
            name: document_type
            value: mechanics
        - column:
            name: category
            value: social
        - column:
            name: status
            value: approved
        - column:
            name: version
            value: 1.1.0
        - column:
            name: last_updated
            value: 2025-12-06 11:47:00+00:00
        - column:
            name: concept_approved
            value: true
        - column:
            name: concept_reviewed_at
            value: 2025-11-09 19:17:00+00:00
        - column:
            name: owners
            value: '[{"role": "concept_director", "contact": "concept@necp.game"}]'
        - column:
            name: tags
            value:
            - npc
            - relationships
            - romance
        - column:
            name: topics
            value:
            - npc-relations
            - social-mechanics
        - column:
            name: related_systems
            value:
            - social-service
            - world-service
            - gameplay-service
            - economy-service
            - character-service
        - column:
            name: related_documents
            value: '[{"id": "npc-relationships-system", "relation": "references"},
              {"id": "npc-hiring-system-detailed", "relation": "complements"}, {"id":
              "relationships-system-detailed", "relation": "complements"}]'
        - column:
            name: source
            value: shared/docs/knowledge/mechanics/social/npc-relationships-system-детально.md
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - concept
            - narrative
            - social
        - column:
            name: risk_level
            value: high
        - column:
            name: content
            value: '{"metadata": {"id": "npc-relationships-system-detailed", "title":
              "Система отношений с NPC — Детально", "document_type": "mechanics",
              "category": "social", "status": "approved", "version": "1.1.0", "last_updated":
              "2025-12-06T11:47:00+00:00", "concept_approved": true, "concept_reviewed_at":
              "2025-11-09T19:17:00+00:00", "owners": [{"role": "concept_director",
              "contact": "concept@necp.game"}], "tags": ["npc", "relationships", "romance"],
              "topics": ["npc-relations", "social-mechanics"], "related_systems":
              ["social-service", "world-service", "gameplay-service", "economy-service",
              "character-service"], "related_documents": [{"id": "npc-relationships-system",
              "relation": "references"}, {"id": "npc-hiring-system-detailed", "relation":
              "complements"}, {"id": "relationships-system-detailed", "relation":
              "complements"}], "source": "shared/docs/knowledge/mechanics/social/npc-relationships-system-детально.md",
              "visibility": "internal", "audience": ["concept", "narrative", "social"],
              "risk_level": "high"}, "review": {"chain": [{"role": "social_design_lead",
              "reviewer": "", "reviewed_at": "2025-11-09T19:17:00+00:00", "status":
              "approved"}], "next_actions": []}, "summary": {"problem": "Детальная
              методология отношений с NPC находилась в Markdown и требовала структурирования
              для API и сервисов.", "goal": "Зафиксировать уровни отношений, типы
              NPC, формулы влияния и интеграции с сервисами мира.", "essence": "Документ
              описывает полный стек отношений от репутации и эмоций до REST/Kafka
              контрактов и UX.", "key_points": ["Многослойная модель включает репутацию,
              доверие, эмоции, романтику и специальное взаимодействие.", "Классы,
              фракции и происхождение влияют на стартовые и динамические показатели.",
              "API и события обеспечивают синхронизацию с social, world, gameplay
              и economy сервисами."]}, "content": {"sections": [{"id": "world_lore",
              "title": "Мир и лор: Отношения с NPC в киберпанк-реальности", "body":
              "В Night City, где каждый NPC — это не просто код, а живая история,
              отношения становятся ключом к выживанию. В мире, где корпорации контролируют
              всё, а банды правят улицами, NPC — это твои союзники, враги, любовники
              и наставники. Каждое взаимодействие формирует твою репутацию, открывает
              новые возможности или закрывает старые двери.\n\n**Типы NPC:** В киберпанк-мире
              NPC делятся на Core Story (ключевые персонажи сюжета), Functional (торговцы,
              фиксёры), Romance (романтические партнёры), Hireable (наёмники), Social
              Leaders (лидеры мнений) и Antagonists (враги). Каждый тип определяет
              доступные квесты, бонусы и риски. В Night City каждый NPC — это дверь
              в новую историю, и твои отношения определяют, какие двери открыты.\n\n**Уровни
              отношений:** От ненависти до союза — твоя репутация с NPC определяет
              всё. Дополнительные слои: доверие, эмоциональное состояние, лояльность
              и романтическая шкала (Interest → Bond). В киберпанк-мире отношения
              — это не просто цифры, это живые связи, которые могут спасти или уничтожить
              тебя. Каждый уровень открывает новые возможности, но и накладывает новые
              обязательства.\n\n**Эмоции и поведение:** В мире, где технологии заменяют
              человечность, эмоции становятся редким товаром. Привязанность, тревога,
              гордость, гнев — все эти эмоции формируют поведение NPC и определяют
              их отношения с игроком. В Night City эмоции — это оружие, которое может
              спасти или уничтожить. Каждая эмоция имеет последствия, которые могут
              изменить судьбу NPC и игрока.\n", "mechanics_links": ["mechanics/social/npc-relationships-system.yaml"],
              "assets": []}, {"id": "methodology", "title": "Методика детализации",
              "body": "Описаны слои отношения, типы NPC, модули-смежники и события
              поведения. Система охватывает\nсоциальные, мировые и геймплейные сервисы
              и требует журналов, эмоций и доверия.\n", "mechanics_links": ["mechanics/social/npc-relationships-system.yaml"]},
              {"id": "npc-types", "title": "Типы NPC и важность", "body": "Core Story,
              Functional, Romance, Hireable, Social Leaders и Antagonists имеют собственные\nпороги
              и сценарии. Каждый тип определяет доступные квесты, бонусы и риски.\n",
              "mechanics_links": ["mechanics/social/npc-hiring-system.yaml"]}, {"id":
              "relationship-levels", "title": "Уровни отношений и эмоций", "body":
              "Репутация распределена по диапазонам от ненависти до союза. Дополнительные
              слои: доверие,\nэмоциональное состояние, лояльность и романтическая
              шкала (Interest → Bond). Требуются условия\nпо репутации, поведению
              и времени.\n", "mechanics_links": ["mechanics/social/npc-relationships-system.yaml"]},
              {"id": "class-faction-impact", "title": "Влияние классов и фракций",
              "body": "Классы дают бонусы к доверию и скидкам, фракции меняют отношения,
              происхождение задаёт стартовые\nзначения. Интеграция с `factions-overview`
              и `classes-*` документами.\n", "mechanics_links": ["mechanics/social/relationships-system-детально.md"]},
              {"id": "relationship-dynamics", "title": "Рост и падение отношений",
              "body": "Квесты, подарки, свободное время, предательство и мировые события
              регулируют отношения. Вводятся\ncooldown, глобальные эффекты и связи
              с экономикой.\n", "mechanics_links": ["mechanics/social/npc-relationships-system.yaml"]},
              {"id": "special-relationships", "title": "Специальные типы", "body":
              "Наставничество, гильдии, семья, деловые и скрытые связи. Требуют дополнительных
              условий и дают\nуникальные бонусы.\n", "mechanics_links": ["mechanics/social/mentorship-system.yaml"]},
              {"id": "players-as-npc", "title": "Игроки как NPC", "body": "Игроки
              могут выступать квестодателями и услугеодателями при наличии рейтинга
              и доверия. Social-service\nконтролирует честность, economy-service —
              платежи.\n", "mechanics_links": ["mechanics/social/player-orders-system.yaml"]},
              {"id": "hiring", "title": "Найм NPC", "body": "Уровни найма, параметры
              персонала, требования доверия и связь с документами по найму NPC.\n",
              "mechanics_links": ["mechanics/social/npc-hiring-system.yaml"]}, {"id":
              "world-impact", "title": "Влияние на мир", "body": "Отношения влияют
              на города, фракции, экономику и бой. NPC предоставляют ресурсы, спасают
              игрока,\nинициируют события и поддерживают в кризисах.\n", "mechanics_links":
              ["mechanics/social/player-orders-world-impact-детально.yaml"]}, {"id":
              "ux", "title": "UX и журнал отношений", "body": "Требуются карточки
              NPC, таймлайн событий, романтические чеклисты и уведомления. UX макеты\nсогласованы
              по PR `FW-NPC-REL-013`.\n", "mechanics_links": ["mechanics/social/npc-relationships-system.yaml"]},
              {"id": "api", "title": "REST и JSON схемы", "body": "Сформированы endpoints
              для статуса, изменений, взаимодействий, романтики и истории, а также
              JSON\nсхемы для каждой операции.\n", "mechanics_links": ["mechanics/social/npc-relationships-system.yaml"]}]},
              "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation":
              {"needs_task": false, "github_issue": 81, "queue_reference": ["shared/trackers/queues/concept/queued.yaml"],
              "blockers": []}, "history": [{"version": "1.1.0", "date": "2025-12-06",
              "author": "idea-writer", "changes": "Добавлен лор и атмосферные описания
              в стиле Cyberpunk 2077, расширены описания системы отношений с NPC."},
              {"version": "1.0.0", "date": "2025-11-09", "author": "concept_director",
              "changes": "Детализирована система отношений, уровни, API и события
              для сервисов."}], "validation": {"checksum": "", "schema_version": "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "npc-relationships-system-detailed", "title": "Система
              отношений с NPC — Детально", "document_type": "mechanics", "category":
              "social", "status": "approved", "version": "1.1.0", "last_updated":
              "2025-12-06T11:47:00+00:00", "concept_approved": true, "concept_reviewed_at":
              "2025-11-09T19:17:00+00:00", "owners": [{"role": "concept_director",
              "contact": "concept@necp.game"}], "tags": ["npc", "relationships", "romance"],
              "topics": ["npc-relations", "social-mechanics"], "related_systems":
              ["social-service", "world-service", "gameplay-service", "economy-service",
              "character-service"], "related_documents": [{"id": "npc-relationships-system",
              "relation": "references"}, {"id": "npc-hiring-system-detailed", "relation":
              "complements"}, {"id": "relationships-system-detailed", "relation":
              "complements"}], "source": "shared/docs/knowledge/mechanics/social/npc-relationships-system-детально.md",
              "visibility": "internal", "audience": ["concept", "narrative", "social"],
              "risk_level": "high"}'
        - column:
            name: source_file
            value: knowledge\mechanics\social\npc-relationships-system-детально.yaml
