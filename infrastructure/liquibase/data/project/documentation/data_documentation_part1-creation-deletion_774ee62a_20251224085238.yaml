databaseChangeLog:
- changeSet:
    id: documentation-part1-creation-deletion-774ee62a
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '7711942827678347'
        - column:
            name: doc_id
            value: implementation-player-character-mgmt-part1
        - column:
            name: title
            value: 'Player Character Management — Part 1: Creation & Deletion'
        - column:
            name: document_type
            value: implementation
        - column:
            name: category
            value: backend
        - column:
            name: status
            value: approved
        - column:
            name: version
            value: 1.0.1
        - column:
            name: last_updated
            value: 2025-11-08 02:24:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: ''
        - column:
            name: owners
            value: '[{"role": "character_system_owner", "contact": "characters@necp.game"}]'
        - column:
            name: tags
            value:
            - character-management
            - account
            - persistence
        - column:
            name: topics
            value:
            - creation-flow
            - deletion
            - database
        - column:
            name: related_systems
            value:
            - character-service
            - inventory-service
            - quest-service
        - column:
            name: related_documents
            value: '[{"id": "implementation-player-character-mgmt-part2", "relation":
              "continues"}]'
        - column:
            name: source
            value: shared/docs/knowledge/implementation/backend/player-character-mgmt/part1-creation-deletion.md
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - backend
            - account
            - qa
        - column:
            name: risk_level
            value: medium
        - column:
            name: content
            value: '{"metadata": {"id": "implementation-player-character-mgmt-part1",
              "title": "Player Character Management — Part 1: Creation & Deletion",
              "document_type": "implementation", "category": "backend", "status":
              "approved", "version": "1.0.1", "last_updated": "2025-11-08T02:24:00+00:00",
              "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role":
              "character_system_owner", "contact": "characters@necp.game"}], "tags":
              ["character-management", "account", "persistence"], "topics": ["creation-flow",
              "deletion", "database"], "related_systems": ["character-service", "inventory-service",
              "quest-service"], "related_documents": [{"id": "implementation-player-character-mgmt-part2",
              "relation": "continues"}], "source": "shared/docs/knowledge/implementation/backend/player-character-mgmt/part1-creation-deletion.md",
              "visibility": "internal", "audience": ["backend", "account", "qa"],
              "risk_level": "medium"}, "review": {"chain": [{"role": "character_system_owner",
              "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions":
              []}, "summary": {"problem": "Нужно зафиксировать последовательность
              создания и удаления персонажей, чтобы сервисы аккаунтов и геймплея работали
              согласованно.", "goal": "Определить схемы БД, валидации и события для
              жизненного цикла персонажа — от создания до soft delete и восстановления.",
              "essence": "Документ описывает таблицы players/characters/slots, сервисный
              код создания, удаление с удержанием слота и процесс восстановления.",
              "key_points": ["Схемы `players`, `characters`, `character_slots` задают
              хранение атрибутов, внешности, прогресса и ограничений по слотам.",
              "Flow `createCharacter` валидирует имя, создаёт слоты, выдаёт стартовый
              инвентарь, квесты и публикует события.", "Soft delete освобождает слот,
              сохраняет таймер восстановления и оповещает систему достижений/инвентаря.",
              "Процедуры восстановления проверяют срок, возвращают статус и пересоздают
              инвентарь/квесты."]}, "content": {"sections": [{"id": "database-schema",
              "title": "Схемы данных", "body": "Описаны таблицы `players`, `characters`,
              `character_slots` с индексами и внешними ключами. Структуры включают\nденормализованные
              поля (account_id, appearance, reputation) для ускорения запросов и мониторинга
              soft delete.\n", "mechanics_links": [], "assets": []}, {"id": "creation-flow",
              "title": "Процесс создания персонажа", "body": "Сервис `createCharacter`
              выполняет проверку слотов, валидацию имени, назначение стартовых атрибутов/навыков,\nинициализацию
              внешности и позиций, выдаёт начальные ресурсы, сохраняет агрегаты и
              публикует событие `CharacterCreated`.\n", "mechanics_links": [], "assets":
              []}, {"id": "deletion", "title": "Удаление персонажа", "body": "Soft
              delete переводит статус в `DELETED`, освобождает слоты, даёт 30-дневный
              период восстановления и оповещает\nсвязанные сервисы. Поддерживается
              логирование и публикация `CharacterDeletedEvent`.\n", "mechanics_links":
              [], "assets": []}, {"id": "restore", "title": "Восстановление персонажа",
              "body": "Процедура `restoreCharacter` валидирует доступность, повышает
              used slots, восстанавливает бекапы и возвращает\nперсонажа в активный
              статус, синхронизируя инвентарь и квесты.\n", "mechanics_links": [],
              "assets": []}]}, "appendix": {"glossary": [], "references": [], "decisions":
              []}, "implementation": {"github_issue": 136, "needs_task": false, "queue_reference":
              ["shared/trackers/queues/concept/queued.yaml"], "blockers": []}, "history":
              [{"version": "1.0.1", "date": "2025-11-07", "author": "character_system_owner",
              "changes": "Обновление схем и потоков после рефакторинга слотов и событий."}],
              "validation": {"checksum": "", "schema_version": "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "implementation-player-character-mgmt-part1", "title":
              "Player Character Management — Part 1: Creation & Deletion", "document_type":
              "implementation", "category": "backend", "status": "approved", "version":
              "1.0.1", "last_updated": "2025-11-08T02:24:00+00:00", "concept_approved":
              false, "concept_reviewed_at": "", "owners": [{"role": "character_system_owner",
              "contact": "characters@necp.game"}], "tags": ["character-management",
              "account", "persistence"], "topics": ["creation-flow", "deletion", "database"],
              "related_systems": ["character-service", "inventory-service", "quest-service"],
              "related_documents": [{"id": "implementation-player-character-mgmt-part2",
              "relation": "continues"}], "source": "shared/docs/knowledge/implementation/backend/player-character-mgmt/part1-creation-deletion.md",
              "visibility": "internal", "audience": ["backend", "account", "qa"],
              "risk_level": "medium"}'
        - column:
            name: source_file
            value: knowledge\implementation\backend\player-character-mgmt\part1-creation-deletion.yaml
