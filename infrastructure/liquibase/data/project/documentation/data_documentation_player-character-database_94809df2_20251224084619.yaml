databaseChangeLog:
- changeSet:
    id: documentation-player-character-database-94809df2
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '3908032376689545'
        - column:
            name: doc_id
            value: player-character-database
        - column:
            name: title
            value: Архитектура системы управления персонажами игроков - База данных
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.1.0
        - column:
            name: last_updated
            value: 2025-11-30 20:45:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[]'
        - column:
            name: tags
            value: []
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value: []
        - column:
            name: related_documents
            value: '[{"id": "player-character-core", "relation": "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: ''
        - column:
            name: audience
            value: []
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "player-character-database", "title": "Архитектура
              системы управления персонажами игроков - База данных", "document_type":
              "architecture", "category": "systems", "status": "draft", "version":
              "1.1.0", "last_updated": "2025-11-30T20:45:00+00:00", "github_issue":
              389, "related_documents": [{"id": "player-character-core", "relation":
              "extends"}]}, "database_schema": {"tables": [{"name": "players", "description":
              "Профили игроков (аккаунты)", "fields": [{"id": "UUID (PK)"}, {"account_id":
              "UUID (FK accounts)"}, {"username": "VARCHAR(255)"}, {"email": "VARCHAR(255)"},
              {"created_at": "TIMESTAMP"}, {"updated_at": "TIMESTAMP"}], "indexes":
              ["account_id", "username"]}, {"name": "characters", "description": "Персонажи
              игроков", "fields": [{"id": "UUID (PK)"}, {"player_id": "UUID (FK players)"},
              {"name": "VARCHAR(255)"}, {"class": "VARCHAR(50)"}, {"origin": "VARCHAR(50)"},
              {"level": {"INTEGER (default": "1)"}}, {"attributes": "JSONB"}, {"skills":
              "JSONB"}, {"stats": "JSONB"}, {"current_zone": "VARCHAR(100)"}, {"deleted":
              {"BOOLEAN (default": "false)"}}, {"deleted_at": "TIMESTAMP (nullable)"},
              {"can_restore_until": "TIMESTAMP (nullable)"}, {"last_played_at": "TIMESTAMP"},
              {"created_at": "TIMESTAMP"}, {"updated_at": "TIMESTAMP"}], "constraints":
              "- UNIQUE(player_id, name)\n", "indexes": ["player_id, deleted", "name",
              "deleted, can_restore_until"]}, {"name": "character_slots", "description":
              "Слоты персонажей игроков", "fields": [{"id": "UUID (PK)"}, {"player_id":
              "UUID (FK players)"}, {"base_slots": {"INTEGER (default": "3)"}}, {"premium_slots":
              {"INTEGER (default": "0)"}}, {"total_slots": {"INTEGER (computed": "base_slots
              + premium_slots)"}}, {"used_slots": {"INTEGER (default": "0)"}}, {"premium_slots_purchased":
              {"INTEGER (default": "0)"}}, {"created_at": "TIMESTAMP"}, {"updated_at":
              "TIMESTAMP"}], "constraints": "- UNIQUE(player_id)\n- CHECK(used_slots
              <= total_slots)\n", "indexes": ["player_id"]}, {"name": "character_snapshots",
              "description": "Снапшоты персонажей для восстановления", "fields": [{"id":
              "UUID (PK)"}, {"character_id": "UUID (FK characters)"}, {"snapshot_data":
              "JSONB"}, {"created_at": "TIMESTAMP"}], "indexes": ["character_id, created_at"]}]}}'
        - column:
            name: metadata
            value: '{"id": "player-character-database", "title": "Архитектура системы
              управления персонажами игроков - База данных", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.1.0", "last_updated":
              "2025-11-30T20:45:00+00:00", "github_issue": 389, "related_documents":
              [{"id": "player-character-core", "relation": "extends"}]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\player-character-database.yaml
