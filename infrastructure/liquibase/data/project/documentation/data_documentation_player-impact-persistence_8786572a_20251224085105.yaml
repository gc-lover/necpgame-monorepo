databaseChangeLog:
- changeSet:
    id: documentation-player-impact-persistence-8786572a
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '1441131791394527'
        - column:
            name: doc_id
            value: player-impact-persistence
        - column:
            name: title
            value: Хранение влияния игроков
        - column:
            name: document_type
            value: mechanics
        - column:
            name: category
            value: world
        - column:
            name: status
            value: approved
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-07 20:16:00+00:00
        - column:
            name: concept_approved
            value: true
        - column:
            name: concept_reviewed_at
            value: 2025-11-07 20:16:00+00:00
        - column:
            name: owners
            value: '[{"role": "concept_director", "contact": "concept@necp.game"}]'
        - column:
            name: tags
            value:
            - player-impact
            - persistence
            - world-state
        - column:
            name: topics
            value:
            - data-modeling
            - world-observability
        - column:
            name: related_systems
            value:
            - world-service
            - data-service
            - analytics-service
        - column:
            name: related_documents
            value: '[{"id": "player-impact-mechanics", "relation": "references"},
              {"id": "player-impact-systems", "relation": "references"}]'
        - column:
            name: source
            value: shared/docs/knowledge/mechanics/world/world-state/player-impact-persistence.md
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - concept
            - systems
            - data
        - column:
            name: risk_level
            value: high
        - column:
            name: content
            value: '{"metadata": {"id": "player-impact-persistence", "title": "Хранение
              влияния игроков", "document_type": "mechanics", "category": "world",
              "status": "approved", "version": "1.0.0", "last_updated": "2025-11-07T20:16:00+00:00",
              "concept_approved": true, "concept_reviewed_at": "2025-11-07T20:16:00+00:00",
              "owners": [{"role": "concept_director", "contact": "concept@necp.game"}],
              "tags": ["player-impact", "persistence", "world-state"], "topics": ["data-modeling",
              "world-observability"], "related_systems": ["world-service", "data-service",
              "analytics-service"], "related_documents": [{"id": "player-impact-mechanics",
              "relation": "references"}, {"id": "player-impact-systems", "relation":
              "references"}], "source": "shared/docs/knowledge/mechanics/world/world-state/player-impact-persistence.md",
              "visibility": "internal", "audience": ["concept", "systems", "data"],
              "risk_level": "high"}, "review": {"chain": [{"role": "concept_director",
              "reviewer": "concept@necp.game", "reviewed_at": "2025-11-07T20:16:00+00:00",
              "status": "approved"}], "next_actions": []}, "summary": {"problem":
              "Хранение влияния игроков не было формализовано и мешало аналитике и
              API.", "goal": "Описать схему данных, индексы и API для постоянного
              хранения влияния игроков на мир.", "essence": "Документ фиксирует таблицы,
              REST-интерфейсы и связи с глобальным состоянием для аудита влияния.",
              "key_points": ["Таблица `player_world_impact` хранит типы влияния и
              цель с индексами для аналитики.", "REST API открывают получение состояния
              мира, влияния игрока и управление голосами и территориями.", "Persistence
              связывает механики влияния с глобальным состоянием и техническим каталогом."]},
              "content": {"sections": [{"id": "database-schema", "title": "Схема данных",
              "body": "Таблица `player_world_impact` хранит id влияния, игрока, тип
              воздействия и целевой объект. Индексы по игроку, типу и цели\nускоряют
              отчёты и агрегации. Внешние ключи обеспечивают целостность и удаляют
              записи при удалении персонажа.\n", "mechanics_links": ["mechanics/world/world-state/player-impact-mechanics.yaml"],
              "assets": []}, {"id": "api-endpoints", "title": "REST интерфейсы", "body":
              "world-service предоставляет эндпоинты получения состояния мира, влияния
              игрока, голосований и территорий. Эти методы\nиспользуются квестами,
              UI и аналитикой для отображения текущей ситуации и применения новых
              влияний.\n", "mechanics_links": ["mechanics/world/world-state/player-impact-systems.yaml"],
              "assets": []}, {"id": "integration", "title": "Интеграция и каталоги",
              "body": "Документ ссылается на каталог глобального состояния и другие
              микрофичи влияния. Persistence соединяет агрегаторы,\nочереди и telemetry,
              чтобы мир реагировал на действия игроков и сохранял результаты для истории.\n",
              "mechanics_links": ["mechanics/world/world-bosses-catalog.yaml"], "assets":
              []}]}, "appendix": {"glossary": [], "references": [], "decisions": []},
              "implementation": {"needs_task": false, "github_issue": 104, "queue_reference":
              ["shared/trackers/queues/concept/queued.yaml#player-impact-persistence"],
              "blockers": []}, "history": [{"version": "1.0.0", "date": "2025-11-07",
              "author": "ai_brain_manager", "changes": "Описаны таблицы и API для
              хранения влияния игроков."}], "validation": {"checksum": "", "schema_version":
              "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "player-impact-persistence", "title": "Хранение влияния
              игроков", "document_type": "mechanics", "category": "world", "status":
              "approved", "version": "1.0.0", "last_updated": "2025-11-07T20:16:00+00:00",
              "concept_approved": true, "concept_reviewed_at": "2025-11-07T20:16:00+00:00",
              "owners": [{"role": "concept_director", "contact": "concept@necp.game"}],
              "tags": ["player-impact", "persistence", "world-state"], "topics": ["data-modeling",
              "world-observability"], "related_systems": ["world-service", "data-service",
              "analytics-service"], "related_documents": [{"id": "player-impact-mechanics",
              "relation": "references"}, {"id": "player-impact-systems", "relation":
              "references"}], "source": "shared/docs/knowledge/mechanics/world/world-state/player-impact-persistence.md",
              "visibility": "internal", "audience": ["concept", "systems", "data"],
              "risk_level": "high"}'
        - column:
            name: source_file
            value: knowledge\mechanics\world\world-state\player-impact-persistence.yaml
