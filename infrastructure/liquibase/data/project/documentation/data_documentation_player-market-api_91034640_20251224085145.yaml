databaseChangeLog:
- changeSet:
    id: documentation-player-market-api-91034640
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-366309413773618'
        - column:
            name: doc_id
            value: player-market-api
        - column:
            name: title
            value: Player Market — API
        - column:
            name: document_type
            value: mechanics
        - column:
            name: category
            value: economy
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-11 03:15:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: ''
        - column:
            name: owners
            value: '[{"role": "concept_director", "contact": "concept@necp.game"}]'
        - column:
            name: tags
            value:
            - player-market
            - rest-api
            - marketplace
        - column:
            name: topics
            value:
            - marketplace_design
            - api_contracts
        - column:
            name: related_systems
            value:
            - economy-service
            - api-gateway
            - notification-service
        - column:
            name: related_documents
            value: '[{"id": "player-market-core", "relation": "references"}, {"id":
              "player-market-database", "relation": "complements"}, {"id": "player-market-analytics",
              "relation": "complements"}]'
        - column:
            name: source
            value: shared/docs/knowledge/mechanics/economy/player-market/player-market-api.md
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - concept
            - economy
            - backend
        - column:
            name: risk_level
            value: medium
        - column:
            name: content
            value: '{"metadata": {"id": "player-market-api", "title": "Player Market
              — API", "document_type": "mechanics", "category": "economy", "status":
              "draft", "version": "1.0.0", "last_updated": "2025-11-11T03:15:00+00:00",
              "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role":
              "concept_director", "contact": "concept@necp.game"}], "tags": ["player-market",
              "rest-api", "marketplace"], "topics": ["marketplace_design", "api_contracts"],
              "related_systems": ["economy-service", "api-gateway", "notification-service"],
              "related_documents": [{"id": "player-market-core", "relation": "references"},
              {"id": "player-market-database", "relation": "complements"}, {"id":
              "player-market-analytics", "relation": "complements"}], "source": "shared/docs/knowledge/mechanics/economy/player-market/player-market-api.md",
              "visibility": "internal", "audience": ["concept", "economy", "backend"],
              "risk_level": "medium"}, "review": {"chain": [{"role": "concept_director",
              "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions":
              []}, "summary": {"problem": "Требуется описать REST API Player Market
              для публикации, поиска и закрытия листингов.", "goal": "Зафиксировать
              контракты, параметры, примеры ответов и требования безопасности.", "essence":
              "Набор REST эндпоинтов обслуживает P2P сделки, репутацию продавцов и
              интеграцию с сервисами экономики.", "key_points": ["CRUD-листинги закрывают
              цикл создания, поиска и покупки.", "Механика отзывов и рейтингов поддерживает
              систему доверия.", "Безопасность включает антифрод-проверки, лимиты
              и модерацию."]}, "content": {"sections": [{"id": "introduction", "title":
              "Введение", "body": "Player Market API предоставляет REST интерфейсы
              для создаваемых объявлений, поиска предложений, оформления\nсделок и
              отзывов. Контракты ориентированы на скорость ответа, поддержку фильтров
              и прямое взаимодействие с\nсервисами экономики и уведомлений.\n", "mechanics_links":
              ["mechanics/economy/player-market/player-market-core.yaml"], "assets":
              []}, {"id": "listings_create", "title": "Создание листинга", "body":
              "POST `/api/v1/market/listings` принимает идентификаторы предмета и
              персонажа, количество и цену. В ответ\nвозвращается идентификатор листинга
              и срок действия. Сервис выполняет проверки наличия предмета, диапазона
              цен\nи лимитов объявлений.\n", "mechanics_links": ["mechanics/economy/player-market/player-market-database.yaml"],
              "assets": []}, {"id": "listings_search", "title": "Поиск и выдача",
              "body": "GET `/api/v1/market/listings` поддерживает фильтры по тексту,
              типу, качеству, цене, городу и продавцу. Параметр\n`sortBy` управляет
              порядком выдачи, а пагинация ограничивает результаты. Ответ содержит
              карточки листингов,\nданные продавца и агрегированную статистику.\n",
              "mechanics_links": ["mechanics/economy/player-market/player-market-analytics.yaml"],
              "assets": []}, {"id": "listing_purchase", "title": "Покупка и удаление",
              "body": "POST `/api/v1/market/listings/{id}/buy` обрабатывает покупку
              с указанием количества, а DELETE `/api/v1/market/listings/{id}`\nотменяет
              активное объявление. Обе операции возвращают статус, обеспечивают атомарность
              транзакций и интегрируются\nс логикой уведомлений.\n", "mechanics_links":
              ["mechanics/economy/stock-exchange/stock-protection.yaml"], "assets":
              []}, {"id": "reviews", "title": "Отзывы и рейтинги", "body": "POST `/api/v1/market/reviews`
              и GET `/api/v1/market/sellers/{id}/reviews` фиксируют оценки и комментарии
              к\nпродавцам. Контракты включают проверку уникальности торговли, расчёт
              среднего рейтинга и публикацию истории отзывов.\n", "mechanics_links":
              ["mechanics/social/reputation-formulas.yaml"], "assets": []}, {"id":
              "security", "title": "Безопасность и ограничения", "body": "Антифрод-проверки
              следят за адекватностью цен, ограничивают частоту операций и требуют
              капчу для массовых действий.\nЛогика аудита хранит торговые записи,
              а модерация использует административные инструменты для рассмотрения
              споров.\n", "mechanics_links": ["mechanics/implementation/infrastructure/admin-moderation-tools.yaml"],
              "assets": []}]}, "appendix": {"glossary": [], "references": [], "decisions":
              []}, "implementation": {"needs_task": false, "github_issue": 61, "queue_reference":
              ["shared/trackers/queues/concept/queued.yaml#CON-2025-232"], "blockers":
              []}, "history": [{"version": "1.0.0", "date": "2025-11-11", "author":
              "concept_director", "changes": "Конвертировано из player-market-api.md
              и структурировано по шаблону знаний."}], "validation": {"checksum":
              "", "schema_version": "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "player-market-api", "title": "Player Market — API", "document_type":
              "mechanics", "category": "economy", "status": "draft", "version": "1.0.0",
              "last_updated": "2025-11-11T03:15:00+00:00", "concept_approved": false,
              "concept_reviewed_at": "", "owners": [{"role": "concept_director", "contact":
              "concept@necp.game"}], "tags": ["player-market", "rest-api", "marketplace"],
              "topics": ["marketplace_design", "api_contracts"], "related_systems":
              ["economy-service", "api-gateway", "notification-service"], "related_documents":
              [{"id": "player-market-core", "relation": "references"}, {"id": "player-market-database",
              "relation": "complements"}, {"id": "player-market-analytics", "relation":
              "complements"}], "source": "shared/docs/knowledge/mechanics/economy/player-market/player-market-api.md",
              "visibility": "internal", "audience": ["concept", "economy", "backend"],
              "risk_level": "medium"}'
        - column:
            name: source_file
            value: knowledge\mechanics\economy\player-market\player-market-api.yaml
