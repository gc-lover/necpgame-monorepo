databaseChangeLog:
- changeSet:
    id: documentation-progression-backend-370cb065
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '8219973305496297'
        - column:
            name: doc_id
            value: progression-backend
        - column:
            name: title
            value: Backend системы прогрессии
        - column:
            name: document_type
            value: implementation
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: approved
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-09 20:37:00+00:00
        - column:
            name: concept_approved
            value: true
        - column:
            name: concept_reviewed_at
            value: 2025-11-09 20:37:00+00:00
        - column:
            name: owners
            value: '[{"role": "concept_director", "contact": "concept@necp.game"}]'
        - column:
            name: tags
            value:
            - backend
            - progression
            - gameplay
        - column:
            name: topics
            value:
            - level-system
            - skill-progression
        - column:
            name: related_systems
            value:
            - gameplay-service
            - character-service
            - achievement-service
        - column:
            name: related_documents
            value: '[{"id": "progression-economy", "relation": "references"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - concept
            - backend
            - gameplay
        - column:
            name: risk_level
            value: high
        - column:
            name: content
            value: '{"metadata": {"id": "progression-backend", "title": "Backend системы
              прогрессии", "document_type": "implementation", "category": "systems",
              "status": "approved", "version": "1.0.0", "last_updated": "2025-11-09T20:37:00+00:00",
              "concept_approved": true, "concept_reviewed_at": "2025-11-09T20:37:00+00:00",
              "owners": [{"role": "concept_director", "contact": "concept@necp.game"}],
              "tags": ["backend", "progression", "gameplay"], "topics": ["level-system",
              "skill-progression"], "related_systems": ["gameplay-service", "character-service",
              "achievement-service"], "related_documents": [{"id": "progression-economy",
              "relation": "references"}], "source": "", "visibility": "internal",
              "audience": ["concept", "backend", "gameplay"], "risk_level": "high"},
              "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at":
              "2025-11-09T20:37:00+00:00", "status": "approved"}], "next_actions":
              []}, "summary": {"problem": "Игрокам нужна прозрачная система получения
              опыта и роста характеристик.", "goal": "Определить backend-компонент,
              который обрабатывает опыт, уровень, очки атрибутов и навыков.", "essence":
              "Gameplay-service реализует расчёт опыта, повышение уровня и распределение
              очков с публикацией событий и синхронизацией с другими сервисами.",
              "key_points": ["Расчёт опыта и повышение уровня с экспоненциальной формулой.",
              "Учёт очков атрибутов и навыков, распределение и проверка капов.", "Интеграция
              с уведомлениями и event bus для оповещения и достижений."]}, "content":
              {"sections": [{"id": "service-architecture", "title": "Микросервисная
              архитектура", "body": "Компонент размещён в gameplay-service (порт 8083)
              и доступен через `/api/v1/gameplay/progression/*`.\nОн публикует события
              `character:level-up`, `character:skill-leveled`, `character:attribute-increased`\nи
              подписывается на источники опыта: `combat:enemy-killed`, `quest:completed`,
              `skill:used`.\nCharacter-service обновляет уровень и параметры персонажа,
              achievement-service реагирует на достижения.\n", "mechanics_links":
              [], "assets": []}, {"id": "data-model", "title": "Модель данных", "body":
              "Хранилище включает таблицы `character_progression` (уровень, опыт,
              очки) и `skill_experience`\n(прогресс по навыкам). Ограничения обеспечивают
              уникальность навыков на персонажа, каскадное\nудаление и индексы по
              часто используемым полям.\n", "mechanics_links": [], "assets": []},
              {"id": "experience-flow", "title": "Расчёт опыта и повышение уровня",
              "body": "Сервис `ProgressionService` начисляет опыт, проверяет условия
              повышения уровня, пересчитывает\nтребования к следующему уровню и выдаёт
              очки атрибутов и навыков. После апдейта публикуются\nсобытия и отправляются
              уведомления игроку. Распределение очков валидирует наличие свободных\nочков
              и ограничение на максимум значения атрибута.\n", "mechanics_links":
              [], "assets": []}]}, "appendix": {"glossary": [], "references": [{"type":
              "api", "path": "api/v1/gameplay/progression/"}, {"type": "repository",
              "path": "shared/code/backend/gameplay/progression/"}], "decisions":
              [{"id": "adr-progression-backend", "summary": "Утверждена система прогрессии
              с событийной синхронизацией и наградами."}]}, "implementation": {"needs_task":
              false, "github_issue": 79, "queue_reference": ["shared/trackers/queues/concept/queued.yaml"],
              "blockers": []}, "history": [{"version": "1.0.0", "date": "2025-11-09",
              "author": "Concept Director", "changes": "Завершена спецификация backend-логики
              прогрессии и интеграций с сервисами."}], "validation": {"checksum":
              "", "schema_version": "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "progression-backend", "title": "Backend системы прогрессии",
              "document_type": "implementation", "category": "systems", "status":
              "approved", "version": "1.0.0", "last_updated": "2025-11-09T20:37:00+00:00",
              "concept_approved": true, "concept_reviewed_at": "2025-11-09T20:37:00+00:00",
              "owners": [{"role": "concept_director", "contact": "concept@necp.game"}],
              "tags": ["backend", "progression", "gameplay"], "topics": ["level-system",
              "skill-progression"], "related_systems": ["gameplay-service", "character-service",
              "achievement-service"], "related_documents": [{"id": "progression-economy",
              "relation": "references"}], "source": "", "visibility": "internal",
              "audience": ["concept", "backend", "gameplay"], "risk_level": "high"}'
        - column:
            name: source_file
            value: knowledge\implementation\backend\progression-backend.yaml
