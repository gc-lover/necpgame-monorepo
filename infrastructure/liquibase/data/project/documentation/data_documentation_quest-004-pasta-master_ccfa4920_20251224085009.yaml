databaseChangeLog:
- changeSet:
    id: documentation-quest-004-pasta-master-ccfa4920
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-291609962113573'
        - column:
            name: doc_id
            value: canon-quest-rome-2029-004-pasta-master
        - column:
            name: title
            value: 'Рим: мастер классической пасты'
        - column:
            name: document_type
            value: canon
        - column:
            name: category
            value: quests
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 2.1.0
        - column:
            name: last_updated
            value: 2025-12-01 00:00:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: ''
        - column:
            name: owners
            value: '[{"role": "concept_director", "contact": "concept@necp.game"}]'
        - column:
            name: tags
            value:
            - rome
            - pasta
            - culinary
        - column:
            name: topics
            value:
            - craftsmanship
            - food-culture
        - column:
            name: related_systems
            value:
            - narrative-service
            - quest-service
        - column:
            name: related_documents
            value: '[{"id": "canon-region-europe-2020-2093", "relation": "references"}]'
        - column:
            name: source
            value: shared/docs/knowledge/canon/lore/timeline-author/quests/europe/rome/2020-2029/quest-004-pasta-master.md
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - concept
            - narrative
            - liveops
        - column:
            name: risk_level
            value: low
        - column:
            name: content
            value: '{"metadata": {"id": "canon-quest-rome-2029-004-pasta-master",
              "title": "Рим: мастер классической пасты", "document_type": "canon",
              "category": "quests", "status": "draft", "version": "2.1.0", "last_updated":
              "2025-12-01T00:00:00+00:00", "concept_approved": false, "concept_reviewed_at":
              "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}],
              "tags": ["rome", "pasta", "culinary"], "topics": ["craftsmanship", "food-culture"],
              "related_systems": ["narrative-service", "quest-service"], "related_documents":
              [{"id": "canon-region-europe-2020-2093", "relation": "references"}],
              "source": "shared/docs/knowledge/canon/lore/timeline-author/quests/europe/rome/2020-2029/quest-004-pasta-master.md",
              "visibility": "internal", "audience": ["concept", "narrative", "liveops"],
              "risk_level": "low"}, "review": {"chain": [{"role": "concept_director",
              "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions":
              []}, "summary": {"problem": "В культурной линии Рима отсутствовал интерактивный
              кулинарный мастер-класс.", "goal": "Позволить игроку обучиться у местной
              nonna приготовлению четырёх классических паст.", "essence": "Герой замешивает
              тесто, готовит соусы и получает благословение наставницы, открывая новые
              кулинарные рецепты.", "key_points": ["Подчёркнуты традиции семейной
              кухни и выражение «la nonna sa tutto».", "Игрок готовит Carbonara, Amatriciana,
              Cacio e Pepe и Gricia без кухонных машин.", "Награды включают рост навыка,
              титул «Мастер пасты» и доступ к баффам еды."]}, "quest_definition":
              {"quest_type": "side", "level_min": 3, "level_max": null, "requirements":
              {"required_quests": [], "required_flags": [], "required_reputation":
              {}, "required_items": []}, "objectives": [{"id": "find_roma_nonna",
              "text": "Найти римскую nonna, согласную обучать чужаков семейным рецептам",
              "type": "interact", "target": "rome_culinary_district", "count": 1,
              "optional": false}, {"id": "knead_dough", "text": "Замесить тесто из
              муки и яиц, следуя наставлениям «piano, piano»", "type": "craft", "target":
              "pasta_dough_preparation", "count": 1, "optional": false}, {"id": "roll_pasta_sheets",
              "text": "Раскатать листы вручную и сформировать разные виды пасты",
              "type": "craft", "target": "pasta_shaping", "count": 4, "optional":
              false}, {"id": "prepare_sauces", "text": "Приготовить четыре классические
              римские соуса: Carbonara, Amatriciana, Cacio e Pepe и Gricia", "type":
              "craft", "target": "sauce_preparation", "count": 4, "optional": false},
              {"id": "serve_dishes", "text": "Сервировать блюда и получить благословение
              наставницы и семейную книгу рецептов", "type": "interact", "target":
              "nonna_blessing", "count": 1, "optional": false}], "rewards": {"experience":
              2500, "currency": 0, "items": [{"item_id": "pasta_master_title", "quantity":
              1, "name": "Титул «Мастер пасты»"}, {"item_id": "family_recipe_book",
              "quantity": 1, "name": "Семейная книга рецептов"}], "reputation": {"rome_culinary_circle":
              10}, "flags": ["pasta_master_unlocked"]}, "branches": []}, "content":
              {"sections": [{"id": "overview", "title": "Обзор квеста", "body": "Квест
              ROME-2029-004 знакомит игрока с мастерской традиционной пасты. Нужно
              найти наставницу, пройти обучение и\nприготовить четыре блюда, соблюдая
              технику ручного раскатывания.\n", "mechanics_links": ["mechanics/quests/quest-system.yaml"],
              "assets": []}, {"id": "stages", "title": "Последовательность этапов",
              "body": "1. Найти римскую nonna, согласную обучать чужаков семейным
              рецептам.\n2. Замесить тесто из муки и яиц, следуя наставлениям «piano,
              piano».\n3. Раскатать листы вручную и сформировать разные виды пасты.\n4.
              Приготовить четыре классические римские соуса и сервировать блюда.\n5.
              Получить благословение наставницы и семейную книгу рецептов.\n", "mechanics_links":
              [], "assets": []}, {"id": "regional_context", "title": "Региональные
              детали", "body": "- Обстановка домашней кухни с деревянным столом, присыпанным
              мукой.\n- Использование сезонных ингредиентов и истории происхождения
              каждого блюда.\n- Традиция передавать рецепты устно от старшего поколения.\n",
              "mechanics_links": [], "assets": []}, {"id": "rewards", "title": "Награды
              и эффекты", "body": "- 2 500 XP.\n- Рост навыка «Кулинария» на +20.\n-
              Титул «Мастер пасты».\n- Открытие набора блюд, дающих временные баффы.\n",
              "mechanics_links": [], "assets": []}, {"id": "mechanics", "title": "Задействованные
              механики", "body": "- Мини-игры по замесу теста и контролю температуры.\n-
              Система крафта кулинарных рецептов и долгосрочных баффов.\n- Социальные
              взаимодействия и проверка доверия NPC-наставницы.\n", "mechanics_links":
              [], "assets": []}, {"id": "connections", "title": "Связи", "body": "Квест
              поддерживает гастрономическую арку Рима и открывает цепочку кулинарных
              событий по всей Италии.\n", "mechanics_links": [], "assets": []}]},
              "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation":
              {"github_issue": 606, "needs_task": false, "queue_reference": [], "blockers":
              []}, "history": [{"version": "2.1.0", "date": "2025-12-01", "author":
              "content_writer", "changes": "Добавлен Issue в начало файла. Исправлена
              структура items (id -> item_id). Структура quest_definition соответствует
              архитектуре системы квестов (currency, flags, правильная структура rewards)."},
              {"version": "2.0.0", "date": "2025-11-29", "author": "content_writer",
              "changes": "Добавлена полная структура quest_definition с objectives,
              rewards и branches. Детализирован контент согласно концепции. Добавлены
              механики ремесла и кулинарной культуры."}, {"version": "0.1.0", "date":
              "2025-11-13", "author": "concept_team", "changes": "Добавлен YAML-квест
              мастер-класса пасты."}], "validation": {"checksum": "", "schema_version":
              "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "canon-quest-rome-2029-004-pasta-master", "title": "Рим:
              мастер классической пасты", "document_type": "canon", "category": "quests",
              "status": "draft", "version": "2.1.0", "last_updated": "2025-12-01T00:00:00+00:00",
              "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role":
              "concept_director", "contact": "concept@necp.game"}], "tags": ["rome",
              "pasta", "culinary"], "topics": ["craftsmanship", "food-culture"], "related_systems":
              ["narrative-service", "quest-service"], "related_documents": [{"id":
              "canon-region-europe-2020-2093", "relation": "references"}], "source":
              "shared/docs/knowledge/canon/lore/timeline-author/quests/europe/rome/2020-2029/quest-004-pasta-master.md",
              "visibility": "internal", "audience": ["concept", "narrative", "liveops"],
              "risk_level": "low"}'
        - column:
            name: source_file
            value: knowledge\canon\lore\timeline-author\quests\europe\rome\2020-2029\quest-004-pasta-master.yaml
