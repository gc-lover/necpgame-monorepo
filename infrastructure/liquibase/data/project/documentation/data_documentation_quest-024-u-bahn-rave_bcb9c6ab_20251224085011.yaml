databaseChangeLog:
- changeSet:
    id: documentation-quest-024-u-bahn-rave-bcb9c6ab
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '4009050839200485'
        - column:
            name: doc_id
            value: quest-berlin-2060-u-bahn-rave
        - column:
            name: title
            value: Берлин 2040-2060 — Рейв в U-Bahn
        - column:
            name: document_type
            value: canon
        - column:
            name: category
            value: timeline-quest
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 2.0.0
        - column:
            name: last_updated
            value: 2025-11-29 00:00:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: ''
        - column:
            name: owners
            value: '[{"role": "concept_director", "contact": "concept@necp.game"}]'
        - column:
            name: tags
            value:
            - berlin
            - techno
            - underground
        - column:
            name: topics
            value:
            - mobile_events
            - rave_culture
        - column:
            name: related_systems
            value:
            - gameplay-service
            - quest-service
            - character-service
            - economy-service
            - social-service
        - column:
            name: related_documents
            value: '[{"id": "github-issue-732", "title": "GitHub Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/732",
              "relation": "migrated_to", "migrated_at": "2025-11-23T00:16:00+00:00"}]'
        - column:
            name: source
            value: shared/docs/knowledge/canon/lore/timeline-author/quests/europe/berlin/2040-2060/quest-024-u-bahn-rave.md
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - concept
            - narrative
            - liveops
        - column:
            name: risk_level
            value: high
        - column:
            name: content
            value: '{"metadata": {"id": "quest-berlin-2060-u-bahn-rave", "title":
              "Берлин 2040-2060 — Рейв в U-Bahn", "document_type": "canon", "category":
              "timeline-quest", "status": "draft", "version": "2.0.0", "last_updated":
              "2025-11-29T00:00:00+00:00", "concept_approved": false, "concept_reviewed_at":
              "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}],
              "tags": ["berlin", "techno", "underground"], "topics": ["mobile_events",
              "rave_culture"], "related_systems": ["gameplay-service", "quest-service",
              "character-service", "economy-service", "social-service"], "related_documents":
              [{"id": "github-issue-732", "title": "GitHub Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/732",
              "relation": "migrated_to", "migrated_at": "2025-11-23T00:16:00+00:00"}],
              "source": "shared/docs/knowledge/canon/lore/timeline-author/quests/europe/berlin/2040-2060/quest-024-u-bahn-rave.md",
              "visibility": "internal", "audience": ["concept", "narrative", "liveops"],
              "risk_level": "high"}, "review": {"chain": [{"role": "concept_director",
              "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions":
              []}, "summary": {"problem": "Техно-линии Берлина не хватало мобильного
              события с высоким риском.", "goal": "Организовать рейв в движущемся
              поезде U-Bahn и сохранить секретность.", "essence": "Игрок арендует
              вагон, устанавливает звук и ведёт вечеринку по Ringbahn, уклоняясь от
              полиции.", "key_points": ["Мобильная вечеринка на жёлтых вагонах метро.",
              "Распространение информации через закрытые сети.", "Угроза рейда полиции
              создаёт напряжение."]}, "quest_definition": {"quest_type": "side", "level_min":
              5, "level_max": null, "requirements": {"required_quests": [], "required_flags":
              [], "required_reputation": {}, "required_items": []}, "objectives":
              [{"id": "negotiate_with_driver", "text": "Договориться с машинистом
              U-Bahn об аренде вагона", "type": "interact", "target": "u_bahn_driver",
              "count": 1, "optional": false}, {"id": "purchase_audio_equipment", "text":
              "Закупить звуковое оборудование для рейва", "type": "interact", "target":
              "audio_equipment_vendor", "count": 1, "optional": false}, {"id": "check_ringbahn_schedule",
              "text": "Проверить расписание Ringbahn для планирования маршрута", "type":
              "investigate", "target": "ringbahn_schedule", "count": 1, "optional":
              false}, {"id": "install_sound_system", "text": "Установить звуковую
              систему в вагоне и настроить баланс", "type": "interact", "target":
              "u_bahn_car_sound_setup", "count": 1, "optional": false}, {"id": "broadcast_encrypted_signal",
              "text": "Отправить зашифрованный сигнал участникам через закрытые каналы",
              "type": "interact", "target": "encrypted_broadcast_system", "count":
              1, "optional": false}, {"id": "manage_rave_event", "text": "Управлять
              музыкой и следить за полицией во время движения", "type": "interact",
              "target": "rave_event_management", "count": 1, "optional": false}, {"id":
              "escape_after_rave", "text": "Остановить вечеринку и скрыться после
              нескольких кругов", "type": "interact", "target": "escape_sequence",
              "count": 1, "optional": false}], "rewards": {"experience": 4000, "money":
              0, "items": [{"item_id": "title_u_bahn_maestro", "quantity": 1}], "reputation":
              {"Techno_Legend": 20}, "unlocks": ["unique_liveops_events"]}, "branches":
              [{"branch_id": "successful_stealth_escape", "description": "Успешный
              побег без обнаружения полицией", "consequences": {"skills": {"stealth":
              25}, "reputation": {"Techno_Legend": 10}, "unlocks": ["advanced_stealth_raves"]}},
              {"branch_id": "public_rave_success", "description": "Публичный успех
              рейва с большим количеством участников", "consequences": {"skills":
              {"social": 25}, "reputation": {"Techno_Legend": 15, "Authorities": -5},
              "unlocks": ["public_rave_events"]}}]}, "content": {"sections": [{"id":
              "setup", "title": "Подготовка операции", "body": "Игрок договаривается
              с машинистом, закупает оборудование и проверяет расписание Ringbahn.
              Требуется скрытая логистика.\n", "mechanics_links": ["mechanics/planning/mission-prep.yaml"],
              "assets": []}, {"id": "installation", "title": "Монтаж звука", "body":
              "В вагоне монтируются колонки и свет. Мини-игра проверяет баланс звука
              и энергопотребление.\n", "mechanics_links": ["mechanics/crafting/audio-setup.yaml"],
              "assets": []}, {"id": "broadcast", "title": "Сигнал участникам", "body":
              "Через закрытые каналы игрок публикует кодовое сообщение. Успешный PR
              увеличивает число гостей, но повышает риск обнаружения.\n", "mechanics_links":
              ["mechanics/social/encrypted-broadcast.yaml"], "assets": []}, {"id":
              "ride", "title": "Рейв на колесах", "body": "Во время движения игрок
              управляет музыкой и следит за полицией. Случайные проверки требуют быстрой
              реакции.\n", "mechanics_links": ["mechanics/liveops/event-management.yaml"],
              "assets": []}, {"id": "escape", "title": "Сход и прикрытие", "body":
              "После нескольких кругов нужно остановить вечерину и скрыться. Удачный
              побег сохраняет репутацию и избегает штрафов.\n", "mechanics_links":
              ["mechanics/stealth/escape-sequence.yaml"], "assets": []}, {"id": "rewards",
              "title": "Награды", "body": "- 4 000 XP, репутация «Техно-легенда» +20.\n-
              Титул «U-Bahn Maestro», шанс получить уникальные liveops события.\n",
              "mechanics_links": ["mechanics/progression/title-unlock.yaml"], "assets":
              []}]}, "appendix": {"glossary": [], "references": [], "decisions": []},
              "implementation": {"github_issue": 732, "needs_task": false, "queue_reference":
              [], "blockers": []}, "history": [{"version": "2.0.0", "date": "2025-11-29",
              "author": "content_writer", "changes": "Добавлена полная структура quest_definition
              с objectives, rewards и branches. Детализирован контент согласно концепции.
              Добавлены механики управления рейвом и побега."}, {"version": "1.0.0",
              "date": "2025-11-13", "author": "concept_team", "changes": "Квест «Рейв
              в U-Bahn» адаптирован под шаблон Concept Director."}], "validation":
              {"checksum": "", "schema_version": "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "quest-berlin-2060-u-bahn-rave", "title": "Берлин 2040-2060
              — Рейв в U-Bahn", "document_type": "canon", "category": "timeline-quest",
              "status": "draft", "version": "2.0.0", "last_updated": "2025-11-29T00:00:00+00:00",
              "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role":
              "concept_director", "contact": "concept@necp.game"}], "tags": ["berlin",
              "techno", "underground"], "topics": ["mobile_events", "rave_culture"],
              "related_systems": ["gameplay-service", "quest-service", "character-service",
              "economy-service", "social-service"], "related_documents": [{"id": "github-issue-732",
              "title": "GitHub Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/732",
              "relation": "migrated_to", "migrated_at": "2025-11-23T00:16:00+00:00"}],
              "source": "shared/docs/knowledge/canon/lore/timeline-author/quests/europe/berlin/2040-2060/quest-024-u-bahn-rave.md",
              "visibility": "internal", "audience": ["concept", "narrative", "liveops"],
              "risk_level": "high"}'
        - column:
            name: source_file
            value: knowledge\canon\lore\timeline-author\quests\europe\berlin\2040-2060\quest-024-u-bahn-rave.yaml
