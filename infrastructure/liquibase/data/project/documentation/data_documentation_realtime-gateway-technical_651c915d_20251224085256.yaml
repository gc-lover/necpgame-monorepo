databaseChangeLog:
- changeSet:
    id: documentation-realtime-gateway-technical-651c915d
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-782449570628164'
        - column:
            name: doc_id
            value: realtime-gateway-technical
        - column:
            name: title
            value: Архитектура Realtime Gateway System - Техническое задание
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-30 20:50:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[]'
        - column:
            name: tags
            value: []
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value: []
        - column:
            name: related_documents
            value: '[{"id": "realtime-gateway-core", "relation": "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: ''
        - column:
            name: audience
            value: []
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "realtime-gateway-technical", "title": "Архитектура
              Realtime Gateway System - Техническое задание", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.0.0", "last_updated":
              "2025-11-30T20:50:00+00:00", "github_issue": 390, "related_documents":
              [{"id": "realtime-gateway-core", "relation": "extends"}]}, "technical_specification":
              {"subtasks": [{"id": "realtime-gateway-manager", "title": "Реализация
              менеджера realtime коммуникации", "description": "Реализация Realtime
              Gateway Manager с управлением системой realtime коммуникации\nи интеграцией
              с другими компонентами.\n", "dependencies": [], "estimated_effort":
              "5 days"}, {"id": "zone-manager", "title": "Реализация менеджера зон",
              "description": "Реализация Zone Manager с управлением зонами и распределением
              нагрузки.\n", "dependencies": ["realtime-gateway-manager"], "estimated_effort":
              "5 days"}, {"id": "connection-manager", "title": "Реализация менеджера
              соединений", "description": "Реализация Connection Manager с управлением
              WebSocket соединениями.\n", "dependencies": ["realtime-gateway-manager"],
              "estimated_effort": "4 days"}, {"id": "message-router", "title": "Реализация
              маршрутизатора сообщений", "description": "Реализация Message Router
              с маршрутизацией сообщений по топикам.\n", "dependencies": ["realtime-gateway-manager"],
              "estimated_effort": "4 days"}, {"id": "state-synchronizer", "title":
              "Реализация синхронизатора состояния", "description": "Реализация State
              Synchronizer с синхронизацией состояния игры.\n", "dependencies": ["realtime-gateway-manager"],
              "estimated_effort": "5 days"}, {"id": "protocol-optimizer", "title":
              "Реализация оптимизатора протокола", "description": "Реализация Protocol
              Optimizer с оптимизацией протокола и компрессией.\n", "dependencies":
              ["realtime-gateway-manager"], "estimated_effort": "4 days"}, {"id":
              "performance-profile-manager", "title": "Реализация менеджера профилей
              производительности", "description": "Реализация Performance Profile
              Manager с управлением профилями производительности.\n", "dependencies":
              ["realtime-gateway-manager"], "estimated_effort": "3 days"}, {"id":
              "interest-manager", "title": "Реализация менеджера области интереса",
              "description": "Реализация Interest Manager с управлением областью интереса
              (interest management).\n", "dependencies": ["realtime-gateway-manager"],
              "estimated_effort": "4 days"}, {"id": "websocket-channels", "title":
              "Реализация WebSocket каналов", "description": "Реализация WebSocket
              каналов для realtime коммуникации.\n", "dependencies": ["connection-manager",
              "message-router"], "estimated_effort": "5 days"}, {"id": "event-bus-integration",
              "title": "Интеграция с Event Bus", "description": "Реализация публикации
              и подписки на события через Kafka\nдля всех компонентов Realtime Gateway
              System.\n", "dependencies": ["realtime-gateway-manager"], "estimated_effort":
              "2 days"}, {"id": "database-schema", "title": "Создание схемы БД", "description":
              "Создание таблиц БД для соединений, зон, участников и телеметрии\nс
              миграциями Liquibase.\n", "dependencies": [], "estimated_effort": "3
              days"}]}, "diagrams": {"component_diagram": "```mermaid\ngraph TB\n    Client[UE5
              Client] --> Gateway[API Gateway]\n\n    Gateway --> RealtimeGatewayService[Realtime
              Gateway Service<br/>8086]\n\n    RealtimeGatewayService --> RGM[Realtime
              Gateway Manager]\n    RealtimeGatewayService --> ZM[Zone Manager]\n    RealtimeGatewayService
              --> CM[Connection Manager]\n    RealtimeGatewayService --> MR[Message
              Router]\n    RealtimeGatewayService --> SS[State Synchronizer]\n    RealtimeGatewayService
              --> PO[Protocol Optimizer]\n    RealtimeGatewayService --> PPM[Performance
              Profile Manager]\n    RealtimeGatewayService --> IM[Interest Manager]\n    RealtimeGatewayService
              --> RAC[Realtime Analytics Collector]\n    RealtimeGatewayService -->
              RTC[Realtime Telemetry Collector]\n\n    RGM --> ZM\n    RGM --> CM\n    RGM
              --> MR\n    RGM --> SS\n    RGM --> PO\n    RGM --> PPM\n    RGM -->
              IM\n\n    RealtimeGatewayService --> WorldService[World Service]\n    RealtimeGatewayService
              --> GameplayService[Gameplay Service]\n    RealtimeGatewayService -->
              SocialService[Social Service]\n    RealtimeGatewayService --> CharacterService[Character
              Service]\n    RealtimeGatewayService --> AnalyticsService[Analytics
              Service]\n\n    RealtimeGatewayService --> EventBus[Event Bus<br/>Kafka]\n\n    RealtimeGatewayService
              --> DB[(Realtime Gateway DB)]\n    RealtimeGatewayService --> Redis[(Redis
              Cache)]\n\n    Client --> WSGame[WebSocket<br/>/ws/game]\n    WSGame
              --> RealtimeGatewayService\n```\n", "connection_flow_diagram": "```mermaid\nsequenceDiagram\n    participant
              Client as UE5 Client\n    participant Gateway as API Gateway\n    participant
              CM as Connection Manager\n    participant ZM as Zone Manager\n    participant
              IM as Interest Manager\n    participant RGM as Realtime Gateway Manager\n\n    Client->>Gateway:
              WebSocket connection\n    Gateway->>CM: Validate connection\n    CM->>CM:
              Authenticate player\n    CM->>CM: Register connection\n    CM->>ZM:
              Determine zone\n    ZM->>IM: Calculate interest area\n    CM->>RGM:
              Publish connection.opened\n    RGM->>Client: Send connection confirmation\n```\n",
              "state_sync_flow_diagram": "```mermaid\nsequenceDiagram\n    participant
              Client as UE5 Client\n    participant PO as Protocol Optimizer\n    participant
              SS as State Synchronizer\n    participant IM as Interest Manager\n    participant
              MR as Message Router\n    participant RGM as Realtime Gateway Manager\n\n    Client->>PO:
              Send state update\n    PO->>PO: Apply delta compression\n    PO->>SS:
              Validate update\n    SS->>SS: Apply changes\n    SS->>IM: Get players
              in interest area\n    IM->>MR: Route updates to clients\n    SS->>RGM:
              Publish state.synchronized\n    MR->>Client: Send state updates\n```\n"},
              "history": [{"version": "1.0.0", "date": "2025-11-30", "author": "Architect
              Agent", "changes": "Создана полная архитектура Realtime Gateway System:\n-
              Определены компоненты (Realtime Gateway Manager, Zone Manager, Connection
              Manager, Message Router, State Synchronizer, Protocol Optimizer, Performance
              Profile Manager, Interest Manager)\n- Описаны API endpoints (высокоуровнево)\n-
              Спроектированы потоки данных\n- Определена структура БД (realtime_connections,
              realtime_zones, realtime_zone_participants, realtime_telemetry)\n- Спроектирована
              система зон (zones)\n- Спроектирована оптимизация протокола\n- Спроектированы
              профили производительности\n- Добавлена детальная синхронизация данных
              (Event Sourcing, CQRS, Saga Pattern, Outbox Pattern)\n- Добавлена спецификация
              тикрейта для всех операций\n- Создано техническое задание\n- Разбито
              на подзадачи\n"}]}'
        - column:
            name: metadata
            value: '{"id": "realtime-gateway-technical", "title": "Архитектура Realtime
              Gateway System - Техническое задание", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.0.0", "last_updated":
              "2025-11-30T20:50:00+00:00", "github_issue": 390, "related_documents":
              [{"id": "realtime-gateway-core", "relation": "extends"}]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\realtime-gateway-technical.yaml
