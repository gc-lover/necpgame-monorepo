databaseChangeLog:
- changeSet:
    id: documentation-romance-attraction-algorithms-4ed4ad30
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '4766368992342545'
        - column:
            name: doc_id
            value: romance-attraction-algorithms
        - column:
            name: title
            value: Алгоритмы романтического влечения NECPGAME
        - column:
            name: document_type
            value: mechanics
        - column:
            name: category
            value: romance
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-12-20 06:45:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: ''
        - column:
            name: owners
            value: '[{"role": "concept_director", "contact": "concept@necp.game"}]'
        - column:
            name: tags
            value:
            - romance
            - attraction
            - algorithms
            - social
        - column:
            name: topics
            value:
            - relationship-mechanics
            - character-interaction
        - column:
            name: related_systems
            value:
            - social-service
            - character-service
            - romance-service
        - column:
            name: related_documents
            value: '[{"id": "npc-relationships-system-detailed", "relation": "complements"},
              {"id": "player-character-attributes", "relation": "references"}]'
        - column:
            name: source
            value: shared/docs/knowledge/mechanics/romance/romance-attraction-algorithms.md
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - concept
            - narrative
            - systems
        - column:
            name: risk_level
            value: medium
        - column:
            name: content
            value: '{"metadata": {"id": "romance-attraction-algorithms", "title":
              "Алгоритмы романтического влечения NECPGAME", "document_type": "mechanics",
              "category": "romance", "status": "draft", "version": "1.0.0", "last_updated":
              "2025-12-20T06:45:00+00:00", "concept_approved": false, "concept_reviewed_at":
              "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}],
              "tags": ["romance", "attraction", "algorithms", "social"], "topics":
              ["relationship-mechanics", "character-interaction"], "related_systems":
              ["social-service", "character-service", "romance-service"], "related_documents":
              [{"id": "npc-relationships-system-detailed", "relation": "complements"},
              {"id": "player-character-attributes", "relation": "references"}], "source":
              "shared/docs/knowledge/mechanics/romance/romance-attraction-algorithms.md",
              "visibility": "internal", "audience": ["concept", "narrative", "systems"],
              "risk_level": "medium"}, "review": {"chain": [{"role": "concept_director",
              "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions":
              []}, "summary": {"problem": "Алгоритмы определения романтического влечения
              не были формализованы и существовали только в виде концептуальных идей.",
              "goal": "Создать математические модели для расчета привлекательности
              между персонажами в киберпанк-мире.", "essence": "Документ определяет
              многофакторные алгоритмы влечения, учитывающие внешность, личность,
              социальный статус и игровые механики.", "key_points": ["Базовая привлекательность
              рассчитывается по 5 основным категориям", "Динамические модификаторы
              учитывают контекст и развитие отношений", "Киберпанк-тематика влияет
              на алгоритмы через импланты и модификации"]}, "content": {"sections":
              [{"id": "overview", "title": "Назначение системы", "body": "Система
              романтического влечения определяет первоначальную привлекательность
              между персонажами в Night City. Алгоритм работает как черный ящик, принимающий
              характеристики двух персонажей и возвращающий коэффициент привлекательности,
              который затем используется для определения вероятности успешного взаимодействия.\n",
              "mechanics_links": ["mechanics/romance/romance-relationship-progression.yaml"],
              "assets": []}, {"id": "base_attraction_formula", "title": "Базовая формула
              привлекательности", "body": "Привлекательность рассчитывается как взвешенная
              сумма по пяти основным категориям:\n\n```\nbaseAttraction = (appearanceWeight
              * appearanceScore) +\n                 (personalityWeight * personalityScore)
              +\n                 (statusWeight * statusScore) +\n                 (sharedInterestsWeight
              * sharedInterestsScore) +\n                 (cyberpunkFactorWeight *
              cyberpunkFactorScore)\n```\n\nКаждый вес лежит в диапазоне 0.1-0.3,
              сумма весов = 1.0.\n", "mechanics_links": ["mechanics/social/reputation-formulas.yaml"],
              "assets": []}, {"id": "appearance_calculation", "title": "Расчет внешней
              привлекательности", "body": "Внешность оценивается по шкале 1-100 и
              включает:\n\n**Физические характеристики (40%):**\n- Черты лица, фигура,
              стиль одежды\n- Кибернетические модификации внешности\n- Текущий уровень
              повреждений и имплантов\n\n**Груминг и стиль (30%):**\n- Качество одежды
              и аксессуаров\n- Уровень ухоженности\n- Соответствие моде Night City\n\n**Общее
              впечатление (30%):**\n- Осанка, манера поведения\n- Визуальные эффекты
              имплантов\n- Аура уверенности и харизмы\n", "mechanics_links": ["mechanics/economy/cosmetics-core-1797.yaml"],
              "assets": []}, {"id": "personality_matching", "title": "Сопоставление
              личностей", "body": "Личность рассчитывается по модели Большой Пятерки
              с киберпанк-модификаторами:\n\n**Базовые черты:**\n- Экстраверсия vs
              Интроверсия\n- Доброжелательность vs Антагонизм\n- Добросовестность
              vs Беспечность\n- Эмоциональная стабильность vs Нейротизм\n- Открытость
              опыту vs Консерватизм\n\n**Киберпанк-модификаторы:**\n- Нейроимпланты
              влияют на эмоциональную стабильность\n- Боевые импланты снижают доброжелательность\n-
              Хакерские импланты повышают открытость\n", "mechanics_links": ["mechanics/progression/attributes.yaml"],
              "assets": []}, {"id": "status_compatibility", "title": "Совместимость
              социального статуса", "body": "Статус рассчитывается как функция репутации,
              богатства и влияния:\n\n```\nstatusCompatibility = 1 - (abs(playerStatus
              - npcStatus) / maxStatus)\n```\n\n**Модификаторы статуса:**\n- Репутация
              в фракциях\n- Экономическое положение\n- Политическое влияние\n- Уровень
              кибернетических модификаций\n\n**Киберпанк-факторы:**\n- Корпоративные
              vs Уличные персонажи\n- Хакеры vs Нетраннеры\n- Мерсенери vs Фиксеры\n",
              "mechanics_links": ["mechanics/social/reputation-formulas.yaml"], "assets":
              []}, {"id": "shared_interests_algorithm", "title": "Алгоритм общих интересов",
              "body": "Общие интересы рассчитываются через пересечение векторов интересов:\n\n```\nsharedInterestsScore
              = (intersectionSize / unionSize) * compatibilityBonus\n```\n\n**Категории
              интересов:**\n- Профессиональные (хакерство, мерсенерство, нетраннинг)\n-
              Хобби (уличные гонки, киберспорт, музыка)\n- Жизненные ценности (свобода,
              власть, справедливость)\n- Киберпанк-культура (модификации, бренды,
              субкультуры)\n\n**Динамические интересы:**\n- Меняются в зависимости
              от квестов\n- Влияют на диалоговые ветки\n- Определяют совместные активности\n",
              "mechanics_links": ["mechanics/quests/quest-system.yaml"], "assets":
              []}, {"id": "cyberpunk_attraction_modifiers", "title": "Киберпанк-модификаторы
              влечения", "body": "Специфические для Night City факторы привлекательности:\n\n**Положительные
              модификаторы:**\n- Совместимые импланты (+15-25%)\n- Общие кибернетические
              бренды (+10-20%)\n- Участие в одних хромовых бандах (+5-15%)\n\n**Отрицательные
              модификаторы:**\n- Конкурирующие корпорации (-20-30%)\n- Противоположные
              субкультуры (-10-20%)\n- Враждебные импланты (-5-15%)\n\n**Нейтральные
              факторы:**\n- Уровень хрома (высокий уровень может быть как привлекательным,
              так и отталкивающим)\n- Тип модификаций (боевые vs социальные импланты)\n-
              Стиль кибернетических модификаций\n", "mechanics_links": ["mechanics/gear/gear-gravity-shift-implant-1785.yaml"],
              "assets": []}, {"id": "context_dependent_modifiers", "title": "Контекстуальные
              модификаторы", "body": "Привлекательность меняется в зависимости от
              ситуации:\n\n**Локационные модификаторы:**\n- Клубы и бары Night City
              (+20%)\n- Корпоративные зоны (-30%)\n- Уличные районы (нейтрально)\n\n**Ситуационные
              модификаторы:**\n- Во время миссий (+10-15%)\n- После совместного выживания
              (+25%)\n- Во время романтических событий (+50%)\n\n**Временные модификаторы:**\n-
              Ночное время (+15%)\n- Во время дождя/шума города (+10%)\n- После употребления
              веществ (переменный эффект)\n", "mechanics_links": ["mechanics/world/locations-night-city.yaml"],
              "assets": []}, {"id": "algorithm_implementation", "title": "Реализация
              алгоритма", "body": "Алгоритм реализован в romance-service с следующим
              API:\n\n**Входные параметры:**\n- playerCharacter: объект персонажа
              игрока\n- npcCharacter: объект NPC\n- context: объект контекста взаимодействия\n\n**Выходные
              значения:**\n- baseAttraction: число от 0 до 100\n- attractionBreakdown:
              объект с разбивкой по категориям\n- recommendedActions: массив предлагаемых
              взаимодействий\n\n**Производительность:**\n- Время расчета: < 10ms\n-
              Память: < 50KB на расчет\n- Кэширование результатов на 5 минут\n", "mechanics_links":
              ["mechanics/social/social-mechanics-overview.yaml"], "assets": []}]},
              "appendix": {"glossary": [{"term": "Хром", "definition": "Кибернетические
              импланты и модификации тела"}, {"term": "Нетраннинг", "definition":
              "Деятельность по очистке цифрового следа"}, {"term": "Фиксер", "definition":
              "Посредник, организующий сделки в подполье"}], "references": ["Cyberpunk
              2077: Phantom Liberty - Romance Mechanics", "Social Psychology Models
              for Digital Games"], "decisions": [{"date": "2025-12-20", "decision":
              "Использовать модель Большой Пятерки для личностных черт", "rationale":
              "Стандартизированная и научно обоснованная модель"}], "implementation":
              {"needs_task": true, "github_issue": 82, "queue_reference": ["shared/trackers/queues/concept/queued.yaml"],
              "blockers": []}}, "history": [{"version": "1.0.0", "date": "2025-12-20",
              "author": "Idea Writer Agent", "changes": "Создан базовый алгоритм романтического
              влечения для киберпанк-сеттинга"}], "validation": {"checksum": "", "schema_version":
              "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "romance-attraction-algorithms", "title": "Алгоритмы романтического
              влечения NECPGAME", "document_type": "mechanics", "category": "romance",
              "status": "draft", "version": "1.0.0", "last_updated": "2025-12-20T06:45:00+00:00",
              "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role":
              "concept_director", "contact": "concept@necp.game"}], "tags": ["romance",
              "attraction", "algorithms", "social"], "topics": ["relationship-mechanics",
              "character-interaction"], "related_systems": ["social-service", "character-service",
              "romance-service"], "related_documents": [{"id": "npc-relationships-system-detailed",
              "relation": "complements"}, {"id": "player-character-attributes", "relation":
              "references"}], "source": "shared/docs/knowledge/mechanics/romance/romance-attraction-algorithms.md",
              "visibility": "internal", "audience": ["concept", "narrative", "systems"],
              "risk_level": "medium"}'
        - column:
            name: source_file
            value: knowledge\mechanics\romance\romance-attraction-algorithms.yaml
