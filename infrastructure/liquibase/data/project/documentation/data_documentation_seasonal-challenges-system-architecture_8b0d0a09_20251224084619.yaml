databaseChangeLog:
- changeSet:
    id: documentation-seasonal-challenges-system-architecture-8b0d0a09
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '9001882672468614'
        - column:
            name: doc_id
            value: seasonal-challenges-system-architecture
        - column:
            name: title
            value: Архитектура системы сезонных испытаний
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-12-XXT00:00:00Z
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - gameplay
            - seasonal
            - challenges
            - liveops
            - hardcore
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value:
            - world-service
            - gameplay-service
            - economy-service
        - column:
            name: related_documents
            value: '[{"id": "seasonal-challenges-idea", "relation": "implements"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - liveops
            - api-designer
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "seasonal-challenges-system-architecture",
              "title": "Архитектура системы сезонных испытаний", "document_type":
              "architecture", "category": "systems", "status": "draft", "version":
              "1.0.0", "last_updated": "2025-12-XXT00:00:00Z", "owners": [{"role":
              "architect", "contact": "architect@necp.game"}], "tags": ["architecture",
              "gameplay", "seasonal", "challenges", "liveops", "hardcore"], "related_systems":
              ["world-service", "gameplay-service", "economy-service"], "related_documents":
              [{"id": "seasonal-challenges-idea", "relation": "implements"}], "github_issue":
              1500, "visibility": "internal", "audience": ["architect", "backend",
              "liveops", "api-designer"]}, "summary": {"problem": "Не хватает временного
              контента, который бы мотивировал игроков возвращаться в игру.\nСезонные
              события требуют уникальных механик и наград.\n", "goal": "Создать архитектуру
              сезонных испытаний, которая:\n- Предоставляет временный контент с уникальными
              механиками\n- Интегрируется с сезонной системой\n- Награждает игроков
              сезонными валютами и предметами\n- Поддерживает ротацию контента\n",
              "essence": "Система сезонных испытаний предоставляет временный контент
              с уникальными механиками,\nбоссами и наградами. Каждый сезон добавляет
              новые испытания и уникальные награды.\n"}, "architecture": {"overview":
              "Система сезонных испытаний состоит из следующих компонентов:\n1. Season
              Manager - управление сезонами\n2. Seasonal Challenge Manager - управление
              сезонными испытаниями\n3. Seasonal Affix Manager - управление сезонными
              аффиксами\n4. Seasonal Currency Manager - управление сезонной валютой\n5.
              Seasonal Reward Calculator - расчёт сезонных наград\n", "microservices":
              [{"name": "world-service", "port": 8085, "responsibility": "Управление
              сезонными событиями:\n- Управление сезонами\n- Ротация сезонного контента\n-
              Применение сезонных аффиксов\n", "components": [{"season-manager": "управление
              сезонами"}, {"seasonal-affix-manager": "управление сезонными аффиксами"}],
              "endpoints": ["GET /api/v1/seasons/current - текущий сезон", "GET /api/v1/seasons/{seasonId}/challenges
              - испытания сезона", "GET /api/v1/seasons/{seasonId}/rewards - награды
              сезона"], "websocket_channels": ["wss://api.necp.game/v1/world/seasons
              - события сезонов"], "events_published": [{"world.season.started": "начало
              сезона"}, {"world.season.ending": "окончание сезона"}, {"world.season.challenge.completed":
              "завершение испытания"}, {"world.season.currency.earned": "получение
              валюты"}]}, {"name": "gameplay-service", "port": 8083, "responsibility":
              "Обработка сезонных испытаний:\n- Управление сезонными испытаниями\n-
              Отслеживание прогресса\n- Начисление сезонной валюты\n", "components":
              [{"seasonal-challenge-manager": "управление испытаниями"}, {"seasonal-currency-manager":
              "управление валютой"}, {"seasonal-reward-calculator": "расчёт наград"}],
              "endpoints": ["GET /api/v1/gameplay/seasonal/challenges/active - активные
              испытания", "POST /api/v1/gameplay/seasonal/challenges/{id}/complete
              - завершение испытания", "GET /api/v1/gameplay/seasonal/currency/balance
              - баланс валюты", "POST /api/v1/gameplay/seasonal/currency/exchange
              - обмен валюты"]}], "data_flows": {"season_start_flow": "1. Season Manager
              запускает новый сезон\n2. Seasonal Challenge Manager активирует сезонные
              испытания\n3. Seasonal Affix Manager применяет сезонные аффиксы\n4.
              World Service публикует событие world.season.started\n5. Realtime Gateway
              отправляет уведомление всем игрокам\n", "challenge_completion_flow":
              "1. Игрок завершает сезонное испытание\n2. Seasonal Challenge Manager
              проверяет условия\n3. Seasonal Currency Manager начисляет сезонную валюту\n4.
              Seasonal Reward Calculator рассчитывает награды\n5. Economy Service
              выдает награды\n6. World Service публикует событие world.season.challenge.completed\n"},
              "database_structure": {"tables": [{"name": "seasons", "description":
              "Сезоны", "columns": [{"id": "UUID PRIMARY KEY"}, {"name": "VARCHAR(255)"},
              {"start_date": "TIMESTAMP"}, {"end_date": "TIMESTAMP"}, {"seasonal_affix_id":
              "UUID FOREIGN KEY (nullable)"}, {"status": "ENUM (upcoming, active,
              ended)"}]}, {"name": "seasonal_challenges", "description": "Сезонные
              испытания", "columns": [{"id": "UUID PRIMARY KEY"}, {"season_id": "UUID
              FOREIGN KEY"}, {"challenge_type": "VARCHAR(100)"}, {"content_id": "UUID
              FOREIGN KEY"}, {"conditions": "JSONB"}, {"rewards": "JSONB"}, {"created_at":
              "TIMESTAMP"}]}, {"name": "player_seasonal_currency", "description":
              "Сезонная валюта игроков", "columns": [{"id": "UUID PRIMARY KEY"}, {"player_id":
              "UUID FOREIGN KEY"}, {"season_id": "UUID FOREIGN KEY"}, {"currency_amount":
              "INTEGER"}, {"updated_at": "TIMESTAMP"}]}]}, "integrations": {"economy_service":
              "- Обмен сезонной валюты\n- Сезонные предметы\n- Сезонные награды\n"},
              "technical_tasks": {"phases": {"phase_1": {"name": "Season Manager и
              Seasonal Challenge Manager", "tasks": ["Реализация Season Manager",
              "Реализация Seasonal Challenge Manager", "Управление сезонами", "Управление
              испытаниями", "Интеграция с World Service"], "estimated_effort": "4
              days"}, "phase_2": {"name": "Seasonal Affix Manager и Currency Manager",
              "tasks": ["Реализация Seasonal Affix Manager", "Реализация Seasonal
              Currency Manager", "Применение сезонных аффиксов", "Управление сезонной
              валютой", "Интеграция с Economy Service"], "estimated_effort": "3 days"}}}}}'
        - column:
            name: metadata
            value: '{"id": "seasonal-challenges-system-architecture", "title": "Архитектура
              системы сезонных испытаний", "document_type": "architecture", "category":
              "systems", "status": "draft", "version": "1.0.0", "last_updated": "2025-12-XXT00:00:00Z",
              "owners": [{"role": "architect", "contact": "architect@necp.game"}],
              "tags": ["architecture", "gameplay", "seasonal", "challenges", "liveops",
              "hardcore"], "related_systems": ["world-service", "gameplay-service",
              "economy-service"], "related_documents": [{"id": "seasonal-challenges-idea",
              "relation": "implements"}], "github_issue": 1500, "visibility": "internal",
              "audience": ["architect", "backend", "liveops", "api-designer"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\seasonal-challenges-system-architecture.yaml
