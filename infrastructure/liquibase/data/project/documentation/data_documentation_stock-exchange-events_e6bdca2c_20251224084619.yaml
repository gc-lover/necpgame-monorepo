databaseChangeLog:
- changeSet:
    id: documentation-stock-exchange-events-e6bdca2c
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '-676940695165817'
        - column:
            name: doc_id
            value: stock-exchange-events
        - column:
            name: title
            value: Архитектура системы фондовой биржи - События и WebSocket
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-23 14:30:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - economy
            - stock-exchange
            - events
            - websocket
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value: []
        - column:
            name: related_documents
            value: '[{"id": "stock-exchange-core", "relation": "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - economy
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "stock-exchange-events", "title": "Архитектура
              системы фондовой биржи - События и WebSocket", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.0.0", "last_updated":
              "2025-11-23T14:30:00+00:00", "owners": [{"role": "architect", "contact":
              "architect@necp.game"}], "tags": ["architecture", "economy", "stock-exchange",
              "events", "websocket"], "related_documents": [{"id": "stock-exchange-core",
              "relation": "extends"}], "github_issue": 393, "visibility": "internal",
              "audience": ["architect", "backend", "economy"]}, "architecture": {"event_bus":
              {"topics": [{"name": "economy.stocks.order.created", "description":
              "Создан новый ордер", "schema": {"order_id": "UUID", "player_id": "UUID",
              "corporation_id": "UUID", "order_type": "string", "quantity": "number",
              "price": "number"}}, {"name": "economy.stocks.order.matched", "description":
              "Ордер исполнен", "schema": {"trade_id": "UUID", "buy_order_id": "UUID",
              "sell_order_id": "UUID", "price": "number", "quantity": "number"}},
              {"name": "economy.stocks.price.updated", "description": "Обновлена цена
              акции", "schema": {"corporation_id": "UUID", "symbol": "string", "old_price":
              "number", "new_price": "number", "change_percent": "number"}}, {"name":
              "economy.stocks.dividend.declared", "description": "Объявлены дивиденды",
              "schema": {"dividend_schedule_id": "UUID", "corporation_id": "UUID",
              "amount_per_share": "number", "payment_date": "timestamp"}}, {"name":
              "economy.stocks.dividend.paid", "description": "Выплачены дивиденды",
              "schema": {"dividend_payment_id": "UUID", "player_id": "UUID", "corporation_id":
              "UUID", "amount": "number"}}, {"name": "economy.stocks.index.rebalanced",
              "description": "Перебалансирован индекс", "schema": {"index_id": "UUID",
              "old_value": "number", "new_value": "number", "change_percent": "number"}},
              {"name": "economy.stocks.compliance.alert", "description": "Алерт о
              нарушении", "schema": {"alert_id": "UUID", "player_id": "UUID", "alert_type":
              "string", "severity": "string"}}]}, "websocket": {"channels": [{"name":
              "stocks.{symbol}.price", "description": "Realtime обновления цены акции"},
              {"name": "stocks.portfolio.{player_id}", "description": "Realtime обновления
              портфеля игрока"}, {"name": "stocks.market.summary", "description":
              "Общая сводка рынка"}, {"name": "stocks.indices.{index_symbol}", "description":
              "Realtime обновления индекса"}]}}}'
        - column:
            name: metadata
            value: '{"id": "stock-exchange-events", "title": "Архитектура системы
              фондовой биржи - События и WebSocket", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.0.0", "last_updated":
              "2025-11-23T14:30:00+00:00", "owners": [{"role": "architect", "contact":
              "architect@necp.game"}], "tags": ["architecture", "economy", "stock-exchange",
              "events", "websocket"], "related_documents": [{"id": "stock-exchange-core",
              "relation": "extends"}], "github_issue": 393, "visibility": "internal",
              "audience": ["architect", "backend", "economy"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\stock-exchange-events.yaml
