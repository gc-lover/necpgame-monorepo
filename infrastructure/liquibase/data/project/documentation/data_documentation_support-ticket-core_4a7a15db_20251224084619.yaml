databaseChangeLog:
- changeSet:
    id: documentation-support-ticket-core-4a7a15db
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '2592327635693277'
        - column:
            name: doc_id
            value: support-ticket-core
        - column:
            name: title
            value: Архитектура системы тикетов поддержки - Основная структура
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.1.0
        - column:
            name: last_updated
            value: 2025-11-30 20:35:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - operations
            - support
            - tickets
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value:
            - support-service
            - notification-service
            - accounts-service
            - analytics-service
        - column:
            name: related_documents
            value: '[{"id": "support-ticket-system", "relation": "implements"}, {"id":
              "support-ticket-mechanics", "relation": "extends"}, {"id": "support-ticket-data-flows",
              "relation": "extends"}, {"id": "support-ticket-database", "relation":
              "extends"}, {"id": "support-ticket-integrations", "relation": "extends"},
              {"id": "support-ticket-technical", "relation": "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - operations
            - support
            - api-designer
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "support-ticket-core", "title": "Архитектура
              системы тикетов поддержки - Основная структура", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.1.0", "last_updated":
              "2025-11-30T20:35:00+00:00", "owners": [{"role": "architect", "contact":
              "architect@necp.game"}], "tags": ["architecture", "operations", "support",
              "tickets"], "related_systems": ["support-service", "notification-service",
              "accounts-service", "analytics-service"], "related_documents": [{"id":
              "support-ticket-system", "relation": "implements"}, {"id": "support-ticket-mechanics",
              "relation": "extends"}, {"id": "support-ticket-data-flows", "relation":
              "extends"}, {"id": "support-ticket-database", "relation": "extends"},
              {"id": "support-ticket-integrations", "relation": "extends"}, {"id":
              "support-ticket-technical", "relation": "extends"}], "github_issue":
              334, "visibility": "internal", "audience": ["architect", "backend",
              "operations", "support", "api-designer"]}, "summary": {"problem": "Требуется
              спроектировать полную архитектуру системы тикетов поддержки, включающую:\n-
              Обработку обращений игроков\n- Контроль приоритетов и SLA\n- Очереди
              агентов\n- Автокатегоризацию\n- Уведомления\n- Мониторинг SLA\n", "goal":
              "Создать архитектурную схему системы тикетов поддержки с определением:\n-
              Компонентов для управления тикетами\n- REST, WebSocket и Event Bus контрактов\n-
              Интеграций с другими системами\n- Структуры БД\n- Технического задания
              для реализации\n", "essence": "Полная архитектура системы тикетов поддержки
              с поддержкой создания тикетов,\nавтокатегоризации, назначения приоритетов,
              очередей агентов и SLA мониторинга.\n"}, "architecture": {"overview":
              "Архитектура системы тикетов поддержки состоит из следующих компонентов:\n1.
              Support Ticket Manager - управление системой тикетов\n2. Ticket Creator
              - создание тикетов\n3. Auto Categorization Engine - автокатегоризация
              тикетов\n4. Priority Assignment Engine - назначение приоритетов\n5.
              Agent Queue Manager - управление очередями агентов\n6. SLA Monitor -
              мониторинг SLA\n7. Ticket Response Manager - управление ответами\n8.
              Ticket Status Manager - управление статусами\n9. Support Analytics Collector
              - сбор аналитики\n10. Support Telemetry Collector - сбор телеметрии\n",
              "microservices": [{"name": "support-service", "port": 8095, "responsibility":
              "Обработка системы тикетов поддержки:\n- Управление системой тикетов\n-
              Создание тикетов\n- Автокатегоризация тикетов\n- Назначение приоритетов\n-
              Управление очередями агентов\n- Мониторинг SLA\n- Управление ответами\n-
              Управление статусами\n- Сбор аналитики\n- Сбор телеметрии\n", "components":
              [{"support-ticket-manager": "управление системой тикетов"}, {"ticket-creator":
              "создание тикетов"}, {"auto-categorization-engine": "автокатегоризация
              тикетов"}, {"priority-assignment-engine": "назначение приоритетов"},
              {"agent-queue-manager": "управление очередями агентов"}, {"sla-monitor":
              "мониторинг SLA"}, {"ticket-response-manager": "управление ответами"},
              {"ticket-status-manager": "управление статусами"}, {"support-analytics-collector":
              "сбор аналитики"}, {"support-telemetry-collector": "сбор телеметрии"}],
              "endpoints": ["GET /api/v1/support/tickets - список тикетов", "GET /api/v1/support/tickets/{ticketId}
              - информация о тикете", "POST /api/v1/support/tickets - создание тикета",
              "PUT /api/v1/support/tickets/{ticketId} - обновление тикета", "DELETE
              /api/v1/support/tickets/{ticketId} - удаление тикета", "POST /api/v1/support/tickets/{ticketId}/assign
              - назначение агента", "POST /api/v1/support/tickets/{ticketId}/status
              - изменение статуса", "POST /api/v1/support/tickets/{ticketId}/priority
              - изменение приоритета", "GET /api/v1/support/tickets/{characterId}/my-tickets
              - тикеты персонажа", "GET /api/v1/support/tickets/{agentId}/assigned
              - назначенные тикеты агента", "GET /api/v1/support/tickets/queue - очередь
              тикетов", "POST /api/v1/support/tickets/{ticketId}/responses - добавление
              ответа", "GET /api/v1/support/tickets/{ticketId}/responses - список
              ответов", "POST /api/v1/support/tickets/{ticketId}/rate - оценка тикета",
              "GET /api/v1/support/tickets/{ticketId}/sla - информация о SLA", "GET
              /api/v1/support/tickets/stats - статистика тикетов"], "websocket_channels":
              ["wss://api.necp.game/v1/support/tickets/{ticketId} - поток обновлений
              тикета", "wss://api.necp.game/v1/support/agents/{agentId}/queue - поток
              очереди агента"], "events_published": [{"support.ticket.created": "создан
              тикет"}, {"support.ticket.updated": "обновлен тикет"}, {"support.ticket.assigned":
              "назначен агент"}, {"support.ticket.status-changed": "изменен статус"},
              {"support.ticket.priority-changed": "изменен приоритет"}, {"support.ticket.response-added":
              "добавлен ответ"}, {"support.ticket.rated": "оценен тикет"}, {"support.ticket.sla-warning":
              "предупреждение SLA"}, {"support.ticket.sla-breach": "нарушение SLA"}],
              "events_subscribed": [{"character.created": "создан персонаж"}, {"character.banned":
              "забанен персонаж"}, {"payment.failed": "неудачный платеж"}, {"bug.reported":
              "сообщен баг"}]}]}}'
        - column:
            name: metadata
            value: '{"id": "support-ticket-core", "title": "Архитектура системы тикетов
              поддержки - Основная структура", "document_type": "architecture", "category":
              "systems", "status": "draft", "version": "1.1.0", "last_updated": "2025-11-30T20:35:00+00:00",
              "owners": [{"role": "architect", "contact": "architect@necp.game"}],
              "tags": ["architecture", "operations", "support", "tickets"], "related_systems":
              ["support-service", "notification-service", "accounts-service", "analytics-service"],
              "related_documents": [{"id": "support-ticket-system", "relation": "implements"},
              {"id": "support-ticket-mechanics", "relation": "extends"}, {"id": "support-ticket-data-flows",
              "relation": "extends"}, {"id": "support-ticket-database", "relation":
              "extends"}, {"id": "support-ticket-integrations", "relation": "extends"},
              {"id": "support-ticket-technical", "relation": "extends"}], "github_issue":
              334, "visibility": "internal", "audience": ["architect", "backend",
              "operations", "support", "api-designer"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\support-ticket-core.yaml
