databaseChangeLog:
- changeSet:
    id: documentation-travel-events-system-architecture-d0fa9d5a
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '2689214808525071'
        - column:
            name: doc_id
            value: travel-events-system-architecture
        - column:
            name: title
            value: Архитектура системы travel-событий
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-23 23:50:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - world
            - events
            - travel
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value:
            - world-service
            - economy-service
            - security-service
            - quest-service
            - reputation-service
        - column:
            name: related_documents
            value: '[{"id": "world-events-travel-2020-2093", "relation": "implements"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - world
            - api-designer
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "travel-events-system-architecture", "title":
              "Архитектура системы travel-событий", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.0.0", "last_updated":
              "2025-11-23T23:50:00+00:00", "owners": [{"role": "architect", "contact":
              "architect@necp.game"}], "tags": ["architecture", "world", "events",
              "travel"], "related_systems": ["world-service", "economy-service", "security-service",
              "quest-service", "reputation-service"], "related_documents": [{"id":
              "world-events-travel-2020-2093", "relation": "implements"}], "github_issue":
              317, "visibility": "internal", "audience": ["architect", "backend",
              "world", "api-designer"]}, "summary": {"problem": "Требуется спроектировать
              архитектуру системы travel-событий для обработки событий,\nпроисходящих
              во время перемещения игроков по миру:\n- Генерация событий на основе
              вероятностей и cooldown\n- Обработка skill checks с различными DC\n-
              Выдача наград и применение штрафов\n- Интеграция с эпохами (2020-2093)\n-
              Управление репутацией и heat\n", "goal": "Создать архитектурную схему
              системы travel-событий с определением:\n- Компонентов для генерации
              и обработки событий\n- REST, WebSocket и Event Bus контрактов\n- Интеграций
              с другими системами\n- Структуры БД\n- Технического задания для реализации\n",
              "essence": "Архитектура системы travel-событий с поддержкой генерации
              событий по эпохам,\nобработки skill checks, выдачи наград и интеграции
              с мировыми системами.\n"}, "architecture": {"overview": "Архитектура
              системы travel-событий состоит из следующих компонентов:\n1. Travel
              Event Generator - генератор travel-событий\n2. Event Probability Calculator
              - калькулятор вероятностей событий\n3. Event Cooldown Manager - менеджер
              cooldown событий\n4. Skill Check Processor - обработчик skill checks\n5.
              Event Reward Distributor - распределитель наград\n6. Event Penalty Applier
              - применение штрафов\n7. Epoch Event Catalog - каталог событий по эпохам\n8.
              Event Trigger Manager - менеджер триггеров событий\n9. Event State Manager
              - менеджер состояния событий\n10. Travel Event Telemetry Collector -
              сбор телеметрии\n", "microservices": [{"name": "world-service", "port":
              8086, "responsibility": "Обработка travel-событий:\n- Генерация travel-событий\n-
              Расчет вероятностей событий\n- Управление cooldown\n- Обработка skill
              checks\n- Распределение наград\n- Применение штрафов\n- Управление каталогом
              событий по эпохам\n- Управление триггерами событий\n- Управление состоянием
              событий\n- Сбор телеметрии\n", "components": [{"travel-event-generator":
              "генератор travel-событий"}, {"event-probability-calculator": "калькулятор
              вероятностей"}, {"event-cooldown-manager": "менеджер cooldown"}, {"skill-check-processor":
              "обработчик skill checks"}, {"event-reward-distributor": "распределитель
              наград"}, {"event-penalty-applier": "применение штрафов"}, {"epoch-event-catalog":
              "каталог событий по эпохам"}, {"event-trigger-manager": "менеджер триггеров"},
              {"event-state-manager": "менеджер состояния"}, {"travel-event-telemetry-collector":
              "сбор телеметрии"}], "endpoints": ["POST /api/v1/world/travel-events/trigger
              - триггер travel-события", "GET /api/v1/world/travel-events/available
              - доступные события для зоны", "GET /api/v1/world/travel-events/{eventId}
              - информация о событии", "POST /api/v1/world/travel-events/{eventId}/start
              - начало события", "POST /api/v1/world/travel-events/{eventId}/skill-check
              - выполнение skill check", "POST /api/v1/world/travel-events/{eventId}/complete
              - завершение события", "POST /api/v1/world/travel-events/{eventId}/cancel
              - отмена события", "GET /api/v1/world/travel-events/epoch/{epochId}
              - события эпохи", "GET /api/v1/world/travel-events/cooldown/{characterId}
              - cooldown персонажа", "GET /api/v1/world/travel-events/probability
              - расчет вероятности события", "GET /api/v1/world/travel-events/rewards/{eventId}
              - награды события", "GET /api/v1/world/travel-events/penalties/{eventId}
              - штрафы события"], "websocket_channels": ["wss://api.necp.game/v1/world/travel-events/{characterId}
              - поток travel-событий персонажа"], "events_published": [{"world.travel-event.triggered":
              "travel-событие активировано"}, {"world.travel-event.started": "travel-событие
              начато"}, {"world.travel-event.skill-check-performed": "выполнен skill
              check"}, {"world.travel-event.completed": "travel-событие завершено"},
              {"world.travel-event.cancelled": "travel-событие отменено"}, {"world.travel-event.reward-distributed":
              "награда распределена"}, {"world.travel-event.penalty-applied": "штраф
              применен"}, {"world.travel-event.cooldown-updated": "обновлен cooldown"}],
              "events_subscribed": [{"character.moved": "перемещение персонажа"},
              {"character.zone-entered": "вход в зону"}, {"character.zone-exited":
              "выход из зоны"}, {"quest.completed": "завершение квеста"}, {"reputation.changed":
              "изменение репутации"}, {"economy.transaction": "транзакция в экономике"},
              {"world.epoch-changed": "изменение эпохи"}]}], "event_types": [{"name":
              "ambush", "description": "Бандитские засады", "epochs": ["2020-2030",
              "2030-2045", "2045-2060", "2060-2077", 2077, "2078-2093"], "base_probability":
              0.15, "cooldown_hours": 6, "skill_checks": [{"skill": "Combat", "dc":
              20}, {"skill": "Stealth", "dc": 18}], "rewards": [{"type": "loot", "rarity":
              "common", "probability": 0.6}, {"type": "loot", "rarity": "rare", "probability":
              0.3}, {"type": "loot", "rarity": "epic", "probability": 0.1}, {"type":
              "eddies", "min": 50, "max": 200}], "penalties": [{"type": "damage",
              "severity": "medium"}, {"type": "heat", "amount": 5}]}, {"name": "political_rally",
              "description": "Политические митинги", "epochs": ["2020-2030", "2030-2045",
              "2045-2060"], "base_probability": 0.12, "cooldown_hours": 8, "skill_checks":
              [{"skill": "Social", "dc": 18}, {"skill": "Politician", "dc": 20}],
              "rewards": [{"type": "reputation", "faction": "Citizens", "amount":
              3}, {"type": "eddies", "min": 100, "max": 300}], "penalties": [{"type":
              "heat", "amount": 10}]}, {"name": "implant_market", "description": "Рынки
              имплантов", "epochs": ["2020-2030", "2030-2045"], "base_probability":
              0.18, "cooldown_hours": 4, "skill_checks": [{"skill": "Trader", "dc":
              18}, {"skill": "Medtech", "dc": 16}], "rewards": [{"type": "implant",
              "rarity": "common", "probability": 0.5}, {"type": "eddies", "min": 200,
              "max": 500}], "penalties": [{"type": "heat", "amount": 3}]}, {"name":
              "infrastructure_accident", "description": "Аварии инфраструктуры", "epochs":
              ["2020-2030", "2030-2045", "2045-2060"], "base_probability": 0.1, "cooldown_hours":
              12, "skill_checks": [{"skill": "Technology", "dc": 20}, {"skill": "Medicine",
              "dc": 18}], "rewards": [{"type": "reputation", "faction": "Citizens",
              "amount": 5}, {"type": "eddies", "min": 150, "max": 400}], "penalties":
              [{"type": "damage", "severity": "high"}]}, {"name": "nomad_assistance",
              "description": "Помощь номадам", "epochs": ["2020-2030", "2030-2045",
              "2045-2060"], "base_probability": 0.14, "cooldown_hours": 6, "skill_checks":
              [{"skill": "Social", "dc": 16}, {"skill": "Combat", "dc": 18}], "rewards":
              [{"type": "reputation", "faction": "Nomads", "amount": 4}, {"type":
              "loot", "rarity": "rare", "probability": 0.4}], "penalties": [{"type":
              "heat", "amount": 2}]}, {"name": "corporate_intrigue", "description":
              "Корпоративные интриги", "epochs": ["2020-2030", "2030-2045", "2045-2060",
              "2060-2077"], "base_probability": 0.12, "cooldown_hours": 10, "skill_checks":
              [{"skill": "Social", "dc": 20}, {"skill": "Stealth", "dc": 18}], "rewards":
              [{"type": "reputation", "faction": "Corpos", "amount": 3}, {"type":
              "eddies", "min": 300, "max": 800}], "penalties": [{"type": "heat", "amount":
              15}]}, {"name": "network_failure", "description": "Сетевые сбои", "epochs":
              ["2020-2030", "2030-2045"], "base_probability": 0.15, "cooldown_hours":
              8, "skill_checks": [{"skill": "Hacking", "dc": 18}, {"skill": "Technology",
              "dc": 16}], "rewards": [{"type": "reputation", "faction": "NetWatch",
              "amount": 2}, {"type": "loot", "rarity": "rare", "probability": 0.3}],
              "penalties": [{"type": "heat", "amount": 8}]}, {"name": "dao_voting",
              "description": "DAO-голосования", "epochs": ["2030-2045", "2045-2060"],
              "base_probability": 0.2, "cooldown_hours": 4, "skill_checks": [{"skill":
              "Social", "dc": 20}, {"skill": "Legal", "dc": 18}], "rewards": [{"type":
              "reputation", "faction": "DAO", "amount": 3}, {"type": "eddies", "min":
              100, "max": 300}], "penalties": [{"type": "reputation", "faction": "DAO",
              "amount": -2}]}, {"name": "gray_market", "description": "Серые рынки",
              "epochs": ["2030-2045", "2045-2060", "2060-2077"], "base_probability":
              0.18, "cooldown_hours": 4, "skill_checks": [{"skill": "Trader", "dc":
              18}, {"skill": "Stealth", "dc": 18}], "rewards": [{"type": "loot", "rarity":
              "rare", "probability": 0.5}, {"type": "eddies", "min": 200, "max": 500}],
              "penalties": [{"type": "heat", "amount": 10}, {"type": "confiscation",
              "probability": 0.3}]}, {"name": "brain_dance_boom", "description": "Брейндэнс-бумы",
              "epochs": ["2045-2060", "2060-2077"], "base_probability": 0.12, "cooldown_hours":
              6, "skill_checks": [{"skill": "Social", "dc": 16}, {"skill": "Technology",
              "dc": 18}], "rewards": [{"type": "reputation", "faction": "Media", "amount":
              2}, {"type": "eddies", "min": 150, "max": 400}], "penalties": [{"type":
              "heat", "amount": 5}]}, {"name": "concordat_inspection", "description":
              "Конкордатные инспекции", "epochs": ["2060-2077", 2077], "base_probability":
              0.1, "cooldown_hours": 12, "skill_checks": [{"skill": "Legal", "dc":
              20}, {"skill": "Social", "dc": 18}], "rewards": [{"type": "reputation",
              "faction": "Corpos", "amount": 4}, {"type": "eddies", "min": 300, "max":
              700}], "penalties": [{"type": "heat", "amount": 20}]}, {"name": "league_info_war",
              "description": "Инфовойны лиг", "epochs": ["2078-2093"], "base_probability":
              0.14, "cooldown_hours": 8, "skill_checks": [{"skill": "Hacking", "dc":
              20}, {"skill": "Social", "dc": 18}], "rewards": [{"type": "reputation",
              "faction": "Media", "amount": 3}, {"type": "loot", "rarity": "epic",
              "probability": 0.2}], "penalties": [{"type": "heat", "amount": 12}]},
              {"name": "export_license", "description": "Экспортные лицензии", "epochs":
              ["2078-2093"], "base_probability": 0.16, "cooldown_hours": 6, "skill_checks":
              [{"skill": "Legal", "dc": 18}, {"skill": "Trader", "dc": 20}]}]}}'
        - column:
            name: metadata
            value: '{"id": "travel-events-system-architecture", "title": "Архитектура
              системы travel-событий", "document_type": "architecture", "category":
              "systems", "status": "draft", "version": "1.0.0", "last_updated": "2025-11-23T23:50:00+00:00",
              "owners": [{"role": "architect", "contact": "architect@necp.game"}],
              "tags": ["architecture", "world", "events", "travel"], "related_systems":
              ["world-service", "economy-service", "security-service", "quest-service",
              "reputation-service"], "related_documents": [{"id": "world-events-travel-2020-2093",
              "relation": "implements"}], "github_issue": 317, "visibility": "internal",
              "audience": ["architect", "backend", "world", "api-designer"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\travel-events-system-architecture.yaml
