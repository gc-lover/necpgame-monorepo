databaseChangeLog:
- changeSet:
    id: documentation-vision-implementation-architecture-45fec405
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '6688164971924821'
        - column:
            name: doc_id
            value: vision-implementation-architecture
        - column:
            name: title
            value: Архитектура реализации видения и философии дизайна
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-23 15:00:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - vision
            - design-philosophy
            - core-pillars
            - implementation
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value:
            - world-service
            - narrative-service
            - social-service
            - economy-service
            - gameplay-service
            - progression-service
        - column:
            name: related_documents
            value: '[{"id": "canon-vision-vision", "relation": "implements"}, {"id":
              "core-pillars", "relation": "implements"}, {"id": "canon-vision-design-philosophy",
              "relation": "implements"}, {"id": "canon-vision-core-pillars-implementation",
              "relation": "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - narrative
            - vision
            - api-designer
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "vision-implementation-architecture", "title":
              "Архитектура реализации видения и философии дизайна", "document_type":
              "architecture", "category": "systems", "status": "draft", "version":
              "1.0.0", "last_updated": "2025-11-23T15:00:00+00:00", "owners": [{"role":
              "architect", "contact": "architect@necp.game"}], "tags": ["architecture",
              "vision", "design-philosophy", "core-pillars", "implementation"], "related_systems":
              ["world-service", "narrative-service", "social-service", "economy-service",
              "gameplay-service", "progression-service"], "related_documents": [{"id":
              "canon-vision-vision", "relation": "implements"}, {"id": "core-pillars",
              "relation": "implements"}, {"id": "canon-vision-design-philosophy",
              "relation": "implements"}, {"id": "canon-vision-core-pillars-implementation",
              "relation": "extends"}], "github_issue": 110, "visibility": "internal",
              "audience": ["architect", "backend", "narrative", "vision", "api-designer"]},
              "summary": {"problem": "Требуется спроектировать архитектуру систем,
              реализующих видение и философию дизайна NECPGAME:\n- Живой мир, который
              живет сам по себе\n- Выборы с реальными последствиями\n- Глобальная
              социальная иерархия\n- Полная свобода действий\n- Хардкорность и глубокая
              сложность\n- Киберпанк стилистика\n", "goal": "Создать архитектурную
              схему систем, реализующих видение игры с определением:\n- Компонентов
              для каждого столпа\n- Интеграций между системами\n- Метрик и KPI для
              измерения успеха\n- API endpoints (высокоуровнево)\n- Технического задания
              для реализации\n", "essence": "Архитектура систем, обеспечивающих реализацию
              видения NECPGAME через технические компоненты,\nподдерживающие живой
              мир, выборы, социальную иерархию, свободу, хардкорность и киберпанк
              стиль.\n"}, "architecture": {"overview": "Архитектура реализации видения
              состоит из систем, поддерживающих каждый из основных столпов:\n1. World
              Simulation System - живой мир\n2. Choice & Consequence System - выборы
              и последствия\n3. Social Hierarchy System - социальная иерархия\n4.
              Freedom & Progression System - свобода действий\n5. Hardcore Systems
              - хардкорность\n6. Cyberpunk Style System - киберпанк стилистика\n",
              "core_pillars_implementation": [{"name": "living_world", "title": "Мир,
              который живет сам по себе", "description": "Система автономной симуляции
              мира, где события происходят независимо от игроков.\n", "components":
              [{"world-simulation-engine": "движок симуляции мира"}, {"autonomous-event-generator":
              "генератор автономных событий"}, {"faction-ai-system": "AI система для
              фракций"}, {"economy-simulation": "симуляция экономики"}, {"timeline-manager":
              "управление временными линиями"}, {"league-system": "система лиг"}],
              "metrics": [{"autonomous_events_percentage": ">= 70%"}, {"faction_response_time":
              "1-24 часа"}, {"world_evolution_rate": "измеряется через лиги"}, {"economic_dynamic_rate":
              "измеряется через цены"}], "endpoints": ["GET /api/v1/world/simulation/state
              - состояние симуляции", "GET /api/v1/world/events/autonomous - автономные
              события", "GET /api/v1/world/factions/status - статус фракций", "GET
              /api/v1/world/economy/trends - тренды экономики", "GET /api/v1/world/timeline/current
              - текущая временная линия", "GET /api/v1/world/league/current - текущая
              лига"]}, {"name": "choices_consequences", "title": "Каждый выбор имеет
              реальные последствия", "description": "Система отслеживания выборов
              игрока и применения необратимых последствий.\n", "components": [{"choice-tracker":
              "отслеживание выборов"}, {"consequence-engine": "движок последствий"},
              {"content-lock-manager": "управление блокировкой контента"}, {"reputation-impact-system":
              "система влияния на репутацию"}, {"cascade-effect-processor": "обработка
              каскадных эффектов"}, {"branching-quest-manager": "управление ветвлением
              квестов"}], "metrics": [{"quests_with_branching": ">= 80%"}, {"irreversible_decisions":
              ">= 90%"}, {"cascade_effects": ">= 60%"}, {"content_unlock_rate": "измеряется
              через доступность"}], "endpoints": ["POST /api/v1/narrative/choices/record
              - запись выбора", "GET /api/v1/narrative/choices/history - история выборов",
              "GET /api/v1/narrative/consequences/{choiceId} - последствия выбора",
              "POST /api/v1/narrative/content/unlock - разблокировка контента", "GET
              /api/v1/narrative/branches/available - доступные ветки", "POST /api/v1/narrative/reputation/update
              - обновление репутации"]}, {"name": "social_hierarchy", "title": "Глобальная
              иерархическая социальная структура", "description": "Система многоуровневой
              социальной иерархии от игрока до глобальной политики.\n", "components":
              [{"player-relationship-manager": "управление отношениями игроков"},
              {"clan-system": "система кланов"}, {"faction-system": "система фракций"},
              {"corporation-system": "система корпораций"}, {"global-politics-engine":
              "движок глобальной политики"}, {"hierarchy-mobility-tracker": "отслеживание
              мобильности в иерархии"}], "metrics": [{"players_in_organizations":
              ">= 80%"}, {"global_events_frequency": "регулярные события"}, {"vertical_mobility_rate":
              "измеряется через продвижение"}, {"cross_level_influence": "измеряется
              через влияние"}], "endpoints": ["GET /api/v1/social/hierarchy/player
              - иерархия игрока", "GET /api/v1/social/clans/list - список кланов",
              "POST /api/v1/social/clans/create - создание клана", "GET /api/v1/social/factions/list
              - список фракций", "POST /api/v1/social/factions/join - присоединение
              к фракции", "GET /api/v1/social/corporations/list - список корпораций",
              "GET /api/v1/social/politics/global - глобальная политика", "GET /api/v1/social/hierarchy/mobility
              - мобильность в иерархии"]}, {"name": "freedom_progression", "title":
              "Полная свобода действий и развития", "description": "Система гибких
              билдов, множественных путей решения и открытого мира.\n", "components":
              [{"build-system": "система билдов"}, {"path-finder": "поиск путей решения"},
              {"content-access-manager": "управление доступом к контенту"}, {"style-diversity-tracker":
              "отслеживание разнообразия стилей"}, {"freedom-metrics-collector": "сбор
              метрик свободы"}], "metrics": [{"unique_builds_percentage": ">= 70%"},
              {"missions_multiple_solutions": ">= 90%"}, {"content_accessibility":
              "измеряется через доступность"}, {"style_diversity_index": "измеряется
              через разнообразие"}], "endpoints": ["GET /api/v1/progression/builds/list
              - список билдов", "POST /api/v1/progression/builds/create - создание
              билда", "GET /api/v1/progression/paths/available - доступные пути",
              "GET /api/v1/progression/content/accessible - доступный контент", "GET
              /api/v1/progression/styles/diversity - разнообразие стилей"]}, {"name":
              "hardcore_systems", "title": "Хардкорность и глубокая сложность систем",
              "description": "Системы с высокой сложностью, ценой ошибок и системой
              риск-награда.\n", "components": [{"complexity-manager": "управление
              сложностью"}, {"risk-reward-calculator": "расчет риск-награда"}, {"penalty-system":
              "система штрафов"}, {"mastery-tracker": "отслеживание мастерства"},
              {"depth-analyzer": "анализ глубины систем"}], "metrics": [{"systems_requiring_mastery":
              ">= 70%"}, {"meaningful_decisions_rate": ">= 70%"}, {"error_cost_index":
              "измеряется через стоимость ошибок"}, {"mastery_curve": "измеряется
              через кривую обучения"}], "endpoints": ["GET /api/v1/gameplay/complexity/level
              - уровень сложности", "POST /api/v1/gameplay/risk-reward/calculate -
              расчет риск-награда", "POST /api/v1/gameplay/penalties/apply - применение
              штрафов", "GET /api/v1/gameplay/mastery/progress - прогресс мастерства",
              "GET /api/v1/gameplay/depth/analysis - анализ глубины"]}, {"name": "cyberpunk_style",
              "title": "Киберпанк стилистика как основа", "description": "Система
              обеспечения киберпанк эстетики во всех элементах игры.\n", "components":
              [{"style-validator": "валидатор стиля"}, {"visual-consistency-checker":
              "проверка визуальной согласованности"}, {"lore-integration-manager":
              "управление интеграцией с лором"}, {"theme-enforcer": "обеспечение тематики"},
              {"aesthetic-metrics-collector": "сбор метрик эстетики"}], "metrics":
              [{"visual_consistency": "100%"}, {"lore_integration": ">= 90%"}, {"theme_adherence":
              "измеряется через соответствие"}, {"aesthetic_quality": "измеряется
              через качество"}], "endpoints": ["GET /api/v1/style/validate/{elementId}
              - валидация стиля", "GET /api/v1/style/consistency/check - проверка
              согласованности", "GET /api/v1/style/lore/integration - интеграция с
              лором", "GET /api/v1/style/theme/compliance - соответствие тематике"]}],
              "integrations": {"world_to_narrative": "Автономные события мира влияют
              на доступные квесты и сюжетные линии.\nWorld Service публикует события,
              Narrative Service обрабатывает их для генерации контента.\n", "narrative_to_social":
              "Выборы в квестах влияют на репутацию и социальную иерархию.\nNarrative
              Service публикует события выборов, Social Service обновляет репутацию.\n",
              "social_to_economy": "Социальная иерархия влияет на экономические возможности.\nSocial
              Service предоставляет данные о статусе, Economy Service применяет модификаторы.\n",
              "progression_to_gameplay": "Свобода билдов влияет на игровой процесс.\nProgression
              Service управляет билдами, Gameplay Service применяет их в бою.\n",
              "gameplay_to_world": "Действия игроков влияют на состояние мира.\nGameplay
              Service публикует события действий, World Service обновляет состояние.\n"},
              "data_flows": {"autonomous_world_event_flow": "1. World Simulation Engine
              генерирует автономное событие\n2. Event сохраняется в БД и публикуется
              в Event Bus\n3. Faction AI System обрабатывает событие и определяет
              реакцию\n4. Economy Simulation обновляет экономические показатели\n5.
              Timeline Manager обновляет временную линию\n6. Realtime Gateway отправляет
              уведомления игрокам\n7. Narrative Service создает квесты на основе события\n",
              "choice_consequence_flow": "1. Игрок делает выбор в квесте\n2. Choice
              Tracker записывает выбор\n3. Consequence Engine определяет последствия\n4.
              Content Lock Manager блокирует/разблокирует контент\n5. Reputation Impact
              System обновляет репутацию\n6. Cascade Effect Processor обрабатывает
              каскадные эффекты\n7. Branching Quest Manager обновляет доступные ветки\n8.
              События публикуются в Event Bus для других систем\n", "social_hierarchy_flow":
              "1. Игрок присоединяется к клану\n2. Clan System обновляет членство\n3.
              Faction System проверяет влияние на фракцию\n4. Corporation System обновляет
              корпоративные связи\n5. Global Politics Engine пересчитывает глобальную
              политику\n6. Hierarchy Mobility Tracker обновляет позицию игрока\n7.
              Economy Service применяет экономические модификаторы\n"}, "database_structure":
              {"tables": [{"name": "world_simulation_state", "description": "Состояние
              симуляции мира", "columns": [{"id": "UUID PRIMARY KEY"}, {"current_timeline":
              "INTEGER"}, {"current_league": "VARCHAR(100)"}, {"simulation_tick":
              "BIGINT"}, {"last_event_time": "TIMESTAMP"}, {"world_state": "JSONB"}]},
              {"name": "autonomous_events", "description": "Автономные события мира",
              "columns": [{"id": "UUID PRIMARY KEY"}, {"event_type": "VARCHAR(100)"},
              {"generated_at": "TIMESTAMP"}, {"processed": "BOOLEAN"}, {"impact_data":
              "JSONB"}]}, {"name": "player_choices", "description": "Выборы игроков",
              "columns": [{"id": "UUID PRIMARY KEY"}, {"player_id": "UUID FOREIGN
              KEY"}, {"quest_id": "UUID FOREIGN KEY"}, {"choice_id": "VARCHAR(255)"},
              {"timestamp": "TIMESTAMP"}, {"consequences_applied": "BOOLEAN"}]}, {"name":
              "choice_consequences", "description": "Последствия выборов", "columns":
              [{"id": "UUID PRIMARY KEY"}, {"choice_id": "UUID FOREIGN KEY"}, {"consequence_type":
              "VARCHAR(100)"}, {"impact_data": "JSONB"}, {"applied": "BOOLEAN"}]},
              {"name": "content_locks", "description": "Блокировки контента", "columns":
              [{"id": "UUID PRIMARY KEY"}, {"player_id": "UUID FOREIGN KEY"}, {"content_id":
              "UUID"}, {"lock_type": "VARCHAR(100)"}, {"reason": "TEXT"}, {"locked_at":
              "TIMESTAMP"}]}, {"name": "social_hierarchy", "description": "Социальная
              иерархия", "columns": [{"id": "UUID PRIMARY KEY"}, {"player_id": "UUID
              FOREIGN KEY"}, {"clan_id": "UUID FOREIGN KEY (nullable)"}, {"faction_id":
              "UUID FOREIGN KEY (nullable)"}, {"corporation_id": "UUID FOREIGN KEY
              (nullable)"}, {"hierarchy_level": "INTEGER"}, {"influence_score": "INTEGER"}]},
              {"name": "player_builds", "description": "Билды игроков", "columns":
              [{"id": "UUID PRIMARY KEY"}, {"player_id": "UUID FOREIGN KEY"}, {"build_name":
              "VARCHAR(255)"}, {"build_data": "JSONB"}, {"is_active": "BOOLEAN"},
              {"created_at": "TIMESTAMP"}]}, {"name": "style_validation", "description":
              "Валидация стиля", "columns": [{"id": "UUID PRIMARY KEY"}, {"element_id":
              "UUID"}, {"element_type": "VARCHAR(100)"}, {"style_score": "DECIMAL(3,2)"},
              {"validation_result": "JSONB"}, {"validated_at": "TIMESTAMP"}]}]}},
              "technical_specification": {"subtasks": [{"id": "world-simulation-engine",
              "title": "Реализация движка симуляции мира", "description": "Реализация
              World Simulation Engine с автономной генерацией событий,\nAI для фракций
              и симуляцией экономики.\n", "dependencies": [], "estimated_effort":
              "7 days"}, {"id": "choice-consequence-system", "title": "Реализация
              системы выборов и последствий", "description": "Реализация Choice Tracker,
              Consequence Engine и Content Lock Manager\nдля отслеживания и применения
              последствий выборов.\n", "dependencies": [], "estimated_effort": "6
              days"}, {"id": "social-hierarchy-system", "title": "Реализация системы
              социальной иерархии", "description": "Реализация многоуровневой социальной
              иерархии от игрока до глобальной политики\nс поддержкой кланов, фракций
              и корпораций.\n", "dependencies": [], "estimated_effort": "8 days"},
              {"id": "freedom-progression-system", "title": "Реализация системы свободы
              и прогрессии", "description": "Реализация Build System, Path Finder
              и Content Access Manager\nдля обеспечения свободы действий игроков.\n",
              "dependencies": [], "estimated_effort": "5 days"}, {"id": "hardcore-systems",
              "title": "Реализация хардкорных систем", "description": "Реализация
              Complexity Manager, Risk-Reward Calculator и Penalty System\nдля обеспечения
              хардкорного опыта.\n", "dependencies": [], "estimated_effort": "5 days"},
              {"id": "cyberpunk-style-system", "title": "Реализация системы киберпанк
              стилистики", "description": "Реализация Style Validator, Visual Consistency
              Checker и Lore Integration Manager\nдля обеспечения киберпанк эстетики.\n",
              "dependencies": [], "estimated_effort": "4 days"}, {"id": "metrics-collection",
              "title": "Реализация сбора метрик", "description": "Реализация системы
              сбора метрик для каждого столпа с интеграцией\nв аналитическую систему.\n",
              "dependencies": ["world-simulation-engine", "choice-consequence-system",
              "social-hierarchy-system"], "estimated_effort": "4 days"}, {"id": "integration-layer",
              "title": "Реализация слоя интеграций", "description": "Реализация интеграций
              между системами через Event Bus\nи синхронные вызовы.\n", "dependencies":
              ["world-simulation-engine", "choice-consequence-system", "social-hierarchy-system"],
              "estimated_effort": "3 days"}, {"id": "database-schema", "title": "Создание
              схемы БД", "description": "Создание таблиц БД для всех систем реализации
              видения\nс миграциями Liquibase.\n", "dependencies": [], "estimated_effort":
              "2 days"}, {"id": "api-endpoints", "title": "Реализация API endpoints",
              "description": "Реализация всех API endpoints для систем реализации
              видения\nс документацией OpenAPI.\n", "dependencies": ["world-simulation-engine",
              "choice-consequence-system", "social-hierarchy-system"], "estimated_effort":
              "4 days"}]}, "diagrams": {"pillars_architecture_diagram": "```mermaid\ngraph
              TB\n    subgraph \"Living World Pillar\"\n        WSE[World Simulation
              Engine]\n        AEG[Autonomous Event Generator]\n        FAIS[Faction
              AI System]\n        ES[Economy Simulation]\n        TM[Timeline Manager]\n        LS[League
              System]\n    end\n\n    subgraph \"Choices & Consequences Pillar\"\n        CT[Choice
              Tracker]\n        CE[Consequence Engine]\n        CLM[Content Lock Manager]\n        RIS[Reputation
              Impact System]\n        CEP[Cascade Effect Processor]\n        BQM[Branching
              Quest Manager]\n    end\n\n    subgraph \"Social Hierarchy Pillar\"\n        PRM[Player
              Relationship Manager]\n        CS[Clan System]\n        FS[Faction System]\n        CoS[Corporation
              System]\n        GPE[Global Politics Engine]\n        HMT[Hierarchy
              Mobility Tracker]\n    end\n\n    subgraph \"Freedom & Progression Pillar\"\n        BS[Build
              System]\n        PF[Path Finder]\n        CAM[Content Access Manager]\n        SDT[Style
              Diversity Tracker]\n        FMC[Freedom Metrics Collector]\n    end\n\n    subgraph
              \"Hardcore Systems Pillar\"\n        CM[Complexity Manager]\n        RRC[Risk-Reward
              Calculator]\n        PS[Penalty System]\n        MT[Mastery Tracker]\n        DA[Depth
              Analyzer]\n    end\n\n    subgraph \"Cyberpunk Style Pillar\"\n        SV[Style
              Validator]\n        VCC[Visual Consistency Checker]\n        LIM[Lore
              Integration Manager]\n        TE[Theme Enforcer]\n        AMC[Aesthetic
              Metrics Collector]\n    end\n\n    WSE --> EventBus[Event Bus]\n    CT
              --> EventBus\n    PRM --> EventBus\n    BS --> EventBus\n    CM -->
              EventBus\n    SV --> EventBus\n\n    EventBus --> WorldService[World
              Service]\n    EventBus --> NarrativeService[Narrative Service]\n    EventBus
              --> SocialService[Social Service]\n    EventBus --> EconomyService[Economy
              Service]\n    EventBus --> GameplayService[Gameplay Service]\n    EventBus
              --> ProgressionService[Progression Service]\n```\n", "vision_implementation_flow":
              "```mermaid\nsequenceDiagram\n    participant WSE as World Simulation
              Engine\n    participant CT as Choice Tracker\n    participant PRM as
              Player Relationship Manager\n    participant BS as Build System\n    participant
              CM as Complexity Manager\n    participant SV as Style Validator\n    participant
              EventBus as Event Bus\n    participant Services as Game Services\n\n    Note
              over WSE,Services: Living World Flow\n    WSE->>WSE: Generate autonomous
              event\n    WSE->>EventBus: Publish world:event-generated\n    EventBus->>Services:
              Notify services\n\n    Note over CT,Services: Choices & Consequences
              Flow\n    CT->>CT: Record player choice\n    CT->>EventBus: Publish
              narrative:choice-made\n    EventBus->>Services: Apply consequences\n\n    Note
              over PRM,Services: Social Hierarchy Flow\n    PRM->>PRM: Update player
              hierarchy\n    PRM->>EventBus: Publish social:hierarchy-updated\n    EventBus->>Services:
              Update social state\n\n    Note over BS,Services: Freedom & Progression
              Flow\n    BS->>BS: Create player build\n    BS->>EventBus: Publish progression:build-created\n    EventBus->>Services:
              Enable build features\n\n    Note over CM,Services: Hardcore Systems
              Flow\n    CM->>CM: Calculate complexity\n    CM->>EventBus: Publish
              gameplay:complexity-updated\n    EventBus->>Services: Apply hardcore
              mechanics\n\n    Note over SV,Services: Cyberpunk Style Flow\n    SV->>SV:
              Validate style element\n    SV->>EventBus: Publish style:element-validated\n    EventBus->>Services:
              Ensure style consistency\n```\n"}}'
        - column:
            name: metadata
            value: '{"id": "vision-implementation-architecture", "title": "Архитектура
              реализации видения и философии дизайна", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.0.0", "last_updated":
              "2025-11-23T15:00:00+00:00", "owners": [{"role": "architect", "contact":
              "architect@necp.game"}], "tags": ["architecture", "vision", "design-philosophy",
              "core-pillars", "implementation"], "related_systems": ["world-service",
              "narrative-service", "social-service", "economy-service", "gameplay-service",
              "progression-service"], "related_documents": [{"id": "canon-vision-vision",
              "relation": "implements"}, {"id": "core-pillars", "relation": "implements"},
              {"id": "canon-vision-design-philosophy", "relation": "implements"},
              {"id": "canon-vision-core-pillars-implementation", "relation": "extends"}],
              "github_issue": 110, "visibility": "internal", "audience": ["architect",
              "backend", "narrative", "vision", "api-designer"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\vision-implementation-architecture.yaml
