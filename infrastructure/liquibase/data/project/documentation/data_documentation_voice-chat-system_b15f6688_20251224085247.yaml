databaseChangeLog:
- changeSet:
    id: documentation-voice-chat-system-b15f6688
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '5727402909924822'
        - column:
            name: doc_id
            value: voice-chat-system
        - column:
            name: title
            value: Backend голосового чата
        - column:
            name: document_type
            value: implementation
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: approved
        - column:
            name: version
            value: 1.0.0
        - column:
            name: last_updated
            value: 2025-11-07 02:40:00+00:00
        - column:
            name: concept_approved
            value: true
        - column:
            name: concept_reviewed_at
            value: 2025-11-07 02:40:00+00:00
        - column:
            name: owners
            value: '[{"role": "concept_director", "contact": "concept@necp.game"}]'
        - column:
            name: tags
            value:
            - voice
            - communication
            - social
        - column:
            name: topics
            value:
            - party-chat
            - guild-chat
            - proximity-chat
        - column:
            name: related_systems
            value:
            - voice-server
            - social-service
            - world-service
        - column:
            name: related_documents
            value: '[{"id": "guild-system-backend", "relation": "complements"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - concept
            - social
            - backend
        - column:
            name: risk_level
            value: high
        - column:
            name: content
            value: '{"metadata": {"id": "voice-chat-system", "title": "Backend голосового
              чата", "document_type": "implementation", "category": "systems", "status":
              "approved", "version": "1.0.0", "last_updated": "2025-11-07T02:40:00+00:00",
              "concept_approved": true, "concept_reviewed_at": "2025-11-07T02:40:00+00:00",
              "owners": [{"role": "concept_director", "contact": "concept@necp.game"}],
              "tags": ["voice", "communication", "social"], "topics": ["party-chat",
              "guild-chat", "proximity-chat"], "related_systems": ["voice-server",
              "social-service", "world-service"], "related_documents": [{"id": "guild-system-backend",
              "relation": "complements"}], "source": "", "visibility": "internal",
              "audience": ["concept", "social", "backend"], "risk_level": "high"},
              "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at":
              "2025-11-07T02:40:00+00:00", "status": "approved"}], "next_actions":
              []}, "summary": {"problem": "Игрокам нужна качественная голосовая связь
              для командной координации и атмосферного общения.", "goal": "Описать
              backend-компонент голосового чата с поддержкой групп, гильдий, proximity
              и рейдовых каналов.", "essence": "WebRTC-интеграция через dedicated
              voice server с маршрутизацией, настройками качества и управлением каналами.",
              "key_points": ["Поддержка party, guild, proximity и raid каналов с разными
              настройками качества.", "Событийная интеграция с социальными и world-сервисами
              для статусов и пространственного звука.", "Управление разрешениями,
              mute/deafen и статистикой использования."]}, "content": {"sections":
              [{"id": "architecture", "title": "Архитектура и каналы", "body": "Клиент
              устанавливает WebRTC-сессию к voice-server (Agora/Twilio/self-hosted),
              после чего\nмикшер маршрутизирует аудио к участникам канала. Поддерживаются
              party (2-5 игроков),\nguild (до 100), raid (10-25 с сабканалами) и proximity
              (20 метров, 3D звук). Качество\nопределяется пресетами и может понижаться
              при перегрузке.\n", "mechanics_links": [], "assets": []}, {"id": "data-model",
              "title": "Модель данных", "body": "Таблица `voice_channels` хранит тип,
              владельца, лимиты и разрешения, а `voice_participants`\nфиксирует подключённых
              игроков, их состояние (mute, deaf, speaking) и статистику.\nИндексы
              ускоряют выборки по активным каналам и участникам.\n", "mechanics_links":
              [], "assets": []}, {"id": "flows", "title": "Основные сценарии", "body":
              "При подключении сервис валидирует доступ, создаёт запись участника
              и выдаёт токен WebRTC.\nПереходы между каналами обновляют счётчики и
              публикуют события для UI. Проксимити-канал\nдинамически обновляет участников
              на основе координат из world-service.\n", "mechanics_links": [], "assets":
              []}]}, "appendix": {"glossary": [], "references": [{"type": "api", "path":
              "api/v1/social/voice/"}, {"type": "repository", "path": "shared/code/backend/social/voice-service/"}],
              "decisions": [{"id": "adr-voice-chat", "summary": "Утверждён WebRTC-стек
              с разделением на типы голосовых каналов и fallback на внешних провайдеров."}]},
              "implementation": {"needs_task": false, "github_issue": 79, "queue_reference":
              ["shared/trackers/queues/concept/queued.yaml"], "blockers": []}, "history":
              [{"version": "1.0.0", "date": "2025-11-07", "author": "Concept Director",
              "changes": "Утверждён голосовой чат с поддержкой party, guild, raid
              и proximity каналов."}], "validation": {"checksum": "", "schema_version":
              "1.0"}}'
        - column:
            name: metadata
            value: '{"id": "voice-chat-system", "title": "Backend голосового чата",
              "document_type": "implementation", "category": "systems", "status":
              "approved", "version": "1.0.0", "last_updated": "2025-11-07T02:40:00+00:00",
              "concept_approved": true, "concept_reviewed_at": "2025-11-07T02:40:00+00:00",
              "owners": [{"role": "concept_director", "contact": "concept@necp.game"}],
              "tags": ["voice", "communication", "social"], "topics": ["party-chat",
              "guild-chat", "proximity-chat"], "related_systems": ["voice-server",
              "social-service", "world-service"], "related_documents": [{"id": "guild-system-backend",
              "relation": "complements"}], "source": "", "visibility": "internal",
              "audience": ["concept", "social", "backend"], "risk_level": "high"}'
        - column:
            name: source_file
            value: knowledge\implementation\backend\voice-chat\voice-chat-system.yaml
