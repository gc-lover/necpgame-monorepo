databaseChangeLog:
- changeSet:
    id: documentation-voice-lobby-core-28664c62
    author: content-migration-generator
    changes:
    - insert:
        tableName: project.documentation
        columns:
        - column:
            name: id
            value: '6600530972618220'
        - column:
            name: doc_id
            value: voice-lobby-core
        - column:
            name: title
            value: Архитектура системы голосовых лобби - Основная структура
        - column:
            name: document_type
            value: architecture
        - column:
            name: category
            value: systems
        - column:
            name: status
            value: draft
        - column:
            name: version
            value: 1.1.0
        - column:
            name: last_updated
            value: 2025-11-30 20:40:00+00:00
        - column:
            name: concept_approved
            value: false
        - column:
            name: concept_reviewed_at
            value: null
        - column:
            name: owners
            value: '[{"role": "architect", "contact": "architect@necp.game"}]'
        - column:
            name: tags
            value:
            - architecture
            - voice-chat
            - social
            - party-finder
        - column:
            name: topics
            value: []
        - column:
            name: related_systems
            value:
            - voice-service
            - party-service
            - guild-service
            - clan-service
        - column:
            name: related_documents
            value: '[{"id": "backend-voice-lobby-system", "relation": "implements"},
              {"id": "voice-lobby-mechanics", "relation": "extends"}, {"id": "voice-lobby-data-flows",
              "relation": "extends"}, {"id": "voice-lobby-database", "relation": "extends"},
              {"id": "voice-lobby-integrations", "relation": "extends"}, {"id": "voice-lobby-technical",
              "relation": "extends"}]'
        - column:
            name: source
            value: ''
        - column:
            name: visibility
            value: internal
        - column:
            name: audience
            value:
            - architect
            - backend
            - voice-chat
            - social
            - api-designer
        - column:
            name: risk_level
            value: ''
        - column:
            name: content
            value: '{"metadata": {"id": "voice-lobby-core", "title": "Архитектура
              системы голосовых лобби - Основная структура", "document_type": "architecture",
              "category": "systems", "status": "draft", "version": "1.1.0", "last_updated":
              "2025-11-30T20:40:00+00:00", "owners": [{"role": "architect", "contact":
              "architect@necp.game"}], "tags": ["architecture", "voice-chat", "social",
              "party-finder"], "related_systems": ["voice-service", "party-service",
              "guild-service", "clan-service"], "related_documents": [{"id": "backend-voice-lobby-system",
              "relation": "implements"}, {"id": "voice-lobby-mechanics", "relation":
              "extends"}, {"id": "voice-lobby-data-flows", "relation": "extends"},
              {"id": "voice-lobby-database", "relation": "extends"}, {"id": "voice-lobby-integrations",
              "relation": "extends"}, {"id": "voice-lobby-technical", "relation":
              "extends"}], "github_issue": 338, "visibility": "internal", "audience":
              ["architect", "backend", "voice-chat", "social", "api-designer"]}, "summary":
              {"problem": "Требуется спроектировать полную архитектуру системы голосовых
              лобби, включающую:\n- Управление голосовыми комнатами\n- Подбор групп
              (Party Finder)\n- Управление подканалами\n- Интеграцию с party/guild
              системами\n- Систему прав доступа\n", "goal": "Создать архитектурную
              схему системы голосовых лобби с определением:\n- Компонентов для управления
              лобби\n- REST, WebSocket и Event Bus контрактов\n- Интеграций с другими
              системами\n- Структуры БД\n- Технического задания для реализации\n",
              "essence": "Полная архитектура системы голосовых лобби с поддержкой
              лобби, Party Finder,\nуправления подканалами и прав доступа.\n"}, "architecture":
              {"overview": "Архитектура системы голосовых лобби состоит из следующих
              компонентов:\n1. Voice Lobby Manager - управление системой лобби\n2.
              Lobby Directory Manager - управление каталогом лобби\n3. Party Finder
              Engine - подбор групп\n4. Subchannel Controller - управление подканалами\n5.
              Permissions Engine - управление правами доступа\n6. Lobby Matchmaker
              - подбор лобби\n7. Voice Provider Integrator - интеграция с голосовым
              провайдером\n8. Lobby Analytics Collector - сбор аналитики\n9. Lobby
              Telemetry Collector - сбор телеметрии\n", "microservices": [{"name":
              "voice-lobby-service", "port": 8096, "responsibility": "Обработка системы
              голосовых лобби:\n- Управление системой лобби\n- Управление каталогом
              лобби\n- Подбор групп\n- Управление подканалами\n- Управление правами
              доступа\n- Подбор лобби\n- Интеграция с голосовым провайдером\n- Сбор
              аналитики\n- Сбор телеметрии\n", "components": [{"voice-lobby-manager":
              "управление системой лобби"}, {"lobby-directory-manager": "управление
              каталогом лобби"}, {"party-finder-engine": "подбор групп"}, {"subchannel-controller":
              "управление подканалами"}, {"permissions-engine": "управление правами
              доступа"}, {"lobby-matchmaker": "подбор лобби"}, {"voice-provider-integrator":
              "интеграция с голосовым провайдером"}, {"lobby-analytics-collector":
              "сбор аналитики"}, {"lobby-telemetry-collector": "сбор телеметрии"}],
              "endpoints": ["GET /api/v1/voice-lobbies - список лобби", "GET /api/v1/voice-lobbies/{lobbyId}
              - информация о лобби", "POST /api/v1/voice-lobbies - создание лобби",
              "PUT /api/v1/voice-lobbies/{lobbyId} - обновление лобби", "DELETE /api/v1/voice-lobbies/{lobbyId}
              - удаление лобби", "POST /api/v1/voice-lobbies/{lobbyId}/join - присоединение
              к лобби", "POST /api/v1/voice-lobbies/{lobbyId}/leave - выход из лобби",
              "GET /api/v1/voice-lobbies/{lobbyId}/participants - участники лобби",
              "POST /api/v1/voice-lobbies/{lobbyId}/subchannels - создание подканала",
              "GET /api/v1/voice-lobbies/{lobbyId}/subchannels - список подканалов",
              "POST /api/v1/voice-lobbies/{lobbyId}/subchannels/{subchannelId}/move
              - перемещение в подканал", "POST /api/v1/voice-lobbies/{lobbyId}/permissions
              - изменение прав", "GET /api/v1/voice-lobbies/{lobbyId}/permissions
              - права доступа", "POST /api/v1/party-finder/search - поиск группы",
              "GET /api/v1/party-finder/{characterId}/active - активный поиск", "POST
              /api/v1/party-finder/{characterId}/cancel - отмена поиска", "GET /api/v1/voice-lobbies/{characterId}/my-lobbies
              - мои лобби"], "websocket_channels": ["wss://api.necp.game/v1/voice-lobbies/{lobbyId}
              - поток обновлений лобби", "wss://api.necp.game/v1/party-finder/{characterId}
              - поток обновлений поиска"], "events_published": [{"voice-lobby.created":
              "создано лобби"}, {"voice-lobby.updated": "обновлено лобби"}, {"voice-lobby.deleted":
              "удалено лобби"}, {"voice-lobby.joined": "присоединение к лобби"}, {"voice-lobby.left":
              "выход из лобби"}, {"voice-lobby.subchannel-created": "создан подканал"},
              {"voice-lobby.subchannel-moved": "перемещение в подканал"}, {"voice-lobby.permissions-changed":
              "изменены права"}, {"party-finder.started": "начат поиск группы"}, {"party-finder.found":
              "найдена группа"}, {"party-finder.cancelled": "отменен поиск"}], "events_subscribed":
              [{"party.created": "создана группа"}, {"party.disbanded": "распущена
              группа"}, {"guild.created": "создана гильдия"}, {"guild.disbanded":
              "распущена гильдия"}, {"clan.created": "создан клан"}, {"clan.disbanded":
              "распущен клан"}]}]}}'
        - column:
            name: metadata
            value: '{"id": "voice-lobby-core", "title": "Архитектура системы голосовых
              лобби - Основная структура", "document_type": "architecture", "category":
              "systems", "status": "draft", "version": "1.1.0", "last_updated": "2025-11-30T20:40:00+00:00",
              "owners": [{"role": "architect", "contact": "architect@necp.game"}],
              "tags": ["architecture", "voice-chat", "social", "party-finder"], "related_systems":
              ["voice-service", "party-service", "guild-service", "clan-service"],
              "related_documents": [{"id": "backend-voice-lobby-system", "relation":
              "implements"}, {"id": "voice-lobby-mechanics", "relation": "extends"},
              {"id": "voice-lobby-data-flows", "relation": "extends"}, {"id": "voice-lobby-database",
              "relation": "extends"}, {"id": "voice-lobby-integrations", "relation":
              "extends"}, {"id": "voice-lobby-technical", "relation": "extends"}],
              "github_issue": 338, "visibility": "internal", "audience": ["architect",
              "backend", "voice-chat", "social", "api-designer"]}'
        - column:
            name: source_file
            value: knowledge\implementation\architecture\voice-lobby-core.yaml
