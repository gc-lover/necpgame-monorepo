-- Issue: #50
-- Import dialogue from: npc-aisha-frost.yaml
-- Version: 1.2.0
-- Generated: 2025-12-21T02:15:38.953936
-- [WARNING]  WARNING: Requires 'dialogue_nodes' table (create via Database agent)

BEGIN;

-- Dialogue: canon-narrative-dialogue-aisha-frost
INSERT INTO narrative.dialogue_nodes (dialogue_id, title, content_data, version, is_active)
VALUES ('canon-narrative-dialogue-aisha-frost', 'Диалоги — Айша Фрост',
        '{"metadata": {"id": "canon-narrative-dialogue-aisha-frost", "title": "Диалоги — Айша Фрост", "document_type": "canon", "category": "narrative", "status": "approved", "version": "1.2.0", "last_updated": "2025-11-11T00:00:00+00:00", "concept_approved": true, "concept_reviewed_at": "2025-11-07T18:20:00+00:00", "owners": [{"role": "narrative_director", "contact": "narrative@necp.game"}], "tags": ["dialogue", "neon-ghosts"], "topics": ["narrative", "side-quests"], "related_systems": ["narrative-service", "social-service", "world-service"], "related_documents": [{"id": "content-quests-side-neon-ghosts", "relation": "references"}, {"id": "canon-narrative-dialogues-faction-social-lines", "relation": "complements"}, {"id": "canon-npc-aisha-frost", "relation": "references"}], "source": "shared/docs/knowledge/canon/narrative/dialogues/npc-aisha-frost.md", "visibility": "internal", "audience": ["narrative", "systems-design", "liveops"], "risk_level": "medium"}, "review": {"chain": [{"role": "narrative_director", "reviewer": "Neon Narrative Cell", "reviewed_at": "2025-11-07T18:20:00+00:00", "status": "approved"}], "next_actions": []}, "summary": {"problem": "Диалог Айши Фрост включал множество состояний, узлов и проверок в Markdown и требовал структурирования.", "goal": "Сформировать YAML-описание состояний, проверок, наград и интеграций для Neon Ghosts.", "essence": "Документ регламентирует диалоговый флоу Айши, репутационные ветки, Specter-поручения и влияние на Underlink.", "key_points": ["Шесть состояний (scout, trusted, corporate, exposed, crisis, specter) с флагами и событиями.", "Узлы охватывают проверку намерений, брифинг Underlink, корпоративное давление и Specter-операции.", "Таблица D&D проверок и реакции на события управляют репутацией и состоянием города."]}, "content": {"sections": [{"id": "context", "title": "Контекст и цели", "body": "Айша Фрост руководит курьерами Neon Ghosts, проверяет мотивацию игрока и запускает элитные поручения. Диалог\\nреагирует на корпоративное давление Helios, операции Maelstrom и статус Specter.\\n", "mechanics_links": [], "assets": []}, {"id": "states", "title": "Состояния и условия", "body": "Состояния включают scout, trusted, corporate, exposed, crisis и specter. Каждое состояние задаёт уникальные\\nприветствия, репутационные требования и активные события (например, world.event.neon_lockdown).\\n", "mechanics_links": [], "assets": []}, {"id": "nodes", "title": "Узлы и опции игрока", "body": "Основные узлы: scout-evaluation, underlink-brief, trusted-routing, corporate-ultimatum, crisis-directives и\\nspecter-directive. Узлы используют ресурсные затраты, стат-проверки и флаги, влияющие на репутацию и world-state.\\n", "mechanics_links": [], "assets": []}, {"id": "checks", "title": "Проверки и модификаторы", "body": "Таблица D&D проверок охватывает Persuasion, Strategy, Logistics, Negotiation, Resolve, Leadership, Combat,\\nInvestigation и Tactics с модификаторами, критическими исходами и последствиями для репутации и событий.\\n", "mechanics_links": [], "assets": []}, {"id": "events_rewards", "title": "События, награды и API", "body": "Реагирует на world.event.neon_lockdown, maelstrom_underlink_raid и contract.helios-shadow-ops. Награды включают\\nпредметы ghost-cache, specter-cache и модификаторы underlink.stability, city.unrest.level. API вызовы работают\\nчерез world/events, social/reputation и economy/contracts.\\n", "mechanics_links": [], "assets": []}]}, "appendix": {"glossary": [], "references": [{"title": "Neon Ghosts Quest", "link": "../../quests/side/2025-11-07-quest-neon-ghosts.md"}, {"title": "Reputation Formulas", "link": "../../02-gameplay/social/reputation-formulas.md"}, {"title": "Global State Management", "link": "../../05-technical/global-state/global-state-management.md"}], "decisions": []}, "implementation": {"needs_task": false, "github_issue": 107, "queue_reference": ["shared/trackers/queues/concept/queued.yaml"], "blockers": []}, "history": [{"version": "1.2.0", "date": "2025-11-11", "author": "narrative_team", "changes": "Диалог Айши Фрост структурирован в YAML, добавлены Specter-поручения и кризисные реакции."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb,
        1, true) ON CONFLICT (dialogue_id) DO
UPDATE
    SET title = EXCLUDED.title, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 dialogue