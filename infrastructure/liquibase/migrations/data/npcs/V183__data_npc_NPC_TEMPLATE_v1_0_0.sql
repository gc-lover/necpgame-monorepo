-- Issue: #50
-- Import NPC from: NPC-TEMPLATE.yaml
-- Version: 1.0.0
-- Generated: 2025-12-13T21:13:37.049377
-- WARNING  WARNING: Requires 'npc_definitions' table (create via Database agent)

BEGIN;

-- NPC: canon-narrative-npc-template
INSERT INTO narrative.npc_definitions (npc_id, title, content_data, version, is_active) VALUES ('canon-narrative-npc-template', 'Шаблон описания NPC', '{"metadata": {"id": "canon-narrative-npc-template", "title": "Шаблон описания NPC", "document_type": "canon", "category": "narrative", "status": "approved", "version": "1.0.0", "last_updated": "2025-11-12T00:00:00+00:00", "concept_approved": true, "concept_reviewed_at": "2025-11-05T18:00:00+00:00", "owners": [{"role": "narrative_director", "contact": "narrative@necp.game"}], "tags": ["template", "npc"], "topics": ["narrative", "documentation"], "related_systems": ["narrative-service"], "related_documents": [{"id": "canon-narrative-npc-important-list", "relation": "references"}, {"id": "canon-narrative-dialogue-template", "relation": "complements"}], "source": "shared/docs/knowledge/canon/narrative/npc-lore/NPC-TEMPLATE.md", "visibility": "internal", "audience": ["narrative", "systems-design"], "risk_level": "low"}, "review": {"chain": [{"role": "narrative_director", "reviewer": "Narrative Documentation Cell", "reviewed_at": "2025-11-05T18:00:00+00:00", "status": "approved"}], "next_actions": []}, "summary": {"problem": "Шаблон NPC находился в Markdown и содержал служебные пометки, затруднявшие единообразное заполнение.", "goal": "Предоставить структурированный YAML-формат для создания карточек NPC с обязательными блоками информации.", "essence": "Документ определяет поля и разделы описания NPC, охватывая идентификатор, контекст, внешность, историю и игровые взаимодействия.", "key_points": ["Структура включает 11 основных разделов.", "Учтены ссылки на сервисы, API и игровые системы.", "Добавлены требования к вдохновению и фиксации изменений."]}, "content": {"sections": [{"id": "structure", "title": "Структура заголовка", "body": "Метаданные задают категорию, статус, приоритет, версию и параметры API readiness. Они обеспечивают автоматическое\\nиндексирование в базе знаний.\\n", "mechanics_links": [], "assets": []}, {"id": "identity", "title": "Идентификатор NPC", "body": "Раздел фиксирует имя, псевдонимы, уникальный идентификатор, категорию и тип персонажа, а также жизненный период и\\nактивные годы.\\n", "mechanics_links": [], "assets": []}, {"id": "context", "title": "Контекст и интеграции", "body": "Описываются фракции, локации, связанные микросервисы, API и фронтенд-модули, чтобы задать системные зависимости.\\n", "mechanics_links": [], "assets": []}, {"id": "appearance_style", "title": "Внешность и стиль", "body": "Содержит параметры внешности, импланты, особенности, одежду и манеру речи для художественной и визуальной команды.\\n", "mechanics_links": [], "assets": []}, {"id": "history", "title": "Биография и мотивация", "body": "Требуется описать происхождение, ключевые этапы биографии, текущий статус и мотивации персонажа.\\n", "mechanics_links": [], "assets": []}, {"id": "relationships", "title": "Отношения", "body": "Фиксируются связи с фракциями, NPC и игроками, включая начальные отношения и факторы развития взаимодействия.\\n", "mechanics_links": [], "assets": []}, {"id": "gameplay_role", "title": "Роль в игре", "body": "Перечисляются функции NPC, связанные квесты и события, описываются награды и последствия взаимодействия.\\n", "mechanics_links": [], "assets": []}, {"id": "mechanics", "title": "Механики и системы", "body": "При необходимости добавляются параметры, инвентарь, элементы экономики и интеграции с REST или событийными шинами.\\n", "mechanics_links": [], "assets": []}, {"id": "dialogues", "title": "Диалоги и контент", "body": "Содержит рекомендации по приветствиям, основным веткам и специальным сценам, а также ссылки на сценарии диалогов.\\n", "mechanics_links": [], "assets": []}, {"id": "inspiration", "title": "Источники вдохновения", "body": "Указываются связи с лором Cyberpunk, авторские особенности и дополнительные референсы.\\n", "mechanics_links": [], "assets": []}, {"id": "maintenance", "title": "Поддержка и обновления", "body": "Рекомендуется фиксировать вопросы на уточнение, потребности в визуалах и согласование с квестами, а также отслеживать\\nисторию изменений.\\n", "mechanics_links": [], "assets": []}]}, "appendix": {"glossary": [], "references": [{"title": "NPC Status Tracker", "link": "./npc-status-tracker.md"}, {"title": "Dialogue Template", "link": "../dialogues/DIALOGUE-TEMPLATE.yaml"}], "decisions": []}, "implementation": {"needs_task": false, "github_issue": 108, "queue_reference": ["shared/trackers/queues/concept/queued.yaml"], "blockers": []}, "history": [{"version": "1.0.0", "date": "2025-11-12", "author": "narrative_team", "changes": "Шаблон NPC перенесён в YAML и описан по разделам применения."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb, 1, true) ON CONFLICT (npc_id) DO UPDATE SET title = EXCLUDED.title, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 NPC