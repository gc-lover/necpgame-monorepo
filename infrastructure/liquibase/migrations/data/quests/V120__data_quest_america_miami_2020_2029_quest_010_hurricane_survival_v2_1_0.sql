-- Issue: #50
-- Import quest from: america\miami\2020-2029\quest-010-hurricane-survival.yaml
-- Generated: 2025-12-13T21:13:33.814575

BEGIN;

-- Quest: canon-quest-miami-hurricane-survival
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements, objectives, rewards, branches, content_data, version, is_active) VALUES ('canon-quest-miami-hurricane-survival', 'Майами — Выживание в урагане', 'Группа собирает ресурсы, укрепляет дом и переживает удар урагана категории 5, а затем помогает пострадавшим.', 'side', 10, NULL, '{"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}'::jsonb, '[{"id": "receive_warning", "text": "Получить предупреждение и оценить траекторию урагана", "type": "dialogue", "target": "weather_station_npc", "count": 1, "optional": false}, {"id": "gather_supplies", "text": "Закупить воду, еду, медикаменты и подготовить генератор", "type": "interact", "target": "supply_store", "count": 1, "optional": false}, {"id": "fortify_shelter", "text": "Заколотить окна, укрепить крышу и подготовить укрытие", "type": "interact", "target": "player_shelter", "count": 1, "optional": false}, {"id": "survive_storm", "text": "Переждать основной удар урагана, поддерживая связь с командой", "type": "minigame", "target": "hurricane_event", "count": 1, "optional": false}, {"id": "help_neighbors", "text": "После урагана оказать помощь соседям и устранить повреждения", "type": "interact", "target": "neighbor_locations", "count": 3, "optional": true}]'::jsonb, '{"experience": 5000, "money": 0, "reputation": {"miami_residents": 10}, "items": [], "unlocks": {"achievements": ["Hurricane Survivor"], "flags": []}}'::jsonb, '[]'::jsonb, '{"metadata": {"id": "canon-quest-miami-hurricane-survival", "title": "Майами — Выживание в урагане", "document_type": "canon", "category": "quest", "status": "draft", "version": "2.1.0", "last_updated": "2025-12-12T00:00:00+00:00", "concept_approved": true, "concept_reviewed_at": "2025-11-06T15:07:00+00:00", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}], "tags": ["miami", "hurricane", "survival"], "topics": ["disaster-events", "community-support"], "related_systems": ["disaster-system", "shelter-system"], "related_documents": [{"id": "github-issue-350", "title": "GitHub Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/350", "relation": "migrated_to", "migrated_at": "2025-11-22T20:30:00+00:00"}], "source": "shared/docs/knowledge/canon/lore/_03-lore/timeline-author/quests/america/miami/2020-2029/quest-010-hurricane-survival.md", "visibility": "internal", "audience": ["concept", "narrative", "gameplay"], "risk_level": "high"}, "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Сценарий урагана категории 5 был в Markdown и не интегрировался в систему знаний.", "goal": "Задокументировать кооперативное выживание во время урагана в YAML с этапами подготовки и последствий.", "essence": "Группа собирает ресурсы, укрепляет дом и переживает удар урагана категории 5, а затем помогает пострадавшим.", "key_points": ["Подготовка включает сбор запасов, генераторов и досок для окон.", "Событие моделирует ветер 250+ км/ч, затопление и отключение электричества.", "Успех приносит титул «Hurricane Survivor» и рост репутации."]}, "quest_definition": {"quest_type": "side", "level_min": 10, "level_max": null, "requirements": {"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}, "objectives": [{"id": "receive_warning", "text": "Получить предупреждение и оценить траекторию урагана", "type": "dialogue", "target": "weather_station_npc", "count": 1, "optional": false}, {"id": "gather_supplies", "text": "Закупить воду, еду, медикаменты и подготовить генератор", "type": "interact", "target": "supply_store", "count": 1, "optional": false}, {"id": "fortify_shelter", "text": "Заколотить окна, укрепить крышу и подготовить укрытие", "type": "interact", "target": "player_shelter", "count": 1, "optional": false}, {"id": "survive_storm", "text": "Переждать основной удар урагана, поддерживая связь с командой", "type": "minigame", "target": "hurricane_event", "count": 1, "optional": false}, {"id": "help_neighbors", "text": "После урагана оказать помощь соседям и устранить повреждения", "type": "interact", "target": "neighbor_locations", "count": 3, "optional": true}], "rewards": {"experience": 5000, "money": 0, "reputation": {"miami_residents": 10}, "items": [], "unlocks": {"achievements": ["Hurricane Survivor"], "flags": []}}, "branches": []}, "content": {"sections": [{"id": "overview", "title": "Обзор", "body": "Майами ежегодно сталкивается с сезонами ураганов. Квест воспроизводит экстремальные условия категории 5 и реакцию сообщества.\\n", "mechanics_links": ["mechanics/world/disaster-system.yaml", "mechanics/quests/quest-system.yaml"], "assets": []}, {"id": "flow", "title": "Этапы", "body": "1. Получить предупреждение и оценить траекторию урагана.\\n2. Закупить воду, еду, медикаменты, подготовить генератор.\\n3. Заколотить окна, укрепить крышу и подготовить укрытие.\\n4. Переждать основной удар, поддерживая связь с командой.\\n5. После урагана оказать помощь соседям и устранить повреждения.\\n", "mechanics_links": ["mechanics/world/disaster-system.yaml", "mechanics/world/community-support.yaml"], "assets": []}, {"id": "regional_details", "title": "Региональные детали", "body": "- Ветер, срывающий крыши, и штормовой нагон на улицах.\\n- Полное отключение электроэнергии и коммуникаций.\\n- Флоридская традиция «Hurricane party» и поддержка соседей.\\n- Радиотрансляции служб спасения.\\n", "mechanics_links": ["mechanics/world/disaster-system.yaml"], "assets": []}, {"id": "rewards", "title": "Награды", "body": "- 5,000 опыта.\\n- +10 репутации среди жителей Майами.\\n- Титул «Hurricane Survivor».\\n- Риски: травмы, разрушение базы.\\n", "mechanics_links": ["mechanics/world/reputation-system.yaml", "mechanics/economy/rewards.yaml"], "assets": []}, {"id": "mechanics", "title": "Механики", "body": "- Кооперативное выживание с распределением ролей.\\n- Проверки инженерии для укрепления строений.\\n- Динамическая система погодных эффектов.\\n", "mechanics_links": ["mechanics/world/disaster-system.yaml", "mechanics/quests/quest-system.yaml"], "assets": []}, {"id": "links", "title": "Связи", "body": "Связано с природными катастрофами Флориды и линиями гражданской обороны.\\n", "mechanics_links": ["mechanics/world/disaster-system.yaml"], "assets": []}]}, "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation": {"needs_task": false, "github_issue": 51, "queue_reference": ["shared/trackers/queues/concept/queued.yaml"], "blockers": []}, "history": [{"version": "2.1.0", "date": "2025-12-12", "author": "content_team", "changes": "Добавлены механики стихийных бедствий, кооператива и репутации; обновлена дата."}, {"version": "2.0.0", "date": "2025-12-06", "author": "content_writer", "changes": "Добавлен quest_definition с полной структурой квеста согласно архитектуре системы квестов."}, {"version": "1.0.0", "date": "2025-11-06", "author": "narrative_team", "changes": "Описан кооперативный квест по выживанию в урагане категории 5."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb, 1, true) ON CONFLICT (quest_id) DO UPDATE SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest