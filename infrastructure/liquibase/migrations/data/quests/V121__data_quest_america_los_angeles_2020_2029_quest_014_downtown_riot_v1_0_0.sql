-- Issue: #50
-- Import quest from: america\los-angeles\2020-2029\quest-014-downtown-riot.yaml
-- Generated: 2025-12-21T02:15:34.590796

BEGIN;

-- Quest: canon-quest-la-downtown-riot
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements,
                                        objectives, rewards, branches, content_data, version, is_active)
VALUES ('canon-quest-la-downtown-riot', 'Лос-Анджелес — Downtown Riot',
        'Игрок оказывается в эпицентре уличных беспорядков и должен выбрать, поддерживать ли протестующих.', 'side',
        NULL, NULL, '{}'::jsonb, '[]'::jsonb, '{}'::jsonb, '[]'::jsonb,
        '{"metadata": {"id": "canon-quest-la-downtown-riot", "title": "Лос-Анджелес — Downtown Riot", "document_type": "canon", "category": "quest", "status": "approved", "version": "1.0.0", "last_updated": "2025-12-14T12:35:00+00:00", "concept_approved": true, "concept_reviewed_at": "2025-12-14T12:35:00+00:00", "owners": [{"role": "narrative_team", "contact": "narrative@necp.game"}], "tags": ["los_angeles", "riot", "downtown", "protest"], "topics": ["regional-content", "social-unrest"], "related_systems": ["reputation-system", "faction-system"], "related_documents": [{"id": "canon-quest-la-freeway-chase", "relation": "references"}], "source": "knowledge/canon/lore/_03-lore/timeline-author/quests/america/los-angeles/2020-2029/quest-014-downtown-riot.yaml", "visibility": "internal", "audience": ["lore", "narrative", "quest-design"], "risk_level": "medium"}, "review": {"chain": [{"role": "content_writer", "reviewer": "Content Writer Agent", "reviewed_at": "2025-12-14T12:35:00+00:00", "status": "approved"}], "next_actions": []}, "summary": {"problem": "Нужно отразить социальное напряжение в центре Лос-Анджелеса и протесты против корпораций.", "goal": "Создать квест о участии в городском бунте и выборе стороны конфликта.", "essence": "Игрок оказывается в эпицентре уличных беспорядков и должен выбрать, поддерживать ли протестующих.", "key_points": ["Downtown LA как центр корпоративной власти и социального сопротивления.", "Бунты как реакция на неравенство и корпоративное доминирование.", "Выбор между поддержкой протестующих или корпоративной охраны."]}, "content": {"sections": [{"id": "quest_profile", "title": "Параметры квеста", "body": "Тип: social, сложность: high, формат: solo, длительность: 45-75 минут.\\nНаграды: 1500 XP, -25 единиц валюты, репутация в выбранной фракции, достижение «Riot Veteran».\\n", "mechanics_links": [], "assets": []}, {"id": "stages", "title": "Этапы", "body": "1. Услышать новости о начавшемся бунте в центре города.\\n2. Прибыть на место и оценить ситуацию - протестующие против полиции.\\n3. Выбрать сторону: присоединиться к бунтовщикам или помочь полиции.\\n4. Если выбрал бунт: поджигать машины, грабить магазины, сражаться с охраной.\\n5. Если выбрал полицию: защищать здания, арестовывать поджигателей.\\n6. Уйти до прибытия подкрепления или быть пойманным.\\n", "mechanics_links": [], "assets": []}, {"id": "regional_context", "title": "Региональные детали", "body": "Downtown LA — финансовый центр с небоскребами корпораций и бедными районами вокруг.\\nБунты вспыхивают регулярно из-за экономического неравенства и полицейского произвола.\\nКорпорации используют частную охрану для подавления протестов.\\n", "mechanics_links": [], "assets": []}, {"id": "systems_hooks", "title": "Системные крючки", "body": "Квест влияет на репутацию в разных фракциях и может изменить доступ к районам города.\\nМожет привести к цепочке квестов о социальной справедливости и классовой борьбе.\\n", "mechanics_links": [], "assets": []}]}, "appendix": {"glossary": [{"term": "Downtown Riot", "definition": "Уличные беспорядки в центре Лос-Анджелеса против корпоративной власти"}], "references": [{"title": "LA Social Movements", "link": "https://en.wikipedia.org/wiki/Social_movements_in_Los_Angeles"}], "decisions": []}, "implementation": {"github_issue": 140876045, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "1.0.0", "date": "2025-12-14", "author": "content_writer_agent", "changes": "Создан квест о городском бунте и социальном конфликте."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb,
        1, true) ON CONFLICT (quest_id) DO
UPDATE
    SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest