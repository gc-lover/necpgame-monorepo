-- Issue: #50
-- Import quest from: america\mexico-city\2020-2029\quest-004-lucha-libre.yaml
-- Generated: 2025-12-21T02:15:34.610840

BEGIN;

-- Quest: canon-quest-mexico-city-lucha-libre
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements,
                                        objectives, rewards, branches, content_data, version, is_active)
VALUES ('canon-quest-mexico-city-lucha-libre', 'Мехико — Lucha Libre Show',
        'Игрок покупает билет, наблюдает за técnicos и rudos, приобретает маску и повышает репутацию.', 'side', NULL,
        NULL, '{}'::jsonb, '[]'::jsonb, '{}'::jsonb, '[]'::jsonb,
        '{"metadata": {"id": "canon-quest-mexico-city-lucha-libre", "title": "Мехико — Lucha Libre Show", "document_type": "canon", "category": "quest", "status": "approved", "version": "1.0.0", "last_updated": "2025-11-06T12:48:00+00:00", "concept_approved": true, "concept_reviewed_at": "2025-11-06T12:48:00+00:00", "owners": [{"role": "narrative_team", "contact": "narrative@necp.game"}], "tags": ["mexico_city", "sports", "culture"], "topics": ["regional-content", "entertainment"], "related_systems": ["social-system", "reputation-system"], "related_documents": [{"id": "canon-quest-mexico-city-zocalo", "relation": "complements"}], "source": "shared/docs/knowledge/canon/lore/_03-lore/timeline-author/quests/america/mexico-city/2020-2029/quest-004-lucha-libre.md", "visibility": "internal", "audience": ["lore", "narrative", "quest-design"], "risk_level": "low"}, "review": {"chain": [{"role": "narrative_lead", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Квест о шоу lucha libre оставался в Markdown и не описывал социальные бонусы.", "goal": "Оформить посещение Arena México с этапами и наградами.", "essence": "Игрок покупает билет, наблюдает за técnicos и rudos, приобретает маску и повышает репутацию.", "key_points": ["Маски и театральность lucha libre усилены в постановке.", "Толпа создаёт социальный эффект и влияет на репутацию игрока.", "Завершение даёт очки спорта и достижение фаната."]}, "content": {"sections": [{"id": "quest_profile", "title": "Параметры квеста", "body": "Тип: event, сложность: easy, формат: solo, длительность: 2-4 часа.\\nНаграды: 1,500 XP, -20 валюты, +15 к атрибуту «Спорт», достижение «Фанат Луча Либре».\\n", "mechanics_links": [], "assets": []}, {"id": "stages", "title": "Этапы", "body": "1. Приобрести билет в Arena México и выбрать сектор.\\n2. Наблюдать выход лучадоров в масках и костюмах.\\n3. Участвовать в интерактивных криках толпы (técnicos vs rudos).\\n4. Купить авторскую маску и получить благосклонность фан-клуба.\\n5. Зафиксировать впечатления для медийных каналов и обменяться сувенирами.\\n", "mechanics_links": [], "assets": []}, {"id": "regional_context", "title": "Региональные детали", "body": "Lucha libre сочетает спорт и театр; маска — ключевой символ личности бойца.\\nНа арене используются акробатические приёмы, музыка и пиротехника.\\nФанаты активно взаимодействуют с лучадорами, формируя уникальный шумовой фон.\\n", "mechanics_links": [], "assets": []}, {"id": "systems_hooks", "title": "Системные крючки", "body": "Квест повышает социальный рейтинг в спортивных районах и открывает линию подпольных турниров.\\nДоступны уникальные косметические предметы (маски) и контракты с организаторами шоу.\\n", "mechanics_links": [], "assets": []}]}, "appendix": {"glossary": [], "references": [{"title": "Arena México", "link": "https://en.wikipedia.org/wiki/Arena_M%C3%A9xico"}], "decisions": []}, "implementation": {"github_issue": 132, "needs_task": false, "queue_reference": ["shared/trackers/queues/concept/queued.yaml"], "blockers": []}, "history": [{"version": "1.0.0", "date": "2025-11-06", "author": "narrative_team", "changes": "Конвертирован квест Lucha Libre в YAML с социальными механиками."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb,
        1, true) ON CONFLICT (quest_id) DO
UPDATE
    SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest