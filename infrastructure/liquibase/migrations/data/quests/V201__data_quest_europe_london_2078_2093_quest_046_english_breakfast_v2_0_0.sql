-- Issue: #646
-- Import quest from: europe/london/2078-2093/quest-046-english-breakfast.yaml
-- Generated: 2025-12-23T18:22:00.000000

BEGIN;

-- Quest: quest-london-2078-046-english-breakfast
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements,
                                        objectives, rewards, branches, content_data, version, is_active)
VALUES ('quest-london-2078-046-english-breakfast', 'Лондон 2078-2093 — Английский завтрак',
        'Квест про английский завтрак в Лондоне, период 2078-2093.',
        'faction', 25, null,
        '{"required_quests": [], "required_flags": [], "required_reputation": {"Britain_Underworld": 10}, "required_items": []}'::jsonb,
        '[{"id": "discover_underground_farm", "text": "Найти секретную ферму, где выращивают настоящие продукты для традиционного английского завтрака", "type": "interact", "target": "underground_farm_discovery", "count": 1, "optional": false}, {"id": "gather_ingredients", "text": "Собрать все компоненты настоящего английского завтрака: яйца, бекон, колбаски, грибы, томаты, бобы", "type": "interact", "target": "breakfast_ingredients_collection", "count": 1, "optional": false}, {"id": "cook_breakfast", "text": "Освоить искусство приготовления традиционного английского завтрака", "type": "interact", "target": "english_breakfast_cooking", "count": 1, "optional": false}, {"id": "host_feast", "text": "Организовать подпольный пир для жителей района с настоящим английским завтраком", "type": "interact", "target": "neighborhood_feast_organization", "count": 1, "optional": false}, {"id": "defend_tradition", "text": "Отразить атаку корпорации NutriCorp на подпольную ферму", "type": "interact", "target": "tradition_defense", "count": 1, "optional": false}, {"id": "decide_food_future", "text": "Принять финальное решение о будущем настоящей еды и пищевой монополии", "type": "choice", "target": "food_future_decision", "count": 1, "optional": false}]'::jsonb,
        '{"experience": 6000, "currency": 0, "items": [{"item_id": "traditional_recipe_book", "quantity": 1}, {"item_id": "underground_network_pass", "quantity": 1}, {"item_id": "chefs_neural_implant", "quantity": 1}, {"item_id": "real_food_weekly_supply", "quantity": 1}], "reputation": {"Britain_Underworld": 30, "Britain_Corporations": -20, "Britain_Academia": 15, "Britain_Citizens": 25}, "flags": ["english_breakfast_tradition_preserved", "underground_food_movement_member", "corporate_food_control_resisted"]}'::jsonb,
        '[{"branch_id": "preserve_underground", "branch_name": "Сохранить подполье", "conditions": {"choice": "preserve_underground_path"}, "consequences": {"reputation_changes": {"Britain_Underworld": 40, "Britain_Corporations": -25}, "unlocks_quests": ["quest-britain-underground-food-network"], "world_state": [{"key": "underground_food_movement", "value": "strengthened", "scope": "global"}, {"key": "corporate_food_control", "value": "weakened", "scope": "global"}, {"key": "cultural_tradition_preservation", "value": "active", "scope": "global"}, {"key": "food_diversity", "value": "increased", "scope": "global"}], "flags": ["underground_food_activist", "tradition_preservation_hero"]}}, {"branch_id": "negotiate_corporation", "branch_name": "Переговоры с корпорацией", "conditions": {"choice": "negotiate_corporation_path"}, "consequences": {"reputation_changes": {"Britain_Corporations": 30, "Britain_Underworld": -20}, "unlocks_quests": ["quest-britain-corporate-food-reform"], "world_state": [{"key": "corporate_food_control", "value": "moderate", "scope": "global"}, {"key": "food_diversity", "value": "diversified", "scope": "global"}, {"key": "underground_food_movement", "value": "cooperative", "scope": "global"}, {"key": "corporate_transparency", "value": "improved", "scope": "global"}], "flags": ["food_industry_diplomat", "corporate_food_reformer"]}}, {"branch_id": "destroy_monopoly", "branch_name": "Разрушить монополию", "conditions": {"choice": "destroy_monopoly_path"}, "consequences": {"reputation_changes": {"Britain_Corporations": -50, "Britain_Underworld": 30}, "unlocks_quests": ["quest-britain-food-revolution"], "world_state": [{"key": "corporate_food_control", "value": "destroyed", "scope": "global"}, {"key": "food_revolution", "value": "successful", "scope": "global"}, {"key": "economic_instability", "value": "high", "scope": "global"}, {"key": "cultural_tradition_preservation", "value": "triumphant", "scope": "global"}], "flags": ["corporate_food_destroyer", "food_revolution_leader"]}}]'::jsonb,
        '{"metadata": {"id": "quest-london-2078-046-english-breakfast", "title": "Лондон 2078-2093 — Английский завтрак", "document_type": "canon", "category": "quest", "status": "content-ready", "version": "2.0.0", "last_updated": "2025-12-20T09:14:00Z", "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role": "narrative_author", "contact": "london@necp.game"}], "tags": ["london", "breakfast", "tradition", "smuggling", "cyberpunk-food", "choice-driven"], "topics": ["cultural-preservation", "corporate-monopoly", "underground-economy", "moral-choice", "food-security"], "related_systems": ["narrative-service"], "related_documents": [{"id": "timeline-author-quests-index", "relation": "references"}, {"id": "github-issue-646", "title": "GitHub Issue #646", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/646", "relation": "migrated_to", "migrated_at": "2025-11-22T23:40:23Z"}]}, "content": {"summary": "В киберпанковском Лондоне 2078 года корпорация ''NutriCorp'' монополизировала всю пищевую промышленность. Традиционный английский завтрак - с настоящими яйцами, беконом, колбасками, грибами, томатами, бобами и тостами - стал роскошью, доступной только элите. Игрок оказывается вовлечен в подпольную сеть контрабандистов, борющихся за сохранение культурного наследия. Настоящие продукты выращиваются в секретных фермах, спрятанных от корпоративного контроля. Но корпорация не остановится ни перед чем, чтобы уничтожить конкурентов.", "setting": {"location": "london", "time_period": "2078-2093", "atmosphere": "Лондон 2078 - это мир синтетической еды и корпоративного контроля. Неоновые вывески рекламируют ''питательные пасты'' и ''белковые концентраты'', а настоящая еда стала мифом. Под землей, в заброшенных туннелях метро и секретных теплицах, фермеры выращивают настоящие продукты. Это не просто еда - это акт сопротивления системе, которая хочет стереть человеческую культуру."}, "themes": ["corporate-monopoly-on-food", "cultural-resistance-through-tradition", "ethics-of-underground-economy", "power-of-shared-meals", "preservation-of-authenticity"], "main_objectives": [{"id": "discover_underground_farm", "title": "Найти подпольную ферму", "description": "Обнаружить секретную ферму, где выращивают настоящие продукты", "type": "investigation", "required_skills": [{"name": "Investigation", "level": 3}, {"name": "Awareness", "level": 2}]}, {"id": "gather_ingredients", "title": "Собрать ингредиенты", "description": "Собрать все компоненты настоящего английского завтрака", "type": "collection", "required_skills": [{"name": "Stealth", "level": 3}, {"name": "Technical", "level": 2}]}, {"id": "cook_breakfast", "title": "Приготовить завтрак", "description": "Освоить искусство приготовления традиционного английского завтрака", "type": "crafting", "required_skills": [{"name": "Cooking", "level": 4}, {"name": "Technical", "level": 3}]}, {"id": "host_feast", "title": "Устроить пир", "description": "Организовать подпольный пир для жителей района", "type": "social", "required_skills": [{"name": "Social", "level": 4}, {"name": "Leadership", "level": 3}]}, {"id": "defend_tradition", "title": "Защитить традицию", "description": "Отразить атаку корпорации на подпольную ферму", "type": "combat", "required_skills": [{"name": "Combat", "level": 3}, {"name": "Strategy", "level": 3}]}], "branching_choices": [{"id": "breakfast_fate", "title": "Судьба английского завтрака", "description": "Что станет с традицией настоящей еды?", "options": [{"id": "preserve_underground", "title": "Сохранить подполье", "description": "Продолжить подпольное движение за настоящую еду", "consequences": [{"faction": "underground", "change": 40}, {"faction": "corporations", "change": -25}, {"world_state": "cultural_resistance", "change": 20}, {"player_reputation": "rebel", "change": 15}]}, {"id": "negotiate_corporation", "title": "Переговоры с корпорацией", "description": "Достичь компромисса и легализовать настоящую еду", "consequences": [{"faction": "corporations", "change": 30}, {"faction": "underground", "change": -20}, {"world_state": "food_diversity", "change": 15}, {"player_reputation": "diplomat", "change": 10}]}, {"id": "destroy_monopoly", "title": "Разрушить монополию", "description": "Полностью уничтожить корпоративный контроль над едой", "consequences": [{"faction": "corporations", "change": -50}, {"faction": "underground", "change": 30}, {"world_state": "food_revolution", "change": 35}, {"player_reputation": "revolutionary", "change": 25}]}]}], "npcs": [{"id": "old_farmer", "name": "Старый фермер", "role": "underground_farmer", "personality": "wise, stubborn, passionate", "background": "Последний настоящий фермер Лондона, выращивающий настоящие продукты в секретных теплицах под землей. Видит в еде связь с прошлым."}, {"id": "corporate_exec", "name": "Корпоративный исполнитель", "role": "antagonist", "personality": "ruthless, pragmatic, arrogant", "background": "Представитель NutriCorp, ответственный за уничтожение конкурентов. Видит настоящую еду как угрозу корпоративной прибыли."}, {"id": "underground_chef", "name": "Подпольный шеф-повар", "role": "mentor", "personality": "passionate, creative, secretive", "background": "Бывший шеф-повар из элитного ресторана, теперь обучающий искусству настоящей кухни в подполье."}, {"id": "food_critic", "name": "Критик еды", "role": "commentator", "personality": "snobbish, knowledgeable, conflicted", "background": "Известный гурман, который помнит вкус настоящей еды. Теперь пишет подпольные рецензии о ''запретных блюдах''."}, {"id": "neighborhood_kids", "name": "Дети района", "role": "innocents", "personality": "curious, hungry, hopeful", "background": "Дети, которые никогда не пробовали настоящую еду. Их невинность контрастирует с жестокостью мира взрослых."}], "dialogue_examples": [{"npc": "old_farmer", "context": "first_meeting", "dialogue": "\"Молодой человек, ты хоть представляешь, что такое настоящее яйцо? Не этот синтетический желток, а настоящий, от курицы, которая гуляла по траве? Корпорации отняли у нас даже память о вкусе. Но мы сопротивляемся.\""}, {"npc": "corporate_exec", "context": "confrontation", "dialogue": "\"Эффективность превыше всего. Ваша ''традиционная еда'' - пережиток прошлого. Наша питательная паста кормит миллиарды. Эмоции от еды? Это роскошь, которую мир не может себе позволить.\""}, {"npc": "underground_chef", "context": "cooking_lesson", "dialogue": "\"Слушай внимательно. Бекон должен быть хрустящим, но не пережаренным. Яйца - идеально приготовлены, желток должен быть жидким. Это не просто еда - это акт сопротивления системе, которая хочет стереть нашу культуру.\""}], "skill_checks": [{"skill": "Cooking", "difficulty": "medium", "context": "preparing_perfect_eggs", "success_outcome": "Завтрак получается идеальным", "failure_outcome": "Яйца получаются переваренными"}, {"skill": "Stealth", "difficulty": "high", "context": "smuggling_ingredients", "success_outcome": "Ингредиенты доставлены незамеченными", "failure_outcome": "Корпоративная охрана замечает контрабанду"}, {"skill": "Social", "difficulty": "medium", "context": "convincing_locals", "success_outcome": "Жители района присоединяются к движению", "failure_outcome": "Люди боятся репрессий корпорации"}, {"skill": "Combat", "difficulty": "high", "context": "defending_farm", "success_outcome": "Ферма успешно защищена", "failure_outcome": "Корпорация уничтожает подпольную ферму"}], "rewards": [{"id": "traditional_recipe_book", "name": "Книга традиционных рецептов", "type": "item", "description": "Цифровая книга с рецептами настоящей британской кухни", "rarity": "rare"}, {"id": "underground_network_pass", "name": "Пропуск подпольной сети", "type": "access_pass", "description": "Доступ ко всем подпольным фермам и ресторанам Лондона", "rarity": "uncommon"}, {"id": "chefs_implant", "name": "Имплант шеф-повара", "type": "cybernetic", "description": "Нейронный имплант, повышающий кулинарные навыки", "rarity": "epic"}, {"id": "real_food_supply", "name": "Запас настоящей еды", "type": "consumable", "description": "Регулярные поставки настоящих продуктов на неделю", "rarity": "uncommon"}], "world_state_changes": [{"condition": "preserve_underground_wins", "changes": [{"underground_food_movement": 25}, {"corporate_food_control": -15}, {"cultural_tradition_preservation": 20}, {"food_diversity": 10}]}, {"condition": "negotiate_corporation_wins", "changes": [{"corporate_food_control": 20}, {"food_diversity": 30}, {"underground_food_movement": -10}, {"corporate_transparency": 15}]}, {"condition": "destroy_monopoly_wins", "changes": [{"corporate_food_control": -40}, {"food_revolution": 35}, {"economic_instability": 20}, {"cultural_tradition_preservation": 25}]}], "mechanics": {"cooking_minigames": {"description": "Мини-игры приготовления еды с точным таймингом и комбинациями ингредиентов", "features": ["ingredient_combination", "cooking_timing", "presentation_quality"]}, "smuggling_mechanics": {"description": "Система контрабанды с патрулями, укрытиями и альтернативными маршрутами", "features": ["route_planning", "stealth_movement", "risk_reward_balance"]}, "reputation_system": {"description": "Репутация среди разных групп: фермеры, контрабандисты, корпоративные шпионы", "impact_areas": ["access_to_resources", "npc_cooperation", "mission_difficulty"]}}, "easter_eggs": [{"id": "queens_royal_kitchen", "description": "Секретная королевская кухня с рецептами из прошлого", "discovery_method": "Найти спрятанный доступ в Букингемском дворце", "reward": "Рецепт королевского английского завтрака"}, {"id": "first_english_breakfast", "description": "Место, где был изобретен английский завтрак", "location": "Скрытый исторический маркер в старом Лондоне", "content": "Документы о происхождении традиции"}, {"id": "synthetic_vs_real", "description": "Эксперимент по сравнению синтетической и настоящей еды", "significance": "Показывает различия в питательной ценности и вкусе"}], "technical_notes": ["cooking_system: Реалистичная система приготовления с химическими реакциями ингредиентов", "food_decay: Система порчи продуктов, требующая быстрой доставки", "cultural_database: Обширная база данных британских кулинарных традиций", "procedural_generation: Случайная генерация рецептов на основе доступных ингредиентов"], "testing_checklist": ["cooking_balance: Мини-игры приготовления сбалансированы по сложности и времени", "smuggling_paths: Все маршруты контрабанды имеют логические альтернативы", "cultural_accuracy: Представление британской кулинарной традиции соответствует историческим фактам", "multiple_endings: Каждая ветвь сюжета влияет на доступность настоящей еды в мире", "ethical_depth: Моральные выборы затрагивают темы корпоративного контроля и культурного наследия"]}}}'::jsonb,
        '2.0.0', true) ON CONFLICT (quest_id) DO
UPDATE
    SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest
