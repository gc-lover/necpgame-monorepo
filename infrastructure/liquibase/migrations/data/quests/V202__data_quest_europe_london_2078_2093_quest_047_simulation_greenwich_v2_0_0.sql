-- Issue: #647
-- Import quest from: europe/london/2078-2093/quest-047-simulation-greenwich.yaml
-- Generated: 2025-12-23T18:23:00.000000

BEGIN;

-- Quest: quest-london-2078-047-simulation-greenwich
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements,
                                        objectives, rewards, branches, content_data, version, is_active)
VALUES ('quest-london-2078-047-simulation-greenwich', 'Лондон 2078-2093 — Симуляция Гринвича',
        'Квест про симуляцию Гринвича в Лондоне, период 2078-2093.',
        'faction', 40, null,
        '{"required_quests": [], "required_flags": [], "required_reputation": {"Britain_Underworld": 15, "Britain_Academia": 10}, "required_items": []}'::jsonb,
        '[{"id": "investigate_time_anomalies", "text": "Расследовать временные аномалии и доказательства манипуляции временем в Гринвиче", "type": "interact", "target": "temporal_anomaly_investigation", "count": 1, "optional": false}, {"id": "access_greenwich_core", "text": "Получить доступ к центральному комплексу управления временем в обсерватории", "type": "interact", "target": "greenwich_core_infiltration", "count": 1, "optional": false}, {"id": "synchronize_time_streams", "text": "Восстановить равновесие между разными временными потоками Лондона", "type": "interact", "target": "time_stream_synchronization", "count": 1, "optional": false}, {"id": "confront_executive", "text": "Встретиться с CEO ChronoCorp и принять решение о судьбе контроля времени", "type": "choice", "target": "chrono_corp_executive_confrontation", "count": 1, "optional": false}, {"id": "restore_time_balance", "text": "Привести временные потоки Лондона к равновесию и разрешить кризис", "type": "interact", "target": "temporal_balance_restoration", "count": 1, "optional": false}, {"id": "resolve_temporal_crisis", "text": "Разрешить этический кризис манипуляции временем и корпоративного контроля", "type": "interact", "target": "temporal_ethics_resolution", "count": 1, "optional": false}]'::jsonb,
        '{"experience": 7000, "currency": 0, "items": [{"item_id": "temporal_manipulator_implant", "quantity": 1}, {"item_id": "chronometer_gadget", "quantity": 1}, {"item_id": "time_crystal_artifact", "quantity": 1}, {"item_id": "greenwich_observatory_pass", "quantity": 1}], "reputation": {"Britain_Corporations": -25, "Britain_Citizens": 20, "Britain_Underworld": 25, "Britain_Academia": 30}, "flags": ["greenwich_temporal_investigator", "time_manipulation_expert", "chrono_corp_opposer"]}'::jsonb,
        '[{"branch_id": "democratize_time", "branch_name": "Демократизировать время", "conditions": {"choice": "democratize_time_path"}, "consequences": {"reputation_changes": {"Britain_Citizens": 50, "Britain_Corporations": -40}, "unlocks_quests": ["quest-britain-time-democracy"], "world_state": [{"key": "time_equality", "value": "established", "scope": "global"}, {"key": "temporal_chaos", "value": "moderate", "scope": "global"}, {"key": "corporate_time_control", "value": "abolished", "scope": "global"}, {"key": "democratic_innovation", "value": "thriving", "scope": "global"}], "flags": ["time_democratizer", "temporal_equality_activist"]}}, {"branch_id": "destroy_system", "branch_name": "Уничтожить систему", "conditions": {"choice": "destroy_system_path"}, "consequences": {"reputation_changes": {"Britain_Academia": 40, "Britain_Corporations": -60}, "unlocks_quests": ["quest-britain-temporal-stability"], "world_state": [{"key": "temporal_stability", "value": "restored", "scope": "global"}, {"key": "technological_regression", "value": "significant", "scope": "global"}, {"key": "corporate_time_control", "value": "destroyed", "scope": "global"}, {"key": "time_manipulation_availability", "value": "eliminated", "scope": "global"}], "flags": ["temporal_system_destroyer", "time_purification_hero"]}}, {"branch_id": "seize_control", "branch_name": "Захватить контроль", "conditions": {"choice": "seize_control_path"}, "consequences": {"reputation_changes": {"Britain_Underworld": 30, "Britain_Corporations": -20}, "unlocks_quests": ["quest-britain-temporal-tyranny"], "world_state": [{"key": "personal_temporal_power", "value": "absolute", "scope": "global"}, {"key": "player_influence", "value": "supreme", "scope": "global"}, {"key": "corporate_time_control", "value": "transferred", "scope": "global"}, {"key": "public_trust", "value": "eroded", "scope": "global"}], "flags": ["temporal_power_seizer", "time_lord"]}}]'::jsonb,
        '{"metadata": {"id": "quest-london-2078-047-simulation-greenwich", "title": "Лондон 2078-2093 — Симуляция Гринвича", "document_type": "canon", "category": "quest", "status": "content-ready", "version": "2.0.0", "last_updated": "2025-12-20T09:15:00Z", "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role": "narrative_author", "contact": "london@necp.game"}], "tags": ["london", "greenwich", "time-manipulation", "simulation", "cyberpunk-time", "choice-driven"], "topics": ["time-as-commodity", "reality-manipulation", "corporate-time-control", "temporal-ethics", "digital-immortality"], "related_systems": ["narrative-service"], "related_documents": [{"id": "timeline-author-quests-index", "relation": "references"}, {"id": "github-issue-647", "title": "GitHub Issue #647", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/647", "relation": "migrated_to", "migrated_at": "2025-11-22T23:40:27Z"}]}, "content": {"summary": "В 2078 году корпорация ''ChronoCorp'' захватила Гринвичскую обсерваторию и превратила ее в центр манипуляции временем. Время стало товаром: элита может ''перематывать'' реальность, отменяя ошибки прошлого, а бедные живут в ''замороженном'' времени. Игрок оказывается вовлечен в хакерскую операцию по взлому ''нулевого меридиана'' - точки, где сходятся все временные потоки. Кто контролирует время - контролирует реальность. Но цена свободы может оказаться слишком высокой.", "setting": {"location": "london", "time_period": "2078-2093", "atmosphere": "Гринвичская обсерватория - теперь огромный комплекс из хрома и неона, где время течет по-разному в разных секторах. Богатые живут в ''ускоренном времени'' - их жизнь пролетает мгновенно, позволяя достичь всего. Бедные существуют в ''замедленном времени'' - секунды тянутся часами. В воздухе витают голографические часы, показывающие разное время для разных людей. Корпоративные дроны патрулируют временные границы, предотвращая ''утечки времени''."}, "themes": ["time-as-economic-asset", "corporate-control-of-reality", "ethics-of-temporal-manipulation", "digital-vs-physical-existence", "freedom-through-chaos"], "main_objectives": [{"id": "investigate_time_anomalies", "title": "Расследовать временные аномалии", "description": "Найти доказательства манипуляции временем в Гринвиче", "type": "investigation", "required_skills": [{"name": "Investigation", "level": 4}, {"name": "Technical", "level": 3}]}, {"id": "access_greenwich_core", "title": "Получить доступ к ядру обсерватории", "description": "Проникнуть в центральный комплекс управления временем", "type": "infiltration", "required_skills": [{"name": "Hacking", "level": 4}, {"name": "Stealth", "level": 4}]}, {"id": "synchronize_time_streams", "title": "Синхронизировать временные потоки", "description": "Восстановить равновесие между разными временными потоками", "type": "technical", "required_skills": [{"name": "Technical", "level": 5}, {"name": "Programming", "level": 4}]}, {"id": "confront_executive", "title": "Противостоять руководству корпорации", "description": "Встретиться с CEO ChronoCorp и принять решение", "type": "confrontation", "required_skills": [{"name": "Social", "level": 4}, {"name": "Leadership", "level": 3}]}, {"id": "restore_time_balance", "title": "Восстановить временной баланс", "description": "Привести временные потоки Лондона к равновесию", "type": "resolution", "required_skills": [{"name": "Strategy", "level": 4}, {"name": "Influence", "level": 4}]}], "branching_choices": [{"id": "time_control_fate", "title": "Судьба контроля над временем", "description": "Кто будет контролировать манипуляцию временем?", "options": [{"id": "democratize_time", "title": "Демократизировать время", "description": "Сделать контроль времени доступным для всех", "consequences": [{"faction": "citizens", "change": 50}, {"faction": "corporations", "change": -40}, {"world_state": "time_equality", "change": 35}, {"player_reputation": "revolutionary", "change": 25}]}, {"id": "destroy_system", "title": "Уничтожить систему", "description": "Полностью разрушить возможность манипуляции временем", "consequences": [{"faction": "purists", "change": 40}, {"faction": "corporations", "change": -60}, {"world_state": "temporal_stability", "change": 30}, {"player_reputation": "destroyer", "change": 20}]}, {"id": "seize_control", "title": "Захватить контроль", "description": "Взять власть над временными потоками себе", "consequences": [{"faction": "player_allies", "change": 30}, {"faction": "corporations", "change": -20}, {"world_state": "personal_power", "change": 25}, {"player_reputation": "tyrant", "change": 15}]}]}], "npcs": [{"id": "ceo_chrono_corp", "name": "CEO ChronoCorp", "role": "corporate_leader", "personality": "visionary, ruthless, philosophical", "background": "Основатель корпорации, которая монополизировала время. Видит в контроле времени путь к совершенству человечества."}, {"id": "temporal_scientist", "name": "Временной ученый", "role": "researcher", "personality": "brilliant, unstable, conflicted", "background": "Главный разработчик системы манипуляции временем. Теперь сомневается в этичности своего изобретения."}, {"id": "time_refugee", "name": "Временной беженец", "role": "victim", "personality": "desperate, angry, resourceful", "background": "Человек, чье время было ''украдено'' корпорацией. Потерял семью и борется за восстановление справедливости."}, {"id": "chrononaut", "name": "Хрононавт", "role": "time_traveler", "personality": "enigmatic, wise, detached", "background": "Загадочная фигура, которая якобы путешествует во времени. Может быть корпоративным шпионом или настоящим путешественником."}, {"id": "observatory_guardian", "name": "Страж обсерватории", "role": "security_official", "personality": "loyal, disciplined, suspicious", "background": "Кибернетически усиленный охранник обсерватории. Абсолютно предан корпорации, но имеет свои сомнения."}], "dialogue_examples": [{"npc": "ceo_chrono_corp", "context": "philosophical_debate", "dialogue": "\"Время - это иллюзия, которую мы можем контролировать. Представьте мир, где ошибки прошлого можно отменить, где каждый может жить вечно в своем идеальном моменте. Мы не воруем время - мы его оптимизируем.\""}, {"npc": "temporal_scientist", "context": "confession", "dialogue": "\"Я создал монстра. Время должно течь естественно, но теперь оно - товар. Богатые живут годами в секундах, а бедные умирают, не прожив и дня. Я думал, что дарю бессмертие, но подарил лишь новую форму ада.\""}, {"npc": "time_refugee", "context": "emotional_appeal", "dialogue": "\"Моя дочь умерла от старости, пока я работал на корпорацию. Ее время украли, чтобы какой-то богач мог ''перепрожить'' свою вечеринку. Верните мне мое время! Верните мне мою жизнь!\""}], "skill_checks": [{"skill": "Hacking", "difficulty": "extreme", "context": "bypassing_temporal_firewalls", "success_outcome": "Доступ к временным серверам получен", "failure_outcome": "Система создает временную петлю, блокирующую прогресс"}, {"skill": "Technical", "difficulty": "high", "context": "synchronizing_time_streams", "success_outcome": "Временные потоки синхронизированы", "failure_outcome": "Создан временной парадокс, вызывающий хаос"}, {"skill": "Investigation", "difficulty": "medium", "context": "uncovering_time_theft", "success_outcome": "Найдены доказательства кражи времени", "failure_outcome": "Улики исчезают во временном потоке"}, {"skill": "Social", "difficulty": "high", "context": "convincing_chrononaut", "success_outcome": "Хрононавт делится знаниями о времени", "failure_outcome": "Хрононавт исчезает во временном разрыве"}], "rewards": [{"id": "temporal_manipulator", "name": "Временной манипулятор", "type": "cybernetic", "description": "Имплант, позволяющий замедлять или ускорять время вокруг", "rarity": "legendary"}, {"id": "chronometer_device", "name": "Хронометр", "type": "gadget", "description": "Устройство для измерения и стабилизации временных потоков", "rarity": "epic"}, {"id": "time_crystal", "name": "Временной кристалл", "type": "artifact", "description": "Кристалл, содержащий ''чистое время'' для манипуляций", "rarity": "rare"}, {"id": "observatory_access", "name": "Доступ к обсерватории", "type": "location_access", "description": "Пожизненный доступ к Гринвичской обсерватории", "rarity": "uncommon"}], "world_state_changes": [{"condition": "democratize_time_wins", "changes": [{"time_equality": 40}, {"temporal_chaos": 20}, {"corporate_time_control": -50}, {"democratic_innovation": 30}]}, {"condition": "destroy_system_wins", "changes": [{"temporal_stability": 35}, {"technological_regression": 15}, {"corporate_time_control": -60}, {"time_manipulation_availability": -40}]}, {"condition": "seize_control_wins", "changes": [{"personal_temporal_power": 45}, {"player_influence": 25}, {"corporate_time_control": -30}, {"public_trust": -20}]}], "mechanics": {"temporal_puzzles": {"description": "Головоломки, связанные с манипуляцией временем и причинно-следственными связями", "features": ["time_reversal", "parallel_timeline_management", "causality_loops"]}, "time_economy": {"description": "Система покупки и продажи времени как ресурса", "features": ["time_currency", "temporal_debt", "time_market_fluctuations"]}, "reality_instability": {"description": "Механика нестабильности реальности при чрезмерной манипуляции временем", "features": ["reality_glitches", "temporal_anomalies", "sanity_mechanics"]}}, "easter_eggs": [{"id": "prime_meridian_secret", "description": "Скрытая комната под нулевым меридианом с записями первых экспериментов", "discovery_method": "Точный расчет времени и координат", "reward": "Документы о происхождении временных технологий"}, {"id": "time_traveler_ghost", "description": "Призрак реального путешественника во времени из прошлого", "location": "Случайные появления в обсерватории", "content": "История о том, как корпорация украла технологию у настоящего изобретателя"}, {"id": "eternal_clock", "description": "Часы, показывающие ''истинное время'' вселенной", "significance": "Указывает на существование ''вневременной'' реальности"}], "technical_notes": ["temporal_engine: Комплексная система симуляции множественных временных потоков", "causality_system: Алгоритмы отслеживания причинно-следственных связей", "reality_stability: Механика предотвращения временных парадоксов", "procedural_content: Генерация уникальных временных аномалий"], "testing_checklist": ["temporal_logic: Все временные манипуляции следуют логичным правилам без парадоксов", "causality_balance: Изменения прошлого корректно влияют на настоящее", "ethical_choices: Моральные решения имеют глубокие последствия для мира", "time_mechanics: Система времени интуитивна и не вызывает путаницы", "multiple_endings: Каждая ветвь сюжета предлагает уникальную интерпретацию темы времени"]}}}'::jsonb,
        '2.0.0', true) ON CONFLICT (quest_id) DO
UPDATE
    SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest
