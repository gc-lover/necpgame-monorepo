-- Issue: #50
-- Import quest from: america\boston\2020-2029\quest-005-clam-chowder.yaml
-- Generated: 2025-12-21T02:15:33.864089

BEGIN;

-- Quest: quest-boston-2029-005-clam-chowder
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements,
                                        objectives, rewards, branches, content_data, version, is_active)
VALUES ('quest-boston-2029-005-clam-chowder', 'Бостон — New England Clam Chowder',
        'Игрок посещает культовый ресторан, пробует сливочный суп из моллюсков и получает временный бафф на выживаемость.',
        'side', 3, NULL,
        '{"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}'::jsonb,
        '[{"id": "find_restaurant", "text": "Найти рекомендованный ресторан морепродуктов и заказать фирменный clam chowder", "type": "interact", "target": "seafood_restaurant", "count": 1, "optional": false}, {"id": "learn_history", "text": "Изучить историю блюда и секреты приготовления у NPC-шефа", "type": "dialogue", "target": "chef_npc", "count": 1, "optional": false}, {"id": "taste_chowder", "text": "Попробовать суп в хлебной миске, оценить свежесть моллюсков и сливочный баланс", "type": "interact", "target": "food_item", "count": 1, "optional": false}, {"id": "discuss_rivalry", "text": "Обсудить rivalry с Manhattan chowder и сделать выбор в пользу Бостона", "type": "dialogue", "target": "npc_group", "count": 1, "optional": true}]'::jsonb,
        '{"experience": 600, "money": {"type": "eddies", "value": -20}, "reputation": {"gastronomy": 10}, "unlocks": {"achievements": [{"id": "chowder_gourmet", "name": "Чаудер-Гурман"}], "flags": []}}'::jsonb,
        '[]'::jsonb,
        '{"metadata": {"id": "quest-boston-2029-005-clam-chowder", "title": "Бостон — New England Clam Chowder", "document_type": "canon", "category": "quest", "status": "draft", "version": "2.0.0", "last_updated": "2025-12-06T11:00:00+00:00", "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}], "tags": ["boston", "cuisine", "clam-chowder"], "topics": ["timeline_author", "gastronomy"], "related_systems": ["narrative-service", "economy-service", "social-service"], "related_documents": [{"id": "github-issue-301", "title": "GitHub Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/301", "relation": "migrated_to", "migrated_at": "2025-11-22T19:25:00+00:00"}], "source": "shared/docs/knowledge/canon/lore/_03-lore/timeline-author/quests/america/boston/2020-2029/quest-005-clam-chowder.md", "visibility": "internal", "audience": ["concept", "narrative", "liveops"], "risk_level": "low"}, "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Гастрономическая визитка Бостона не формализована и не задействует социально-экономические механики города.", "goal": "Описать дегустационный квест clam chowder, чтобы связать его с событием городской кухни и бонусами к характеристикам.", "essence": "Игрок посещает культовый ресторан, пробует сливочный суп из моллюсков и получает временный бафф на выживаемость.", "key_points": ["Clam chowder подают в съедобной хлебной миске и сопровождают локальными традициями.", "Противостояние с томатным Manhattan chowder добавляет региональный конфликт.", "Квест повышает гастрономическую репутацию и может активировать цепочки social/economy.", "Бафф +20% HP на 6 часов усиливает связь еды и выживания."]}, "quest_definition": {"quest_type": "side", "level_min": 3, "level_max": null, "requirements": {"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}, "objectives": [{"id": "find_restaurant", "text": "Найти рекомендованный ресторан морепродуктов и заказать фирменный clam chowder", "type": "interact", "target": "seafood_restaurant", "count": 1, "optional": false}, {"id": "learn_history", "text": "Изучить историю блюда и секреты приготовления у NPC-шефа", "type": "dialogue", "target": "chef_npc", "count": 1, "optional": false}, {"id": "taste_chowder", "text": "Попробовать суп в хлебной миске, оценить свежесть моллюсков и сливочный баланс", "type": "interact", "target": "food_item", "count": 1, "optional": false}, {"id": "discuss_rivalry", "text": "Обсудить rivalry с Manhattan chowder и сделать выбор в пользу Бостона", "type": "dialogue", "target": "npc_group", "count": 1, "optional": true}], "rewards": {"experience": 600, "money": {"type": "eddies", "value": -20}, "reputation": {"gastronomy": 10}, "unlocks": {"achievements": [{"id": "chowder_gourmet", "name": "Чаудер-Гурман"}], "flags": []}}, "branches": []}, "content": {"sections": [{"id": "overview", "title": "Описание", "body": "Квест фокусируется на дегустации легендарного New England clam chowder. Игрок посещает ресторан морепродуктов,\\nзнакомится с историей блюда и узнаёт о кулинарных традициях региона.\\n", "mechanics_links": []}, {"id": "regional_highlights", "title": "Региональные отсылки", "body": "- Белый сливочный суп на основе моллюсков, картофеля, лука и сливок.\\n- Подача в хлебной миске, которую принято съедать после блюда.\\n- Противостояние с томатным Manhattan chowder подчёркивает региональную идентичность.\\n- Рестораны вроде Legal Sea Foods усиливают туристический поток.\\n", "mechanics_links": []}, {"id": "quest_flow", "title": "Этапы прохождения", "body": "1. Найти рекомендованный ресторан морепродуктов и заказать фирменный clam chowder.\\n2. Изучить историю блюда и секреты приготовления у NPC-шефа.\\n3. Попробовать суп в хлебной миске, оценить свежесть моллюсков и сливочный баланс.\\n4. Обсудить rivalry с Manhattan chowder и сделать выбор в пользу Бостона.\\n", "mechanics_links": []}, {"id": "rewards", "title": "Награды и эффекты", "body": "Квест выдаёт 600 опыта, уменьшает валюту на 20 единиц и добавляет временный бафф +20% HP на 6 часов. Игрок получает\\nдостижение «Чаудер-Гурман» и доступ к гастрономическим событиям.\\n", "mechanics_links": []}, {"id": "mechanics", "title": "Механики и темы", "body": "Гастрономическая и социальная механика: блюдо повышает выживаемость, укрепляет связи с местными NPC и стимулирует\\nэкономику ресторанов.\\n", "mechanics_links": []}, {"id": "connections", "title": "Связи и расширения", "body": "Квест поддерживает кулинарную линию Бостона, может участвовать в фестивалях еды, рейтингах ресторанов и цепочках\\nзаказов для игроков-кулинаров.\\n", "mechanics_links": []}]}, "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation": {"github_issue": 1204, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "0.1.0", "date": "2025-11-11", "author": "concept_director", "changes": "Конверсия квеста «Clam Chowder» в структурированный YAML."}, {"version": "2.0.0", "date": "2025-12-06", "author": "content_writer", "changes": "Добавлен quest_definition с полной структурой квеста согласно архитектуре системы квестов."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb,
        1, true) ON CONFLICT (quest_id) DO
UPDATE
    SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest