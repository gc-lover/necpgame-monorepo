-- Issue: #50
-- Import quest from: america\chicago\2020-2029\quest-006-chicago-style-hot-dog.yaml
-- Version: 2.0.0
-- Generated: 2025-12-07T01:14:45.528759

BEGIN;

-- Quest: quest-chicago-2020-2029-chicago-dog
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements, objectives, rewards, branches, content_data, version, is_active) VALUES ('quest-chicago-2020-2029-chicago-dog', 'Чикаго 2020-2029 — Chicago-style хот-дог', 'Миссия знакомит с уличной едой, подчёркивает запрет на кетчуп и добавляет социальный контекст.', 'side', 1, NULL, '{"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}'::jsonb, '[{"id": "find_hot_dog_stand", "text": "Найти рекомендованный киоск, например Portillo''s", "type": "interact", "target": "chicago_hot_dog_stand", "count": 1, "optional": false}, {"id": "assemble_canonical_hotdog", "text": "Собрать хот-дог строго по канону", "type": "interact", "target": "chicago_dog_assembly", "count": 1, "optional": false}, {"id": "test_ketchup_reaction", "text": "Проверить реакцию продавца при попытке добавить кетчуп", "type": "interact", "target": "ketchup_prohibition_test", "count": 1, "optional": false}, {"id": "taste_get_reputation", "text": "Продегустировать блюдо и получить социальную репутацию района", "type": "interact", "target": "hot_dog_tasting", "count": 1, "optional": false}]'::jsonb, '{"experience": 600, "money": -8, "items": [{"item_id": "achievement_chicago_hot_dog_master", "quantity": 1}], "reputation": {}, "unlocks": ["street_food_quests", "chicago_cuisine_access"]}'::jsonb, '[{"branch_id": "street_food_expert", "description": "Стать экспертом уличной еды", "consequences": {"skills": {"culinary": 20, "social": 15}, "reputation": {"Street_Food_Vendors": 20}, "unlocks": ["exclusive_street_food_access"]}}]'::jsonb, '{"metadata": {"id": "quest-chicago-2020-2029-chicago-dog", "title": "Чикаго 2020-2029 — Chicago-style хот-дог", "document_type": "canon", "category": "timeline-quest", "status": "draft", "version": "2.0.0", "last_updated": "2025-11-29T00:00:00+00:00", "concept_approved": true, "concept_reviewed_at": "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}], "tags": ["chicago", "cuisine", "street-food"], "topics": ["culinary_culture", "social_rituals"], "related_systems": ["narrative-service", "economy-service"], "related_documents": [{"id": "canon-lore-timeline-author-index", "relation": "references"}, {"id": "github-issue-1188", "title": "GitHub Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/1188", "relation": "migrated_to", "migrated_at": "2025-11-23T03:25:00+00:00"}], "source": "shared/docs/knowledge/canon/lore/timeline-author/quests/america/chicago/2020-2029/quest-006-chicago-style-hot-dog.md", "visibility": "internal", "audience": ["concept", "narrative"], "risk_level": "low"}, "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Требовалось зафиксировать знаковую гастрономическую традицию Чикаго и её неписаные правила.", "goal": "Описать квест, где игрок собирает оригинальный хот-дог с семью топпингами и учится культурному кодексу города.", "essence": "Миссия знакомит с уличной едой, подчёркивает запрет на кетчуп и добавляет социальный контекст.", "key_points": ["Chicago-style хот-дог подаётся в булке с маком и только с говяжьей сосиской.", "Семь топпингов создают вкус «протащенный через сад».", "Нарушение правила без кетчупа вызывает негативную реакцию NPC."]}, "quest_definition": {"quest_type": "side", "level_min": 1, "level_max": null, "requirements": {"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}, "objectives": [{"id": "find_hot_dog_stand", "text": "Найти рекомендованный киоск, например Portillo''s", "type": "interact", "target": "chicago_hot_dog_stand", "count": 1, "optional": false}, {"id": "assemble_canonical_hotdog", "text": "Собрать хот-дог строго по канону", "type": "interact", "target": "chicago_dog_assembly", "count": 1, "optional": false}, {"id": "test_ketchup_reaction", "text": "Проверить реакцию продавца при попытке добавить кетчуп", "type": "interact", "target": "ketchup_prohibition_test", "count": 1, "optional": false}, {"id": "taste_get_reputation", "text": "Продегустировать блюдо и получить социальную репутацию района", "type": "interact", "target": "hot_dog_tasting", "count": 1, "optional": false}], "rewards": {"experience": 600, "money": -8, "items": [{"item_id": "achievement_chicago_hot_dog_master", "quantity": 1}], "reputation": {}, "unlocks": ["street_food_quests", "chicago_cuisine_access"]}, "branches": [{"branch_id": "street_food_expert", "description": "Стать экспертом уличной еды", "consequences": {"skills": {"culinary": 20, "social": 15}, "reputation": {"Street_Food_Vendors": 20}, "unlocks": ["exclusive_street_food_access"]}}]}, "content": {"sections": [{"id": "overview", "title": "Описание", "body": "Найти культовый стенд, заказать оригинальный Chicago-style хот-дог и освоить местный этикет, доказывая знание городской\\nкультуры.\\n", "mechanics_links": ["mechanics/quests/quest-structure.yaml"], "assets": []}, {"id": "references", "title": "Региональные отсылки", "body": "- Булочка с маковыми семенами и говяжья сосиска — базовая основа рецепта.\\n- Семь топпингов включают горчицу, лук, relish, помидоры, маринованный огурец, перец sport pepper и сельдерейную соль.\\n- Фраза «Dragged through the garden» описывает богатство начинки.\\n", "mechanics_links": [], "assets": []}, {"id": "stages", "title": "Этапы", "body": "1. Найти рекомендованный киоск, например Portillo''s.\\n2. Собрать хот-дог строго по канону.\\n3. Проверить реакцию продавца при попытке добавить кетчуп.\\n4. Продегустировать блюдо и получить социальную репутацию района.\\n", "mechanics_links": ["mechanics/world/events/live-events-system.yaml"], "assets": []}, {"id": "rewards", "title": "Награды", "body": "- Опыт: 600.\\n- Валюта: -8.\\n- Бафф: +15% HP на 4 часа.\\n- Ачивка: «Чикагский Хот-Дог Мастер».\\n", "mechanics_links": ["mechanics/progression/progression-attributes-matrix.yaml"], "assets": []}]}, "appendix": {"glossary": [{"term": "Dragged through the garden", "definition": "Жаргон, описывающий большое количество овощных топпингов в Chicago-style хот-доге."}], "references": [], "decisions": []}, "implementation": {"github_issue": 1188, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "2.0.0", "date": "2025-11-29", "author": "content_writer", "changes": "Добавлена полная структура quest_definition с objectives, rewards и branches. Детализирован контент согласно концепции. Добавлены механики кулинарного квеста, уличной еды и культурных правил."}, {"version": "1.0.0", "date": "2025-11-12", "author": "concept_director", "changes": "Конвертирован квест «Chicago-style хот-дог» в формат знаний."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb, 1, true) ON CONFLICT (quest_id) DO UPDATE SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest