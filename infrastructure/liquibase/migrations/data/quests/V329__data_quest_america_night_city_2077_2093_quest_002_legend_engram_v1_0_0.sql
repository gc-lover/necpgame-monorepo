-- Issue: #50
-- Import quest from: america\night-city\2077-2093\quest-002-legend-engram.yaml
-- Version: 1.0.0
-- Generated: 2025-12-07T01:14:46.309165

BEGIN;

-- Quest: quest-night-city-2077-2093-legend-engram
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements, objectives, rewards, branches, content_data, version, is_active) VALUES ('quest-night-city-2077-2093-legend-engram', 'Night City 2077-2093 — Энграмма легенды', 'Квест на создание энграммы известного NPC. Игрок должен найти легендарную личность,
выполнить особые требования, и создать энграмму с уникальными характеристиками.
', 'main', 30, NULL, '{"required_quests": ["quest-night-city-2070-2077-first-engram"], "required_flags": ["first_engram_created", "relic_technology_unlocked"], "required_reputation": {"night_city": 50}, "required_items": []}'::jsonb, '[{"id": "find_legend_npc", "text": "Найти информацию о легендарном NPC, который согласен создать энграмму", "type": "explore", "target": "legend_npc_information", "count": 1, "optional": false}, {"id": "meet_legend", "text": "Встретиться с легендарным NPC и обсудить условия создания энграммы", "type": "interact", "target": "legend_npc_meeting", "count": 1, "optional": false}, {"id": "fulfill_requirements", "text": "Выполнить особые требования легенды: квест, репутация, или особое задание", "type": "interact", "target": "legend_special_requirements", "count": 1, "optional": false}, {"id": "acquire_high_tier_chip", "text": "Приобрести чип Relic Tier 3+ для создания энграммы легенды", "type": "collect", "target": "relic_chip_tier_3_plus", "count": 1, "optional": false}, {"id": "prepare_special_equipment", "text": "Обеспечить специальное оборудование для создания энграммы легенды", "type": "interact", "target": "special_equipment_preparation", "count": 1, "optional": false}, {"id": "create_legend_engram", "text": "Пройти процедуру создания энграммы легенды с особыми параметрами", "type": "interact", "target": "legend_engram_creation", "count": 1, "optional": false}, {"id": "configure_legend_engram", "text": "Настроить параметры энграммы: отношение, защита, уникальные характеристики", "type": "interact", "target": "legend_engram_configuration", "count": 1, "optional": false}, {"id": "receive_unique_rewards", "text": "Получить уникальные награды от легенды за создание энграммы", "type": "interact", "target": "legend_unique_rewards", "count": 1, "optional": false}]'::jsonb, '{"experience": 15000, "currency": 50000, "items": [{"id": "legend_engram", "name": "Engram: Legendary NPC", "quantity": 1}, {"id": "legend_unique_item", "name": "Unique Item from Legend", "quantity": 1}], "reputation": {"night_city": 30, "legend_faction": 50}, "flags": ["legend_engram_created", "legend_engram_available"]}'::jsonb, '[{"id": "high_tier_engram", "condition": "chip_tier >= 4", "objectives": [{"id": "create_tier_4_engram", "text": "Создать энграмму на чипе Tier 4+ с максимальными характеристиками", "type": "interact", "target": "tier_4_engram_creation", "count": 1, "optional": false}], "rewards": {"experience": 5000, "items": [{"id": "tier_4_legend_engram", "name": "Tier 4 Legendary Engram", "quantity": 1}]}}]'::jsonb, '{"metadata": {"id": "quest-night-city-2077-2093-legend-engram", "title": "Night City 2077-2093 — Энграмма легенды", "document_type": "canon", "category": "quests", "status": "draft", "version": "1.0.0", "last_updated": "2025-11-30T00:00:00+00:00", "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role": "content_writer", "contact": "content@necp.game"}], "tags": ["night-city", "engram", "legendary", "npc", "main-quest"], "topics": ["engram-creation", "legendary-npc", "special-requirements"], "related_systems": ["narrative-service", "quest-service", "character-service", "economy-service", "engram-system"], "related_documents": [{"id": "engram-chips-system-concept", "relation": "implements"}], "source": "", "visibility": "internal", "audience": ["concept", "narrative", "liveops"], "risk_level": "high"}, "review": {"chain": [{"role": "content_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Игрок хочет создать энграмму известного NPC - легендарной личности из мира Cyberpunk.\\nЭто требует особых условий, высоких требований и уникальных наград.\\n", "goal": "Создать энграмму легендарного NPC, выполнив особые требования и получив уникальные награды.\\n", "essence": "Квест на создание энграммы известного NPC. Игрок должен найти легендарную личность,\\nвыполнить особые требования, и создать энграмму с уникальными характеристиками.\\n", "key_points": ["Поиск легендарного NPC", "Выполнение особых требований", "Создание энграммы высокого тира", "Уникальные награды и навыки"]}, "quest_definition": {"quest_type": "main", "level_min": 30, "level_max": null, "requirements": {"required_quests": ["quest-night-city-2070-2077-first-engram"], "required_flags": ["first_engram_created", "relic_technology_unlocked"], "required_reputation": {"night_city": 50}, "required_items": []}, "objectives": [{"id": "find_legend_npc", "text": "Найти информацию о легендарном NPC, который согласен создать энграмму", "type": "explore", "target": "legend_npc_information", "count": 1, "optional": false}, {"id": "meet_legend", "text": "Встретиться с легендарным NPC и обсудить условия создания энграммы", "type": "interact", "target": "legend_npc_meeting", "count": 1, "optional": false}, {"id": "fulfill_requirements", "text": "Выполнить особые требования легенды: квест, репутация, или особое задание", "type": "interact", "target": "legend_special_requirements", "count": 1, "optional": false}, {"id": "acquire_high_tier_chip", "text": "Приобрести чип Relic Tier 3+ для создания энграммы легенды", "type": "collect", "target": "relic_chip_tier_3_plus", "count": 1, "optional": false}, {"id": "prepare_special_equipment", "text": "Обеспечить специальное оборудование для создания энграммы легенды", "type": "interact", "target": "special_equipment_preparation", "count": 1, "optional": false}, {"id": "create_legend_engram", "text": "Пройти процедуру создания энграммы легенды с особыми параметрами", "type": "interact", "target": "legend_engram_creation", "count": 1, "optional": false}, {"id": "configure_legend_engram", "text": "Настроить параметры энграммы: отношение, защита, уникальные характеристики", "type": "interact", "target": "legend_engram_configuration", "count": 1, "optional": false}, {"id": "receive_unique_rewards", "text": "Получить уникальные награды от легенды за создание энграммы", "type": "interact", "target": "legend_unique_rewards", "count": 1, "optional": false}], "rewards": {"experience": 15000, "currency": 50000, "items": [{"id": "legend_engram", "name": "Engram: Legendary NPC", "quantity": 1}, {"id": "legend_unique_item", "name": "Unique Item from Legend", "quantity": 1}], "reputation": {"night_city": 30, "legend_faction": 50}, "flags": ["legend_engram_created", "legend_engram_available"]}, "branches": [{"id": "high_tier_engram", "condition": "chip_tier >= 4", "objectives": [{"id": "create_tier_4_engram", "text": "Создать энграмму на чипе Tier 4+ с максимальными характеристиками", "type": "interact", "target": "tier_4_engram_creation", "count": 1, "optional": false}], "rewards": {"experience": 5000, "items": [{"id": "tier_4_legend_engram", "name": "Tier 4 Legendary Engram", "quantity": 1}]}}]}, "content": {"sections": [{"id": "overview", "title": "Обзор квеста", "body": "Квест на создание энграммы легендарного NPC. Игрок должен найти известную личность,\\nвыполнить особые требования, и создать энграмму с уникальными характеристиками и наградами.\\n", "mechanics_links": ["mechanics/progression/engram-chips-system-concept.md"], "assets": []}, {"id": "legend_npc", "title": "Легендарный NPC", "body": "Легендарный NPC может быть:\\n- Известный рокербой из прошлого\\n- Легендарный Netrunner\\n- Бывший корпоративный директор\\n- Известный медиа или фиксер\\n- Легендарный Solo\\nТребует особых условий для создания энграммы.\\n", "mechanics_links": [], "assets": []}, {"id": "special_requirements", "title": "Особые требования", "body": "Легенда может потребовать:\\n- Выполнение особого квеста\\n- Высокая репутация с фракцией\\n- Уникальный предмет или услуга\\n- Помощь в важном деле\\n- Доказательство достоинства\\n", "mechanics_links": [], "assets": []}, {"id": "unique_rewards", "title": "Уникальные награды", "body": "Энграмма легенды даёт:\\n- Уникальные навыки/перки\\n- Особые способности\\n- Исторические знания\\n- Специальные взаимодействия\\n- Уникальные комментарии\\n", "mechanics_links": [], "assets": []}]}, "appendix": {"glossary": [{"term": "Легендарная энграмма", "definition": "Энграмма известного NPC с уникальными характеристиками и наградами"}], "references": [{"id": "engram-chips-system-concept", "type": "concept", "relation": "references"}], "decisions": []}, "implementation": {"github_issue": 1547, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "1.0.0", "date": "2025-11-30", "author": "content_writer", "changes": "Создан квест \\"Энграмма легенды\\" - создание энграммы известного NPC в Night City"}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb, 1, true) ON CONFLICT (quest_id) DO UPDATE SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest