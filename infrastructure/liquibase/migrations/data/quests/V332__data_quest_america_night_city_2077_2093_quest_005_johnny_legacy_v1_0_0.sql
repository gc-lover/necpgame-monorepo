-- Issue: #50
-- Import quest from: america\night-city\2077-2093\quest-005-johnny-legacy.yaml
-- Version: 1.0.0
-- Generated: 2025-12-07T01:14:46.339049

BEGIN;

-- Quest: quest-night-city-2077-2093-johnny-legacy
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements, objectives, rewards, branches, content_data, version, is_active) VALUES ('quest-night-city-2077-2093-johnny-legacy', 'Night City 2077-2093 — Наследие Johnny', 'Квест на получение энграммы Johnny Silverhand. Игрок проходит сюжетную линию, связанную
с наследием Johnny, и получает уникальную историческую энграмму с особыми событиями.
', 'main', 40, NULL, '{"required_quests": ["quest-night-city-2070-2077-first-engram"], "required_flags": ["first_engram_created", "relic_technology_unlocked"], "required_reputation": {"night_city": 70}, "required_items": []}'::jsonb, '[{"id": "learn_about_johnny", "text": "Узнать о возможности получить энграмму Johnny Silverhand", "type": "interact", "target": "johnny_engram_information", "count": 1, "optional": false}, {"id": "investigate_johnny_legacy", "text": "Исследовать наследие Johnny Silverhand: места, люди, события", "type": "explore", "target": "johnny_legacy_investigation", "count": 1, "optional": false}, {"id": "find_johnny_engram_location", "text": "Найти место, где хранится энграмма Johnny Silverhand", "type": "explore", "target": "johnny_engram_location", "count": 1, "optional": false}, {"id": "overcome_obstacles", "text": "Преодолеть препятствия: безопасность, конкуренты, или защиту", "type": "interact", "target": "johnny_engram_obstacles", "count": 1, "optional": false}, {"id": "obtain_johnny_engram", "text": "Получить энграмму Johnny Silverhand", "type": "collect", "target": "johnny_silverhand_engram", "count": 1, "optional": false}, {"id": "install_johnny_engram", "text": "Установить энграмму Johnny в основной слот", "type": "interact", "target": "johnny_engram_installation", "count": 1, "optional": false}, {"id": "experience_johnny_events", "text": "Пережить уникальные события с энграммой Johnny", "type": "interact", "target": "johnny_unique_events", "count": 1, "optional": false}]'::jsonb, '{"experience": 30000, "currency": 100000, "items": [{"id": "johnny_silverhand_engram", "name": "Engram: Johnny Silverhand", "quantity": 1}, {"id": "johnny_legacy_item", "name": "Johnny Silverhand Legacy Item", "quantity": 1}], "reputation": {"night_city": 50, "rockerboys": 100}, "flags": ["johnny_engram_obtained", "johnny_legacy_completed"]}'::jsonb, '[{"id": "peaceful_path", "condition": "player_choice == ''peaceful''", "objectives": [{"id": "negotiate_johnny_engram", "text": "Договориться о получении энграммы мирным путём", "type": "interact", "target": "peaceful_negotiation", "count": 1, "optional": false}], "rewards": {"experience": 5000, "reputation": {"night_city": 20}}}, {"id": "aggressive_path", "condition": "player_choice == ''aggressive''", "objectives": [{"id": "fight_for_johnny_engram", "text": "Сразиться за энграмму Johnny", "type": "combat", "target": "johnny_engram_combat", "count": 1, "optional": false}], "rewards": {"experience": 10000, "currency": 50000}}]'::jsonb, '{"metadata": {"id": "quest-night-city-2077-2093-johnny-legacy", "title": "Night City 2077-2093 — Наследие Johnny", "document_type": "canon", "category": "quests", "status": "draft", "version": "1.0.0", "last_updated": "2025-11-30T00:00:00+00:00", "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role": "content_writer", "contact": "content@necp.game"}], "tags": ["night-city", "engram", "johnny-silverhand", "historical", "legendary", "main-quest"], "topics": ["historical-engram", "johnny-silverhand", "legendary-quest"], "related_systems": ["narrative-service", "quest-service", "character-service", "engram-system"], "related_documents": [{"id": "engram-chips-system-concept", "relation": "implements"}], "source": "", "visibility": "internal", "audience": ["concept", "narrative", "liveops"], "risk_level": "high"}, "review": {"chain": [{"role": "content_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Игрок узнаёт о возможности получить энграмму Johnny Silverhand - легендарной личности\\nиз истории Cyberpunk. Это требует сложного квеста и особых условий.\\n", "goal": "Найти и получить энграмму Johnny Silverhand, пройти сюжетную линию, и получить уникальную\\nэнграмму с особыми событиями и взаимодействиями.\\n", "essence": "Квест на получение энграммы Johnny Silverhand. Игрок проходит сюжетную линию, связанную\\nс наследием Johnny, и получает уникальную историческую энграмму с особыми событиями.\\n", "key_points": ["Поиск энграммы Johnny Silverhand", "Сюжетная линия наследия Johnny", "Уникальные события и взаимодействия", "Историческая значимость"]}, "quest_definition": {"quest_type": "main", "level_min": 40, "level_max": null, "requirements": {"required_quests": ["quest-night-city-2070-2077-first-engram"], "required_flags": ["first_engram_created", "relic_technology_unlocked"], "required_reputation": {"night_city": 70}, "required_items": []}, "objectives": [{"id": "learn_about_johnny", "text": "Узнать о возможности получить энграмму Johnny Silverhand", "type": "interact", "target": "johnny_engram_information", "count": 1, "optional": false}, {"id": "investigate_johnny_legacy", "text": "Исследовать наследие Johnny Silverhand: места, люди, события", "type": "explore", "target": "johnny_legacy_investigation", "count": 1, "optional": false}, {"id": "find_johnny_engram_location", "text": "Найти место, где хранится энграмма Johnny Silverhand", "type": "explore", "target": "johnny_engram_location", "count": 1, "optional": false}, {"id": "overcome_obstacles", "text": "Преодолеть препятствия: безопасность, конкуренты, или защиту", "type": "interact", "target": "johnny_engram_obstacles", "count": 1, "optional": false}, {"id": "obtain_johnny_engram", "text": "Получить энграмму Johnny Silverhand", "type": "collect", "target": "johnny_silverhand_engram", "count": 1, "optional": false}, {"id": "install_johnny_engram", "text": "Установить энграмму Johnny в основной слот", "type": "interact", "target": "johnny_engram_installation", "count": 1, "optional": false}, {"id": "experience_johnny_events", "text": "Пережить уникальные события с энграммой Johnny", "type": "interact", "target": "johnny_unique_events", "count": 1, "optional": false}], "rewards": {"experience": 30000, "currency": 100000, "items": [{"id": "johnny_silverhand_engram", "name": "Engram: Johnny Silverhand", "quantity": 1}, {"id": "johnny_legacy_item", "name": "Johnny Silverhand Legacy Item", "quantity": 1}], "reputation": {"night_city": 50, "rockerboys": 100}, "flags": ["johnny_engram_obtained", "johnny_legacy_completed"]}, "branches": [{"id": "peaceful_path", "condition": "player_choice == ''peaceful''", "objectives": [{"id": "negotiate_johnny_engram", "text": "Договориться о получении энграммы мирным путём", "type": "interact", "target": "peaceful_negotiation", "count": 1, "optional": false}], "rewards": {"experience": 5000, "reputation": {"night_city": 20}}}, {"id": "aggressive_path", "condition": "player_choice == ''aggressive''", "objectives": [{"id": "fight_for_johnny_engram", "text": "Сразиться за энграмму Johnny", "type": "combat", "target": "johnny_engram_combat", "count": 1, "optional": false}], "rewards": {"experience": 10000, "currency": 50000}}]}, "content": {"sections": [{"id": "overview", "title": "Обзор квеста", "body": "Квест на получение энграммы Johnny Silverhand. Игрок проходит сюжетную линию, связанную\\nс наследием Johnny, и получает уникальную историческую энграмму с особыми событиями.\\n", "mechanics_links": ["mechanics/progression/engram-chips-system-concept.md"], "assets": []}, {"id": "johnny_history", "title": "История Johnny", "body": "Johnny Silverhand:\\n- Умер: 2023 год\\n- Доступна энграмма: с 2077 года\\n- Легендарный рокербой и активист\\n- Уникальные бонусы и навыки\\n- Особые диалоги и события\\n", "mechanics_links": [], "assets": []}, {"id": "unique_events", "title": "Уникальные события", "body": "Энграмма Johnny даёт:\\n- Уникальные сюжетные события\\n- Особые диалоги\\n- Исторические знания\\n- Уникальные комментарии\\n- Специальные взаимодействия\\n", "mechanics_links": [], "assets": []}, {"id": "legacy_significance", "title": "Значение наследия", "body": "Получение энграммы Johnny:\\n- Высокая сюжетная значимость\\n- Уникальные награды\\n- Особые взаимодействия\\n- Историческая ценность\\n", "mechanics_links": [], "assets": []}]}, "appendix": {"glossary": [{"term": "Johnny Silverhand", "definition": "Легендарный рокербой и активист, умер в 2023 году, энграмма доступна с 2077 года"}], "references": [{"id": "engram-chips-system-concept", "type": "concept", "relation": "references"}], "decisions": []}, "implementation": {"github_issue": 1547, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "1.0.0", "date": "2025-11-30", "author": "content_writer", "changes": "Создан квест \\"Наследие Johnny\\" - получение энграммы Johnny Silverhand в Night City"}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb, 1, true) ON CONFLICT (quest_id) DO UPDATE SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest