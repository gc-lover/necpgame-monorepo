-- Issue: #50
-- Import quest from: america\night-city\2077-2093\quest-006-legend-hunt.yaml
-- Version: 1.0.0
-- Generated: 2025-12-07T01:14:46.349951

BEGIN;

-- Quest: quest-night-city-2077-2093-legend-hunt
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements, objectives, rewards, branches, content_data, version, is_active) VALUES ('quest-night-city-2077-2093-legend-hunt', 'Night City 2077-2093 — Поиск легенды', 'Квест на поиск исторической энграммы. Игрок проводит расследование, находит место хранения
энграммы, преодолевает препятствия, и получает уникальную историческую энграмму.
', 'side', 35, NULL, '{"required_quests": ["quest-night-city-2070-2077-first-engram"], "required_flags": ["first_engram_created", "relic_technology_unlocked"], "required_reputation": {"night_city": 60}, "required_items": []}'::jsonb, '[{"id": "hear_rumors", "text": "Услышать слухи о существовании исторической энграммы", "type": "interact", "target": "historical_engram_rumors", "count": 1, "optional": false}, {"id": "investigate_rumors", "text": "Исследовать слухи: найти источники информации о исторической энграмме", "type": "explore", "target": "rumor_investigation", "count": 1, "optional": false}, {"id": "find_clues", "text": "Найти зацепки: документы, люди, места, связанные с исторической энграммой", "type": "explore", "target": "historical_engram_clues", "count": 1, "optional": false}, {"id": "locate_engram_storage", "text": "Определить место хранения исторической энграммы", "type": "explore", "target": "engram_storage_location", "count": 1, "optional": false}, {"id": "overcome_security", "text": "Преодолеть систему безопасности или защиту хранилища", "type": "skill_check", "target": "storage_security_bypass", "skill_type": "netrunning", "skill_min": 0.7, "count": 1, "optional": true}, {"id": "obtain_historical_engram", "text": "Получить историческую энграмму", "type": "collect", "target": "historical_engram", "count": 1, "optional": false}, {"id": "verify_authenticity", "text": "Проверить подлинность исторической энграммы", "type": "interact", "target": "engram_authenticity_verification", "count": 1, "optional": false}]'::jsonb, '{"experience": 20000, "currency": 75000, "items": [{"id": "historical_engram", "name": "Historical Engram: Legendary Figure", "quantity": 1}, {"id": "investigation_tools", "name": "Advanced Investigation Tools", "quantity": 1}], "reputation": {"night_city": 30, "historians": 40}, "flags": ["historical_engram_obtained", "legend_hunt_completed"]}'::jsonb, '[{"id": "stealth_path", "condition": "player_choice == ''stealth''", "objectives": [{"id": "stealth_retrieval", "text": "Тайно получить энграмму без обнаружения", "type": "skill_check", "target": "stealth_engram_retrieval", "skill_type": "stealth", "skill_min": 0.7, "count": 1, "optional": false}], "rewards": {"experience": 5000, "items": [{"id": "stealth_master_achievement", "name": "Stealth Master Achievement", "quantity": 1}]}}, {"id": "combat_path", "condition": "player_choice == ''combat''", "objectives": [{"id": "combat_retrieval", "text": "Получить энграмму через бой", "type": "combat", "target": "combat_engram_retrieval", "count": 1, "optional": false}], "rewards": {"experience": 8000, "currency": 25000}}]'::jsonb, '{"metadata": {"id": "quest-night-city-2077-2093-legend-hunt", "title": "Night City 2077-2093 — Поиск легенды", "document_type": "canon", "category": "quests", "status": "draft", "version": "1.0.0", "last_updated": "2025-11-30T00:00:00+00:00", "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role": "content_writer", "contact": "content@necp.game"}], "tags": ["night-city", "engram", "historical", "investigation", "side-quest"], "topics": ["historical-engram", "investigation", "legendary-quest"], "related_systems": ["narrative-service", "quest-service", "character-service", "engram-system"], "related_documents": [{"id": "engram-chips-system-concept", "relation": "implements"}], "source": "", "visibility": "internal", "audience": ["concept", "narrative", "liveops"], "risk_level": "medium"}, "review": {"chain": [{"role": "content_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Игрок узнаёт о существовании исторической энграммы легендарной личности. Требуется\\nрасследование, чтобы найти и получить эту уникальную энграмму.\\n", "goal": "Найти историческую энграмму через расследование, преодолеть препятствия, и получить\\nуникальную энграмму с особыми характеристиками.\\n", "essence": "Квест на поиск исторической энграммы. Игрок проводит расследование, находит место хранения\\nэнграммы, преодолевает препятствия, и получает уникальную историческую энграмму.\\n", "key_points": ["Расследование местонахождения энграммы", "Поиск исторической энграммы", "Преодоление препятствий", "Получение уникальной энграммы"]}, "quest_definition": {"quest_type": "side", "level_min": 35, "level_max": null, "requirements": {"required_quests": ["quest-night-city-2070-2077-first-engram"], "required_flags": ["first_engram_created", "relic_technology_unlocked"], "required_reputation": {"night_city": 60}, "required_items": []}, "objectives": [{"id": "hear_rumors", "text": "Услышать слухи о существовании исторической энграммы", "type": "interact", "target": "historical_engram_rumors", "count": 1, "optional": false}, {"id": "investigate_rumors", "text": "Исследовать слухи: найти источники информации о исторической энграмме", "type": "explore", "target": "rumor_investigation", "count": 1, "optional": false}, {"id": "find_clues", "text": "Найти зацепки: документы, люди, места, связанные с исторической энграммой", "type": "explore", "target": "historical_engram_clues", "count": 1, "optional": false}, {"id": "locate_engram_storage", "text": "Определить место хранения исторической энграммы", "type": "explore", "target": "engram_storage_location", "count": 1, "optional": false}, {"id": "overcome_security", "text": "Преодолеть систему безопасности или защиту хранилища", "type": "skill_check", "target": "storage_security_bypass", "skill_type": "netrunning", "skill_min": 0.7, "count": 1, "optional": true}, {"id": "obtain_historical_engram", "text": "Получить историческую энграмму", "type": "collect", "target": "historical_engram", "count": 1, "optional": false}, {"id": "verify_authenticity", "text": "Проверить подлинность исторической энграммы", "type": "interact", "target": "engram_authenticity_verification", "count": 1, "optional": false}], "rewards": {"experience": 20000, "currency": 75000, "items": [{"id": "historical_engram", "name": "Historical Engram: Legendary Figure", "quantity": 1}, {"id": "investigation_tools", "name": "Advanced Investigation Tools", "quantity": 1}], "reputation": {"night_city": 30, "historians": 40}, "flags": ["historical_engram_obtained", "legend_hunt_completed"]}, "branches": [{"id": "stealth_path", "condition": "player_choice == ''stealth''", "objectives": [{"id": "stealth_retrieval", "text": "Тайно получить энграмму без обнаружения", "type": "skill_check", "target": "stealth_engram_retrieval", "skill_type": "stealth", "skill_min": 0.7, "count": 1, "optional": false}], "rewards": {"experience": 5000, "items": [{"id": "stealth_master_achievement", "name": "Stealth Master Achievement", "quantity": 1}]}}, {"id": "combat_path", "condition": "player_choice == ''combat''", "objectives": [{"id": "combat_retrieval", "text": "Получить энграмму через бой", "type": "combat", "target": "combat_engram_retrieval", "count": 1, "optional": false}], "rewards": {"experience": 8000, "currency": 25000}}]}, "content": {"sections": [{"id": "overview", "title": "Обзор квеста", "body": "Квест на поиск исторической энграммы. Игрок проводит расследование, находит место хранения\\nэнграммы, преодолевает препятствия, и получает уникальную историческую энграмму.\\n", "mechanics_links": ["mechanics/progression/engram-chips-system-concept.md"], "assets": []}, {"id": "investigation", "title": "Расследование", "body": "Игрок должен:\\n- Исследовать слухи и информацию\\n- Найти зацепки и документы\\n- Определить место хранения\\n- Преодолеть препятствия\\n", "mechanics_links": [], "assets": []}, {"id": "historical_figure", "title": "Историческая личность", "body": "Историческая энграмма может быть:\\n- Известный рокербой\\n- Легендарный Netrunner\\n- Бывший корпоративный директор\\n- Исторический активист\\n- Легендарный Solo\\n", "mechanics_links": [], "assets": []}, {"id": "unique_characteristics", "title": "Уникальные характеристики", "body": "Историческая энграмма даёт:\\n- Уникальные навыки/перки\\n- Исторические знания\\n- Особые взаимодействия\\n- Специальные комментарии\\n- Высокая ценность\\n", "mechanics_links": [], "assets": []}]}, "appendix": {"glossary": [{"term": "Историческая энграмма", "definition": "Энграмма известной исторической личности с уникальными характеристиками"}], "references": [{"id": "engram-chips-system-concept", "type": "concept", "relation": "references"}], "decisions": []}, "implementation": {"github_issue": 1547, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "1.0.0", "date": "2025-11-30", "author": "content_writer", "changes": "Создан квест \\"Поиск легенды\\" - поиск исторической энграммы в Night City"}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb, 1, true) ON CONFLICT (quest_id) DO UPDATE SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest