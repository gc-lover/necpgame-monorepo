-- Issue: #50
-- Import quest from: america\boston\2020-2029\quest-018-harvard-square-magic.yaml
-- Generated: 2025-12-21T02:15:33.969526

BEGIN;

-- Quest: quest-boston-2029-018-harvard-square-magic
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements,
                                        objectives, rewards, branches, content_data, version, is_active)
VALUES ('quest-boston-2029-018-harvard-square-magic', 'Бостон — Harvard Square Magic',
        'Игрок встречает харизматичного мага на Harvard Square, учится фокусам и участвует в интеллектуальных играх.',
        'side', 2, NULL,
        '{"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}'::jsonb,
        '[{"id": "find_magician", "text": "Найти уличного мага Professor Mystic на Harvard Square", "type": "travel", "target": "harvard_square_stage", "count": 1, "optional": false}, {"id": "watch_performance", "text": "Посмотреть представление с карточными фокусами и иллюзиями", "type": "interact", "target": "magic_show", "count": 1, "optional": false}, {"id": "learn_trick", "text": "Научиться простому карточному фокусу у мага", "type": "minigame", "target": "card_trick_tutorial", "count": 1, "optional": false}, {"id": "intellectual_challenge", "text": "Участвовать в игре ''Кто хочет стать магом?'' с вопросами о науке", "type": "minigame", "target": "science_quiz", "count": 1, "optional": false}, {"id": "tip_artist", "text": "Оставить чаевые магу и получить магическую открытку", "type": "interact", "target": "tip_jar", "count": 1, "optional": true}]'::jsonb,
        '{"experience": 600, "money": {"type": "eddies", "value": -15}, "reputation": {"education": 8, "entertainment": 10}, "unlocks": {"achievements": [{"id": "street_sorcerer", "name": "Уличный Волшебник"}], "flags": []}}'::jsonb,
        '[]'::jsonb,
        '{"metadata": {"id": "quest-boston-2029-018-harvard-square-magic", "title": "Бостон — Harvard Square Magic", "document_type": "canon", "category": "quest", "status": "approved", "version": "1.0.0", "last_updated": "2025-12-14T13:30:00+00:00", "concept_approved": true, "concept_reviewed_at": "2025-12-14T13:30:00+00:00", "owners": [{"role": "narrative_team", "contact": "narrative@necp.game"}], "tags": ["boston", "harvard", "education", "magic", "street-performance"], "topics": ["timeline_author", "intellectual", "entertainment"], "related_systems": ["education-service", "social-service", "magic-system"], "related_documents": [{"id": "questline-boston-education", "relation": "collection"}], "source": "knowledge/canon/lore/_03-lore/timeline-author/quests/america/boston/2020-2029/quest-018-harvard-square-magic.yaml", "visibility": "internal", "audience": ["concept", "narrative", "liveops"], "risk_level": "low"}, "review": {"chain": [{"role": "content_writer", "reviewer": "Content Writer Agent", "reviewed_at": "2025-12-14T13:30:00+00:00", "status": "approved"}], "next_actions": []}, "summary": {"problem": "Уличное искусство и магия Harvard Square не представлены в квестовой системе.", "goal": "Создать образовательный квест о встрече с уличным магом и интеллектуальных играх.", "essence": "Игрок встречает харизматичного мага на Harvard Square, учится фокусам и участвует в интеллектуальных играх.", "key_points": ["Harvard Square как центр интеллектуальной и артистической жизни.", "Сочетание магии, образования и уличного искусства.", "Взаимодействие с артистами и студентами.", "Темы креативности и академической свободы."]}, "quest_definition": {"quest_type": "side", "level_min": 2, "level_max": null, "requirements": {"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}, "objectives": [{"id": "find_magician", "text": "Найти уличного мага Professor Mystic на Harvard Square", "type": "travel", "target": "harvard_square_stage", "count": 1, "optional": false}, {"id": "watch_performance", "text": "Посмотреть представление с карточными фокусами и иллюзиями", "type": "interact", "target": "magic_show", "count": 1, "optional": false}, {"id": "learn_trick", "text": "Научиться простому карточному фокусу у мага", "type": "minigame", "target": "card_trick_tutorial", "count": 1, "optional": false}, {"id": "intellectual_challenge", "text": "Участвовать в игре ''Кто хочет стать магом?'' с вопросами о науке", "type": "minigame", "target": "science_quiz", "count": 1, "optional": false}, {"id": "tip_artist", "text": "Оставить чаевые магу и получить магическую открытку", "type": "interact", "target": "tip_jar", "count": 1, "optional": true}], "rewards": {"experience": 600, "money": {"type": "eddies", "value": -15}, "reputation": {"education": 8, "entertainment": 10}, "unlocks": {"achievements": [{"id": "street_sorcerer", "name": "Уличный Волшебник"}], "flags": []}}, "branches": []}, "content": {"sections": [{"id": "square_atmosphere", "title": "Атмосфера площади", "body": "Harvard Square — место встречи студентов, профессоров и артистов.\\nЗдесь сочетаются академическая атмосфера университета с уличным искусством и развлечениями.\\n", "mechanics_links": [], "assets": []}, {"id": "magical_performance", "title": "Магическое представление", "body": "- Карточные фокусы и иллюзии с научным объяснением.\\n- Мини-игры по обучению простым трюкам.\\n- Комбинация развлечения с образовательным элементом.\\n", "mechanics_links": [], "assets": []}, {"id": "intellectual_games", "title": "Интеллектуальные игры", "body": "Викторина с вопросами о науке, истории и культуре.\\nВозможность выиграть небольшие призы и уважение аудитории.\\nСоединение развлечения с образовательными целями.\\n", "mechanics_links": [], "assets": []}, {"id": "community_interaction", "title": "Взаимодействие с сообществом", "body": "Знакомство с другими артистами, студентами и местными жителями.\\nВозможность получить приглашения на другие представления и мероприятия.\\n", "mechanics_links": [], "assets": []}]}, "appendix": {"glossary": [{"term": "Harvard Square", "definition": "Центральная площадь Кембриджа, центр академической и артистической жизни Бостона"}], "references": [{"title": "Harvard Square History", "link": "https://en.wikipedia.org/wiki/Harvard_Square"}], "decisions": []}, "implementation": {"github_issue": 140875688, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "1.0.0", "date": "2025-12-14", "author": "content_writer_agent", "changes": "Создан квест уличной магии на Harvard Square с образовательным и развлекательным фокусом."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb,
        1, true) ON CONFLICT (quest_id) DO
UPDATE
    SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest