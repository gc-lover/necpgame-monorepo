-- Issue: #50
-- Import quest from: america\seattle\2020-2029\quest-009-seafood-salmon.yaml
-- Version: 2.0.0
-- Generated: 2025-12-07T01:14:46.590525

BEGIN;

-- Quest: canon-quest-seattle-2020-2029-seafood-salmon
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements, objectives, rewards, branches, content_data, version, is_active) VALUES ('canon-quest-seattle-2020-2029-seafood-salmon', 'Сиэтл 2020-2029 — «Морепродукты и лосось»', 'Игрок посещает Pike Place Market, наблюдает за шоу рыбных торговцев и дегустирует культовые блюда Сиэтла.', 'side', 3, NULL, '{"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}'::jsonb, '[{"id": "attend_fish_market_show", "text": "Присутствовать на выступлении продавцов, ловить летящую рыбу и записывать интервью о сезонности", "type": "interact", "target": "pike_place_fish_show", "count": 1, "optional": false}, {"id": "interview_vendors", "text": "Записать интервью с продавцами о сезонности. От выбора вопросов зависит доступ к редким продуктам", "type": "interact", "target": "seafood_vendor_interviews", "count": 2, "optional": false}, {"id": "taste_cedar_plank_salmon", "text": "Попробовать cedar plank salmon, краба Dungeness и суп clam chowder в ресторане", "type": "interact", "target": "seattle_seafood_tasting", "count": 3, "optional": false}, {"id": "compare_flavors", "text": "Сравнить вкус, описать ароматы и решить, какие блюда добавить в коллекцию гастрономических квестов", "type": "interact", "target": "flavor_comparison", "count": 1, "optional": false}]'::jsonb, '{"experience": 1000, "money": -50, "items": [{"item_id": "achievement_pacific_ambassador", "quantity": 1}], "reputation": {}, "unlocks": ["culinary_quests", "seafood_culture_access"]}'::jsonb, '[{"branch_id": "seafood_connoisseur", "description": "Стать знатоком морепродуктов", "consequences": {"skills": {"culinary": 25, "culture": 15}, "reputation": {"Seafood_Industry": 20}, "unlocks": ["exclusive_culinary_access"]}}]'::jsonb, '{"metadata": {"id": "canon-quest-seattle-2020-2029-seafood-salmon", "title": "Сиэтл 2020-2029 — «Морепродукты и лосось»", "document_type": "canon", "category": "timeline-author", "status": "draft", "version": "2.0.0", "last_updated": "2025-11-29T00:00:00+00:00", "concept_approved": true, "concept_reviewed_at": "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}], "tags": ["seattle", "quest", "cuisine", "seafood"], "topics": ["city_quests", "culinary_experience"], "related_systems": ["narrative-service", "gameplay-service", "quest-service", "character-service", "economy-service", "social-service", "culture-service"], "related_documents": [{"id": "github-issue-1066", "title": "GitHub Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/1066", "relation": "migrated_to", "migrated_at": "2025-11-23T02:35:00+00:00"}], "source": "shared/docs/knowledge/canon/lore/timeline-author/quests/america/seattle/2020-2029/quest-009-seafood-salmon.md", "visibility": "internal", "audience": ["concept", "narrative", "liveops"], "risk_level": "low"}, "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Кулинарная линия Сиэтла упоминала лосося лишь списком, без сценария и взаимодействий на рынке Пайк-Плейс.", "goal": "Создать гастрономический квест, раскрывающий локальные традиции приготовления тихоокеанского лосося и краба.", "essence": "Игрок посещает Pike Place Market, наблюдает за шоу рыбных торговцев и дегустирует культовые блюда Сиэтла.", "key_points": ["Фокус на свежести улова из Пьюджет-Саунд и Аляски.", "Демонстрация приготовления cedar plank salmon и подачи Dungeness crab.", "Социальные взаимодействия с поварами и туристами, формирующие кулинарную репутацию."]}, "quest_definition": {"quest_type": "side", "level_min": 3, "level_max": null, "requirements": {"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}, "objectives": [{"id": "attend_fish_market_show", "text": "Присутствовать на выступлении продавцов, ловить летящую рыбу и записывать интервью о сезонности", "type": "interact", "target": "pike_place_fish_show", "count": 1, "optional": false}, {"id": "interview_vendors", "text": "Записать интервью с продавцами о сезонности. От выбора вопросов зависит доступ к редким продуктам", "type": "interact", "target": "seafood_vendor_interviews", "count": 2, "optional": false}, {"id": "taste_cedar_plank_salmon", "text": "Попробовать cedar plank salmon, краба Dungeness и суп clam chowder в ресторане", "type": "interact", "target": "seattle_seafood_tasting", "count": 3, "optional": false}, {"id": "compare_flavors", "text": "Сравнить вкус, описать ароматы и решить, какие блюда добавить в коллекцию гастрономических квестов", "type": "interact", "target": "flavor_comparison", "count": 1, "optional": false}], "rewards": {"experience": 1000, "money": -50, "items": [{"item_id": "achievement_pacific_ambassador", "quantity": 1}], "reputation": {}, "unlocks": ["culinary_quests", "seafood_culture_access"]}, "branches": [{"branch_id": "seafood_connoisseur", "description": "Стать знатоком морепродуктов", "consequences": {"skills": {"culinary": 25, "culture": 15}, "reputation": {"Seafood_Industry": 20}, "unlocks": ["exclusive_culinary_access"]}}]}, "content": {"sections": [{"id": "overview", "title": "Описание", "body": "Кулинарные гиды проводят игрока по Pike Place Market и прибрежным ресторанам. Необходимо зафиксировать факты о добыче\\nлосося, освоить локальные рецепты и подготовить дегустацию.\\n", "mechanics_links": ["mechanics/quests/quest-structure.yaml"], "assets": []}, {"id": "market_show", "title": "Рыбный рынок", "body": "Игрок присутствует на выступлении продавцов, ловит летящую рыбу и записывает интервью о сезонности. От выбора вопросов\\nзависит доступ к редким продуктам.\\n", "mechanics_links": ["mechanics/world/events/live-events-system.yaml"], "assets": []}, {"id": "tasting", "title": "Дегустация", "body": "Ресторан предлагает cedar plank salmon, краба Dungeness и суп clam chowder. Игрок сравнивает вкус, описывает ароматы\\nи решает, какие блюда добавить в коллекцию гастрономических квестов.\\n", "mechanics_links": ["mechanics/social/social-dialogue.yaml"], "assets": []}, {"id": "regional_details", "title": "Региональные детали", "body": "- Источники улова: Пьюджет-Саунд, Аляска, побережье Тихого океана.\\n- Кедровые доски, придающие блюду дымный аромат.\\n- Терминалы доставки морепродуктов и логистика охлаждения.\\n", "mechanics_links": [], "assets": []}, {"id": "rewards", "title": "Награды и последствия", "body": "- XP: 1 000, Валюта: -50.\\n- Бафф «Лососевый гурман»: +30% HP на 10 часов.\\n- Ачивка «Посол Тихого океана».\\n", "mechanics_links": ["mechanics/progression/progression-attributes-matrix.yaml"], "assets": []}]}, "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation": {"github_issue": 1066, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "2.0.0", "date": "2025-11-29", "author": "content_writer", "changes": "Добавлена полная структура quest_definition с objectives, rewards и branches. Детализирован контент согласно концепции. Добавлены механики кулинарного квеста, морепродуктов и тихоокеанской кухни."}, {"version": "0.1.0", "date": "2025-11-12", "author": "concept_team", "changes": "Конвертация квеста «Морепродукты и лосось» в формат знаний."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb, 1, true) ON CONFLICT (quest_id) DO UPDATE SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest