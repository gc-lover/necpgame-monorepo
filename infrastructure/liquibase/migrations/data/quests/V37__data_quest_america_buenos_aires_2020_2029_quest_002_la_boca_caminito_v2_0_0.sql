-- Issue: #50
-- Import quest from: america\buenos-aires\2020-2029\quest-002-la-boca-caminito.yaml
-- Generated: 2025-12-21T02:15:33.999185

BEGIN;

-- Quest: quest-buenos-aires-2029-002-caminito
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements,
                                        objectives, rewards, branches, content_data, version, is_active)
VALUES ('quest-buenos-aires-2029-002-caminito', 'Буэнос-Айрес: La Boca и Caminito',
        'Игрок исследует яркие улицы La Boca, знакомится с артистами, посещает стадион Boca Juniors и ощущает атмосферу итальянских иммигрантов.',
        'side', 1, NULL,
        '{"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}'::jsonb,
        '[{"id": "walk_caminito", "text": "Прогулка по Caminito с фотографией разноцветных домов", "type": "interact", "target": "caminito_color_walk", "count": 1, "optional": false}, {"id": "talk_street_artists", "text": "Диалог с уличными артистами и танцорами, изучение мини-уроков танго", "type": "interact", "target": "street_artists_dialogue", "count": 1, "optional": false}, {"id": "visit_artist_workshop", "text": "Посещение мастерской художников, чтобы узнать о красках, оставшихся от кораблей", "type": "interact", "target": "artist_workshop_visit", "count": 1, "optional": false}, {"id": "explore_bombonera", "text": "Переход к стадиону Boca Juniors и знакомство с фан-культурой", "type": "interact", "target": "bombonera_stadium", "count": 1, "optional": false}, {"id": "final_event", "text": "Финальное событие: вечерняя milonga или матч, влияющий на репутацию героя", "type": "choice", "target": "final_event_choice", "count": 1, "optional": false}]'::jsonb,
        '{"xp": 1200, "currency": -20, "items": [], "reputation": {"aesthetics": 20}, "achievements": [{"id": "la_boca_master", "name": "Хозяин La Boca"}], "skill_boosts": {}}'::jsonb,
        '[]'::jsonb,
        '{"metadata": {"id": "quest-buenos-aires-2029-002-caminito", "title": "Буэнос-Айрес: La Boca и Caminito", "document_type": "canon", "category": "city-quest", "status": "approved", "version": "2.0.0", "last_updated": "2025-11-29T11:23:00+00:00", "concept_approved": true, "concept_reviewed_at": "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}], "tags": ["buenos-aires", "tourism", "tango"], "topics": ["city-lore"], "related_systems": ["social-mechanics"], "related_documents": [{"id": "github-issue-324", "title": "GitHub Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/324", "relation": "migrated_to", "migrated_at": "2025-11-22T19:40:00+00:00"}], "source": "shared/docs/knowledge/canon/lore/_03-lore/timeline-author/quests/america/buenos-aires/2020-2029/quest-002-la-boca-caminito.md", "visibility": "internal", "audience": ["concept", "narrative"], "risk_level": "low"}, "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Квестовая заметка описывает достопримечательности La Boca, но не структурирует опыт игрока и экономику района.", "goal": "Сформировать маршрут по Caminito с акцентом на культуру, арт и футбольное наследие.", "essence": "Игрок исследует яркие улицы La Boca, знакомится с артистами, посещает стадион Boca Juniors и ощущает атмосферу итальянских иммигрантов.", "key_points": ["Color walk по улице Caminito и встреча с уличными танцорами.", "Разбор истории окраски домов и влияния порта.", "Финальное посещение стадиона La Bombonera и фанатской зоны."]}, "quest_definition": {"quest_type": "side", "level_min": 1, "level_max": null, "requirements": {"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}, "objectives": [{"id": "walk_caminito", "text": "Прогулка по Caminito с фотографией разноцветных домов", "type": "interact", "target": "caminito_color_walk", "count": 1, "optional": false}, {"id": "talk_street_artists", "text": "Диалог с уличными артистами и танцорами, изучение мини-уроков танго", "type": "interact", "target": "street_artists_dialogue", "count": 1, "optional": false}, {"id": "visit_artist_workshop", "text": "Посещение мастерской художников, чтобы узнать о красках, оставшихся от кораблей", "type": "interact", "target": "artist_workshop_visit", "count": 1, "optional": false}, {"id": "explore_bombonera", "text": "Переход к стадиону Boca Juniors и знакомство с фан-культурой", "type": "interact", "target": "bombonera_stadium", "count": 1, "optional": false}, {"id": "final_event", "text": "Финальное событие: вечерняя milonga или матч, влияющий на репутацию героя", "type": "choice", "target": "final_event_choice", "count": 1, "optional": false}], "rewards": {"xp": 1200, "currency": -20, "items": [], "reputation": {"aesthetics": 20}, "achievements": [{"id": "la_boca_master", "name": "Хозяин La Boca"}], "skill_boosts": {}}, "branches": []}, "content": {"sections": [{"id": "overview", "title": "Кратко", "body": "- Квестовый ID: `BUENOSAIRES-2029-002`\\n- Тип: социальный, сложность легкая, формат solo, длительность 1–2 часа\\n- Локация: район La Boca, улица Caminito, стадион La Bombonera\\n", "mechanics_links": ["mechanics/quests/quest-system.yaml"]}, {"id": "route", "title": "Маршрут и этапы", "body": "1. Прогулка по Caminito с фотографией разноцветных домов.\\n2. Диалог с уличными артистами и танцорами, изучение мини-уроков танго.\\n3. Посещение мастерской художников, чтобы узнать о красках, оставшихся от кораблей.\\n4. Переход к стадиону Boca Juniors и знакомство с фан-культурой.\\n5. Финальное событие: вечерняя milonga или матч, влияющий на репутацию героя.\\n", "mechanics_links": ["mechanics/social/social-mechanics-overview.yaml"]}, {"id": "cultural_notes", "title": "Культурные детали", "body": "- Район сформирован итальянскими иммигрантами и славится яркой архитектурой.\\n- Уличные танго-сценки усиливают атмосферу и повышают social-score персонажа.\\n- Память о Диего Марадоне и клубе Boca Juniors поддерживает локальную мифологию.\\n", "mechanics_links": []}, {"id": "rewards", "title": "Награды", "body": "- 1200 XP, расходы 20 арг. кредитов на сувениры.\\n- Показатель «Эстетика» +20 и ачивка «Хозяин La Boca».\\n", "mechanics_links": ["mechanics/progression/progression-skills.yaml"]}]}, "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation": {"github_issue": 140891754, "needs_task": false, "queue_reference": ["shared/trackers/queues/vision/review.yaml#quest-buenos-aires-2029-002"], "blockers": []}, "history": [{"version": "2.0.0", "date": "2025-11-09", "author": "concept_team", "changes": "Конверсия квеста «La Boca и Caminito» в формат знаний."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb,
        1, true) ON CONFLICT (quest_id) DO
UPDATE
    SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest