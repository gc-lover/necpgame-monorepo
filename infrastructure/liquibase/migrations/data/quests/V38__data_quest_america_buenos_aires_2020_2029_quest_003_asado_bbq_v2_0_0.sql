-- Issue: #50
-- Import quest from: america\buenos-aires\2020-2029\quest-003-asado-bbq.yaml
-- Generated: 2025-12-21T02:15:34.005538

BEGIN;

-- Quest: quest-buenos-aires-2029-003-asado
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements,
                                        objectives, rewards, branches, content_data, version, is_active)
VALUES ('quest-buenos-aires-2029-003-asado', 'Буэнос-Айрес: Асадо',
        'Игрок в составе группы помогает parrillero, дегустирует мясо и поддерживает социальные связи за столом.',
        'side', 2, NULL,
        '{"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}'::jsonb,
        '[{"id": "get_invitation", "text": "Получить приглашение и подготовить продукты (стейки, колбасы, кишки)", "type": "interact", "target": "asado_preparation", "count": 1, "optional": false}, {"id": "help_parrillero", "text": "Помочь parrillero настраивать parrilla и контролировать степень прожарки", "type": "interact", "target": "grill_management", "count": 1, "optional": false}, {"id": "serve_malbec", "text": "Подобрать вина Malbec и закуски, обслужить гостей", "type": "interact", "target": "malbec_service", "count": 1, "optional": false}, {"id": "social_phase", "text": "Провести часовую социальную фазу общения и рассказов", "type": "interact", "target": "social_gathering", "count": 1, "optional": false}, {"id": "finish_ritual", "text": "Завершить ритуал общим тостом и семейной фотографией", "type": "interact", "target": "asado_toast", "count": 1, "optional": false}]'::jsonb,
        '{"xp": 2000, "currency": 0, "items": [], "reputation": {"social": 25}, "achievements": [{"id": "asado_master", "name": "Асадо мастер"}], "skill_boosts": {"hp_buff": 35}}'::jsonb,
        '[]'::jsonb,
        '{"metadata": {"id": "quest-buenos-aires-2029-003-asado", "title": "Буэнос-Айрес: Асадо", "document_type": "canon", "category": "city-quest", "status": "approved", "version": "2.0.0", "last_updated": "2025-11-29T11:23:00+00:00", "concept_approved": true, "concept_reviewed_at": "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}], "tags": ["buenos-aires", "cuisine", "social"], "topics": ["city-lore"], "related_systems": ["social-mechanics", "economy-service"], "related_documents": [{"id": "github-issue-324", "title": "GitHub Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/324", "relation": "migrated_to", "migrated_at": "2025-11-22T19:40:00+00:00"}], "source": "shared/docs/knowledge/canon/lore/_03-lore/timeline-author/quests/america/buenos-aires/2020-2029/quest-003-asado-bbq.md", "visibility": "internal", "audience": ["concept", "narrative"], "risk_level": "low"}, "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Нужна структурированная версия квеста про аргентинское asado как социальный ритуал.", "goal": "Описать подготовку, кулинарные этапы и групповое взаимодействие во время барбекю.", "essence": "Игрок в составе группы помогает parrillero, дегустирует мясо и поддерживает социальные связи за столом.", "key_points": ["Приглашение и сбор продуктов с фокусом на говядину пампасов.", "Управление грилем и Malbec как обязательный элемент.", "Долгий социальный бафф после удачного вечера."]}, "quest_definition": {"quest_type": "side", "level_min": 2, "level_max": null, "requirements": {"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}, "objectives": [{"id": "get_invitation", "text": "Получить приглашение и подготовить продукты (стейки, колбасы, кишки)", "type": "interact", "target": "asado_preparation", "count": 1, "optional": false}, {"id": "help_parrillero", "text": "Помочь parrillero настраивать parrilla и контролировать степень прожарки", "type": "interact", "target": "grill_management", "count": 1, "optional": false}, {"id": "serve_malbec", "text": "Подобрать вина Malbec и закуски, обслужить гостей", "type": "interact", "target": "malbec_service", "count": 1, "optional": false}, {"id": "social_phase", "text": "Провести часовую социальную фазу общения и рассказов", "type": "interact", "target": "social_gathering", "count": 1, "optional": false}, {"id": "finish_ritual", "text": "Завершить ритуал общим тостом и семейной фотографией", "type": "interact", "target": "asado_toast", "count": 1, "optional": false}], "rewards": {"xp": 2000, "currency": 0, "items": [], "reputation": {"social": 25}, "achievements": [{"id": "asado_master", "name": "Асадо мастер"}], "skill_boosts": {"hp_buff": 35}}, "branches": []}, "content": {"sections": [{"id": "overview", "title": "Кратко", "body": "- Квестовый ID: `BUENOSAIRES-2029-003`\\n- Формат: социальный ритуал, сложность легкая, 2–4 игрока, продолжительность 4+ часов\\n- Ключевые NPC: хозяин дома, parrillero, гости\\n", "mechanics_links": ["mechanics/quests/quest-system.yaml"]}, {"id": "stages", "title": "Этапы asado", "body": "1. Получить приглашение и подготовить продукты (стейки, колбасы, кишки).\\n2. Помочь parrillero настраивать parrilla и контролировать степень прожарки.\\n3. Подобрать вина Malbec и закуски, обслужить гостей.\\n4. Провести часовую социальную фазу общения и рассказов.\\n5. Завершить ритуал общим тостом и семейной фотографией.\\n", "mechanics_links": ["mechanics/social/social-mechanics-overview.yaml"]}, {"id": "cultural_notes", "title": "Культурные детали", "body": "- Асадо рассматривается как семейная и дружеская традиция Аргентины.\\n- Правильная техника жарки и очередность подачи блюд влияют на социальный рейтинг.\\n- Malbec и гитара усиливают атмосферу и дают бонусы морального духа.\\n", "mechanics_links": []}, {"id": "rewards", "title": "Награды", "body": "- 2000 XP и бафф «Сытость» (+35% HP на 12 часов).\\n- Социальная репутация с семьей и друзьями растет, ачивка «Асадо мастер».\\n", "mechanics_links": ["mechanics/progression/progression-skills.yaml"]}]}, "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation": {"github_issue": 140891754, "needs_task": false, "queue_reference": ["shared/trackers/queues/vision/review.yaml#quest-buenos-aires-2029-003"], "blockers": []}, "history": [{"version": "2.0.0", "date": "2025-11-09", "author": "concept_team", "changes": "Конверсия заметки об asado в структуру знаний."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb,
        1, true) ON CONFLICT (quest_id) DO
UPDATE
    SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest