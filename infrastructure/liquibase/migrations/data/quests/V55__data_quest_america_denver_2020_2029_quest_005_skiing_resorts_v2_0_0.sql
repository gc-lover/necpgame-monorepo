-- Issue: #50
-- Import quest from: america\denver\2020-2029\quest-005-skiing-resorts.yaml
-- Generated: 2025-12-13T21:13:33.487011

BEGIN;

-- Quest: quest-denver-2029-005-skiing-resorts
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements, objectives, rewards, branches, content_data, version, is_active) VALUES ('quest-denver-2029-005-skiing-resorts', 'Денвер: горнолыжные курорты Колорадо', 'Игрок едет из Денвера на курорт, катается по трассам «champagne powder» и завершает вечер в après-ski зоне.', 'side', 4, NULL, '{"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": ["ski_equipment"]}'::jsonb, '[{"id": "choose_resort", "text": "Выбрать курорт с нужным уровнем трасс", "type": "choice", "target": "ski_resort_selection", "count": 1, "optional": false}, {"id": "prepare_acclimatize", "text": "Пройти подготовку и акклиматизацию", "type": "interact", "target": "ski_preparation", "count": 1, "optional": false}, {"id": "ski_trails", "text": "Кататься по трассам, используя инженерные и спортивные проверки", "type": "interact", "target": "trail_skiing", "count": 1, "optional": false}, {"id": "collect_weather_data", "text": "Собрать данные о снегопаде и температуре", "type": "interact", "target": "weather_data_collection", "count": 1, "optional": false}, {"id": "finish_apres_ski", "text": "Завершить вечер в après-ski с социальными бонусами", "type": "interact", "target": "apres_ski_social", "count": 1, "optional": false}]'::jsonb, '{"xp": 3000, "currency": -200, "items": [], "reputation": {"sports": 30}, "achievements": [{"id": "rocky_mountains_skier", "name": "Лыжник Скалистых гор"}], "skill_boosts": {}}'::jsonb, '[]'::jsonb, '{"metadata": {"id": "quest-denver-2029-005-skiing-resorts", "title": "Денвер: горнолыжные курорты Колорадо", "document_type": "canon", "category": "city-quest", "status": "approved", "version": "2.0.0", "last_updated": "2025-11-29T06:40:00+00:00", "concept_approved": true, "concept_reviewed_at": "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}], "tags": ["denver", "skiing", "tourism"], "topics": ["city-lore"], "related_systems": ["social-mechanics", "progression-service"], "related_documents": [{"id": "github-issue-336", "title": "GitHub Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/336", "relation": "migrated_to", "migrated_at": "2025-11-22T19:45:00+00:00"}, {"id": "github-issue-454", "title": "GitHub Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/454", "relation": "migrated_to", "migrated_at": "2025-11-22T20:55:00+00:00"}], "source": "shared/docs/knowledge/canon/lore/_03-lore/timeline-author/quests/america/denver/2020-2029/quest-005-skiing-resorts.md", "visibility": "internal", "audience": ["concept", "narrative"], "risk_level": "medium"}, "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Конспект лыжных курортов не учитывает структуру выбора и риски высоты.", "goal": "Представить маршрут катания на Vail/Aspen/Breckenridge с учётом снежных условий и après-ski.", "essence": "Игрок едет из Денвера на курорт, катается по трассам «champagne powder» и завершает вечер в après-ski зоне.", "key_points": ["Выбор курорта и сложность трасс.", "Высокогорные риски и влияние высоты на выносливость.", "Социальные награды за участие в après-ski."]}, "quest_definition": {"quest_type": "side", "level_min": 4, "level_max": null, "requirements": {"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": ["ski_equipment"]}, "objectives": [{"id": "choose_resort", "text": "Выбрать курорт с нужным уровнем трасс", "type": "choice", "target": "ski_resort_selection", "count": 1, "optional": false}, {"id": "prepare_acclimatize", "text": "Пройти подготовку и акклиматизацию", "type": "interact", "target": "ski_preparation", "count": 1, "optional": false}, {"id": "ski_trails", "text": "Кататься по трассам, используя инженерные и спортивные проверки", "type": "interact", "target": "trail_skiing", "count": 1, "optional": false}, {"id": "collect_weather_data", "text": "Собрать данные о снегопаде и температуре", "type": "interact", "target": "weather_data_collection", "count": 1, "optional": false}, {"id": "finish_apres_ski", "text": "Завершить вечер в après-ski с социальными бонусами", "type": "interact", "target": "apres_ski_social", "count": 1, "optional": false}], "rewards": {"xp": 3000, "currency": -200, "items": [], "reputation": {"sports": 30}, "achievements": [{"id": "rocky_mountains_skier", "name": "Лыжник Скалистых гор"}], "skill_boosts": {}}, "branches": []}, "content": {"sections": [{"id": "overview", "title": "Кратко", "body": "- Квестовый ID: `DENVER-2029-005`\\n- Формат: спортивное событие, сложность средняя, solo.\\n- Локации: Vail, Aspen, Breckenridge (2 часа от Денвера).\\n", "mechanics_links": ["mechanics/quests/quest-system.yaml"]}, {"id": "route", "title": "Маршрут и активности", "body": "1. Выбрать курорт с нужным уровнем трасс.\\n2. Пройти подготовку и акклиматизацию.\\n3. Кататься по трассам, используя инженерные и спортивные проверки.\\n4. Собрать данные о снегопаде и температуре.\\n5. Завершить вечер в après-ski с социальными бонусами.\\n", "mechanics_links": ["mechanics/social/social-mechanics-overview.yaml"]}, {"id": "risks", "title": "Высокогорные риски", "body": "- Управление выносливостью при высотах 3 000+ м.\\n- Контроль лавин и погодных изменений.\\n- Возможность травм при падениях.\\n", "mechanics_links": []}, {"id": "rewards", "title": "Награды", "body": "- 3000 XP, расходы 200 кредитов на ски-пасс.\\n- Показатель «Спорт» +30, ачивка «Лыжник Скалистых гор».\\n- Доступ к спортивной линии Денвера.\\n", "mechanics_links": ["mechanics/progression/progression-skills.yaml"]}]}, "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation": {"github_issue": 140891910, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "2.0.0", "date": "2025-11-11", "author": "concept_team", "changes": "Конверсия квеста о горнолыжных курортах Колорадо в формат знаний."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb, 1, true) ON CONFLICT (quest_id) DO UPDATE SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest