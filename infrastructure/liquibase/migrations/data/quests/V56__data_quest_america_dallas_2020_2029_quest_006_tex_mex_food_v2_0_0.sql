-- Issue: #50
-- Import quest from: america\dallas\2020-2029\quest-006-tex-mex-food.yaml
-- Generated: 2025-12-14T16:03:04.374802

BEGIN;

-- Quest: quest-dallas-2029-006-tex-mex-food
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements, objectives, rewards, branches, content_data, version, is_active) VALUES ('quest-dallas-2029-006-tex-mex-food', 'Даллас — Tex-Mex кухня', 'Игрок выстраивает очередь в культовом Tex-Mex ресторане, изучает происхождение блюд и выбирает, делиться ли дегустацией с местными, влияя на баффы и репутацию.', 'side', 5, NULL, '{"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}'::jsonb, '[{"id": "find_restaurant", "text": "Найти ресторан с признанной кухней и занять очередь вместе с локальными фанатами", "type": "travel", "target": "tex_mex_restaurant", "count": 1, "optional": false}, {"id": "watch_fajitas", "text": "Наблюдать за шипящей подачей fajitas и получить мастер-класс от шефа", "type": "interact", "target": "chef_demonstration", "count": 1, "optional": false}, {"id": "choose_sharing", "text": "Принять решение — делиться ли блюдами с NPC и какие соусы выбрать, учитывая уровни остроты", "type": "dialogue", "target": "npc_dining_companions", "count": 1, "optional": false}, {"id": "finish_tasting", "text": "Завершить вечер дегустацией десерта или коктейля, фиксируя экономический эффект для района", "type": "interact", "target": "dessert_tasting", "count": 1, "optional": true}]'::jsonb, '{"experience": 800, "money": -20, "reputation": {}, "items": [], "unlocks": {"achievements": ["Tex-Mex гурман"], "flags": []}}'::jsonb, '[]'::jsonb, '{"metadata": {"id": "quest-dallas-2029-006-tex-mex-food", "title": "Даллас — Tex-Mex кухня", "document_type": "canon", "category": "quest", "status": "draft", "version": "2.0.0", "last_updated": "2025-12-06T10:50:00+00:00", "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}], "tags": ["dallas", "tex-mex", "food"], "topics": ["city_storylines", "food_culture"], "related_systems": ["narrative-service", "economy-service", "social-service"], "related_documents": [{"id": "master-timeline", "relation": "references"}, {"id": "quest-system", "relation": "aligns"}, {"id": "github-issue-332", "title": "GitHub Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/332", "relation": "migrated_to", "migrated_at": "2025-11-22T19:45:00+00:00"}], "source": "shared/docs/knowledge/canon/lore/_03-lore/timeline-author/quests/america/dallas/2020-2029/quest-006-tex-mex-food.md", "visibility": "internal", "audience": ["concept", "narrative", "liveops"], "risk_level": "low"}, "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Квест описывал блюда Tex-Mex списком без указания механик, влияния репутации и экономических крючков.", "goal": "Представить Tex-Mex как социальную и экономическую точку входа, мотивирующую игрока исследовать гастрономическую линию.", "essence": "Игрок выстраивает очередь в культовом Tex-Mex ресторане, изучает происхождение блюд и выбирает, делиться ли дегустацией с местными, влияя на баффы и репутацию.", "key_points": ["Отражены фирменные блюда и ритуалы техасско-мексиканской кухни.", "Социальные решения влияют на локальную экономику и отношения с NPC.", "Открываются рецепты и гастрономические активности в районе Deep Ellum."]}, "quest_definition": {"quest_type": "side", "level_min": 5, "level_max": null, "requirements": {"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}, "objectives": [{"id": "find_restaurant", "text": "Найти ресторан с признанной кухней и занять очередь вместе с локальными фанатами", "type": "travel", "target": "tex_mex_restaurant", "count": 1, "optional": false}, {"id": "watch_fajitas", "text": "Наблюдать за шипящей подачей fajitas и получить мастер-класс от шефа", "type": "interact", "target": "chef_demonstration", "count": 1, "optional": false}, {"id": "choose_sharing", "text": "Принять решение — делиться ли блюдами с NPC и какие соусы выбрать, учитывая уровни остроты", "type": "dialogue", "target": "npc_dining_companions", "count": 1, "optional": false}, {"id": "finish_tasting", "text": "Завершить вечер дегустацией десерта или коктейля, фиксируя экономический эффект для района", "type": "interact", "target": "dessert_tasting", "count": 1, "optional": true}], "rewards": {"experience": 800, "money": -20, "reputation": {}, "items": [], "unlocks": {"achievements": ["Tex-Mex гурман"], "flags": []}}, "branches": []}, "content": {"sections": [{"id": "overview", "title": "Описание", "body": "Игрок оказывается в легендарном Tex-Mex заведении, где sizzling-fajitas и queso становятся частью интерактивной сцены.\\nМини-игры на кухне показывают, как смешиваются техасские и мексиканские традиции, а выбор дегустации с жителями\\nусиливает социальные связи и раскрывает гастрономическую ветку Далласа.\\n", "mechanics_links": ["mechanics/quests/quest-system.yaml"], "assets": []}, {"id": "regional_highlights", "title": "Региональные отсылки", "body": "Fajitas, queso и замороженные маргариты остаются символами Tex-Mex. Огромные порции и острота habanero подчёркивают\\nтехасскую щедрость, а история происхождения блюд объясняет культурную гибридность региона.\\n", "mechanics_links": [], "assets": []}, {"id": "quest_flow", "title": "Этапы квеста", "body": "1. Найти ресторан с признанной кухней и занять очередь вместе с локальными фанатами.\\n2. Наблюдать за шипящей подачей fajitas и получить мастер-класс от шефа.\\n3. Принять решение — делиться ли блюдами с NPC и какие соусы выбрать, учитывая уровни остроты.\\n4. Завершить вечер дегустацией десерта или коктейля, фиксируя экономический эффект для района.\\n", "mechanics_links": ["mechanics/social/social-mechanics-overview.yaml"], "assets": []}, {"id": "rewards", "title": "Награды и эффекты", "body": "Квест начисляет 800 опыта, требует 20 единиц валюты и даёт бафф «Сытость» +25% HP на 8 часов. Игрок получает ачивку\\n«Tex-Mex гурман» и доступ к скидкам у локальных продавцов ингредиентов.\\n", "mechanics_links": ["mechanics/progression/classes-overview.yaml"], "assets": []}, {"id": "integration", "title": "Интеграции и последствия", "body": "Economy-service фиксирует рост продаж spice-наборов, social-service обновляет отношения с гастрономическими фракциями,\\nа narrative-service открывает ветку о подпольных кулинарных турнирах.\\n", "mechanics_links": [], "assets": []}]}, "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation": {"github_issue": 1178, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "0.1.0", "date": "2025-11-11", "author": "concept_team", "changes": "Структурирован квест «Tex-Mex кухня» с социально-экономическими интеграциями."}, {"version": "2.0.0", "date": "2025-12-06", "author": "content_writer", "changes": "Добавлен quest_definition с полной структурой квеста согласно архитектуре системы квестов."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb, 1, true) ON CONFLICT (quest_id) DO UPDATE SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest