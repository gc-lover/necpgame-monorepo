-- Issue: #50
-- Import quest from: cis\saint-petersburg\2020-2029\quest-010-flood-defense.yaml
-- Version: 1.0.0
-- Generated: 2025-12-07T01:14:47.724671

BEGIN;

-- Quest: quest-spb-2029-flood-defense
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements, objectives, rewards, branches, content_data, version, is_active) VALUES ('quest-spb-2029-flood-defense', 'Санкт-Петербург 2020-2029 — Защита от наводнения', 'Игроки получают штормовое предупреждение, проводят эвакуацию и инженерные работы, а затем сражаются со стихией, используя лодки и дроны.', 'side', NULL, NULL, '{}'::jsonb, '[]'::jsonb, '{}'::jsonb, '[]'::jsonb, '{"metadata": {"id": "quest-spb-2029-flood-defense", "title": "Санкт-Петербург 2020-2029 — Защита от наводнения", "document_type": "canon", "category": "timeline-quest", "status": "draft", "version": "1.0.0", "last_updated": "2025-11-13T00:00:00+00:00", "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}], "tags": ["saint-petersburg", "disaster", "flood"], "topics": ["emergency_response", "cooperative_play"], "related_systems": ["narrative-service", "liveops-service", "emergency-service"], "related_documents": [], "source": "shared/docs/knowledge/canon/lore/timeline-author/quests/cis/saint-petersburg/2020-2029/quest-010-flood-defense.md", "visibility": "internal", "audience": ["concept", "narrative", "liveops"], "risk_level": "high"}, "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Петербургу нужна масштабная кооперативная миссия, отражающая историческую угрозу наводнений и современную технологичную защиту.", "goal": "Скоординировать команды игроков для укрепления дамбы, эвакуации жителей и спасения города во время шторма.", "essence": "Игроки получают штормовое предупреждение, проводят эвакуацию и инженерные работы, а затем сражаются со стихией, используя лодки и дроны.", "key_points": ["Таймер до шторма задает высокий накал и необходимость четкой координации.", "Успех сохраняет инфраструктуру и повышает репутацию города.", "Провал приводит к катастрофическим последствиям и влияет на последующие события."]}, "content": {"sections": [{"id": "overview", "title": "Описание", "body": "Квест моделирует катастрофическое наводнение в Санкт-Петербурге. Игроки работают вместе, чтобы защитить дамбу, эвакуировать жителей\\nи удержать штормовые волны от Дворцовой площади.\\n", "mechanics_links": [], "assets": []}, {"id": "stages", "title": "Этапы", "body": "1. Получить штормовое предупреждение и активировать план гражданской обороны.\\n2. Организовать эвакуацию низинных районов и доставку жителей в безопасные купола.\\n3. Укрепить дамбу, разместить насосы и энергетические щиты до наступления шторма.\\n4. Пережить штурм стихии: патрулировать улицы на лодках и дронах, спасая оставшихся людей.\\n5. Провести послештурмовой аудит ущерба и распределить ресурсы на восстановление.\\n", "mechanics_links": [], "assets": []}, {"id": "regional_details", "title": "Региональные детали", "body": "Шторм накрывает Неву, Медный всадник частично погружается в воду, а Дворцовая площадь превращается в озеро. Городские сирены и старые\\nзаписи Пушкина о наводнении создают исторический контекст. На дамбе активируются современные шлюзы и лазерные фортификации.\\n", "mechanics_links": [], "assets": []}, {"id": "rewards", "title": "Награды", "body": "- Успех: 5 000 XP, репутация «Городские спасатели» +15, доступ к уникальным спасательным модулям.\\n- Провал: отрицательная репутация и серия восстановительных миссий.\\n", "mechanics_links": [], "assets": []}, {"id": "mechanics", "title": "Механики", "body": "Командный disaster-event, таймеры, управление ресурсами, спасательные операции на лодках и дронах, динамическая смена погоды.\\n", "mechanics_links": [], "assets": []}, {"id": "connections", "title": "Связи", "body": "Связан с климатической веткой Петербурга, влияет на глобальные события о климатических рисках и открывает линии восстановления города.\\n", "mechanics_links": [], "assets": []}]}, "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation": {"github_issue": 803, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "1.0.0", "date": "2025-11-13", "author": "concept_team", "changes": "Квест «Защита от наводнения» адаптирован под шаблон Concept Director."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb, 1, true) ON CONFLICT (quest_id) DO UPDATE SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest