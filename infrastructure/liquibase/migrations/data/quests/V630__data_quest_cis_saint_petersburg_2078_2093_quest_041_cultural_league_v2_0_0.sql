-- Issue: #50
-- Import quest from: cis\saint-petersburg\2078-2093\quest-041-cultural-league.yaml
-- Version: 2.0.0
-- Generated: 2025-12-07T01:14:47.880900

BEGIN;

-- Quest: quest-spb-2093-cultural-league
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements, objectives, rewards, branches, content_data, version, is_active) VALUES ('quest-spb-2093-cultural-league', 'Санкт-Петербург 2078-2093 — Культурная лига', 'Город собирает ресурсы, восстанавливает ключевые площадки, устраивает фестиваль и защищает звание культурной столицы в международном финале.', 'main', 15, NULL, '{"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}'::jsonb, '[{"id": "nominate_petersburg", "text": "Собрать подписи союзников, подготовить досье о культурном наследии и запустить рекламные кампании для номинации Петербурга", "type": "interact", "target": "cultural_league_nomination", "count": 1, "optional": false}, {"id": "restore_venues", "text": "Восстановить десять знаковых объектов: Эрмитаж, Мариинку, Русский музей и другие", "type": "perform", "target": "cultural_venues_restoration", "count": 10, "optional": false}, {"id": "organize_festival", "text": "Организовать фестиваль искусств: оперные вечера, балетные постановки, цифровые арт-инсталляции и уличные карнавалы", "type": "interact", "target": "arts_festival_organization", "count": 1, "optional": false}, {"id": "compete_with_rivals", "text": "Провести дипломатические встречи с городами-конкурентами, организовать обмен коллекциями и подготовить презентации", "type": "interact", "target": "cultural_competition_diplomacy", "count": 1, "optional": false}, {"id": "participate_in_voting", "text": "Участвовать в голосовании международных судей и игроков за фаворита культурной столицы", "type": "interact", "target": "cultural_league_voting", "count": 1, "optional": false}]'::jsonb, '{"experience": 15000, "currency": 0, "items": [{"id": "cultural_capital_title", "name": "Титул «Культурная столица мира»", "quantity": 1}], "reputation": {"International_Cultural_League": 50}, "flags": ["cultural_league_winner_achievement"]}'::jsonb, '[{"branch_id": "victory", "description": "Победа в культурной лиге", "consequences": {"experience": 15000, "reputation": {"International_Cultural_League": 50, "Petersburg_Culture": 30}, "unlocks": ["cultural_capital_season_bonuses", "exclusive_cultural_rewards"]}}, {"branch_id": "defeat", "description": "Поражение в культурной лиге", "consequences": {"experience": 10000, "reputation": {"International_Cultural_League": 20, "Petersburg_Culture": 10}, "unlocks": ["cultural_league_revenge_quest"]}}]'::jsonb, '{"metadata": {"id": "quest-spb-2093-cultural-league", "title": "Санкт-Петербург 2078-2093 — Культурная лига", "document_type": "canon", "category": "timeline-quest", "status": "draft", "version": "2.0.0", "last_updated": "2025-12-01T21:47:00+00:00", "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}], "tags": ["saint-petersburg", "competition", "culture"], "topics": ["liveops_event", "international_relations"], "related_systems": ["narrative-service", "gameplay-service", "quest-service", "character-service", "economy-service", "liveops-service", "social-service", "culture-service"], "related_documents": [{"id": "github-issue-798", "title": "GitHub Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/798", "relation": "migrated_to", "migrated_at": "2025-11-23T00:35:00+00:00"}], "source": "shared/docs/knowledge/canon/lore/timeline-author/quests/cis/saint-petersburg/2078-2093/quest-041-cultural-league.md", "visibility": "internal", "audience": ["concept", "narrative", "liveops"], "risk_level": "high"}, "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Финалу сезона требуется масштабное культурное событие, где города соревнуются за титул мировой столицы искусства.", "goal": "Организовать Культурную лигу с участием Санкт-Петербурга и мировых мегаполисов, подготовить презентации и провести голосование игроков.", "essence": "Город собирает ресурсы, восстанавливает ключевые площадки, устраивает фестиваль и защищает звание культурной столицы в международном финале.", "key_points": ["Нужно синхронизировать восстановление музеев, фестивали и работу с судьями.", "Игроки участвуют в коллаборациях с городами-конкурентами, влияя на общий рейтинг.", "Итог голосования задаёт глобальные бонусы и сюжетные последствия для следующей лиги."]}, "quest_definition": {"quest_type": "main", "level_min": 15, "level_max": null, "requirements": {"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}, "objectives": [{"id": "nominate_petersburg", "text": "Собрать подписи союзников, подготовить досье о культурном наследии и запустить рекламные кампании для номинации Петербурга", "type": "interact", "target": "cultural_league_nomination", "count": 1, "optional": false}, {"id": "restore_venues", "text": "Восстановить десять знаковых объектов: Эрмитаж, Мариинку, Русский музей и другие", "type": "perform", "target": "cultural_venues_restoration", "count": 10, "optional": false}, {"id": "organize_festival", "text": "Организовать фестиваль искусств: оперные вечера, балетные постановки, цифровые арт-инсталляции и уличные карнавалы", "type": "interact", "target": "arts_festival_organization", "count": 1, "optional": false}, {"id": "compete_with_rivals", "text": "Провести дипломатические встречи с городами-конкурентами, организовать обмен коллекциями и подготовить презентации", "type": "interact", "target": "cultural_competition_diplomacy", "count": 1, "optional": false}, {"id": "participate_in_voting", "text": "Участвовать в голосовании международных судей и игроков за фаворита культурной столицы", "type": "interact", "target": "cultural_league_voting", "count": 1, "optional": false}], "rewards": {"experience": 15000, "currency": 0, "items": [{"id": "cultural_capital_title", "name": "Титул «Культурная столица мира»", "quantity": 1}], "reputation": {"International_Cultural_League": 50}, "flags": ["cultural_league_winner_achievement"]}, "branches": [{"branch_id": "victory", "description": "Победа в культурной лиге", "consequences": {"experience": 15000, "reputation": {"International_Cultural_League": 50, "Petersburg_Culture": 30}, "unlocks": ["cultural_capital_season_bonuses", "exclusive_cultural_rewards"]}}, {"branch_id": "defeat", "description": "Поражение в культурной лиге", "consequences": {"experience": 10000, "reputation": {"International_Cultural_League": 20, "Petersburg_Culture": 10}, "unlocks": ["cultural_league_revenge_quest"]}}]}, "content": {"sections": [{"id": "nomination", "title": "Номинация Петербурга", "body": "Город объявляет о претензии на титул культурной столицы мира. Игроки собирают подписи союзников, готовят досье о наследии и запускают\\nрекламные кампании, чтобы войти в шорт-лист международного конкурса.\\n", "mechanics_links": [], "assets": []}, {"id": "restoration", "title": "Восстановление площадок", "body": "Требуется восстановить десять знаковых объектов: Эрмитаж, Мариинку, Русский музей и другие. Игроки выполняют задания на ремонт, сбор\\nэкспонатов, настройку систем безопасности и подготовку выставок.\\n", "mechanics_links": [], "assets": []}, {"id": "festival", "title": "Фестиваль искусств", "body": "Петербург проводит серию мероприятий: оперные вечера, балетные постановки, цифровые арт-инсталляции и уличные карнавалы. Игроки координируют\\nрасписание, приглашения мировых артистов и трансляции для глобальной аудитории.\\n", "mechanics_links": [], "assets": []}, {"id": "competition", "title": "Соперники и презентации", "body": "Противники — Москва, Лондон, Париж и другие города. Игроки проводят дипломатические встречи, организуют обмен коллекциями и готовят\\nпрезентации, подсвечивая уникальные черты Петербурга как «окна в Европу».\\n", "mechanics_links": [], "assets": []}, {"id": "voting", "title": "Голосование и финал", "body": "Международные судьи и игроки голосуют за фаворита. Результаты зависят от выполненных активностей, отзывов гостей и активности союзников.\\nВ случае победы Петербург получает титул и глобальные бонусы сезона.\\n", "mechanics_links": [], "assets": []}, {"id": "rewards", "title": "Награды", "body": "- Победа: 15 000 XP, титул «Культурная столица мира», рост туристических доходов и эксклюзивные косметические награды.\\n- Поражение: 10 000 XP, репутация сохранена, но требуется реванш в следующем цикле.\\n", "mechanics_links": [], "assets": []}]}, "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation": {"github_issue": 798, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "2.0.0", "date": "2025-12-01", "author": "content_writer", "changes": "Добавлена полная структура quest_definition с objectives, rewards и branches. Детализирован контент согласно концепции. Добавлены механики культурного соревнования и международных отношений."}, {"version": "1.0.0", "date": "2025-11-13", "author": "concept_team", "changes": "Квест «Культурная лига» адаптирован под шаблон Concept Director."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb, 1, true) ON CONFLICT (quest_id) DO UPDATE SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest