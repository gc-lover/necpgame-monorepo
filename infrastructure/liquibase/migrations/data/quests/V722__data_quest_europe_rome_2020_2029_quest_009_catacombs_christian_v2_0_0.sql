-- Issue: #50
-- Import quest from: europe\rome\2020-2029\quest-009-catacombs-christian.yaml
-- Generated: 2025-12-21T02:15:37.596199

BEGIN;

-- Quest: canon-quest-rome-catacombs-christian
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements,
                                        objectives, rewards, branches, content_data, version, is_active)
VALUES ('canon-quest-rome-catacombs-christian', 'Рим 2020-2029 — Христианские катакомбы', 'Группа игроков спускается в катакомбы Сан Каллист, изучает лабиринты раннехристианских захоронений, взаимодействует с подземными
жителями и охотится за тайной криптой, рискуя навсегда потеряться.
', 'exploration', 10, 50, '{"completed_quests": [], "flags": []}'::jsonb,
        '[{"id": "descend_catacombs", "type": "location", "description": "Спуститься в катакомбы San Callisto", "required": true}, {"id": "explore_tunnels", "type": "exploration", "description": "Пройти лабиринт туннелей", "required": true}, {"id": "study_frescoes", "type": "interaction", "description": "Изучить фрески и святые захоронения", "required": true}, {"id": "find_crypt", "type": "location", "description": "Отыскать секретную крипту", "required": true}]'::jsonb,
        '{"experience": 3000, "money": {"type": "eddies", "value": 0}, "reputation": {"religion": 25}, "unlocks": {"achievements": [{"id": "catacomb_explorer", "name": "Catacomb Explorer"}], "flags": []}}'::jsonb,
        '[]'::jsonb,
        '{"metadata": {"id": "canon-quest-rome-catacombs-christian", "title": "Рим 2020-2029 — Христианские катакомбы", "document_type": "canon", "category": "quest", "status": "draft", "version": "2.0.0", "last_updated": "2025-12-06T12:00:00+00:00", "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role": "narrative_lead", "contact": "narrative@necp.game"}], "tags": ["rome", "catacombs", "religion"], "topics": ["exploration", "horror"], "related_systems": ["narrative-service", "exploration-system", "religion-system"], "related_documents": [{"id": "canon-lore-timeline-author-index", "relation": "references"}, {"id": "canon-quest-paris-catacombs-exploration", "relation": "parallels"}], "source": "shared/docs/knowledge/canon/lore/_03-lore/timeline-author/quests/europe/rome/2020-2029/quest-009-catacombs-christian.md", "visibility": "internal", "audience": ["narrative", "gameplay", "vision"], "risk_level": "medium"}, "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Квест по римским катакомбам оставался в Markdown и не проходил автоматизированные проверки.", "goal": "Зафиксировать катакомбный сценарий в YAML с описанием маршрута, угроз и наград.", "essence": "Группа игроков спускается в катакомбы Сан Каллист, изучает лабиринты раннехристианских захоронений, взаимодействует с подземными\\nжителями и охотится за тайной криптой, рискуя навсегда потеряться.\\n", "key_points": [{"Расписаны этапы": "спуск, исследование туннелей, изучение фресок, встреча с катафилами, поиск секретной крипты."}, {"Уточнены региональные особенности": "узкие туфовые туннели, ниши с костями и символы первых христиан."}, "Награды дают артефакты, 3 000 XP и подчёркивают высокий риск заблудиться."]}, "quest_definition": {"quest_type": "exploration", "level_min": 10, "level_max": 50, "requirements": {"completed_quests": [], "flags": []}, "objectives": [{"id": "descend_catacombs", "type": "location", "description": "Спуститься в катакомбы San Callisto", "required": true}, {"id": "explore_tunnels", "type": "exploration", "description": "Пройти лабиринт туннелей", "required": true}, {"id": "study_frescoes", "type": "interaction", "description": "Изучить фрески и святые захоронения", "required": true}, {"id": "find_crypt", "type": "location", "description": "Отыскать секретную крипту", "required": true}], "rewards": {"experience": 3000, "money": {"type": "eddies", "value": 0}, "reputation": {"religion": 25}, "unlocks": {"achievements": [{"id": "catacomb_explorer", "name": "Catacomb Explorer"}], "flags": []}}, "branches": []}, "content": {"sections": [{"id": "quest_overview", "title": "Описание", "body": "Квест раскрывает исторические катакомбы Рима как хоррор-локацию с религиозным контекстом, где игроки изучают наследие\\nпервых христиан и сталкиваются с угрозой лабиринта.\\n", "mechanics_links": [], "assets": []}, {"id": "quest_flow", "title": "Этапы исследования", "body": "1. Организовать спуск в катакомбы San Callisto, подготовив оборудование и проводника.\\n2. Пройти лабиринт туннелей, используя карты и метки, чтобы не потеряться.\\n3. Изучить фрески и святые захоронения, активируя религиозные триггеры.\\n4. Встретить катафилов и выбрать взаимодействие: союз или противостояние.\\n5. Отыскать секретную крипту и безопасно покинуть подземелье.\\n", "mechanics_links": [], "assets": []}, {"id": "regional_details", "title": "Региональные детали", "body": "Подчёркнуты узкие коридоры из вулканического туфа, ниши с костями, раннехристианские символы рыбы и якоря, а также плотная\\nтемнота, требующая осветительного оборудования.\\n", "mechanics_links": [], "assets": []}, {"id": "rewards", "title": "Награды и риски", "body": "Игроки получают 3 000 XP, находят раннехристианские артефакты и укрепляют религиозные ветки. Главный риск — перманентная\\nпотеря персонажа при потере навигации.\\n", "mechanics_links": [], "assets": []}]}, "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation": {"github_issue": 611, "needs_task": false, "queue_reference": ["shared/trackers/queues/concept/queued.yaml#canon-quest-rome-catacombs-christian"], "blockers": []}, "history": [{"version": "0.1.0", "date": "2025-11-11", "author": "narrative_auto_converter", "changes": "Конвертация квеста «Христианские катакомбы» в структуру знаний."}, {"version": "2.0.0", "date": "2025-12-06", "author": "content_writer", "changes": "Добавлена полная структура quest_definition с objectives, rewards и branches. Обновлен github_issue на 611."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb,
        1, true) ON CONFLICT (quest_id) DO
UPDATE
    SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest