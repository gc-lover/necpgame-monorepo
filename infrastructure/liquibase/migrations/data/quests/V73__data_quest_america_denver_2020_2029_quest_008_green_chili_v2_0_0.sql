-- Issue: #50
-- Import quest from: america\denver\2020-2029\quest-008-green-chili.yaml
-- Generated: 2025-12-21T02:15:34.287315

BEGIN;

-- Quest: quest-denver-2029-008-green-chili
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements, objectives, rewards, branches, content_data, version, is_active) VALUES ('quest-denver-2029-008-green-chili', 'Денвер: культ зелёного чили', 'Игрок исследует городские diners, пробует различные версии green chili и решает, какой стиль продвигать для городской линии.', 'side', 1, NULL, '{"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}'::jsonb, '[{"id": "visit_morning_diner", "text": "Посетить утренний diner и выбрать breakfast bowl с green chili", "type": "interact", "target": "breakfast_bowl_tasting", "count": 1, "optional": false}, {"id": "compare_smothered_burritos", "text": "Сравнить «smothered burrito» из разных кафе", "type": "interact", "target": "burrito_comparison", "count": 1, "optional": false}, {"id": "meet_farmer", "text": "Встретиться с фермером Нью-Мексико и оценить качество перца", "type": "interact", "target": "farmer_meeting", "count": 1, "optional": false}, {"id": "create_recipe", "text": "Сформировать собственный рецепт и представить его ресторану", "type": "choice", "target": "recipe_presentation", "count": 1, "optional": false}]'::jsonb, '{"xp": 1600, "currency": -35, "items": [], "reputation": {"culinary": 18}, "achievements": [{"id": "chili_connoisseur", "name": "Chili Connoisseur"}], "skill_boosts": {}}'::jsonb, '[{"condition": "Классический острый рецепт", "outcome": "Экономика фермеров и ресторанов реагирует позитивно", "next_quests": []}, {"condition": "Здоровое/vegetarian меню", "outcome": "Открывает здоровые гастрономические контракты", "next_quests": []}, {"condition": "Премиальная версия", "outcome": "Открывает туристические гастрономические маршруты", "next_quests": []}]'::jsonb, '{"metadata": {"id": "quest-denver-2029-008-green-chili", "title": "Денвер: культ зелёного чили", "document_type": "canon", "category": "city-quest", "status": "approved", "version": "2.0.0", "last_updated": "2025-11-29T07:10:00+00:00", "concept_approved": true, "concept_reviewed_at": "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}], "tags": ["denver", "food", "green-chili"], "topics": ["city-lore"], "related_systems": ["social-mechanics", "economy-service"], "related_documents": [{"id": "github-issue-337", "title": "GitHub Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/337", "relation": "migrated_to", "migrated_at": "2025-11-22T19:45:00+00:00"}, {"id": "github-issue-455", "title": "GitHub Issue", "link": "https://github.com/gc-lover/necpgame-monorepo/issues/455", "relation": "migrated_to", "migrated_at": "2025-11-22T20:55:00+00:00"}], "source": "shared/docs/knowledge/canon/lore/_03-lore/timeline-author/quests/america/denver/2020-2029/quest-008-green-chili.md", "visibility": "internal", "audience": ["concept", "narrative"], "risk_level": "low"}, "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Краткое описание не показывало гастрономический маршрут и роль зелёного чили в культуре Денвера.", "goal": "Построить квест-дегустацию по ресторанам, раскрывающий региональные рецепты и экономику фермеров Нью-Мексико.", "essence": "Игрок исследует городские diners, пробует различные версии green chili и решает, какой стиль продвигать для городской линии.", "key_points": ["Включены разности рецептов (smothered burrito, breakfast bowl, vegetarian).", "Экономика фермеров и ресторанов реагирует на выбор игрока.", "Возможность разблокировать гастрономические контракты."]}, "quest_definition": {"quest_type": "side", "level_min": 1, "level_max": null, "requirements": {"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}, "objectives": [{"id": "visit_morning_diner", "text": "Посетить утренний diner и выбрать breakfast bowl с green chili", "type": "interact", "target": "breakfast_bowl_tasting", "count": 1, "optional": false}, {"id": "compare_smothered_burritos", "text": "Сравнить «smothered burrito» из разных кафе", "type": "interact", "target": "burrito_comparison", "count": 1, "optional": false}, {"id": "meet_farmer", "text": "Встретиться с фермером Нью-Мексико и оценить качество перца", "type": "interact", "target": "farmer_meeting", "count": 1, "optional": false}, {"id": "create_recipe", "text": "Сформировать собственный рецепт и представить его ресторану", "type": "choice", "target": "recipe_presentation", "count": 1, "optional": false}], "rewards": {"xp": 1600, "currency": -35, "items": [], "reputation": {"culinary": 18}, "achievements": [{"id": "chili_connoisseur", "name": "Chili Connoisseur"}], "skill_boosts": {}}, "branches": [{"condition": "Классический острый рецепт", "outcome": "Экономика фермеров и ресторанов реагирует позитивно", "next_quests": []}, {"condition": "Здоровое/vegetarian меню", "outcome": "Открывает здоровые гастрономические контракты", "next_quests": []}, {"condition": "Премиальная версия", "outcome": "Открывает туристические гастрономические маршруты", "next_quests": []}]}, "content": {"sections": [{"id": "overview", "title": "Кратко", "body": "- Квестовый ID: `DENVER-2029-008`\\n- Формат: гастрономический тур, сложность низкая, solo.\\n- Маршрут: diners Dougherty’s, Sam’s No.3, фермерский рынок.\\n", "mechanics_links": ["mechanics/quests/quest-system.yaml"]}, {"id": "tasting", "title": "Тур дегустации", "body": "1. Посетить утренний diner и выбрать breakfast bowl с green chili.\\n2. Сравнить «smothered burrito» из разных кафе.\\n3. Встретиться с фермером Нью-Мексико и оценить качество перца.\\n4. Сформировать собственный рецепт и представить его ресторану.\\n", "mechanics_links": ["mechanics/social/social-mechanics-overview.yaml"]}, {"id": "choices", "title": "Выбор игрока", "body": "- Продвигать классический острый рецепт.\\n- Сделать акцент на здоровом/vegetarian меню.\\n- Создать премиальную версию для туристов.\\n", "mechanics_links": []}, {"id": "rewards", "title": "Награды", "body": "- 1600 XP, расходы 35 кредитов на дегустации.\\n- Показатель «Кулинария» +18, ачивка «Chili Connoisseur».\\n- Доступ к цепочке «Denver Food Trails».\\n", "mechanics_links": ["mechanics/progression/progression-skills.yaml"]}]}, "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation": {"github_issue": 140891911, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "2.0.0", "date": "2025-11-11", "author": "concept_team", "changes": "Конверсия квеста о зелёном чили в формат знаний."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb, 1, true) ON CONFLICT (quest_id) DO UPDATE SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest