-- Issue: #50
-- Import quest from: europe\paris\2020-2029\quest-001-eiffel-tower-climb.yaml
-- Version: 2.1.0
-- Generated: 2025-12-07T01:14:49.028916

BEGIN;

-- Quest: canon-quest-paris-2020-2029-eiffel-tower-climb
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements, objectives, rewards, branches, content_data, version, is_active) VALUES ('canon-quest-paris-2020-2029-eiffel-tower-climb', 'Париж 2020-2029 — «Восхождение на Эйфелеву Башню»', 'Восхождение совмещает туристический опыт и киберпанковый финал с проникновением на передающую антенну.', 'side', 3, NULL, '{"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}'::jsonb, '[{"id": "access_eiffel_tower", "text": "Получить доступ к Эйфелевой башне и выбрать способ подъема: лифт или пешком", "type": "interact", "target": "eiffel_tower_access", "count": 1, "optional": false}, {"id": "reach_first_platform", "text": "Достичь первой смотровой площадки на 57 метрах и изучить панораму Сены", "type": "interact", "target": "first_platform_57m", "count": 1, "optional": false}, {"id": "reach_second_platform", "text": "Достичь второй смотровой площадки на 115 метрах и увидеть панораму Парижа", "type": "interact", "target": "second_platform_115m", "count": 1, "optional": false}, {"id": "reach_third_platform", "text": "Достичь третьей смотровой площадки на 276 метрах и увидеть обзор всей Франции", "type": "interact", "target": "third_platform_276m", "count": 1, "optional": false}, {"id": "install_hacker_node", "text": "Установить хакерский узел на антенне башни", "type": "interact", "target": "antenna_hacker_node", "count": 1, "optional": false}]'::jsonb, '{"experience": 1500, "currency": -30, "items": [{"item_id": "trophy_top_of_paris", "quantity": 1, "name": "Трофей «На Вершине Парижа»"}], "reputation": {}, "flags": ["megacity_towers_questline_unlocked"]}'::jsonb, '[{"id": "elevator_path", "unlock_condition": {"type": "choice_made", "choice_id": "eiffel_tower_access_method", "value": "elevator"}, "consequences": {"reputation": {"tourism": 5}, "flags": ["fast_tower_access_unlocked"], "unlocked_content": [{"quest_type": "side", "category": "tourism", "location": "paris"}]}}, {"id": "stairs_path", "unlock_condition": {"type": "choice_made", "choice_id": "eiffel_tower_access_method", "value": "stairs"}, "consequences": {"reputation": {"tourism": 10}, "flags": ["endurance_quests_unlocked"], "unlocked_content": [{"quest_type": "side", "category": "endurance", "location": "paris"}]}}]'::jsonb, '{"metadata": {"id": "canon-quest-paris-2020-2029-eiffel-tower-climb", "title": "Париж 2020-2029 — «Восхождение на Эйфелеву Башню»", "document_type": "canon", "category": "timeline-author", "status": "draft", "version": "2.1.0", "last_updated": "2025-12-01T00:00:00+00:00", "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}], "tags": ["paris", "landmark", "tourism"], "topics": ["cityscape", "exploration"], "related_systems": ["narrative-service", "tourism-module"], "related_documents": [], "source": "shared/docs/knowledge/canon/lore/timeline-author/quests/europe/paris/2020-2029/quest-001-eiffel-tower-climb.md", "visibility": "internal", "audience": ["concept", "narrative", "liveops"], "risk_level": "low"}, "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Игрокам нужен атмосферный квест, знакомящий с символом Парижа и дающий контентную точку для сеттинга 2020-х.", "goal": "Провести героя по смотровым площадкам Эйфелевой башни и завершить установкой хакерского узла на вершине.", "essence": "Восхождение совмещает туристический опыт и киберпанковый финал с проникновением на передающую антенну.", "key_points": ["Три смотровые площадки раскрывают панораму города и историю башни.", "Хакерский финал связывает достопримечательность с сюжетом сеттинга.", "Квест формирует линейку «Башни мегаполисов» вместе с Нью-Йорком и Токио."]}, "quest_definition": {"quest_type": "side", "level_min": 3, "level_max": null, "requirements": {"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}, "objectives": [{"id": "access_eiffel_tower", "text": "Получить доступ к Эйфелевой башне и выбрать способ подъема: лифт или пешком", "type": "interact", "target": "eiffel_tower_access", "count": 1, "optional": false}, {"id": "reach_first_platform", "text": "Достичь первой смотровой площадки на 57 метрах и изучить панораму Сены", "type": "interact", "target": "first_platform_57m", "count": 1, "optional": false}, {"id": "reach_second_platform", "text": "Достичь второй смотровой площадки на 115 метрах и увидеть панораму Парижа", "type": "interact", "target": "second_platform_115m", "count": 1, "optional": false}, {"id": "reach_third_platform", "text": "Достичь третьей смотровой площадки на 276 метрах и увидеть обзор всей Франции", "type": "interact", "target": "third_platform_276m", "count": 1, "optional": false}, {"id": "install_hacker_node", "text": "Установить хакерский узел на антенне башни", "type": "interact", "target": "antenna_hacker_node", "count": 1, "optional": false}], "rewards": {"experience": 1500, "currency": -30, "items": [{"item_id": "trophy_top_of_paris", "quantity": 1, "name": "Трофей «На Вершине Парижа»"}], "reputation": {}, "flags": ["megacity_towers_questline_unlocked"]}, "branches": [{"id": "elevator_path", "unlock_condition": {"type": "choice_made", "choice_id": "eiffel_tower_access_method", "value": "elevator"}, "consequences": {"reputation": {"tourism": 5}, "flags": ["fast_tower_access_unlocked"], "unlocked_content": [{"quest_type": "side", "category": "tourism", "location": "paris"}]}}, {"id": "stairs_path", "unlock_condition": {"type": "choice_made", "choice_id": "eiffel_tower_access_method", "value": "stairs"}, "consequences": {"reputation": {"tourism": 10}, "flags": ["endurance_quests_unlocked"], "unlocked_content": [{"quest_type": "side", "category": "endurance", "location": "paris"}]}}]}, "content": {"sections": [{"id": "setup", "title": "Настрой квеста", "body": "В 2029 году Эйфелева башня используется как гигантская антенна. Игрок получает доступ на объект и выбирает,\\nподниматься ли пешком или на лифте. Квест стартует у подножия с описанием контекстных угроз и ценности башни.\\n", "mechanics_links": [], "assets": []}, {"id": "stages", "title": "Этапы восхождения", "body": "1. Решить, использовать ли лифт или идти пешком по 1 665 ступеням.\\n2. Первая площадка на 57 метрах — обзор Сены и краткая история конструкции.\\n3. Вторая площадка на 115 метрах — панорама Парижа и взаимодействие с NPC-гидами.\\n4. Третья площадка на 276 метрах — обзор всей Франции и подготовка к финалу.\\n5. Установка хакерского узла на антенне — мини-игра с сетевым проникновением.\\n", "mechanics_links": ["mechanics/exploration/vertical-navigation.yaml"], "assets": []}, {"id": "regional-details", "title": "Региональные детали", "body": "Башня украшена подсветкой из 20 000 лампочек, а к ночи запускается световое шоу. На верхней площадке доступна\\nдегустация шампанского и коллекционные голограммы. На стенах видны надписи туристов «Je t''aime Paris».\\n", "mechanics_links": [], "assets": []}, {"id": "rewards", "title": "Награды", "body": "Игрок получает 1 500 опыта, эстетический бонус +10 и трофей «На Вершине Парижа». Билет на восхождение стоит 30 еддиков.\\n", "mechanics_links": [], "assets": []}, {"id": "mechanics", "title": "Игровые механики", "body": "Квест использует систему восхождения, туристические события для фото-режима и финальный хакерский челлендж.\\n", "mechanics_links": ["mechanics/hacking/tower-relay-breach.yaml"], "assets": []}, {"id": "connections", "title": "Связанные квесты", "body": "Связан с квестами «Empire State Run» (Нью-Йорк) и «Tokyo Tower Signal» (Токио), формируя линейку башен мегаполисов.\\n", "mechanics_links": [], "assets": []}]}, "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation": {"github_issue": 621, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "2.1.0", "date": "2025-12-01", "author": "content_writer", "changes": "Добавлен Issue в начало файла. Исправлена структура rewards (money -> currency, unlocks -> flags). Исправлена структура branches (branch_id -> id, description -> unlock_condition, убраны skills и unlocks из consequences, добавлены правильные поля). Структура quest_definition соответствует архитектуре системы квестов."}, {"version": "2.0.0", "date": "2025-11-29", "author": "content_writer", "changes": "Добавлена полная структура quest_definition с objectives, rewards и branches. Детализирован контент согласно концепции. Добавлены механики восхождения и хакерского узла."}, {"version": "0.1.0", "date": "2025-11-13", "author": "concept_director", "changes": "Конверсия квеста «Восхождение на Эйфелеву Башню» из Markdown в YAML."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb, 1, true) ON CONFLICT (quest_id) DO UPDATE SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest