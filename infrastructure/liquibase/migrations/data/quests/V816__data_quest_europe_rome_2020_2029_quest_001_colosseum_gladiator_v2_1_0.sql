-- Issue: #50
-- Import quest from: europe\rome\2020-2029\quest-001-colosseum-gladiator.yaml
-- Version: 2.1.0
-- Generated: 2025-12-07T01:14:49.177187

BEGIN;

-- Quest: canon-quest-rome-2029-001-colosseum
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements, objectives, rewards, branches, content_data, version, is_active) VALUES ('canon-quest-rome-2029-001-colosseum', 'Рим: гладиаторский турнир Колизея', 'Игрок оплачивает участие, выбирает оружие и проходит серию боёв под реакцию толпы и императорских судей.', 'main', 8, NULL, '{"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}'::jsonb, '[{"id": "register_gladiator", "text": "Зарегистрироваться как гладиатор, заплатив вступительный взнос и оформив броню", "type": "interact", "target": "colosseum_registration", "count": 1, "optional": false}, {"id": "choose_weapon_set", "text": "Выбрать набор оружия: меч и щит, трезубец с сетью или двойные клинки", "type": "customize", "target": "gladiator_armory", "count": 1, "optional": false}, {"id": "survive_five_rounds", "text": "Выстоять серию из пяти боёв на арене, взаимодействуя с толпой через жесты и крики", "type": "combat", "target": "colosseum_arena", "count": 5, "optional": false}, {"id": "react_to_crowd", "text": "Реагировать на решения зрителей («pollice verso») после каждого раунда", "type": "interact", "target": "crowd_verdict", "count": 5, "optional": false}, {"id": "defeat_champion", "text": "Победить финального чемпиона и пройти церемонию награждения", "type": "combat", "target": "colosseum_champion", "count": 1, "optional": false}]'::jsonb, '{"experience": 20000, "currency": 100000, "items": [{"item_id": "legendary_gladiator_weapon", "quantity": 1, "name": "Легендарное гладиаторское оружие"}], "reputation": {"rome_citizens": 15}, "flags": ["colosseum_champion_title"]}'::jsonb, '[]'::jsonb, '{"metadata": {"id": "canon-quest-rome-2029-001-colosseum", "title": "Рим: гладиаторский турнир Колизея", "document_type": "canon", "category": "quests", "status": "draft", "version": "2.1.0", "last_updated": "2025-12-01T00:00:00+00:00", "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}], "tags": ["rome", "colosseum", "arena"], "topics": ["combat-events", "historical-reenactment"], "related_systems": ["narrative-service", "quest-service"], "related_documents": [{"id": "canon-region-europe-2020-2093", "relation": "references"}], "source": "shared/docs/knowledge/canon/lore/timeline-author/quests/europe/rome/2020-2029/quest-001-colosseum-gladiator.md", "visibility": "internal", "audience": ["concept", "narrative", "liveops"], "risk_level": "high"}, "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Линия Рима нуждалась в боевом событии, отражающем возрождённые гладиаторские турниры Колизея.", "goal": "Описать арену как современный бойцовский чемпионат с историческими отсылками и участием аудитории.", "essence": "Игрок оплачивает участие, выбирает оружие и проходит серию боёв под реакцию толпы и императорских судей.", "key_points": ["Колизей представлен как арена с 50 000 зрителей и адаптацией древних правил.", "Бои проходят в пять раундов с финальным чемпионом, а толпа влияет на вердикты.", "Награды включают легендарное оружие и титул «Чемпион Колизея»."]}, "quest_definition": {"quest_type": "main", "level_min": 8, "level_max": null, "requirements": {"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}, "objectives": [{"id": "register_gladiator", "text": "Зарегистрироваться как гладиатор, заплатив вступительный взнос и оформив броню", "type": "interact", "target": "colosseum_registration", "count": 1, "optional": false}, {"id": "choose_weapon_set", "text": "Выбрать набор оружия: меч и щит, трезубец с сетью или двойные клинки", "type": "customize", "target": "gladiator_armory", "count": 1, "optional": false}, {"id": "survive_five_rounds", "text": "Выстоять серию из пяти боёв на арене, взаимодействуя с толпой через жесты и крики", "type": "combat", "target": "colosseum_arena", "count": 5, "optional": false}, {"id": "react_to_crowd", "text": "Реагировать на решения зрителей («pollice verso») после каждого раунда", "type": "interact", "target": "crowd_verdict", "count": 5, "optional": false}, {"id": "defeat_champion", "text": "Победить финального чемпиона и пройти церемонию награждения", "type": "combat", "target": "colosseum_champion", "count": 1, "optional": false}], "rewards": {"experience": 20000, "currency": 100000, "items": [{"item_id": "legendary_gladiator_weapon", "quantity": 1, "name": "Легендарное гладиаторское оружие"}], "reputation": {"rome_citizens": 15}, "flags": ["colosseum_champion_title"]}, "branches": []}, "content": {"sections": [{"id": "overview", "title": "Обзор квеста", "body": "Квест ROME-2029-001 переносит игрока в современное шоу гладиаторов. Необходимо зарегистрироваться, выбрать инвентарь\\nи сражаться против последовательности соперников, воссоздающих классические архетипы древнего Рима.\\n", "mechanics_links": ["mechanics/quests/quest-system.yaml"], "assets": []}, {"id": "stages", "title": "Последовательность этапов", "body": "1. Зарегистрироваться как гладиатор, заплатив вступительный взнос и оформив броню.\\n2. Выбрать набор оружия: меч и щит, трезубец с сетью или двойные клинки.\\n3. Выстоять серию из пяти боёв на арене, взаимодействуя с толпой через жесты и крики.\\n4. Реагировать на решения зрителей («pollice verso») после каждого раунда.\\n5. Победить финального чемпиона и пройти церемонию награждения или пережить позорное поражение.\\n", "mechanics_links": [], "assets": []}, {"id": "regional_context", "title": "Региональные детали", "body": "- Колизей 80 года н.э. восстановлен с AR-проекциями подземелий и трибун.\\n- Используются латинские лозунги, такие как «Ave, Imperator» и «Morituri te salutant».\\n- Подземные коридоры служат staging-зоной для участников и NPC-спарринг-парнёров.\\n", "mechanics_links": [], "assets": []}, {"id": "rewards", "title": "Награды и эффекты", "body": "- 100 000 Eddies.\\n- Легендарное гладиаторское оружие (тип зависит от выбранного набора).\\n- Титул «Чемпион Колизея».\\n- Провал приводит к серьёзным травмам или репутационному падению.\\n", "mechanics_links": [], "assets": []}, {"id": "mechanics", "title": "Задействованные механики", "body": "- Турнирная сетка с прогрессирующей сложностью врагов.\\n- Система толпы, влияющая на исход боёв.\\n- Исторические декорации и звуковые маркеры древнего Рима.\\n", "mechanics_links": [], "assets": []}, {"id": "connections", "title": "Связи", "body": "Квест связывает боевую арку Рима с другими аренами мегаполисов и открывает события перекрёстных турниров.\\n", "mechanics_links": [], "assets": []}]}, "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation": {"github_issue": 603, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "2.1.0", "date": "2025-12-01", "author": "content_writer", "changes": "Добавлен Issue в начало файла. Исправлена структура items (id -> item_id). Структура quest_definition соответствует архитектуре системы квестов (currency, flags, правильная структура rewards)."}, {"version": "2.0.0", "date": "2025-11-29", "author": "content_writer", "changes": "Добавлена полная структура quest_definition с objectives, rewards и branches. Детализирован контент согласно концепции. Добавлены механики боевых событий и исторической реконструкции."}, {"version": "0.1.0", "date": "2025-11-13", "author": "concept_team", "changes": "Добавлен YAML-квест гладиаторского турнира Колизея."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb, 1, true) ON CONFLICT (quest_id) DO UPDATE SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest