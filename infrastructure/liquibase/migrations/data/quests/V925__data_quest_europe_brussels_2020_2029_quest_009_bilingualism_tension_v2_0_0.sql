-- Issue: #50, #34
-- Import quest from: europe/brussels/2020-2029/quest-009-bilingualism-tension.yaml
-- Version: 2.0.0
-- Generated: 2025-12-12T00:49:14.767848

BEGIN;

-- Quest: quest-brussels-2029-bilingualism-tension
INSERT INTO gameplay.quest_definitions (quest_id, title, description, quest_type, level_min, level_max, requirements, objectives, rewards, branches, content_data, version, is_active) VALUES (
'quest-brussels-2029-bilingualism-tension', 
'Брюссель 2020-2029 — Двуязычие и напряжение', 
'Игрок анализирует двуязычные пространства, участвует в дебатах и формирует рекомендации по примирению.', 
'side', 
5, 
NULL, 
'{"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}'::jsonb, 
'[{"id": "survey_districts", "text": "Посетить фламандские и валлонские районы, записать язык вывесок и опросить жителей о языковых предпочтениях", "type": "travel", "target": "brussels_bilingual_districts", "count": 5, "optional": false}, {"id": "observe_political_crisis", "text": "Наблюдать за симуляцией парламентских переговоров, попытками сформировать коалицию и узнать про рекордный простой правительства (541 день)", "type": "interact", "target": "belgian_parliament_simulation", "count": 1, "optional": false}, {"id": "moderate_debate", "text": "Модерировать встречу активистов из обеих общин, выбирая аргументы, которые уменьшают напряжение", "type": "perform", "target": "bilingual_community_debate", "count": 1, "optional": false}, {"id": "create_reconciliation_report", "text": "Создать финальный документ с мерами по сохранению единства: двуязычное образование, экономические стимулы, культурные фестивали", "type": "craft", "target": "reconciliation_policy_report", "count": 1, "optional": false}]'::jsonb, 
'{"experience": 3000, "currency": 0, "items": [{"item_id": "belgian_crisis_expert_title", "name": "Титул «Знаток бельгийского кризиса»", "quantity": 1}], "reputation": {"brussels_politics": 25, "brussels_culture": 15, "flanders_community": 10, "wallonia_community": 10}, "flags": ["bilingual_tension_quest_completed", "diplomatic_liveops_unlocked", "cultural_exchange_quests_unlocked"]}'::jsonb, 
'[{"id": "flanders_sympathizer_path", "unlock_condition": {"type": "choice_made", "choice_id": "community_support", "value": "flanders"}, "consequences": {"reputation": {"flanders_community": 20, "wallonia_community": -5}, "flags": ["flanders_quests_unlocked"], "unlocked_content": [{"quest_type": "side", "category": "political", "location": "brussels"}]}}, {"id": "wallonia_sympathizer_path", "unlock_condition": {"type": "choice_made", "choice_id": "community_support", "value": "wallonia"}, "consequences": {"reputation": {"wallonia_community": 20, "flanders_community": -5}, "flags": ["wallonia_quests_unlocked"], "unlocked_content": [{"quest_type": "side", "category": "political", "location": "brussels"}]}}, {"id": "neutral_mediator_path", "unlock_condition": {"type": "choice_made", "choice_id": "community_support", "value": "neutral"}, "consequences": {"reputation": {"brussels_politics": 15, "flanders_community": 10, "wallonia_community": 10}, "flags": ["diplomatic_quests_unlocked"], "unlocked_content": [{"quest_type": "side", "category": "diplomatic", "location": "brussels"}]}}]'::jsonb, 
'{"metadata": {"id": "quest-brussels-2029-bilingualism-tension", "title": "Брюссель 2020-2029 — Двуязычие и напряжение", "document_type": "canon", "category": "timeline-quest", "status": "draft", "version": "2.0.0", "last_updated": "2025-12-01T00:00:00+00:00", "concept_approved": false, "concept_reviewed_at": "", "owners": [{"role": "concept_director", "contact": "concept@necp.game"}], "tags": ["brussels", "politics", "linguistics"], "topics": ["socio_political_divide", "cultural_identity"], "related_systems": ["narrative-service", "gameplay-service", "quest-service", "character-service", "economy-service", "diplomacy-service", "education-service", "social-service"], "related_documents": [], "source": "shared/docs/knowledge/canon/lore/timeline-author/quests/europe/brussels/2020-2029/quest-009-bilingualism-tension.md", "visibility": "internal", "audience": ["concept", "narrative", "liveops"], "risk_level": "medium"}, "review": {"chain": [{"role": "concept_director", "reviewer": "", "reviewed_at": "", "status": "pending"}], "next_actions": []}, "summary": {"problem": "Политической ветке Бельгии требовался рассказ о языковом расколе между Фландрией и Валлонией.", "goal": "Показать двойную идентичность Брюсселя и влияние 541-дневного кризиса власти.", "essence": "Игрок анализирует двуязычные пространства, участвует в дебатах и формирует рекомендации по примирению.", "key_points": ["Контраст экономик север/юг.", "Перевод табличек и документов на два языка.", "Прецедент 541 дней без правительства."]}, "quest_definition": {"quest_type": "side", "level_min": 5, "level_max": null, "requirements": {"required_quests": [], "required_flags": [], "required_reputation": {}, "required_items": []}, "objectives": [{"id": "survey_districts", "text": "Посетить фламандские и валлонские районы, записать язык вывесок и опросить жителей о языковых предпочтениях", "type": "travel", "target": "brussels_bilingual_districts", "count": 5, "optional": false}, {"id": "observe_political_crisis", "text": "Наблюдать за симуляцией парламентских переговоров, попытками сформировать коалицию и узнать про рекордный простой правительства (541 день)", "type": "interact", "target": "belgian_parliament_simulation", "count": 1, "optional": false}, {"id": "moderate_debate", "text": "Модерировать встречу активистов из обеих общин, выбирая аргументы, которые уменьшают напряжение", "type": "perform", "target": "bilingual_community_debate", "count": 1, "optional": false}, {"id": "create_reconciliation_report", "text": "Создать финальный документ с мерами по сохранению единства: двуязычное образование, экономические стимулы, культурные фестивали", "type": "craft", "target": "reconciliation_policy_report", "count": 1, "optional": false}], "rewards": {"experience": 3000, "currency": 0, "items": [{"item_id": "belgian_crisis_expert_title", "name": "Титул «Знаток бельгийского кризиса»", "quantity": 1}], "reputation": {"brussels_politics": 25, "brussels_culture": 15, "flanders_community": 10, "wallonia_community": 10}, "flags": ["bilingual_tension_quest_completed", "diplomatic_liveops_unlocked", "cultural_exchange_quests_unlocked"]}, "branches": [{"id": "flanders_sympathizer_path", "unlock_condition": {"type": "choice_made", "choice_id": "community_support", "value": "flanders"}, "consequences": {"reputation": {"flanders_community": 20, "wallonia_community": -5}, "flags": ["flanders_quests_unlocked"], "unlocked_content": [{"quest_type": "side", "category": "political", "location": "brussels"}]}}, {"id": "wallonia_sympathizer_path", "unlock_condition": {"type": "choice_made", "choice_id": "community_support", "value": "wallonia"}, "consequences": {"reputation": {"wallonia_community": 20, "flanders_community": -5}, "flags": ["wallonia_quests_unlocked"], "unlocked_content": [{"quest_type": "side", "category": "political", "location": "brussels"}]}}, {"id": "neutral_mediator_path", "unlock_condition": {"type": "choice_made", "choice_id": "community_support", "value": "neutral"}, "consequences": {"reputation": {"brussels_politics": 15, "flanders_community": 10, "wallonia_community": 10}, "flags": ["diplomatic_quests_unlocked"], "unlocked_content": [{"quest_type": "side", "category": "diplomatic", "location": "brussels"}]}}]}, "content": {"sections": [{"id": "survey", "title": "Исследование кварталов", "body": "Игрок посещает фламандские и валлонские районы, записывает язык вывесок и опрашивает жителей.\\n", "mechanics_links": ["mechanics/exploration/language-mapping.yaml"], "assets": []}, {"id": "crisis", "title": "Политический кризис", "body": "В симуляции парламентских переговоров игрок наблюдает за попытками сформировать коалицию и узнаёт про рекордный простой правительства.\\n", "mechanics_links": ["mechanics/diplomacy/coalition-negotiation.yaml"], "assets": []}, {"id": "debate", "title": "Дебаты о будущем", "body": "Игрок модерирует встречу активистов из обеих общин, выбирая аргументы, которые уменьшают напряжение.\\n", "mechanics_links": ["mechanics/social/conflict-mediation.yaml"], "assets": []}, {"id": "report", "title": "Отчёт примирения", "body": "Финальный документ предлагает меры по сохранению единства: двуязычное образование, экономические стимулы, культурные фестивали.\\n", "mechanics_links": ["mechanics/progression/policy-report.yaml"], "assets": []}, {"id": "rewards", "title": "Награды", "body": "- 3 000 XP, политика +25, титул «Знаток бельгийского кризиса».\\n- Доступ к дипломатическим liveops и веткам культурного обмена.\\n", "mechanics_links": ["mechanics/progression/title-unlock.yaml"], "assets": []}]}, "appendix": {"glossary": [], "references": [], "decisions": []}, "implementation": {"github_issue": 691, "needs_task": false, "queue_reference": [], "blockers": []}, "history": [{"version": "2.0.0", "date": "2025-12-01", "author": "content_writer", "changes": "Добавлен Issue в начало файла. Добавлена полная структура quest_definition с objectives, rewards и branches согласно архитектуре системы квестов. Создано 4 objectives на основе контента квеста (исследование кварталов, наблюдение за политическим кризисом, модерация дебатов, создание отчёта примирения). Добавлены rewards: 3000 XP, титул \\"Знаток бельгийского кризиса\\", репутация brussels_politics: 25, brussels_culture: 15, flanders_community: 10, wallonia_community: 10, флаги для разблокировки дипломатических liveops и культурного обмена. Добавлены 3 branches (flanders_sympathizer_path, wallonia_sympathizer_path, neutral_mediator_path) с правильной структурой unlock_condition и consequences."}, {"version": "1.0.0", "date": "2025-11-13", "author": "concept_team", "changes": "Квест «Двуязычие и напряжение» адаптирован под шаблон Concept Director."}], "validation": {"checksum": "", "schema_version": "1.0"}}'::jsonb, 
1, 
true
) ON CONFLICT (quest_id) DO UPDATE SET title = EXCLUDED.title, description = EXCLUDED.description, quest_type = EXCLUDED.quest_type, level_min = EXCLUDED.level_min, level_max = EXCLUDED.level_max, requirements = EXCLUDED.requirements, objectives = EXCLUDED.objectives, rewards = EXCLUDED.rewards, branches = EXCLUDED.branches, content_data = EXCLUDED.content_data, updated_at = CURRENT_TIMESTAMP;

COMMIT;

-- Total imported: 1 quest
