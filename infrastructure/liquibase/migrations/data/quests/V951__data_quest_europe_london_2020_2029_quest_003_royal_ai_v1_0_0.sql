-- Issue: #1917
-- Import quest from: knowledge/canon/lore/timeline-author/quests/europe/london/2020-2029/quest-003-royal-ai.yaml
-- Version: 1.0.0
-- Generated: 2025-12-20T12:00:00.000000
-- WARNING  WARNING: Requires 'gameplay.quest_definitions' table (create via Database agent)

BEGIN;

-- Quest: quest-london-royal-ai-2020-2029
INSERT INTO gameplay.quest_definitions (
    quest_id, title, quest_type, level_min, level_max,
    requirements, objectives, rewards, content_data, is_active
)
VALUES (
    'quest-london-royal-ai-2020-2029',
    'Crown Protocol',
    'main',
    8,
    15,
    '{"player_level": {"min": 8, "max": 15}, "location": "London", "skills": ["investigation", "social_engineering"]}'::jsonb,
    '[{"id": "investigate_accidents", "description": "Investigate the suspicious accidents befalling British aristocracy", "type": "investigation", "order": 1, "optional": false}, {"id": "meet_factions", "description": "Meet with representatives from different aristocratic factions", "type": "social", "order": 2, "optional": false}, {"id": "infiltrate_palace", "description": "Infiltrate Buckingham Palace restricted areas", "type": "stealth", "order": 3, "optional": false}, {"id": "discover_truth", "description": "Discover the truth about the Royal AI replacement program", "type": "investigation", "order": 4, "optional": false}, {"id": "choose_ending", "description": "Choose between exposing the conspiracy or maintaining the illusion", "type": "decision", "order": 5, "optional": false}]'::jsonb,
    '{"experience": 4000, "money": 18000, "reputation": {"loyalist_aristocracy": 40, "republican_movement": 40}, "items": ["royal_guard_weapon", "protocol_override_implant"], "implants": ["aristocratic_access_pass"]}'::jsonb,
    '{"metadata":{"id":"quest-london-royal-ai-2020-2029","title":"Quest: Royal AI (London 2020-2029)","document_type":"canon","category":"quest","status":"ready_for_backend","version":"1.0.0","last_updated":"2025-12-20T05:09:00Z","concept_approved":true,"concept_reviewed_at":"2025-12-20T05:09:00Z","owners":[{"role":"lore_archivist","contact":"lore@necp.game"}],"tags":["quest","london","royal-family","ai","conspiracy","aristocracy","cyberpunk","monarchy"],"topics":["royal_succession","ai_ethics","corporate_influence","identity_crisis","technological_replacement"],"related_systems":["narrative-service","quest-service","relationship-service","world-service"],"related_documents":[{"id":"canon-lore-london-2020-2029","relation":"setting"},{"id":"mechanics-ai-systems","relation":"gameplay"},{"id":"mechanics-conspiracy-mechanics","relation":"gameplay"}],"source":"shared/docs/knowledge/canon/lore/timeline-author/quests/europe/london/2020-2029/quest-003-royal-ai.yaml","visibility":"internal","audience":["concept","narrative","quest-design","localization"],"risk_level":"high"},"review":{"chain":[{"role":"content_writer","reviewer":"Content Writer Agent","reviewed_at":"2025-12-20T05:09:00Z","status":"approved"}],"next_actions":[{"action":"backend_import","description":"Import Royal AI quest to database for gameplay integration","assignee":"backend_agent"}]},"summary":{"problem":"В Лондоне 2020-2029 годов реальная королевская семья заменена на ИИ-клонов, вызывая политический кризис и заговоры среди аристократии.","goal":"Создать квест, где игрок раскрывает тайну королевского ИИ и выбирает, сохранить ли иллюзию монархии или раскрыть правду.","essence":"В эпоху, когда технологии заменяют человечность, даже монархия становится алгоритмом - но некоторые тайны лучше не раскрывать.","key_points":["Королевская семья заменена ИИ-клонами для сохранения стабильности","Аристократия делится на лоялистов и радикалов, желающих вернуть настоящую монархию","Игрок работает на частного детектива, расследующего королевские несчастные случаи","Моральные дилеммы: правда vs стабильность, человечность vs эффективность","Множественные концовки влияют на политическую систему Лондона"]},"quest_structure":{"title":"Crown Protocol","subtitle":"The Royal AI Conspiracy","period":"2020-2029","location":"London, UK - Buckingham Palace, Westminster, Mayfair districts","duration":"Medium (3-5 hours gameplay)","difficulty":"Medium-High","player_level":"8-15","synopsis":"В 2023 году королевская семья Великобритании погибает в загадочной авиакатастрофе. На трон восходит восстановленная семья - идеальные клоны с ИИ-разумами. Но слухи о замене просачиваются, и аристократия делится на фракции. Игрок нанимается частным детективом расследовать королевские несчастные случаи, которые могут быть саботажем против ИИ-монархии.","main_objectives":["Investigate the suspicious accidents befalling British aristocracy","Meet with representatives from different aristocratic factions","Infiltrate Buckingham Palace restricted areas","Discover the truth about the Royal AI replacement program","Choose between exposing the conspiracy or maintaining the illusion"],"side_objectives":["Collect evidence from hacked royal communication networks","Interview surviving members of the old aristocracy","Sabotage or protect corporate surveillance systems","Navigate complex social interactions at royal balls and functions"],"rewards":{"experience":4000,"money":18000,"reputation":{"loyalist_aristocracy":40,"republican_movement":40},"items":["royal_guard_weapon","protocol_override_implant"],"implants":["aristocratic_access_pass"]}},"narrative":{"theme":"AI replacement of British monarchy in cyberpunk London","conflict":"Crown Loyalists vs Human Restorationists vs Corporate Neutralists","player_role":"Private investigator uncovering royal accidents and AI secrets","moral_choices":"Stability vs authenticity, tradition vs progress","endings":["Preserve illusion","Expose truth","Corporate takeover","Compromise solution"]},"gameplay":{"investigation":"Digital forensics and social engineering","social":"Complex aristocratic relationships","stealth":"Palace infiltration","puzzle":"Conspiracy investigation"},"atmosphere":{"locations":["Buckingham Palace","Westminster Abbey","Mayfair clubs","Underground conspiracies"],"characters":["Cynical detective","Regal AI queen","Paranoid duke","Conflicted scientist"],"cultural_elements":["British aristocracy","AI governance ethics","Royal tradition","Digital monarchy"]},"mechanics":{"political_reputation":"Aristocratic and corporate standing","conspiracy_branching":"Multiple investigation paths","ai_ethics":"Human vs artificial leadership","social_engineering":"Royal ball navigation"},"technical":{"quest_id":"quest-london-royal-ai-2020-2029","prerequisites":{"level":8,"location":"london","skills":["investigation","social_engineering"]},"triggers":{"location":"westminster","event":"aristocratic_accident"},"states":{"investigation":1,"negotiation":2,"infiltration":3,"revelation":4,"resolution":5},"completion":{"time_limit":"5 days","failure_conditions":["expose_conspiracy_prematurely","offend_all_factions"]}}},"localization":{"british_culture":"Aristocratic traditions and royal protocol","ai_terminology":"Corporate AI and neural implants","class_system":"British social hierarchy","historical_references":"Real royal family and UK politics"},"testing":{"edge_cases":["Player exposed during infiltration","Corporate intervention","Aristocratic betrayal"],"performance":"Medium quest load, social mechanics focus","balance":"Rewards scaled for 8-15 level range","accessibility":"Multiple solution paths for different playstyles"}},"implementation":{"needs_task":true,"backend_import_required":true,"github_issue":1917,"queue_reference":[],"blockers":[]},"history":[{"version":"1.0.0","date":"2025-12-20","author":"backend-agent","changes":"Imported quest to database via V951 migration."},{"version":"0.1.0","date":"2025-12-20","author":"content-writer","changes":"Created comprehensive Royal AI conspiracy quest with political intrigue."}],"validation":{"checksum":"","schema_version":"1.0"}}'::jsonb,
    true
) ON CONFLICT (quest_id) DO UPDATE SET
    title = EXCLUDED.title,
    quest_type = EXCLUDED.quest_type,
    level_min = EXCLUDED.level_min,
    level_max = EXCLUDED.level_max,
    requirements = EXCLUDED.requirements,
    objectives = EXCLUDED.objectives,
    rewards = EXCLUDED.rewards,
    content_data = EXCLUDED.content_data;

COMMIT;

-- Total imported: 1 quest