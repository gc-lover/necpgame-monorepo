databaseChangeLog:
- changeSet:
    id: dynamic-quests-examples-migration
    author: content-writer
    changes:
    # Dynamic Quest 1: Street Justice Dilemma
    - insert:
        tableName: gameplay.quest_definitions
        columns:
        - column:
            name: id
            value: dynamic-street-justice-quest
        - column:
            name: quest_id
            value: 'dynamic-street-justice-dilemma'
        - column:
            name: title
            value: 'Уличное Правосудие: Выбор Совести'
        - column:
            name: description
            value: 'В темном переулке Night City вы становитесь свидетелем жестокой расправы уличной банды над одиноким риггером. Ваше решение определит не только судьбу жертвы, но и ваше будущее в этом районе.'
        - column:
            name: category
            value: 'social'
        - column:
            name: difficulty
            value: 'normal'
        - column:
            name: level_requirement
            value: 5
        - column:
            name: is_repeatable
            value: false
        - column:
            name: rewards
            value: '{"experience": 2500, "currency": {"type": "eddies", "amount": 800}, "items": [{"id": "street_justice_badge", "name": "Значок Уличного Правосудия", "rarity": "uncommon"}], "reputation": {"street_reputation": 15}}'
        - column:
            name: objectives
            value: '[{"id": "witness_incident", "description": "Стать свидетелем инцидента", "type": "witness", "count": 1}, {"id": "make_choice", "description": "Принять решение о вмешательстве", "type": "choice", "count": 1}, {"id": "resolve_situation", "description": "Разрешить ситуацию", "type": "custom", "count": 1}]'
        - column:
            name: prerequisites
            value: '{"level_min": 5, "location": "Night City - Watson District"}'
        - column:
            name: location
            value: 'Night City - Watson District'
        - column:
            name: npc_giver
            value: 'Случайный прохожий'
        - column:
            name: is_active
            value: true
        - column:
            name: metadata
            value: '{"dynamic_quest": true, "branching_paths": ["hero_path", "bandit_path", "neutral_path"], "choice_points": ["initial_intervention"], "consequences": ["immediate", "short_term", "long_term", "butterfly"], "tags": ["social", "justice", "street_life"]}'

    # Dynamic Quest 2: Corporate Betrayal Conspiracy
    - insert:
        tableName: gameplay.quest_definitions
        columns:
        - column:
            name: id
            value: dynamic-corporate-betrayal-quest
        - column:
            name: quest_id
            value: 'dynamic-corporate-betrayal-conspiracy'
        - column:
            name: title
            value: 'Корпоративное Предательство: Сеть Интриг'
        - column:
            name: description
            value: 'Работая в Arasaka, вы обнаруживаете доказательства внутренней измены. Ваш непосредственный начальник тайно сотрудничает с Militech. Раскрытие информации может разрушить вашу карьеру или стоить жизни.'
        - column:
            name: category
            value: 'corporate'
        - column:
            name: difficulty
            value: 'hard'
        - column:
            name: level_requirement
            value: 15
        - column:
            name: is_repeatable
            value: false
        - column:
            name: rewards
            value: '{"experience": 5000, "currency": {"type": "eddies", "amount": 2500}, "items": [{"id": "corporate_whistleblower_implant", "name": "Имплант Разоблачителя", "rarity": "rare"}], "reputation": {"corporate_reputation": 20, "underground_reputation": 10}}'
        - column:
            name: objectives
            value: '[{"id": "discover_evidence", "description": "Обнаружить компрометирующие материалы", "type": "investigate", "count": 1}, {"id": "evaluate_options", "description": "Оценить возможные варианты действий", "type": "choice", "count": 1}, {"id": "execute_plan", "description": "Выполнить выбранный план", "type": "custom", "count": 1}]'
        - column:
            name: prerequisites
            value: '{"level_min": 15, "employment": "Arasaka", "location": "Night City - Corpo Plaza"}'
        - column:
            name: location
            value: 'Night City - Corpo Plaza'
        - column:
            name: npc_giver
            value: 'Анонимный источник'
        - column:
            name: faction_requirements
            value: '{"Arasaka": {"min_reputation": 10}}'
        - column:
            name: is_active
            value: true
        - column:
            name: metadata
            value: '{"dynamic_quest": true, "branching_paths": ["whistleblower_path", "blackmail_path", "silence_path", "betrayal_path"], "choice_points": ["evidence_discovery", "strategy_selection"], "consequences": ["immediate", "short_term", "long_term", "butterfly"], "tags": ["corporate", "intrigue", "betrayal", "career"]}'

    # Dynamic Quest 3: Memory Merchant Mystery
    - insert:
        tableName: gameplay.quest_definitions
        columns:
        - column:
            name: id
            value: dynamic-memory-merchant-quest
        - column:
            name: quest_id
            value: 'dynamic-memory-merchant-mystery'
        - column:
            name: title
            value: 'Торговец Воспоминаниями: Цена Памяти'
        - column:
            name: description
            value: 'В подпольном Memory Market вы находите торговца воспоминаниями, предлагающего купить чужие переживания. Среди товаров - воспоминания известных людей, запрещенные опыты и даже воспоминания о будущем.'
        - column:
            name: category
            value: 'mystical'
        - column:
            name: difficulty
            value: 'easy'
        - column:
            name: level_requirement
            value: 3
        - column:
            name: is_repeatable
            value: true
        - column:
            name: max_completions
            value: 3
        - column:
            name: rewards
            value: '{"experience": 800, "currency": {"type": "eddies", "amount": 200}, "items": [{"id": "memory_fragment", "name": "Фрагмент Воспоминаний", "rarity": "common"}], "sanity_effect": -5}'
        - column:
            name: objectives
            value: '[{"id": "enter_market", "description": "Найти Memory Market", "type": "explore", "count": 1}, {"id": "choose_memory", "description": "Выбрать воспоминание для покупки", "type": "choice", "count": 1}, {"id": "experience_memory", "description": "Пережить выбранное воспоминание", "type": "custom", "count": 1}]'
        - column:
            name: prerequisites
            value: '{"level_min": 3, "location": "Night City - Memory Market"}'
        - column:
            name: location
            value: 'Night City - Memory Market'
        - column:
            name: npc_giver
            value: 'Торговец Воспоминаниями'
        - column:
            name: is_active
            value: true
        - column:
            name: metadata
            value: '{"dynamic_quest": true, "branching_paths": ["celebrity_path", "future_path", "personal_path", "refusal_path"], "choice_points": ["memory_selection"], "consequences": ["immediate", "short_term", "long_term", "butterfly"], "tags": ["mystical", "memory", "psychological", "underground"]}'