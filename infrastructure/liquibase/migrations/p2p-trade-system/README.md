# P2P Trade System Database Schema

–ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –ø—Ä—è–º–æ–≥–æ –æ–±–º–µ–Ω–∞ –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏ –≤ NECPGAME.

## üìã –û–±–∑–æ—Ä

P2P Trade System –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é —Ç–æ—Ä–≥–æ–≤–ª—é –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏ —Å –ø–æ–ª–Ω—ã–º –∞—É–¥–∏—Ç–æ–º, –∞–Ω—Ç–∏—Ñ—Ä–æ–¥ –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏ –∏ –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- –î–≤—É—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–µ—Å—Å–∏–∏ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤–æ –≤—Ä–µ–º—è —Ç–æ—Ä–≥–æ–≤–ª–∏
- –≠—Å–∫—Ä–æ—É —Å—á–µ—Ç–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤–∞–ª—é—Ç—ã
- –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç —Ç—Ä–µ–π–ª –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ê–Ω—Ç–∏—Ñ—Ä–æ–¥ –¥–µ—Ç–µ–∫—Ü–∏—é –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- –°–∏—Å—Ç–µ–º—É –¥–∏—Å–ø—É—Ç–æ–≤ –∏ –∞—Ä–±–∏—Ç—Ä–∞–∂–∞
- –ö–æ–º–ø–ª–µ–∫—Å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **–¢–æ—Ä–≥–æ–≤—ã–µ —Å–µ—Å—Å–∏–∏** (`trade_sessions`, `trade_history`) - –ê–∫—Ç–∏–≤–Ω—ã–µ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏
2. **–ü—Ä–µ–¥–º–µ—Ç—ã –∏ –≤–∞–ª—é—Ç—ã** (`locked_items`, `trade_escrow_accounts`) - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏ —ç—Å–∫—Ä–æ—É
3. **–ê—É–¥–∏—Ç –∏ —Å–æ–±—ã—Ç–∏—è** (`trade_events`) - –ü–æ–ª–Ω—ã–π —Ç—Ä–µ–π–ª –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** (`trade_suspicious_patterns`, `trade_disputes`) - –ê–Ω—Ç–∏—Ñ—Ä–æ–¥ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–ø–æ—Ä–æ–≤
5. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** (`trade_analytics`, `trade_performance_metrics`) - –ú–µ—Ç—Ä–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
6. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** (`trade_config_rules`, `trade_item_restrictions`) - –ü—Ä–∞–≤–∏–ª–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

## üìä –°—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü

### –¢–æ—Ä–≥–æ–≤—ã–µ —Å–µ—Å—Å–∏–∏

```sql
-- –ê–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–µ—Å—Å–∏–∏
trade_sessions
‚îú‚îÄ‚îÄ id (UUID PRIMARY KEY)
‚îú‚îÄ‚îÄ initiator_id, target_id (BIGINT) - –£—á–∞—Å—Ç–Ω–∏–∫–∏
‚îú‚îÄ‚îÄ zone_id (VARCHAR) - –õ–æ–∫–∞—Ü–∏—è
‚îú‚îÄ‚îÄ status ('pending', 'offering', 'confirmed', 'completed', 'cancelled', 'expired', 'disputed')
‚îú‚îÄ‚îÄ initiator_offer, target_offer (JSONB) - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏ –≤–∞–ª—é—Ç—ã
‚îú‚îÄ‚îÄ initiator_confirmed, target_confirmed (BOOLEAN) - –°—Ç–∞—Ç—É—Å—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
‚îú‚îÄ‚îÄ created_at, expires_at, completed_at (TIMESTAMP) - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
‚îú‚îÄ‚îÄ fraud_score, suspicious_flags (DECIMAL, JSONB) - –ê–Ω—Ç–∏—Ñ—Ä–æ–¥
‚îú‚îÄ‚îÄ trade_value_estimate (BIGINT) - –û—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ session_metadata (JSONB) - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

-- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
trade_history
‚îú‚îÄ‚îÄ id (UUID PRIMARY KEY)
‚îú‚îÄ‚îÄ session_id (UUID FOREIGN KEY)
‚îú‚îÄ‚îÄ player1_id, player2_id (BIGINT) - –£—á–∞—Å—Ç–Ω–∏–∫–∏
‚îú‚îÄ‚îÄ player1_items, player2_items (JSONB) - –û–±–º–µ–Ω—è–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
‚îú‚îÄ‚îÄ player1_currency, player2_currency (JSONB) - –û–±–º–µ–Ω—è–Ω–Ω—ã–µ –≤–∞–ª—é—Ç—ã
‚îú‚îÄ‚îÄ completed_at (TIMESTAMP)
‚îú‚îÄ‚îÄ suspicious_flag, fraud_score (BOOLEAN, DECIMAL) - –§–ª–∞–≥–∏ —Ñ—Ä–æ–¥–∞
‚îú‚îÄ‚îÄ total_value, value_imbalance (BIGINT, DECIMAL) - –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏
‚îî‚îÄ‚îÄ investigation_status ('none', 'pending', 'resolved', 'banned') - –°—Ç–∞—Ç—É—Å —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
```

### –ê—É–¥–∏—Ç –∏ —Å–æ–±—ã—Ç–∏—è

```sql
-- –í—Å–µ —Å–æ–±—ã—Ç–∏—è —Ç–æ—Ä–≥–æ–≤–æ–π —Å–µ—Å—Å–∏–∏
trade_events
‚îú‚îÄ‚îÄ id (BIGSERIAL PRIMARY KEY)
‚îú‚îÄ‚îÄ session_id (UUID FOREIGN KEY)
‚îú‚îÄ‚îÄ event_type ('session_created', 'offer_added', 'confirmed', 'completed', 'cancelled')
‚îú‚îÄ‚îÄ actor_id (BIGINT) - –ö—Ç–æ —Å–æ–≤–µ—Ä—à–∏–ª –¥–µ–π—Å—Ç–≤–∏–µ
‚îú‚îÄ‚îÄ event_data (JSONB) - –î–µ—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è
‚îú‚îÄ‚îÄ event_timestamp (TIMESTAMP)
‚îú‚îÄ‚îÄ event_sequence (INTEGER) - –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä
‚îî‚îÄ‚îÄ actor_ip, actor_device_fingerprint (VARCHAR) - –ê—É–¥–∏—Ç –¥–∞–Ω–Ω—ã—Ö
```

### –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏ —ç—Å–∫—Ä–æ—É

```sql
-- –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
locked_items
‚îú‚îÄ‚îÄ id (BIGSERIAL PRIMARY KEY)
‚îú‚îÄ‚îÄ session_id (UUID FOREIGN KEY)
‚îú‚îÄ‚îÄ player_id, item_id (BIGINT)
‚îú‚îÄ‚îÄ quantity, locked_at (INTEGER, TIMESTAMP)
‚îú‚îÄ‚îÄ lock_status ('active', 'released', 'expired', 'disputed')
‚îú‚îÄ‚îÄ item_checksum (VARCHAR) - –î–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îî‚îÄ‚îÄ item_value (BIGINT) - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å

-- –≠—Å–∫—Ä–æ—É —Å—á–µ—Ç–∞ –¥–ª—è –≤–∞–ª—é—Ç—ã
trade_escrow_accounts
‚îú‚îÄ‚îÄ id (BIGSERIAL PRIMARY KEY)
‚îú‚îÄ‚îÄ session_id (UUID FOREIGN KEY)
‚îú‚îÄ‚îÄ player_id, currency_type (BIGINT, VARCHAR)
‚îú‚îÄ‚îÄ amount (BIGINT)
‚îú‚îÄ‚îÄ escrow_status ('held', 'released', 'forfeited')
‚îú‚îÄ‚îÄ escrowed_at, released_at (TIMESTAMP)
‚îî‚îÄ‚îÄ escrow_checksum (VARCHAR) - –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å
```

### –ê–Ω—Ç–∏—Ñ—Ä–æ–¥ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

```sql
-- –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
trade_suspicious_patterns
‚îú‚îÄ‚îÄ id (BIGSERIAL PRIMARY KEY)
‚îú‚îÄ‚îÄ pattern_type ('ip_sharing', 'rapid_trading', 'value_imbalance')
‚îú‚îÄ‚îÄ player_id (BIGINT)
‚îú‚îÄ‚îÄ severity_score (DECIMAL 0.0-1.0)
‚îú‚îÄ‚îÄ related_sessions (UUID[]) - –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏
‚îú‚îÄ‚îÄ status ('detected', 'investigating', 'resolved')
‚îî‚îÄ‚îÄ actions_taken (JSONB) - –ü—Ä–∏–Ω—è—Ç—ã–µ –º–µ—Ä—ã

-- –î–∏—Å–ø—É—Ç—ã –∏ –∞—Ä–±–∏—Ç—Ä–∞–∂
trade_disputes
‚îú‚îÄ‚îÄ id (BIGSERIAL PRIMARY KEY)
‚îú‚îÄ‚îÄ session_id, history_id (UUID FOREIGN KEY)
‚îú‚îÄ‚îÄ complainant_id, respondent_id (BIGINT)
‚îú‚îÄ‚îÄ dispute_type ('item_not_received', 'wrong_item', 'fraud')
‚îú‚îÄ‚îÄ status ('open', 'investigating', 'resolved')
‚îú‚îÄ‚îÄ priority ('low', 'normal', 'high', 'critical')
‚îú‚îÄ‚îÄ resolution, resolution_actions (TEXT, JSONB)
‚îî‚îÄ‚îÄ created_at, resolved_at (TIMESTAMP)
```

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏

```sql
-- –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏
trade_analytics
‚îú‚îÄ‚îÄ id (BIGSERIAL PRIMARY KEY)
‚îú‚îÄ‚îÄ date (DATE)
‚îú‚îÄ‚îÄ total_trades, total_trade_value (BIGINT)
‚îú‚îÄ‚îÄ completed_trades, cancelled_trades (BIGINT)
‚îú‚îÄ‚îÄ suspicious_trades, fraud_score_avg (BIGINT, DECIMAL)
‚îú‚îÄ‚îÄ avg_trade_duration, avg_items_per_trade (INTERVAL, DECIMAL)
‚îî‚îÄ‚îÄ zone_trade_counts (JSONB)

-- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
trade_performance_metrics
‚îú‚îÄ‚îÄ id (BIGSERIAL PRIMARY KEY)
‚îú‚îÄ‚îÄ operation_type ('initiate', 'offer', 'confirm', 'complete')
‚îú‚îÄ‚îÄ operation_duration_ms, operation_success (INTEGER, BOOLEAN)
‚îú‚îÄ‚îÄ player_id, session_id (BIGINT, UUID)
‚îî‚îÄ‚îÄ recorded_at (TIMESTAMP)
```

## üîç –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ò–Ω–¥–µ–∫—Å—ã

- **–°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã** –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (player + status + timestamp)
- **–ß–∞—Å—Ç–∏—á–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã** –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö/–ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- **GIN –∏–Ω–¥–µ–∫—Å—ã** –¥–ª—è JSONB –∏ –º–∞—Å—Å–∏–≤–æ–≤
- **–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø–æ –º–µ—Å—è—Ü–∞–º –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã** –¥–ª—è –Ω–µ–¥–∞–≤–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

```sql
-- –°—É–º–º–∞—Ä–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤
player_trading_summary
‚îú‚îÄ‚îÄ total_trades, completed_trades
‚îú‚îÄ‚îÄ total_trade_value, avg_trade_value
‚îú‚îÄ‚îÄ trader_tier ('newcomer', 'casual', 'regular', 'active', 'power_trader')
‚îî‚îÄ‚îÄ suspicious_trade_count, active_disputes

-- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ñ—Ä–æ–¥–∞
trade_fraud_analytics
‚îú‚îÄ‚îÄ suspicious_trades, fraud_score_avg
‚îú‚îÄ‚îÄ top_fraud_patterns, affected_players
‚îú‚îÄ‚îÄ risk_level ('low', 'medium', 'high', 'critical')
‚îî‚îÄ‚îÄ false_positive_rate

-- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–æ–Ω
zone_trading_activity
‚îú‚îÄ‚îÄ total_trades, unique_traders
‚îú‚îÄ‚îÄ total_value_traded, trade_success_rate
‚îú‚îÄ‚îÄ activity_level ('low', 'moderate', 'high', 'trading_hub')
‚îî‚îÄ‚îÄ fraud_incidents

-- –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–º–µ—Ç–æ–≤
item_trading_popularity
‚îú‚îÄ‚îÄ total_trades, total_quantity_traded
‚îú‚îÄ‚îÄ total_value_traded, avg_price
‚îú‚îÄ‚îÄ rarity_tier ('rare', 'uncommon', 'common', 'hot_item')
‚îî‚îÄ‚îÄ trader_count, popular_zones
```

### –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```sql
-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–∞
get_player_trading_stats(player_id, days_back)

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–æ–Ω—ã
get_zone_trading_stats(zone_id, hours_back)

-- –î–µ—Ç–µ–∫—Ü–∏—è —Ñ—Ä–æ–¥–∞
detect_player_fraud_patterns(player_id, days_back)

-- –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö —Å–µ—Å—Å–∏–π
cleanup_expired_trade_sessions()

-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
refresh_trade_analytics()
```

## üöÄ –ú–∏–≥—Ä–∞—Ü–∏–∏

### V001 - –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–π —Å—Ö–µ–º—ã —Å–æ –≤—Å–µ–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏, –∏–Ω–¥–µ–∫—Å–∞–º–∏, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏.

### V002 - –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è, —Ç–∞–π–º–∞—É—Ç—ã, –ª–∏–º–∏—Ç—ã –∑–Ω–∞—á–µ–Ω–∏–π, –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤**: –ó–∞–ø—Ä–µ—Ç—ã –Ω–∞ —Ç–æ—Ä–≥–æ–≤–ª—é –∫–≤–µ—Å—Ç–æ–≤—ã–º–∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏, bind-on-pickup, —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –≤–µ—â–∞–º–∏
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–∏—Å–ø—É—Ç–æ–≤**: –¢–∏–ø—ã —Å–ø–æ—Ä–æ–≤ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ñ—Ä–æ–¥–∞**: –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ IP sharing, –±—ã—Å—Ç—Ä–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏, –¥–∏—Å–±–∞–ª–∞–Ω—Å–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏, —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –±–∞–∑–æ–≤—ã–µ –ª–∏–Ω–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### V003 - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
- –î–µ—Ç–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –í—Å–µ –ø–µ—Ä–µ–≤–æ–¥—ã –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π PostgreSQL —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- Rollback –ø—Ä–∏ –ª—é–±–æ–π –æ—à–∏–±–∫–µ —Å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π —Ä–µ—Å—É—Ä—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π

### –ê–Ω—Ç–∏—Ñ—Ä–æ–¥ –º–µ—Ö–∞–Ω–∏–∑–º—ã
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è**: –ò–≥—Ä–æ–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Ä–∞–¥–∏—É—Å–µ 10 –º–µ—Ç—Ä–æ–≤
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤–ª–∞–¥–µ–Ω–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏ –≤–∞–ª—é—Ç—ã
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã**: Rate limiting –ø–æ —á–∞—Å–∞–º –∏ –¥–Ω—è–º
- **–ü–∞—Ç—Ç–µ—Ä–Ω –∞–Ω–∞–ª–∏–∑**: –î–µ—Ç–µ–∫—Ü–∏—è –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–≤–µ–¥–µ–Ω–∏–π
- **IP/Device tracking**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–ª—è forensic –∞–Ω–∞–ª–∏–∑–∞

### –ê—É–¥–∏—Ç —Ç—Ä–µ–π–ª
- –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤ trade_events
- IP –∞–¥—Ä–µ—Å–∞ –∏ device fingerprints –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
- –ù–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –∑–∞–ø–∏—Å–∏ —Å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –Ω—É–º–µ—Ä–∞—Ü–∏–µ–π
- –°–≤—è–∑—å —Å —Å–∏—Å—Ç–µ–º–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ï–∂–µ–º–µ—Å—è—á–Ω–æ–µ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è trade_history –∏ trade_events
- **–ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è**: –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: Redis –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π –∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: Event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Player-ID sharding**: –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∏–≥—Ä–æ–∫–∞–º
- **Zone-based partitioning**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∏–≥—Ä–æ–≤—ã–º –∑–æ–Ω–∞–º
- **Read replicas**: –î–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –∏—Å—Ç–æ—Ä–∏–∏
- **Event streaming**: Kafka –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üîÑ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

```sql
-- –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö —Å–µ—Å—Å–∏–π
SELECT cleanup_expired_trade_sessions();

-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
SELECT refresh_trade_analytics();

-- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
SELECT validate_trade_data_integrity();

-- –î–µ—Ç–µ–∫—Ü–∏—è —Ñ—Ä–æ–¥–∞ –¥–ª—è –∏–≥—Ä–æ–∫–∞
SELECT detect_player_fraud_patterns(player_id, 7);
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Business metrics**: –û–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤–ª–∏, —É—Å–ø–µ—à–Ω–æ—Å—Ç—å, —Å–ø–æ—Ä—ã
- **Security metrics**: Fraud detection rate, false positives
- **Performance metrics**: Response times, success rates
- **Economic metrics**: Trade volumes, value flows, zone activity

## üîß –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –¢–æ—Ä–≥–æ–≤—ã–µ —Å–µ—Å—Å–∏–∏
- **–î–≤—É—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: –û–±–∞ –∏–≥—Ä–æ–∫–∞ –¥–æ–ª–∂–Ω—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å–¥–µ–ª–∫—É
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: –ê–≤—Ç–æ–æ—Ç–º–µ–Ω–∞ —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è
- **–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏
- **–°—Ç–∞—Ç—É—Å —Ç—Ä–µ–∫–∏–Ω–≥**: –ü–æ–ª–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å–µ—Å—Å–∏–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞**: –ü—Ä–µ–¥–º–µ—Ç—ã –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–¥–µ–ª–∫–∏
- **–≠—Å–∫—Ä–æ—É**: –í–∞–ª—é—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —ç—Å–∫—Ä–æ—É —Å—á–µ—Ç–∞—Ö
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–∏–∑–º–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤–æ –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- **–û—Ç–∫–∞—Ç**: –ü–æ–ª–Ω–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ

### –ê–Ω—Ç–∏—Ñ—Ä–æ–¥ —Å–∏—Å—Ç–µ–º–∞
- **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è**: –û—Ç –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–æ AI –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- **–ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–æ—Ä–æ–≥–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è**: –û—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –¥–æ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- **–†–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤

### –î–∏—Å–ø—É—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è**: –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã —Å–ø–æ—Ä–æ–≤
- **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç urgency
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- **–†–µ–∑–æ–ª—é—Ü–∏–∏**: –†–∞–∑–ª–∏—á–Ω—ã–µ –∏—Å—Ö–æ–¥—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏
- **–ò–≥—Ä–æ–≤–∞—è —ç–∫–æ–Ω–æ–º–∏–∫–∞**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- **–ü–æ–≤–µ–¥–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤**: –ü–∞—Ç—Ç–µ—Ä–Ω—ã —Ç–æ—Ä–≥–æ–≤–ª–∏ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **–ó–æ–Ω–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –º–µ—Å—Ç–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏
- **–ü—Ä–µ–¥–º–µ—Ç–Ω–∞—è –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å**: –¢—Ä–µ–Ω–¥—ã –∏ —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è

–≠—Ç–∞ —Å—Ö–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç enterprise-grade P2P trading system —Å –ø–æ–ª–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å—é –¥–ª—è MMOFPS RPG —Å —Å–æ—Ç–Ω—è–º–∏ —Ç—ã—Å—è—á –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤.
