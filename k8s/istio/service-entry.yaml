# Istio Service Entries
# Issue: #2166
# External service integration (Kafka, Redis, PostgreSQL)

apiVersion: networking.istio.io/v1beta1
kind: ServiceEntry
metadata:
  name: kafka-external
  namespace: necpgame
spec:
  hosts:
    - kafka.necpgame.svc.cluster.local
  ports:
    - number: 9092
      name: tcp
      protocol: TCP
  resolution: DNS
  location: MESH_EXTERNAL

---
apiVersion: networking.istio.io/v1beta1
kind: ServiceEntry
metadata:
  name: redis-external
  namespace: necpgame
spec:
  hosts:
    - redis.necpgame.svc.cluster.local
  ports:
    - number: 6379
      name: tcp
      protocol: TCP
  resolution: DNS
  location: MESH_EXTERNAL

---
apiVersion: networking.istio.io/v1beta1
kind: ServiceEntry
metadata:
  name: postgres-external
  namespace: necpgame
spec:
  hosts:
    - postgres.necpgame.svc.cluster.local
  ports:
    - number: 5432
      name: tcp
      protocol: TCP
  resolution: DNS
  location: MESH_EXTERNAL
