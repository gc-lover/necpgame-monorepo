# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–∫–∏–¥—ã–≤–∞–Ω–∏—è –æ—Ä—É–∂–∏—è –∏ –¥—ë—Ä–≥–∞–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞

## üîç –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏–∏ –∑–∞ –¥–≤–∏–∂–µ–Ω–∏–µ–º –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤ –≤–æ–∑–Ω–∏–∫–∞–ª–∏:
1. **–î—ë—Ä–≥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞** –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏
2. **–í—Å–∫–∏–¥—ã–≤–∞–Ω–∏–µ –æ—Ä—É–∂–∏—è –≤–≤–µ—Ä—Ö** - –æ—Ä—É–∂–∏–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø–æ–¥–Ω–∏–º–∞–ª–æ—Å—å –≤–≤–µ—Ä—Ö

## üìä –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω—ã

### –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–í —Ñ—É–Ω–∫—Ü–∏–∏ `ApplyInterpolatedMovement` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `FMath::Lerp` –¥–ª—è –≤—Å–µ–≥–æ —Ä–æ—Ç–∞—Ç–æ—Ä–∞:

```cpp
FRotator InterpolatedRotation = FMath::Lerp(OldState.Rotation, NewState.Rotation, Alpha);
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏ –º–µ–∂–¥—É –¥–≤—É–º—è —Å–Ω–∏–º–∫–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è (`OldState` –∏ `NewState`) –∏–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä–æ–≤–∞–ª—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ Yaw, –Ω–æ –∏ Pitch. –≠—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ:
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ –æ—Ä—É–∂–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —É–ø—Ä–∞–≤–ª—è—é—Ç Pitch
- –í—Å–∫–∏–¥—ã–≤–∞–Ω–∏–µ –æ—Ä—É–∂–∏—è –≤–≤–µ—Ä—Ö –ø—Ä–∏ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ Pitch
- –î—ë—Ä–≥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏ —Ä–æ—Ç–∞—Ü–∏–∏

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–í –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–µ—Ä–≤–æ–≥–æ —Å–Ω–∏–º–∫–∞ –ø—Ä–∏ `World == nullptr` –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –ø–æ–ª–Ω—ã–π `Snapshot.Rotation`, —á—Ç–æ –º–æ–≥–ª–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Pitch.

## OK –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏ –≤ `ApplyInterpolatedMovement`

**–ë—ã–ª–æ**:
```cpp
FRotator InterpolatedRotation = FMath::Lerp(OldState.Rotation, NewState.Rotation, Alpha);
```

**–°—Ç–∞–ª–æ**:
```cpp
float InterpolatedYaw = FMath::Lerp(OldState.Rotation.Yaw, NewState.Rotation.Yaw, Alpha);
```

–¢–µ–ø–µ—Ä—å –∏–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ Yaw, –∞ Pitch –∏ Roll –≤—Å–µ–≥–¥–∞ –±–µ—Ä—É—Ç—Å—è –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:

```cpp
const FRotator CurrentRotation = TargetPawn->GetActorRotation();
float SmoothYaw = FMath::FInterpTo(CurrentRotation.Yaw, InterpolatedYaw, World->GetDeltaSeconds(), 18.0f);
FRotator SmoothRotation(CurrentRotation.Pitch, SmoothYaw, CurrentRotation.Roll);
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä–≤–æ–≥–æ —Å–Ω–∏–º–∫–∞

**–ë—ã–ª–æ**:
```cpp
else
{
    ApplyMovementUpdate(TargetPawn, Snapshot.Location, Snapshot.Rotation, Snapshot.Velocity);
}
```

**–°—Ç–∞–ª–æ**:
```cpp
FRotator SafeRotation = FRotator(CurrentRotation.Pitch, Snapshot.Rotation.Yaw, CurrentRotation.Roll);
// ...
else
{
    ApplyMovementUpdate(TargetPawn, Snapshot.Location, SafeRotation, Snapshot.Velocity);
}
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- OK Pitch –∏ Roll –≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- OK –ò–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ Yaw –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–æ–≤–æ—Ä–æ—Ç–∞
- OK –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ –æ—Ä—É–∂–∏—è
- OK –û—Ä—É–∂–∏–µ –Ω–µ –≤—Å–∫–∏–¥—ã–≤–∞–µ—Ç—Å—è –≤–≤–µ—Ä—Ö
- OK –ü–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤ –±–µ–∑ –¥—ë—Ä–≥–∞–Ω–∏—è

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

1. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ Yaw**: –í `ProcessEntityUpdate` —Å–æ–∑–¥–∞—ë—Ç—Å—è `NewRotation` —Å —Ç–µ–∫—É—â–∏–º Pitch –∏ Roll:
   ```cpp
   FRotator NewRotation(CurrentRotation.Pitch, NewYaw, CurrentRotation.Roll);
   ```

2. **–ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è —Ç–æ–ª—å–∫–æ Yaw**: –í `ApplyInterpolatedMovement` –∏–Ω—Ç–µ—Ä–ø–æ–ª–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ Yaw –º–µ–∂–¥—É —Å–Ω–∏–º–∫–∞–º–∏:
   ```cpp
   float InterpolatedYaw = FMath::Lerp(OldState.Rotation.Yaw, NewState.Rotation.Yaw, Alpha);
   ```

3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π**: Pitch –∏ Roll –≤—Å–µ–≥–¥–∞ –±–µ—Ä—É—Ç—Å—è –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–º –∞–Ω–∏–º–∞—Ü–∏—è–º —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

### –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ

- **Pitch —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–º–µ—Ä–æ–π**: –í UE5 Pitch –æ–±—ã—á–Ω–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–º–µ—Ä–æ–π –∏–≥—Ä–æ–∫–∞ –∏ –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–ª—è –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
- **–ê–Ω–∏–º–∞—Ü–∏–∏ –æ—Ä—É–∂–∏—è**: –õ–æ–∫–∞–ª—å–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –æ—Ä—É–∂–∏—è (—Å—Ç—Ä–µ–ª—å–±–∞, –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∞) —É–ø—Ä–∞–≤–ª—è—é—Ç Pitch –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- **–í–∏–∑—É–∞–ª—å–Ω–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Pitch –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã, –∫–æ–≥–¥–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç —Å —Å–µ—Ç–µ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

## üîß –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

- `client/UE5/NECPGAME/Source/LyraGame/Net/WebSocketMovementSyncComponent.cpp`
  - –§—É–Ω–∫—Ü–∏—è `ApplyInterpolatedMovement`: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è —Ä–æ—Ç–∞—Ü–∏–∏
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–≤–æ–≥–æ —Å–Ω–∏–º–∫–∞: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ —Ä–æ—Ç–∞—Ü–∏–∏

## WARNING –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–¢–æ–ª—å–∫–æ Yaw —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è**: Pitch –∏ Roll –æ—Å—Ç–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
2. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –æ—Ä—É–∂–∏—è
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏

