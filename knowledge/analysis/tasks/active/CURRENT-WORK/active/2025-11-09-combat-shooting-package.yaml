metadata:
  id: analysis-combat-shooting-package
  title: Подготовка пакета combat shooting
  document_type: analysis
  category: operations
  status: draft
  version: '1.0.0'
  last_updated: 2025-11-09T01:37:00Z
  concept_approved: false
  concept_reviewed_at: ''
  owners:
    - role: brain_manager
      contact: brain@necp.game
  tags:
    - combat
    - shooting
    - shooter-transition
  topics:
    - gameplay
    - combat-systems
  related_systems:
    - gameplay-service
    - analytics-service
  related_documents:
    - id: combat-shooting
      relation: references
  source: shared/docs/knowledge/analysis/tasks/active/CURRENT-WORK/active/2025-11-09-combat-shooting-package.md
  visibility: internal
  audience:
    - brain-team
    - combat-design
  risk_level: medium
review:
  chain:
    - role: brain_manager
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: Требовалось зафиксировать текущее состояние подготовки API для стрельбы в рамках shooter-перехода.
  goal: Сконсолидировать перепроверенные зависимости, интерфейсы и требования к хранилищу.
  essence: Документ служит чекпоинтом перед декомпозицией задач по REST/WS/Events и хранению combat shooting.
  key_points:
    - Подтверждён readiness базового документа и фронтенд каталога.
    - Описаны ключевые REST, WebSocket и события.
    - Уточнены зависимости с имплантами, abilities и аналитикой.
content:
  sections:
    - id: progress
      title: Прогресс
      body: |
        Перепроверен `combat-shooting.md`: статус `approved`, `api-readiness: ready`, каталог `api/v1/gameplay/combat/shooting.yaml`
        и фронтенд `modules/combat/shooting`. Уточнены TTK параметры, модели отдачи, имплант-модификаторы и режимы стрельбы.
        Описаны зависимости с боевыми и аналитическими компонентами.
      mechanics_links: []
      assets: []
    - id: interfaces
      title: Интерфейсы (черновик)
      body: |
        REST: `/combat/shooting/profiles`, `/combat/shooting/weapons/{weaponId}/recoil`, `/combat/shooting/ttk`,
        `/combat/shooting/modifiers`, `/combat/shooting/loadouts`. WebSocket `wss://api.necp.game/v1/gameplay/combat/shooting/{sessionId}`
        обеспечивает обновления отдачи и TTK в реальном времени. События включают `combat.shooting.recoil-updated`,
        `combat.shooting.modifier-applied`, `combat.shooting.ttk-adjusted`, `combat.shooting.loadout-saved`.
      mechanics_links: []
      assets: []
    - id: storage
      title: Хранение
      body: |
        Планируются таблицы `shooting_profiles`, `weapon_recoil_patterns`, `ttk_matrix`, `shooting_modifiers`,
        `player_loadouts` с поддержкой JSONB для индивидуальных настроек.
      mechanics_links: []
      assets: []
    - id: follow_up
      title: Следующие шаги
      body: |
        - Разбить REST/WS/Events на отдельные задачи с описанием payload.
        - Согласовать зависимость с имплантами и abilities.
        - Подготовить пакет к подаче ДУАПИТАСК после подтверждения постановки API.
      mechanics_links: []
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml#analysis-combat-shooting-package
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-11
    author: Brain Manager
    changes: Конвертация заметки по подготовке combat shooting пакета в YAML.
validation:
  checksum: ''
  schema_version: '1.0'

