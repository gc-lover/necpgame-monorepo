metadata:
  id: inventory-backend-technology-analysis
  title: "Анализ выбора технологии для backend инвентаря"
  priority: high
  status: completed
  assignee: cursor-agent
  created_at: 2025-11-22T00:00:00Z
  updated_at: 2025-11-22T00:00:00Z
  tags:
    - analysis
    - inventory
    - backend
    - technology-choice

task:
  description: |
    Проанализировать выбор технологии для backend системы инвентаря.
    Рассмотреть варианты: Java Spring Boot, Go, готовые решения.
    
  context: |
    В проекте уже используются Go сервисы для realtime (realtime-gateway, matchmaking, ws-lobby).
    Документация LANGUAGE_CHOICE_STRATEGY.md рекомендует Java для инвентаря.
    Необходимо принять решение: продолжать с Java или унифицировать на Go?
    
  analysis:
    java_spring_boot:
      pros:
        - Сложная бизнес-логика (версионирование предметов, транзакции)
        - Spring Boot экосистема (Spring Data, Spring Cloud)
        - Отличная поддержка PostgreSQL (Hibernate/JPA)
        - Транзакции и ACID гарантии
        - Интеграция с Kafka, gRPC
        - Много готовых решений и библиотек
      cons:
        - Больше памяти и CPU
        - Сложнее развертывание
        - Медленнее старт
        - Нужна JVM
      use_case: "Сложная бизнес-логика, много интеграций, критична консистентность"
      
    go:
      pros:
        - Уже используется в проекте (единообразие)
        - Низкое потребление памяти
        - Быстрый старт
        - Простое развертывание (статическая сборка)
        - Отличная поддержка PostgreSQL (database/sql, pgx)
        - Хорошая производительность для CRUD
        - Проще писать и поддерживать код
      cons:
        - Меньше готовых решений для сложной бизнес-логики
        - Нет такого богатого ORM как Hibernate
        - Нужно больше boilerplate кода
      use_case: "Простая/средняя сложность, нужна производительность, простота"
      
    ready_solutions:
      options:
        - name: "PlayFab Inventory"
          description: "Облачная платформа с готовым инвентарем"
          pros: "Быстро, масштабируемо, управляемо"
          cons: "Платная, vendor lock-in, меньше контроля"
        - name: "GameSparks"
          description: "Backend-as-a-Service для игр"
          pros: "Готовые решения"
          cons: "Закрыт, платный, меньше гибкости"
        - name: "Своя реализация"
          description: "Создать свой сервис"
          pros: "Полный контроль, адаптация под нужды"
          cons: "Больше времени на разработку"
          
    recommendation: |
      **РЕКОМЕНДАЦИЯ: Go**
      
      Причины:
      1. Уже используется в проекте для realtime сервисов (единообразие)
      2. Инвентарь - это в основном CRUD операции с БД (Go справится)
      3. Go хорошо работает с PostgreSQL (pgx, database/sql)
      4. Проще развертывание и поддержка
      5. Быстрее разработка для простых операций
      6. Меньше ресурсов сервера
      
      Когда использовать Java:
      - Если появится очень сложная бизнес-логика
      - Если нужна интеграция с Spring Cloud экосистемой
      - Если команда лучше знает Java
      
      Готовые решения:
      - Не рекомендуется для MVP (vendor lock-in, стоимость)
      - Можно рассмотреть позже для масштабирования

implementation:
  decision: "Использовать Go для инвентаря"
  rationale: |
    - Единообразие с существующими сервисами
    - Достаточно для CRUD операций
    - Проще и быстрее разработка
    - Легче развертывание
    
  next_steps:
    - Создать Go микросервис economy-service (или inventory-service)
    - Использовать PostgreSQL для хранения
    - Redis для кэширования
    - REST API для синхронизации с клиентом
    - WebSocket для realtime обновлений (опционально)
    
  migration_path:
    - Если позже потребуется Java, можно будет переписать
    - Go сервис будет проще переписать, чем наоборот
    - Архитектура уже разделена на микросервисы
