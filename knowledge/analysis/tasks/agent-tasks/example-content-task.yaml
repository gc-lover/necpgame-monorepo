metadata:
  id: agent-task-quest-content
  title: "Добавление квестового контента: Первый квест"
  priority: medium
  status: pending
  assignee: cursor-agent
  created_at: 2025-11-22T00:00:00Z
  updated_at: 2025-11-22T00:00:00Z
  tags:
    - content
    - quest
    - narrative

task:
  description: |
    Создать игровой контент для первого квеста игры.
    Квест должен включать:
    - Описание квеста
    - Цели и задачи
    - Награды
    - Диалоги с NPC
    - Локации и события

  context: |
    Первый квест является вводным для игроков.
    Необходим для знакомства с игровой механикой.
    Должен соответствовать общей нарративной структуре.

  requirements:
    - Формат YAML для контента
    - Связь с системой квестов
    - Валидация контента
    - Соответствие канону игры

implementation:
  steps:
    - step: 1
      action: "Создать файл квеста в формате YAML"
      files:
        - knowledge/content/quests/tutorial/first-quest.yaml
      code_paths:
        - Quest content
      validation: |
        - Файл соответствует структуре quest-template.yaml
        - Все обязательные поля заполнены
        - Валидный YAML синтаксис

    - step: 2
      action: "Связать с системой квестов"
      files:
        - knowledge/implementation/backend/quest-system.yaml
      code_paths:
        - Quest system integration
      validation: |
        - Квест может быть загружен системой
        - Все ID валидны
        - Зависимости квеста корректны

    - step: 3
      action: "Добавить диалоги NPC"
      files:
        - knowledge/content/quests/tutorial/first-quest-dialogs.yaml
      code_paths:
        - Dialog content
      validation: |
        - Диалоги соответствуют структуре
        - Все тексты присутствуют
        - Связь с персонажами корректна

    - step: 4
      action: "Создать локации для квеста"
      files:
        - knowledge/content/world/locations/tutorial-zone.yaml
      code_paths:
        - Location content
      validation: |
        - Локации описаны
        - Координаты валидны
        - Связь с квестом корректна

dependencies:
  tasks:
    - id: agent-task-quest-system
      relation: depends_on
      description: Система квестов должна быть реализована
  documents:
    - knowledge/content/quests/quest-template.yaml
    - knowledge/canon/narrative/main-story.yaml
    - knowledge/implementation/backend/quest-engine-backend.yaml
  code_files:
    - knowledge/content/quests/

acceptance_criteria:
  - Квест создан в формате YAML
  - Все обязательные поля заполнены
  - Контент соответствует канону
  - Квест может быть загружен системой
  - Диалоги и локации связаны корректно
  - Валидация контента пройдена

review:
  automated_checks:
    - YAML syntax: валидный синтаксис
    - Structure: соответствует шаблону
    - Content validation: все поля заполнены
    - Canon compliance: соответствует канону
    - Quest system integration: может быть загружен
  human_review_required: true
  review_notes: |
    Для контентных задач требуется проверка:
    - Соответствие нарративу
    - Качество текстов
    - Игровой баланс

    Агент должен выполнить техническую проверку,
    но финальное утверждение делает человек.

related_content:
  features:
    - quest-system
    - dialog-system
    - narrative-system
  game_content:
    - knowledge/content/quests/tutorial/
    - knowledge/canon/narrative/
    - knowledge/content/world/locations/

related_systems:
  - quest-engine
  - narrative-system
  - dialog-system

notes: |
  Это пример задачи для добавления игрового контента.

  Важно:
  - Контент должен соответствовать канону
  - Тексты должны быть качественными
  - Игровой баланс должен быть соблюден
