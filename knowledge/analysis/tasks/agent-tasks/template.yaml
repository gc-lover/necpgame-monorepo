metadata:
  id: agent-task-template
  title: "Шаблон задачи для Cursor Background Agents"
  priority: medium
  status: pending
  assignee: cursor-agent
  created_at: 2025-11-22T00:00:00Z
  updated_at: 2025-11-22T00:00:00Z
  tags:
    - template
    - agent-task

task:
  description: |
    Подробное описание задачи. Что нужно сделать, какую проблему решить.
    
    Пример: Реализовать систему инвентаря для игроков.
    
  context: |
    Контекст задачи: почему это важно, как связано с другими системами.
    
    Пример: Инвентарь необходим для хранения предметов, используемых в бою и крафте.
    
  requirements:
    - SOLID принципы
    - Максимум 400 строк на класс
    - Без комментариев и TODO
    - Интерфейсы для зависимостей
    - Тесты для критической логики

implementation:
  steps:
    - step: 1
      action: "Создать интерфейс IInventory"
      files:
        - client/UE5/NECPGAME/Source/NECPGAME/Inventory/IInventory.h
      code_paths:
        - Inventory interface
      validation: |
        Проверить что интерфейс содержит только методы для работы с инвентарем
        Проверить что нет зависимостей от конкретных классов
        
    - step: 2
      action: "Реализовать класс UInventoryComponent"
      files:
        - client/UE5/NECPGAME/Source/NECPGAME/Inventory/UInventoryComponent.h
        - client/UE5/NECPGAME/Source/NECPGAME/Inventory/UInventoryComponent.cpp
      code_paths:
        - Inventory implementation
      validation: |
        Проверить что класс реализует IInventory
        Проверить что размер класса не превышает 400 строк
        Проверить SOLID принципы
        
    - step: 3
      action: "Интегрировать в игровой персонаж"
      files:
        - client/UE5/NECPGAME/Source/NECPGAME/Characters/LyraCharacter.h
      code_paths:
        - Character integration
      validation: |
        Проверить что компонент добавлен как UPROPERTY
        Проверить что используется интерфейс, а не конкретный класс

dependencies:
  tasks:
    - id: task-id-1
      relation: blocks
      description: Описание зависимости
  documents:
    - knowledge/implementation/backend/inventory-system.yaml
    - knowledge/mechanics/economy/inventory.yaml
  code_files:
    - client/UE5/NECPGAME/Source/NECPGAME/Items/IItem.h

acceptance_criteria:
  - Инвентарь работает через интерфейс IInventory
  - Класс UInventoryComponent не превышает 400 строк
  - Нет комментариев и TODO в коде
  - Соблюдены SOLID принципы
  - Код прошел автоматическое ревью

review:
  automated_checks:
    - SOLID: проверить все принципы
    - Code style: проверить UE5-CPP-STYLE.mdc
    - Checklist: проверить CODE-REVIEW-CHECKLIST.mdc
    - Class size: максимум 400 строк
    - Dependencies: только интерфейсы
    - Tests: есть тесты для критической логики
  human_review_required: false
  review_notes: |
    Агент должен автоматически выполнить все проверки
    и обновить статус задачи

related_content:
  features:
    - inventory-system
    - item-management
  game_content:
    - knowledge/content/items/weapons.yaml
    - knowledge/content/items/consumables.yaml

related_systems:
  - economy
  - combat
  - character-progression

notes: |
  Дополнительные заметки для агента или разработчика.
  
  Пример: Учесть возможность расширения для хранения артефактов.

