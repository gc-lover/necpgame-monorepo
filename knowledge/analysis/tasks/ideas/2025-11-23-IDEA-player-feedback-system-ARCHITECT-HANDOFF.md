# Передача задачи Architect

## Issue #1335: Система обратной связи от игроков

**Статус:** ✅ Концепция готова, передано Architect

**Дата передачи:** 2025-11-23

## Что нужно сделать Architect

### 1. Проектирование архитектуры системы

Проектировать архитектуру для следующих компонентов:

#### 1.1. Микросервис `feedback-service` (Go)
- REST API для приема обращений от игроков
- Интеграция с GitHub API для создания Issues
- Управление голосованием
- Система модерации (автоматическая + опциональная ручная)
- Управление статусами обращений

#### 1.2. БД схема
- Таблица `player_feedback` - основные обращения
- Таблица `feedback_votes` - голоса игроков
- Таблица `feedback_authors` - авторы предложений
- Индексы для производительности

#### 1.3. Интеграции
- GitHub API (REST/GraphQL)
- Character Service (данные игрока)
- Session Service (валидация сессии)
- Notification Service (опционально)

#### 1.4. Клиентская часть (UE5)
- In-game UI форма обратной связи
- Доска идей с голосованием
- История обращений игрока

### 2. Детали для проработки

#### API Endpoints (8 endpoints):
1. `POST /api/v1/feedback/submit` - отправка обращения
2. `GET /api/v1/feedback/{id}` - получение статуса
3. `GET /api/v1/feedback/player/{player_id}` - история обращений
4. `POST /api/v1/feedback/{id}/update-status` - обновление статуса
5. `GET /api/v1/feedback/board` - доска идей
6. `POST /api/v1/feedback/{id}/vote` - голосование
7. `DELETE /api/v1/feedback/{id}/vote` - отзыв голоса
8. `GET /api/v1/feedback/stats` - статистика

#### Безопасность:
- Rate limiting (5 обращений/час, 20/день)
- Валидация и санитизация данных
- Аутентификация через session token
- Анонимизация данных игрока
- Защита от спама

#### Агент `agent:player-feedback`:
- Мониторинг Issues с меткой `player-feedback`
- Классификация и маршрутизация обращений
- Объединение дубликатов
- Отслеживание прогресса

### 3. Связанные документы

- **YAML концепция:** `knowledge/analysis/tasks/ideas/2025-11-23-IDEA-player-feedback-system.yaml`
- **GitHub Issue:** #1335
- **Коммиты:**
  - `[idea-writer] docs: добавить концепцию системы обратной связи от игроков`
  - `[idea-writer] docs: обновить концепцию системы обратной связи с учетом ответов`
  - `[idea-writer] chore: передать задачу Architect для проектирования архитектуры`

### 4. Решения, принятые на этапе Idea Writer

1. ✅ Создать отдельный агент `agent:player-feedback` (не расширение Idea Writer)
2. ✅ Реализовать систему голосования за предложения
3. ✅ Добавить доску идей в игре
4. ✅ Объединять дубликаты вместо простого отклонения
5. ✅ Обязательно фиксировать авторов предложений
6. ✅ Автоматическая модерация с опциональной ручной

### 5. Следующие этапы после Architect

1. **Database Engineer** - проектирование детальной БД схемы и миграций
2. **API Designer** - создание OpenAPI спецификации
3. **Backend Developer** - реализация микросервиса
4. **UE5 Developer** - реализация клиентской части
5. **Создание агента** - реализация `agent:player-feedback`

---

**Примечание:** GitHub Issue #1335 будет обновлен с метками `agent:architect` и `stage:design` после снятия rate limit.

