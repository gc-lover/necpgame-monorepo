# Issue: #407
metadata:
  id: analysis-ideas-2025-12-11-npc-core-system
  title: Система основных NPC: типы, интерфейсы и функционал
  document_type: analysis
  category: npc-system
  status: draft
  version: '0.1.0'
  last_updated: 2025-12-11T21:00:00Z
  concept_approved: false
  concept_reviewed_at: ''
  processed_by: idea-writer
  processed_at: 2025-12-11T21:00:00Z
  github_issue_number: 407
  owners:
    - role: idea_writer
      contact: brain@necp.game
  tags:
    - npc
    - interactions
    - economy
    - reputation
    - ui-ux
  topics:
    - social
    - economy
    - progression
  related_systems:
    - quest-system
    - economy-system
    - reputation-system
    - faction-system
    - skill-system
    - dialogue-system
    - ui-ux
  related_documents:
    - id: npc-system-core-concept
      relation: references
      link: knowledge/analysis/tasks/ideas/npc-system-core-concept.md
  source: knowledge/analysis/tasks/ideas/2025-12-11-IDEA-npc-core-system.yaml
  visibility: internal
  audience:
    - concept
    - design
    - ui-ux
    - gameplay
  risk_level: medium
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: ''
  status: in_progress
  next_actions: []
summary:
  problem: Нет унифицированной схемы основных NPC, их ролей, интерфейсов и связей с системами квестов, экономики, репутации и фракций.
  goal: Сформировать каталог типов NPC, их функционал и интерфейсы, а также описать связи с игровыми системами и требования к UI/UX.
  essence: Единый blueprint по типам NPC, их ролям, функционалу, UI-слоям и интеграциям с системами.
  key_points:
    - 6 базовых типов + расширяемый набор (медик, инженер, хакер, информатор, бармен, охранник).
    - Для каждого типа: лор, функционал, интерфейсы, связи с системами, требования к UX.
    - Требования к интеграции с квестами, экономикой, репутацией, фракциями и навыками.
content:
  sections:
    - id: npc_types
      title: Типы NPC и роли
      body: |
        - Фиксер: посредник контрактов; функции — выдача/трек квестов, организация встреч, доступ к скрытым зонам, торговля репутацией; UI — каталог контрактов, карта контактов, быстрый фильтр по сложности/фракции.
        - Торговец: торговля предметами/оружием, обмен валют, ремонт/моды, аукционы; UI — магазин с фильтрами, предпросмотр модов/скинов, корзина, buyback.
        - Тренер: обучение навыкам, повышение уровня, спец-тренировки, симуляции; UI — дерево навыков, расписание тренировок, стоимость/время, проверка требований.
        - Главарь банды: вступление, задания банды, ресурсы, управление территорией, войны; UI — карта влияния, список операций, налог/дань, репутационные пороги.
        - Директор корпорации: корпоративные контракты, ресурсы, карьерный рост, миссии, влияние; UI — карьерная лестница, корпоративные перки, KPI, пропуска в зоны.
        - Дополнительно: Медик (лечение/импланты, страховка), Инженер (крафт/моды/чинилка), Хакер (взлом/данные/BTL), Информатор (данные/слухи/наводки), Бармен (соц-хаб, слухи, мини-ивенты), Охранник (доступ/безопасность, тревоги).
    - id: functionality
      title: Функционал и зависимости
      body: |
        - Квесты: выдача/приём заданий, контракты, фракционные миссии, ветвления по репутации и выбору; статусы синхронизируются с quest-system/world-state.
        - Экономика: торговля, аукционы, ремонты, модификации, динамические цены по репутации и спросу; поддержка скидок/налогов по фракции.
        - Репутация/фракции: уровни доверия, штрафы, эксклюзивный контент, войны банд/корпораций; soft/hard gating по репутационным порогам.
        - Навыки: обучение, специализации, симуляции, временные бусты; cooldown/ограничения по веткам.
        - Безопасность: доступ в зоны, пропуска, охрана, эскорт, тревоги; роли охраны могут эскалировать тревожность зон.
    - id: interfaces
      title: Интерфейсы взаимодействия (UI/UX)
      body: |
        - Диалоговая система: ветки, выборы, проверки атрибутов/репутации, таймеры решений.
        - Торговля: инвентарь, фильтры, сравнение, предпросмотр модов, корзина, аукцион/ставки.
        - Квесты: журнал, метки на карте, таймеры, награды, репутационные условия.
        - Тренировки/навыки: дерево навыков, режимы симуляции, прогресс-бары, стоимость/время.
        - Фракции/территории: карта влияния, статусы войн, доступность заданий, налог/дань.
        - Безопасность: экраны допуска, пропуска, режимы тревоги, лог событий.
        - Доступность: контраст, субтитры, цветовые профили для редкости, поддержка геймпада/клавиатуры.
    - id: lore_hooks
      title: Лор и контекст
      body: |
        - Стилистика: киберпанк 2077, мегаполисная плотность, вертикальные уровни.
        - Для каждого типа: происхождение, мотивация, связи с фракциями, визуальные маркеры и голосовые профили.
        - География: ключевые хабы (Night City, Tokyo, Warsaw, LA) — фиксерские сети, корпоративные башни, подпольные рынки, тренировочные арены.
    - id: integration_requirements
      title: Требования к интеграции с системами
      body: |
        - quest-system: API для контрактов, статусы, репутационные ветки, совместимость с world-state.
        - economy-system: прайс-листы, комиссии, динамическое ценообразование, аукционы, ремонт/моды.
        - reputation/faction-system: уровни доверия, перки доступа, штрафы, эксклюзивы.
        - skill-system: наборы тренировок, опыт, cooldown, ограничения по веткам.
        - dialogue-system: проверки атрибутов, генерация реплик, интеграция с UI.
        - ui-ux: стандартизированные экраны (торговля, навыки, квесты, фракции, доступ).
        - telemetry/analytics: события NPC_INTERACT, TRADE_TX, CONTRACT_ACCEPT, TRAINING_START, ACCESS_GRANTED/REFUSED; метрики ARPU по торговцам, conversion по фиксеру, retention по тренеру.
        - security/event-bus: события тревоги/доступа, эскалация уровня безопасности зон.

    - id: data_api
      title: Данные и API (черновик для Architect)
      body: |
        - Common NPC schema: id, npc_type, faction_id, reputation_required, services[], location_id, availability (schedule), fees/commissions.
        - Contract DTO (fixer/corp/gang): contract_id, issuer_faction, rewards (xp, currency, items, reputation), requirements (skills, rep, flags), expiry, penalties.
        - Trade listing: item_id, price/base_price, dynamic_modifiers, rarity, stock, buy_limit, tax, auction_flags.
        - Training module: skill_id, rank_from/to, time_cost, currency_cost, cooldown, req_flags.
        - Access/permits: zone_id, clearance_level, expires_at, granted_by, revocation_rules.
    - id: readiness_criteria
      title: Критерии готовности для Architect
      body: |
        - Каталог типов NPC заполнен (лор, функционал, интерфейсы, зависимости).
        - Определены интеграционные требования к квестам, экономике, репутации, фракциям, навыкам.
        - UI/UX требования перечислены для торговых/квестовых/фракционных/тренерских экранов.
        - Определён список API/данных для последующей детализации Architect.
appendix:
  glossary: []
  references:
    - knowledge/analysis/tasks/ideas/npc-system-core-concept.md
  decisions: []
implementation:
  needs_task: false
  blockers: []
history:
  - version: '0.1.0'
    date: 2025-12-11
    author: idea-writer
    changes: Черновой blueprint по основным NPC (типы, функционал, UI/UX, интеграции).
validation:
  checksum: ''
  schema_version: '1.0'

