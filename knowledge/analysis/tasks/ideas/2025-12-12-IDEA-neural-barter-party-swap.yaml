# Issue: #1682
metadata:
  id: idea-neural-barter-party-swap
  title: Кооп: «Нейронный бартер» (обмен статами в пати)
  document_type: analysis
  category: gameplay-coop
  status: in-progress
  version: '0.1.0'
  last_updated: 2025-12-12T13:30:00Z
  concept_approved: false
  concept_reviewed_at: ''
  processed_by: idea-writer
  processed_at: 2025-12-12T13:30:00Z
  github_issue_number: 1682
  owners:
    - role: gameplay_design
      contact: gameplay@necp.game
  tags:
    - coop
    - stats
    - combat
  topics:
    - party_mechanics
    - combat_support
  related_systems:
    - gameplay-service
    - inventory
    - auth-service
    - analytics-service
  related_documents: []
  source: ''
  visibility: internal
  audience:
    - design
    - balance
    - analytics
  risk_level: medium
review:
  chain:
    - role: gameplay_director
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions:
    - owner: gameplay_director
      action: утвердить финальные наборы статов и значения усталости
      due_at: 2025-12-15
    - owner: balance
      action: проверить DPS/ACC дельту на свопах по классам (танк/дд/саппорт)
      due_at: 2025-12-16
    - owner: analytics
      action: добавить события telemetry: barter_start, barter_success, barter_fail, barter_fatigue
      due_at: 2025-12-17
summary:
  problem: Нужен краткосрочный обмен статами в пати без перманентных баффов и с контролем абуза.
  goal: Задать параметры свопа, усталости и кулдаунов с учётом ролей.
  essence: В бою или подготовке игроки временно обмениваются ключевыми статами, затем получают «усталость» на оба.
  key_points:
    - Своп точечный (2 стата), длительность 20–30 сек.
    - Усталость снижает те же статы на 10–25% на 40–60 сек.
    - Кулдауны и проверки ролей/устройств, чтобы исключить спам и мульти-аккаунты.
content:
  sections:
    - id: swap_basics
      title: Базовые параметры
      body: |
        - Обмениваемые статы (на выбор пары, без стакания):
          - DMG ↔ ACC (дпс ↔ точность)
          - ROF ↔ STABILITY (скорострельность ↔ стабилизация)
          - CRIT_CHANCE ↔ CRIT_DAMAGE (крит шанс ↔ мультипликатор)
        - Длительность свопа: 20–30 сек (по умолчанию 25 сек).
        - Величина переноса: 12–18% базового значения статов участника (по умолчанию 15%).
        - Кулдаун на игрока: 120 сек; общий кулдаун на пати: 45 сек.
        - Требование: пати 2–4 игроков, разные роли (не менее 2 уникальных).
    - id: fatigue
      title: Усталость после свопа
      body: |
        - Длительность усталости: 40–60 сек (по умолчанию 50 сек).
        - Модификатор усталости: -15% к тем же статам, что были обменены; не стакается, обновляется по таймеру.
        - DR: при повторе за 10 мин подряд усталость усиливается до -20% и длится +10 сек.
        - Иммунитеты: анти-своп имплант может снизить усталость до -8% (но даёт +10 сек кулдаун).
    - id: anti_abuse
      title: Анти-абьюз
      body: |
        - Уникальность аккаунтов: запрещено свопать, если 2+ участников с одним device_id/IP-кластером за последние 15 мин.
        - Лимит боёв: не более 3 успешных свопов в одном бою/инстансе.
        - Откат при дизконнекте: своп отменяется, усталость всё равно применяется.
        - PvP ограничения: своп запрещён в рейтинговых аренах; в открытом PvP — перенос ≤10% и усталость -20%.
    - id: ui_ux
      title: UI/UX
      body: |
        - Простой выбор пары статов через radial меню (2 шага, ≤3 сек).
        - Индикатор свопа над полосой статов, таймер усталости отдельным цветом.
        - Тосты: «Обмен активен» (зелёный), «Усталость» (янтарный), ошибки (красный).
    - id: telemetry
      title: Метрики
      body: |
        - Конверсия: своп попытки → успех → отмена → усталость.
        - Баланс: ΔDPS/ΔACC/ΔROF до и после, % неудачных свопов (прерывания).
        - Эксплойты: частота свопов на одинаковых IP/устройствах, откаты по дисконнектам.
        - Ретеншн: использование механики в боевых и кооп-сценариях (миссии/рейды/эвенты).
    - id: open_questions
      title: Открытые вопросы
      body: |
        - Нужно ли разрешить своп утилити-статов (stamina, stealth noise)? Пока нет — риск эксплойтов.
        - Добавить ли редкий мод, снижающий усталость для саппортов? Требуется баланс-расчёт.
        - Разрешить ли своп в тренировочных инстансах без усталости? Может упростить онбординг.
history:
  - version: '0.1.0'
    date: 2025-12-12
    author: idea-writer
    changes: Черновик параметров свопа статов, усталости, анти-абьюз и метрик.
validation:
  checksum: ''
  schema_version: '1.0'

