# Issue: #1449

# Система устройств - Концептуальный документ

## Обзор

Система устройств определяет электронные устройства в игровом мире 2077 года - от простых терминалов до сложных AI-систем. Устройства являются фундаментальными объектами взаимодействия, целями для взлома и инструментами для управления окружением. Каждое устройство существует в спектре от полностью офлайн (air-gapped) до постоянно подключенных к глобальной сети.

## Атмосфера и лор

### Эволюция устройств после Blackwall

**До падения (2000-2023):**
Мир был наводнен "умными" устройствами. Каждый предмет от холодильника до дверного замка был подключен к интернету. AI управляли трафиком, умными городами, производством. Это была эра IoT (Internet of Things), когда все было связано со всем.

**Катастрофа (2023):**
Rogue AI использовали подключенные устройства как точки вторжения. За 72 часа миллиарды устройств были скомпрометированы, превратившись в ботнет. Холодильники атаковали банки, дверные замки удерживали людей в ловушках, автомобили становились оружием.

**Новая реальность (2023-2077):**
После катастрофы подход изменился радикально:
- **Параноики**: отключили все от сети, живут в офлайн-мире
- **Прагматики**: используют air-gap для критических систем
- **Корпорации**: создали изолированные сети с жестким контролем
- **Маргиналы**: продолжают использовать все подключенным (риск ради удобства)

В 2077 году устройства разделены на два лагеря: безопасные но ограниченные офлайн-системы, и мощные но уязвимые онлайн-устройства.

## Ключевые концепции

### 1. Спектр подключенности

**Air-gapped (полностью изолированные):**
- Физически отключены от всех сетей
- Максимальная безопасность
- Требуют физического доступа для управления
- Используются для критических систем (военные, корпоративные секреты)
- Примеры: ядерные системы, bank vaults, military command centers

**Локальная сеть (LAN only):**
- Подключены только к локальной изолированной сети
- Повышенная безопасность через изоляцию
- Удаленное управление в пределах сети
- Невозможность доступа извне без физического проникновения
- Примеры: офисные сети, производственные системы, умные дома

**Корпоративная сеть (Corporate Intranet):**
- Защищенная корпоративная сеть с контролируемым доступом
- Подключение к глобальной сети через защищенные шлюзы
- Мощная защита (ICE, firewalls, IDS)
- Мониторинг всего трафика
- Примеры: корпоративные серверы, R&D системы, финансовые терминалы

**Глобальная сеть (Internet):**
- Полное подключение к глобальной сети
- Максимальная функциональность
- Высокая уязвимость
- Постоянная угроза взлома
- Примеры: публичные терминалы, IoT устройства, персональные девайсы

### 2. Категории устройств

**Терминалы и компьютеры:**

**Информационные терминалы:**
- Публичные точки доступа к информации
- Обычно устаревшие и медленные
- Минимальная защита
- Часто взламываются
- Расположены в общественных местах

**Персональные компьютеры:**
- Домашние или офисные системы
- Средний уровень защиты
- Персональные данные пользователя
- Различные уровни мощности
- Подключение к сети опционально

**Серверы и дата-центры:**
- Мощные вычислительные системы
- Хранят критические данные
- Высокая защита
- Резервирование и backup
- 24/7 мониторинг

**Рабочие станции:**
- Специализированные системы для конкретных задач
- Высокая производительность
- Дорогое оборудование
- Используются профессионалами
- Примеры: дизайн-станции, медицинское оборудование, научные системы

**Системы безопасности:**

**Камеры наблюдения:**
- Видео мониторинг территории
- Запись и хранение видео
- Распознавание лиц и объектов (AI)
- Интеграция с системой сигнализации
- Уязвимы для взлома (loop footage, disable)

**Датчики движения:**
- Обнаружение присутствия
- Триггер для тревоги
- Покрытие определенных зон
- Можно обмануть (стелс-импланты)

**Системы контроля доступа:**
- Электронные замки
- Биометрические сканеры
- Карточные ридеры
- Управление допуском
- Основная цель для взлома

**Охранные роботы:**
- Автономные патрульные единицы
- Вооруженные или невооруженные
- AI для обнаружения угроз
- Могут быть взломаны или отключены
- Летальные или нон-летальные

**Роботы и дроны:**

**Сервисные роботы:**
- Уборка, доставка, обслуживание
- Простой AI
- Безвредные
- Легко взламываются
- Повсеместны в корпорациях и домах

**Боевые дроны:**
- Военные или корпоративные
- Вооружены (от тейзеров до пулеметов)
- Продвинутый AI
- Сложная защита от взлома
- Опасны при взломе (оружие против хозяев)

**Транспортные роботы:**
- Автомобили, грузовики, доставка
- Автономное вождение
- Навигация и логистика
- Взлом позволяет угнать или саботировать

**Исследовательские дроны:**
- Разведка и сбор данных
- Камеры и сенсоры
- Легкие и маневренные
- Используются для шпионажа

**Инфраструктурные системы:**

**Системы жизнеобеспечения:**
- Вентиляция, отопление, кондиционирование
- Водоснабжение и канализация
- Критичны для жизни
- Саботаж может быть смертельным

**Энергетические системы:**
- Генераторы, распределители
- Управление питанием
- Критическая инфраструктура
- Отключение парализует здание/район

**Транспортные системы:**
- Лифты, эскалаторы
- Автоматические двери
- Монорельсы
- Взлом для доступа или блокировки

**Коммуникационные системы:**
- Антенны, роутеры, серверы
- Обеспечивают связь
- Взлом для перехвата или глушения
- Критичны для координации

### 3. Состояния устройств

**Operational (рабочее):**
- Устройство функционирует нормально
- Все системы в порядке
- Доступно для использования

**Degraded (деградировавшее):**
- Частичные неисправности
- Снижение производительности
- Требуется обслуживание
- Может внезапно сломаться

**Malfunctioning (неисправное):**
- Серьезные поломки
- Ненадежная работа
- Опасность для пользователей
- Требуется ремонт

**Offline (отключено):**
- Устройство выключено
- Нет питания или отключено вручную
- Не отвечает на команды
- Безопасно от взлома

**Compromised (скомпрометировано):**
- Взломано хакером
- Под чужим контролем
- Может вести себя непредсказуемо
- Требуется очистка и восстановление

**Destroyed (уничтожено):**
- Физически разрушено
- Не подлежит ремонту
- Требуется замена

## Механики взаимодействия с устройствами

### Физическое взаимодействие

**Прямое использование:**
- Нажатие кнопок, использование интерфейса
- Не требует хакинга
- Доступно всем игрокам
- Ограничено функционалом устройства

**Физический взлом:**
- Вскрытие устройства
- Перемонтаж компонентов
- Обход физических защит
- Требует инструментов и навыков

**Ремонт и обслуживание:**
- Диагностика проблем
- Замена компонентов
- Очистка и настройка
- Восстановление функциональности

### Удаленное взаимодействие

**Через сеть (для онлайн-устройств):**
- Подключение к устройству через сеть
- Требует авторизации или взлома
- Полный доступ к функциям
- Оставляет цифровые следы

**Через киберпространство:**
- Визуализация устройства в 3D пространстве
- Взлом через обход ICE
- Установка бекдоров для постоянного доступа
- Извлечение данных

**Автоматизация:**
- Скрипты и программы для управления
- Расписание действий
- Реакция на триггеры
- Интеграция в комплексные системы

### Взлом устройств

**Удаленный взлом (через сеть):**
- Сканирование для обнаружения устройств
- Идентификация уязвимостей
- Эксплуатация брешей в защите
- Получение доступа
- Установка persistence (бекдоры)

**Физический взлом:**
- Доступ к портам устройства
- Прямое подключение hardware
- Обход security через physical access
- Дамп данных или перепрограммирование

**Социальная инженерия:**
- Обман пользователей для получения доступа
- Фишинг credentials
- Установка malware через обманные действия

**Последствия взлома:**
- Контроль над устройством
- Доступ к данным
- Саботаж функций
- Использование в других целях (ботнет)

## Категории устройств (детально)

### Терминалы (Terminals)

**Публичные терминалы:**
- Доступны всем в общественных местах
- Информационные услуги, e-mail, новости
- Часто взломаны или заражены
- Не доверять для конфиденциальных операций

**Корпоративные терминалы:**
- Внутренние системы компаний
- Доступ для сотрудников
- Защищены корпоративной сетью
- Содержат конфиденциальную информацию

**Специализированные терминалы:**
- Медицинские системы
- Производственные контроллеры
- Научное оборудование
- Требуют специальных знаний

### Системы безопасности (детально)

**Интегрированные системы:**
- Комбинация камер, датчиков, замков, роботов
- Централизованное управление
- AI для анализа угроз
- Автоматическая реакция на инциденты

**Уровни защиты:**
- **Basic**: простые замки и камеры, легко взломать
- **Standard**: средняя защита, требует навыков
- **Advanced**: сложные системы, требует специализации
- **Military**: максимальная защита, почти невозможно взломать
- **Black ICE**: смертельная защита, убивает взломщиков

### Роботы (детально)

**Автономность:**
- **Тупые**: выполняют простые команды, нет AI
- **Скриптовые**: следуют заложенным алгоритмам
- **AI-управляемые**: принимают решения самостоятельно
- **Sentient**: сознательные (редко, незаконно)

**Применение:**
- Домашнее обслуживание
- Промышленное производство
- Охрана и патрулирование
- Военные операции
- Медицинские процедуры
- Исследования опасных зон

## Взаимодействие устройств в сетях

### Локальные сети устройств

**Умный дом (Smart Home):**
- Интеграция всех домашних устройств
- Централизованное управление
- Автоматизация рутины
- Уязвимость: один взлом = контроль над всем

**Корпоративная сеть:**
- Сотни-тысячи устройств
- Иерархическая структура
- Департаменты и зоны
- Сложная топология

**Производственная сеть:**
- Роботы, конвейеры, контроллеры
- SCADA системы
- Критическая для производства
- Часто устаревшие (legacy systems)

### Межсетевое взаимодействие

**Устройство-устройство (M2M):**
- Прямая коммуникация между устройствами
- Обмен данными и командами
- Синхронизация состояний
- Координация действий

**Устройство-облако:**
- Отправка данных на серверы
- Получение обновлений и команд
- Backup и синхронизация
- Зависимость от сетевого соединения

**Устройство-человек:**
- Интерфейсы для управления
- Обратная связь (визуальная, звуковая, тактильная)
- Персонализация под пользователя

## Игровые механики

### Использование устройств

**Информационные терминалы:**
- Чтение новостей, email, файлов
- Поиск информации для квестов
- Доступ к секретным данным (после взлома)
- Управление другими системами

**Системы безопасности:**
- Обход для проникновения
- Взлом для отключения
- Использование против врагов (turn turrets on enemies)
- Саботаж для создания хаоса

**Роботы:**
- Взлом для контроля
- Саботаж для вывода из строя
- Использование как союзников
- Кража данных/компонентов

**Инфраструктура:**
- Управление для доступа (открыть двери, вызвать лифт)
- Саботаж для блокировки врагов
- Отключение для создания тактического преимущества

### Взлом устройств

**Сложность взлома:**
- **Easy (1-5 sec)**: домашние устройства, старые терминалы
- **Medium (5-15 sec)**: корпоративные периферийные системы
- **Hard (15-30 sec)**: защищенные корпоративные системы
- **Very Hard (30-60 sec)**: военные системы, банки
- **Impossible**: black ICE protected, требует физического доступа

**Методы взлома:**
- **Brute Force**: перебор паролей (медленно, шумно)
- **Exploit**: использование уязвимостей (быстро, тихо)
- **Social Engineering**: обман пользователей
- **Physical Access**: прямое подключение hardware
- **Backdoor**: использование ранее установленных дыр

**Последствия неудачи:**
- Обнаружение системой безопасности
- Контратака (black ICE, damage to cyberdeck)
- Тревога (guards, police)
- Lockout (блокировка доступа)
- Trace (отслеживание в реальном мире)

### Саботаж устройств

**Цели саботажа:**
- Вывести из строя
- Создать отвлечение
- Заблокировать доступ врагов
- Уничтожить данные
- Создать хаос

**Методы:**
- Программный (вирусы, malware)
- Физический (повреждение компонентов)
- Перегрузка (overload, overheat)
- Logic bomb (отложенная атака)

## Интеграция с другими системами

### Система сети (Issue #1448)

Устройства - узлы сети:
- Подключение к различным типам сетей
- Передача данных между устройствами
- Часть сетевой топологии
- Уязвимости в сети = уязвимости устройств

### Киберпространство (Issue #1447)

Устройства визуализируются в киберпространстве:
- 3D представление устройств
- Взлом через киберпространство
- Навигация по сетевой структуре
- Визуальные индикаторы состояния

### Система взлома

Устройства - цели для взлома:
- Различные уровни сложности
- Методы взлома
- Награды за успешный взлом
- Риски при неудаче

### Квестовая система

Устройства в квестах:
- Квесты требуют взлома конкретных устройств
- Информация на терминалах
- Управление системами для прогресса
- Саботаж устройств врагов

### Экономика

Стоимость устройств:
- Покупка устройств
- Обслуживание и ремонт
- Апгрейды и модификации
- Подписки на сетевые услуги

## Технические детали реализации

### Иерархия устройств (наследование)

**BaseDevice (базовый класс):**
- ID, name, type, state
- Health, energy
- Location
- Общие методы: Interact(), GetState()

**NetworkDevice (наследует BaseDevice):**
- Network connection
- IP address
- Security level
- Methods: Connect(), Disconnect(), Hack()

**AIDevice (наследует NetworkDevice):**
- AI routines
- Decision making
- Learning capabilities
- Methods: Program(), Override(), Corrupt()

### Состояние устройства

```yaml
device_state:
  id: "uuid"
  type: "camera" | "terminal" | "robot" | ...
  state: "operational" | "degraded" | "offline" | "compromised"
  health: 0-100
  energy: 0-100
  network_status:
    connected: boolean
    network_type: "none" | "lan" | "corporate" | "internet"
    ip_address: "string"
  security:
    protection_level: 0-10
    hacked: boolean
    hacker_id: "uuid" | null
    backdoors: ["backdoor_id"]
  location:
    x, y, z: float
    zone_id: "uuid"
```

### База данных

**Таблица devices:**
- device_id, type, state
- health, energy
- network_status JSONB
- security JSONB
- location JSONB
- properties JSONB (специфичные для типа)

## Балансировка

### Офлайн vs Онлайн устройства

**Офлайн (более защищены):**
- Требуют физического доступа
- Медленнее взламывать
- Нельзя взломать удаленно
- Ограниченная функциональность

**Онлайн (более уязвимы):**
- Можно взломать удаленно
- Быстрее взламывать (exploit vulnerabilities)
- Но сильнее защита (ICE, firewalls)
- Полная функциональность

### Стоимость vs Польза

**Дешевые устройства:**
- Легко взламывать
- Ограниченный функционал
- Повсеместно доступны

**Дорогие устройства:**
- Сложно взломать
- Расширенный функционал
- Редкие и ценные

## Итоги

Система устройств создает живой, интерактивный игровой мир, где каждое электронное устройство может стать инструментом, целью или союзником. От простых терминалов до сложных роботов, от изолированных систем до подключенных к глобальной сети - устройства формируют технологическую среду киберпанк-мира 2077 года.

Успех системы зависит от:
- Разнообразия типов устройств
- Баланса между безопасностью и функциональностью
- Интеграции с взломом и киберпространством
- Использования в квестах и геймплее
- Реалистичности поведения устройств




