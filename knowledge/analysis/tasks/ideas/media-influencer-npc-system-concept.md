# Issue: #1456

# Система медийных NPC - инфлюенсеры и стримеры как игровые персонажи

## Описание

Система медийных NPC позволяет реальным стримерам и инфлюенсерам интегрировать своих персонажей в игровой мир как NPC с возможностью переключения между режимом игрока и режимом NPC. Когда медийный игрок онлайн, он может выполнять функции NPC через специальное меню. Когда игрок офлайн, персонаж автоматически работает как обычный NPC с AI-поведением.

## Лор и атмосфера

В мире 2077 года медийные личности стали новыми богами цифрового пространства. Стримеры, инфлюенсеры и киберзвезды имеют миллионы подписчиков, которые следят за каждым их шагом через нейроинтерфейсы. Некоторые из них стали настолько влиятельными, что корпорации нанимают их как официальных представителей, фиксеров или даже политических лидеров.

Эти медийные личности не просто играют в игру - они живут в ней, создавая контент в реальном времени. Их присутствие в игровом мире ощущается даже когда они офлайн - их AI-копии продолжают взаимодействовать с игроками, выполняя свои роли. Это создает уникальное ощущение живого мира, где известные личности всегда доступны.

## Основные режимы работы

### 1. Режим игрока (Player Mode)

**Описание:** Медийный игрок играет своим персонажем как обычный игрок.

**Характеристики:**
- Полный контроль над персонажем
- Все обычные игровые механики доступны
- Может выполнять квесты, участвовать в PvP, торговать
- Взаимодействует с другими игроками как равный

**Особенности для медийных игроков:**
- Визуальный индикатор статуса "Media" (иконка камеры)
- Followers counter (количество подписчиков)
- Stream status (если стримит)
- Возможность быстрого переключения в NPC режим

### 2. Режим NPC (NPC Mode)

**Описание:** Медийный игрок переключается в режим NPC и получает специальное меню "NPC Control Panel".

**Активация:**
- Открывается через специальное меню (N key или UI button)
- Требует нахождение в designated NPC zone (например, офис, магазин, база фракции)
- Нельзя активировать в бою или опасных зонах

**NPC Control Panel:**

**Основные функции:**
- **Role Selection** - выбор активной роли (учитель, фиксер, торговец и т.д.)
- **Service Menu** - настройка доступных услуг для игроков
- **Dialogue Editor** - создание и редактирование диалогов
- **Quest Giver** - создание и выдача квестов (если роль позволяет)
- **Pricing** - настройка цен на услуги (если роль торговца)
- **Availability Schedule** - расписание доступности NPC

**Интерфейс:**
- Разделен на вкладки по функциям
- Live preview диалогов и квестов
- Statistics (сколько игроков взаимодействовало)
- Earnings tracker (сколько заработано в NPC режиме)

**Взаимодействие с игроками:**
- Игроки видят медийного NPC как обычного NPC
- Могут инициировать диалог
- Могут покупать услуги
- Могут брать квесты

**Ограничения:**
- Не может перемещаться во время NPC режима
- Не может атаковать или быть атакованным
- Не может использовать инвентарь игрока (только NPC инвентарь)

### 3. Автономный режим (Autonomous Mode)

**Описание:** Когда медийный игрок офлайн, персонаж работает как автономный NPC с AI-поведением.

**AI-поведение:**
- Использует настройки из NPC Control Panel
- Автоматически отвечает на запросы игроков
- Выдает квесты согласно расписанию
- Торгует по установленным ценам
- Следует сценариям, созданным медийным игроком

**Интеллектуальность AI:**
- Базовый AI - простые ответы и действия
- Улучшенный AI - более сложные диалоги (требует оплаты или репутации)
- Advanced AI - может импровизировать и адаптироваться (premium feature)

**Ограничения:**
- Не может создавать новые квесты (только выдавать существующие)
- Не может менять цены
- Не может покидать назначенную зону
- Не может принимать важные решения (сохраняет их для медийного игрока)

## Типы ролей для медийных NPC

### 1. Учитель / Наставник (Teacher/Mentor)

**Функции:**
- Обучение новичков игровым механикам
- Выдача обучающих квестов
- Советы и рекомендации
- Проверка знаний (тесты)

**Прогрессия:**
- Начинающий Учитель → Опытный Наставник → Мастер → Легендарный Сэнсэй
- Чем выше уровень, тем более ценные знания может передать

**Требования:**
- Игрок должен иметь высокий уровень в определенных навыках
- Требуется репутация с faction (если обучает фракционным механикам)

**Заработок:**
- Плата от студентов за обучение
- Бонусы от корпораций за подготовку специалистов

### 2. Фиксер (Fixer)

**Функции:**
- Выдача контрактов и заданий
- Посредничество между игроками и фракциями
- Продажа информации
- Организация deals

**Прогрессия:**
- Мелкий Фиксер → Опытный Фиксер → Известный Фиксер → Легендарный Фиксер
- Чем выше уровень, тем более прибыльные контракты

**Требования:**
- Репутация с несколькими фракциями
- Социальные навыки

**Заработок:**
- Процент от контрактов
- Плата за информацию

### 3. Торговец (Merchant)

**Функции:**
- Продажа оружия, имплантов, экипировки
- Специализированные товары (редкие, легендарные)
- Обмен ресурсами
- Крафтинг на заказ

**Прогрессия:**
- Уличный Торговец → Магазин → Известный Торговец → Легендарный Дилер
- Чем выше уровень, тем более редкие товары

**Требования:**
- Начальный капитал
- Место для торговли

**Заработок:**
- Прибыль от продаж
- Комиссия за обмены

### 4. Президент / Лидер фракции (President/Faction Leader)

**Функции:**
- Управление фракцией
- Выдача фракционных квестов
- Recruitment новых членов
- Принятие стратегических решений

**Прогрессия:**
- Офицер Фракции → Высокопоставленный Член → Лидер → Легендарный Президент
- Чем выше уровень, тем больше влияние на фракцию

**Требования:**
- Максимальная репутация с фракцией
- Выборы или назначение

**Заработок:**
- Зарплата от фракции
- Бонусы от успехов фракции

### 5. Врач / Медик (Doctor/Medic)

**Функции:**
- Лечение игроков
- Установка имплантов
- Продажа медикаментов
- Квесты по спасению людей

**Прогрессия:**
- Уличный Медик → Клиника → Известный Врач → Легендарный Риппердок
- Чем выше уровень, тем более качественное лечение и редкие импланты

**Требования:**
- Навыки медицины и хирургии
- Лицензия (или работа без лицензии)

**Заработок:**
- Плата за лечение
- Прибыль от имплантов

### 6. Инженер (Engineer)

**Функции:**
- Ремонт оборудования и оружия
- Модификация и улучшение
- Крафтинг технических предметов
- Взлом устройств на заказ

**Прогрессия:**
- Техник → Механик → Мастер Инженер → Легендарный Tech
- Чем выше уровень, тем более сложные модификации

**Требования:**
- Технические навыки
- Оборудование для работы

**Заработок:**
- Плата за ремонт и модификации
- Продажа созданных предметов

### 7. Хакер (Hacker/Netrunner)

**Функции:**
- Взлом на заказ
- Продажа программ и вирусов
- Обучение хакингу
- Информационная поддержка

**Прогрессия:**
- Скрипт-кидди → Хакер → Опытный Netrunner → Легендарный Netrunner
- Чем выше уровень, тем более сложные взломы

**Требования:**
- Навыки хакинга
- Кибердек и программы

**Заработок:**
- Плата за взломы
- Продажа программ

### 8. Информатор (Informant)

**Функции:**
- Продажа информации о локациях, NPC, квестах
- Разведка на заказ
- Слежка за игроками (для PvP)
- Разоблачение секретов

**Прогрессия:**
- Уличный Инфо → Информатор → Известный Инфо → Легендарный Шпион
- Чем выше уровень, тем более ценная информация

**Требования:**
- Социальные навыки
- Репутация

**Заработок:**
- Плата за информацию
- Комиссия за разведку

## Динамическая оптимизация роли

### Развитие роли с персонажем

**Уровни развития роли:**
- **Level 1-10:** Базовая роль, простые функции
- **Level 11-30:** Расширенные функции, больше возможностей
- **Level 31-50:** Профессиональная роль, специализация
- **Level 51+:** Легендарный статус, уникальные возможности

**Примеры прогрессии:**

**Торговец:**
- Level 1-10: Уличный торговец (10 слотов инвентаря, обычные товары)
- Level 11-30: Магазин (50 слотов, редкие товары)
- Level 31-50: Известный торговец (200 слотов, легендарные товары)
- Level 51+: Легендарный дилер (unlimited слоты, эксклюзивные товары)

**Фиксер:**
- Level 1-10: Мелкие контракты (reward: 100-1000 credits)
- Level 11-30: Средние контракты (reward: 1000-10000 credits)
- Level 31-50: Крупные контракты (reward: 10000-100000 credits)
- Level 51+: Легендарные контракты (reward: 100000+ credits, уникальные награды)

### Статус и репутация

**Влияние статуса персонажа:**
- Высокая репутация → больше клиентов
- Легендарный статус → эксклюзивные клиенты
- Низкая репутация → меньше доверия

**Репутация медийного NPC:**
- Формируется от качества услуг
- Отзывы игроков
- Количество успешных взаимодействий
- Streaming popularity (количество зрителей)

## Интеграция с игровыми системами

### NPC Service

**Управление медийными NPC:**
- Регистрация медийного игрока как NPC
- Управление статусом (Player Mode / NPC Mode / Autonomous Mode)
- Сохранение настроек NPC Control Panel
- Tracking взаимодействий с игроками

**API endpoints (примерно):**
```
POST /api/v1/npc/media/register
GET /api/v1/npc/media/{player_id}/status
PUT /api/v1/npc/media/{player_id}/mode
POST /api/v1/npc/media/{player_id}/settings
GET /api/v1/npc/media/{player_id}/stats
```

### Character Service

**Управление персонажами:**
- Dual state: игрок и NPC одновременно
- Раздельные инвентари (игрок / NPC)
- Переключение между состояниями
- Сохранение прогресса

### Quest Service

**Квесты от медийных NPC:**
- Создание квестов через NPC Control Panel
- Выдача квестов игрокам
- Tracking прогресса квестов
- Награды за квесты

**Ограничения:**
- Квесты должны быть одобрены системой (нет exploit)
- Награды ограничены балансом
- Нельзя создавать квесты, нарушающие правила игры

### Social Service

**Репутация и отношения:**
- Репутация медийного NPC
- Отзывы игроков
- Rating system (1-5 звезд)
- Blacklist для токсичных игроков

### AI Service

**AI-поведение автономных NPC:**
- Обучение AI на основе действий медийного игрока
- Копирование стиля общения
- Автоматические ответы на типичные вопросы
- Выполнение рутинных функций

**Уровни AI:**
- **Basic AI** (бесплатный) - простые шаблонные ответы
- **Enhanced AI** (платный) - более естественные диалоги
- **Advanced AI** (premium) - имитация стиля медийного игрока

## NPC Control Panel - интерфейс

### Вкладка: Role Management

**Выбор роли:**
- Dropdown с доступными ролями
- Описание каждой роли
- Требования для роли
- Current role status

**Настройка роли:**
- Специализация (например, торговец оружием vs торговец имплантами)
- Уровень сервиса (basic, enhanced, premium)
- Ограничения (кому доступно, когда доступно)

### Вкладка: Services

**Список услуг:**
- Checkbox для каждой услуги (enabled/disabled)
- Pricing для каждой услуги
- Cooldown между использованиями
- Quantity limits (например, максимум 10 продаж в час)

**Примеры услуг для торговца:**
- Sell weapons: price 100-10000 credits
- Sell implants: price 500-50000 credits
- Repair equipment: price 50-500 credits
- Craft items: price depends on materials

### Вкладка: Dialogues

**Dialogue Editor:**
- Pre-made templates (для быстрого старта)
- Custom dialogues (свои тексты)
- Branching dialogues (ветвления)
- Response options (варианты ответов)

**Тип диалогов:**
- Greeting - приветствие
- Service offer - предложение услуг
- Quest offer - предложение квестов
- Small talk - болтовня
- Farewell - прощание

### Вкладка: Quests

**Quest Creator:**
- Quest name и description
- Objectives (цели квеста)
- Rewards (награды)
- Requirements (требования к игроку)
- Time limits

**Validation:**
- Система проверяет квест на exploit
- Балансирует награды
- Проверяет корректность objectives

### Вкладка: Statistics

**Metrics:**
- Total interactions (всего взаимодействий)
- Unique players (уникальных игроков)
- Earnings (заработок в NPC режиме)
- Rating (средний рейтинг от игроков)
- Popular services (какие услуги популярны)

**Charts:**
- Interactions over time
- Earnings over time
- Rating trends

### Вкладка: Settings

**Availability:**
- Schedule (когда NPC доступен)
- Auto-switch to Autonomous Mode when going AFK
- Notifications (когда игрок взаимодействует)

**Privacy:**
- Hide real player name (показывать только NPC имя)
- Block list (заблокировать определенных игроков)
- Stream integration (показывать в стриме взаимодействия)

## Примеры медийных NPC

### Пример 1: Популярный стример как Фиксер

**Player:** "CyberNinja_TV" (50000 подписчиков)

**Online (NPC Mode):**
- Сидит в своем офисе в Watson
- Выдает контракты в real-time
- Стримит процесс взаимодействия с игроками
- Импровизирует диалоги

**Offline (Autonomous Mode):**
- AI продолжает выдавать контракты из списка
- Использует pre-made диалоги
- Автоматически принимает оплату
- Сохраняет сложные вопросы для стримера

### Пример 2: Инфлюенсер как Учитель

**Player:** "SkillMaster_Pro" (100000 подписчиков)

**Online (NPC Mode):**
- Проводит обучающие сессии
- Отвечает на вопросы новичков
- Стримит процесс обучения
- Создает обучающие квесты

**Offline (Autonomous Mode):**
- AI выдает обучающие квесты
- Отвечает на простые вопросы
- Направляет к guides и tutorials

### Пример 3: Киберзвезда как Торговец

**Player:** "NeonQueen" (200000 подписчиков)

**Online (NPC Mode):**
- Продает эксклюзивную косметику и оружие
- Рекламирует товары в стриме
- Проводит аукционы для зрителей

**Offline (Autonomous Mode):**
- AI продает товары по фиксированным ценам
- Автоматически управляет инвентарем

## Связанные системы

- `npc-service` - управление медийными NPC
- `social-service` - репутация и рейтинги
- `character-service` - управление персонажами медийных игроков
- `quest-service` - создание и выдача квестов
- `ai-service` - AI-поведение автономных NPC
- `economy-service` - экономика медийных NPC
- `analytics-service` - tracking metrics
- `streaming-integration-service` (новый?) - интеграция со стриминговыми платформами

## Приоритет

P2 (Средний)

## Метки

game-design, social, npc

























