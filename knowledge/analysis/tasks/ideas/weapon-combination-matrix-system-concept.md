<!-- Issue: #1561 -->
# Матрица комбинаций оружия (Borderlands-стиль) - Концепция

## Обзор

Система процедурной генерации оружия создаёт миллионы уникальных комбинаций различных характеристик, механик и модификаторов по типу Borderlands. В мире Cyberpunk 2077 это отражает развитие технологий производства оружия и разнообразие корпоративных решений.

## Лор в мире Cyberpunk 2077

### Контекст процедурной генерации

В мире NECPGAME процедурная генерация оружия стала стандартом для массового производства, особенно популярного среди корпораций и независимых производителей. Различные комбинации характеристик, механик и модификаторов создают уникальные образцы оружия для каждого игрока.

**Как работает процедурная генерация:**
- Оружие генерируется из комбинации базовых компонентов
- Каждая комбинация создаёт уникальный образец
- Различные бренды имеют свои специализации
- Редкость определяет качество и уникальность

### Технологическое обоснование

**Массовое производство:**
- Использует модульные системы для создания разнообразия
- Разработано корпорациями Arasaka, Militech, Kang Tao
- Популярно среди производителей для снижения затрат
- Эффективно для создания уникальных образцов

**Корпоративные специализации:**
- Каждая корпорация имеет свои приоритеты
- Различные бренды создают уникальные комбинации
- Специализация определяет доступные механики
- Репутация бренда влияет на качество

## Компоненты матрицы

### Базовый тип оружия (10 типов)

**Типы:**
- Пистолеты, автоматы, винтовки, снайперские винтовки
- Дробовики, пистолеты-пулеметы, пусковые установки
- Ближний бой, лазерное оружие, энергетическое оружие

**Характеристики:**
- Каждый тип имеет базовые характеристики
- Различные типы эффективны в разных ситуациях
- Совместимость с различными формами проджектайлов

### Форма проджектайла (11 форм)

**Формы:**
- Точка, линия, веер, спираль, волна
- Круг, квадрат, цепь, разделение, рикошеты, фазирование

**Характеристики:**
- Каждая форма имеет уникальные характеристики
- Различные формы эффективны в разных ситуациях
- Совместимость с различными типами оружия

### Специальные механики (30+ механик)

**Механики:**
- Персистентные эффекты, цепной урон, разрушение окружения
- Размещаемое оружие, лазерное оружие, ближний бой
- Стихийные эффекты, временные эффекты, контроль и манипуляция
- Призыв и поддержка, уникальные формы проджектайлов
- И другие механики

**Характеристики:**
- Каждая механика имеет уникальные характеристики
- Различные механики эффективны в разных ситуациях
- Совместимость с различными типами оружия и форм

### Модификаторы (обвес, чипы, прошивки - 30+ вариантов)

**Обвес:**
- Термический модуль, криогенный модуль, химический инжектор
- Электрический модуль, гравитационный модуль, система наведения
- Система охлаждения, расширенный ствол, глушитель, прицел

**Чипы:**
- Огненный чип, ледяной чип, ядовитый чип, электрический чип
- Вампирический чип, ускорительный чип, временной чип
- Телепортационный чип, призывной чип, лечебный чип

**Прошивки:**
- Огненная прошивка, ледяная прошивка, ядовитая прошивка
- Электрическая прошивка, ган-ката прошивка, комбинированная прошивка
- Вампирическая прошивка, ускорительная прошивка, временная прошивка

### Бренды (6 корпораций)

**Корпорации:**
- Arasaka, Militech, Kang Tao, Biotechnica, Budget Arms, Независимые производители

**Характеристики:**
- Каждая корпорация имеет свои специализации
- Различные бренды создают уникальные комбинации
- Специализация определяет доступные механики и модификаторы

### Редкость (5 уровней)

**Уровни:**
- Common (обычное), Uncommon (необычное), Rare (редкое)
- Epic (эпическое), Legendary (легендарное)

**Характеристики:**
- Каждый уровень имеет свои характеристики
- Более редкие образцы имеют лучшие характеристики
- Редкость определяет доступные механики и модификаторы

### Альтернативные режимы стрельбы (5 режимов)

**Режимы:**
- Одиночные выстрелы, очередь, автоматический огонь
- Заряженные выстрелы, залп

**Характеристики:**
- Каждый режим имеет уникальные характеристики
- Различные режимы эффективны в разных ситуациях
- Совместимость с различными типами оружия

### Слоты модификаций (6 типов)

**Слоты:**
- Обвес, чипы, прошивки, альтернативные режимы
- Специальные механики, уникальные модификаторы

**Характеристики:**
- Каждый слот имеет свои ограничения
- Различные слоты совместимы с различными модификаторами
- Количество слотов зависит от редкости

## Алгоритм генерации (10 шагов)

### Шаг 1: Выбор базового типа оружия
- Выбор из 10 типов оружия
- Учет весов вероятности для каждого типа
- Учет контекста генерации (лига, режим)

### Шаг 2: Выбор бренда
- Выбор из 6 корпораций
- Учет специализаций корпораций
- Учет репутации и доступности бренда

### Шаг 3: Расчет редкости
- Расчет на основе контекста генерации
- Учет весов вероятности для каждой редкости
- Учет лиги и режима игры

### Шаг 4: Выбор формы проджектайла
- Выбор из 11 форм проджектайлов
- Учет совместимости с типом оружия
- Учет специализаций бренда

### Шаг 5: Выбор специальных механик
- Выбор из 30+ механик
- Учет совместимости с формой проджектайла
- Учет специализаций бренда и редкости

### Шаг 6: Генерация модификаторов
- Генерация обвеса, чипов, прошивок
- Учет совместимости модификаторов
- Учет специализаций бренда и редкости

### Шаг 7: Выбор альтернативных режимов
- Выбор из 5 режимов стрельбы
- Учет совместимости с типом оружия
- Учет специализаций бренда

### Шаг 8: Генерация характеристик
- Генерация базовых характеристик из пулов
- Применение модификаторов
- Расчет финальных характеристик

### Шаг 9: Валидация баланса
- Проверка баланса по лигам
- Проверка баланса по режимам (PvE/PvP/экстракт)
- Проверка температурных ограничений
- Проверка TTK

### Шаг 10: Генерация уникального имени
- Генерация имени на основе комбинации
- Учет бренда, типа, механик
- Создание уникального идентификатора

## Матрица совместимости

### Совместимость форм проджектайлов и механик

**Совместимые комбинации:**
- Точка + Персистентные эффекты
- Линия + Цепной урон
- Веер + Разрушение окружения
- Спираль + Лазерное оружие
- И другие совместимые комбинации

**Несовместимые комбинации:**
- Некоторые формы несовместимы с некоторыми механиками
- Ограничения на основе технологических возможностей
- Ограничения на основе баланса

### Рекомендации по эффективным комбинациям

**Эффективные комбинации:**
- Комбинации, создающие синергические эффекты
- Комбинации, увеличивающие эффективность
- Комбинации, создающие уникальные возможности

## Матрица брендов

### Arasaka

**Специализации:**
- Smart-оружие, энергетические клинки, кибероружие
- Интеграция с имплантами и кибердеками

**Приоритетные формы:**
- Точка, линия, фазирование

**Приоритетные механики:**
- Контроль и манипуляция, временные эффекты
- Лазерное оружие, кибероружие

**Приоритетные модификаторы:**
- Прошивки кибер-деки, чипы для smart-оружия

### Militech

**Специализации:**
- Военное оружие, гранаты, мины, турели
- Надежность, простота использования

**Приоритетные формы:**
- Точка, линия, веер, круг

**Приоритетные механики:**
- Размещаемое оружие, разрушение окружения
- Взрывное оружие, стандартное оружие

**Приоритетные модификаторы:**
- Обвес для надежности, система наведения

### Kang Tao

**Специализации:**
- Smart-оружие, лазерное оружие
- Инновации, эстетика

**Приоритетные формы:**
- Спираль, волна, цепь

**Приоритетные механики:**
- Лазерное оружие, smart-оружие
- Уникальные формы проджектайлов

**Приоритетные модификаторы:**
- Чипы для smart-оружия, система охлаждения

### Biotechnica

**Специализации:**
- Ядовитое оружие, наноботовое оружие, вампирическое оружие
- Биотехнологии, химия

**Приоритетные формы:**
- Точка, веер, разделение

**Приоритетные механики:**
- Стихийные эффекты, призыв и поддержка
- Вампиризм, наноботы

**Приоритетные модификаторы:**
- Химический инжектор, вампирический чип

### Budget Arms

**Специализации:**
- Бюджетное оружие, базовые модели
- Доступность, надежность

**Приоритетные формы:**
- Точка, линия, веер

**Приоритетные механики:**
- Стандартное оружие, базовые механики

**Приоритетные модификаторы:**
- Базовый обвес, простые чипы

### Независимые производители

**Специализации:**
- Кастомное оружие, уникальные модификации
- Гибкость, персонализация

**Приоритетные формы:**
- Все формы доступны

**Приоритетные механики:**
- Все механики доступны

**Приоритетные модификаторы:**
- Все модификаторы доступны

## Система весов и вероятностей

### Веса для типов оружия
- Различные типы имеют различные веса
- Веса зависят от контекста генерации
- Веса зависят от лиги и режима

### Веса для брендов
- Различные бренды имеют различные веса
- Веса зависят от репутации и доступности
- Веса зависят от контекста генерации

### Веса для редкости
- Различные уровни редкости имеют различные веса
- Веса зависят от контекста генерации
- Веса зависят от лиги и режима

### Веса для механик
- Различные механики имеют различные веса
- Веса зависят от совместимости
- Веса зависят от специализаций бренда

## Интеграция с матрицей экипировки

### Связь с Equipment Matrix Manager
- Использование матрицы характеристик
- Использование пулов характеристик
- Использование модификаторов

### Связь с системой лута
- Интеграция с системой генерации лута
- Учет контекста генерации
- Учет лиги и режима

## Критерии готовности

Концепция готова к передаче Architect когда:
- [x] Детальный лор в стиле Cyberpunk 2077 описан
- [x] Компоненты матрицы детально описаны
- [x] Алгоритм генерации проработан
- [x] Матрица совместимости описана
- [x] Матрица брендов проработана
- [x] Система весов и вероятностей описана
- [x] Интеграции с игровыми системами описаны

## Следующие шаги

1. Передача концепции Architect для детализации технической реализации
2. Создание OpenAPI спецификаций для API Designer
3. Реализация бекенда для Backend Developer
4. Интеграция с системой лута для Economy Developer

