metadata:
  id: roadmap-index
  title: "Roadmap реализации проекта NECPGAME"
  document_type: analysis
  category: roadmap
  status: draft
  version: "1.5.0"
  last_updated: 2025-11-20T23:30:00Z
  concept_approved: false
  concept_reviewed_at: ""
  owners:
    - role: tech_director
      contact: tech@necp.game
  tags:
    - roadmap
    - implementation
    - planning
  topics:
    - project-planning
    - version-planning
  related_systems:
    - all
  related_documents:
    - id: implementation-tech-stack
      relation: references
    - id: architecture-mvp-backend
      relation: references
  visibility: internal
  audience:
    - leadership
    - tech_director
    - project_managers
  risk_level: medium
review:
  chain:
    - role: tech_director
      reviewer: ""
      reviewed_at: ""
      status: pending
  next_actions: []
summary:
  problem: Нужна структурированная roadmap реализации проекта с распределением задач по версиям и приоритетам.
  goal: Организовать задачи реализации от базовой инфраструктуры до полного релиза, разделив по версиям игры.
  essence: Roadmap разделена на версии от технодемки до релиза, каждая версия содержит задачи с приоритетами внутри.
  key_points:
    - v0.1 (Tech Demo): базовая инфраструктура, WebSocket-шлюз (Go, замена QUIC), WebSocket лобби (Go), Matchmaking (Go), UE5 Dedicated Server для игровой логики
    - v0.2 (MVP Foundation): база данных, аутентификация, базовые API (Java микросервисы)
    - v0.3 (MVP Core): основные игровые системы (combat на UE5, economy на Java, quests на Java), динамическое переключение протоколов
    - v0.4 (MVP Extended): социальные системы (Java), расширенный контент, GvG битвы, масштабирование
    - v1.0 (Release): полный функционал, оптимизация, масштабирование, масштабные битвы (1000v1000)
content:
  sections:
    - id: structure
      title: Структура roadmap
      body: |
        Roadmap разделена на версии игры, каждая версия представлена отдельным файлом:
        - v0.1-tech-demo.yaml: Технодемка - базовая инфраструктура и прототипы
        - v0.2-mvp-foundation.yaml: MVP Foundation - инфраструктура и базовые сервисы
        - v0.3-mvp-core.yaml: MVP Core - основные игровые системы, динамическое переключение протоколов
        - v0.4-mvp-extended.yaml: MVP Extended - расширенные системы и контент, GvG битвы, масштабирование
        - v1.0-release.yaml: Release - полный функционал и оптимизация, масштабные битвы
        - ui-implementation-plan.yaml: Детальный план реализации UI/UX через C++ для всех версий

        Дополнительные документы:
        - network-architecture-analysis.yaml: Анализ сетевой архитектуры с гибридным подходом WebSocket/UDP
      mechanics_links: []
      assets: []
    - id: version_progression
      title: Прогрессия версий
      body: |
        Версии построены по принципу наращивания функциональности:
        - Каждая следующая версия опирается на предыдущую
        - Задачи внутри версии разделены по приоритетам (critical, high, medium, low)
        - Критичные задачи должны быть завершены перед переходом к следующей версии
      mechanics_links: []
      assets: []
    - id: task_structure
      title: Структура задач
      body: |
        Каждая задача содержит:
        - id: уникальный идентификатор
        - title: название задачи
        - description: описание
        - priority: приоритет (critical, high, medium, low)
        - dependencies: зависимости от других задач
        - estimated_effort: оценка трудозатрат
        - related_documents: связанные документы из knowledge
      mechanics_links: []
      assets: []
    - id: current_status
      title: Текущий статус проекта
      body: |
        v0.1 Tech Demo (в процессе):
        OK Завершено:
        - Базовая инфраструктура (Docker Compose, PostgreSQL, Redis, Keycloak, Envoy, Observability)
        - Liquibase миграции для схемы БД
        - WebSocket-шлюз (Go, gorilla/websocket) - развернут в Docker
        - WebSocket лобби (Go) - развернут в Docker
        - Matchmaking (Go) - развернут в Docker
        - Observability стек (Prometheus, Grafana, Loki, Tempo, Promtail)
        - UE5 клиент: миграция на WebSocket завершена, интеграция работает
        - UE5 Dedicated Server: базовая интеграция с WebSocket Gateway
        - Репликация GameState: полный цикл PlayerInput → Server → GameState → Clients
        - Оптимизация PlayerID: короткие ID (9 символов)
        - Рефакторинг WebSocket: FWebSocketsModule с полными URL путями
        - Исправлены краши при закрытии редактора
        - Оптимизация компиляции: исправлена PCH инвалидация

        OK Завершено (дополнительно):
        - Рефакторинг синхронизации движения: создан UWebSocketMovementSyncComponent для разделения ответственности
        - Исправлена обработка PlayerInput: корректное разделение AimX/AimY (поворот камеры) и MoveX/MoveY (движение персонажа)
        - Исправлен инвертированный Pitch: взгляд вверх/вниз работает правильно
        - Исправлены все краши (EXCEPTION_ACCESS_VIOLATION): безопасная работа с делегатами через TWeakObjectPtr
        - Завершено базовое тестирование полного цикла синхронизации: PlayerInput → Server → GameState → Clients работает стабильно

        WARNING В процессе:
        - Оптимизация частоты обновлений и размера сообщений
        - Дельта-компрессия для GameState

        ❌ Не начато:
        - Инвентарь, экономика, крафт
        - Расширенная физика стрельбы через Chaos Physics (базовая есть в Lyra)
        - Network Prediction
        - Античит-мониторинг
        OK УЖЕ ЕСТЬ В LYRA (не нужно реализовывать):
        - GAS для способностей и эффектов
        - Базовая система стрельбы и попаданий (WeaponTrace)
        - Система урона и здоровья
        - Spread/accuracy система
        OK ИНТЕГРИРОВАНО:
        - Активация способности стрельбы через WebSocket PlayerInput

        v0.2 MVP Foundation: не начато
        v0.3 MVP Core: не начато
        v0.4 MVP Extended: не начато
        v1.0 Release: не начато
      mechanics_links: []
      assets: []
appendix:
  glossary: []
  references:
    - title: Tech Stack
      link: ../../implementation/TECH-STACK.yaml
    - title: MVP Backend Architecture
      link: ../../implementation/architecture/mvp-backend-architecture.yaml
    - title: Network Architecture Analysis
      link: ../../implementation/networking/network-architecture-analysis.yaml
  decisions: []
implementation:
  needs_task: false
  queue_reference: []
  blockers: []
history:
  - version: "1.0.0"
    date: 2025-11-16
    author: tech_director
    changes: Создан индекс roadmap с версиями проекта.
  - version: "1.1.0"
    date: 2025-11-17
    author: tech_director
    changes: Обновлены key_points с учетом миграции на Go (realtime-gateway, ws-lobby, matchmaking) и использования UE5 Dedicated Server для игровой логики.
  - version: "1.2.0"
    date: 2025-11-17
    author: tech_director
    changes: Обновлена документация после перехода на Lyra Starter Game как основу проекта. Проект теперь использует NECPGAME на базе Lyra вместо кастомного necpg проекта.
  - version: "1.3.0"
    date: 2025-11-18
    author: tech_director
    changes: Обновлена roadmap с учетом перехода с QUIC на WebSocket из-за проблем совместимости. Добавлена гибридная архитектура с динамическим переключением протоколов (WebSocket для PvE, UDP для PvP). Добавлены задачи по масштабированию для GvG битв и масштабных войн (1000v1000). Создан документ network-architecture-analysis.yaml с детальным анализом.
  - version: "1.4.0"
    date: 2025-11-20
    author: tech_director
    changes: Добавлена секция current_status с актуальным состоянием проекта. Отмечено завершение рефакторинга WebSocket клиента, исправление крашей при закрытии редактора, оптимизация компиляции. Обновлен статус задач v0.1 Tech Demo.
  - version: "1.5.0"
    date: 2025-11-20
    author: tech_director
    changes: Отмечено завершение базового тестирования синхронизации. Рефакторинг синхронизации движения (UWebSocketMovementSyncComponent). Исправлена обработка PlayerInput (разделение AimX/AimY и MoveX/MoveY), исправлен инвертированный Pitch, исправлены все краши (EXCEPTION_ACCESS_VIOLATION). Полный цикл синхронизации работает стабильно.
validation:
  checksum: ""
  schema_version: "1.0"
