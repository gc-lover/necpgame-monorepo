metadata:
  id: roadmap-v0.4-mvp-extended
  title: 'v0.4 MVP Extended — Расширенные системы и контент'
  document_type: analysis
  category: roadmap
  status: draft
  version: '1.1.0'
  last_updated: 2025-11-18T22:30:00Z
  concept_approved: false
  concept_reviewed_at: ''
  owners:
    - role: tech_director
      contact: tech@necp.game
  tags:
    - roadmap
    - mvp
    - extended
  topics:
    - social
    - content
    - narrative
  related_systems:
    - social-service
    - world-service
    - narrative-service
  related_documents:
    - id: mechanics-social-overview
      relation: references
  visibility: internal
  audience:
    - backend
    - content
    - narrative
  risk_level: medium
review:
  chain:
    - role: tech_director
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: Необходимо реализовать социальные системы и расширенный контент для полноценного опыта.
  goal: Создать социальные системы, романтику, гильдии, расширенный контент и нарратив.
  essence: MVP Extended добавляет глубину через социальные взаимодействия и богатый контент.
  key_points:
    - Критично: социальные системы, гильдии, романтика
    - Высокий приоритет: расширенный контент, диалоги, NPC, GvG битвы
    - Средний приоритет: медиа-системы, события мира, масштабирование для GvG
    - Низкий приоритет: продвинутые социальные механики
tasks:
  critical:
    - id: social-001
      title: Социальные системы
      description: |
        Реализовать систему друзей и чатов.
        Создать систему групп и партий.
        Интегрировать с игровыми системами.
        Реализовать систему рефералов.
      priority: critical
      dependencies: []
      estimated_effort: 10d
      related_documents:
        - knowledge/implementation/backend/friend-system.yaml
        - knowledge/implementation/backend/party-system.yaml
        - knowledge/implementation/backend/chat/
    - id: guild-001
      title: Система гильдий
      description: |
        Реализовать создание и управление гильдиями.
        Создать систему рангов и прав.
        Интегрировать с фракциями и районами.
        Реализовать гильдийные войны (GvG).
        Подготовить архитектуру для масштабных GvG битв (100v100, 200v200).
      priority: critical
      dependencies: [social-001]
      estimated_effort: 12d
      notes: |
        WARNING GvG битвы требуют специальной сетевой архитектуры:
        - 100v100 (200 игроков): UDP, 60-80 Hz, spatial partitioning
        - 200v200 (400 игроков): UDP, 40-60 Hz, sharding
      related_documents:
        - knowledge/implementation/backend/guild-system-backend.yaml
        - knowledge/mechanics/social/
        - knowledge/implementation/networking/network-architecture-analysis.yaml
    - id: romance-001
      title: Система романтики
      description: |
        Реализовать систему отношений с NPC.
        Создать систему событий романтики.
        Интегрировать с диалогами и квестами.
        Реализовать систему химии и культурных контекстов.
      priority: critical
      dependencies: []
      estimated_effort: 15d
      related_documents:
        - knowledge/implementation/romance-system/
        - knowledge/implementation/database/romance-database-schema.sql
        - knowledge/content/quests/romantic/
  high:
    - id: npc-001
      title: Система NPC и диалогов
      description: |
        Реализовать систему NPC с личностями.
        Создать движок диалогов с ветвлением.
        Интегрировать с квестами и романтикой.
        Реализовать систему репутации с NPC.
      priority: high
      dependencies: [quest-001]
      estimated_effort: 12d
      related_documents:
        - knowledge/canon/narrative/dialogues/
        - knowledge/canon/narrative/npc-lore/
    - id: content-001
      title: Расширенный контент
      description: |
        Загрузить все квесты из каталога.
        Создать события для всех регионов.
        Интегрировать романтические события.
        Реализовать ежедневные и еженедельные квесты.
      priority: high
      dependencies: [quest-001, romance-001]
      estimated_effort: 20d
      related_documents:
        - knowledge/content/quests/
        - knowledge/implementation/mvp-content-summary.yaml
    - id: narrative-001
      title: Нарративная система
      description: |
        Реализовать систему сценариев.
        Создать систему катсцен.
        Интегрировать с основным сюжетом.
        Реализовать систему концовок.
      priority: high
      dependencies: [npc-001]
      estimated_effort: 10d
      related_documents:
        - knowledge/canon/narrative/scenarios/
        - knowledge/canon/narrative/cutscenes/
        - knowledge/canon/narrative/sid-endings/
  medium:
    - id: world-002
      title: Расширенные мировые события
      description: |
        Реализовать события для всех регионов.
        Создать систему глобальных событий.
        Интегрировать с фракциями и корпорациями.
        Реализовать временные события.
      priority: medium
      dependencies: [world-001]
      estimated_effort: 12d
      related_documents:
        - knowledge/mechanics/world/events/
        - knowledge/canon/lore/events/
    - id: economy-003
      title: Расширенная экономика
      description: |
        Реализовать аукционный дом.
        Создать систему инвестиций.
        Интегрировать фондовую биржу.
        Реализовать торговые маршруты.
      priority: medium
      dependencies: [economy-002]
      estimated_effort: 15d
      related_documents:
        - knowledge/mechanics/economy/auction-house/
        - knowledge/mechanics/economy/economy-investments.yaml
        - knowledge/mechanics/economy/stock-exchange/
        - knowledge/mechanics/economy/trading-routes-global.yaml
    - id: housing-001
      title: Система жилья
      description: |
        Реализовать покупку и кастомизацию жилья.
        Создать систему декораций.
        Интегрировать с инвентарём.
        Реализовать систему визитов.
      priority: medium
      dependencies: [economy-002]
      estimated_effort: 10d
      related_documents:
        - knowledge/implementation/backend/housing/
    - id: network-003
      title: Масштабирование для GvG битв
      description: |
        Реализовать spatial partitioning для GvG 200 игроков (100v100).
        Реализовать sharding для GvG 400 игроков (200v200).
        Оптимизировать сетевой трафик через grid-based разделение.
        Реализовать синхронизацию между серверами кластера.
      priority: medium
      dependencies: [guild-001]
      estimated_effort: 12d
      notes: |
        WARNING GvG 200: UDP, 60-80 Hz, spatial partitioning (grid-based).
        WARNING GvG 400: UDP, 40-60 Hz, sharding (кластер 2-4 сервера).
        WARNING Оптимизация: игрок видит только свой сектор + соседние.
      related_documents:
        - knowledge/implementation/networking/network-architecture-analysis.yaml
        - knowledge/analysis/optimization/WORLD-ZONING-ARCHITECTURE.md
        - knowledge/analysis/optimization/ESPORTS-SERVER-CAPACITY.md
      implementation_paths:
        - services/realtime-gateway-go/
        - client/UE5/NECPGAME/Source/LyraGame/Server/
  low:
    - id: social-002
      title: Продвинутые социальные механики
      description: |
        Реализовать систему наставничества.
        Создать систему найма NPC.
        Интегрировать социальные сети в игре.
        Реализовать систему достижений.
      priority: low
      dependencies: [social-001]
      estimated_effort: 12d
      related_documents:
        - knowledge/mechanics/social/
        - knowledge/implementation/backend/achievement-system.yaml
    - id: media-001
      title: Медиа-системы
      description: |
        Реализовать систему рекламы в игре.
        Создать медиа-платформу.
        Интегрировать с экономикой.
        Реализовать систему новостей.
      priority: low
      dependencies: [economy-003]
      estimated_effort: 8d
      related_documents:
        - knowledge/mechanics/economy/economy-advertising-platform.yaml
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  github_issue: 134
  needs_task: false
  queue_reference: []
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-16
    author: tech_director
    changes: Создана roadmap для MVP Extended v0.4.
  - version: '1.1.0'
    date: 2025-11-18
    author: tech_director
    changes: Добавлена задача network-003 по масштабированию для GvG битв (100v100, 200v200). Обновлена задача guild-001 с учетом сетевой архитектуры для GvG. Добавлены ссылки на network-architecture-analysis.yaml.
validation:
  checksum: ''
  schema_version: '1.0'

