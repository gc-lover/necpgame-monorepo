# Issue: #1662
metadata:
  id: network-camouflage-stealth-system-balance
  title: "Баланс: Стелс-система «Сетевой камуфляж районов» (подмешивание в трафик устройств)"
  document_type: balance
  category: stealth-mechanics
  status: approved
  version: '1.0.0'
  last_updated: 2026-01-06T16:00:00.000000
  concept_approved: true
  concept_reviewed_at: '2026-01-06T16:00:00.000000'
  owners:
    - role: game_balance_designer
      contact: balance@necp.game
  tags:
    - stealth-mechanics
    - network-camouflage
    - traffic-spoofing
    - parasite-malware
    - risk-reward-stealth
    - urban-networks
    - device-traffic
    - infection-mechanics
  topics:
    - stealth-gameplay
    - network-security-mechanics
    - infection-risks
    - urban-combat-stealth
    - malware-effects
    - counter-intelligence
  related_systems:
    - stealth-service
    - network-service
    - combat-service
    - infection-service
  related_documents:
    - id: stealth-system-balance
      relation: implements
    - id: network-security-design
      relation: utilizes
  source: balance-team-analysis
  visibility: internal
  audience:
    - game-designers
    - balance-team
    - developers
    - qa-testers
  risk_level: medium

summary:
  problem: |
    Игроки нуждаются в продвинутой стелс-механике для городской среды,
    которая позволяет эффективно скрываться в сетевом трафике устройств,
    но несет риск заражения паразитным ПО с негативными эффектами.
    Необходимо сбалансировать мощную маскировку с существенными рисками.
  goal: |
    Создать систему "Сетевого камуфляжа" как рискованную стелс-механику,
    которая маскирует игрока в трафике устройств района,
    предоставляя превосходную скрытность до момента атаки,
    но с шансом заражения паразитами из сетевого трафика.
  essence: |
    "В толпе устройств ты становишься невидимым. Но в толпе вирусов ты можешь заразиться."
  key_mechanics:
    - Network Camouflage: Маскировка в трафике устройств района
    - Parasite Infection: Риск заражения вредоносным ПО
    - Stealth Breach: Раскрытие при атаке или обнаружении

problem_analysis:
  current_state:
    - Недостаточная глубина стелс-механик в городской среде
    - Отсутствие интеграции с сетевыми системами района
    - Недостаток рискованных стелс-механик с побочными эффектами
    - Отсутствие контента для network-savvy персонажей
  pain_points:
    - Стелс кажется предсказуемым без технологической глубины
    - Недостаток тактических решений в urban combat
    - Отсутствие баланса между эффективностью и риском
    - Недостаток контента для stealth-focused билдов
  user_impact:
    - Снижение разнообразия stealth стратегий
    - Отсутствие глубины в urban exploration
    - Недостаток тактической напряженности
    - Снижение вовлеченности в stealth gameplay

solution_approach:
  core_concept: |
    Сетевой камуфляж - это продвинутая стелс-технология, которая временно
    интегрирует игрока в сетевой трафик устройств района. Игрок становится
    "невидимым" для обнаружения, но рискует заразиться паразитами из трафика.
  design_philosophy:
    - High Risk, High Reward: Мощная маскировка требует принятия риска
    - Technological Immersion: Глубокая интеграция с сетевыми механиками
    - Tactical Choice: Стратегические решения о использовании
    - Infection Tension: Постоянное напряжение от риска заражения

detailed_balance:
  camouflage_mechanics:
    activation_system:
      hack_requirement: "Необходим успешный хак устройства в районе"
      activation_time: "2 секунды задержки активации с прогресс-баром"
      visual_effects: "Цифровые помехи, искажение контуров, сетевые линии"
      audio_effects: "Электронные помехи, статический шум, сетевые сигналы"

    camouflage_duration:
      base_duration: "45 секунд активной маскировки"
      extension_bonus: "Дополнительные 15 секунд за каждое устройство в радиусе"
      maximum_duration: "Максимум 120 секунд"
      decay_timer: "Автоматическое отключение при истечении времени"

    stealth_benefits:
      detection_reduction: "-90% шанс обнаружения пассивными сканерами"
      aggro_immunity: "Полная защита от случайной агрессии NPC"
      marker_invisibility: "Невидимость для сетевых маркеров и маяков"
      sound_dampening: "-75% радиус обнаружения по звуку"

  parasite_infection_system:
    infection_probability:
      base_infection_chance: "15% шанс заражения при активации"
      duration_multiplier: "Увеличение на 5% за каждые 30 секунд маскировки"
      device_density_bonus: "Дополнительные 10% за плотность устройств в районе"
      maximum_infection_risk: "Максимум 60% шанс заражения"

    parasite_types:
      input_lag_parasite:
        description: "Задержка ввода и реакции системы"
        effects: "+100ms input lag, замедленная реакция интерфейса"
        duration: "60 секунд"
        probability: "40% от всех заражений"
        severity_scaling: "Увеличивается с продолжительностью инфекции"

      targeting_drift_parasite:
        description: "Дрейф прицеливания и случайные отклонения"
        effects: "Случайные отклонения прицела ±5°, нестабильность"
        duration: "45 секунд"
        probability: "30% от всех заражений"
        severity_scaling: "Дрейф усиливается при движении"

      false_marker_parasite:
        description: "Генерация ложных маркеров и целей"
        effects: "Фейковые вражеские маркеры, ложные сигналы угрозы"
        duration: "30 секунд"
        probability: "20% от всех заражений"
        severity_scaling: "Количество фейков растет со временем"

      system_glitch_parasite:
        description: "Случайные глюки интерфейса и HUD"
        effects: "Мерцание экрана, искажение текста, случайные эффекты"
        duration: "90 секунд"
        probability: "10% от всех заражений"
        severity_scaling: "Глюки становятся более частыми и интенсивными"

  camouflage_tiers:
    basic_camouflage:
      description: "Базовый уровень маскировки для осторожного использования"
      duration: "30 секунд"
      infection_risk: "10% шанс заражения"
      stealth_bonus: "-70% обнаружения"
      device_requirement: "1 устройство в радиусе 20 метров"
      cooldown: "180 секунд"

    standard_camouflage:
      description: "Стандартный уровень для большинства ситуаций"
      duration: "60 секунд"
      infection_risk: "25% шанс заражения"
      stealth_bonus: "-85% обнаружения"
      device_requirement: "3 устройства в радиусе 30 метров"
      cooldown: "240 секунд"

    deep_camouflage:
      description: "Глубокая интеграция для максимальной скрытности"
      duration: "90 секунд"
      infection_risk: "45% шанс заражения"
      stealth_bonus: "-95% обнаружения"
      device_requirement: "5+ устройств в радиусе 40 метров"
      cooldown: "360 секунд"

  breach_conditions:
    attack_initiation:
      immediate_breach: "Любая атака (стрельба, ближний бой) раскрывает маскировку"
      projectile_warning: "1 секунда предупреждения перед выстрелом"
      melee_immunity: "Ближний бой не раскрывает до удара"

    detection_events:
      scanner_detection: "Обнаружение активными сканерами NetWatch"
      network_intrusion: "Попытка взлома во время маскировки"
      environmental_hazards: "Взаимодействие с сетевыми ловушками"
      ally_compromise: "Раскрытие союзниками в группе"

    forced_deactivation:
      health_threshold: "Автоматическое отключение при HP < 25%"
      infection_critical: "Отключение при критическом заражении"
      area_transition: "Переход между районами сбрасывает маскировку"

  counterplay_mechanics:
    network_filters:
      filter_devices: "Специальные устройства для обнаружения спуфинга"
      detection_radius: "15 метров радиус обнаружения"
      alert_system: "Предупреждение о подозрительной сетевой активности"
      filter_duration: "Фильтры активны 10 минут после установки"

    anti_spoof_technology:
      signature_analysis: "Анализ паттернов сетевого трафика"
      anomaly_detection: "Обнаружение неестественных сетевых сигналов"
      verification_protocols: "Проверка аутентичности устройств"
      countermeasure_deployment: "Автоматическая активация контрмер"

    environmental_factors:
      device_density: "Высокая плотность устройств повышает эффективность"
      network_congestion: "Перегруженные сети маскируют лучше"
      security_zones: "Высокий уровень безопасности снижает эффективность"
      maintenance_periods: "Техобслуживание сетей создает уязвимости"

  balance_formulas:
    infection_probability_calculation:
      base_probability: "P_Infection = Base_Risk + (Duration / 30) × 0.05 + Device_Density_Bonus"
      device_density_bonus: "Device_Bonus = MIN(Device_Count × 0.02, 0.2)"
      critical_risk: "P_Critical = MIN(P_Infection × Infection_Multiplier, 0.8)"
      adjusted_probability: "P_Adjusted = P_Critical × Biotech_Risk_Modifier"

    stealth_effectiveness_calculation:
      detection_reduction: "Detection_Reduction = Base_Reduction × (1 + Device_Bonus)"
      sound_dampening: "Sound_Radius = Base_Radius × (1 - Dampening_Factor)"
      marker_invisibility: "Marker_Alpha = Base_Alpha × (1 - Invisibility_Factor)"
      effective_stealth: "Effective_Stealth = MIN(Detection_Reduction, 0.95)"

    infection_severity_calculation:
      duration_scaling: "Severity = Base_Severity × (1 + Duration / 60)"
      stacked_effects: "Total_Severity = SUM(Individual_Severity × Stacks)"
      maximum_severity: "MAX(Total_Severity, Max_Allowed_Severity)"
      recovery_time: "Recovery_Time = Severity × Recovery_Multiplier"

  risk_reward_scenarios:
    safe_stealth_approach:
      scenario_description: "Использование базового камуфляжа в низкорисковых зонах"
      success_rate: "85% успешных скрытий"
      infection_rate: "5% заражений"
      average_duration: "25 секунд эффективной маскировки"
      reward_efficiency: "Высокая эффективность при минимальном риске"

    balanced_stealth_approach:
      scenario_description: "Стандартный камуфляж в среднерисковых ситуациях"
      success_rate: "75% успешных скрытий"
      infection_rate: "20% заражений"
      average_duration: "50 секунд эффективной маскировки"
      reward_efficiency: "Оптимальный баланс риска и награды"

    aggressive_stealth_approach:
      scenario_description: "Глубокий камуфляж в высокорисковых операциях"
      success_rate: "60% успешных скрытий"
      infection_rate: "40% заражений"
      average_duration: "80 секунд эффективной маскировки"
      reward_efficiency: "Максимальная награда при высоком риске"

  telemetry_requirements:
    core_usage_metrics:
      - camouflage_adoption: "Процент игроков, активно использующих систему"
      - tier_distribution: "Распределение использования по уровням камуфляжа"
      - duration_patterns: "Средняя длительность сессий маскировки"
      - breach_causes: "Распределение причин раскрытия маскировки"

    infection_impact_metrics:
      - infection_rates: "Общий процент заражений по уровням"
      - parasite_distribution: "Распределение типов паразитов"
      - severity_impact: "Влияние тяжести инфекции на производительность"
      - recovery_patterns: "Время и эффективность восстановления"

    balance_effectiveness_metrics:
      - stealth_success_correlation: "Связь между использованием и успехом стелс"
      - ttk_impact: "Изменения Time To Kill при использовании камуфляжа"
      - player_satisfaction: "Корреляция между риском и удовлетворенностью"
      - skill_ceiling_influence: "Влияние на продвинутые стелс стратегии"

    counterplay_balance_metrics:
      - detection_effectiveness: "Эффективность контрмер NetWatch"
      - environmental_influence: "Влияние окружения на баланс"
      - adaptation_patterns: "Как игроки адаптируются к системе"
      - meta_evolution: "Изменения стратегий со временем"

  implementation_considerations:
    technical_requirements:
      network_simulation: "Реалистичная симуляция сетевого трафика"
      real_time_tracking: "Отслеживание устройств в реальном времени"
      infection_state_management: "Комплексное управление состояниями инфекции"
      performance_optimization: "Минимальный impact на stealth performance"

    integration_points:
      stealth_system: "Взаимодействие с основной системой скрытности"
      network_system: "Интеграция с городской сетевой инфраструктурой"
      combat_system: "Влияние инфекции на боевую систему"
      ui_system: "Индикация состояния камуфляжа и инфекции"

    testing_priorities:
      balance_testing: "Тестирование баланса риск/награда"
      technical_testing: "Проверка сетевой симуляции"
      gameplay_testing: "Playtesting стелс сценариев"
      edge_case_testing: "Тестирование граничных ситуаций"

  iteration_guidelines:
    initial_target: "20-30% игроков должны использовать систему регулярно"
    success_metrics: "Увеличение разнообразия стелс стратегий на 40%"
    adjustment_triggers: "Корректировка при adoption rate <15% или >45%"
    major_rebalance: "Переработка при доказанных проблемах с toxicity"

readiness_criteria:
  balance_maturity:
    - "Определены все формулы и параметры системы"
    - "Реализованы 3 уровня камуфляжа с балансом"
    - "Добавлены все типы паразитов с эффектами"
    - "Спроектированы механизмы контрплея"
  gameplay_balance:
    - "Проверена интеграция со стелс системой"
    - "Оценено влияние на skill ceiling"
    - "Подтверждена глубина тактических решений"
  technical_feasibility:
    - "Определены точки интеграции с сетью"
    - "Оценена производительность"
    - "Спроектирована система симуляции"

implementation_roadmap:
  phase_1_core_mechanics:
    - "Базовая система камуфляжа и маскировки"
    - "Простая система инфекции с базовыми паразитами"
    - "Тестирование core stealth loop"
  phase_2_balance_refinement:
    - "Настройка уровней камуфляжа и рисков"
    - "Добавление комплексных паразитов"
    - "Balance testing с игроками"
  phase_3_advanced_features:
    - "Полная интеграция с городской сетью"
    - "Оптимизация производительности"
    - "Финальный polish и телеметрия"
