metadata:
  id: quest-london-2078-simulation-greenwich
  title: Гринвич и Симуляция
  document_type: canon
  category: timeline-author
  status: draft
  version: '1.1.0'
  last_updated: 2025-11-23T12:00:00Z
  concept_approved: false
  concept_reviewed_at: ''
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - london
    - simulation
    - mystery
  topics:
    - world_reveal
    - time_manipulation
  related_systems:
    - narrative-service
    - world-state-service
    - ability-system
  related_documents:
    - id: github-issue-647
      title: GitHub Issue #647
      link: https://github.com/gc-lover/necpgame-monorepo/issues/647
      relation: migrated_to
      migrated_at: 2025-11-22T23:50:00Z
  source: shared/docs/knowledge/canon/lore/timeline-author/quests/europe/london/2078-2093/quest-047-simulation-greenwich.md
  visibility: internal
  audience:
    - concept
    - narrative
    - systems
  risk_level: high
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: Необходимо раскрыть сюжет о сбое в системе симуляции через символическое место — Гринвич.
  goal: Провести расследование временной аномалии, встретиться с ИИ-хранителем и принять ключевое решение.
  essence: Игрок исследует обсерваторию, выясняет, что время — параметр симуляции, и выбирает, что делать с этим знанием.
  key_points:
    - Расследование временных аномалий в обсерватории.
    - Встреча с «Хранителем времени» — автономным ИИ.
    - Выбор влияет на глобальное состояние симуляции.
quest_definition:
  quest_type: main
  level_min: 40
  level_max: null
  requirements:
    required_quests: []
    required_flags: []
    required_reputation: {}
    required_items: []
  objectives:
    - id: investigate_observatory
      text: "Исследовать залы обсерватории и зафиксировать временные аномалии"
      type: investigate
      target: greenwich_observatory
      count: 5
      optional: false
    - id: find_time_keeper
      text: "Обнаружить ИИ-хранителя времени в центре симуляции"
      type: interact
      target: time_keeper_ai
      count: 1
      optional: false
    - id: make_choice
      text: "Принять решение о судьбе временной аномалии"
      type: choice
      target: time_anomaly
      count: 1
      optional: false
  rewards:
    experience: 10000
    money: 0
    items: []
    reputation: {}
    unlocks: []
  branches:
    - branch_id: fix_anomaly
      branch_name: "Исправить сбой"
      conditions:
        flags: ["time_choice_fix"]
      consequences:
        reputation_changes:
          London_Stability: 20
        unlocks_quests: []
        world_state:
          - key: "time_stability_restored"
            value: true
            scope: server
    - branch_id: use_anomaly
      branch_name: "Использовать аномалию"
      conditions:
        flags: ["time_choice_use"]
      consequences:
        reputation_changes: {}
        unlocks_quests: []
        world_state:
          - key: "player_time_manipulation_ability"
            value: true
            scope: player
    - branch_id: reveal_truth
      branch_name: "Раскрыть правду о симуляции"
      conditions:
        flags: ["time_choice_reveal"]
      consequences:
        reputation_changes:
          Simulation_Skeptics: 50
          Factions: -20
        unlocks_quests: []
        world_state:
          - key: "simulation_revelation_level"
            value_change: 1
            scope: server
content:
  sections:
    - id: setup
      title: 'Контекст'
      body: |
        В Гринвичской обсерватории начинаются сбои: часы показывают разное время, посетители жалуются на «пропуски» секунд. Игрока отправляют проверить источник.
      mechanics_links: []
      assets: []
    - id: anomalies
      title: 'Аномалии'
      body: |
        Игрок исследует залы обсерватории, фиксирует расхождения между GMT и локальным временем, сталкивается с глюками симуляции.
      mechanics_links:
        - mechanics/investigation/temporal-analysis.yaml
      assets: []
    - id: keeper
      title: 'Хранитель времени'
      body: |
        В центре симуляции обнаруживается ИИ, управляющий временными параметрами. Он предлагает помощь или торговлю информацией.
      mechanics_links: []
      assets: []
    - id: choices
      title: 'Выборы'
      body: |
        - Исправить сбой и восстановить стабильность времени.
        - Использовать аномалию, чтобы получить способность манипулировать временем.
        - Раскрыть игрокам правду о симуляции, вызвав глобальный резонанс.
      mechanics_links:
        - mechanics/narrative/branching-outcomes.yaml
      assets: []
    - id: rewards
      title: 'Награды'
      body: |
        - 10 000 XP.
        - Возможность получить уникальную способность (при выборе «Использовать»).
        - Мировые последствия: степень раскрытия симуляции и отношение фракций.
      mechanics_links:
        - mechanics/progression/ability-unlock.yaml
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  github_issue: 647
  needs_task: false
  queue_reference: []
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-13
    author: Concept Director
    changes: Квест «Гринвич и Симуляция» перенесён из Markdown в YAML по шаблону знаний.
  - version: '1.1.0'
    date: 2025-11-23
    author: content_writer
    changes: Добавлена структура квеста с objectives, rewards и branches согласно архитектуре системы квестов.
validation:
  checksum: ''
  schema_version: '1.0'
