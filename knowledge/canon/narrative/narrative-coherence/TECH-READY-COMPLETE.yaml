metadata:
  id: canon-narrative-coherence-tech-ready
  title: 'Narrative Coherence — техническая готовность'
  document_type: canon
  category: narrative
  status: approved
  version: '1.0.0'
  last_updated: 2025-11-12T00:00:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-07T00:33:00Z
  owners:
    - role: narrative_tech_lead
      contact: tech@narrative.necp.game
  tags:
    - tech-readiness
    - backend
  topics:
    - backend
    - narrative
  related_systems:
    - backend-service
    - narrative-service
  related_documents:
    - id: canon-narrative-coherence-summary-user
      relation: complements
    - id: canon-narrative-coherence-guides-complete
      relation: references
  source: shared/docs/knowledge/canon/narrative/narrative-coherence/TECH-READY-COMPLETE.md
  visibility: internal
  audience:
    - backend
    - narrative
  risk_level: low
review:
  chain:
    - role: technical_director
      reviewer: Backend Integration Lead
      reviewed_at: 2025-11-07T00:33:00Z
      status: approved
  next_actions: []
summary:
  problem: Нужно зафиксировать готовность технических компонентов Narrative Coherence к production.
  goal: Описать миграции, скрипты экспорта, интеграцию backend и шаги к развёртыванию.
  essence: Документ подтверждает завершение миграций, экспортных скриптов и интеграционных гайдов, предоставляя timeline внедрения.
  key_points:
    - Подготовлены пять SQL миграций с auto-apply скриптами и sample data.
    - Созданы Python и Node.js конвертеры YAML→JSON для графа квестов.
    - Backend integration guide охватывает entities, сервисы, контроллеры и WebSocket.
content:
  sections:
    - id: migrations
      title: SQL миграции
      body: |
        Представлены пять миграций, два скрипта автоматического применения и README с инструкциями. Миграции расширяют квестовые таблицы, добавляют ветки, диалоговую систему, таблицы игрока и world state, а также создают индексы и helper-функции.
      mechanics_links: []
      assets: []
    - id: export
      title: Скрипты экспорта
      body: |
        Два конвертера (Python и Node.js) переводят YAML-файлы матрицы в JSON для backend. Скрипты поддерживают side-quests, триггеры, блокираторы и полный граф зависимостей.
      mechanics_links: []
      assets: []
    - id: backend
      title: Интеграция backend
      body: |
        Руководство `backend-integration-complete.md` покрывает JPA entities, репозитории, сервисы, контроллеры, WebSocket события, кэширование и тесты, а также перечисляет API endpoints.
      mechanics_links: []
      assets: []
    - id: readiness
      title: Готовность и таймлайн
      body: |
        Составлен план на шесть недель: применение миграций, экспорт данных, интеграция кода, тестирование и деплой. Оценка готовности компонентов — 97.2%.
      mechanics_links: []
      assets: []
appendix:
  glossary: []
  references:
    - title: SQL migrations README
      link: ./phase4-database/migrations/README.md
    - title: Export converters README
      link: ./phase3-event-matrix/export/README.md
    - title: Backend Integration Guide
      link: ./phase6-documentation/dev-guides/backend-integration-part1-entities.md
  decisions: []
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-12
    author: narrative_team
    changes: Сводка технической готовности перенесена в YAML.
validation:
  checksum: ''
  schema_version: '1.0'
