# Issue: #109
metadata:
  id: narrative-coherence-visualization-quest-dependency
  title: 'Пример графа зависимостей квестов'
  document_type: canon
  category: narrative-coherence
  status: draft
  version: '1.0.0'
  last_updated: 2025-11-06T23:58:00Z
  concept_approved: false
  concept_reviewed_at: ''
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - visualization
    - quest-graph
    - dependency
  topics:
    - narrative-branching
    - quest-management
  related_systems:
    - narrative-service
  related_documents:
    - id: narrative-coherence-quest-triggers
      relation: references
    - id: narrative-coherence-quest-blockers
      relation: references
    - id: narrative-coherence-visualization-critical-paths
      relation: references
  source: shared/docs/knowledge/canon/narrative/narrative-coherence/phase6-documentation/visualization/quest-dependency-example.mermaid.md
  visibility: internal
  audience:
    - concept
    - narrative
    - qa
  risk_level: low
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: Необходимы примеры визуализации ветвлений и блокировок, чтобы синхронизировать работу авторов и интеграторов.
  goal: Показать цепочку выбора NetWatch vs Voodoo и сценарии взаимного исключения квестов.
  essence: Mermaid-диаграммы иллюстрируют, как выборы открывают или блокируют контент и ведут к различным финалам.
  key_points:
    - Демонстрируется влияние выбора NetWatch/Voodoo на квесты и финал Трансцендентности.
    - Показан паттерн mutual exclusion для параллельных квестов 2078 года.
    - Расшифрована легенда цветов для блокировок и финалов.
content:
  sections:
    - id: overview
      title: 'Описание'
      body: |
        Примерные графы помогают авторам быстро оценить влияние нарративных выборов и блокировок в системе квестов. Материал служит шаблоном для построения аналогичных диаграмм.
      mechanics_links: []
      assets: []
    - id: netwatch-voodoo
      title: 'Цепочка NetWatch vs Voodoo Boys'
      body: |
        ```mermaid
        graph TD
            MQ2020-001[MQ-2020-001: Первые шаги] --> MQ2020-002[MQ-2020-002: Узел Триака]

            MQ2020-002 --> Choice{MQ-2020-005: Чистый канал}

            Choice -->|NetWatch| SQ2020-003[SQ-2020-003: Защита канала]
            Choice -->|Voodoo| BlockNW[[ERROR] NetWatch квесты заблокированы]

            SQ2020-003 --> SQ2030-002[SQ-2030-002: Аудит купола]
            SQ2030-002 --> SQ2045-001[SQ-2045-001: Охота на фантомов]
            SQ2045-001 --> MQ2045-005[MQ-2045-005: Часовые Blackwall]

            Choice -->|Voodoo| SQ2045-003[SQ-2045-003: Choir conversion]
            SQ2045-003 --> SQ2078-004[SQ-2078-004: Blackwall expedition]
            SQ2078-004 --> Transcendence[[DINGBAT] Финал: Трансцендентность]

            SQ2045-001 --> Block2[[ERROR] Blackwall expedition заблокирована]

            style Choice fill:#95e1d3
            style Transcendence fill:#4ecdc4
            style BlockNW fill:#ff6b6b
            style Block2 fill:#ff6b6b
        ```
      mechanics_links: []
      assets: []
    - id: legend
      title: 'Легенда'
      body: |
        - Зелёный узел — критический выбор.
        - Синий узел — активный квест.
        - Красный узел — заблокированный контент.
        - Бирюзовый узел — финальный исход.
      mechanics_links: []
      assets: []
    - id: mutual-exclusion
      title: 'Паттерн взаимного исключения'
      body: |
        ```mermaid
        graph LR
            MQ2078-001[MQ-2078-001: Параметрические ярмарки]

            MQ2078-001 --> Choice{Выбор стратегии}

            Choice -->|Легальный| SQ2078-001[SQ-2078-001: Войны лицензий]
            Choice -->|Теневой| SQ2078-002[SQ-2078-002: Манипуляция]

            SQ2078-001 --> Block2[[ERROR] SQ-2078-002 заблокирован]
            SQ2078-002 --> Block1[[ERROR] SQ-2078-001 заблокирован]

            SQ2078-001 --> SQ2078-003A[SQ-2078-003: Craft Fair легально]
            SQ2078-002 --> SQ2078-003B[SQ-2078-003: Craft Fair теневой]

            style Block1 fill:#ff6b6b
            style Block2 fill:#ff6b6b
            style Choice fill:#95e1d3
        ```
      mechanics_links: []
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  github_issue: 109
  needs_task: false
  queue_reference: []
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-06
    author: concept_director
    changes: Добавлены примерные графы зависимостей квестов.
validation:
  checksum: ''
  schema_version: '1.0'

