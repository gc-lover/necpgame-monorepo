# Dynamic Quest Example: Night City Infiltration
# Demonstrates player choice-driven narrative system

metadata:
  quest_id: "dynamic-night-city-infiltration-001"
  title: "Night City Infiltration: Shadows of Betrayal"
  author: "NECPGAME Idea Writer Agent"
  version: "1.0.0"
  genre: "Cyberpunk Espionage"
  difficulty: "High"
  estimated_duration: "45-90 minutes"
  player_level_range: "15-25"

quest_overview:
  summary: |
    Infiltrate Arasaka's Night City headquarters to extract critical data about
    their new cyberware prototype. But as you dig deeper, you uncover a web
    of corporate espionage, personal betrayals, and moral dilemmas that will
    fundamentally alter your path through Night City.

  objectives:
    primary: "Extract Arasaka cyberware prototype data"
    secondary:
      - "Avoid detection by security systems"
      - "Gather intelligence on corporate operations"
      - "Make alliances or enemies in the corporate underworld"

  themes:
    - "Corporate greed vs street survival"
    - "Personal loyalty vs professional advancement"
    - "Technology enhancement vs human cost"
    - "Betrayal and its consequences"

narrative_setup:
  location: "Night City Corporate District - Arasaka Tower"
  time_period: "2077 - Midday"
  weather: "Heavy acid rain, neon lights reflecting off wet streets"

  initial_situation: |
    Your fixer, Rogue Amendiares, contacts you with a high-paying job:
    infiltrate Arasaka Tower and extract data on their latest cyberware prototype.
    The pay is 50,000 eddies, but you sense there's more to this than meets the eye.

    As you approach the gleaming Arasaka Tower, rain-slicked and imposing,
    you notice increased security patrols. Something's off about this job.

key_characters:
  rogue_amendiares:
    role: "Fixer - Quest Giver"
    description: "Veteran street operative, known for high-risk jobs"
    loyalty_level: "Variable based on player choices"
    potential_outcomes: ["Ally", "Betrayer", "Victim", "Antagonist"]

  adam_smasher:
    role: "Arasaka Security Chief"
    description: "Ruthless cyberpsycho enforcer"
    relationship: "Hostile by default"
    potential_outcomes: ["Defeated", "Allied", "Neutral", "Superior"]

  yorinobu_arasaka:
    role: "Arasaka Heir"
    description: "Ambitious corporate prince with revolutionary ideas"
    relationship: "Unknown"
    potential_outcomes: ["Ally", "Target", "Savior", "Enemy"]

choice_points:

  1_initial_approach:
    situation: |
      You reach the Arasaka Tower service entrance. Two guards are smoking
      outside, and you overhear them talking about "the new prototype."
      One mentions it's "not ready for prime time" and could "kill the user."

    dialogue_options:
      aggressive:
        text: "\"Keep talking, choom. What's this prototype?\""
        reputation_impact:
          street: +15
          corporate: -10
        guard_reaction: "Suspicious, calls for backup"
        unlocks: "Combat infiltration path"

      diplomatic:
        text: "\"Rough weather we're having. Mind if I bum a smoke?\""
        reputation_impact:
          street: +5
          corporate: +5
        guard_reaction: "Friendly, shares gossip"
        unlocks: "Social infiltration path"

      stealthy:
        text: "[Remain silent, observe and wait]"
        reputation_impact:
          street: +10
          corporate: 0
        guard_reaction: "Unaware of your presence"
        unlocks: "Stealth infiltration path"

  2_security_encounter:
    situation: |
      Inside the service corridor, you encounter a security checkpoint.
      The guard is checking IDs, but seems distracted by a personal holo-call
      about his wife's medical bills and corporate healthcare denial.

    action_choices:
      hack_terminal:
        description: "Hack the security terminal to create false credentials"
        requirements: "Tech skill > 15"
        success_chance: "70%"
        consequences:
          success: "Clean access, +Tech reputation"
          failure: "Alarm triggered, combat encounter"
        reputation_impact: "Tech +20, Corporate -5"

      social_engineer:
        description: "Use guard's personal situation to gain sympathy access"
        requirements: "Charisma > 12"
        success_chance: "60%"
        consequences:
          success: "Guard becomes informant, provides intel"
          failure: "Guard becomes suspicious, extra scrutiny"
        reputation_impact: "Street +15, Humanity +10"

      combat_breach:
        description: "Take out the guard silently and proceed"
        requirements: "Combat skill > 18"
        success_chance: "50%"
        consequences:
          success: "Quick access, guard body discovered later"
          failure: "Noise alerts security, multiple enemies"
        reputation_impact: "Street +25, Corporate -20"

  3_data_discovery:
    situation: |
      In the R&D server room, you access the prototype data. The files reveal
      that the cyberware is dangerously unstable, causing cyberpsychosis in
      80% of test subjects. You also find evidence that Rogue knowingly sent
      you into this death trap - she works for Militech now.

    moral_dilemma:
      expose_conspiracy:
        description: "Reveal the data publicly, exposing both Arasaka and Rogue's betrayal"
        consequences:
          - "Arasaka blacklist, corporate bounty on your head"
          - "Rogue becomes personal antagonist"
          - "Street legend status, +50 street reputation"
          - "Access to anti-corporate quests and allies"
        unlocks: "Underground resistance storyline"

      sell_to_highest_bidder:
        description: "Auction the data to the highest corporate bidder"
        consequences:
          - "Massive payday: 200,000+ eddies"
          - "Corporate advancement opportunities"
          - "Rogue impressed, becomes mentor figure"
          - "Loss of street credibility, -30 street reputation"
        unlocks: "Corporate executive storyline"

      destroy_and_escape:
        description: "Destroy the prototype data and escape"
        consequences:
          - "Prevents dangerous tech release, +Humanity"
          - "Arasaka and Rogue become enemies"
          - "Moral high ground, unlocks philosophical questline"
          - "Limited financial reward, but reputation boost"
        unlocks: "Freedom fighter storyline"

  4_escape_scenario:
    situation: |
      Alarms blare as security converges. You have the data (or evidence of its
      destruction) and need to escape. Multiple paths available based on
      previous choices and current reputation.

    dynamic_escape_options:
      rooftop_extraction:
        available_if: "Stealth path chosen OR Tech rep > 50"
        description: "Hack elevator to rooftop, call in extraction"
        risk_level: "Medium"
        escape_chance: "75%"

      sewer_infiltration:
        available_if: "Street rep > 30 OR Combat path chosen"
        description: "Fight through maintenance tunnels to freedom"
        risk_level: "High"
        escape_chance: "60%"

      corporate_bargain:
        available_if: "Corporate rep > 20 OR Diplomatic path chosen"
        description: "Negotiate exit with sympathetic executive"
        risk_level: "Low"
        escape_chance: "85%"

      betrayal_double_cross:
        available_if: "Rogue still ally AND High charisma"
        description: "Call Rogue for emergency extraction (but she might betray you)"
        risk_level: "Variable"
        escape_chance: "50% (depends on relationship)"

quest_outcomes:

  underground_resistance_ending:
    title: "Freedom Fighter"
    description: "You become a key figure in Night City's underground resistance"
    rewards:
      - currency: 25000
      - reputation: "+75 Street, -50 Corporate"
      - unlocks: "Resistance faction quests"
      - cyberware: "Neural implant for detecting corporate surveillance"
    consequences:
      - "Arasaka bounty: 100,000 eddies"
      - "Access to black market at discounted prices"
      - "Rogue appears as antagonist in future quests"

  corporate_executive_ending:
    title: "Corporate Climber"
    description: "Your data sale propels you into corporate circles"
    rewards:
      - currency: 150000
      - reputation: "+60 Corporate, -40 Street"
      - unlocks: "Executive-level corporate quests"
      - cyberware: "Premium Arasaka cyberware suite"
    consequences:
      - "Street vendors refuse service"
      - "Police protection in corporate districts"
      - "Rogue becomes business partner"

  moral_high_ground_ending:
    title: "Guardian of Humanity"
    description: "You prevented a cyberpsychosis epidemic"
    rewards:
      - currency: 50000
      - reputation: "+40 Humanity, +30 Street"
      - unlocks: "Humanitarian and medical quests"
      - cyberware: "EMP device for disabling cyberpsychos"
    consequences:
      - "Medical facilities provide free service"
      - "Cyberpsycho gangs mark you as priority target"
      - "Philosophical questline about human augmentation"

cross_quest_continuity:
  rogue_relationship:
    affects_future_quests:
      - "Fixer reputation impacts all future jobs"
      - "Rogue may appear as ally, enemy, or quest giver"
      - "Betrayal affects fixer network access"

  corporate_standing:
    affects_future_quests:
      - "Corporate quests become available/unavailable"
      - "Security levels in corporate areas change"
      - "Corporate contacts provide different information"

  technology_impact:
    affects_world_state:
      - "Prototype destruction prevents cyberpsychosis outbreak"
      - "Data sale leads to corporate arms race"
      - "Public exposure causes corporate scandal"

performance_metrics:
  choice_processing_time: "<100ms"
  state_persistence_time: "<50ms"
  dialogue_generation_time: "<25ms"
  memory_per_active_quest: "<2MB"

testing_requirements:
  choice_branches_tested: "100%"
  reputation_calculations_verified: "100%"
  dialogue_coherence_checked: "100%"
  performance_benchmarks_met: "100%"

# Issue: #2244
# This demonstrates the dynamic quest system with branching narratives,
# moral choices, and long-term consequences typical of Cyberpunk 2077
