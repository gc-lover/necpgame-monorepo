metadata:
  id: canon-narrative-quests-st-petersburg-channel-races
  title: 'Квест: Гонки по каналам (Санкт-Петербург 2040-2060)'

quest_definition:
  quest_type: side_story
  level_min: 40
  level_max: 55

  requirements:
    faction: neutral
    completed_quests: []
    skills:
      - id: driving
        name: "Вождение"
        level: 2
      - id: navigation
        name: "Навигация"
        level: 2

  objectives:
    - id: build_racing_hydrocycle
      type: activity
      description: "Собрать и модифицировать гоночный гидроцикл для каналов"
      target: 1

    - id: master_channel_navigation
      type: exploration
      description: "Изучить все основные каналы города и их особенности"
      target: 1

    - id: win_elimination_races
      type: dialogue
      description: "Выиграть серию отборочных гонок против местных водителей"
      target: 1

    - id: collect_race_upgrades
      type: collection
      description: "Собрать редкие улучшения и модификации для гоночного транспорта"
      target: 1

    - id: win_grand_channel_championship
      type: stealth
      description: "Стать чемпионом Большого канального чемпионата"
      target: 1

  rewards:
    - type: experience
      amount: 6500
      description: "Опыт за мастерство в водных гонках"
    - type: currency
      amount: 3200
      currency: "credits"
      description: "Кредиты за победу в чемпионате"
    - type: item
      item_id: "champion_hydrocycle"
      name: "Чемпионский гидроцикл"
      description: "Легендарный гоночный гидроцикл с полным тюнингом"
      rarity: "legendary"
    - type: reputation
      faction: "water_racers_guild"
      amount: 180
      description: "Репутация в гильдии водных гонщиков"
    - type: skill_boost
      skill: "driving"
      amount: 3
      description: "Значительное увеличение навыка вождения"

  lore_context:
    description: "С превращением Санкт-Петербурга в настоящую 'Венецию Севера' водный транспорт стал доминирующим способом передвижения. Гонки по каналам стали самым популярным и опасным видом спорта. Участники состязаются на модифицированных гидроциклах, преодолевая узкие каналы, шлюзы и бурные воды Невы. Чемпионат собирает лучших гонщиков со всего постапокалиптического мира."
    historical_connections:
      - "Традиция водных видов спорта в Санкт-Петербурге"
      - "Каналы города как естественные гоночные трассы"
      - "Исторические гонки на Неве и каналах"
      - "Адаптация спорта к новой водной реальности"
    thematic_elements:
      - "Адреналин водных гонок"
      - "Техническое мастерство и модификации"
      - "Соперничество в экстремальных условиях"

  gameplay_mechanics:
    puzzle_elements:
      - "Оптимизация траектории движения по каналам"
      - "Балансировка модификаций гидроцикла"
      - "Стратегия выбора маршрутов и тактик"
    social_interactions:
      - "Переговоры с механиками и инженерами"
      - "Соперничество с другими гонщиками"
      - "Управление командой поддержки"
    combat_encounters:
      - "Саботаж со стороны конкурентов"
      - "Борьба с пиратами во время гонок"
      - "Защита от диверсий на трассе"

  narrative_branches:
    - condition: "player_becomes_legitimate_champion"
      outcome: "Честная победа с признанием сообщества"
      reward_modifier: 1.4
    - condition: "player_uses_underhanded_tactics"
      outcome: "Победа любой ценой, но с потерей репутации"
      reward_modifier: 1.2
    - condition: "player_focuses_on_team_building"
      outcome: "Создание сильной команды и гоночной империи"
      reward_modifier: 1.5
    - condition: "player_fails_championship"
      outcome: "Участие в гонках без чемпионского титула"
      reward_modifier: 0.8

  time_limit:
    days: 18
    description: "Время ограничено сезоном соревнований"

  failure_conditions:
    - "Полное разрушение гоночного гидроцикла"
    - "Дисквалификация из чемпионата"
    - "Потеря всех модификаций и улучшений"
