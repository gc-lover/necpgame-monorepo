metadata:
  id: raid-dungeon-affixes-idea
  title: "Система аффиксов для рейдов и подземелий"
  document_type: idea
  category: gameplay
  status: final
  version: "1.0.0"
  last_updated: 2025-12-28T12:00:00Z
  owners:
    - role: architect
      contact: architect@necp.game
  tags:
    - gameplay
    - difficulty
    - hardcore
    - affixes
    - raids
    - dungeons
    - dynamic-content
  related_systems:
    - gameplay-service
    - world-service
    - combat-service
    - analytics-service
  related_documents:
    - id: raid-dungeon-affixes-system-architecture
      relation: implemented_by
  github_issue: 1495
  visibility: internal
  audience:
    - architect
    - game-designer
    - backend
    - qa

summary:
  problem: |
    Текущая система сложности рейдов и подземелий ограничена базовыми слоями.
    Не хватает динамических модификаторов, которые бы меняли механики боя и повышали реиграбельность.
  goal: |
    Создать систему аффиксов, которая добавляет динамическую сложность через модификаторы механик,
    повышает реиграбельность и интегрируется с существующими системами.
  essence: |
    Система аффиксов добавляет 2-4 случайных модификатора к каждому инстансу рейда или подземелья.
    Аффиксы меняют механики боя, требуют адаптации тактики и влияют на награды.
    Ротация аффиксов происходит еженедельно.

game_design:
  core_mechanics:
    affix_application: |
      Каждый инстанс рейда или подземелья получает 2-4 случайных аффикса из активного пула.
      Аффиксы применяются при создании инстанса и не могут быть изменены в процессе прохождения.

    affix_categories:
      combat_affixes:
        description: "Модификаторы боевых механик"
        examples:
          - name: "Volatile"
            effect: "Враги периодически взрываются, нанося AoE урон"
            strategy_impact: "Требует позиционирования и контроля аггро"
          - name: "Raging"
            effect: "Враги получают бонус к урону при низком HP"
            strategy_impact: "Приоритетное убийство ослабленных врагов"
          - name: "Spiteful"
            effect: "Враги получают бонус к урону при смерти союзников"
            strategy_impact: "Контроль порядка убийства врагов"

      environmental_affixes:
        description: "Модификаторы окружающей среды"
        examples:
          - name: "Storming"
            effect: "Периодические молнии бьют по случайным местам"
            strategy_impact: "Динамическое позиционирование"
          - name: "Entangling"
            effect: "Лоза периодически связывает игроков"
            strategy_impact: "Координация движения группы"

      debuff_affixes:
        description: "Модификаторы дебаффов и состояний"
        examples:
          - name: "Afflicted"
            effect: "Игроки получают случайные дебаффы со временем"
            strategy_impact: "Управление дебаффами и хил"
          - name: "Incorporeal"
            effect: "Враги периодически становятся неуязвимыми"
            strategy_impact: "Временные окна для атаки"

      defensive_affixes:
        description: "Модификаторы защиты и выживания"
        examples:
          - name: "Fortified"
            effect: "Враги получают бонус к защите в определенные периоды"
            strategy_impact: "Атаки только в уязвимые периоды"
          - name: "Sanguine"
            effect: "Враги лечатся от урона по игрокам"
            strategy_impact: "Контроль исцеления через урон"

    affix_combination_rules:
      compatibility: |
        Некоторые аффиксы несовместимы (например, Raging и Fortified).
        Система проверяет совместимость перед применением.
      scaling: |
        Эффекты аффиксов масштабируются в зависимости от количества игроков и уровня сложности.
      balance: |
        Комбинации аффиксов тестируются на баланс для обеспечения fair-play.

  difficulty_scaling:
    reward_modifiers: |
      Аффиксы влияют на награды: +25% до +100% в зависимости от сложности комбинации.
      Игроки получают бонусы за прохождение с аффиксами.

    player_scaling: |
      Эффекты аффиксов масштабируются по уровню игроков.
      Группы высокого уровня получают более сложные версии аффиксов.

  progression_system:
    weekly_rotation: |
      Еженедельно (каждый понедельник) происходит ротация активных аффиксов.
      Из общего пула выбирается 8-10 аффиксов для текущей недели.

    seasonal_affixes: |
      Специальные аффиксы доступны только в определенные сезоны.
      Сезонные аффиксы имеют уникальные механики и награды.

  social_aspects:
    leaderboard_integration: |
      Лидерборды по прохождению с аффиксами.
      Достижения за уникальные комбинации аффиксов.

    guild_coordination: |
      Аффиксы требуют лучшей координации в гильдиях.
      Специальные роли для обработки аффиксов.

technical_considerations:
  performance_requirements: |
    Аффиксы не должны снижать производительность ниже 60 FPS.
    Эффекты аффиксов оптимизированы для сетевой игры.

  network_synchronization: |
    Эффекты аффиксов синхронизированы между всеми игроками.
    Предиктивная логика для компенсации сетевых задержек.

  save_system_integration: |
    Аффиксы сохраняются в инстансах для продолжения игры.
    Восстановление состояния при реконнекте.

monetization_opportunities:
  cosmetic_rewards: |
    Специальные косметические предметы за прохождение с аффиксами.
    Эксклюзивные эффекты и анимации.

  premium_features: |
    Премиум игроки могут видеть аффиксы перед входом в инстанс.
    Возможность перегенерации аффиксов за валюту.

  seasonal_content: |
    Тематические аффиксы для специальных событий.
    Коллекционные награды за сезон.

risks_and_mitigations:
  balance_risks: |
    Слишком сложные комбинации могут сделать контент непроходимым.
    Решение: Тестирование всех комбинаций, телеметрия для балансировки.

  player_frustration: |
    Игроки могут разочароваться от неудачных комбинаций аффиксов.
    Решение: Возможность покинуть инстанс до начала боя, четкие описания аффиксов.

  technical_complexity: |
    Реализация аффиксов добавляет техническую сложность.
    Решение: Модульная архитектура, постепенное внедрение.

success_metrics:
  engagement: |
    Увеличение времени в рейдах и подземельях на 30%.
    Рост количества завершенных инстансов.

  satisfaction: |
    Положительные отзывы о динамической сложности.
    Снижение жалоб на повторяемость контента.

  technical: |
    Стабильная производительность при аффиксах.
    Низкий процент багов с аффиксами.
