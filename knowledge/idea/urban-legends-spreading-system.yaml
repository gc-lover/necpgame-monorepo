# Issue: #142072495 - [Idea] Система распространения легенд между NPC
metadata:
  id: urban-legends-spreading-system
  title: Система распространения легенд между NPC
  document_type: idea
  category: mechanics
  status: approved
  version: '1.1.0'
  last_updated: 2025-12-28T22:35:00Z
  concept_approved: true
  concept_reviewed_at: '2025-12-28T22:35:00Z'
  owners:
    - role: content_designer
      contact: content@necp.game
  tags:
    - urban-legends
    - npc-interaction
    - social-networks
    - information-flow
    - dynamic-content
  topics:
    - social-systems
    - procedural-narrative
    - world-simulation
    - player-immersion
  related_systems:
    - social-service
    - narrative-service
    - worldbuilding-service
  related_documents:
    - id: urban-legends-npc-integration
      relation: complements
      path: knowledge/idea/urban-legends-npc-integration.yaml
    - id: urban-legends-template-system
      relation: uses
      path: knowledge/idea/urban-legends-template-system.yaml
    - id: urban-legends-triggers
      relation: extends
      path: knowledge/idea/urban-legends-trigger-system.yaml
  source: ''
  visibility: internal
  audience:
    - concept
    - content
    - gameplay
    - technical
  risk_level: medium

review:
  chain:
    - role: content_designer
      reviewer: 'Content Design Team'
      reviewed_at: 2025-12-28T22:35:00Z
      status: approved
  next_actions: []

summary:
  problem: Городские легенды должны жить своей жизнью - распространяться между NPC, эволюционировать, влиять на поведение жителей и создавать органичную социальную атмосферу Night City.
  solution: Создать многоуровневую систему распространения легенд через социальные сети NPC, цифровые каналы и физическое взаимодействие, с механиками мутаций и забвения.
  impact: Превращает статичные истории в живую экосистему, повышает иммерсивность, создает динамические социальные взаимодействия и replayability.
  benefits:
    - Living world simulation через органичное распространение информации
    - Social gameplay через влияние на NPC поведение и отношения
    - Dynamic storytelling адаптирующийся к действиям игроков
    - Emergent narratives из взаимодействия множества факторов

spreading_mechanics:
  propagation_vectors:
    description: |
      **Векторы распространения легенд:**

      1. **Face-to-face conversations** - личные разговоры между NPC
      2. **Digital networks** - распространение через Net и социальные сети
      3. **Faction channels** - корпоративные и групповые коммуникации
      4. **Public broadcasts** - радио, голографические рекламы
      5. **Player interactions** - игроки как катализаторы распространения

    vector_characteristics:
      - **Speed**: как быстро распространяется легенда
      - **Reach**: сколько NPC может охватить
      - **Distortion**: уровень искажения информации
      - **Persistence**: как долго сохраняется легенда

  social_network_model:
    description: |
      **Модель социальной сети NPC:**

      Night City представлена как сеть из interconnected nodes:

      - **Individuals**: отдельные NPC с уникальными характеристиками
      - **Groups**: социальные группы (банды, корпорации, сообщества)
      - **Locations**: точки концентрации (бары, рынки, клубы)
      - **Digital spaces**: виртуальные сообщества и форумы

    network_properties:
      - **Clustering**: группы NPC с плотными связями
      - **Centrality**: ключевые фигуры с большим влиянием
      - **Bridges**: соединительные элементы между группами
      - **Dynamics**: изменяющиеся связи со временем

propagation_phases:
  incubation_phase:
    description: Начальная фаза - легенда только у создателя/свидетеля
    mechanics:
      - **Personal reflection**: NPC обдумывает опыт
      - **Initial sharing**: рассказ небольшому кругу доверенных лиц
      - **Credibility assessment**: оценка достоверности
      - **Emotional processing**: обработка эмоционального воздействия

    duration: 1-4 игровых часа
    spread_rate: 0 (локально)

  viral_phase:
    description: Экспоненциальное распространение
    mechanics:
      - **Word of mouth**: передача от человека к человеку
      - **Social amplification**: обсуждение в группах
      - **Media pickup**: попадание в цифровые СМИ
      - **Cross-pollination**: переход между социальными группами

    duration: 4-24 игровых часа
    spread_rate: экспоненциальный рост

  saturation_phase:
    description: Максимальное распространение и насыщение
    mechanics:
      - **Peak awareness**: большинство знает легенду
      - **Multiple variants**: появление разных версий
      - **Cultural integration**: интеграция в повседневные разговоры
      - **Behavioral changes**: влияние на поведение NPC

    duration: 24-72 игровых часа
    spread_rate: логарифмический рост до насыщения

  decay_phase:
    description: Угасание и забвение
    mechanics:
      - **Truth revelation**: раскрытие реальных фактов
      - **Competing stories**: появление новых легенд
      - **Cultural shift**: изменение интересов общества
      - **Memory fade**: естественное забывание

    duration: 72+ игровых часа
    spread_rate: экспоненциальное затухание

distortion_mechanics:
  information_decay:
    description: Искажение информации при передаче
    factors:
      - **Transmission errors**: случайные искажения при пересказе
      - **Motivational bias**: искажения из-за желаний рассказчика
      - **Cultural adaptation**: адаптация под культурный контекст
      - **Selective memory**: избирательное запоминание деталей

    distortion_types:
      - **Amplification**: преувеличение важных элементов
      - **Minimization**: преуменьшение неудобных фактов
      - **Generalization**: упрощение сложных деталей
      - **Personalization**: добавление личных интерпретаций

  variant_generation:
    description: Создание вариаций легенды
    mechanics:
      - **Branching narratives**: разные версии одной истории
      - **Conflicting accounts**: противоречащие друг другу рассказы
      - **Myth creation**: превращение фактов в миф
      - **Cultural reinterpretation**: переосмысление в новом контексте

    variant_characteristics:
      - **Core truth**: неизменная основа легенды
      - **Variable elements**: изменяемые детали
      - **Emotional core**: сохраняющаяся эмоциональная окраска
      - **Cultural markers**: отражения культуры рассказчика

npc_influence_system:
  behavioral_changes:
    description: Как легенды влияют на поведение NPC
    effects:
      - **Fear responses**: избегание определенных мест/действий
      - **Social bonding**: укрепление связей через общие страхи
      - **Economic decisions**: влияние на торговлю и цены
      - **Faction relations**: изменение отношений между группами

    intensity_levels:
      - **Low**: косвенные упоминания в разговорах
      - **Medium**: изменения в повседневном поведении
      - **High**: радикальные изменения в действиях
      - **Critical**: массовые паники или миграции

  reputation_system:
    description: Репутация как распространителя легенд
    mechanics:
      - **Credibility score**: доверие к рассказам NPC
      - **Storytelling skill**: умение хорошо рассказывать истории
      - **Social capital**: влияние в социальной сети
      - **Faction standing**: репутация в конкретных группах

    reputation_effects:
      - **Information access**: доступ к эксклюзивным легендам
      - **Social opportunities**: новые связи и возможности
      - **Economic benefits**: лучшие сделки и цены
      - **Protection**: социальная защита от угроз

digital_propagation:
  net_integration:
    description: Распространение через цифровые сети
    channels:
      - **Social feeds**: виртуальные социальные сети NPC
      - **Dark web forums**: подпольные обсуждения
      - **Corporate intranets**: внутренние сети корпораций
      - **Hacker networks**: сети хакеров и техно-рейверов

    digital_mechanics:
      - **Algorithmic boost**: искусственное усиление популярных легенд
      - **Viral coefficients**: метрики вирусности контента
      - **Echo chambers**: изоляция в пузырях мнений
      - **Disinformation campaigns**: целенаправленное распространение лжи

  cybernetic_interfaces:
    description: Прямое распространение через нейроинтерфейсы
    mechanics:
      - **Neural sharing**: прямой обмен мыслями
      - **Memory implants**: искусственные воспоминания
      - **Holographic broadcasts**: массовые голографические трансляции
      - **AR overlays**: дополненная реальность с легендами

    interface_effects:
      - **Instant transmission**: мгновенное распространение
      - **Perfect fidelity**: точная передача без искажений
      - **Emotional contagion**: передача эмоций вместе с информацией
      - **Memory modification**: изменение воспоминаний реципиента

player_integration:
  player_as_catalyst:
    description: Игроки как катализаторы распространения
    mechanics:
      - **Witness accounts**: личные свидетельства игроков
      - **Social sharing**: обсуждение с NPC и другими игроками
      - **Media creation**: создание контента о легендах
      - **Investigation**: расследование и подтверждение легенд

    player_benefits:
      - **Reputation gains**: повышение репутации в сообществах
      - **Information access**: доступ к эксклюзивным легендам
      - **Quest opportunities**: новые квесты от заинтересованных NPC
      - **Economic opportunities**: торговля информацией

  player_as_target:
    description: Игроки как цели распространения
    mechanics:
      - **Personal legends**: легенды о действиях игрока
      - **Fame/infamy**: репутация через слухи
      - **Targeted stories**: легенды, созданные специально о игроке
      - **Social pressure**: влияние через общественное мнение

    impact_types:
      - **Positive**: героические легенды повышают репутацию
      - **Negative**: негативные слухи снижают доверие
      - **Neutral**: просто интересные истории
      - **Manipulative**: использование легенд для влияния на игрока

faction_dynamics:
  intra_faction_spreading:
    description: Распространение внутри фракций
    mechanics:
      - **Loyalty filters**: легенды проходят через фильтр лояльности
      - **Propaganda integration**: использование легенд для пропаганды
      - **Secret knowledge**: эзотерическая информация для посвященных
      - **Rite of passage**: легенды как часть инициации

    faction_effects:
      - **Cohesion increase**: укрепление единства фракции
      - **Morale boost**: повышение боевого духа
      - **Recruitment aid**: привлечение новых членов
      - **Intelligence gathering**: сбор информации о других фракциях

  inter_faction_conflicts:
    description: Конфликты между фракциями через легенды
    mechanics:
      - **Disinformation wars**: распространение компромата
      - **Hero creation**: создание легенд о героях фракции
      - **Fear mongering**: запугивание через страшные истории
      - **Alliance building**: легенды укрепляющие союзы

    conflict_types:
      - **Corporate wars**: бизнес-конфликты через репутацию
      - **Gang rivalries**: уличные войны через страх и уважение
      - **Ideological battles**: войны идей через нарративы
      - **Territorial disputes**: споры за территории через легенды

event_driven_propagation:
  world_events:
    description: Глобальные события влияющие на распространение
    triggers:
      - **Corporate scandals**: крупные скандалы корпораций
      - **Natural disasters**: природные катаклизмы
      - **Political upheavals**: политические потрясения
      - **Technological breakthroughs**: прорывы в технологиях

    event_effects:
      - **Mass hysteria**: паника и массовые реакции
      - **Information overload**: перегрузка информацией
      - **Truth suppression**: попытки скрыть правду
      - **Legend amplification**: усиление существующих легенд

  player_actions:
    description: Действия игроков запускающие распространение
    catalysts:
      - **Quest completions**: завершение квестов с драматическими исходами
      - **High-profile crimes**: громкие преступления
      - **Corporate espionage**: промышленный шпионаж
      - **Technological discoveries**: открытия новых технологий

    ripple_effects:
      - **Chain reactions**: каскад связанных легенд
      - **Faction responses**: реакции фракций на действия игрока
      - **Economic impacts**: изменения в экономике города
      - **Social changes**: сдвиги в общественном мнении

implementation_architecture:
  propagation_engine:
    description: Двигатель распространения
    components:
      - **Network simulator**: моделирование социальной сети
      - **Spread calculator**: расчет скорости и охвата распространения
      - **Distortion engine**: симуляция искажения информации
      - **Event processor**: обработка триггеров событий

    performance_requirements:
      - **Real-time processing**: обработка в реальном времени
      - **Scalable simulation**: поддержка тысяч NPC
      - **Memory efficient**: оптимизированное использование памяти
      - **Concurrent processing**: параллельная обработка распространения

  data_structures:
    description: Структуры данных для системы
    requirements:
      - **Legend graph**: граф распространения легенд
      - **NPC relationships**: связи между NPC
      - **Credibility metrics**: метрики доверия и репутации
      - **Variant tracking**: отслеживание вариаций легенд

    storage_optimization:
      - **Compressed storage**: сжатие для больших объемов данных
      - **Indexing**: эффективный поиск и запросы
      - **Caching**: кеширование часто используемых данных
      - **Archival**: архивирование старых легенд

  integration_interfaces:
    description: Интерфейсы интеграции с другими системами
    apis:
      - **Social service**: управление социальными связями
      - **Narrative service**: генерация и модификация легенд
      - **Quest service**: влияние на квесты
      - **Economy service**: влияние на торговлю

    event_system:
      - **Propagation events**: события распространения
      - **Legend events**: события связанные с легендами
      - **Social events**: события социальных взаимодействий
      - **Player events**: события связанные с игроком

monitoring_and_analytics:
  propagation_metrics:
    description: Метрики распространения
    measurements:
      - **Spread velocity**: скорость распространения
      - **Reach coverage**: охват аудитории
      - **Engagement rate**: уровень вовлеченности
      - **Retention time**: время жизни легенды

    analytics:
      - **Trend analysis**: анализ трендов распространения
      - **Network analysis**: анализ социальной сети
      - **Content analysis**: анализ контента легенд
      - **Player impact**: влияние на игроков

  quality_assurance:
    description: Обеспечение качества
    checks:
      - **Consistency validation**: проверка логической непротиворечивости
      - **Performance monitoring**: мониторинг производительности
      - **Balance verification**: проверка баланса влияния
      - **Cultural sensitivity**: проверка культурной чувствительности

    automated_testing:
      - **Unit tests**: тестирование отдельных компонентов
      - **Integration tests**: тестирование взаимодействия
      - **Stress tests**: тестирование под нагрузкой
      - **Scenario tests**: тестирование сценариев использования

future_enhancements:
  ai_driven_propagation:
    description: AI-управляемое распространение
    features:
      - **Predictive modeling**: предсказание распространения
      - **Adaptive algorithms**: адаптивные алгоритмы распространения
      - **Emotional contagion**: моделирование эмоционального заражения
      - **Cultural evolution**: эволюция культурных паттернов

  cross_reality_integration:
    description: Интеграция между реальностью и виртуальностью
    features:
      - **AR propagation**: распространение через дополненную реальность
      - **VR communities**: виртуальные сообщества
      - **Mixed reality events**: события в смешанной реальности
      - **Blockchain verification**: верификация легенд через блокчейн

  player_driven_economy:
    description: Экономика контента игроков
    features:
      - **Legend marketplaces**: рынки легенд
      - **Story bounties**: награды за интересные истории
      - **Information trading**: торговля информацией
      - **Reputation economies**: экономики репутации

example_scenarios:
  corporate_scandal_scenario:
    description: Сценарий корпоративного скандала
    sequence:
      1. **Initial breach**: хакер проникает в корпоративную сеть
      2. **Witness account**: очевидец рассказывает историю в баре
      3. **Viral spread**: история распространяется через социальные сети
      4. **Media amplification**: СМИ подхватывают и усиливают
      5. **Corporate response**: корпорация запускает контр-кампанию
      6. **Public reaction**: общественность реагирует на скандал
      7. **Long-term effects**: долгосрочные последствия для корпорации

  player_legend_scenario:
    description: Легенда о действиях игрока
    sequence:
      1. **Dramatic action**: игрок совершает впечатляющий поступок
      2. **Witness reactions**: NPC свидетели обсуждают событие
      3. **Story evolution**: история эволюционирует при пересказе
      4. **Player reputation**: репутация игрока меняется
      5. **Quest opportunities**: новые квесты появляются
      6. **Faction responses**: фракции реагируют на легенду
      7. **Cultural impact**: легенда входит в культуру города

technical_requirements:
  performance_targets:
    description: Цели производительности
    targets:
      - Propagation simulation: <50ms per simulation tick
      - Memory usage: <100MB for active legends
      - Network queries: <10ms average response time
      - Concurrent users: support for 1000+ simultaneous players

  scalability_requirements:
    description: Требования масштабируемости
    requirements:
      - Horizontal scaling: распределение нагрузки
      - Data partitioning: разделение данных по регионам
      - Caching strategies: эффективное кеширование
      - Load balancing: балансировка нагрузки

  security_considerations:
    description: Соображения безопасности
    measures:
      - **Content moderation**: модерация генерируемого контента
      - **Privacy protection**: защита персональных данных
      - **Disinformation detection**: обнаружение дезинформации
      - **Rate limiting**: ограничение скорости распространения

history:
  - version: '1.0.0'
    date: 2025-12-28
    author: content_designer
    changes: Создан первоначальный документ системы распространения городских легенд
  - version: '1.1.0'
    date: 2025-12-28
    author: content_designer
    changes: Расширена система с техническими требованиями, аналитикой и планами развития.

validation:
  checksum: ''
  schema_version: '1.0'
