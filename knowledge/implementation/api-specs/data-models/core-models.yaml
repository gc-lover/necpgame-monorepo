metadata:
  id: implementation-api-data-models-core
  title: 'API Data Models — Core'
  document_type: implementation
  category: api-data-models
  status: approved
  version: '1.0.0'
  last_updated: 2025-11-07T06:30:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-07T06:30:00Z
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - api
    - data-models
    - accounts
  topics:
    - platform
    - player-profile
  related_systems:
    - account-service
    - player-profile-service
    - character-service
  related_documents:
    - id: implementation-api-data-models-gameplay
      relation: complements
    - id: implementation-api-data-models-social
      relation: complements
  source: shared/docs/knowledge/implementation/api-specs/data-models/core-models.md
  visibility: internal
  audience:
    - concept
    - backend
    - api
  risk_level: medium
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: 'Основные модели аккаунтов, игроков и персонажей оставались в Markdown и не проходили схемную проверку.'
  goal: 'Зафиксировать базовые сущности API в структурированном YAML для дальнейшей генерации контрактов и задач.'
  essence: 'Документ описывает Account, Player и Character модели с ключевыми полями, ограничениями и связями.'
  key_points:
    - 'Account, Player и Character модели оформлены с обязательными и опциональными полями.'
    - 'Указаны связи и контекст использования для аккаунт-сервиса и player-profile.'
    - 'Документ связывает core модели с gameplay и social пакетами.'
content:
  sections:
    - id: overview
      title: 'Обзор'
      body: |
        Core пакет закрывает регистрацию аккаунтов, профиль игрока и базовую структуру персонажа.
        Модели используются в account-service, player-profile-service и служат точкой входа для gameplay и social консюмеров.
        Типы, поля и форматы дат приведены для синхронизации API и схем БД.
      mechanics_links: []
      assets: []
    - id: account_model
      title: 'Account'
      body: |
        Account описывает идентификатор, email, username, флаги активности и временные метки.
        Поле passwordHash исключается из публичных ответов; lastLoginAt опционально и заполняется при успешной аутентификации.
        Модель является источником прав доступа и мультифакторной аутентификации.
      mechanics_links: []
      assets: []
    - id: player_model
      title: 'Player'
      body: |
        Player связывает аккаунт с игровым прогрессом: баланс евро, репутация по корпорациям, идентификатор аккаунта.
        Репутация хранится как словарь, поддерживающий динамическое расширение за счёт корпораций и фракций.
        Модель используется economics-service и progression для расчётов наград.
      mechanics_links: []
      assets: []
    - id: character_model
      title: 'Character'
      body: |
        Character описывает игрового персонажа с классом, атрибутами, опытом, координатами и ресурсами HP/SP.
        Поля origin, faction и location обеспечивают сценарии world-state и matchmaking.
        Структура поддерживает расширение через JSON поля для имплантов и loadout.
      mechanics_links: []
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: true
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-07
    author: ai_brain_manager
    changes: 'Core модели аккаунтов, игроков и персонажей вынесены в отдельный пакет.'
validation:
  checksum: ''
  schema_version: '1.0'

