# Issue: #172
metadata:
  id: chat-system-api
  title: API системы чата
  document_type: architecture
  category: api
  status: draft
  version: '1.0.0'
  owners:
    - role: architect
      contact: architect@necp.game
  tags:
    - chat
    - api
    - endpoints
summary:
  goal: Определить API endpoints для всех операций чата.
content:
  sections:
    - id: core-api
      title: Chat Core API (chat-core-service)
      body: |
        ### Управление сообщениями
        ```
        POST   /api/v1/chat/messages              - Отправить сообщение
        GET    /api/v1/chat/messages/{channelId}  - Получить сообщения канала
        PUT    /api/v1/chat/messages/{messageId}  - Редактировать сообщение
        DELETE /api/v1/chat/messages/{messageId}  - Удалить сообщение
        POST   /api/v1/chat/messages/{messageId}/react - Реакция на сообщение
        ```

        ### Slash-команды
        ```
        POST   /api/v1/chat/commands               - Выполнить команду
        GET    /api/v1/chat/commands               - Список доступных команд
        ```

        ### Настройки пользователя
        ```
        GET    /api/v1/chat/settings               - Получить настройки
        PUT    /api/v1/chat/settings               - Обновить настройки
        ```
      mechanics_links: []
      assets: []

    - id: channel-api
      title: Chat Channel API (chat-channel-service)
      body: |
        ### Управление каналами
        ```
        POST   /api/v1/chat/channels               - Создать канал
        GET    /api/v1/chat/channels               - Список каналов пользователя
        GET    /api/v1/chat/channels/{channelId}   - Информация о канале
        PUT    /api/v1/chat/channels/{channelId}   - Обновить канал
        DELETE /api/v1/chat/channels/{channelId}   - Удалить канал
        ```

        ### Управление участниками
        ```
        POST   /api/v1/chat/channels/{channelId}/join   - Присоединиться к каналу
        POST   /api/v1/chat/channels/{channelId}/leave  - Покинуть канал
        POST   /api/v1/chat/channels/{channelId}/invite - Пригласить пользователя
        DELETE /api/v1/chat/channels/{channelId}/kick   - Исключить пользователя
        PUT    /api/v1/chat/channels/{channelId}/role   - Изменить роль участника
        ```
      mechanics_links: []
      assets: []

    - id: moderation-api
      title: Chat Moderation API (chat-moderation-service)
      body: |
        ### Модерация
        ```
        POST   /api/v1/chat/report                 - Пожаловаться на сообщение
        POST   /api/v1/chat/ban                    - Забанить пользователя
        DELETE /api/v1/chat/ban/{banId}           - Снять бан
        GET    /api/v1/chat/bans                   - Список активных банов
        ```

        ### Фильтры и правила
        ```
        GET    /api/v1/chat/filters                - Получить правила фильтрации
        PUT    /api/v1/chat/filters                - Обновить правила
        GET    /api/v1/chat/muted-words            - Список запрещенных слов
        PUT    /api/v1/chat/muted-words            - Обновить список
        ```
      mechanics_links: []
      assets: []

    - id: history-api
      title: Chat History API (chat-history-service)
      body: |
        ### История сообщений
        ```
        GET    /api/v1/chat/history/{channelId}    - История канала
        GET    /api/v1/chat/history/search         - Поиск в истории
        DELETE /api/v1/chat/history/{channelId}    - Очистить историю канала
        GET    /api/v1/chat/history/export         - Экспорт истории
        ```

        ### Статистика
        ```
        GET    /api/v1/chat/stats/channels         - Статистика каналов
        GET    /api/v1/chat/stats/messages         - Статистика сообщений
        GET    /api/v1/chat/stats/users            - Активность пользователей
        ```
      mechanics_links: []
      assets: []
implementation:
  github_issue: 172