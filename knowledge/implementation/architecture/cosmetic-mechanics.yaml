# Issue: #315
metadata:
  id: cosmetic-mechanics
  title: Архитектура системы косметики - Механики
  document_type: architecture
  category: systems
  status: draft
  version: "1.1.0"
  last_updated: 2025-11-30T20:50:00Z
  github_issue: 315
  related_documents:
    - id: cosmetic-core
      relation: extends

cosmetic_categories:
  - name: character_skin
    description: "Скины персонажа - изменение внешнего вида персонажа"
    slots:
      - head: "голова"
      - body: "тело"
      - legs: "ноги"
      - feet: "ноги"
      - hands: "руки"
    rarities:
      - common: "обычная"
      - rare: "редкая"
      - epic: "эпическая"
      - legendary: "легендарная"

  - name: weapon_skin
    description: "Скины оружия - изменение внешнего вида оружия"
    slots:
      - primary: "основное оружие"
      - secondary: "вторичное оружие"
      - melee: "ближнее оружие"
    rarities:
      - common: "обычная"
      - rare: "редкая"
      - epic: "эпическая"
      - legendary: "легендарная"

  - name: emote
    description: "Эмоции - анимации персонажа"
    slots:
      - emote_1: "эмоция 1"
      - emote_2: "эмоция 2"
      - emote_3: "эмоция 3"
      - emote_4: "эмоция 4"
    rarities:
      - common: "обычная"
      - rare: "редкая"
      - epic: "эпическая"
      - legendary: "легендарная"

  - name: title
    description: "Титулы - текстовые обозначения"
    slots:
      - title: "титул"
    rarities:
      - common: "обычная"
      - rare: "редкая"
      - epic: "эпическая"
      - legendary: "легендарная"

  - name: name_plate
    description: "Таблички с именами - визуальные элементы"
    slots:
      - name_plate: "табличка с именем"
    rarities:
      - common: "обычная"
      - rare: "редкая"
      - epic: "эпическая"
      - legendary: "легендарная"

rarities:
  - name: common
    description: "Обычная редкость"
    color: "#FFFFFF"
    drop_rate: 0.5
    shop_frequency: "high"

  - name: rare
    description: "Редкая редкость"
    color: "#1E90FF"
    drop_rate: 0.3
    shop_frequency: "medium"

  - name: epic
    description: "Эпическая редкость"
    color: "#9B30FF"
    drop_rate: 0.15
    shop_frequency: "low"

  - name: legendary
    description: "Легендарная редкость"
    color: "#FFD700"
    drop_rate: 0.05
    shop_frequency: "very_low"

shop_system:
  rotation:
    - frequency: "daily"
      description: "Ежедневная ротация магазина"
      items_per_rotation: 10-15
      rarity_distribution:
        - common: 40%
        - rare: 35%
        - epic: 20%
        - legendary: 5%
    - frequency: "weekly"
      description: "Еженедельная ротация магазина"
      items_per_rotation: 5-8
      rarity_distribution:
        - rare: 50%
        - epic: 40%
        - legendary: 10%
  algorithm:
    - selection: "выбор предметов для ротации"
    - rarity_balance: "балансировка редкостей"
    - exclusivity_check: "проверка эксклюзивности"
    - notification: "уведомление игроков"

purchase_system:
  process:
    - ownership_check: "проверка владения"
    - availability_check: "проверка доступности"
    - currency_check: "проверка валюты"
    - currency_deduction: "списание валюты"
    - ownership_grant: "выдача владения"
    - notification: "уведомление игрока"
    - analytics_logging: "логирование в аналитику"
  restrictions:
    - exclusive_items: "эксклюзивные предметы"
    - time_limited: "временные ограничения"
    - level_requirements: "требования по уровню"

equip_system:
  process:
    - ownership_check: "проверка владения"
    - slot_validation: "валидация слота"
    - current_equip_unequip: "снятие текущей косметики (если есть)"
    - equip_application: "применение косметики"
    - stats_update: "обновление статистики"
    - notification: "уведомление игрока"
  slots:
    - character_skin: "слот скина персонажа"
    - weapon_skin: "слот скина оружия"
    - emote: "слот эмоции"
    - title: "слот титула"
    - name_plate: "слот таблички с именем"

preview_system:
  features:
    - 3d_preview: "3D предпросмотр косметики"
    - animation_preview: "предпросмотр анимаций"
    - comparison: "сравнение с текущей косметикой"
    - rotation: "вращение модели"
  restrictions:
    - ownership: "требуется владение для некоторых предпросмотров"
    - shop_items: "предпросмотр предметов из магазина"

