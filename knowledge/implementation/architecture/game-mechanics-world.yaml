# Issue: #104
metadata:
  id: game-mechanics-world
  title: Архитектура систем игровых механик - Мировые системы
  document_type: architecture
  category: systems
  status: draft
  version: "1.0.0"
  last_updated: 2025-11-23T13:00:00Z
  owners:
    - role: architect
      contact: architect@necp.game
  tags:
    - architecture
    - mechanics
    - world
  related_documents:
    - id: game-mechanics-core
      relation: extends
  github_issue: 104
  visibility: internal
  audience:
    - architect
    - backend
    - world

architecture:
  microservices:
    - name: world-service
      port: 8086
      responsibility: |
        Мировые механики:
        - Мировые события
        - Рейды
        - Боссы
        - Управление территориями
        - Синхронизация состояния мира
        - Данжи
      components:
        - event-manager: управление событиями
        - raid-manager: управление рейдами
        - boss-manager: управление боссами
        - territory-manager: управление территориями
        - world-state-sync: синхронизация состояния мира
        - dungeon-manager: управление данжами
      endpoints:
        - GET /api/v1/world/events/active - активные события
        - GET /api/v1/world/events/{eventId} - информация о событии
        - POST /api/v1/world/events/{eventId}/participate - участие в событии
        - GET /api/v1/world/raids/list - список рейдов
        - POST /api/v1/world/raids/{raidId}/join - присоединение к рейду
        - GET /api/v1/world/bosses/active - активные боссы
        - POST /api/v1/world/bosses/{bossId}/engage - начало боя с боссом
        - GET /api/v1/world/territories - территории
        - GET /api/v1/world/territories/{territoryId} - информация о территории
        - GET /api/v1/world/dungeons/list - список данжей
        - POST /api/v1/world/dungeons/{dungeonId}/enter - вход в данж

  data_flows:
    world_event_flow: |
      1. World Service определяет начало события
      2. World Service загружает конфигурацию события
      3. World Service публикует событие world:event-started
      4. Игроки получают уведомление через Realtime Gateway
      5. Игроки присоединяются к событию
      6. World Service отслеживает прогресс события
      7. При завершении World Service рассчитывает награды
      8. World Service выдает награды через Economy Service
      9. World Service публикует событие world:event-completed

