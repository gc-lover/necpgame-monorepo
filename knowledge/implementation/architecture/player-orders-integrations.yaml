# Issue: #305
metadata:
  id: player-orders-integrations
  title: Архитектура системы заказов от игроков - Интеграции
  document_type: architecture
  category: systems
  status: draft
  version: "1.0.0"
  last_updated: 2025-11-23T23:55:00Z
  owners:
    - role: architect
      contact: architect@necp.game
  tags:
    - architecture
    - social
    - player-orders
    - integrations
  related_documents:
    - id: player-orders-core
      relation: extends
  github_issue: 305
  visibility: internal
  audience:
    - architect
    - backend
    - social

architecture:
  integrations:
    economy_service: |
      - Проверка баланса перед созданием заказа
      - Блокировка депозитов
      - Обработка платежей
      - Расчет комиссий
      - Выплата наград
      - Обработка страховых выплат

    reputation_service: |
      - Получение репутации для доступа к заказам
      - Обновление репутации после выполнения
      - Влияние репутации на цены и доступ

    quest_service: |
      - Интеграция с квестами на основе заказов
      - Триггеры квестов при выполнении заказов
      - Обновление прогресса квестов

    world_service: |
      - Влияние заказов на мир
      - Триггеры событий на основе заказов
      - Обновление влияния фракций

    gameplay_service: |
      - Получение событий игрового процесса
      - Интеграция с системой прогрессии
      - Модификация опыта за заказы

    npc_service: |
      - Получение информации о NPC-брокерах
      - Интеграция с NPC-заказчиками
      - Проверка доступности NPC

    analytics_service: |
      - Логирование всех операций заказов
      - Сбор метрик эффективности
      - Анализ паттернов заказов
      - Мониторинг экономики заказов

    realtime_gateway: |
      - Отправка realtime обновлений заказов
      - Синхронизация аукционов
      - Уведомления о событиях

  tickrate_and_network_requirements:
    order_management:
      tickrate: Event-based (on-demand)
      network_load: |
        - Создание заказа: event-based, ~0.1-0.5 events/sec
        - Принятие заказа: event-based, ~0.1-0.3 events/sec
        - Обновление прогресса: event-based, ~0.5-1 events/sec
        - Общий трафик: ~0.3-0.8 KB/sec на игрока
      sync_strategy: Strong Consistency (ACID транзакции)

    order_auctions:
      tickrate: Event-based (on-demand)
      network_load: |
        - Создание аукциона: event-based, ~0.05-0.1 events/sec
        - Ставки: event-based, ~0.1-0.5 events/sec (пиковая)
        - Обновления аукциона: event-based, ~0.2-0.5 events/sec
        - Общий трафик: ~0.2-0.6 KB/sec на игрока
      sync_strategy: Strong Consistency

    order_execution:
      tickrate: Event-based (on-demand)
      network_load: |
        - Отслеживание прогресса: event-based, ~0.5-1 events/sec
        - Завершение заказа: event-based, ~0.1-0.3 events/sec
        - Общий трафик: ~0.2-0.5 KB/sec на игрока
      sync_strategy: Strong Consistency

    order_economy:
      tickrate: Event-based (on-demand)
      network_load: |
        - Платежи: event-based, ~0.1-0.3 events/sec
        - Комиссии: event-based, ~0.05-0.1 events/sec
        - Общий трафик: ~0.1-0.3 KB/sec на игрока
      sync_strategy: Strong Consistency (Saga Pattern для распределенных транзакций)

