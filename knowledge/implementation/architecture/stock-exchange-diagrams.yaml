diagrams:
  component_diagram: |
    ```mermaid
    graph TB
        Client[UE5 Client] --> Gateway[API Gateway]
        
        Gateway --> EconomyService[Economy Service<br/>8085]
        Gateway --> DividendService[Dividend Service<br/>8088]
        Gateway --> AnalyticsService[Stock Analytics Service<br/>8089]
        Gateway --> ComplianceService[Compliance Service<br/>8091]
        
        EconomyService --> STE[Stock Trading Engine]
        EconomyService --> SPE[Stock Pricing Engine]
        EconomyService --> PM[Portfolio Manager]
        EconomyService --> CR[Corporation Registry]
        EconomyService --> OBM[Order Book Manager]
        EconomyService --> TE[Trade Executor]
        
        DividendService --> DC[Dividend Calculator]
        DividendService --> DS[Dividend Scheduler]
        DividendService --> DRIP[DRIP Manager]
        DividendService --> DD[Dividend Distributor]
        
        AnalyticsService --> IC[Index Calculator]
        AnalyticsService --> MC[Metrics Calculator]
        AnalyticsService --> TA[Technical Analyzer]
        
        ComplianceService --> TM[Trade Monitor]
        ComplianceService --> ITD[Insider Trading Detector]
        ComplianceService --> CBM[Circuit Breaker Manager]
        
        EconomyService --> WorldService[World Service<br/>8086]
        EconomyService --> QuestService[Quest Service]
        EconomyService --> SocialService[Social Service<br/>8084]
        
        EconomyService --> EventBus[Event Bus<br/>Kafka]
        DividendService --> EventBus
        AnalyticsService --> EventBus
        ComplianceService --> EventBus
        
        EconomyService --> DB[(Stock Exchange DB)]
        DividendService --> DB
        AnalyticsService --> DB
        ComplianceService --> DB
        
        EconomyService --> Cache[(Redis Cache)]
        EconomyService --> WalletService[Wallet Service]
        EconomyService --> NotificationService[Notification Service]
        
        Client --> WSStocks[WebSocket<br/>Stock Prices]
        WSStocks --> EconomyService
    ```

  trading_flow: |
    ```mermaid
    sequenceDiagram
        participant Client
        participant EconomyService
        participant OrderBook
        participant TradingEngine
        participant Portfolio
        participant Wallet
        participant EventBus
        
        Client->>EconomyService: POST /orders (BUY)
        EconomyService->>OrderBook: Add order
        OrderBook->>TradingEngine: Check for matches
        TradingEngine->>OrderBook: Find matching SELL order
        TradingEngine->>Portfolio: Update buyer portfolio
        TradingEngine->>Portfolio: Update seller portfolio
        TradingEngine->>Wallet: Transfer funds
        TradingEngine->>Wallet: Charge commissions
        TradingEngine->>EventBus: Publish trade.matched
        TradingEngine->>EventBus: Publish price.updated
        EconomyService->>Client: Order executed
    ```

  dividend_flow: |
    ```mermaid
    sequenceDiagram
        participant Scheduler
        participant DividendService
        participant Calculator
        participant Portfolio
        participant Wallet
        participant EventBus
        
        Scheduler->>DividendService: Payment date reached
        DividendService->>Calculator: Calculate dividends
        Calculator->>Portfolio: Get shareholders
        Calculator->>Calculator: Calculate per player
        DividendService->>Wallet: Transfer dividends
        DividendService->>EventBus: Publish dividend.paid
        DividendService->>NotificationService: Notify players
    ```

  event_impact_flow: |
    ```mermaid
    sequenceDiagram
        participant WorldService
        participant EventBus
        participant StockEventsHandler
        participant PricingEngine
        participant EconomyService
        participant Client
        
        WorldService->>EventBus: world.event.started
        EventBus->>StockEventsHandler: Event notification
        StockEventsHandler->>StockEventsHandler: Calculate impact
        StockEventsHandler->>PricingEngine: Apply price modifier
        PricingEngine->>EconomyService: Update prices
        EconomyService->>EventBus: Publish price.updated
        EconomyService->>Client: WebSocket notification
    ```

