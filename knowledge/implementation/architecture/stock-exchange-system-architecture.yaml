metadata:
  id: stock-exchange-system-architecture
  title: Архитектура системы фондовой биржи
  document_type: architecture
  category: systems
  status: draft
  version: "1.0.0"
  last_updated: 2025-11-23T14:30:00Z
  owners:
    - role: architect
      contact: architect@necp.game
  tags:
    - architecture
    - economy
    - stock-exchange
    - trading
    - investment
  related_systems:
    - economy-service
    - analytics-service
    - world-service
    - social-service
    - quest-service
  related_documents:
    - id: stock-exchange-overview
      relation: implements
    - id: stock-trading
      relation: implements
    - id: stock-dividends
      relation: implements
    - id: stock-events
      relation: implements
    - id: stock-indices
      relation: implements
    - id: stock-analytics
      relation: implements
    - id: stock-advanced
      relation: implements
    - id: stock-protection
      relation: implements
    - id: stock-integration
      relation: implements
  github_issue: 393
  visibility: internal
  audience:
    - architect
    - backend
    - economy
    - api-designer

summary:
  problem: |
    Требуется спроектировать архитектуру системы фондовой биржи, которая включает:
    - Торговлю акциями корпораций
    - Систему дивидендов и пассивного дохода
    - Реакцию на игровые события
    - Индексы и аналитику
    - Защиту от манипуляций
    - Интеграции с квестами, фракциями и мировыми событиями
  goal: |
    Создать архитектурную схему системы фондовой биржи с определением:
    - Компонентов для торговли, дивидендов, событий, индексов и аналитики
    - REST, WebSocket и Event Bus контрактов
    - Интеграций с другими системами
    - Структуры БД для акций, портфелей, ордеров и дивидендов
    - Технического задания для реализации
  essence: |
    Система фондовой биржи обеспечивает торговлю акциями корпораций, выплату дивидендов,
    реакцию на игровые события, расчет индексов и аналитику. Интегрируется с экономикой,
    квестами, фракциями и мировыми событиями через Event Bus.

architecture:
  overview: |
    Система фондовой биржи состоит из следующих компонентов:
    1. Stock Trading Engine - исполнение ордеров и matching
    2. Stock Pricing Engine - расчет цен на основе спроса/предложения и событий
    3. Dividend Service - расчет и выплата дивидендов
    4. Stock Events Handler - обработка влияния игровых событий на цены
    5. Index Calculator - расчет биржевых индексов
    6. Stock Analytics Engine - аналитика и метрики
    7. Compliance Monitor - защита от манипуляций
    8. Portfolio Manager - управление портфелями игроков
    9. Corporation Registry - реестр корпораций и их акций

  includes:
    - stock-exchange-microservices.yaml
    - stock-exchange-components.yaml
    - stock-exchange-integrations.yaml
    - stock-exchange-database.yaml
    - stock-exchange-events.yaml
    - stock-exchange-technical-tasks.yaml
    - stock-exchange-diagrams.yaml
