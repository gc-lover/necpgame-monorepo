metadata:
  id: world-events-system-architecture
  title: Архитектура системы мировых событий
  document_type: architecture
  category: systems
  status: draft
  version: "1.0.0"
  last_updated: 2025-11-23T23:50:00Z
  owners:
    - role: architect
      contact: architect@necp.game
  tags:
    - architecture
    - world
    - events
    - live-ops
    - narrative
  related_systems:
    - world-service
    - social-service
    - gameplay-service
    - economy-service
    - analytics-service
    - quest-service
    - reputation-service
  related_documents:
    - id: analysis-ideas-2025-11-03-events-brainstorm
      relation: implements
    - id: travel-events-system-architecture
      relation: extends
    - id: economy-events-system-architecture
      relation: extends
  github_issue: 464
  visibility: internal
  audience:
    - architect
    - backend
    - world
    - live-ops
    - api-designer

summary:
  problem: |
    Требуется спроектировать архитектуру системы мировых событий для управления крупными событиями,
    которые влияют на весь мир игры или большие регионы:
    - События разных типов (технологические, политические, военные, спортивные, экологические, сюжетные)
    - События разных масштабов (глобальные, региональные, городские, локальные)
    - События разной частоты (разовые, периодические, регулярные)
    - Влияние на множественные системы (экономика, фракции, социальная динамика, боевая система)
    - Координация между множеством сервисов
    - Планирование и автоматический запуск событий
    - Коммуникация с игроками (баннеры, уведомления, новости)
  goal: |
    Создать архитектурную схему системы мировых событий с определением:
    - Микросервисов для управления событиями
    - Компонентов для планирования, выполнения и мониторинга событий
    - API endpoints (высокоуровнево)
    - Интеграций с другими системами
    - Структуры БД для хранения событий и их эффектов
    - Технического задания для реализации
  essence: |
    Система мировых событий управляет жизненным циклом крупных событий, влияющих на мир игры,
    координирует изменения в множественных системах, синхронизирует через Event Bus и предоставляет
    API для мониторинга и управления событиями.

architecture:
  overview: |
    Система мировых событий состоит из следующих компонентов:
    1. World Events Manager - управление жизненным циклом событий
    2. Event Scheduler - планирование и автоматический запуск событий
    3. Event Effects Coordinator - координация применения эффектов к различным системам
    4. Event Monitor - мониторинг активных событий и метрик
    5. Event Communication Manager - коммуникация с игроками (баннеры, уведомления, новости)
    6. Event Analytics Collector - сбор аналитики по событиям
    7. Event Integration Manager - интеграция с другими сервисами
    8. Event State Manager - управление состоянием событий
    9. Event Scale Manager - управление масштабом событий (глобальные, региональные, городские, локальные)
    10. Event Type Handler - обработчики для разных типов событий

  includes:
    - world-events-microservices.yaml
    - world-events-components.yaml
    - world-events-data-models.yaml
    - world-events-api-endpoints.yaml
    - world-events-integrations.yaml
    - world-events-technical-spec.yaml
    - world-events-diagrams.yaml
