metadata:
  id: implementation-global-state-events
  title: 'Global State Events — Типы и структура'
  document_type: implementation
  category: global-state
  status: approved
  version: '1.0.0'
  last_updated: 2025-11-07T06:00:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-07T06:00:00Z
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - global-state
    - event-sourcing
    - catalog
  topics:
    - event-types
    - state-changes
  related_systems:
    - event-store
    - global-state-service
    - analytics-pipeline
  related_documents:
    - id: implementation-global-state-management
      relation: references
    - id: implementation-global-state-sync
      relation: complements
  source: shared/docs/knowledge/implementation/global-state/global-state-events.md
  visibility: internal
  audience:
    - concept
    - backend
    - analytics
  risk_level: medium
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: 'Каталог типов глобальных событий и структура payload были в Markdown и не интегрировались в систему знаний.'
  goal: 'Структурировать микрофичу Global State Events в YAML, описав категории событий, примеры и контракт события.'
  essence: 'Документ фиксирует десять доменных категорий событий, их назначение и JSON-структуру для Event Store и синхронизации.'
  key_points:
    - 'Каталог объединяет Player, Quest, Combat, Economy, Social, World, NPC, Technology, Political и League события.'
    - 'JSON-каркас содержит eventId, aggregate, metadata, контекст сервера и stateChanges.'
    - 'События питают Global State Manager, уведомления и аналитические пайплайны.'
content:
  sections:
    - id: overview
      title: 'Категории событий'
      body: |
        Каталог охватывает десять доменных групп, каждая из которых включает набор ключевых событий для управления прогрессом
        игроков, мира, экономики и соревновательных лиг.
      mechanics_links:
        - mechanics/combat/combat-system-expansion-summary.yaml
      assets: []
    - id: player_quest
      title: 'Player и Quest события'
      body: |
        PLAYER_LEVELED_UP, PLAYER_IMPLANT_INSTALLED, QUEST_BRANCH_ENTERED, QUEST_WORLD_STATE_CHANGED — события,
        обновляющие прогресс, репутацию, флаги и мировое состояние.
      mechanics_links:
        - content/quests/quests-master-list-2020-2093.yaml
      assets: []
    - id: world_npc
      title: 'World, NPC и фракции'
      body: |
        WORLD_EVENT_STARTED, TERRITORY_CAPTURED, FACTION_WAR_ENDED, NPC_FATE_CHANGED управляют территориальной картой,
        войнами и жизненным циклом NPC.
      mechanics_links:
        - mechanics/world/world-bosses-catalog.yaml
      assets: []
    - id: event_structure
      title: 'Структура события'
      body: |
        JSON-структура включает eventId, eventType, aggregateType, aggregateId, eventVersion, correlation/causation, payload,
        metadata, server/player context, stateChanges и affectedPlayers, что обеспечивает аудит и воспроизведение.
      mechanics_links:
        - implementation/global-state/global-state-management.yaml
      assets: []
    - id: integrations
      title: 'Интеграции и аналитика'
      body: |
        Event Store, Global State Manager, Notification Service и Analytics используют каталог для маршрутизации и обработки событий.
        Категории поддерживают синхронизацию, уведомления и LiveOps.
      mechanics_links:
        - implementation-global-state/global-state-operations.yaml
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: true
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-07
    author: ai_brain_manager
    changes: 'Сформирован каталог типов глобальных событий и их структура.'
validation:
  checksum: ''
  schema_version: '1.0'

