# Issue: #143876482
metadata:
  id: city-as-weapon-maintenance-systems-traps-mechanic
  title: 'Механика: «Город как оружие» (системы обслуживания → ловушки)'
  document_type: mechanics
  category: mechanics
  status: draft
  version: '1.0.0'
  last_updated: 2026-01-06T14:45:22Z
  concept_approved: true
  owners:
    - role: game_balance
      contact: balance@necp.game
  tags: [ mechanics, pve, city, traps, maintenance, environmental ]
  github_issue: 143876482
summary:
  problem: Нужен глубокий PvE геймплей с использованием городской инфраструктуры для тактических преимуществ
  goal: Создать систему "Город как оружие" где игрок может превращать городские системы обслуживания в ловушки
  key_points:
    - Преобразование городских систем в оружие
    - Динамическое взаимодействие с окружением
    - Рискованное вмешательство в инфраструктуру
    - Тактические возможности в PvE боях
content:
  core_mechanics:
    system_types:
      utility_systems:
        - power_grid: электрические сети и трансформаторы
        - water_supply: водопроводные системы и гидранты
        - ventilation: системы вентиляции и кондиционирования
        - waste_management: системы утилизации и мусоропроводы
        - lighting_systems: уличное и внутреннее освещение
        - transportation: эскалаторы, лифты, конвейерные системы
      trap_conversion:
        - system_hacking: взлом систем для изменения их поведения
        - sabotage_mechanics: повреждение систем для создания опасных ситуаций
        - overload_induction: перегрузка систем для катастрофических эффектов
        - emergency_activation: активация аварийных протоколов как оружия
    trap_categories:
      environmental_traps:
        - flood_zones: затопление помещений водой под давлением
        - electrical_hazards: электрические разряды и дуги
        - toxic_leaks: утечки химикатов и токсичных веществ
        - structural_collapse: обрушение нестабильных конструкций
        - temperature_extremes: перегрев или заморозка зон
      mobility_traps:
        - elevator_sabotage: падение лифтов или их остановка
        - escalator_reversal: реверс движения эскалаторов
        - door_lockdown: блокирование дверей и выходов
        - conveyor_manipulation: изменение скорости конвейеров
        - ventilation_suction: создание зон с пониженным давлением
      sensory_traps:
        - lighting_manipulation: ослепление или дезориентация светом
        - alarm_overload: ложные тревоги для отвлечения
        - communication_jamming: глушение радиосвязи врагов
        - holographic_distractions: создание ложных целей
  implementation_mechanics:
    system_interaction:
      access_requirements:
        - physical_access: наличие доступа к контрольным панелям
        - hacking_skill: уровень навыка взлома систем
        - tool_availability: специальные инструменты для манипуляции
        - system_integrity: состояние системы (поврежденные легче взломать)
      manipulation_process:
        - reconnaissance_phase: анализ доступных систем в зоне
        - vulnerability_scanning: поиск слабых мест в системах
        - sabotage_execution: выполнение манипуляции
        - effect_activation: активация ловушки и наблюдение за результатами
    risk_factors:
      system_failure:
        - collateral_damage: случайное повреждение союзных систем
        - area_destruction: разрушение зон, нужных для прогресса
        - emergency_response: привлечение служб спасения
        - reputation_penalty: снижение фракционной репутации
      player_exposure:
        - trap_backfire: попадание в собственные ловушки
        - system_instability: непредсказуемое поведение систем
        - detection_risk: привлечение внимания к манипуляциям
        - resource_depletion: трата инструментов и энергии
  balance_parameters:
    system_vulnerabilities:
      base_vulnerability:
        - access_difficulty: базовое время на взлом (5-15 сек)
        - detection_chance: шанс обнаружения манипуляции (10-30%)
        - success_rate: базовый шанс успешного взлома (75-90%)
        - cooldown_penalty: время блокировки после неудачи (30-120 сек)
      vulnerability_modifiers:
        - system_age: старые системы легче взломать (+25% успех)
        - damage_level: поврежденные системы уязвимее (+20% успех)
        - security_level: защищенные системы сложнее (-30% успех)
        - player_skill: уровень навыков влияет на все параметры (±10-50%)
    trap_effectiveness:
      damage_scaling:
        - base_damage: 50-200 единиц урона за ловушку
        - area_coverage: радиус действия (3-15 метров)
        - duration_effect: время действия эффекта (5-60 сек)
        - enemy_count_modifier: бонус за количество пораженных врагов
      strategic_value:
        - positioning_bonus: преимущества в позиционировании
        - enemy_disruption: нарушение тактики врагов
        - escape_opportunities: создание путей отступления
        - combo_potential: синергия с другими механиками
  player_interface:
    system_scanning:
      - radar_overlay: показ доступных систем в зоне
      - vulnerability_indicators: цветовые маркеры уязвимостей
      - effect_preview: предварительный показ эффектов ловушек
      - risk_assessment: оценка шансов успеха и обнаружения
    trap_management:
      - active_traps_display: список активных ловушек
      - timer_indicators: отсчет времени до активации
      - effect_visualization: визуальные эффекты активных ловушек
      - undo_mechanic: возможность отмены неактивированных ловушек
  backend_systems:
    procedural_generation:
      - system_distribution: случайное размещение систем по уровням
      - vulnerability_assignment: динамическое назначение уязвимостей
      - interaction_outcomes: расчет результатов манипуляций
      - environmental_feedback: реакция окружения на изменения
    performance_optimization:
      - area_partitioning: разделение зон для эффективных расчетов
      - effect_caching: кеширование часто используемых эффектов
      - network_synchronization: синхронизация эффектов в мультиплеере
      - resource_management: оптимизация использования системных ресурсов





