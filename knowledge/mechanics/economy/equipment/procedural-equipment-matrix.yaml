# Issue: #62
metadata:
  id: procedural-equipment-matrix
  title: "Procedural Equipment Matrix"
  document_type: mechanics
  category: economy
  status: draft
  version: "1.0.0"
  last_updated: 2025-12-27T12:00:00Z
  concept_approved: false
  concept_reviewed_at: ""
  owners:
    - role: idea-writer
      contact: idea@necp.game
  tags:
    - equipment
    - procedural-generation
    - gear-matrix
    - balancing
  topics:
    - equipment-generation
    - stat-balancing
    - rarity-scaling
  related_systems:
    - economy-service
    - gameplay-service
    - analytics-service
  related_documents:
    - id: procedural-equipment-library
      relation: extends
    - id: equipment-catalog-manual
      relation: references
    - id: economy-pricing-detailed
      relation: integrates
  source: shared/docs/knowledge/mechanics/economy/equipment/procedural-equipment-matrix.md
  visibility: internal
  audience:
    - economy
    - systems
    - balancing
  risk_level: medium
review:
  chain:
    - role: idea-writer
      reviewer: ""
      reviewed_at: ""
      status: pending
  next_actions: [ ]
summary:
  problem: Требовалось создать детальную матрицу параметров для процедурной генерации снаряжения с учетом всех факторов балансировки.
  goal: Определить математические модели, весовые коэффициенты и диапазоны значений для всех типов снаряжения.
  essence: Документ содержит полную матрицу генерации снаряжения с формулами, коэффициентами и правилами валидации.
  key_points:
    - Матрицы охватывают оружие, броню, кибернетику и аксессуары
    - Определены базовые значения, множители редкости и брендовые модификаторы
    - Включены формулы балансировки и ограничения совместимости
    - Поддерживается интеграция с экономической системой
content:
  sections:
    - id: matrix_overview
      title: "Обзор матрицы"
      body: |
        Матрица определяет все параметры процедурной генерации снаряжения. Каждый тип предмета имеет свою подматрицу с базовыми значениями, модификаторами и правилами генерации.
        Все расчеты используют нормализацию по TTK (Time To Kill) для PvE и PvP баланса.
      mechanics_links:
        - mechanics/economy/equipment/procedural-equipment-library.yaml
      assets: [ ]

    - id: weapon_matrix
      title: "Матрица оружия"
      body: |
        Оружие генерируется по типам: пистолеты, автоматы, снайперские винтовки, дробовики, энергетическое оружие.
        Каждый тип имеет уникальные диапазоны характеристик и формулы балансировки.
      mechanics_links:
        - mechanics/combat/combat-shooter-core.yaml
      assets: [ ]

    - id: armor_matrix
      title: "Матрица брони"
      body: |
        Броня включает шлемы, нагрудники, перчатки, штаны, ботинки с защитными характеристиками.
        Балансировка учитывает мобильность, защиту и энергопотребление.
      mechanics_links:
        - mechanics/combat/combat-shooter-core.yaml
      assets: [ ]

    - id: cyberware_matrix
      title: "Матрица кибернетических имплантов"
      body: |
        Импланты делятся на боевые, медицинские, хакерские и утилитарные.
        Включают расчет Humanity cost и рисков деградации.
      mechanics_links:
        - mechanics/combat/combat-cyberpsychosis.yaml
      assets: [ ]

    - id: accessory_matrix
      title: "Матрица аксессуаров"
      body: |
        Аксессуары включают модули, апгрейды и модификаторы.
        Определяют дополнительные эффекты и улучшения.
      mechanics_links:
        - mechanics/combat/combat-implants.yaml
      assets: [ ]

    - id: generation_formulas
      title: "Формулы генерации"
      body: |
        Математические модели для расчета итоговых параметров с учетом всех модификаторов.
        Включают нормализацию, весовые коэффициенты и правила валидации.
      mechanics_links:
        - mechanics/economy/economy-pricing-detailed.yaml
      assets: [ ]

    - id: rarity_scaling
      title: "Масштабирование по редкости"
      body: |
        Множители характеристик для каждого уровня редкости от Common до Artifact.
        Определяют силу предметов и их экономическую ценность.
      mechanics_links:
        - mechanics/economy/loot-tables.yaml
      assets: [ ]

    - id: brand_modifiers
      title: "Брендовые модификаторы"
      body: |
        Специфические бонусы и штрафы для каждого производителя.
        Влияют на сигнатуру предмета и сетовые эффекты.
      mechanics_links:
        - mechanics/economy/equipment/equipment-iconic-timeline.yaml
      assets: [ ]

  weapon_matrix:
    pistol:
      base_stats:
        damage_per_shot: 25-35
        fire_rate: 4-6
        accuracy: 70-85
        stability: 60-80
        penetration: 10-20
        energy_draw: 5-8
      rarity_multipliers:
        common: 1.0
        uncommon: 1.15
        rare: 1.35
        epic: 1.6
        legendary: 1.9
        artifact: 2.2
      brand_modifiers:
        arasaka:
          damage_bonus: 1.1
          accuracy_penalty: -5
        militech:
          fire_rate_bonus: 1.2
          stability_penalty: -10

    assault_rifle:
      base_stats:
        damage_per_shot: 18-25
        fire_rate: 8-12
        accuracy: 60-75
        stability: 50-70
        penetration: 15-25
        energy_draw: 8-12
      rarity_multipliers:
        common: 1.0
        uncommon: 1.12
        rare: 1.28
        epic: 1.48
        legendary: 1.72
        artifact: 2.0
      brand_modifiers:
        kang_tao:
          accuracy_bonus: 1.15
          energy_penalty: -3
        tsunami:
          stability_bonus: 1.1
          damage_penalty: -2

    sniper_rifle:
      base_stats:
        damage_per_shot: 80-120
        fire_rate: 0.5-1.0
        accuracy: 90-98
        stability: 40-60
        penetration: 40-60
        energy_draw: 15-20
      rarity_multipliers:
        common: 1.0
        uncommon: 1.1
        rare: 1.25
        epic: 1.45
        legendary: 1.7
        artifact: 2.0
      brand_modifiers:
        nomad_custom:
          damage_bonus: 1.2
          accuracy_bonus: 1.1
        trauma_team:
          penetration_bonus: 1.15
          stability_penalty: -5

  armor_matrix:
    head_armor:
      base_stats:
        mitigation: 15-25
        resistances:
          ballistic: 10-20
          energy: 8-15
          chemical: 5-12
        stealth_index: -5 - +5
        energy_buffer: 20-40
        humanity_load: 5-10
      rarity_multipliers:
        common: 1.0
        uncommon: 1.1
        rare: 1.25
        epic: 1.45
        legendary: 1.7
        artifact: 2.0
      brand_modifiers:
        arasaka:
          mitigation_bonus: 1.15
          humanity_penalty: -3
        biotechnica:
          energy_buffer_bonus: 1.2
          stealth_penalty: -2

    chest_armor:
      base_stats:
        mitigation: 25-40
        resistances:
          ballistic: 15-30
          energy: 12-25
          chemical: 8-18
        stealth_index: -10 - 0
        energy_buffer: 40-80
        humanity_load: 10-20
      rarity_multipliers:
        common: 1.0
        uncommon: 1.08
        rare: 1.18
        epic: 1.32
        legendary: 1.5
        artifact: 1.75
      brand_modifiers:
        militech:
          ballistic_bonus: 1.2
          energy_penalty: -5
        zetatech:
          energy_buffer_bonus: 1.25
          mitigation_penalty: -5

  cyberware_matrix:
    combat_implant:
      base_stats:
        damage_boost: 10-25
        crit_chance: 5-15
        cooldown: 30-60
        energy_draw: 15-30
        humanity_cost: 20-40
        sync_bonus: 5-15
      rarity_multipliers:
        common: 1.0
        uncommon: 1.1
        rare: 1.25
        epic: 1.45
        legendary: 1.7
        artifact: 2.0
      brand_modifiers:
        arasaka:
          damage_boost_bonus: 1.2
          humanity_penalty: -5
        mox:
          crit_chance_bonus: 1.15
          cooldown_penalty: -10

    hacking_implant:
      base_stats:
        hack_speed: 10-25
        breach_strength: 15-30
        stealth_level: 20-40
        cooldown: 45-90
        energy_draw: 20-35
        humanity_cost: 15-30
      rarity_multipliers:
        common: 1.0
        uncommon: 1.12
        rare: 1.28
        epic: 1.48
        legendary: 1.72
        artifact: 2.0
      brand_modifiers:
        kang_tao:
          breach_strength_bonus: 1.2
          hack_speed_penalty: -5
        tsunami:
          stealth_level_bonus: 1.15
          energy_penalty: -8

  accessory_matrix:
    mod_slot:
      base_stats:
        effect_power: 10-30
        effect_type: "damage/crit/defense/utility"
        slot_compatibility: 70-95
        energy_draw: 5-15
        humanity_load: 2-8
      rarity_multipliers:
        common: 1.0
        uncommon: 1.15
        rare: 1.35
        epic: 1.6
        legendary: 1.9
        artifact: 2.2
      brand_modifiers:
        generic:
          compatibility_bonus: 1.1
        premium:
          effect_power_bonus: 1.2
          energy_penalty: -3

  generation_formulas:
    stat_calculation: "final_stat = base_stat * rarity_multiplier * brand_modifier * random_factor(0.9-1.1)"
    balance_validation: "ttk_normalization = (damage_output / target_health) * fire_rate"
    economy_value: "item_value = sum(final_stats) * rarity_weight * brand_premium"
    compatibility_check: "slot_compatibility >= 80 AND humanity_load <= player_limit"

  validation_rules:
    heat_budget: "total_energy_draw <= player_capacity * 0.8"
    humanity_limit: "total_humanity_cost <= player_max_humanity * 0.9"
    conflict_detection: "no_opposing_brand_modifiers AND no_duplicate_effects"
    progression_gate: "rarity_level <= player_progression_tier + 1"

appendix:
  glossary:
    - term: TTK
      definition: Time To Kill - время, необходимое для уничтожения цели
    - term: Humanity Load
      definition: Нагрузка на человечность игрока от кибернетических имплантов
    - term: Energy Buffer
      definition: Емкость энергетического буфера для поддержания имплантов
  references: [ ]
  decisions:
    - date: 2025-12-27
      decision: "Установлены базовые диапазоны характеристик для всех типов снаряжения"
      rationale: "Обеспечивает баланс между различными типами предметов"
implementation:
  needs_task: false
  github_issue: 62
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: [ ]
history:
  - version: "1.0.0"
    date: 2025-12-27
    author: idea-writer
    changes: "Создана полная матрица процедурной генерации снаряжения со всеми формулами и коэффициентами"
validation:
  checksum: ""
  schema_version: "1.0"
