# Issue: #1788
metadata:
  id: movement-vertical-air-dash-1788
  title: "Вертикалка: air-dash (AGI/END/INT)"
  document_type: mechanics
  category: movement
  status: balanced
  version: "2.0.0"
  last_updated: 2026-01-12T16:30:00Z
  concept_approved: true
  concept_reviewed_at: "2026-01-12T16:30:00Z"
  owners:
    - role: movement_designer
      contact: movement@necp.game
  tags:
    - movement
    - traversal
    - verticality
  topics:
    - agility
    - endurance
  related_systems:
    - gameplay-service
    - physics-engine
    - analytics-service
  visibility: internal
  audience:
    - gameplay
    - movement
    - analytics
  risk_level: medium
summary:
  problem: "Нужен одноразовый air-dash, масштабируемый статами AGI/END/INT."
  goal: "Зафиксировать формулы дальности/скорости, тепло/энергию, кд и риски перегрева."
  essence: "Air-dash: дальность/скорость от AGI, энергозатраты/перегрев от END, кд снижается INT; UX — индикатор тепла/энергии."
content:
  sections:
    - id: formulas
      title: "Формулы и параметры"
      body: |
        • Дальность: base 6 м + AGI*0.12 м, кап 12–14 м.  
        • Скорость: base 18 м/с + AGI*0.18 м/с, кап 30–32 м/с.  
        • Энергия: base 18 ед – END*0.25 ед, минимум 8 ед.  
        • Тепло: base 14 ед – END*0.2 ед; перегрев порог 20 ед (шок/замедление 1.5с).  
        • Кд: base 11с – INT*0.22с, минимум 5с.
      mechanics_links: [ ]
      assets: [ ]
    - id: constraints
      title: "Ограничения и риски"
      body: |
        • Один dash в воздухе; сбрасывается при приземлении/скалолазании.  
        • Перегрев → краткий стан при критике; Endurance снижает шанс стана.  
        • Нельзя использовать при перегрузе энергии/тепла.
      mechanics_links: [ ]
      assets: [ ]
    - id: ux
      title: "UX и индикаторы"
      body: |
        • Полоса энергии и тепло-бар с порогом перегрева.  
        • Предиктивный маркер дальности на прицеле.  
        • Вибро/аудио сигнал при риске перегрева.
      mechanics_links: [ ]
      assets: [ ]
    - id: telemetry
      title: "Телеметрия"
      body: |
        • air_dash_uses, avg_distance, overheat_events, fails (падения).  
        • stamina_energy_spent, cd_reductions_from_int.  
        • Цели: overheat <8% у подготовленных, avg_distance ~9–11 м mid-tier.
      mechanics_links: [ ]
      assets: [ ]
    - id: core_mechanics
      title: "Основная механика air-dash"
      body: |
        ### Концепция:
        Air-dash - это одноразовый импульс движения в воздухе, позволяющий игрокам преодолевать большие расстояния,
        достигать высоких точек или избегать опасности. Механика масштабируется с тремя основными статами:
        AGI (ловкость) влияет на дальность и скорость, END (выносливость) на энергозатраты и перегрев,
        INT (интеллект) на время восстановления.

        ### Состояния использования:
        - **Доступен**: Когда игрок находится в воздухе (после прыжка или падения)
        - **Использован**: Одноразовый до приземления или использования другой вертикальной механики
        - **Восстановление**: После приземления или через кулдаун
        - **Заблокирован**: При перегреве или недостатке энергии

        ### Физика движения:
        - **Импульс**: Мгновенный толчок в выбранном направлении
        - **Траектория**: Прямая линия с возможностью небольшого отклонения
        - **Гравитация**: Воздействует на движение, создавая арочную траекторию
        - **Коллизии**: Прерывается при столкновении с препятствиями
      mechanics_links:
        - mechanics/movement/traversal-system.yaml
        - mechanics/physics/air-movement.yaml
      assets: []
    - id: stat_scaling_formulas
      title: "Формулы масштабирования статов"
      body: |
        ### AGI (Ловкость) - Дальность и скорость:
        ```
        base_distance = 6.0  # метров
        agi_multiplier = 0.12  # метров на единицу AGI
        max_distance = 14.0   # максимальная дальность

        distance = min(base_distance + (AGI * agi_multiplier), max_distance)
        ```

        ```
        base_speed = 18.0     # м/с
        agi_speed_mult = 0.18 # м/с на единицу AGI
        max_speed = 32.0      # максимальная скорость

        speed = min(base_speed + (AGI * agi_speed_mult), max_speed)
        ```

        ### END (Выносливость) - Энергозатраты и перегрев:
        ```
        base_energy_cost = 18.0  # единиц энергии
        end_energy_reduction = 0.25  # снижение на единицу END
        min_energy_cost = 8.0   # минимальная затрата

        energy_cost = max(base_energy_cost - (END * end_energy_reduction), min_energy_cost)
        ```

        ```
        base_heat_gen = 14.0      # единиц тепла
        end_heat_reduction = 0.2   # снижение на единицу END
        overheat_threshold = 20.0  # порог перегрева

        heat_generated = base_heat_gen - (END * end_heat_reduction)
        ```

        ### INT (Интеллект) - Время восстановления:
        ```
        base_cooldown = 11.0     # секунд
        int_cooldown_reduction = 0.22  # секунды на единицу INT
        min_cooldown = 5.0      # минимальное время

        cooldown = max(base_cooldown - (INT * int_cooldown_reduction), min_cooldown)
        ```

        ### Примеры расчета:
        - **Новичок** (AGI:10, END:10, INT:10): 7.2м, 19.8м/с, 15.5 энергии, 12 тепла, 8.8с кд
        - **Средний** (AGI:20, END:20, INT:20): 8.4м, 21.6м/с, 13 энергии, 10 тепла, 6.6с кд
        - **Продвинутый** (AGI:30, END:30, INT:30): 9.6м, 23.4м/с, 10.5 энергии, 8 тепла, 4.4с кд
        - **Максимум** (AGI:40, END:40, INT:40): 10.8м, 25.2м/с, 8 энергии, 6 тепла, 5с кд
      mechanics_links:
        - mechanics/stats/scaling-formulas.yaml
        - mechanics/movement/balance-calculations.yaml
      assets: []
    - id: energy_heat_system
      title: "Система энергии и перегрева"
      body: |
        ### Энергетическая система:
        - **Максимум энергии**: 100 единиц (глобальный запас игрока)
        - **Регенерация**: 5 единиц в секунду в спокойном состоянии
        - **Регенерация в бою**: 2 единицы в секунду
        - **Восстановление**: Полное восстановление при отдыхе/приземлении

        ### Система перегрева:
        - **Максимум тепла**: 100 единиц (локальный счетчик)
        - **Рассеивание**: 8 единиц в секунду
        - **Критический перегрев**: При достижении 100 единиц
        - **Сброс тепла**: Полностью при приземлении

        ### Последствия перегрева:
        - **Легкий перегрев** (20-50 единиц): Замедление движения на 20%
        - **Средний перегрев** (50-80 единиц): Замедление движения на 50% + размытие зрения
        - **Критический перегрев** (80-100 единиц): Полный стан на 1.5 секунды + падение
        - **Полный перегрев** (100+ единиц): Сброс в исходную позицию + штраф к репутации

        ### Риски и предупреждения:
        - **Предиктивные индикаторы**: Показывают потенциальный перегрев до использования
        - **Аварийный сброс**: Возможность прервать dash при обнаружении риска
        - **Защитные механизмы**: Автоматическая отмена при критическом уровне
      mechanics_links:
        - mechanics/energy/energy-management.yaml
        - mechanics/combat/overheat-mechanics.yaml
      assets: []
    - id: usage_constraints
      title: "Ограничения использования"
      body: |
        ### Воздушные ограничения:
        - **Одноразовый**: Только один air-dash за полет
        - **Сброс**: Возобновляется при приземлении или касании поверхности
        - **Комбо**: Не сочетается с другими воздушными механиками одновременно
        - **Высота**: Доступен только при падении/прыжке, не при ходьбе

        ### Ситуационные ограничения:
        - **Перегрузка**: Недоступен при недостатке энергии (< требуемое количество)
        - **Блокировка**: Не работает в зонах с анти-гравитационными полями
        - **Модификаторы**: Влияние имплантов, баффов и дебаффов
        - **Контекст**: Разные правила для PvP/PvE зон

        ### Балансовые ограничения:
        - **Anti-spam**: Максимум 5 использований в минуту
        - **Fair play**: Ограничения в соревновательных режимах
        - **Новички**: Упрощенные правила для новых игроков
        - **Эксперты**: Дополнительные возможности для опытных игроков

        ### Восстановление и сброс:
        - **Приземление**: Полный сброс всех ограничений
        - **Время**: Постепенное восстановление энергии и охлаждение
        - **Баффы**: Возможность ускорения восстановления
        - **Дебаффы**: Замедление восстановления при определенных условиях
      mechanics_links:
        - mechanics/movement/usage-restrictions.yaml
        - mechanics/gameplay/fair-play-limits.yaml
      assets: []
    - id: user_interface
      title: "Пользовательский интерфейс"
      body: |
        ### Основные индикаторы:
        - **Энергетическая полоса**: Показывает текущий уровень энергии (зеленый/желтый/красный)
        - **Тепловая полоса**: Отображает уровень перегрева (синий/оранжевый/красный)
        - **Кулдаун таймер**: Отсчет времени до следующего использования
        - **Статус индикатор**: Показывает доступность air-dash

        ### Предиктивные элементы:
        - **Траектория**: Пунктирная линия показывающая путь dash
        - **Дальность**: Числовая индикация максимальной дистанции
        - **Риски**: Предупреждения о потенциальном перегреве
        - **Оптимальный угол**: Направление для максимальной эффективности

        ### Аудио/визуальные эффекты:
        - **Звуки активации**: Различные звуки в зависимости от силы dash
        - **Визуальные эффекты**: След движения, частицы, световые эффекты
        - **Предупреждения**: Аудио сигналы при риске перегрева
        - **Обратная связь**: Вибрация контроллера при успешном/неуспешном использовании

        ### Настройки кастомизации:
        - **Видимость индикаторов**: Возможность скрытия/показывания элементов UI
        - **Цветовые схемы**: Персонализация цветов полос и эффектов
        - **Звуковые опции**: Включение/выключение звуковых эффектов
        - **Расширенная информация**: Дополнительные метрики для опытных игроков
      mechanics_links:
        - mechanics/ui/movement-indicators.yaml
        - mechanics/audio/movement-feedback.yaml
      assets: []
    - id: balance_considerations
      title: "Балансовые соображения"
      body: |
        ### Риск-вознаграждение баланс:
        - **Низкий риск**: Новички могут использовать безопасно с минимальными последствиями
        - **Средний риск**: Опытные игроки балансируют между эффективностью и перегревом
        - **Высокий риск**: Эксперты могут достичь максимальной эффективности с риском сбоя
        - **Соревновательный баланс**: Ограничения в рейтинговых матчах для fair play

        ### Прогрессия и обучение:
        - **Обучение**: Туториалы объясняют механику и риски
        - **Практика**: Специальные зоны для тренировки air-dash
        - **Прогрессия**: Улучшение навыков со временем и опытом
        - **Фидбек**: Подробная статистика использования и ошибок

        ### Социальные аспекты:
        - **Командная игра**: Возможность использования в составе команды
        - **Контр-механики**: Способы противодействия air-dash противников
        - **Показательность**: Визуальные эффекты для демонстрации мастерства
        - **Сообщество**: Обмен советами и техниками использования

        ### Метагейм соображения:
        - **Мап-дизайн**: Уровни спроектированы с учетом air-dash механики
        - **Баланс классов**: Разные роли получают разные преимущества
        - **Экономика**: Влияние на стоимость имплантов и улучшений
        - **Контент**: Новые возможности для создания интересных ситуаций
      mechanics_links:
        - mechanics/balance/risk-reward-analysis.yaml
        - mechanics/gameplay/progression-systems.yaml
      assets: []
    - id: telemetry_analytics
      title: "Телеметрия и аналитика"
      body: |
        ### Метрики использования:
        - **air_dash_activations**: Количество активаций в сессии/матче
        - **average_distance**: Средняя дальность полета
        - **success_rate**: Процент успешных завершений (без падений)
        - **usage_frequency**: Как часто используется в разных ситуациях

        ### Метрики производительности:
        - **energy_consumption**: Средние затраты энергии
        - **heat_generation**: Генерация тепла и случаи перегрева
        - **cooldown_effectiveness**: Влияние INT на время восстановления
        - **stat_efficiency**: Корреляция между статами и результатами

        ### Метрики баланса:
        - **overheat_incidents**: Частота перегревов по уровням навыков
        - **fall_failures**: Случаи падений из-за ошибок использования
        - **situational_effectiveness**: Эффективность в разных типах контента
        - **player_satisfaction**: Удовлетворенность механикой через опросы

        ### Метрики прогрессии:
        - **skill_improvement**: Как игроки улучшают использование со временем
        - **stat_investment**: Какие статы предпочитают улучшать игроки
        - **combination_usage**: Использование с другими механиками движения
        - **mastery_achievement**: Достижение высокого уровня владения

        ### Аналитические цели:
        - Оптимизация формул для лучшего баланса
        - Выявление проблемных ситуаций и багов
        - Улучшение UX на основе данных использования
        - Поддержание fair play в соревновательных режимах
      mechanics_links:
        - mechanics/analytics/movement-telemetry.yaml
        - mechanics/analytics/balance-tracking.yaml
      assets: []
    - id: integration_implementation
      title: "Интеграция и реализация"
      body: |
        ### Системные интеграции:
        - **Физический движок**: Реализация импульса и траектории движения
        - **Система статов**: Подключение к AGI/END/INT расчетам
        - **Энергетическая система**: Интеграция с глобальным энергобалансом
        - **UI система**: Отображение индикаторов и эффектов

        ### Технические требования:
        - **Производительность**: Минимальное влияние на FPS и сетевую синхронизацию
        - **Сетевая синхронизация**: Корректная репликация на всех клиентах
        - **Анти-чит**: Защита от эксплуатации и нечестного использования
        - **Кроссплатформенность**: Консистентное поведение на всех платформах

        ### Тестирование и валидация:
        - **Юнит-тесты**: Проверка формул и ограничений
        - **Интеграционные тесты**: Взаимодействие с другими системами
        - **Балансовое тестирование**: Проверка fair play и прогрессии
        - **Стресс-тестирование**: Производительность при высокой нагрузке

        ### Мониторинг и поддержка:
        - **Реал-тайм метрики**: Отслеживание использования в продакшене
        - **Баг-трекинг**: Сбор отчетов о проблемах и улучшениях
        - **Балансовые патчи**: Регулярные корректировки на основе данных
        - **Плейер фидбек**: Интеграция отзывов сообщества
      mechanics_links:
        - mechanics/systems/movement-integration.yaml
        - mechanics/testing/movement-validation.yaml
      assets: []
appendix:
  glossary:
    - term: "Air Dash"
      definition: "Одноразовый импульс движения в воздухе, позволяющий преодолевать большие расстояния и достигать высоких точек"
    - term: "Energy Cost"
      definition: "Количество энергии, затрачиваемое на выполнение air-dash, масштабируемое со статом END"
    - term: "Heat Generation"
      definition: "Накопление тепла при использовании air-dash, приводящее к перегреву при превышении порога"
    - term: "Overheat"
      definition: "Состояние, при котором чрезмерное использование air-dash приводит к негативным эффектам на движение игрока"
    - term: "Traversal Mechanics"
      definition: "Система механик передвижения, включающая различные способы преодоления препятствий и расстояний"
  references:
    - id: mechanics/movement/traversal-system
      title: "Система передвижения и преодоления препятствий"
      type: document
    - id: mechanics/stats/scaling-formulas
      title: "Формулы масштабирования статов"
      type: document
    - id: mechanics/energy/energy-management
      title: "Управление энергетическими ресурсами"
      type: document
    - id: mechanics/ui/movement-indicators
      title: "Индикаторы состояния движения"
      type: document
    - id: mechanics/analytics/movement-telemetry
      title: "Телеметрия систем движения"
      type: document
  decisions:
    - rationale: "Air-dash добавляет вертикальность и динамику в передвижение, делая игру более интересной"
      impact: "Повышает вовлеченность игроков, добавляет новые стратегические возможности"
    - rationale: "Система перегрева предотвращает спам и поощряет тактическое использование"
      impact: "Обеспечивает баланс между мощностью и рисками, делает механику более глубокой"
    - rationale: "Масштабирование статов позволяет персонализировать опыт для разных стилей игры"
      impact: "Поддерживает разнообразие билдов, дает игрокам выбор в развитии персонажа"
implementation:
  github_issue: 1788
  needs_task: false
  queue_reference: [ ]
  blockers: [ ]
history:
  - version: "1.0.0"
    date: 2025-12-12
    author: movement_team
    changes: "Добавлен air-dash с формулами AGI/END/INT, теплом и телеметрией."
validation:
  checksum: ""
  schema_version: "1.0"

