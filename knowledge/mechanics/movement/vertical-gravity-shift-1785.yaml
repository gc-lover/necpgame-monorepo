# Issue: #1785
metadata:
  id: movement-vertical-gravity-shift-1785
  title: "Вертикалка: имплант «грави-сдвиг» (TECH+INT/AGI/END)"
  document_type: mechanics
  category: movement
  status: balanced
  version: "2.0.0"
  last_updated: 2026-01-12T18:00:00Z
  concept_approved: true
  concept_reviewed_at: "2026-01-12T18:00:00Z"
  owners:
    - role: movement_designer
      contact: movement@necp.game
  tags:
    - movement
    - gravity
    - implant
  topics:
    - tech
    - agility
    - endurance
  related_systems:
    - gameplay-service
    - physics-engine
    - analytics-service
  visibility: internal
  audience:
    - gameplay
    - movement
    - analytics
  risk_level: high
summary:
  problem: "Нужен имплант-конус пониженной гравитации: сила от TECH+INT, дальность от AGI, перегрев уменьшает END."
  goal: "Определить параметры конуса, длительность, кд, тепло/энергию, риски перегрева/оглушения."
  essence: "Краткий грави-конус: TECH+INT усиливают эффект, AGI увеличивает горизонтальную дистанцию, END снижает перегрев; риск оглушения при критике."
content:
  sections:
    - id: parameters
      title: "Параметры"
      body: |
        • Конус: дальность base 8 м + AGI*0.25 м (кап 14 м); угол 55–70°.  
        • Снижение грави: base 45% + (TECH+INT)*1.2% (кап 80%).  
        • Длительность: base 2.2с + INT*0.08с (кап 4с).  
        • Кд: base 16с – INT*0.25с (мин 8с).  
        • Энергия: base 20 ед – TECH*0.3 (мин 8).  
        • Тепло: base 18 ед – END*0.25; перегрев порог 22 ед → оглушение 1с.
      mechanics_links: [ ]
      assets: [ ]
    - id: risks
      title: "Риски"
      body: |
        • Перегрев при спаме; END снижает шанс/длительность оглушения.  
        • Оглушение блокирует имплант на 6–10с.  
        • Ослабляет импульс при применении на скользких поверхностях (-10% дальность).
      mechanics_links: [ ]
      assets: [ ]
    - id: ux
      title: "UX"
      body: |
        • Предиктивная сетка конуса и снижение грави.  
        • Индикатор тепла/энергии, предупреждение о пороге.  
        • Быстрый отмен импульса (прервать, потеряв энергию).
      mechanics_links: [ ]
      assets: [ ]
    - id: telemetry
      title: "Телеметрия"
      body: |
        • grav_shift_uses, avg_distance, overheating_events, stun_events.  
        • lift_assists (прыжки после сдвига), energy_spent.  
        • Цели: перегрев <10%, средняя дальность ~11–12 м mid-tier.
      mechanics_links: [ ]
      assets: [ ]
    - id: core_mechanics
      title: "Основная механика gravity-shift implant"
      body: |
        ### Концепция:
        Gravity-Shift Implant - это высокотехнологический имплант, создающий конус пониженной гравитации вокруг игрока.
        Механика масштабируется с четырьмя основными статами: TECH и INT усиливают силу эффекта,
        AGI увеличивает дальность и точность применения, END снижает риски перегрева.

        ### Как работает:
        - Игрок активирует имплант, создавая конусовидную зону пониженной гравитации
        - В зоне конуса все объекты (включая игрока) испытывают уменьшенную гравитацию
        - Игрок может использовать это для высоких прыжков, замедленного падения, или помощи союзникам
        - Эффект длится ограниченное время, после чего следует период восстановления

        ### Стратегические применения:
        - **Вертикальная мобильность**: Высокие прыжки и безопасное падение
        - **Тактическое преимущество**: Помощь союзникам в достижении труднодоступных позиций
        - **Экстренное спасение**: Вытаскивание из опасных ситуаций
        - **Командная координация**: Синхронизированные прыжки группы
      mechanics_links:
        - mechanics/movement/traversal-system.yaml
        - mechanics/implant/implant-system.yaml
      assets: []

    - id: stat_scaling_formulas
      title: "Формулы масштабирования статов"
      body: |
        ### TECH (Технологии) - Качество импланта и эффективность:
        ```
        base_gravity_reduction = 45.0  # % базового снижения гравитации
        tech_gravity_mult = 1.2        # % на единицу TECH
        max_gravity_reduction = 80.0   # максимальное снижение

        gravity_reduction = min(base_gravity_reduction + (TECH * tech_gravity_mult), max_gravity_reduction)
        ```

        ```
        energy_cost = 20.0       # базовая стоимость энергии
        tech_energy_reduction = 0.3  # снижение на единицу TECH
        min_energy_cost = 8.0     # минимальная стоимость

        energy_cost = max(energy_cost - (TECH * tech_energy_reduction), min_energy_cost)
        ```

        ### INT (Интеллект) - Контроль и длительность:
        ```
        base_duration = 2.2     # секунды базовой длительности
        int_duration_mult = 0.08 # секунды на единицу INT
        max_duration = 4.0      # максимальная длительность

        duration = min(base_duration + (INT * int_duration_mult), max_duration)
        ```

        ```
        cooldown = 16.0        # секунды базового кд
        int_cooldown_reduction = 0.25  # секунды на единицу INT
        min_cooldown = 8.0     # минимальный кд

        cooldown = max(cooldown - (INT * int_cooldown_reduction), min_cooldown)
        ```

        ### AGI (Ловкость) - Дальность и точность:
        ```
        base_range = 8.0       # метров базовой дальности
        agi_range_mult = 0.25   # метры на единицу AGI
        max_range = 14.0       # максимальная дальность

        range = min(base_range + (AGI * agi_range_mult), max_range)
        ```

        ```
        cone_angle = 60.0      # градусов базового угла
        agi_angle_bonus = 0.5   # градуса на единицу AGI
        max_angle = 75.0       # максимальный угол

        cone_angle = min(cone_angle + (AGI * agi_angle_bonus), max_angle)
        ```

        ### END (Выносливость) - Устойчивость к перегреву:
        ```
        base_heat_generation = 18.0  # единицы базового тепла
        end_heat_reduction = 0.25    # снижение на единицу END
        min_heat_generation = 8.0    # минимальное тепло

        heat_generation = max(base_heat_generation - (END * end_heat_reduction), min_heat_generation)
        ```

        ```
        stun_duration = 1.0      # секунды базового оглушения
        end_stun_reduction = 0.08  # секунды на единицу END
        min_stun_duration = 0.3   # минимальное оглушение

        stun_duration = max(stun_duration - (END * end_stun_reduction), min_stun_duration)
        ```

        ### Примеры расчета:
        - **Новичок** (TECH:10, INT:10, AGI:10, END:10): 57% гравитация, 3с длительность, 10.5м дальность, 15.5 тепла
        - **Средний** (TECH:20, INT:20, AGI:20, END:20): 69% гравитация, 3.8с длительность, 13м дальность, 13 тепла
        - **Продвинутый** (TECH:30, INT:30, AGI:30, END:30): 80% гравитация, 4с длительность, 14м дальность, 10.5 тепла
        - **Максимум** (TECH:40, INT:40, AGI:40, END:40): 80% гравитация, 4с длительность, 14м дальность, 8 тепла
      mechanics_links:
        - mechanics/stats/scaling-formulas.yaml
        - mechanics/implant/implant-balance.yaml
      assets: []

    - id: implant_physics
      title: "Физика и взаимодействие gravity-shift"
      body: |
        ### Физическая модель:
        - **Гравитационный конус**: Коническая зона с плавным градиентом эффекта
        - **Центр эффекта**: Максимальное снижение гравитации в центре конуса
        - **Градиент силы**: Эффект уменьшается к краям конуса
        - **Динамическое позиционирование**: Конус следует за игроком

        ### Взаимодействие с окружением:
        - **Вертикальные поверхности**: Эффект усиливается при контакте со стенами
        - **Несколько игроков**: Совместное использование в зоне конуса
        - **Динамические объекты**: Влияние на падающие предметы и снаряды
        - **Экстремальные условия**: Изменение эффекта в разных биомах

        ### Игровые взаимодействия:
        - **PvP элементы**: Возможность саботажа чужого gravity-shift
        - **Командная синергия**: Усиление эффекта при групповом использовании
        - **Предметы и способности**: Комбинация с другими имплантами
        - **Экономические аспекты**: Стоимость энергии и материалов

        ### Безопасность и ограничения:
        - **Максимальная высота**: Предотвращение выхода за пределы карты
        - **Скоростные лимиты**: Ограничение максимальной скорости падения
        - **Энергетические барьеры**: Автоматическое отключение при низкой энергии
        - **Временные ограничения**: TTL для предотвращения перманентного эффекта
      mechanics_links:
        - mechanics/physics/gravity-physics.yaml
        - mechanics/environment/interaction-system.yaml
      assets: []

    - id: risk_management_system
      title: "Система рисков и перегрева"
      body: |
        ### Механизмы перегрева:
        - **Накопление тепла**: Каждое использование добавляет тепло в имплант
        - **Рассеивание**: Постепенное снижение тепла со временем
        - **Критический порог**: При превышении - оглушение и временный сбой
        - **Восстановление**: Медленное восстановление после перегрева

        ### Физические последствия:
        - **Оглушение**: Временная потеря контроля над персонажем
        - **Сбой импланта**: Отключение на период восстановления
        - **Физический урон**: Возможные травмы при падении во время оглушения
        - **Моральный эффект**: Психологическое воздействие на игрока

        ### Стратегические риски:
        - **Предсказуемость**: Видимый конус делает игрока уязвимым
        - **Энергетические затраты**: Высокая стоимость ограничивает использование
        - **Временные ограничения**: Длительный кд после перегрева
        - **Тактическая уязвимость**: Игрок неподвижен во время активации

        ### Меры предотвращения:
        - **Мониторинг состояния**: Индикаторы тепла и предупреждения
        - **Аварийное отключение**: Возможность прервать эффект досрочно
        - **Защитные модификации**: Улучшения снижающие риск перегрева
        - **Тренировочные режимы**: Безопасное обучение в тренировочных зонах
      mechanics_links:
        - mechanics/combat/risk-assessment.yaml
        - mechanics/implant/implant-safety.yaml
      assets: []

    - id: user_interface_design
      title: "Пользовательский интерфейс"
      body: |
        ### Основные индикаторы:
        - **Статус импланта**: Уровень энергии, тепла и готовность
        - **Зона эффекта**: Предиктивное отображение конуса гравитации
        - **Параметры эффекта**: Текущие значения силы, длительности, дальности
        - **Предупреждения**: Уведомления о приближающемся перегреве

        ### Визуальные эффекты:
        - **Гравитационный конус**: Полупрозрачный конус показывающий зону действия
        - **Частицы эффекта**: Визуализация пониженной гравитации в зоне
        - **Тепловые индикаторы**: Цветовые изменения при нагреве импланта
        - **Анимации**: Плавные переходы при активации и деактивации

        ### Аудио сопровождение:
        - **Звуки активации**: Характерный звук при включении эффекта
        - **Предупреждающие сигналы**: Звуки при приближении к перегреву
        - **Эффекты окружения**: Изменение звуков в зоне пониженной гравитации
        - **Обратная связь**: Аудио подтверждение успешных действий

        ### Настройки интерфейса:
        - **Кастомизация**: Возможность настройки внешнего вида индикаторов
        - **Уровень детализации**: Настройка количества отображаемой информации
        - **Акселерометрия**: Вибрация для тактильной обратной связи
        - **Доступность**: Настройки для игроков с ограниченными возможностями
      mechanics_links:
        - mechanics/ui/implant-interface.yaml
        - mechanics/ui/visual-effects.yaml
      assets: []

    - id: balance_considerations
      title: "Балансовые соображения"
      body: |
        ### Риск-вознаграждение баланс:
        - **Высокая мобильность**: Значительное преимущество в вертикальном перемещении
        - **Ограниченные ресурсы**: Высокая стоимость энергии ограничивает использование
        - **Риск перегрева**: Возможность временной потери контроля добавляет напряжение
        - **Зависимость от статов**: Требует инвестиций в TECH/INT для эффективности

        ### Прогрессия и развитие:
        - **Обучение механике**: Постепенное введение сложности через уровни
        - **Улучшение импланта**: Модификации снижающие риски и улучшающие параметры
        - **Навык игрока**: Улучшение контроля через опыт использования
        - **Специализация**: Разные билды фокусирующиеся на разных аспектах

        ### Метагейм факторы:
        - **Мап дизайн**: Размещение элементов учитывающее возможности gravity-shift
        - **Баланс классов**: Влияние на эффективность разных специализаций
        - **Экономика**: Стоимость энергии влияет на частоту использования
        - **Контент дизайн**: Интеграция в квесты и миссии

        ### Социальные аспекты:
        - **Командная игра**: Возможность помощи союзникам в сложных ситуациях
        - **Конкуренция**: PvP применение для тактических преимуществ
        - **Показательность**: Визуальные эффекты демонстрирующие мастерство
        - **Сообщество**: Обмен техниками и стратегиями использования
      mechanics_links:
        - mechanics/balance/risk-reward-analysis.yaml
        - mechanics/gameplay/progression-systems.yaml
      assets: []

    - id: telemetry_analytics
      title: "Телеметрия и аналитика"
      body: |
        ### Метрики использования:
        - **gravity_shift_activations**: Количество активаций в сессии/матче
        - **average_duration**: Средняя длительность использования эффекта
        - **energy_consumption**: Общее потребление энергии на имплант
        - **heat_accumulation**: Накопление тепла и частота перегревов

        ### Метрики производительности:
        - **jump_height_achieved**: Достигнутая высота прыжков
        - **fall_damage_prevented**: Предотвращенный урон от падений
        - **team_assists**: Помощь союзникам через gravity-shift
        - **stun_events**: Количество оглушений от перегрева

        ### Метрики баланса:
        - **stat_distribution**: Распределение игроков по уровням статов
        - **usage_frequency**: Как часто используется в разных типах контента
        - **situational_effectiveness**: Эффективность в разных сценариях
        - **player_satisfaction**: Удовлетворенность механикой

        ### Метрики вовлеченности:
        - **session_time**: Время проведенное в вертикальном перемещении
        - **learning_curve**: Скорость освоения механики новыми игроками
        - **strategic_depth**: Использование в составе тактических комбинаций
        - **replay_value**: Мотивация к повторному прохождению контента

        ### Аналитические цели:
        - Оптимизация формул для лучшего баланса между рисками и преимуществами
        - Выявление проблемных ситуаций и багов в физике гравитации
        - Улучшение UX на основе данных о перегревах и использовании
        - Поддержание справедливой конкуренции в PvP сценариях
      mechanics_links:
        - mechanics/analytics/implant-telemetry.yaml
        - mechanics/analytics/balance-metrics.yaml
      assets: []

    - id: integration_implementation
      title: "Интеграция и реализация"
      body: |
        ### Системные интеграции:
        - **Физический движок**: Реализация гравитационного конуса и взаимодействия
        - **Имплант система**: Интеграция с системой имплантов и апгрейдов
        - **Энергетическая система**: Синхронизация с потреблением энергии
        - **Повреждения система**: Обработка оглушений и физического урона

        ### Технические требования:
        - **Производительность**: Минимальное влияние на FPS при активном эффекте
        - **Сетевая синхронизация**: Корректная репликация эффекта для всех игроков
        - **Физическая точность**: Реалистичное поведение гравитации и движения
        - **Масштабируемость**: Поддержка множественных одновременных эффектов

        ### Тестирование и валидация:
        - **Физическое тестирование**: Проверка реалистичности гравитационных эффектов
        - **Балансовое тестирование**: Валидация формул и рисков перегрева
        - **Интеграционное тестирование**: Проверка совместимости с другими системами
        - **Стресс-тестирование**: Производительность при множественных активациях

        ### Мониторинг и поддержка:
        - **Реал-тайм метрики**: Отслеживание использования и проблем
        - **Игрок обратная связь**: Сбор отзывов о балансе и UX
        - **Балансовые патчи**: Регулярные корректировки на основе данных
        - **Техническая поддержка**: Помощь с проблемами импланта
      mechanics_links:
        - mechanics/systems/implant-integration.yaml
        - mechanics/testing/gravity-shift-validation.yaml
      assets: []
appendix:
  glossary:
    - term: "Gravity-Shift Implant"
      definition: "Высокотехнологический имплант, создающий конус пониженной гравитации для улучшения вертикальной мобильности"
    - term: "Gravity Cone"
      definition: "Коническая зона действия импланта gravity-shift, где гравитация понижена на определенный процент"
    - term: "Heat Generation"
      definition: "Накопление тепла в импланте при каждом использовании, приводящее к перегреву при превышении порога"
    - term: "Stun Event"
      definition: "Временная потеря контроля над персонажем при перегреве импланта, вызывающая оглушение"
    - term: "Energy Cost"
      definition: "Количество энергии, потребляемое имплантом при каждой активации gravity-shift эффекта"
  references:
    - id: mechanics/movement/traversal-system
      title: "Система передвижения и преодоления препятствий"
      type: document
    - id: mechanics/implant/implant-system
      title: "Система имплантов и модификаций"
      type: document
    - id: mechanics/stats/scaling-formulas
      title: "Формулы масштабирования характеристик"
      type: document
    - id: mechanics/physics/gravity-physics
      title: "Физическая модель гравитации и движения"
      type: document
    - id: mechanics/analytics/implant-telemetry
      title: "Телеметрия систем имплантов"
      type: document
  decisions:
    - rationale: "Gravity-shift добавляет вертикальность и риск в мобильность"
      impact: "Увеличивает стратегическую глубину, поощряет осторожное использование"
    - rationale: "Система перегрева предотвращает спам и добавляет напряжение"
      impact: "Балансирует мощный эффект с потенциальными последствиями"
    - rationale: "Масштабирование статов позволяет персонализировать стиль игры"
      impact: "Поддерживает разнообразие билдов и стратегических подходов"
implementation:
  github_issue: 1785
  needs_task: false
  queue_reference: [ ]
  blockers: [ ]
history:
  - version: "1.0.0"
    date: 2025-12-12
    author: movement_team
    changes: "Имплант грави-сдвига: конус, параметры TECH/INT/AGI/END, риски перегрева, телеметрия."
validation:
  checksum: ""
  schema_version: "1.0"

