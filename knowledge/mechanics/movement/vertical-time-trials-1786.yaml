# Issue: #1786
metadata:
  id: movement-vertical-time-trials-1786
  title: "Вертикальные тайм-триалы (AGI/END классификации)"
  document_type: mechanics
  category: movement
  status: balanced
  version: "2.0.0"
  last_updated: 2026-01-12T17:30:00Z
  concept_approved: true
  concept_reviewed_at: "2026-01-12T17:30:00Z"
  owners:
    - role: movement_designer
      contact: movement@necp.game
  tags:
    - movement
    - verticality
    - leaderboards
  topics:
    - agility
    - endurance
  related_systems:
    - gameplay-service
    - analytics-service
    - leaderboard-service
  visibility: internal
  audience:
    - gameplay
    - movement
    - analytics
  risk_level: medium
summary:
  problem: "Нужны вертикальные полосы/тайм-триалы с классами по AGI/END и бонусом за «тяжёлый» билд."
  goal: "Определить маршруты, допуски по статам, фантомы лидеров, награды и телеметрию."
  essence: "Классы допуска (AGI/END/STR пороги), фантомы лидеров, бонус за прохождение в тяжёлом билде (низкий AGI, высокий STR/END)."
content:
  sections:
    - id: routes
      title: "Маршруты и фантомы"
      body: |
        • Городские вертикальные полосы с чекпоинтами.  
        • Фантомы лидеров по классу допуска; скачивание фантома для тренировки.  
        • Варианты трасс: скорость, техничность, «тяжёлый» маршрут.
      mechanics_links: [ ]
      assets: [ ]
    - id: classes
      title: "Классы допуска"
      body: |
        • Классы по порогам:  
          - Light: AGI ≥ 14, END ≥ 8  
          - Balanced: AGI ≥ 10, END ≥ 10, STR ≥ 8  
          - Heavy Bonus: AGI ≤ 9, END ≥ 14, STR ≥ 12 (бонус награды)  
        • Проверка статов при входе на трассу.
      mechanics_links: [ ]
      assets: [ ]
    - id: rewards
      title: "Награды"
      body: |
        • Косметика/титулы/трофеи; бонус за Heavy clear.  
        • Лидерборды по классам; недельные ротации.
      mechanics_links: [ ]
      assets: [ ]
    - id: telemetry
      title: "Телеметрия"
      body: |
        • attempts, clears, best_time, class_distribution.  
        • heavy_bonus_clears, fall_events, retries_per_checkpoint.  
        • Цели: healthy retry loop, видимость «тяжёлых» прохождений.
      mechanics_links: [ ]
      assets: [ ]
    - id: core_mechanics
      title: "Основная механика time trials"
      body: |
        ### Концепция:
        Vertical Time Trials - это соревновательные вертикальные маршруты, где игроки преодолевают городские препятствия,
        используя различные техники передвижения. Механика масштабируется с тремя основными статами:
        AGI (ловкость) влияет на скорость и технику, END (выносливость) на устойчивость,
        STR (сила) на возможность использования "тяжелых" техник.

        ### Типы трасс:
        - **Speed Trials**: Фокус на максимальной скорости, прямые маршруты
        - **Technical Trials**: Сложные маршруты с множеством техник
        - **Heavy Trials**: Бонусные маршруты для "тяжелых" билдов с низким AGI
        - **Mixed Trials**: Комбинация скорости и техники

        ### Игровой процесс:
        - Игрок начинает на стартовой платформе
        - Проходит через серию чекпоинтов
        - Использует различные вертикальные механики (wall-run, zipline, air-dash и т.д.)
        - Финиширует на верхней точке
        - Время фиксируется для рейтинга
      mechanics_links:
        - mechanics/movement/traversal-system.yaml
        - mechanics/leaderboard/scoring-system.yaml
      assets: []

    - id: stat_requirements_system
      title: "Система требований к статам"
      body: |
        ### Классовая система:
        ```
        Light Class (AGI-focused):
        - AGI: ≥ 14 (primary requirement)
        - END: ≥ 8 (minimum stamina)
        - STR: ≥ 6 (minimum strength)
        - Bonus: +10% speed on technical sections
        - Suitable for: Fast, agile characters

        Balanced Class (All-around):
        - AGI: ≥ 10 (good agility)
        - END: ≥ 10 (good stamina)
        - STR: ≥ 8 (moderate strength)
        - Bonus: +5% overall performance
        - Suitable for: Versatile characters

        Heavy Class (STR/END-focused):
        - AGI: ≤ 9 (low agility requirement)
        - END: ≥ 14 (high stamina)
        - STR: ≥ 12 (high strength)
        - Bonus: 2x reward multiplier + exclusive leaderboards
        - Suitable for: Tanky, strong characters
        ```

        ### Динамические требования:
        - **Entry Check**: Статы проверяются при входе на трассу
        - **Class Assignment**: Автоматическое определение класса по статам
        - **Multiple Classes**: Игрок может участвовать в нескольких классах
        - **Progression**: Требования могут снижаться со временем для доступности

        ### Балансовые соображения:
        - **Fair Competition**: Разные классы конкурируют отдельно
        - **Reward Scaling**: Heavy класс получает повышенные награды
        - **Difficulty Adjustment**: Трассы оптимизированы для разных классов
        - **Meta Progression**: Игроки могут прокачивать статы для лучших классов
      mechanics_links:
        - mechanics/stats/character-progression.yaml
        - mechanics/balance/class-system.yaml
      assets: []

    - id: route_design_system
      title: "Система дизайна маршрутов"
      body: |
        ### Структура трасс:
        - **Start Platform**: Исходная точка с информацией о трассе
        - **Checkpoint System**: Промежуточные точки для измерения прогресса
        - **Technical Sections**: Области с повышенной сложностью
        - **Rest Areas**: Опциональные зоны для восстановления
        - **Finish Platform**: Конечная точка с результатами

        ### Типы препятствий:
        - **Wall-run Sections**: Бег по вертикальным поверхностям
        - **Zipline Anchors**: Точки крепления для тросов
        - **Air-dash Opportunities**: Воздушные импульсы для дальних прыжков
        - **Climbable Surfaces**: Стены и карнизы для лазания
        - **Swing Points**: Точки для раскачки

        ### Дизайн принципы:
        - **Flow**: Естественное течение движения между секциями
        - **Risk-Reward**: Опасные короткие пути vs безопасные длинные
        - **Skill Expression**: Возможность показать мастерство разных стилей
        - **Replayability**: Множество путей и техник прохождения
        - **Accessibility**: Подходит для разных уровней навыков

        ### Динамические элементы:
        - **Weather Effects**: Изменение условий прохождения
        - **Crowd Control**: Другие игроки могут мешать прохождению
        - **Time Pressure**: Дополнительные вызовы при повторных прохождениях
        - **Power-ups**: Временные усиления для экспериментов
      mechanics_links:
        - mechanics/level-design/vertical-navigation.yaml
        - mechanics/gameplay/flow-design.yaml
      assets: []

    - id: ghost_phantom_system
      title: "Система фантомов и призраков"
      body: |
        ### Типы фантомов:
        - **Personal Best**: Собственный рекорд игрока
        - **Class Leaders**: Лучшие времена в классе игрока
        - **Global Leaders**: Абсолютные лидеры по всем классам
        - **Friend Ghosts**: Рекорды друзей и знакомых
        - **Historical Ghosts**: Знаменитые прохождения

        ### Функциональность фантомов:
        - **Visual Representation**: Полупрозрачные модели показывают оптимальный путь
        - **Time Synchronization**: Синхронизация с временем игрока
        - **Comparison Mode**: Параллельное отображение с фантомом
        - **Learning Tool**: Помогает изучать оптимальные техники

        ### Скачивание и хранение:
        - **Download System**: Возможность скачать понравившиеся фантомы
        - **Local Storage**: Хранение до 50 фантомов на устройство
        - **Sharing**: Возможность поделиться своими фантомами
        - **Privacy Controls**: Настройки видимости собственных фантомов

        ### Продвинутые возможности:
        - **Speed Analysis**: Разбор скорости по секциям
        - **Technique Breakdown**: Анализ используемых техник
        - **Improvement Suggestions**: Советы по улучшению времени
        - **Historical Data**: Прогресс фантома со временем
      mechanics_links:
        - mechanics/leaderboard/ghost-system.yaml
        - mechanics/training/learning-tools.yaml
      assets: []

    - id: reward_progression_system
      title: "Система наград и прогрессии"
      body: |
        ### Типы наград:
        - **Cosmetic Rewards**: Скины, эффекты, анимации
        - **Title System**: Специальные звания за достижения
        - **Trophy Collection**: Коллекционные предметы
        - **Currency Bonuses**: Дополнительные eddies и ресурсы

        ### Классовые бонусы:
        ```
        Light Class Bonuses:
        - Speed-focused cosmetics
        - Agility-enhancing titles
        - Technical achievement trophies

        Balanced Class Bonuses:
        - Versatile cosmetic sets
        - All-around titles
        - General achievement rewards

        Heavy Class Bonuses (2x multiplier):
        - Tank-themed cosmetics
        - Strength-focused titles
        - Exclusive heavy-build trophies
        - Bonus currency rewards
        ```

        ### Прогрессионные награды:
        - **Personal Records**: Награды за улучшение личных рекордов
        - **Class Rankings**: Бонусы за позиции в классе
        - **Seasonal Rewards**: Специальные награды за сезонные достижения
        - **Community Goals**: Коллективные награды за командные успехи

        ### Экономическая система:
        - **Entry Fees**: Небольшие взносы за участие
        - **Prize Pools**: Распределение наград между топ-игроками
        - **Sponsor Rewards**: Дополнительные бонусы от корпораций
        - **Market Integration**: Возможность торговать наградами
      mechanics_links:
        - mechanics/rewards/cosmetic-system.yaml
        - mechanics/economy/prize-system.yaml
      assets: []

    - id: leaderboard_competition_system
      title: "Система лидербордов и соревнований"
      body: |
        ### Структура лидербордов:
        - **Global Leaderboards**: Мировые рейтинги по классам
        - **Regional Leaderboards**: Региональные рейтинги
        - **Friend Leaderboards**: Рейтинги среди друзей
        - **Seasonal Leaderboards**: Временные соревнования

        ### Классификация результатов:
        - **Time-based Rankings**: Основной критерий - время прохождения
        - **Style Points**: Бонусы за техничность прохождения
        - **Completion Bonuses**: Премии за чистое прохождение
        - **Streak Rewards**: Бонусы за последовательные успехи

        ### Соревновательные форматы:
        - **Daily Challenges**: Ежедневные испытания с уникальными наградами
        - **Weekly Tournaments**: Недельные соревнования с призовыми фондами
        - **Seasonal Championships**: Долгосрочные чемпионаты
        - **Community Events**: Специальные события сообщества

        ### Социальные возможности:
        - **Spectator Mode**: Просмотр прохождений других игроков
        - **Challenge System**: Вызов друзей на дуэль
        - **Team Competitions**: Командные соревнования
        - **Streaming Integration**: Поддержка стримов и записей
      mechanics_links:
        - mechanics/leaderboard/global-ranking.yaml
        - mechanics/social/competition-system.yaml
      assets: []

    - id: balance_difficulty_system
      title: "Система баланса и сложности"
      body: |
        ### Адаптивная сложность:
        - **Dynamic Scaling**: Автоматическая подстройка под уровень игрока
        - **Progressive Difficulty**: Увеличение сложности со временем
        - **Personalized Challenges**: Индивидуальные испытания
        - **Group Scaling**: Баланс для разных размеров групп

        ### Fair play механизмы:
        - **Cheat Detection**: Системы обнаружения нечестной игры
        - **Time Validation**: Проверка реалистичности времен
        - **Route Verification**: Контроль использования разрешенных путей
        - **Stat Verification**: Проверка соответствия классовым требованиям

        ### Доступность и инклюзивность:
        - **Beginner Mode**: Упрощенные версии для новичков
        - **Accessibility Options**: Настройки для игроков с ограниченными возможностями
        - **Learning Curve**: Постепенное введение сложных механик
        - **Alternative Paths**: Множество способов прохождения

        ### Мета-баланс:
        - **Power Creep Management**: Контроль за чрезмерным усилением
        - **Content Rotation**: Регулярное обновление трасс и механик
        - **Player Feedback**: Интеграция отзывов сообщества
        - **Data-driven Balance**: Использование телеметрии для корректировок
      mechanics_links:
        - mechanics/balance/adaptive-difficulty.yaml
        - mechanics/accessibility/inclusive-design.yaml
      assets: []

    - id: telemetry_analytics
      title: "Телеметрия и аналитика"
      body: |
        ### Метрики прохождения:
        - **attempts_per_session**: Количество попыток за сессию
        - **completion_rate**: Процент успешных прохождений
        - **average_completion_time**: Среднее время на прохождение
        - **best_times_distribution**: Распределение лучших времен

        ### Метрики производительности:
        - **technique_usage**: Частота использования разных техник
        - **fall_events**: Количество падений и их причины
        - **retry_patterns**: Поведение при неудачах
        - **learning_progress**: Улучшение со временем

        ### Метрики вовлеченности:
        - **session_duration**: Время, проведенное в time trials
        - **return_rate**: Частота возвращения к контенту
        - **social_interactions**: Общение и соревнования с друзьями
        - **content_consumption**: Просмотр фантомов и записей

        ### Метрики баланса:
        - **class_distribution**: Распределение игроков по классам
        - **difficulty_perception**: Субъективная оценка сложности
        - **reward_satisfaction**: Удовлетворенность наградами
        - **fairness_rating**: Оценка справедливости системы

        ### Аналитические цели:
        - Оптимизация дизайна трасс для лучшего flow
        - Баланс между классами и их привлекательностью
        - Улучшение обучения и прогрессии игроков
        - Поддержание долгосрочного интереса к контенту
      mechanics_links:
        - mechanics/analytics/player-behavior.yaml
        - mechanics/analytics/balance-metrics.yaml
      assets: []

    - id: integration_implementation
      title: "Интеграция и реализация"
      body: |
        ### Системные интеграции:
        - **Movement Engine**: Интеграция с системой передвижения
        - **Leaderboard Service**: Синхронизация результатов
        - **Reward System**: Автоматическое начисление наград
        - **Analytics Pipeline**: Сбор и обработка телеметрии

        ### Технические требования:
        - **Network Synchronization**: Корректная синхронизация фантомов
        - **Performance Optimization**: Минимальное влияние на FPS
        - **Storage Management**: Эффективное хранение фантомов
        - **Cross-platform**: Консистентность на всех платформах

        ### Тестирование и валидация:
        - **Playtesting**: Обширное тестирование с игроками
        - **Balance Testing**: Проверка fair play между классами
        - **Performance Testing**: Нагрузочное тестирование
        - **Accessibility Testing**: Проверка инклюзивности

        ### Мониторинг и поддержка:
        - **Live Metrics**: Реальное время отслеживание метрик
        - **Player Support**: Помощь с техническими проблемами
        - **Content Updates**: Регулярные обновления трасс
        - **Community Management**: Работа с обратной связью
      mechanics_links:
        - mechanics/systems/leaderboard-integration.yaml
        - mechanics/testing/time-trial-validation.yaml
      assets: []
appendix:
  glossary:
    - term: "Vertical Time Trials"
      definition: "Соревновательные вертикальные маршруты, где игроки преодолевают городские препятствия за минимальное время"
    - term: "Class System"
      definition: "Система классификации игроков по статам AGI/END/STR, определяющая доступные трассы и награды"
    - term: "Ghost Phantom"
      definition: "Виртуальная запись прохождения трассы лучшим игроком, используемая для обучения и сравнения"
    - term: "Heavy Class Bonus"
      definition: "Удвоенные награды за прохождение трасс игроками с низким AGI и высоким STR/END"
    - term: "Checkpoint System"
      definition: "Промежуточные контрольные точки на трассе для измерения прогресса и предотвращения читов"
  references:
    - id: mechanics/movement/traversal-system
      title: "Система передвижения и преодоления препятствий"
      type: document
    - id: mechanics/leaderboard/scoring-system
      title: "Система подсчета очков и рейтингов"
      type: document
    - id: mechanics/stats/character-progression
      title: "Прогрессия характеристик персонажа"
      type: document
    - id: mechanics/level-design/vertical-navigation
      title: "Дизайн вертикальной навигации уровней"
      type: document
    - id: mechanics/analytics/player-behavior
      title: "Аналитика поведения игроков"
      type: document
  decisions:
    - rationale: "Class system добавляет глубину прогрессии и разнообразие билдов"
      impact: "Позволяет игрокам специализироваться и конкурировать в разных категориях"
    - rationale: "Heavy class bonus поощряет нестандартные билды"
      impact: "Добавляет стратегическую глубину и разнообразие игровых стилей"
    - rationale: "Ghost system помогает обучению и повышает вовлеченность"
      impact: "Улучшает опыт обучения и социальную конкуренцию"
implementation:
  github_issue: 1786
  needs_task: false
  queue_reference: [ ]
  blockers: [ ]
history:
  - version: "1.0.0"
    date: 2025-12-12
    author: movement_team
    changes: "Тайм-триалы вертикалки: маршруты, классы AGI/END/STR, фантомы, награды, телеметрия."
validation:
  checksum: ""
  schema_version: "1.0"

