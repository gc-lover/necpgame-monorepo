# Issue: #1783
metadata:
  id: movement-vertical-wall-run-1783
  title: "Вертикалка: wall-run с поворотом 90° (AGI+END, INT)"
  document_type: mechanics
  category: movement
  status: balanced
  version: "2.0.0"
  last_updated: 2026-01-12T18:30:00Z
  concept_approved: true
  concept_reviewed_at: "2026-01-12T18:30:00Z"
  owners:
    - role: movement_designer
      contact: movement@necp.game
  tags:
    - movement
    - traversal
    - wall-running
    - acrobatics
  topics:
    - agility
    - endurance
    - wall-movement
  related_systems:
    - gameplay-service
    - physics-engine
    - analytics-service
  visibility: internal
  audience:
    - gameplay
    - movement
    - analytics
  risk_level: medium
summary:
  problem: "Нужен wall-run с резким поворотом 90°: дальность от AGI+END, точность от INT."
  goal: "Определить параметры бега по стене, повороты, физику и риски падения."
  essence: "Wall-run с 90° поворотами: AGI+END дают дальность/скорость, INT контролирует точность; риск соскальзывания при низком END."
content:
  sections:
    - id: parameters
      title: "Параметры"
      body: |
        • Дальность wall-run: base 6 м + (AGI+END)*0.12 м (кап 12 м).
        • Скорость: base 9 м/с + AGI*0.18 м/с (кап 15 м/с).
        • Угол поворота: фиксированный 90° с точностью от INT.
        • Кд: base 8с – INT*0.12с (мин 4с).
        • Энергия: base 15 ед – END*0.2 (мин 6).
      mechanics_links: [ ]
      assets: [ ]
    - id: physics
      title: "Физика и взаимодействие"
      body: |
        • Реалистичный wall-run с гравитацией и инерцией.
        • Поворот 90°: резкий маневр с потерей скорости.
        • Падение при ошибке: END снижает урон.
        • Переход в другие механики (air-dash, zipline).
      mechanics_links: [ ]
      assets: [ ]
    - id: risks
      title: "Риски и ограничения"
      body: |
        • Соскальзывание: шанс 12% – END*1.0% (кап 3%).
        • Удар о стену: при неудачном повороте (низкий INT).
        • Ограничения поверхностей: только вертикальные стены.
        • Временные штрафы: кд при падении.
      mechanics_links: [ ]
      assets: [ ]
    - id: ux
      title: "UX"
      body: |
        • Предиктивные индикаторы траектории и угла поворота.
        • Звуковые сигналы при приближении к максимальной дальности.
        • Визуальные эффекты при успешном повороте.
        • Быстрый сброс при ошибке.
      mechanics_links: [ ]
      assets: [ ]
    - id: telemetry
      title: "Телеметрия"
      body: |
        • wall_runs_completed, avg_distance, turn_success_rate, fall_events.
        • energy_consumed, cd_usage, surface_types_used.
        • Цели: fall_events <6%, turn_success >85% mid-tier.
      mechanics_links: [ ]
      assets: [ ]
    - id: core_mechanics
      title: "Основная механика wall-run"
      body: |
        ### Концепция:
        Wall-Run with 90° Turn - это продвинутая механика бега по вертикальным поверхностям с возможностью резких поворотов.
        Механика масштабируется с тремя основными статами: AGI (ловкость) и END (выносливость) определяют дальность и скорость,
        INT (интеллект) контролирует точность поворотов и маневров.

        ### Как работает:
        - Игрок начинает wall-run, прикрепляясь к вертикальной поверхности
        - Во время бега игрок может выполнить резкий поворот на 90°
        - Поворот требует точного тайминга и контроля
        - При успешном повороте игрок продолжает движение в новом направлении
        - При неудаче - падение с возможными повреждениями

        ### Стратегические применения:
        - **Обход препятствий**: Быстрое преодоление углов зданий
        - **Тактическое преимущество**: Неожиданные маневры в бою
        - **Вертикальная мобильность**: Доступ к труднодоступным позициям
        - **Командная координация**: Синхронизированные движения группы
      mechanics_links:
        - mechanics/movement/traversal-system.yaml
        - mechanics/combat/acrobatics-mechanics.yaml
      assets: []

    - id: stat_scaling_formulas
      title: "Формулы масштабирования статов"
      body: |
        ### AGI (Ловкость) - Скорость и дальность:
        ```
        base_run_speed = 9.0    # м/с базовой скорости
        agi_speed_mult = 0.18   # м/с на единицу AGI
        max_run_speed = 15.0    # максимальная скорость

        run_speed = min(base_run_speed + (AGI * agi_speed_mult), max_run_speed)
        ```

        ```
        base_run_distance = 6.0     # метров базовой дальности
        agi_end_distance_mult = 0.12 # метров на единицу (AGI+END)
        max_run_distance = 12.0     # максимальная дальность

        run_distance = min(base_run_distance + ((AGI + END) * agi_end_distance_mult), max_run_distance)
        ```

        ### END (Выносливость) - Устойчивость и восстановление:
        ```
        base_slip_chance = 12.0  # % базовый шанс соскальзывания
        end_slip_reduction = 1.0  # % снижения на единицу END
        min_slip_chance = 3.0    # минимальный шанс

        slip_chance = max(base_slip_chance - (END * end_slip_reduction), min_slip_chance)
        ```

        ```
        fall_damage_reduction = END * 1.5  # % снижения урона падения
        max_damage_reduction = 60.0        # максимальное снижение

        damage_reduction = min(fall_damage_reduction, max_damage_reduction)
        ```

        ### INT (Интеллект) - Точность поворотов и контроль:
        ```
        base_turn_accuracy = 75.0  # % базовой точности поворота
        int_accuracy_mult = 1.5    # % на единицу INT
        max_turn_accuracy = 95.0   # максимальная точность

        turn_accuracy = min(base_turn_accuracy + (INT * int_accuracy_mult), max_turn_accuracy)
        ```

        ```
        cooldown = 8.0        # секунд базового кд
        int_cd_reduction = 0.12  # секунды на единицу INT
        min_cooldown = 4.0   # минимальный кд

        cooldown = max(cooldown - (INT * int_cd_reduction), min_cooldown)
        ```

        ```
        energy_cost = 15.0    # базовая стоимость энергии
        end_energy_reduction = 0.2  # снижение на единицу END
        min_energy_cost = 6.0  # минимальная стоимость

        energy_cost = max(energy_cost - (END * end_energy_reduction), min_energy_cost)
        ```

        ### Примеры расчета:
        - **Новичок** (AGI:10, END:10, INT:10): 10.8м дальность, 10.8м/с скорость, 10% соскальзывание, 82.5% точность поворота
        - **Средний** (AGI:20, END:20, INT:20): 10.8м дальность, 12.6м/с скорость, 4% соскальзывание, 90% точность поворота
        - **Продвинутый** (AGI:30, END:30, INT:30): 12м дальность, 14.4м/с скорость, 3% соскальзывание, 95% точность поворота
        - **Максимум** (AGI:40, END:40, INT:40): 12м дальность, 15м/с скорость, 3% соскальзывание, 95% точность поворота
      mechanics_links:
        - mechanics/stats/scaling-formulas.yaml
        - mechanics/movement/balance-calculations.yaml
      assets: []

    - id: turn_mechanics
      title: "Механика 90° поворотов"
      body: |
        ### Основные принципы поворота:
        - **Тайминг**: Поворот должен быть выполнен в оптимальном временном окне
        - **Угол**: Фиксированный 90° поворот с возможностью небольшого отклонения
        - **Инерция**: Потеря скорости при резком изменении направления
        - **Восстановление**: Возможность корректировки траектории после поворота

        ### Типы поворотов:
        - **Внутренний поворот**: Поворот к центру здания (сложнее, требует больше точности)
        - **Внешний поворот**: Поворот от центра здания (проще, меньше потеря скорости)
        - **Комбинированный**: Последовательные повороты для сложных маневров
        - **Экстренный**: Поворот под давлением (сниженная точность)

        ### Факторы влияющие на успех:
        - **Скорость движения**: Высокая скорость усложняет контроль
        - **Угол поверхности**: Разные материалы имеют разную адгезию
        - **Внешние воздействия**: Погода, повреждения поверхности
        - **Состояние игрока**: Усталость снижает точность

        ### Последствия неудачных поворотов:
        - **Соскальзывание**: Потеря контроля и падение
        - **Удар о поверхность**: Физический урон от столкновения
        - **Потеря импульса**: Значительное снижение скорости
        - **Временные штрафы**: Увеличенный кд на повторную попытку
      mechanics_links:
        - mechanics/movement/turn-mechanics.yaml
        - mechanics/combat/maneuver-system.yaml
      assets: []

    - id: wall_physics
      title: "Физика взаимодействия со стенами"
      body: |
        ### Свойства поверхностей:
        - **Материалы**: Бетон, кирпич, металл, стекло - разные коэффициенты трения
        - **Состояние**: Целые vs поврежденные поверхности
        - **Угол**: Абсолютно вертикальные vs слегка наклонные стены
        - **Текстура**: Гладкие vs шероховатые поверхности

        ### Физическая модель:
        - **Адгезия**: Временное прилипание к поверхности
        - **Гравитация**: Постоянное противодействие притяжению
        - **Инерция**: Сохранение импульса движения
        - **Фрикция**: Сопротивление скольжению

        ### Динамические эффекты:
        - **Вибрации**: Передача вибраций от движений игрока
        - **Отклонения**: Небольшие смещения от идеальной траектории
        - **Адаптация**: Изменение поведения в зависимости от условий
        - **Обратная связь**: Физические ощущения от взаимодействия

        ### Безопасность и ограничения:
        - **Максимальный угол**: Ограничения на неидеально вертикальные поверхности
        - **Максимальная скорость**: Предотвращение чрезмерного ускорения
        - **Максимальная дальность**: Ограничение непрерывного бега
        - **Восстановление энергии**: Требования к энергетическому балансу
      mechanics_links:
        - mechanics/physics/wall-interaction.yaml
        - mechanics/environment/surface-properties.yaml
      assets: []

    - id: risk_management_system
      title: "Система рисков и последствий"
      body: |
        ### Механизмы риска:
        - **Накопление усталости**: Увеличение шанса ошибки при длительном использовании
        - **Внешние факторы**: Погода, повреждения стен, присутствие противников
        - **Технические ограничения**: Ошибки в тайминге и контроле
        - **Физические ограничения**: Усталость и травмы игрока

        ### Физические последствия:
        - **Падение**: Урон от высоты с модификаторами от END
        - **Травмы**: Дополнительные повреждения от ударов о поверхности
        - **Оглушение**: Временная потеря ориентации при неудачных поворотах
        - **Физическое истощение**: Снижение производительности

        ### Стратегические последствия:
        - **Потеря позиции**: Упущенные тактические возможности
        - **Временные штрафы**: Увеличенный кд на использование
        - **Репутационные потери**: Неудачи влияют на командный рейтинг
        - **Экономические затраты**: Потеря энергии и боеприпасов

        ### Меры предотвращения:
        - **Тренировочные режимы**: Безопасное обучение механике
        - **Предиктивные индикаторы**: Предупреждения о рисках
        - **Аварийные системы**: Возможность прервать wall-run
        - **Защитное снаряжение**: Модификации снижающие риски
      mechanics_links:
        - mechanics/combat/risk-assessment.yaml
        - mechanics/movement/safety-systems.yaml
      assets: []

    - id: user_interface_design
      title: "Пользовательский интерфейс"
      body: |
        ### Основные индикаторы:
        - **Траектория**: Предиктивная линия пути wall-run
        - **Точка поворота**: Маркер оптимального времени для поворота
        - **Статус поверхности**: Индикатор свойств текущей стены
        - **Риски**: Предупреждения о приближающихся опасностях

        ### Визуальные эффекты:
        - **След движения**: Визуальный след на поверхности стены
        - **Эффекты поворота**: Анимации при успешных/неудачных поворотах
        - **Частицы**: Эффекты от взаимодействия с поверхностью
        - **Цветовые индикаторы**: Сигнализация о статусе и рисках

        ### Аудио сопровождение:
        - **Звуки бега**: Реалистичные звуки шагов по поверхности
        - **Звуки поворота**: Характерные звуки при изменении направления
        - **Предупреждения**: Сигналы при приближении к рискам
        - **Обратная связь**: Подтверждения успешных действий

        ### Настройки интерфейса:
        - **Кастомизация**: Возможность настройки внешнего вида индикаторов
        - **Уровень детализации**: Настройка количества отображаемой информации
        - **Акселерометрия**: Вибрация для тактильной обратной связи
        - **Доступность**: Настройки для игроков с ограниченными возможностями
      mechanics_links:
        - mechanics/ui/wall-run-interface.yaml
        - mechanics/ui/visual-effects.yaml
      assets: []

    - id: balance_considerations
      title: "Балансовые соображения"
      body: |
        ### Риск-вознаграждение баланс:
        - **Высокая мобильность**: Значительное преимущество в вертикальном перемещении
        - **Техническая сложность**: Требует точного тайминга и контроля
        - **Риск неудачи**: Возможность потери позиции и повреждений
        - **Зависимость от статов**: Требует сбалансированного развития персонажа

        ### Прогрессия и развитие:
        - **Обучение механике**: Постепенное введение сложности
        - **Улучшение навыков**: Рост мастерства через опыт
        - **Апгрейды**: Модификации снижающие риски и улучшающие параметры
        - **Специализация**: Разные стили игры фокусирующиеся на разных аспектах

        ### Метагейм факторы:
        - **Мап дизайн**: Размещение стен влияет на стратегические возможности
        - **Баланс классов**: Разные специализации получают преимущества
        - **Экономика**: Стоимость энергии влияет на частоту использования
        - **Контент дизайн**: Интеграция в квесты и соревнования

        ### Социальные аспекты:
        - **Командная игра**: Возможность помощи союзникам в сложных ситуациях
        - **Конкуренция**: PvP применение для тактических преимуществ
        - **Показательность**: Визуальные эффекты демонстрирующие мастерство
        - **Сообщество**: Обмен техниками и стратегиями использования
      mechanics_links:
        - mechanics/balance/risk-reward-analysis.yaml
        - mechanics/gameplay/progression-systems.yaml
      assets: []

    - id: telemetry_analytics
      title: "Телеметрия и аналитика"
      body: |
        ### Метрики использования:
        - **wall_runs_attempted**: Количество попыток wall-run в сессии
        - **successful_turns**: Процент успешных 90° поворотов
        - **average_run_distance**: Средняя дистанция непрерывного бега
        - **turn_failure_events**: Количество неудачных поворотов

        ### Метрики производительности:
        - **run_speed_achieved**: Достигнутая скорость движения
        - **surface_types_used**: Распределение по типам поверхностей
        - **energy_efficiency**: Эффективность расхода энергии
        - **cooldown_management**: Оптимальность использования кд

        ### Метрики вовлеченности:
        - **session_usage**: Время использования wall-run в сессии
        - **learning_progress**: Улучшение навыков со временем
        - **strategic_application**: Использование в тактических ситуациях
        - **replay_motivation**: Повторное прохождение контента

        ### Метрики баланса:
        - **stat_distribution**: Распределение игроков по уровням статов
        - **difficulty_perception**: Субъективная оценка сложности
        - **failure_consequences**: Влияние неудач на игровой процесс
        - **skill_ceilings**: Достижимые уровни мастерства

        ### Аналитические цели:
        - Оптимизация формул для лучшего баланса сложности и доступности
        - Выявление проблемных ситуаций в физике и управлении
        - Улучшение UX на основе данных о неудачах и успехах
        - Поддержание справедливой конкуренции между разными уровнями навыков
      mechanics_links:
        - mechanics/analytics/wall-run-telemetry.yaml
        - mechanics/analytics/balance-metrics.yaml
      assets: []

    - id: integration_implementation
      title: "Интеграция и реализация"
      body: |
        ### Системные интеграции:
        - **Физический движок**: Реализация взаимодействия с вертикальными поверхностями
        - **Движение система**: Интеграция с системой передвижения игрока
        - **Повреждения система**: Обработка падений и травм от неудач
        - **Интерфейс система**: Синхронизация с UI элементами

        ### Технические требования:
        - **Производительность**: Минимальное влияние на FPS при активном использовании
        - **Сетевая синхронизация**: Корректная репликация для всех игроков
        - **Физическая точность**: Реалистичное поведение на разных поверхностях
        - **Масштабируемость**: Поддержка множественных одновременных wall-run

        ### Тестирование и валидация:
        - **Физическое тестирование**: Проверка реалистичности взаимодействия со стенами
        - **Балансовое тестирование**: Валидация формул и рисков поворотов
        - **Интеграционное тестирование**: Проверка совместимости с другими системами
        - **Стресс-тестирование**: Производительность при высокой нагрузке

        ### Мониторинг и поддержка:
        - **Реал-тайм метрики**: Отслеживание использования и проблем
        - **Игрок обратная связь**: Сбор отзывов о балансе и UX
        - **Балансовые патчи**: Регулярные корректировки на основе данных
        - **Техническая поддержка**: Помощь с проблемами wall-run
      mechanics_links:
        - mechanics/systems/wall-run-integration.yaml
        - mechanics/testing/wall-run-validation.yaml
      assets: []
appendix:
  glossary:
    - term: "Wall-Run"
      definition: "Механика бега по вертикальным поверхностям с возможностью резких поворотов на 90°"
    - term: "90° Turn"
      definition: "Резкий поворот на 90 градусов во время wall-run, требующий точного тайминга и контроля"
    - term: "Slip Chance"
      definition: "Вероятность соскальзывания со стены, снижается со статом END"
    - term: "Turn Accuracy"
      definition: "Точность выполнения 90° поворота, масштабируется со статом INT"
    - term: "Surface Adhesion"
      definition: "Способность поверхности удерживать игрока во время wall-run, зависит от материала и состояния"
  references:
    - id: mechanics/movement/traversal-system
      title: "Система передвижения и преодоления препятствий"
      type: document
    - id: mechanics/combat/acrobatics-mechanics
      title: "Механики акробатики в бою"
      type: document
    - id: mechanics/stats/scaling-formulas
      title: "Формулы масштабирования характеристик"
      type: document
    - id: mechanics/physics/wall-interaction
      title: "Физика взаимодействия с вертикальными поверхностями"
      type: document
    - id: mechanics/analytics/wall-run-telemetry
      title: "Телеметрия систем wall-run"
      type: document
  decisions:
    - rationale: "Wall-run с поворотами добавляет вертикальность и техничность"
      impact: "Увеличивает стратегическую глубину, поощряет точный контроль"
    - rationale: "Система рисков предотвращает спам и добавляет напряжение"
      impact: "Балансирует мобильность с потенциальными последствиями неудач"
    - rationale: "Масштабирование трех статов требует сбалансированного билда"
      impact: "Поощряет разнообразие персонажей и стратегических подходов"
implementation:
  github_issue: 1783
  needs_task: false
  queue_reference: [ ]
  blockers: [ ]
history:
  - version: "1.0.0"
    date: 2025-12-12
    author: movement_team
    changes: "Wall-run с 90° поворотами: параметры AGI+END/INT, физика, риски, UX, телеметрия."
validation:
  checksum: ""
  schema_version: "1.0"