# Issue: #1787
metadata:
  id: movement-vertical-zipline-squad-1787
  title: "Вертикалка: zipline сквада (AGI/END/TECH)"
  document_type: mechanics
  category: movement
  status: balanced
  version: "2.0.0"
  last_updated: 2026-01-12T17:00:00Z
  concept_approved: true
  concept_reviewed_at: "2026-01-12T17:00:00Z"
  owners:
    - role: movement_designer
      contact: movement@necp.game
  tags:
    - movement
    - traversal
    - squad
  topics:
    - agility
    - endurance
    - tech
  related_systems:
    - gameplay-service
    - physics-engine
    - analytics-service
  visibility: internal
  audience:
    - gameplay
    - movement
    - analytics
  risk_level: medium
summary:
  problem: "Нужен временный трос для сквада: скорость спуска от AGI, устойчивость от END, установка от TECH."
  goal: "Зафиксировать длину/TTL, скорости, шанс обрыва, шум и боезапас."
  essence: "Squad zipline: установка быстрее с TECH, спуск быстрее с AGI, обрыв шанс падает с END; шум и риск под огнём."
content:
  sections:
    - id: parameters
      title: "Параметры"
      body: |
        • Длина: base 20 м + TECH*0.6 м (кап 40 м).  
        • TTL: 45–70с, продлевается TECH*0.8с.  
        • Скорость спуска: base 8 м/с + AGI*0.12 м/с, кап 14 м/с.  
        • Шанс обрыва под огнём: base 15% – END*1.2% (кап 3%).  
        • Боезапас: 2–3 троса, кд установки 12–18с.
      mechanics_links: [ ]
      assets: [ ]
    - id: risks
      title: "Риски и шум"
      body: |
        • Шум уведомляет патрули; больше при высоких скоростях.  
        • Обрыв → падение/травма, END снижает урон падения.  
        • Ограничение угла: крутые углы повышают шанс обрыва +5–10%.
      mechanics_links: [ ]
      assets: [ ]
    - id: ux
      title: "UX"
      body: |
        • Превью траектории и статуса прочности.  
        • Индикатор нагрузки (кол-во игроков на тросе).  
        • Быстрый демонтаж с сохранением остатка боезапаса (50% шанс вернуть).
      mechanics_links: [ ]
      assets: [ ]
    - id: telemetry
      title: "Телеметрия"
      body: |
        • ziplines_placed, avg_length, break_events, fall_damage_events.  
        • squad_rides, noise_alerts, install_time (TECH).  
        • Цели: break_events <7% при END mid-tier, avg_length ~28–32 м.
      mechanics_links: [ ]
      assets: [ ]
    - id: core_mechanics
      title: "Основная механика squad zipline"
      body: |
        ### Концепция:
        Squad zipline - это временная система тросов для быстрого перемещения сквада по вертикальным и горизонтальным траекториям.
        Механика масштабируется с тремя основными статами: TECH (технологии) влияет на установку и качество троса,
        AGI (ловкость) на скорость спуска, END (выносливость) на устойчивость к повреждениям.

        ### Состояния zipline:
        - **Установка**: Развертывание троса между двумя точками опоры
        - **Активный**: Трос готов к использованию сквадом
        - **Загруженный**: Игроки спускаются по тросу
        - **Поврежденный**: Трос частично поврежден огнем
        - **Обрыв**: Трос полностью разрушен

        ### Сквадная синхронизация:
        - **Последовательное использование**: Игроки сквада спускаются по очереди
        - **Одновременное использование**: Возможность для нескольких игроков (с нагрузкой)
        - **Синхронизированные действия**: Командные прыжки и маневры
        - **Восстановление**: Автоматический сброс после использования
      mechanics_links:
        - mechanics/movement/traversal-system.yaml
        - mechanics/squad/coordination-system.yaml
      assets: []

    - id: stat_scaling_formulas
      title: "Формулы масштабирования статов"
      body: |
        ### TECH (Технологии) - Качество и установка троса:
        ```
        base_length = 20.0  # метров
        tech_length_mult = 0.6  # метров на единицу TECH
        max_length = 40.0   # максимальная длина

        length = min(base_length + (TECH * tech_length_mult), max_length)
        ```

        ```
        base_durability = 100.0  # единицы прочности
        tech_durability_mult = 2.0  # прочность на единицу TECH
        max_durability = 250.0  # максимальная прочность

        durability = min(base_durability + (TECH * tech_durability_mult), max_durability)
        ```

        ```
        install_time = 8.0     # секунд базовое время установки
        tech_install_reduction = 0.15  # секунды на единицу TECH
        min_install_time = 3.0  # минимальное время

        install_time = max(install_time - (TECH * tech_install_reduction), min_install_time)
        ```

        ### AGI (Ловкость) - Скорость спуска:
        ```
        base_speed = 8.0     # м/с базовая скорость
        agi_speed_mult = 0.12 # м/с на единицу AGI
        max_speed = 14.0     # максимальная скорость

        speed = min(base_speed + (AGI * agi_speed_mult), max_speed)
        ```

        ### END (Выносливость) - Устойчивость к повреждениям:
        ```
        base_break_chance = 15.0  # % базовый шанс обрыва
        end_break_reduction = 1.2  # % снижения на единицу END
        min_break_chance = 3.0   # минимальный шанс

        break_chance = max(base_break_chance - (END * end_break_reduction), min_break_chance)
        ```

        ```
        fall_damage_reduction = END * 2.5  # % снижения урона падения
        max_damage_reduction = 75.0       # максимальное снижение

        damage_reduction = min(fall_damage_reduction, max_damage_reduction)
        ```

        ### Примеры расчета:
        - **Новичок** (AGI:10, END:10, TECH:10): 26м длина, 9.2м/с скорость, 13% шанс обрыва, 6с установка
        - **Средний** (AGI:20, END:20, TECH:20): 32м длина, 10.4м/с скорость, 9% шанс обрыва, 5с установка
        - **Продвинутый** (AGI:30, END:30, TECH:30): 38м длина, 11.6м/с скорость, 5% шанс обрыва, 3.5с установка
        - **Максимум** (AGI:40, END:40, TECH:40): 40м длина, 12.8м/с скорость, 3% шанс обрыва, 3с установка
      mechanics_links:
        - mechanics/stats/scaling-formulas.yaml
        - mechanics/movement/balance-calculations.yaml
      assets: []

    - id: zipline_physics
      title: "Физика и взаимодействие zipline"
      body: |
        ### Физическая модель:
        - **Гравитационное воздействие**: Трос провисает под собственным весом
        - **Динамическая нагрузка**: Изменение траектории при движении игроков
        - **Аэродинамика**: Влияние ветра и скорости на стабильность
        - **Материальные свойства**: Растяжение и упругость троса

        ### Взаимодействие с окружением:
        - **Точки крепления**: Стены, крыши, деревья, специальные крюки
        - **Коллизии**: Автоматическое избегание препятствий
        - **Разрушения**: Повреждение троса от взрывов и огня
        - **Временные факторы**: Изменение свойств при погодных условиях

        ### Игровые взаимодействия:
        - **PvP элементы**: Возможность саботажа чужих zipline
        - **Командная координация**: Синхронизированные спуски
        - **Тактические применения**: Быстрое занятие позиций
        - **Экономические аспекты**: Стоимость материалов для создания

        ### Безопасность и ограничения:
        - **Максимальная нагрузка**: Ограничение количества одновременных пользователей
        - **Скоростные лимиты**: Предотвращение травм от чрезмерной скорости
        - **Высотные ограничения**: Безопасные зоны использования
        - **Временные ограничения**: TTL для предотвращения перманентных структур
      mechanics_links:
        - mechanics/physics/zipline-physics.yaml
        - mechanics/environment/interaction-system.yaml
      assets: []

    - id: risk_management
      title: "Система рисков и последствий"
      body: |
        ### Боевые риски:
        - **Обстрел**: Повреждение троса огнем противника
        - **Саботаж**: Намеренное разрушение чужих zipline
        - **Перегрузка**: Слишком много игроков одновременно
        - **Внешние факторы**: Погода, взрывы, стихийные бедствия

        ### Физические последствия:
        - **Падение при обрыве**: Урон от высоты (масштабируется с END)
        - **Травмы**: Дополнительный урон от скорости и угла падения
        - **Оглушение**: Временное дезориентация после падения
        - **Моральный урон**: Психологическое воздействие на сквад

        ### Стратегические последствия:
        - **Потеря преимущества**: Упущенные тактические возможности
        - **Временные штрафы**: Ограничения на повторное использование
        - **Репутационные потери**: Неудачи влияют на командный рейтинг
        - **Экономические затраты**: Потеря материалов и времени

        ### Меры предотвращения:
        - **Защитные механизмы**: Щиты и броня для zipline
        - **Резервные системы**: Автоматическое создание запасных тросов
        - **Мониторинг**: Предупреждения о потенциальных угрозах
        - **Страхование**: Системы компенсации потерь
      mechanics_links:
        - mechanics/combat/risk-assessment.yaml
        - mechanics/squad/consequence-system.yaml
      assets: []

    - id: squad_coordination
      title: "Сквадная координация и синхронизация"
      body: |
        ### Командные режимы:
        - **Последовательный спуск**: Игроки спускаются по очереди
        - **Групповой спуск**: Одновременное использование (с риском перегрузки)
        - **Тактический спуск**: Синхронизированные прыжки с разных точек
        - **Экстренный спуск**: Принудительное использование при угрозе

        ### Коммуникация и синхронизация:
        - **Голосовые команды**: Координация через командный чат
        - **Визуальные сигналы**: Маркеры и индикаторы готовности
        - **Автоматическая синхронизация**: AI-помощь в координации
        - **Тайминги**: Синхронизация действий по времени

        ### Лидерство и роли:
        - **Установщик**: Игрок с высоким TECH отвечает за развертывание
        - **Наводчик**: Координирует траекторию и безопасность
        - **Страховщик**: Обеспечивает безопасность и резервные варианты
        - **Исполнители**: Остальные члены сквада выполняют спуск

        ### Эффективность сквада:
        - **Командные бонусы**: Увеличение скорости при синхронизированных действиях
        - **Ролевые преимущества**: Разные роли дают разные бонусы
        - **Опыт сквада**: Улучшение координации со временем
        - **Тактическое преимущество**: Преимущества над неорганизованными группами
      mechanics_links:
        - mechanics/squad/coordination-system.yaml
        - mechanics/command/leadership-mechanics.yaml
      assets: []

    - id: user_interface
      title: "Пользовательский интерфейс"
      body: |
        ### Основные индикаторы:
        - **Статус zipline**: Прочность, нагрузка, время жизни
        - **Траектория**: Предиктивная линия пути спуска
        - **Риски**: Предупреждения об угрозах и повреждениях
        - **Сквад статус**: Готовность членов команды

        ### Командный интерфейс:
        - **Сквад панель**: Статус каждого члена команды
        - **Очередь спуска**: Порядок использования zipline
        - **Координационные маркеры**: Точки сбора и траектории
        - **Голосовые команды**: Быстрые команды для координации

        ### Установочные инструменты:
        - **Целевой интерфейс**: Выбор точек крепления
        - **Предиктивный расчет**: Автоматический расчет траектории
        - **Оптимизация**: Предложения лучших точек крепления
        - **Валидация**: Проверка безопасности и стабильности

        ### Мониторинг и обратная связь:
        - **Реал-тайм метрики**: Скорость, прочность, нагрузка
        - **Историческая статистика**: Предыдущие использования
        - **Обратная связь**: Уведомления о успешных/неуспешных действиях
        - **Обучение**: Советы по улучшению использования
      mechanics_links:
        - mechanics/ui/zipline-interface.yaml
        - mechanics/squad/command-interface.yaml
      assets: []

    - id: balance_considerations
      title: "Балансовые соображения"
      body: |
        ### Риск-вознаграждение баланс:
        - **Высокая скорость**: Быстрое перемещение ценой риска обрыва
        - **Сквад эффективность**: Преимущества координации над индивидуальным использованием
        - **Технологическая зависимость**: Требует инвестиций в TECH для эффективности
        - **Ситуационная полезность**: Особенно эффективна в вертикальных локациях

        ### Прогрессия и развитие:
        - **Обучение механике**: Туториалы и тренировочные зоны
        - **Улучшение навыков**: Рост эффективности со временем
        - **Технологические апгрейды**: Новые типы тросов и улучшения
        - **Сквад опыт**: Улучшение командной координации

        ### Метагейм факторы:
        - **Мап дизайн**: Размещение точек крепления влияет на стратегию
        - **Баланс классов**: Роли с разными статами имеют разные преимущества
        - **Экономика**: Стоимость материалов влияет на доступность
        - **Контент дизайн**: Интеграция в квесты и миссии

        ### Социальные аспекты:
        - **Командная игра**: Поощряет кооперацию и координацию
        - **Конкуренция**: PvP элементы с саботажем zipline
        - **Показательность**: Визуальные эффекты демонстрации мастерства
        - **Сообщество**: Обмен техниками и стратегиями использования
      mechanics_links:
        - mechanics/balance/risk-reward-analysis.yaml
        - mechanics/gameplay/progression-systems.yaml
      assets: []

    - id: telemetry_analytics
      title: "Телеметрия и аналитика"
      body: |
        ### Метрики использования:
        - **ziplines_deployed**: Количество установленных zipline в сессии/матче
        - **average_length**: Средняя длина развернутых тросов
        - **usage_frequency**: Как часто используется в разных типах контента
        - **squad_coordination**: Уровень синхронизации командных спусков

        ### Метрики производительности:
        - **break_events**: Количество обрывов и их причины
        - **fall_damage**: Урон от падений и снижение через END
        - **install_times**: Время установки и влияние TECH
        - **speed_achieved**: Достигнутые скорости спуска

        ### Метрики баланса:
        - **damage_reduction_effectiveness**: Эффективность END в предотвращении урона
        - **squad_advantage**: Преимущества командного использования
        - **situational_effectiveness**: Эффективность в разных типах миссий
        - **player_satisfaction**: Удовлетворенность механикой

        ### Метрики прогрессии:
        - **skill_improvement**: Как игроки улучшают установку и использование
        - **stat_investment**: Какие статы предпочитают прокачивать игроки
        - **tactical_usage**: Использование в составе тактических маневров
        - **mastery_achievement**: Достижение высокого уровня владения

        ### Аналитические цели:
        - Оптимизация формул для лучшего баланса риск/вознаграждение
        - Выявление проблемных ситуаций и багов в физике
        - Улучшение UX на основе данных использования
        - Поддержание fair play в соревновательных режимах
      mechanics_links:
        - mechanics/analytics/movement-telemetry.yaml
        - mechanics/analytics/squad-coordination-metrics.yaml
      assets: []

    - id: integration_implementation
      title: "Интеграция и реализация"
      body: |
        ### Системные интеграции:
        - **Физический движок**: Реализация динамики тросов и гравитации
        - **Сквад система**: Синхронизация действий членов команды
        - **Повреждения**: Интеграция с системой боевых повреждений
        - **Экономика**: Стоимость материалов и аммуниции

        ### Технические требования:
        - **Производительность**: Минимальное влияние на FPS при множественных zipline
        - **Сетевая синхронизация**: Корректная репликация для всех игроков
        - **Физическая точность**: Реалистичное поведение тросов и нагрузок
        - **Масштабируемость**: Поддержка большого количества одновременных zipline

        ### Тестирование и валидация:
        - **Физическое тестирование**: Проверка реалистичности поведения
        - **Балансовое тестирование**: Валидация формул и рисков
        - **Сквад тестирование**: Проверка командной координации
        - **Стресс-тестирование**: Производительность при высокой нагрузке

        ### Мониторинг и поддержка:
        - **Реал-тайм метрики**: Отслеживание использования в продакшене
        - **Баг-трекинг**: Сбор отчетов о проблемах с zipline
        - **Балансовые патчи**: Регулярные корректировки на основе данных
        - **Плейер фидбек**: Интеграция отзывов сообщества
      mechanics_links:
        - mechanics/systems/zipline-integration.yaml
        - mechanics/testing/movement-validation.yaml
      assets: []
appendix:
  glossary:
    - term: "Squad Zipline"
      definition: "Временная система тросов для быстрого перемещения членов сквада по вертикальным и горизонтальным траекториям"
    - term: "Zipline Durability"
      definition: "Показатель прочности троса, определяющий устойчивость к повреждениям и обрывам"
    - term: "Squad Coordination"
      definition: "Система синхронизации действий членов сквада при использовании общих механик передвижения"
    - term: "Zipline Break Chance"
      definition: "Вероятность обрыва троса под огнем противника, снижается со статом END"
    - term: "Traversal Mechanics"
      definition: "Комплекс механик передвижения, включающий различные способы преодоления препятствий и расстояний"
  references:
    - id: mechanics/movement/traversal-system
      title: "Система передвижения и преодоления препятствий"
      type: document
    - id: mechanics/stats/scaling-formulas
      title: "Формулы масштабирования статов"
      type: document
    - id: mechanics/squad/coordination-system
      title: "Система координации действий сквада"
      type: document
    - id: mechanics/physics/zipline-physics
      title: "Физическая модель zipline и тросов"
      type: document
    - id: mechanics/analytics/movement-telemetry
      title: "Телеметрия систем передвижения"
      type: document
  decisions:
    - rationale: "Squad zipline добавляет вертикальность и командную координацию в передвижение"
      impact: "Повышает стратегическую глубину, поощряет командную игру"
    - rationale: "Система рисков предотвращает спам и делает механику тактической"
      impact: "Балансирует высокую скорость с потенциальными последствиями"
    - rationale: "Масштабирование статов позволяет персонализировать стиль игры"
      impact: "Поддерживает разнообразие билдов и стратегических подходов"
implementation:
  github_issue: 1787
  needs_task: false
  queue_reference: [ ]
  blockers: [ ]
history:
  - version: "1.0.0"
    date: 2025-12-12
    author: movement_team
    changes: "Добавлен squad zipline с параметрами AGI/END/TECH, рисками и телеметрией."
validation:
  checksum: ""
  schema_version: "1.0"

