metadata:
  id: progression-attributes-matrix
  title: 'Матрица атрибутов — Старт, рост, капы и требования'
  document_type: mechanics
  category: progression
  status: approved
  version: '1.1.0'
  last_updated: 2025-11-07T16:46:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-07T16:46:00Z
  owners:
    - role: progression_director
      contact: progression@necp.game
  tags:
    - attributes
    - progression
    - balancing
  topics:
    - character-growth
    - equipment-requirements
    - api-integration
  related_systems:
    - gameplay-service
    - economy-service
    - analytics-service
  related_documents:
    - id: progression-attributes
      relation: references
    - id: progression-skills
      relation: integrates
    - id: economy-equipment-matrix
      relation: consumes
    - id: combat-implants-types
      relation: aligns
  source: shared/docs/knowledge/mechanics/progression/progression-attributes-matrix.md
  visibility: internal
  audience:
    - progression
    - systems
    - economy
  risk_level: high
review:
  chain:
    - role: progression_director
      reviewer: ''
      reviewed_at: ''
      status: approved
  next_actions: []
summary:
  problem: Требовалось зафиксировать стартовые диапазоны, приросты и требования атрибутов, чтобы синхронизировать прогрессию персонажей с экономикой и экипировкой.
  goal: Сформировать матрицу значений и ограничений, которая поддерживает создание персонажа, рост по уровням, требования предметов и контроль капов.
  essence: Документ определяет базовые параметры атрибутов, их развитие, таблицы требований предметов и сервисные контуры валидации и API.
  key_points:
    - Описаны стартовые диапазоны и классовые бонусы для девяти атрибутов.
    - Зафиксирована схема прироста очков и капы, включая перерождения.
    - Определены требования для экипировки и имплантов с таблицами штрафов.
    - Приведены структуры данных и REST/GraphQL интерфейсы для gameplay-service.
content:
  sections:
    - id: starting_ranges
      title: 'Стартовые значения и бонусы классов'
      body: |
        Атрибуты стартуют в диапазоне 3–8 с дополнительным свободным очком.
        Классовые бонусы суммируются с броском и формируют снимок `character_creation_snapshot`, что позволяет контролировать расхождения в начале игры.
      mechanics_links:
        - mechanics/progression/progression-attributes.md
      assets: []
    - id: level_growth
      title: 'Прирост очков по уровням'
      body: |
        Каждый уровень выдаёт +1 атрибутное очко, а каждые 5 уровней добавляется бонус +2.
        Начиная с 41 уровня игрок получает +2 очка за уровень и дополнительные бонусы, что компенсирует рост стоимости перков и экипировки.
      mechanics_links:
        - mechanics/progression/progression-skills.md
      assets: []
    - id: attribute_caps
      title: 'Капы и модификаторы'
      body: |
        Жёсткий кап установлен на 20, софт-кап 25 учитывает снижение эффективности модификаторов, а абсолютный кап 30 доступен через систему перерождений.
        Перевышение мягкого капа вызывает штрафные коэффициенты в боевых и экономических расчётах.
      mechanics_links:
        - mechanics/progression/progression-rebirth.md
      assets: []
    - id: equipment_requirements
      title: 'Требования к экипировке и имплантам'
      body: |
        Таблицы требований описывают минимальные значения атрибутов и штрафы за несоблюдение для оружия, экзоскелетов, кибердек и корпоративных прототипов.
        Список требований синхронизируется с `economy/equipment-matrix` и обновляется при изменении сигнатур брендов и имплантов.
      mechanics_links:
        - mechanics/economy/economy-equipment-matrix.yaml
        - mechanics/combat/combat-implants-types.md
      assets: []
    - id: class_modifiers
      title: 'Классовые коэффициенты'
      body: |
        Для ключевых классов заданы корректировки REF, STR, TECH, AGI и других атрибутов, которые применяются в формулах стрельбы, паркура, крафта и социальных проверок.
        Коэффициенты подлежат балансировке и поддерживаются аналитикой для контроля расхождений.
      mechanics_links:
        - mechanics/progression/classes-overview.yaml
      assets: []
    - id: validation_pipeline
      title: 'Контуры проверки и синхронизации'
      body: |
        Описан цикл обновления матрицы, включающий экспорт в YAML/JSON, запуск `validate-item-attributes.ps1` и сверку с экономическими и боевыми таблицами.
        CI job `matrix-consistency` сравнивает показатели с API и уведомляет о выходе за установленные капы.
      mechanics_links:
        - mechanics/economy/economy-production-chains.yaml
      assets: []
    - id: data_structures
      title: 'Структура данных gameplay-service'
      body: |
        Приведены таблицы `attribute_matrix`, `attribute_requirements` и `attribute_level_thresholds`, обеспечивающие хранение диапазонов, требований и кумулятивных значений.
        Структуры поддерживают генераторы данных и динамический UI, отображающий ограничения предметов.
      mechanics_links:
        - implementation/backend/progression-backend.yaml
      assets: []
    - id: api_interfaces
      title: 'REST и GraphQL интерфейсы'
      body: |
        Описаны конечные точки `/progression/attributes/matrix`, `/progression/attributes/requirements` и `/progression/attributes/thresholds`, а также объект GraphQL `AttributeMatrix`.
        Интерфейсы используются для синхронизации фронтенда, экономики и аналитики.
      mechanics_links:
        - implementation/backend/progression-backend.yaml
      assets: []
appendix:
  glossary: []
  references: []
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '1.1.0'
    date: 2025-11-07
    author: progression_team
    changes: 'Добавлены таблицы хранения, API, расширенные требования и автоматизированная проверка.'
  - version: '1.0.0'
    date: 2025-11-05
    author: progression_team
    changes: 'Сформирована базовая матрица атрибутов и классовые бонусы.'
validation:
  checksum: ''
  schema_version: '1.0'


