metadata:
  id: family-relationships-system-detailed
  title: 'Система семейных отношений с NPC — детальная версия'
  document_type: mechanics
  category: social
  status: approved
  version: '1.1.0'
  last_updated: 2025-12-06T11:45:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-09T11:21:00Z
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - relationships
    - family
    - social
  topics:
    - family-dynamics
    - inheritance
  related_systems:
    - social-service
    - world-service
    - economy-service
    - character-service
  related_documents:
    - id: family-relationships-system
      relation: references
    - id: relationships-system
      relation: complements
    - id: npc-relationships-system-detailed
      relation: complements
    - id: mentorship-system-detailed
      relation: relates
    - id: npc-hiring-system-detailed
      relation: relates
  source: shared/docs/knowledge/mechanics/social/family-relationships-system-детально.md
  visibility: internal
  audience:
    - concept
    - systems
    - social-design
    - narrative
  risk_level: high
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: 2025-11-09T11:21:00Z
      status: approved
  next_actions: []
summary:
  problem: Требовалось формализовать семейные структуры NPC, эмоции, события и наследование для интеграции с социальными и нарративными системами.
  goal: Описать семейные деревья, события, квесты, экономику наследства и UX взаимодействия игрока с семьями.
  essence: Документ охватывает структуры семьи, эмоции, события, усыновление, наследование и метрики, поддерживая REST/Kafka обмен.
  key_points:
    - Определены семейные роли, атрибуты и расширенные кланы.
    - События охватывают свадьбы, кризисы, конфликты, праздники и квесты.
    - Экономика наследства и метрики интегрированы с economy- и world-service.
content:
  sections:
    - id: world_lore
      title: Мир и лор: Семья в киберпанк-реальности
      body: |
        В Night City, где корпорации правят миром, а улицы кишат опасностью, семья — это последний бастион человечности. В мире, где каждый может стать киберпсихом, а доверие — роскошь, семейные связи создают островки стабильности в океане хаоса. Но даже семья здесь не защищена от корпораций, бандитских войн и кибернетических кошмаров.
        
        **Семейные структуры:** В киберпанк-мире семья — это не просто кровные узы, это выживание. Ядро семьи — родители и дети — создаёт основу, но расширенные кланы, опека и приёмные связи формируют сложную сеть взаимной поддержки. В Night City семья — это не только любовь, но и защита, ресурсы и влияние. Каждый член семьи имеет свой статус, профессию, фракцию, эмоции и секреты, которые определяют его место в семейной иерархии.
        
        **Эмоции и доверие:** В мире, где технологии заменяют человечность, эмоции становятся редким товаром. Привязанность, тревога, гордость, гнев — все эти эмоции формируют поведение NPC и определяют их отношения с игроком. В киберпанк-мире эмоции — это оружие, которое может спасти или уничтожить. Семейные коэффициенты усиливают базовые отношения, создавая глубокие связи, которые не могут быть разорваны простым предательством.
        
        **События жизни:** Свадьбы, рождения, болезни, конфликты, трагедии и праздники — все эти события запускают цепочки заданий и влияют на отношения. В Night City каждое событие имеет последствия, которые могут изменить судьбу семьи. Свадьба может объединить два клана, болезнь может разрушить семью, конфликт может привести к войне, а трагедия может создать легенду. Каждое событие — это шанс для игрока влиять на мир, создавая новые возможности или закрывая старые двери.
        
        **Наследование и ресурсы:** В киберпанк-мире наследство — это не просто деньги, это власть. Завещания, споры и экономика влияют на ресурсы, налоги и фракционные проверки. В Night City наследство может сделать тебя королём или убить тебя. Споры о наследстве могут привести к войне между кланами, а экономика наследства может изменить баланс сил в городе. Каждое наследство — это история, которая может стать легендой или кошмаром.
      mechanics_links:
        - mechanics/social/family-relationships-system.yaml
      assets: []
    - id: structures
      title: 'Структуры и роли'
      body: |
        Семья охватывает ядро, расширение, кланы, опеку и приёмные связи.
        Атрибуты членов включают статус, профессию, фракцию, эмоции и секреты.
      mechanics_links:
        - mechanics/social/family-relationships-system.yaml
        - mechanics/social/relationships-system.yaml
      assets: []
    - id: emotions
      title: 'Эмоции и доверие'
      body: |
        Базовые отношения усилены семейными коэффициентами, поддерживаются привязанность, тревога, гордость, гнев.
        Комбинации эмоций формируют поведение и запросы NPC.
      mechanics_links:
        - mechanics/social/npc-relationships-system-детально.yaml
        - mechanics/social/mentorship-system-детально.yaml
      assets: []
    - id: life_events
      title: 'События и квесты'
      body: |
        Свадьбы, рождения, болезни, конфликты, трагедии и праздники запускают цепочки заданий и влияет на отношения.
        Каждое событие имеет триггеры, последствия, визуальные сигналы и замеры влияния.
      mechanics_links:
        - mechanics/social/player-orders-system-детально.yaml
        - mechanics/social/mentorship-world-impact-детально.yaml
      assets: []
    - id: player_interactions
      title: 'Взаимодействие игрока и усыновление'
      body: |
        Диалоги, помощь, подарки, визиты и медиация расширяют отношения и открывают семейные квесты.
        Усыновление и вступление в семью требуют репутации, ресурсов и запускают новые ветви сюжета.
      mechanics_links:
        - mechanics/social/relationships-system.yaml
        - mechanics/social/mentorship-system.yaml
      assets: []
    - id: inheritance
      title: 'Наследование и ресурсы'
      body: |
        Наследство, завещания, споры и экономика влияют на ресурсы, налоги и фракционные проверки.
        Economy-service обрабатывает FamilyHeritageRequest и споры о наследстве.
      mechanics_links:
        - mechanics/social/npc-hiring-system-детально.yaml
        - mechanics/social/player-orders-economy.yaml
      assets: []
    - id: ux_metrics
      title: 'UX, API и метрики'
      body: |
        Дерево семьи, календарь, журнал и уведомления обеспечивают визуализацию истории и эмоций.
        Приведены REST эндпоинты, Kafka топики и метрики FamilyStabilityIndex, HeritageDisputeRate.
      mechanics_links:
        - mechanics/social/family-relationships-system.yaml
      assets: []
appendix:
  glossary: []
  references:
    - title: 'Family Tree Schema'
      path: schemas/social/family-tree-response.schema.json
    - title: 'Family Heritage Schema'
      path: schemas/economy/family-heritage.schema.json
implementation:
  github_issue: 424
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '1.1.0'
    date: 2025-12-06
    author: idea-writer
    changes: Добавлен лор и атмосферные описания в стиле Cyberpunk 2077, расширены описания семейных отношений с контекстом киберпанк-мира.
  - version: '1.0.1'
    date: 2025-11-11
    author: concept_director
    changes: 'Конвертация в YAML, структурирование эмоций, событий и API.'
  - version: '1.0.0'
    date: 2025-11-07
    author: concept_director
    changes: 'Подробно описаны семейные структуры, события и наследование.'
validation:
  checksum: ''
  schema_version: '1.0'


