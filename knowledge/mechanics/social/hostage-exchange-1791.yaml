# Issue: #1791
metadata:
  id: mechanics-social-hostage-exchange-1791
  title: "Соц/корп: Захват и обмен заложников (PvPvE)"
  document_type: mechanics
  category: social
  status: balanced
  version: "2.0.0"
  last_updated: 2026-01-12T15:30:00Z
  concept_approved: true
  concept_reviewed_at: "2026-01-12T15:30:00Z"
  owners:
    - role: social_designer
      contact: social@necp.game
  tags:
    - social
    - pvpve
    - hostage
    - negotiation
  topics:
    - negotiation
    - risk
    - faction-conflict
  related_systems:
    - social-service
    - world-service
    - analytics-service
    - moderation-service
    - reputation-service
  visibility: internal
  audience:
    - social
    - gameplay
    - analytics
    - moderation
  risk_level: high
summary:
  problem: "Нужна механика заложников в PvPvE: захват, удержание, выкуп/обмен/штурм, репутационные последствия."
  goal: "Определить процесс захвата/удержания, таймеры, опции исходов, награды/штрафы и анти-абуз."
  essence: "Заложники дают выбор: выкуп/обмен/штурм; риск репутации/розыска; защитные флаги и лимиты."
  key_points:
    - "Процесс захвата/удержания, уведомления."
    - "Опции: выкуп, обмен, штурм."
    - "Анти-абуз и санкции."
content:
  sections:
    - id: capture_mechanics
      title: "Механика захвата заложников"
      body: |
        ### Условия захвата:
        - **Целевые объекты**: NPC важных персон, фракционных лидеров, ценных специалистов
        - **Методы захвата**: Нокаут, иммобилизация, угроза силой, хакинг транспорта
        - **Требования к захватчику**: Уровень 15+, фракционная репутация выше нейтральной
        - **Запрещенные зоны**: Безопасные зоны, новичковые районы, фракционные столицы

        ### Процесс захвата:
        1. **Подход и инициация**: Ближний контакт с целью (5-10 метров)
        2. **Мини-игра захвата**: QTE последовательность или stealth-подход
        3. **Транспортировка**: Перемещение к месту удержания (база, убежище, транспорт)
        4. **Уведомление фракции**: Автоматическое оповещение о захвате

        ### Состояние заложника:
        - **Здоровье заложника**: Уменьшается со временем без ухода
        - **Мораль**: Влияет на вероятность побега или сотрудничества
        - **Ценность**: Определяется статусом NPC (обычный/важный/уникальный)
        - **Время жизни**: Максимум 24 часа реального времени
      mechanics_links:
        - mechanics/combat/capture-mechanics.yaml
        - mechanics/world/safe-zones.yaml
      assets: []

    - id: hostage_holding
      title: "Удержание и управление заложниками"
      body: |
        ### Места удержания:
        - **Фракционные базы**: Защищенные помещения с охраной
        - **Убежища**: Временные укрытия в нейтральных зонах
        - **Транспорт**: Движущиеся средства (фургоны, дроны)
        - **Виртуальные тюрьмы**: Цифровое удержание через ICE

        ### Требования к удержанию:
        - **Охрана**: Минимум 1-3 стража в зависимости от ценности заложника
        - **Ресурсы**: Еда, вода, медицинская помощь для поддержания здоровья
        - **Безопасность**: Защита от побега и внешнего штурма
        - **Связь**: Возможность переговоров с фракцией

        ### Система уведомлений:
        - **Фракционное оповещение**: Немедленное уведомление о захвате
        - **Публичные объявления**: Опциональное объявление через чат/новости
        - **Таймеры**: Предупреждения о приближении дедлайнов
        - **Эскалация**: Увеличение наград за голову при задержках
      mechanics_links:
        - mechanics/world/facility-management.yaml
        - mechanics/social/notification-system.yaml
      assets: []

    - id: resolution_options
      title: "Опции разрешения ситуации"
      body: |
        ### Выкуп (Ransom):
        - **Стоимость**: 5000-50000 eddies в зависимости от статуса заложника
        - **Время на сбор**: 30-120 минут после предъявления требований
        - **Бонусы**: Возврат заложника живым, +репутация с фракцией
        - **Риски**: Возможность засады при передаче

        ### Обмен (Exchange):
        - **Предложения**: Обмен на другого заложника, ресурсы, информацию
        - **Переговоры**: Чат/голосовая связь для согласования условий
        - **Медиация**: Возможность привлечения нейтральной третьей стороны
        - **Результат**: Обоюдовыгодное разрешение без потерь

        ### Штурм (Assault):
        - **Подготовка**: Сбор команды, планирование тактики
        - **Временные рамки**: Доступно через 15 минут после захвата
        - **Риски**: Потеря заложника, фракционная война
        - **Награды**: Освобождение заложника, фракционная благодарность

        ### Альтернативные исходы:
        - **Побег заложника**: Успешное освобождение без штурма
        - **Убийство**: Крайняя мера с тяжелыми последствиями
        - **Истечение времени**: Автоматическая смерть заложника
      mechanics_links:
        - mechanics/economy/negotiation-system.yaml
        - mechanics/combat/assault-mechanics.yaml
      assets: []

    - id: consequences_penalties
      title: "Последствия и санкции"
      body: |
        ### Репутационные последствия:
        - **Успешный выкуп**: +10-25 репутации с фракцией заложника
        - **Успешный обмен**: +5-15 репутации, нейтральные отношения
        - **Убийство заложника**: -50 репутации, фракционная война
        - **Истечение времени**: -30 репутации, статус "Wanted"

        ### Экономические санкции:
        - **Штрафы**: Конфискация части доходов от захвата
        - **Баунти**: Награды за голову нарушителя (1000-10000 eddies)
        - **Торговые ограничения**: Запрет на сделки с фракцией
        - **Ресурсные потери**: Конфискация редких предметов

        ### Игровые ограничения:
        - **Розыск**: Увеличение шанса столкновений с фракционной охраной
        - **Блокировка зон**: Запрет доступа в территорию фракции
        - **Социальные штрафы**: Ограничение общения с членами фракции
        - **Миссионные ограничения**: Блокировка фракционных квестов

        ### Долгосрочные эффекты:
        - **Фракционная война**: Эскалация конфликтов между фракциями
        - **Альянсы**: Возможность формирования коалиций против нарушителей
        - **Историческая память**: Запись инцидентов в фракционную историю
      mechanics_links:
        - mechanics/social/reputation-system.yaml
        - mechanics/economy/sanctions-system.yaml
      assets: []

    - id: anti_abuse_protections
      title: "Анти-абуз защита"
      body: |
        ### Защита уязвимых игроков:
        - **Новички**: Полная защита до уровня 10
        - **Квестовые NPC**: Специальная защита от захвата во время миссий
        - **Важные персонажи**: Дополнительная охрана для ключевых NPC
        - **Социальные флаги**: Опциональная защита для игроков

        ### Лимиты на использование:
        - **Дневной лимит**: Максимум 2 захвата заложников в сутки
        - **Фракционный лимит**: Максимум 1 захват от фракции в час
        - **Кулдаун**: 30 минут между захватами одного типа NPC
        - **Глобальный лимит**: Максимум 10 активных заложников в мире

        ### Система обнаружения злоупотреблений:
        - **Паттерн-анализ**: Обнаружение повторяющихся схем захвата
        - **Модераторский надзор**: Ручная проверка подозрительных случаев
        - **ИИ-мониторинг**: Автоматическое отслеживание аномальной активности
        - **Сообщественные отчеты**: Возможность жалоб на абуз

        ### Санкции за злоупотребления:
        - **Временная блокировка**: Запрет на захват заложников (1-7 дней)
        - **Репутационные штрафы**: Дополнительные потери репутации
        - **Экономические штрафы**: Конфискация ресурсов и валюты
        - **Аккаунт-баны**: В крайних случаях полная блокировка
      mechanics_links:
        - mechanics/moderation/abuse-detection.yaml
        - mechanics/social/protection-systems.yaml
      assets: []

    - id: telemetry_analytics
      title: "Телеметрия и аналитика"
      body: |
        ### Метрики захвата:
        - **captures_initiated**: Количество попыток захвата по типам целей
        - **capture_success_rate**: Процент успешных захватов
        - **holding_duration**: Среднее время удержания заложников
        - **hostage_value_distribution**: Распределение по ценности заложников

        ### Метрики разрешения:
        - **ransom_success_rate**: Процент успешных выкупов
        - **exchange_rate**: Частота использования обмена
        - **assault_frequency**: Количество штурмов и их успех
        - **hostage_survival_rate**: Процент выживших заложников

        ### Метрики последствий:
        - **reputation_changes**: Средние изменения репутации
        - **bounty_issued**: Количество выданных наград за голову
        - **faction_conflicts**: Эскалация фракционных войн
        - **economic_impact**: Суммарные штрафы и награды

        ### Аналитические цели:
        - Баланс между риском и вознаграждением
        - Оптимизация защитных механизмов
        - Выявление паттернов злоупотреблений
        - Улучшение пользовательского опыта переговоров
      mechanics_links:
        - mechanics/analytics/hostage-telemetry.yaml
        - mechanics/analytics/risk-balance-metrics.yaml
      assets: []

    - id: integration_requirements
      title: "Требования интеграции"
      body: |
        ### Системные компоненты:
        - **NPC система**: Расширение AI для поведения заложников
        - **Репутационная система**: Интеграция с фракционными отношениями
        - **Экономическая система**: Поддержка выкупов и штрафов
        - **Чат система**: Переговоры между сторонами

        ### Технические требования:
        - **Синхронизация состояний**: Надежное отслеживание статуса заложников
        - **Многоигровая синхронизация**: Корректное отображение для всех игроков
        - **Производительность**: Минимальное влияние на серверные ресурсы
        - **Безопасность**: Защита от эксплойтов и манипуляций

        ### UI/UX элементы:
        - **Уведомления захвата**: Всплывающие окна и звуковые сигналы
        - **Панель управления**: Интерфейс для переговоров и управления
        - **Карта локаций**: Отображение мест удержания заложников
        - **История инцидентов**: Лог предыдущих захватов и их исходов

        ### Модераторские инструменты:
        - **Мониторинг**: Панель для отслеживания активных ситуаций
        - **Интервенция**: Возможность модераторского вмешательства
        - **Логи аудита**: Полная история всех операций с заложниками
      mechanics_links:
        - mechanics/systems/hostage-integration.yaml
        - mechanics/ui/negotiation-interface.yaml
      assets: []
appendix:
  glossary:
    - term: "Hostage Capture"
      definition: "Процесс захвата и удержания NPC или игрока для получения выгоды через выкуп, обмен или штурм"
    - term: "Ransom"
      definition: "Выкуп за освобождение заложника, выплачиваемый фракцией или семьей"
    - term: "Hostage Exchange"
      definition: "Обмен заложниками между конфликтующими сторонами для взаимного освобождения"
    - term: "Assault Mission"
      definition: "PvPvE операция по освобождению заложника силой с участием команды спасателей"
    - term: "Faction Reputation"
      definition: "Уровень отношений с фракцией, влияющий на доступ к услугам и территориям"
  references:
    - id: mechanics/combat/capture-mechanics
      title: "Механика захвата и иммобилизации"
      type: document
    - id: mechanics/social/reputation-system
      title: "Система фракционной репутации"
      type: document
    - id: mechanics/economy/negotiation-system
      title: "Система переговоров и сделок"
      type: document
    - id: mechanics/moderation/abuse-detection
      title: "Система обнаружения злоупотреблений"
      type: document
    - id: mechanics/analytics/hostage-telemetry
      title: "Телеметрия операций с заложниками"
      type: document
  decisions:
    - rationale: "Механика заложников добавляет глубину в фракционные конфликты с элементами риска и переговоров"
      impact: "Создает новые возможности для социальной игры и стратегических решений"
    - rationale: "Строгая система последствий предотвращает злоупотребления и защищает игроков"
      impact: "Обеспечивает справедливость и поддерживает баланс между фракциями"
    - rationale: "Комплексная защита уязвимых игроков сохраняет доступность игры для новичков"
      impact: "Повышает retention и удовлетворенность игроков начального уровня"
implementation:
  github_issue: 1791
  needs_task: false
  queue_reference: [ ]
  blockers: [ ]
history:
  - version: "1.0.0"
    date: 2025-12-12
    author: idea_writer
    changes: "Захват/обмен заложников: флоу, исходы, анти-абуз, телеметрия."
validation:
  checksum: ""
  schema_version: "1.0"

