metadata:
  id: player-orders-advanced
  title: Система заказов — продвинутые механики
  document_type: mechanics
  category: social
  status: in-review
  version: '1.0.0'
  last_updated: 2025-11-29T10:55:00Z
  concept_approved: false
  concept_reviewed_at: ''
  processed_by: idea-writer
  processed_at: 2025-11-29T10:55:00Z
  github_issue_number: 305
  owners:
    - role: social_lead
      contact: social@necp.game
  tags:
    - player-orders
    - advanced-mechanics
  topics:
    - social-systems
    - economy
  related_systems:
    - social-service
    - economy-service
  related_documents:
    - id: player-orders-system-detailed
      relation: elaborates
    - id: player-orders-advanced-detailed
      relation: elaborates
    - id: github-issue-305
      title: GitHub Issue #305
      link: https://github.com/gc-lover/necpgame-monorepo/issues/305
      relation: processed_by
      processed_at: 2025-11-29T10:55:00Z
  source: shared/docs/knowledge/mechanics/social/player-orders-advanced.md
  visibility: internal
  audience:
    - concept
    - social
    - economy
  risk_level: medium
review:
  chain:
    - role: social_lead
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: Необходимо описать продвинутые механики системы заказов, выходящие за рамки базовых сценариев.
  goal: Зафиксировать варианты многопользовательских заказов, аукционов, арбитража и страхования для последующей детализации.
  essence: Документ определяет набор специальных правил и ролевых сценариев, расширяющих социальные взаимодействия вокруг заказов.
  key_points:
    - Расширенные механики повышают глубину кооперации и конкуренции между игроками.
    - Аукционы, опционы и страхование требуют синхронизации экономики и социума.
    - Арбитраж и безопасность заказов опираются на telemetry и репутационные показатели.
content:
  sections:
    - id: introduction
      title: Введение
      body: |
        ## Лор и контекст
        
        В мире Night City заказы стали основой экономики подполья. С развитием технологий и ростом сложности операций появились продвинутые механики, которые позволяют игрокам создавать сложные кооперативные схемы, торговаться за контракты и защищать свои интересы через страхование и арбитраж.
        
        Эти механики отражают реальность киберпанк-мира, где доверие — редкий ресурс, а каждый контракт может стать ловушкой или золотой жилой. Система продвинутых заказов создаёт глубину социальных взаимодействий, превращая простые задания в сложные экономические и социальные операции.
        
        ## Назначение
        
        Продвинутые механики создают дополнительную стратегию вокруг заказов: совместное выполнение, торги и оптимизацию рисков. Документ задаёт направления для дальнейшего проектирования.
      mechanics_links:
        - mechanics/social/player-orders-system-детально.md
      assets: []
    - id: multi_executor_orders
      title: Мульти-исполнительные заказы
      body: |
        ## Лор и контекст
        
        В Night City сложные операции часто требуют команды специалистов. Мульти-исполнительные заказы позволяют игрокам объединяться для выполнения задач, которые невозможно решить в одиночку. Это может быть рейд на корпоративный объект, требующий хакера, бойца и инженера, или контрабанда груза через несколько блокпостов, где нужны водитель, переговорщик и охранник.
        
        ## Механика
        
        Заказы могут требовать нескольких ролей и подтверждения всех участников. Награда и ответственность распределяются по вкладу, а репутация обновляется для каждого исполнителя.
        
        ### Типы ролей
        
        - **Лидер команды** — создаёт заказ и приглашает исполнителей, получает бонус за координацию
        - **Специалист** — выполняет конкретную роль (хакер, боец, инженер, медик)
        - **Поддержка** — обеспечивает логистику, разведку или прикрытие
        
        ### Распределение наград
        
        Награда распределяется на основе:
        - Вклада каждого участника (процент выполнения задач)
        - Сложности роли (специалисты получают больше)
        - Репутации (высокая репутация даёт бонус)
        - Риска (участники опасных операций получают премию)
        
        ### Репутация
        
        Каждый участник получает обновление репутации на основе:
        - Успешности выполнения своей роли
        - Кооперации с другими участниками
        - Соблюдения условий заказа
      mechanics_links:
        - mechanics/social/player-orders-advanced-детально.md
      assets: []
    - id: auction_flows
      title: Аукционные потоки
      body: |
        ## Лор и контекст
        
        В подпольной экономике Night City аукционы стали стандартом для распределения ценных контрактов. Заказчики выставляют задания на торги, а исполнители соревнуются за право выполнить заказ, предлагая лучшие условия. Это создаёт динамичный рынок, где цена и качество услуг определяются спросом и предложением.
        
        Аукционы проводятся в специальных цифровых хабах, где фиксеры и брокеры организуют торги. Каждый аукцион — это мини-спектакль, где ставки делаются в реальном времени, а победитель получает не только контракт, но и репутацию.
        
        ## Механика
        
        Аукционы позволяют заказчикам объявлять торги на цену и условия. Форматы поддерживают прямые, голландские и закрытые торги, а economy-service рассчитывает комиссии и залоги.
        
        ### Типы аукционов
        
        - **Прямой аукцион** — классический формат, где ставки растут, а победитель — тот, кто предложил самую высокую цену или лучшие условия
        - **Голландский аукцион** — цена начинается высокой и снижается, первый, кто согласится, получает контракт
        - **Закрытый аукцион** — все ставки подаются одновременно, победитель определяется по лучшему соотношению цена/качество
        
        ### Комиссии и залоги
        
        - **Комиссия организатора** — процент от суммы контракта (обычно 5-10%)
        - **Залог** — гарантийный депозит, который теряется при нарушении условий
        - **Регистрационный взнос** — плата за участие в аукционе
        
        ### Стратегия
        
        Игроки могут использовать различные стратегии:
        - **Агрессивная ставка** — высокая цена для гарантированного получения контракта
        - **Снижение условий** — предложение лучших условий вместо высокой цены
        - **Коалиции** — объединение с другими игроками для совместных ставок
      mechanics_links:
        - mechanics/social/player-orders-system-детально.md
      assets: []
    - id: options_and_cancellation
      title: Опционы и отмена
      body: |
        ## Лор и контекст
        
        В нестабильном мире Night City заказы могут быть отменены по множеству причин: изменение обстановки, вмешательство корпораций, смерть заказчика или просто изменение планов. Опционы на отмену позволяют игрокам защитить свои интересы, получив компенсацию даже если заказ не был выполнен.
        
        Эта система отражает реальность киберпанк-мира, где ничто не гарантировано, а каждый контракт может быть нарушен. Опционы стали стандартным инструментом для управления рисками в подпольной экономике.
        
        ## Механика
        
        Игроки могут покупать опционы на отмену заказов, удерживая часть вознаграждения и снижая риск. История отмен влияет на доверие и стоимость страховки.
        
        ### Типы опционов
        
        - **Опцион на отмену заказчиком** — защищает исполнителя от отмены заказа заказчиком
        - **Опцион на отмену исполнителем** — позволяет исполнителю отменить заказ с минимальными потерями
        - **Взаимный опцион** — защищает обе стороны от отмены
        
        ### Стоимость опционов
        
        Стоимость опциона зависит от:
        - Суммы заказа (процент от награды)
        - Репутации заказчика (низкая репутация = дороже опцион)
        - Сложности заказа (опасные заказы = дороже опцион)
        - Истории отмен (частые отмены = дороже опцион)
        
        ### Компенсация
        
        При отмене заказа:
        - Исполнитель получает компенсацию согласно опциону
        - Заказчик теряет часть залога
        - Репутация обеих сторон обновляется
      mechanics_links:
        - mechanics/social/player-orders-world-impact-детально.md
      assets: []
    - id: arbitration
      title: Арбитраж и разрешение споров
      body: |
        ## Лор и контекст
        
        В мире Night City нет официальных судов для разрешения споров в подпольной экономике. Вместо этого существуют арбитражные палаты, управляемые влиятельными фиксерами и корпорациями. Эти палаты анализируют споры вокруг заказов и выносят решения, которые обязательны для всех участников.
        
        Арбитраж стал важной частью экономики заказов, обеспечивая справедливость и защиту интересов всех сторон. Решения арбитров влияют на репутацию и доступ к будущим контрактам.
        
        ## Механика
        
        Арбитраж запускается при нарушении условий заказа. Система анализирует логи, подтверждения NPC и страховые контракты, назначая компенсации и штрафы.
        
        ### Триггеры арбитража
        
        - Нарушение условий заказа (невыполнение, частичное выполнение)
        - Споры о качестве выполнения
        - Нарушение сроков
        - Обман или мошенничество
        
        ### Процесс арбитража
        
        1. **Подача жалобы** — одна из сторон подаёт заявку на арбитраж
        2. **Сбор доказательств** — система собирает логи, подтверждения NPC, страховые контракты
        3. **Анализ** — арбитражная палата анализирует доказательства
        4. **Решение** — выносится решение с компенсациями и штрафами
        5. **Исполнение** — решение автоматически исполняется через economy-service
        
        ### Решения
        
        Арбитраж может назначить:
        - **Компенсацию** — выплату пострадавшей стороне
        - **Штраф** — наказание для нарушителя
        - **Репутационные изменения** — обновление репутации обеих сторон
        - **Блокировку** — временный запрет на создание/принятие заказов
      mechanics_links:
        - mechanics/social/player-orders-system-детально.md
      assets: []
    - id: insurance
      title: Страхование заказов
      body: |
        ## Лор и контекст
        
        В опасном мире Night City каждый заказ может закончиться провалом. Страховые компании предлагают защиту от рисков, покрывая убытки при неудачном выполнении заказов. Это стало стандартной практикой для ценных контрактов, где потери могут быть критическими.
        
        Страховые компании в Night City — это гибрид корпораций и подпольных организаций, которые используют сложные алгоритмы для расчёта рисков и премий. Они анализируют тысячи факторов, от репутации исполнителей до текущей обстановки в городе.
        
        ## Механика
        
        Страховые контракты покрывают провалы миссий, утрату грузов и задержки. Премии рассчитываются динамически на основе сложности, репутации исполнителей и статистики провалов.
        
        ### Типы страховки
        
        - **Страхование провала миссии** — покрывает убытки при неудачном выполнении
        - **Страхование груза** — защищает от утраты или повреждения груза
        - **Страхование задержек** — компенсирует убытки от просрочки
        - **Комплексная страховка** — покрывает все риски
        
        ### Расчёт премий
        
        Премия рассчитывается на основе:
        - **Сложности заказа** — опасные заказы стоят дороже
        - **Репутации исполнителя** — низкая репутация = дороже страховка
        - **Статистики провалов** — история неудач увеличивает стоимость
        - **Текущей обстановки** — нестабильность в городе повышает премию
        - **Суммы заказа** — большие суммы требуют больших премий
        
        ### Выплаты
        
        При наступлении страхового случая:
        - Система автоматически проверяет условия страховки
        - Рассчитывает размер компенсации
        - Выплачивает компенсацию через economy-service
        - Обновляет статистику для будущих расчётов
      mechanics_links:
        - mechanics/social/player-orders-world-impact-детально.md
      assets: []
appendix:
  glossary: []
  references:
    - title: Продвинутые сценарии заказов (детально)
      link: ./player-orders-advanced-детально.md
    - title: Базовая система заказов
      link: ./player-orders-system-детально.md
  decisions: []
implementation:
  github_issue: 305
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml#player-orders-advanced
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-03
    author: social_team
    changes: Выделено из player-orders-system и описаны направления продвинутых механик.
validation:
  checksum: ''
  schema_version: '1.0'

