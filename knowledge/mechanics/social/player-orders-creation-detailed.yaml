metadata:
  id: player-orders-creation-detailed
  title: Система заказов — создание заказа (детально)
  document_type: mechanics
  category: social
  status: approved
  version: '1.1.0'
  last_updated: 2025-12-06T11:33:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-08T09:53:00Z
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - player-orders
    - social-contracts
    - budgeting
  topics:
    - order_system
    - contract_creation
  related_systems:
    - social-service
    - economy-service
    - npc-service
  related_documents:
    - id: player-orders-system-detailed
      relation: references
    - id: player-orders-reputation-detailed
      relation: complements
    - id: npc-hiring-system-detailed
      relation: complements
  source: shared/docs/knowledge/mechanics/social/player-orders-creation-детально.md
  visibility: internal
  audience:
    - concept
    - systems
    - economy
  risk_level: high
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: 2025-11-08T09:53:00Z
      status: approved
  next_actions: []
summary:
  problem: Требовалось детально описать мастер создания игроком заказа с учётом бюджета, рисков и интеграций.
  goal: Формализовать этапы подготовки брифа, расчёта бюджета и публикации для автоматизации в social-service.
  essence: Документ фиксирует конвейер создания заказа, формулы бюджета, режимы публикации и API/UX требования.
  key_points:
    - Описан многошаговый процесс от предусловий до публикации с проверками и гарантиями.
    - Приведены формулы расчёта бюджета, escrow и комиссий с JSON схемами.
    - Зафиксированы REST/Kafka контуры, UX wizard и интеграции с economy/relationships сервисами.
content:
  sections:
    - id: world_lore
      title: Мир и лор: Создание заказа как искусство
      body: |
        В Night City создание заказа — это не просто заполнение формы, это искусство формулировки, которое определяет, кто откликнется и как будет выполнен контракт. Правильный бриф привлекает профессионалов. Неправильный — привлекает мошенников. В киберпанк-реальности каждый заказ — это вызов, который нужно правильно описать.
        
        **Мастер создания:** Процесс начинается с выбора шаблона — боевой, хакерский, экономический, социальный или исследовательский. Каждый шаблон задаёт структуру, но детали определяешь ты. В Night City шаблоны — это отправная точка, но успех зависит от того, как ты их используешь.
        
        **Бриф и параметры:** Цель должна быть чёткой. Сроки должны быть реалистичными. Бюджет должен соответствовать сложности. Риски должны быть оценены. В киберпанк-мире нечёткий бриф — это приглашение к мошенничеству. Детальный бриф — это гарантия качества.
        
        **Оценка сложности:** Система анализирует задачу, сравнивая с историческими данными. Сложность определяет рекомендованный бюджет и требования к исполнителю. В Night City переоценка сложности — это переплата. Недооценка — это риск провала.
        
        **Режимы публикации:** Публичный заказ виден всем, но конкуренция высока. Отборный заказ позволяет выбрать исполнителя. Закрытый заказ доступен только приглашённым. Аукционный заказ создаёт конкуренцию между исполнителями. В киберпанк-мире выбор режима определяет, кто увидит твой заказ и как будет проходить отбор.
      mechanics_links:
        - mechanics/social/player-orders-system-detailed.yaml
      assets: []
    - id: pipeline
      title: 'Конвейер создания заказа'
      body: |
        Конвейер охватывает подготовку брифа, валидацию, оценку сложности, выбор публикации и гарантий. Оркестрация выполняется social-service с вызовами economy-service и npc-service.
      mechanics_links:
        - mechanics/social/player-orders-system-detailed.yaml
      assets: []
    - id: prerequisites
      title: 'Предусловия'
      body: |
        Требования к рейтингу, финансовому покрытию и авторизации фракций фиксируют доступ к созданию заказов.
      mechanics_links:
        - mechanics/social/player-orders-reputation-detailed.yaml
      assets: []
    - id: templates
      title: 'Шаблоны заказов'
      body: |
        Справочник шаблонов (боевой, хакерский, экономический, социальный, исследовательский) задаёт предзаполненные поля и подсказки для мастера.
      mechanics_links:
        - mechanics/social/player-orders-system.yaml
      assets: []
    - id: brief_parameters
      title: 'Параметры брифа'
      body: |
        Определены поля цели, сроков, бюджета, рисков, команды и приватности. Документы загружаются через content-service.
      mechanics_links:
        - mechanics/social/player-orders-creation.yaml
      assets: []
    - id: complexity_estimation
      title: 'Оценка сложности'
      body: |
        Сложность рассчитывается по данным world-service и factions-service. Результат влияет на рекомендованный бюджет и допуск исполнителей.
      mechanics_links:
        - mechanics/social/player-orders-world-impact.yaml
      assets: []
    - id: budget_formula
      title: 'Расчёт бюджета'
      body: |
        Приведена формула BaseReward с модификаторами риска, рынка и времени, а также правила escrow и комиссий. Указана JSON схема бюджета.
      mechanics_links:
        - mechanics/economy/economy-analytics.yaml
      assets: []
    - id: publication_modes
      title: 'Режимы публикации'
      body: |
        Описаны публичный, пригласительный и закрытый режимы, включая адресные публикации через relationships-system.
      mechanics_links:
        - mechanics/social/relationships-system.yaml
      assets: []
    - id: validation_guarantees
      title: 'Валидация и гарантии'
      body: |
        Содержит проверки юридических ограничений, фильтрации контента, санкций и уровней страхования escrow.
      mechanics_links:
        - mechanics/social/security-compliance.yaml
      assets: []
    - id: ux_flow
      title: 'UX-поток'
      body: |
        Мастер, подсказки, индикаторы готовности и симуляция бюджета обеспечивают удобство создания заказа. Поддержаны черновики и интеграции с relationships-service.
      mechanics_links:
        - mechanics/social/player-orders-ui.yaml
      assets: []
    - id: api_integrations
      title: 'API и события'
      body: |
        Приведены REST эндпоинты создания, оценки, валидации и публикации заказов, а также основные Kafka события и подписчики.
      mechanics_links:
        - mechanics/social/player-orders-system-detailed.yaml
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  github_issue: 415
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml#CON-2025-223
  blockers: []
history:
  - version: '1.1.0'
    date: 2025-12-06
    author: idea-writer
    changes: Добавлен лор и атмосферные описания в стиле Cyberpunk 2077, расширены описания создания заказов с контекстом киберпанк-мира.
  - version: '1.0.0'
    date: 2025-11-08
    author: concept_director
    changes: Детализирован мастер создания заказа, формулы бюджета и интеграции; подтверждена готовность к API задачам.
validation:
  checksum: ''
  schema_version: '1.0'

