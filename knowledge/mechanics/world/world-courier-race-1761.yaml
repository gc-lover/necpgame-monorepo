title: Гонка курьеров (асинхронный тайм-триал)
# Issue: #1761
summary:
  goal: Асинхронная доставка груза по городу на время; сезонная таблица лидеров, малая награда за участие.
routes:
  count: 5
  random_rotation: daily
  conditions: traffic_variants, weather_variants
rules:
  anti_cheat: ghost replay validation + speed caps
  fail_conditions: cargo_damage >30% or timeout
rewards:
  placement: top1-3 cosmetic badges
  participation: minor credits
  season_reset_days: 30
ux:
  ghosts: top1 and personal best
  checkpoints: mandatory scan
telemetry:
  - metric: courier_attempts
    desc: попытки/завершения
  - metric: courier_records
    desc: лучшие времена, распределение
  - metric: courier_failures
    desc: причины фейлов (damage/timeout/cheat_flag)
edge_cases:
  - anti_abuse: аномальные спидран траектории → ручная проверка, награды удержаны
  - coop: соло формат, сквад не влияет
  - minors: отключить внешний чат/грубые граффити на маршруте

# Issue: #1761
metadata:
  id: world-courier-race-1761
  title: "Гонка курьеров (асинхронный тайм-триал)"
  document_type: mechanics
  category: world
  status: draft
  version: "1.0.0"
  last_updated: 2025-12-12T00:00:00Z
  concept_approved: false
  concept_reviewed_at: ""
  owners:
    - role: world_designer
      contact: world@necp.game
  tags:
    - race
    - time-trial
    - courier
  topics:
    - movement
    - leaderboard
  related_systems:
    - world-service
    - analytics-service
    - anti-cheat-service
  visibility: internal
  audience:
    - world
    - gameplay
    - analytics
  risk_level: medium
summary:
  problem: "Нужна асинхронная гонка курьеров: доставка груза на время, лидборды сезона, малая награда за участие."
  goal: "Определить маршруты, условия зачёта, награды/сезонный ресет и анти-чит."
  essence: "Тайм-триал доставки: фантомы/тени рекордов, награды за место и участие, анти-чит проверка траекторий."
content:
  sections:
    - id: routes
      title: "Маршруты и зачёт"
      body: |
        • Маршруты по городским районам, чекпоинты обязательны.  
        • Условия: целостность груза, таймер; пропуск чекпоинта аннулирует попытку.  
        • Асинхрон: фантомы лидеров/друзей.
      mechanics_links: [ ]
      assets: [ ]
    - id: rewards
      title: "Награды"
      body: |
        • Малая награда за участие, косметика/титул за топ места.  
        • Сезонный ресет (неделя/месяц), выдача наград в конце сезона.
      mechanics_links: [ ]
      assets: [ ]
    - id: anti-cheat
      title: "Анти-чит/валидаторы"
      body: |
        • Траектория/скорость валидируются; аномалии → дисквалификация.  
        • Запрет телепортов/эксплойтов; логи для апелляций.  
        • Shadow-ban попыток с подозрительными паттернами.
      mechanics_links: [ ]
      assets: [ ]
    - id: telemetry
      title: "Телеметрия"
      body: |
        • attempts, completions, best_time, route_popularity.  
        • dq_events, cheat_flags, participation_rate.  
        • Цели: честный тайм-триал, награды мотивируют участие без p2w.
      mechanics_links: [ ]
      assets: [ ]
appendix:
  glossary: [ ]
  references: [ ]
  decisions: [ ]
implementation:
  github_issue: 1761
  needs_task: false
  queue_reference: [ ]
  blockers: [ ]
history:
  - version: "1.0.0"
    date: 2025-12-12
    author: world_team
    changes: "Асинхронная гонка курьеров: маршруты, награды, анти-чит, телеметрия."
validation:
  checksum: ""
  schema_version: "1.0"

