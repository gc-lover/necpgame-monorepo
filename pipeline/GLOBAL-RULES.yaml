global_rules:
  principles:
    - "API First: идеи → OpenAPI → backend → frontend."
    - "Все изменения и статусы фиксируются в репозитории с осмысленной историей коммитов."
    - "Файлы ≤ 400 строк; при необходимости разбивай на серии с ссылками между частями."
    - "Не хардкодь данные в коде — используй БД и миграции."
    - "Инструкции ссылаются на источники вместо дублирования правил."
    - "Монорепозиторий: работай через git worktree или короткоживущие ветки, избегай долгих feature-веток."
  documentation_hierarchy:
    - "shared/docs/knowledge/ — канон, механики, контент и исследования в формате YAML."
    - "shared/trackers/ — очереди и статусные трекеры."
    - "GLOBAL-RULES.yaml — основы проекта и ограничения."
    - "process/*.yaml — последовательность этапов и статусы."
    - "agents-yaml/*.yaml — структурированные инструкции по ролям и workflow."
    - "checklists/*.yaml — проверки перед передачей задачи дальше."
    - "templates/*.yaml — формы задач, трекеров, отчётов."
    - "trackers/*.yaml — актуальные записи о ходе работ."
  agent_requirements:
    - "Перед стартом сверяйся с зависимостями (статусы предыдущих стадий)."
    - "Приступая к работе, обновляй трекер (например, status: in_progress, отметка времени)."
    - "Завершая работу, выполняй чеклист, фиксируй результаты, обновляй статусы."
    - "Оставляй короткую запись в trackers/activity-log.yaml."
  quality_management:
    - "Перед коммитом запускай валидаторы и линтеры (OpenAPI, Java, TypeScript и т.д.)."
    - "Для знаний выполняй pipeline/scripts/check-knowledge-schema.ps1; для очередей — pipeline/scripts/check-queue-yaml.ps1."
    - "Изменения в API сопровождай bump версии и уведомлением зависимых команд."
    - "Спорные решения фиксируй через process/DECISION-LOG.yaml."
    - "Перед push используй pipeline/scripts/run-precommit.ps1 (или эквивалентный pre-commit hook)."
    - "Установи hook через pipeline/scripts/install-precommit.ps1, чтобы run-precommit запускался автоматически."
    - "Используй pipeline/scripts/queue-manager.ps1 или python pipeline/scripts/queue_manager.py вместо ручного редактирования shared/trackers/queues/*.yaml."
  maintenance:
    - "Назначай ответственных за роли и трекеры в trackers/owners.yaml."
    - "Проводить ревизию инструкций и чеклистов не реже раза в неделю."
    - "При крупных обновлениях используй templates/CHANGE-PACK.yaml для пошагового внедрения."
    - "Тяжёлые артефакты (медиа, LFS) держи в отдельных хранилищах либо подключай git LFS."


