format: uuid
enemy_type:
  $ref: "#/components/schemas/EnemyType"
position:
  $ref: "#/components/schemas/Position"
health_percentage:
  type: number
  minimum: 0
  maximum: 100
threat_level:
  type: string
  enum: [ low, medium, high, extreme ]
squad_id:
  type: string
  format: uuid
  nullable: true

Position:
  type: object
  properties:
    x:
      type: number
      format: float
    y:
      type: number
      format: float
    z:
      type: number
      format: float
    zone_id:
      type: string
      format: uuid

SpawnEnemyRequest:
  type: object
  required:
    - enemy_type
    - position
    - zone_id
  properties:
    enemy_type:
      $ref: "#/components/schemas/EnemyType"
    position:
      $ref: "#/components/schemas/Position"
    zone_id:
      type: string
      format: uuid
    squad_id:
      type: string
      format: uuid
      nullable: true
    initial_health:
      type: integer
      minimum: 1
    threat_level:
      type: string
      enum: [ low, medium, high, extreme ]
      default: medium

EnemyResponse:
  type: object
  properties:
    enemy_id:
      type: string
      format: uuid
    enemy_type:
      $ref: "#/components/schemas/EnemyType"
    position:
      $ref: "#/components/schemas/Position"
    health:
      $ref: "#/components/schemas/Health"
    abilities:
      type: array
      items:
        $ref: "#/components/schemas/Ability"
    behavior_state:
      $ref: "#/components/schemas/BehaviorState"
    squad_id:
      type: string
      format: uuid
      nullable: true
    threat_level:
      type: string
      enum: [ low, medium, high, extreme ]
    created_at:
      type: string
      format: date-time
    last_updated:
      type: string
      format: date-time

Health:
  type: object
  properties:
    current:
      type: integer
      minimum: 0
    maximum:
      type: integer
      minimum: 1
    percentage:
      type: number
      minimum: 0
      maximum: 100

Ability:
  type: object
  properties:
    ability_id:
      type: string
    name:
      type: string
    cooldown_seconds:
      type: integer
      minimum: 0
    charges_remaining:
      type: integer
      minimum: 0
    damage:
      type: integer
      minimum: 0

BehaviorState:
  type: object
  properties:
    current_behavior:
      type: string
    target_player_id:
      type: string
      format: uuid
      nullable: true
    movement_state:
      type: string
      enum: [ idle, patrolling, chasing, attacking, retreating ]
    last_decision_time:
      type: string
      format: date-time

UpdateEnemyRequest:
  type: object
  properties:
    position:
      $ref: "#/components/schemas/Position"
    health:
      $ref: "#/components/schemas/Health"
    behavior_state:
      $ref: "#/components/schemas/BehaviorState"
    abilities:
      type: array
      items:
        $ref: "#/components/schemas/Ability"

EnemyBehaviorResponse:
  type: object
  properties:
    enemy_id:
      type: string
      format: uuid
    behavior_tree:
      type: object
      description: Current behavior tree state
    decision_factors:
      type: object
      description: Current decision-making factors
    target_priorities:
      type: array
      items:
        type: object
        properties:
          target_id:
            type: string
            format: uuid
          priority_score:
            type: number
            minimum: 0
            maximum: 1

TriggerBehaviorRequest:
  type: object
  required:
    - behavior_type
  properties:
    behavior_type:
      type: string
      enum: [ attack, retreat, patrol, ability_use, coordination ]
    target_id:
      type: string
      format: uuid
      nullable: true
    parameters:
      type: object
      description: Behavior-specific parameters

UseAbilityRequest:
  type: object
  required:
    - ability_id
  properties:
    ability_id:
      type: string
    target_id:
      type: string
      format: uuid
      nullable: true
    target_position:
      $ref: "#/components/schemas/Position"

AbilityResponse:
  type: object
  properties:
    ability_id:
      type: string
    success:
      type: boolean
    cooldown_remaining:
      type: integer
      minimum: 0
    damage_dealt:
      type: integer
      minimum: 0
    effects_applied:
      type: array
      items:
        type: string

DamageRequest:
  type: object
  required:
    - damage_amount
    - damage_type
  properties:
    damage_amount:
      type: integer
      minimum: 0
    damage_type:
      type: string
      enum: [ physical, energy, chemical, mental, radiation ]
    attacker_id:
      type: string
      format: uuid
    weapon_type:
      type: string
    critical_hit:
      type: boolean
      default: false

DamageResponse:
  type: object
  properties:
    enemy_id:
      type: string
      format: uuid
    damage_dealt:
      type: integer
      minimum: 0
    actual_damage:
      type: integer
      minimum: 0
    damage_reduction:
      type: integer
      minimum: 0
    new_health:
      $ref: "#/components/schemas/Health"
    killed:
      type: boolean
    loot_dropped:
      type: boolean

SquadListResponse:
  type: object
  properties:
    squads:
      type: array
      items:
        $ref: "#/components/schemas/SquadSummary"
    total_count:
      type: integer

SquadSummary:
  type: object
  properties:
    squad_id:
      type: string
      format: uuid
    squad_type:
      type: string
      enum: [ corporate_elite, mercenary_team, cyberpsychic_group ]
    member_count:
      type: integer
    formation_type:
      type: string
      enum: [ offensive, defensive, stealth, mixed ]
    threat_level:
      type: string
      enum: [ low, medium, high, extreme ]

CreateSquadRequest:
  type: object
  required:
    - squad_type
    - zone_id
    - member_ids
  properties:
    squad_type:
      type: string
      enum: [ corporate_elite, mercenary_team, cyberpsychic_group ]
    zone_id:
      type: string
      format: uuid
    member_ids:
      type: array
      items:
        type: string
        format: uuid
      minItems: 1
      maxItems: 10
    formation_type:
      type: string
      enum: [ offensive, defensive, stealth, mixed ]
      default: mixed
    coordination_strategy:
      type: string
      enum: [ aggressive, defensive, coordinated, chaotic ]
      default: coordinated

SquadResponse:
  type: object
  properties:
    squad_id:
      type: string
      format: uuid
    squad_type:
      type: string
    members:
      type: array
      items:
        $ref: "#/components/schemas/EnemySummary"
    formation_type:
      type: string
    coordination_strategy:
      type: string
    threat_level:
      type: string
    created_at:
      type: string
      format: date-time

UpdateSquadRequest:
  type: object
  properties:
    formation_type:
      type: string
      enum: [ offensive, defensive, stealth, mixed ]
    coordination_strategy:
      type: string
      enum: [ aggressive, defensive, coordinated, chaotic ]
    add_members:
      type: array
      items:
        type: string
        format: uuid
    remove_members:
      type: array
      items:
        type: string
        format: uuid

ZoneSyncResponse:
  type: object
  properties:
    zone_id:
      type: string
      format: uuid
    active_enemies:
      type: integer
    active_squads:
      type: integer
    last_sync_time:
      type: string
      format: date-time
    sync_status:
      type: string
      enum: [ healthy, degraded, syncing, failed ]

TelemetryResponse:
  type: object
  properties:
    metric:
      type: string
    timeframe:
      type: string
    data_points:
      type: array
      items:
        type: object
        properties:
          timestamp:
            type: string
            format: date-time
          value:
            type: number
    average:
      type: number
    peak:
      type: number
    total:
      type: number
