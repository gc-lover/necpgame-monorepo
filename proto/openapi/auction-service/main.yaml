openapi: "3.0.3"

info:
  title: "Auction Service API"
  description: |
    Enterprise-grade Auction System –¥–ª—è NECPGAME –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.

    ## üéØ **Auction Service Overview**

    Auction Service –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∞—É–∫—Ü–∏–æ–Ω–æ–≤ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã NECPGAME —Å enterprise-grade –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å—é.

    ### **–ö–ª—é—á–µ–≤—ã–µ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**
    - **Auction Creation**: –°–æ–∑–¥–∞–Ω–∏–µ –∞—É–∫—Ü–∏–æ–Ω–æ–≤ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏
    - **Bidding System**: –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–≤–æ–∫ –∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏
    - **Real-time Updates**: –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    - **Auction Completion**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

    ### **–¢–∏–ø—ã –ê—É–∫—Ü–∏–æ–Ω–æ–≤**
    - **English Auction**: –ê–Ω–≥–ª–∏–π—Å–∫–∏–π –∞—É–∫—Ü–∏–æ–Ω —Å –ø–æ–≤—ã—à–µ–Ω–∏–µ–º —Å—Ç–∞–≤–æ–∫
    - **Dutch Auction**: –ì–æ–ª–ª–∞–Ω–¥—Å–∫–∏–π –∞—É–∫—Ü–∏–æ–Ω —Å –ø–æ–Ω–∏–∂–µ–Ω–∏–µ–º —Ü–µ–Ω—ã
    - **Sealed Bid**: –ó–∞–∫—Ä—ã—Ç—ã–π –∞—É–∫—Ü–∏–æ–Ω —Å —Ç–∞–π–Ω—ã–º–∏ —Å—Ç–∞–≤–∫–∞–º–∏
    - **Reserve Auction**: –ê—É–∫—Ü–∏–æ–Ω —Å —Ä–µ–∑–µ—Ä–≤–Ω–æ–π —Ü–µ–Ω–æ–π

    ### **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**
    - **Auto-bidding**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç–∞–≤–∫–∏
    - **Auction Analytics**: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∞—É–∫—Ü–∏–æ–Ω–æ–≤
    - **Fraud Prevention**: –ó–∞—â–∏—Ç–∞ –æ—Ç –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞
    - **Multi-item Auctions**: –ê—É–∫—Ü–∏–æ–Ω—ã —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø—Ä–µ–¥–º–µ—Ç–æ–≤

    ## üìä **Performance Targets**
    - **P99 Latency**: <25ms –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Å—Ç–∞–≤–∫–∞–º–∏
    - **Throughput**: 50,000+ bids/second
    - **Concurrent Auctions**: 10,000+ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞—É–∫—Ü–∏–æ–Ω–æ–≤
    - **Real-time Updates**: <100ms –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å—Ç–∞–≤–æ–∫

    ## üîê **Security**
    - JWT RS256 –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
    - Rate limiting –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ø–∞–º–∞
    - Input validation –∏ sanitization
    - Audit logging –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

  version: "1.0.0"
  contact:
    name: "NECPGAME Platform Team"
    email: "platform@necpgame.com"
  license:
    name: "Proprietary"
    url: "https://necpgame.com/license"

servers:
  - url: "https://auction.necpgame.com/api/v1"
    description: "Production Environment"
  - url: "https://auction-staging.necpgame.com/api/v1"
    description: "Staging Environment"
  - url: "http://localhost:8080/api/v1"
    description: "Local Development"

security:
  - BearerAuth: []

tags:
  - name: "Auction Management"
    description: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—É–∫—Ü–∏–æ–Ω–∞–º–∏"
  - name: "Bidding Operations"
    description: "–û–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ —Å—Ç–∞–≤–∫–∞–º–∏"
  - name: "Auction Monitoring"
    description: "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞—É–∫—Ü–∏–æ–Ω–æ–≤"
  - name: "Analytics"
    description: "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∞—É–∫—Ü–∏–æ–Ω–æ–≤"
  - name: "Auto-bidding"
    description: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç–∞–≤–∫–∏"
  - name: "Health"
    description: "–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞"

paths:
  /health:
    get:
      summary: "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞"
      operationId: "healthCheck"
      tags: ["Health"]
      responses:
        "200":
          description: "–°–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HealthResponse"
        "503":
          description: "–°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /health/batch:
    post:
      summary: "–ü–∞–∫–µ—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è"
      operationId: "healthBatchCheck"
      tags: ["Health"]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/HealthBatchRequest"
      responses:
        "200":
          description: "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HealthBatchResponse"
        "400":
          description: "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /health/ws:
    get:
      summary: "WebSocket –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è"
      operationId: "healthWebSocketCheck"
      tags: ["Health"]
      responses:
        "101":
          description: "WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"
        "503":
          description: "WebSocket –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"

  /auctions:
    post:
      summary: "–°–æ–∑–¥–∞–Ω–∏–µ –∞—É–∫—Ü–∏–æ–Ω–∞"
      operationId: "createAuction"
      tags: ["Auction Management"]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAuctionRequest"
      responses:
        "201":
          description: "–ê—É–∫—Ü–∏–æ–Ω —Å–æ–∑–¥–∞–Ω"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuctionResponse"
        "400":
          description: "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: "–ü—Ä–µ–¥–º–µ—Ç—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∞—É–∫—Ü–∏–æ–Ω–∞"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    get:
      summary: "–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∞—É–∫—Ü–∏–æ–Ω–æ–≤"
      operationId: "getAuctions"
      tags: ["Auction Management"]
      parameters:
        - name: "status"
          in: "query"
          schema:
            type: string
            enum: ["pending", "active", "ended", "cancelled"]
            default: "active"
        - name: "type"
          in: "query"
          schema:
            type: string
            enum: ["english", "dutch", "sealed_bid", "reserve"]
        - name: "category"
          in: "query"
          schema:
            type: string
            enum: ["weapons", "armor", "cyberware", "vehicles", "misc"]
        - name: "minPrice"
          in: "query"
          schema:
            type: integer
            minimum: 0
        - name: "maxPrice"
          in: "query"
          schema:
            type: integer
            minimum: 0
        - name: "limit"
          in: "query"
          schema:
            type: "integer"
            minimum: 1
            maximum: 100
            default: 20
        - name: "offset"
          in: "query"
          schema:
            type: "integer"
            minimum: 0
            default: 0
      responses:
        "200":
          description: "–°–ø–∏—Å–æ–∫ –∞—É–∫—Ü–∏–æ–Ω–æ–≤"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuctionListResponse"

  /auctions/{auctionId}:
    get:
      summary: "–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞—É–∫—Ü–∏–æ–Ω–µ"
      operationId: "getAuction"
      tags: ["Auction Management"]
      parameters:
        - name: "auctionId"
          in: "path"
          required: true
          schema:
            type: string
            format: "uuid"
      responses:
        "200":
          description: "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞—É–∫—Ü–∏–æ–Ω–µ"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuctionResponse"
        "404":
          description: "–ê—É–∫—Ü–∏–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    put:
      summary: "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—É–∫—Ü–∏–æ–Ω–∞"
      operationId: "updateAuction"
      tags: ["Auction Management"]
      parameters:
        - name: "auctionId"
          in: "path"
          required: true
          schema:
            type: string
            format: "uuid"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateAuctionRequest"
      responses:
        "200":
          description: "–ê—É–∫—Ü–∏–æ–Ω –æ–±–Ω–æ–≤–ª–µ–Ω"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuctionResponse"
        "403":
          description: "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: "–ê—É–∫—Ü–∏–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    delete:
      summary: "–û—Ç–º–µ–Ω–∞ –∞—É–∫—Ü–∏–æ–Ω–∞"
      operationId: "cancelAuction"
      tags: ["Auction Management"]
      parameters:
        - name: "auctionId"
          in: "path"
          required: true
          schema:
            type: string
            format: "uuid"
      responses:
        "200":
          description: "–ê—É–∫—Ü–∏–æ–Ω –æ—Ç–º–µ–Ω–µ–Ω"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuctionResponse"
        "403":
          description: "–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –∞—É–∫—Ü–∏–æ–Ω"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: "–ê—É–∫—Ü–∏–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /auctions/{auctionId}/bid:
    post:
      summary: "–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É"
      operationId: "placeBid"
      tags: ["Bidding Operations"]
      parameters:
        - name: "auctionId"
          in: "path"
          required: true
          schema:
            type: string
            format: "uuid"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PlaceBidRequest"
      responses:
        "200":
          description: "–°—Ç–∞–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BidResponse"
        "400":
          description: "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "409":
          description: "–°—Ç–∞–≤–∫–∞ —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∞—è –∏–ª–∏ –∞—É–∫—Ü–∏–æ–Ω –∑–∞–≤–µ—Ä—à–µ–Ω"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /auctions/{auctionId}/bids:
    get:
      summary: "–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞–≤–æ–∫ –∞—É–∫—Ü–∏–æ–Ω–∞"
      operationId: "getAuctionBids"
      tags: ["Bidding Operations"]
      parameters:
        - name: "auctionId"
          in: "path"
          required: true
          schema:
            type: string
            format: "uuid"
        - name: "limit"
          in: "query"
          schema:
            type: "integer"
            minimum: 1
            maximum: 50
            default: 20
      responses:
        "200":
          description: "–°—Ç–∞–≤–∫–∏ –∞—É–∫—Ü–∏–æ–Ω–∞"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuctionBidsResponse"
        "404":
          description: "–ê—É–∫—Ü–∏–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /auctions/{auctionId}/auto-bid:
    post:
      summary: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ-—Å—Ç–∞–≤–∫—É"
      operationId: "setAutoBid"
      tags: ["Auto-bidding"]
      parameters:
        - name: "auctionId"
          in: "path"
          required: true
          schema:
            type: string
            format: "uuid"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SetAutoBidRequest"
      responses:
        "200":
          description: "–ê–≤—Ç–æ-—Å—Ç–∞–≤–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AutoBidResponse"
        "400":
          description: "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–≤—Ç–æ-—Å—Ç–∞–≤–∫–∏"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    delete:
      summary: "–û—Ç–º–µ–Ω–∏—Ç—å –∞–≤—Ç–æ-—Å—Ç–∞–≤–∫—É"
      operationId: "cancelAutoBid"
      tags: ["Auto-bidding"]
      parameters:
        - name: "auctionId"
          in: "path"
          required: true
          schema:
            type: string
            format: "uuid"
      responses:
        "200":
          description: "–ê–≤—Ç–æ-—Å—Ç–∞–≤–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AutoBidResponse"

  /auctions/{auctionId}/watch:
    post:
      summary: "–°–ª–µ–¥–∏—Ç—å –∑–∞ –∞—É–∫—Ü–∏–æ–Ω–æ–º"
      operationId: "watchAuction"
      tags: ["Auction Monitoring"]
      parameters:
        - name: "auctionId"
          in: "path"
          required: true
          schema:
            type: string
            format: "uuid"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WatchAuctionRequest"
      responses:
        "200":
          description: "–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∞—É–∫—Ü–∏–æ–Ω —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WatchResponse"
        "409":
          description: "–£–∂–µ –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ —ç—Ç–æ—Ç –∞—É–∫—Ü–∏–æ–Ω"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    delete:
      summary: "–ü—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∞—É–∫—Ü–∏–æ–Ω–æ–º"
      operationId: "unwatchAuction"
      tags: ["Auction Monitoring"]
      parameters:
        - name: "auctionId"
          in: "path"
          required: true
          schema:
            type: string
            format: "uuid"
      responses:
        "200":
          description: "–ü–æ–¥–ø–∏—Å–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WatchResponse"

  /players/{playerId}/auctions:
    get:
      summary: "–ê—É–∫—Ü–∏–æ–Ω—ã –∏–≥—Ä–æ–∫–∞"
      operationId: "getPlayerAuctions"
      tags: ["Auction Management"]
      parameters:
        - name: "playerId"
          in: "path"
          required: true
          schema:
            type: string
            format: "uuid"
        - name: "role"
          in: "query"
          schema:
            type: string
            enum: ["seller", "bidder", "watcher"]
            default: "seller"
        - name: "status"
          in: "query"
          schema:
            type: string
            enum: ["active", "won", "lost", "ended"]
      responses:
        "200":
          description: "–ê—É–∫—Ü–∏–æ–Ω—ã –∏–≥—Ä–æ–∫–∞"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PlayerAuctionsResponse"

  /auctions/{auctionId}/complete:
    post:
      summary: "–ó–∞–≤–µ—Ä—à–∏—Ç—å –∞—É–∫—Ü–∏–æ–Ω"
      operationId: "completeAuction"
      tags: ["Auction Management"]
      parameters:
        - name: "auctionId"
          in: "path"
          required: true
          schema:
            type: string
            format: "uuid"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CompleteAuctionRequest"
      responses:
        "200":
          description: "–ê—É–∫—Ü–∏–æ–Ω –∑–∞–≤–µ—Ä—à–µ–Ω"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuctionCompletionResponse"
        "400":
          description: "–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –∞—É–∫—Ü–∏–æ–Ω"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /auctions/analytics/summary:
    get:
      summary: "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∞—É–∫—Ü–∏–æ–Ω–æ–≤"
      operationId: "getAuctionAnalytics"
      tags: ["Analytics"]
      parameters:
        - name: "period"
          in: "query"
          schema:
            type: string
            enum: ["hourly", "daily", "weekly", "monthly"]
            default: "daily"
        - name: "category"
          in: "query"
          schema:
            type: string
            enum: ["weapons", "armor", "cyberware", "vehicles", "misc"]
      responses:
        "200":
          description: "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∞—É–∫—Ü–∏–æ–Ω–æ–≤"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuctionAnalyticsResponse"

  /auctions/popular:
    get:
      summary: "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∞—É–∫—Ü–∏–æ–Ω—ã"
      operationId: "getPopularAuctions"
      tags: ["Analytics"]
      parameters:
        - name: "limit"
          in: "query"
          schema:
            type: "integer"
            minimum: 1
            maximum: 50
            default: 20
      responses:
        "200":
          description: "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∞—É–∫—Ü–∏–æ–Ω—ã"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PopularAuctionsResponse"

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    # Common inherited entities
    CharacterEntity:
      $ref: "../common/schemas/game-entities.yaml#/components/schemas/CharacterEntity"
    BaseEntity:
      $ref: "../common/schemas/game-entities.yaml#/components/schemas/BaseEntity"
    OptimisticLock:
      $ref: "../common/schemas/game-entities.yaml#/components/schemas/OptimisticLock"
    ErrorResponse:
      $ref: "../common/schemas/infrastructure-entities.yaml#/components/schemas/ErrorResponse"
    HealthResponse:
      $ref: "../common/schemas/infrastructure-entities.yaml#/components/schemas/HealthResponse"
    HealthBatchRequest:
      $ref: "../common/schemas/infrastructure-entities.yaml#/components/schemas/HealthBatchRequest"
    HealthBatchResponse:
      $ref: "../common/schemas/infrastructure-entities.yaml#/components/schemas/HealthBatchResponse"

    # Auction specific schemas
    AuctionEntity:
      type: object
      description: "–°—É—â–Ω–æ—Å—Ç—å –∞—É–∫—Ü–∏–æ–Ω–∞"
      allOf:
        - $ref: "#/components/schemas/BaseEntity"
        - type: object
          required:
            - sellerId
            - item
            - type
            - startingPrice
            - status
          properties:
            sellerId:
              type: string
              description: "ID –ø—Ä–æ–¥–∞–≤—Ü–∞"
              format: uuid
              example: "123e4567-e89b-12d3-a456-426614174000"
            item:
              $ref: "#/components/schemas/AuctionItemEntity"
            type:
              type: string
              description: "–¢–∏–ø –∞—É–∫—Ü–∏–æ–Ω–∞"
              enum: ["english", "dutch", "sealed_bid", "reserve"]
              example: "english"
            startingPrice:
              type: integer
              description: "–°—Ç–∞—Ä—Ç–æ–≤–∞—è —Ü–µ–Ω–∞"
              minimum: 1
              example: 1000
            reservePrice:
              type: integer
              description: "–†–µ–∑–µ—Ä–≤–Ω–∞—è —Ü–µ–Ω–∞ (–¥–ª—è reserve –∞—É–∫—Ü–∏–æ–Ω–æ–≤)"
              minimum: 1
            buyoutPrice:
              type: integer
              description: "–¶–µ–Ω–∞ –≤—ã–∫—É–ø–∞"
              minimum: 1
            currentPrice:
              type: integer
              description: "–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞"
              minimum: 0
            status:
              type: string
              description: "–°—Ç–∞—Ç—É—Å –∞—É–∫—Ü–∏–æ–Ω–∞"
              enum: ["pending", "active", "ended", "cancelled", "completed"]
              example: "active"
            startTime:
              type: string
              description: "–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞"
              format: date-time
            endTime:
              type: string
              description: "–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è"
              format: date-time
            duration:
              type: integer
              description: "–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö"
              minimum: 5
              maximum: 10080
              example: 1440
            winnerId:
              type: string
              description: "ID –ø–æ–±–µ–¥–∏—Ç–µ–ª—è"
              format: uuid
            winningBid:
              type: integer
              description: "–ü–æ–±–µ–¥–Ω–∞—è —Å—Ç–∞–≤–∫–∞"
              minimum: 0
            totalBids:
              type: integer
              description: "–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–∞–≤–æ–∫"
              minimum: 0
            uniqueBidders:
              type: integer
              description: "–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤"
              minimum: 0
            watchers:
              type: integer
              description: "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π"
              minimum: 0
            category:
              type: string
              description: "–ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞"
              enum: ["weapons", "armor", "cyberware", "vehicles", "misc"]
              example: "weapons"
            rules:
              type: object
              description: "–ü—Ä–∞–≤–∏–ª–∞ –∞—É–∫—Ü–∏–æ–Ω–∞"
              properties:
                minBidIncrement:
                  type: integer
                  description: "–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —à–∞–≥ —Å—Ç–∞–≤–∫–∏"
                  minimum: 1
                  default: 1
                maxBidsPerPlayer:
                  type: integer
                  description: "–ú–∞–∫—Å–∏–º—É–º —Å—Ç–∞–≤–æ–∫ –æ—Ç –∏–≥—Ä–æ–∫–∞"
                  minimum: 1
                allowAutoBidding:
                  type: boolean
                  description: "–†–∞–∑—Ä–µ—à–∏—Ç—å –∞–≤—Ç–æ-—Å—Ç–∞–≤–∫–∏"
                  default: true
                requireVerification:
                  type: boolean
                  description: "–¢—Ä–µ–±–æ–≤–∞—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é"
                  default: false
            isActive:
              type: boolean
              description: "–ê—É–∫—Ü–∏–æ–Ω –∞–∫—Ç–∏–≤–µ–Ω"
              default: true
            $ref: "#/components/schemas/OptimisticLock"

    AuctionItemEntity:
      type: object
      description: "–ü—Ä–µ–¥–º–µ—Ç –∞—É–∫—Ü–∏–æ–Ω–∞"
      required:
        - itemId
        - quantity
      properties:
        itemId:
          type: string
          description: "ID –ø—Ä–µ–¥–º–µ—Ç–∞"
          format: uuid
          example: "456e7890-e89b-12d3-a456-426614174001"
        quantity:
          type: integer
          description: "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ"
          minimum: 1
          example: 1
        itemName:
          type: string
          description: "–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞"
          maxLength: 100
          example: "Militech M-10AF Lexington"
        itemType:
          type: string
          description: "–¢–∏–ø –ø—Ä–µ–¥–º–µ—Ç–∞"
          enum: ["weapon", "armor", "cyberware", "consumable", "misc"]
          example: "weapon"
        rarity:
          type: string
          description: "–†–µ–¥–∫–æ—Å—Ç—å –ø—Ä–µ–¥–º–µ—Ç–∞"
          enum: ["common", "uncommon", "rare", "epic", "legendary"]
          example: "rare"
        level:
          type: integer
          description: "–£—Ä–æ–≤–µ–Ω—å –ø—Ä–µ–¥–º–µ—Ç–∞"
          minimum: 1
          example: 15
        description:
          type: string
          description: "–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞"
          maxLength: 500
        attributes:
          type: object
          description: "–ê—Ç—Ä–∏–±—É—Ç—ã –ø—Ä–µ–¥–º–µ—Ç–∞"
          additionalProperties: true
        images:
          type: array
          description: "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞"
          items:
            type: string
            format: uri

    BidEntity:
      type: object
      description: "–°—É—â–Ω–æ—Å—Ç—å —Å—Ç–∞–≤–∫–∏"
      allOf:
        - $ref: "#/components/schemas/BaseEntity"
        - type: object
          required:
            - auctionId
            - bidderId
            - amount
          properties:
            auctionId:
              type: string
              description: "ID –∞—É–∫—Ü–∏–æ–Ω–∞"
              format: uuid
            bidderId:
              type: string
              description: "ID —É—á–∞—Å—Ç–Ω–∏–∫–∞"
              format: uuid
            amount:
              type: integer
              description: "–°—É–º–º–∞ —Å—Ç–∞–≤–∫–∏"
              minimum: 1
              example: 1500
            bidTime:
              type: string
              description: "–í—Ä–µ–º—è —Å—Ç–∞–≤–∫–∏"
              format: date-time
            isAutoBid:
              type: boolean
              description: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç–∞–≤–∫–∞"
              default: false
            bidPosition:
              type: integer
              description: "–ü–æ–∑–∏—Ü–∏—è —Å—Ç–∞–≤–∫–∏ –≤ –∞—É–∫—Ü–∏–æ–Ω–µ"
              minimum: 1
            outbid:
              type: boolean
              description: "–°—Ç–∞–≤–∫–∞ –ø–µ—Ä–µ–±–∏—Ç–∞"
              default: false
            $ref: "#/components/schemas/OptimisticLock"

    AutoBidEntity:
      type: object
      description: "–°—É—â–Ω–æ—Å—Ç—å –∞–≤—Ç–æ-—Å—Ç–∞–≤–∫–∏"
      allOf:
        - $ref: "#/components/schemas/BaseEntity"
        - type: object
          required:
            - auctionId
            - bidderId
            - maxAmount
            - increment
          properties:
            auctionId:
              type: string
              description: "ID –∞—É–∫—Ü–∏–æ–Ω–∞"
              format: uuid
            bidderId:
              type: string
              description: "ID —É—á–∞—Å—Ç–Ω–∏–∫–∞"
              format: uuid
            maxAmount:
              type: integer
              description: "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞"
              minimum: 1
              example: 5000
            increment:
              type: integer
              description: "–®–∞–≥ —É–≤–µ–ª–∏—á–µ–Ω–∏—è"
              minimum: 1
              example: 100
            isActive:
              type: boolean
              description: "–ê–≤—Ç–æ-—Å—Ç–∞–≤–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞"
              default: true
            lastBidAmount:
              type: integer
              description: "–ü–æ—Å–ª–µ–¥–Ω—è—è —Å—É–º–º–∞ —Å—Ç–∞–≤–∫–∏"
              minimum: 0
            bidsPlaced:
              type: integer
              description: "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫"
              minimum: 0
            $ref: "#/components/schemas/OptimisticLock"

    AuctionWatcherEntity:
      type: object
      description: "–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å –∞—É–∫—Ü–∏–æ–Ω–∞"
      allOf:
        - $ref: "#/components/schemas/BaseEntity"
        - type: object
          required:
            - auctionId
            - watcherId
          properties:
            auctionId:
              type: string
              description: "ID –∞—É–∫—Ü–∏–æ–Ω–∞"
              format: uuid
            watcherId:
              type: string
              description: "ID –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è"
              format: uuid
            watchStarted:
              type: string
              description: "–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è"
              format: date-time
            notificationsEnabled:
              type: boolean
              description: "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã"
              default: true
            lastActivity:
              type: string
              description: "–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"
              format: date-time
            $ref: "#/components/schemas/OptimisticLock"

    # Request/Response schemas
    CreateAuctionRequest:
      type: object
      required:
        - item
        - type
        - startingPrice
        - duration
      properties:
        item:
          $ref: "#/components/schemas/AuctionItemEntity"
        type:
          type: string
          enum: ["english", "dutch", "sealed_bid", "reserve"]
        startingPrice:
          type: integer
          minimum: 1
        reservePrice:
          type: integer
          minimum: 1
        buyoutPrice:
          type: integer
          minimum: 1
        duration:
          type: integer
          minimum: 5
          maximum: 10080
        category:
          type: string
          enum: ["weapons", "armor", "cyberware", "vehicles", "misc"]
        rules:
          type: object
          properties:
            minBidIncrement:
              type: integer
              minimum: 1
            maxBidsPerPlayer:
              type: integer
              minimum: 1
            allowAutoBidding:
              type: boolean
            requireVerification:
              type: boolean

    UpdateAuctionRequest:
      type: object
      properties:
        reservePrice:
          type: integer
          minimum: 1
        buyoutPrice:
          type: integer
          minimum: 1
        duration:
          type: integer
          minimum: 5
          maximum: 10080
        rules:
          type: object
          properties:
            minBidIncrement:
              type: integer
              minimum: 1
            maxBidsPerPlayer:
              type: integer
              minimum: 1
            allowAutoBidding:
              type: boolean
            requireVerification:
              type: boolean

    AuctionResponse:
      type: object
      properties:
        auction:
          $ref: "#/components/schemas/AuctionEntity"
        metadata:
          type: object
          properties:
            createdAt:
              type: string
              format: date-time
            timeRemaining:
              type: integer
              description: "–û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö"
            currentHighestBid:
              type: integer
            totalBids:
              type: integer

    AuctionListResponse:
      type: object
      properties:
        auctions:
          type: array
          items:
            $ref: "#/components/schemas/AuctionEntity"
        pagination:
          type: object
          properties:
            total:
              type: integer
              minimum: 0
            limit:
              type: integer
              minimum: 1
              maximum: 100
            offset:
              type: integer
              minimum: 0
            hasNext:
              type: boolean

    PlaceBidRequest:
      type: object
      required:
        - bidderId
        - amount
      properties:
        bidderId:
          type: string
          format: uuid
        amount:
          type: integer
          minimum: 1
        isAutoBid:
          type: boolean
          default: false

    BidResponse:
      type: object
      properties:
        bid:
          $ref: "#/components/schemas/BidEntity"
        auction:
          $ref: "#/components/schemas/AuctionEntity"
        bidAccepted:
          type: boolean
        newHighestBid:
          type: boolean
        outbidPlayers:
          type: array
          items:
            type: string
            format: uuid
        timeRemaining:
          type: integer
          description: "–û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö"

    AuctionBidsResponse:
      type: object
      properties:
        auctionId:
          type: string
          format: uuid
        bids:
          type: array
          items:
            type: object
            properties:
              bidderId:
                type: string
                format: uuid
              amount:
                type: integer
              bidTime:
                type: string
                format: date-time
              isAutoBid:
                type: boolean
        highestBid:
          type: integer
        totalBids:
          type: integer

    SetAutoBidRequest:
      type: object
      required:
        - bidderId
        - maxAmount
        - increment
      properties:
        bidderId:
          type: string
          format: uuid
        maxAmount:
          type: integer
          minimum: 1
        increment:
          type: integer
          minimum: 1

    AutoBidResponse:
      type: object
      properties:
        autoBid:
          $ref: "#/components/schemas/AutoBidEntity"
        currentBid:
          type: integer
          description: "–¢–µ–∫—É—â–∞—è —Å—Ç–∞–≤–∫–∞ –∞—É–∫—Ü–∏–æ–Ω–∞"

    WatchAuctionRequest:
      type: object
      required:
        - watcherId
      properties:
        watcherId:
          type: string
          format: uuid
        notificationsEnabled:
          type: boolean
          default: true

    WatchResponse:
      type: object
      properties:
        auctionId:
          type: string
          format: uuid
        watcherId:
          type: string
          format: uuid
        isWatching:
          type: boolean
        watchersCount:
          type: integer

    PlayerAuctionsResponse:
      type: object
      properties:
        playerId:
          type: string
          format: uuid
        auctions:
          type: array
          items:
            $ref: "#/components/schemas/AuctionEntity"
        statistics:
          type: object
          properties:
            totalAuctions:
              type: integer
              minimum: 0
            activeAuctions:
              type: integer
              minimum: 0
            wonAuctions:
              type: integer
              minimum: 0
            lostAuctions:
              type: integer
              minimum: 0

    CompleteAuctionRequest:
      type: object
      required:
        - completedBy
      properties:
        completedBy:
          type: string
          format: uuid

    AuctionCompletionResponse:
      type: object
      properties:
        auctionId:
          type: string
          format: uuid
        winnerId:
          type: string
          format: uuid
        winningBid:
          type: integer
        sellerId:
          type: string
          format: uuid
        item:
          $ref: "#/components/schemas/AuctionItemEntity"
        completionTime:
          type: string
          format: date-time
        transactionId:
          type: string
          format: uuid

    AuctionAnalyticsResponse:
      type: object
      properties:
        period:
          type: string
          enum: ["hourly", "daily", "weekly", "monthly"]
        totalAuctions:
          type: integer
          minimum: 0
        totalValue:
          type: integer
          minimum: 0
        averageAuctionPrice:
          type: number
        auctionsByCategory:
          type: object
          additionalProperties:
            type: integer
            minimum: 0
        auctionsByType:
          type: object
          additionalProperties:
            type: integer
            minimum: 0
        completionRate:
          type: number
          minimum: 0
          maximum: 1
        averageBidsPerAuction:
          type: number

    PopularAuctionsResponse:
      type: object
      properties:
        auctions:
          type: array
          items:
            type: object
            properties:
              auction:
                $ref: "#/components/schemas/AuctionEntity"
              popularityScore:
                type: number
              watchersCount:
                type: integer
              bidsCount:
                type: integer
              timeRemaining:
                type: integer