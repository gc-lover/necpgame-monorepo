# Issue: #153
# Account schemas for Auth & Character Management Service

components:
  schemas:
    # ============================================================================
    # ACCOUNT SCHEMAS
    # ============================================================================

    AccountResponse:
      type: object
      required: [account_id, email, username, created_at, last_login_at]
      properties:
        account_id:
          type: string
          format: uuid
        email:
          type: string
          format: email
        username:
          type: string
        display_name:
          type: string
        avatar_url:
          type: string
          format: uri
        status:
          type: string
          enum: [active, suspended, banned]
        email_verified:
          type: boolean
        two_factor_enabled:
          type: boolean
        created_at:
          type: string
          format: date-time
        last_login_at:
          type: string
          format: date-time
        character_slots:
          type: integer
        character_slots_used:
          type: integer

    UpdateAccountRequest:
      type: object
      properties:
        display_name:
          type: string
          maxLength: 64
        avatar_url:
          type: string
          format: uri
        newsletter_subscribe:
          type: boolean

    UserSummary:
      type: object
      required: [account_id, username]
      properties:
        account_id:
          type: string
          format: uuid
        username:
          type: string
        display_name:
          type: string
        avatar_url:
          type: string
          format: uri

    OAuthLinkRequest:
      type: object
      required: [authorization_code]
      properties:
        authorization_code:
          type: string
        redirect_uri:
          type: string
          format: uri

    SecuritySettings:
      type: object
      required: [two_factor_enabled, login_history]
      properties:
        two_factor_enabled:
          type: boolean
        two_factor_secret:
          type: string
        last_password_change:
          type: string
          format: date-time
        login_history:
          type: array
          items:
            $ref: "#/components/schemas/LoginHistoryEntry"

    LoginHistoryEntry:
      type: object
      required: [timestamp, ip_address, user_agent]
      properties:
        timestamp:
          type: string
          format: date-time
        ip_address:
          type: string
        user_agent:
          type: string
        location:
          type: string
        device_type:
          type: string