# Issue: #153
# Character schemas for Auth & Character Management Service

components:
  schemas:
    # ============================================================================
    # CHARACTER SCHEMAS
    # ============================================================================

    CreateCharacterRequest:
      type: object
      required: [name, character_class, origin]
      properties:
        name:
          type: string
          minLength: 3
          maxLength: 32
        character_class:
          type: string
          enum:
            [
              solo,
              rockerboy,
              netrunner,
              techie,
              fixer,
              nomad,
              corporate,
              police,
              trauma_team,
              edgerunner,
            ]
        origin:
          type: string
          enum: [nomad, street_kid, corpo, edgerunner_clinic]
        appearance:
          type: object
          additionalProperties: true
        starting_attributes:
          type: object
          properties:
            strength:
              type: integer
              minimum: 1
              maximum: 10
            dexterity:
              type: integer
              minimum: 1
              maximum: 10
            constitution:
              type: integer
              minimum: 1
              maximum: 10
            intelligence:
              type: integer
              minimum: 1
              maximum: 10
            reflexes:
              type: integer
              minimum: 1
              maximum: 10
            charisma:
              type: integer
              minimum: 1
              maximum: 10

    CharacterResponse:
      type: object
      required:
        [
          character_id,
          account_id,
          name,
          character_class,
          origin,
          level,
          experience,
          created_at,
        ]
      properties:
        character_id:
          type: string
          format: uuid
        account_id:
          type: string
          format: uuid
        name:
          type: string
        character_class:
          type: string
        origin:
          type: string
        level:
          type: integer
          minimum: 1
        experience:
          type: integer
          minimum: 0
        experience_to_next_level:
          type: integer
          minimum: 0
        attribute_points_available:
          type: integer
          minimum: 0
        attributes:
          $ref: "#/components/schemas/CharacterAttributes"
        skills:
          type: object
          additionalProperties:
            type: integer
        appearance:
          type: object
          additionalProperties: true
        is_active:
          type: boolean
        last_login_at:
          type: string
          format: date-time
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    CharacterSummary:
      type: object
      required: [character_id, name, character_class, level, last_login_at]
      properties:
        character_id:
          type: string
          format: uuid
        name:
          type: string
        character_class:
          type: string
        level:
          type: integer
        last_login_at:
          type: string
          format: date-time
        is_active:
          type: boolean

    UpdateCharacterRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 3
          maxLength: 32
        appearance:
          type: object
          additionalProperties: true

    SwitchCharacterRequest:
      type: object
      required: [character_id]
      properties:
        character_id:
          type: string
          format: uuid

    SwitchCharacterResponse:
      type: object
      required: [previous_character_id, new_character_id, switched_at]
      properties:
        previous_character_id:
          type: string
          format: uuid
        new_character_id:
          type: string
          format: uuid
        switched_at:
          type: string
          format: date-time

    CharacterSlotsResponse:
      type: object
      required: [total_slots, used_slots, available_slots, next_slot_cost]
      properties:
        total_slots:
          type: integer
        used_slots:
          type: integer
        available_slots:
          type: integer
        next_slot_cost:
          type: integer

    CharacterAttributes:
      type: object
      required:
        [strength, dexterity, constitution, intelligence, reflexes, charisma]
      properties:
        strength:
          type: integer
          minimum: 1
        dexterity:
          type: integer
          minimum: 1
        constitution:
          type: integer
          minimum: 1
        intelligence:
          type: integer
          minimum: 1
        reflexes:
          type: integer
          minimum: 1
        charisma:
          type: integer
          minimum: 1
