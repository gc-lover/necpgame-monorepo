# Boss Service - OpenAPI Specification

## üìã **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**

Boss Service –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **enterprise-grade —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Å—Å–∞–º–∏** –¥–ª—è NECPGAME —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã. –°–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞
–º–∏—Ä–æ–≤—ã—Ö –±–æ—Å—Å–æ–≤, —ç–ª–∏—Ç–Ω—ã—Ö —á–µ–º–ø–∏–æ–Ω–æ–≤, —Ä–µ–π–¥–æ–≤—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é –∏ —ç–ø–∏—á–µ—Å–∫–∏–µ –∏–≥—Ä–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏.

## üéØ **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**

### üëπ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ú–∏—Ä–æ–≤—ã–º–∏ –ë–æ—Å—Å–∞–º–∏**

- –ö–∞—Ç–∞–ª–æ–≥ –±–æ—Å—Å–æ–≤ —Å —Ñ–∞–∑–æ–≤—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏
- –õ–∏–≥–∞–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ Bronze ‚Üí Mythic —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é
- WebSocket real-time —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è –±–æ–µ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –ø–æ —Ü–∏–∫–ª–∞–º –∏ —Å—é–∂–µ—Ç–Ω—ã–º —Ç—Ä–∏–≥–≥–µ—Ä–∞–º

### üèÜ **–≠–ª–∏—Ç–Ω—ã–µ –ß–µ–º–ø–∏–æ–Ω—ã**

- –£—Å–∏–ª–µ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –±–æ—Å—Å–æ–≤ (—Ä–µ–¥–∫–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ, +200% HP, +100% —É—Ä–æ–Ω)
- –ß–µ–º–ø–∏–æ–Ω—Å–∫–∏–µ —Ä–µ–π–¥—ã —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–µ–π
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ –∏ –≤—ã–∑–æ–≤—ã

### üìä **–¢–µ–ª–µ–º–µ—Ç—Ä–∏—è –∏ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞**

- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–æ–µ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—á–∞—Å—Ç–∏—è –∏ –≤–∫–ª–∞–¥–∞ –∏–≥—Ä–æ–∫–æ–≤
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥
- –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

### üéÅ **–°–∏—Å—Ç–µ–º–∞ –ù–∞–≥—Ä–∞–¥**

- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ª—É—Ç–∞
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞ —É—á–∞—Å—Ç–∏–µ –∏ –ø–æ–±–µ–¥—É
- –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –º–∏—Ä–æ–≤—ã—Ö —Ñ–ª–∞–≥–æ–≤ –ø–æ—Å–ª–µ –ø–æ–±–µ–¥

## üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**

```
boss-service/
‚îú‚îÄ‚îÄ main.yaml           # –û—Å–Ω–æ–≤–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îú‚îÄ‚îÄ README.md          # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ docs/
    ‚îî‚îÄ‚îÄ index.html     # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

proto/openapi/common/                   # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
‚îú‚îÄ‚îÄ responses/
‚îÇ   ‚îú‚îÄ‚îÄ error.yaml      # –û–±—â–∏–µ –æ—Ç–≤–µ—Ç—ã –æ—à–∏–±–æ–∫ (400, 401, 403, 404, 409, 500, 429)
‚îÇ   ‚îî‚îÄ‚îÄ success.yaml    # –û–±—â–∏–µ —É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (200, 201, health checks)
‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îú‚îÄ‚îÄ common.yaml     # –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ö–µ–º—ã (HealthResponse, Error, Pagination)
‚îÇ   ‚îú‚îÄ‚îÄ error.yaml      # –°—Ö–µ–º–∞ –æ—à–∏–±–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ health.yaml     # –°—Ö–µ–º–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ pagination.yaml # –°—Ö–µ–º—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ security/
    ‚îî‚îÄ‚îÄ security.yaml   # –°—Ö–µ–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (BearerAuth, ApiKeyAuth)
```

## üîß **API Endpoints**

### Core Operations

- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
- `GET /bosses/active` - –ê–∫—Ç–∏–≤–Ω—ã–µ –º–∏—Ä–æ–≤—ã–µ –±–æ—Å—Å—ã
- `POST /bosses/{boss_id}/encounter` - –ù–∞—á–∞—Ç—å –±–æ–π —Å –±–æ—Å—Å–æ–º
- `GET /encounters/{encounter_id}` - –î–µ—Ç–∞–ª–∏ –±–æ—è —Å –±–æ—Å—Å–æ–º
- `POST /encounters/{encounter_id}/join` - –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –±–æ—é
- `GET /encounters/{encounter_id}/rewards` - –ù–∞–≥—Ä–∞–¥—ã –∑–∞ –±–æ–π
- `GET /champions/elite/active` - –ê–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–∏—Ç–Ω—ã–µ —á–µ–º–ø–∏–æ–Ω—ã
- `GET /telemetry/encounters/{encounter_id}/stream` - WebSocket —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è

### Key Features

- **Boss Lifecycle Management** - –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∂–∏–∑–Ω–∏ –±–æ—Å—Å–æ–≤ –æ—Ç —Å–ø–∞–≤–Ω–∞ –¥–æ aftermath
- **Real-time Coordination** - WebSocket —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **League Progression** - –°–∏—Å—Ç–µ–º–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç Bronze –¥–æ Mythic
- **Elite Variants** - –£—Å–∏–ª–µ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –º–µ—Ö–∞–Ω–∏–∫–∞–º–∏
- **Reward Distribution** - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞–≥—Ä–∞–¥—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∫–ª–∞–¥–∞

## üìä **Performance Targets**

- **P99 Latency:** <50ms –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤–æ –≤—Ä–µ–º—è —Å–æ–±—ã—Ç–∏–π
- **Memory per Instance:** <30KB
- **Concurrent Users:** 50,000+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- **Telemetry Throughput:** 10,000+ —Å–æ–±—ã—Ç–∏–π –≤ —Å–µ–∫—É–Ω–¥—É
- **Event Load:** 5000+ RPS –≤–æ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–æ–µ–≤ —Å –±–æ—Å—Å–∞–º–∏

## üîí **Security & Authentication**

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç enterprise-grade –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é:

- JWT Bearer tokens –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- API Key authentication –¥–ª—è —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
- Service-to-service authentication –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π

## üèóÔ∏è **Architecture Notes**

### Domain Separation

- **World Bosses** - –û—Å–Ω–æ–≤–Ω—ã–µ –±–æ—Å—Å—ã —Å –ª–∏–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
- **Elite Champions** - –£—Å–∏–ª–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –Ω–∞–≥—Ä–∞–¥–∞–º–∏
- **Boss Telemetry** - –†–µ–∞–ª-—Ç–∞–π–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- **League System** - –ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ

### Common Schema Inheritance

–ù–∞—Å–ª–µ–¥—É–µ—Ç –æ—Ç `../common-service/schemas/`:

- `BaseEntity` - –ë–∞–∑–æ–≤—ã–µ –ø–æ–ª—è —Å—É—â–Ω–æ—Å—Ç–µ–π
- `AuditableEntity` - –ê—É–¥–∏—Ç –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- `ErrorResponse` - –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏
- `SuccessResponse` - –£—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

### Backend Optimizations

- **Struct Alignment** - –ü–æ–ª—è —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏ (30-50% —ç–∫–æ–Ω–æ–º–∏–∏)
- **TimescaleDB Integration** - –î–ª—è —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –±–æ–µ–≤
- **Redis Caching** - –î–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –±–æ—Å—Å–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- **WebSocket Pooling** - –î–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–π —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏
- **Connection Pooling** - –î–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –±–æ–µ–≤

## üß™ **Testing & Validation**

### Automated Testing

- Unit tests –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –±–æ—Å—Å–∞–º–∏
- Integration tests —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
- Performance tests –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π —Å–æ–±—ã—Ç–∏–π
- WebSocket testing –¥–ª—è —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏
- Chaos engineering –¥–ª—è —Å–∏—Å—Ç–µ–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

### Validation Commands

```bash
# Redocly linting
npx @redocly/cli lint main.yaml

# Go code generation test
ogen --target /tmp/test --package api --clean main.yaml

# Bundle validation
npx @redocly/cli bundle main.yaml -o bundled.yaml
```

## üìã **Migration Source**

–ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ `world/bosses/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

- `world_bosses.yaml` - –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–∏—Ä–æ–≤—ã—Ö –±–æ—Å—Å–æ–≤
- `gameplay_enhanced_content_elite_champion.yaml` - –≠–ª–∏—Ç–Ω—ã–µ —á–µ–º–ø–∏–æ–Ω—ã –∏ —Ä–µ–π–¥—ã

## üîó **Related Services**

- **combat-service** - –û—Å–Ω–æ–≤–Ω—ã–µ –±–æ–µ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏
- **achievement-service** - –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- **economy-service** - –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **analytics-service** - –ú–µ—Ç—Ä–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- **social-service** - –ö–æ–º–∞–Ω–¥–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è

## üìö **Documentation**

- [Boss Service API Reference](./docs/index.html)
- [NECPGAME API Architecture](../../README.md)
- [Performance Enforcement](../../PERFORMANCE_ENFORCEMENT.md)
- [Backend Optimization Checklist](../../BACKEND_OPTIMIZATION_CHECKLIST.md)

---

## üéØ **Domain Purpose**

Boss Service —Å–æ–∑–¥–∞–µ—Ç —ç–ø–∏—á–µ—Å–∫–∏–µ, –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–µ –∏–≥—Ä–æ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –≤ Night City, –≥–¥–µ –∏–≥—Ä–æ–∫–∏ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –¥–ª—è –±–æ—Ä—å–±—ã —Å –º–æ—â–Ω—ã–º–∏
–±–æ—Å—Å–∞–º–∏ –∏ —ç–ª–∏—Ç–Ω—ã–º–∏ —á–µ–º–ø–∏–æ–Ω–∞–º–∏. –û—Ç –æ–±—ã—á–Ω—ã—Ö –º–∏—Ä–æ–≤—ã—Ö –±–æ—Å—Å–æ–≤ –¥–æ —Ä–µ–¥–∫–∏—Ö —ç–ª–∏—Ç–Ω—ã—Ö —Ä–µ–π–¥–æ–≤ - –∫–∞–∂–¥–∞—è –≤—Å—Ç—Ä–µ—á–∞ —Å–æ–∑–¥–∞–µ—Ç –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ
–∏—Å—Ç–æ—Ä–∏–∏.

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è:** –°–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –≥–µ–π–º–ø–ª–µ—è –∏ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –≤–æ–∫—Ä—É–≥ —ç–ø–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π.
