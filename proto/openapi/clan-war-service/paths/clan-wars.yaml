openapi: 3.0.3
paths:
  /clan-wars:
    get:
      summary: List clan wars with filtering and pagination
      description: '**Enterprise-grade clan war listing endpoint**

        Supports complex filtering by status, participants, duration, and outcomes.
        Optimized for high-throughput scenarios with proper indexing.

        **Performance:** <15ms P95, supports 1000+ concurrent requests

        '
      operationId: listClanWars
      tags:
      - Clan Warfare
      parameters:
      - name: page
        in: query
        schema:
          type: integer
          minimum: 1
          default: 1
        description: Page number for pagination
      - name: limit
        in: query
        schema:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
        description: Number of items per page
      - name: status
        in: query
        schema:
          type: string
          enum:
          - active
          - preparing
          - ended
          - cancelled
          - all
          default: all
        description: Filter by war status
      - name: clan_id
        in: query
        schema:
          type: string
          format: uuid
        description: Filter wars involving specific clan
      - name: war_type
        in: query
        schema:
          type: string
          enum:
          - territorial
          - resource
          - reputation
          - alliance
          - all
          default: all
        description: Filter by war type
      responses:
        '200':
          description: Clan wars retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClanWarListResponse'
        '400':
          description: Invalid request - malformed query parameters
          content:
            application/json:
              schema:
                $ref: ../common/schemas/infrastructure-entities.yaml#/ErrorResponse
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: ../common/schemas/infrastructure-entities.yaml#/ErrorResponse
    post:
      summary: Declare clan war
      description: '**Enterprise-grade war declaration endpoint**

        Validates war legitimacy, clan relations, and political constraints. Initiates
        formal war declaration with treaty requirements.

        **Performance:** <75ms P95, includes diplomatic validation

        '
      operationId: declareClanWar
      tags:
      - Clan Warfare
      security:
      - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WarDeclarationRequest'
      responses:
        '201':
          description: Clan war declared successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClanWarResponse'
        '400':
          description: Invalid declaration - validation failed
          content:
            application/json:
              schema:
                $ref: ../common/schemas/infrastructure-entities.yaml#/ErrorResponse
        '403':
          description: Forbidden - insufficient authority or alliances
          content:
            application/json:
              schema:
                $ref: ../common/schemas/infrastructure-entities.yaml#/ErrorResponse
        '409':
          description: Conflict - existing war or treaty violations
          content:
            application/json:
              schema:
                $ref: ../common/schemas/infrastructure-entities.yaml#/ErrorResponse
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: ../common/schemas/infrastructure-entities.yaml#/ErrorResponse
