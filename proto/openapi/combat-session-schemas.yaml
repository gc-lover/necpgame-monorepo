openapi: 3.0.3
info:
  title: Combat Session Schemas
  version: 1.0.0
components:
  schemas:
    Participant:
      type: object
      required:
      - player_id
      - character_id
      - team
      - role
      - health
      - max_health
      - status
      properties:
        player_id:
          type: string
          format: uuid
        character_id:
          type: string
          format: uuid
        team:
          type: string
          enum:
          - team_a
          - team_b
          - solo
        role:
          type: string
          enum:
          - assault
          - support
          - tech
          - stealth
        status:
          type: string
          enum:
          - alive
          - dead
          - extracted
          - disconnected
        damage_dealt:
          type: integer
          format: int64
        damage_taken:
          type: integer
          format: int64
        healing_done:
          type: integer
          format: int64
        kills:
          type: integer
        deaths:
          type: integer
        assists:
          type: integer
        health:
          type: integer
        max_health:
          type: integer
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    StatusEffect:
      type: object
      required:
      - effect_type
      - duration_seconds
      properties:
        effect_type:
          type: string
          enum:
          - bleeding
          - burning
          - poisoned
          - stunned
          - slowed
          - buffed
          - debuffed
        duration_seconds:
          type: integer
          minimum: 1
        strength:
          type: number
          format: float
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ActionValidation:
      type: object
      required:
      - anti_cheat_passed
      - position_valid
      - cooldown_valid
      properties:
        details:
          type: string
        anti_cheat_passed:
          type: boolean
        position_valid:
          type: boolean
        cooldown_valid:
          type: boolean
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ParticipantState:
      type: object
      required:
      - player_id
      - health
      - status
      properties:
        player_id:
          type: string
          format: uuid
        status:
          type: string
          enum:
          - alive
          - dead
          - extracted
          - disconnected
        position:
          $ref: common.yaml#/components/schemas/Position3D
        active_effects:
          type: array
          items:
            $ref: '#/components/schemas/StatusEffect'
        health:
          type: integer
        max_health:
          type: integer
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CombatLog:
      type: object
      required:
      - id
      - event_type
      - timestamp
      - sequence_number
      properties:
        actor_id:
          type: string
          format: uuid
        target_id:
          type: string
          format: uuid
        event_type:
          type: string
          enum:
          - attack
          - ability
          - move
          - reload
          - death
          - extract
        timestamp:
          type: string
          format: date-time
        action_data:
          type: object
        result_data:
          type: object
        id:
          type: integer
          format: int64
        sequence_number:
          type: integer
          format: int64
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ParticipantStats:
      type: object
      required:
      - player_id
      - damage_dealt
      - kills
      - deaths
      properties:
        player_id:
          type: string
          format: uuid
        damage_dealt:
          type: integer
          format: int64
        damage_taken:
          type: integer
          format: int64
        healing_done:
          type: integer
          format: int64
        kills:
          type: integer
        deaths:
          type: integer
        assists:
          type: integer
        shots_fired:
          type: integer
        shots_hit:
          type: integer
        accuracy:
          type: number
          format: float
          minimum: 0
          maximum: 1
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    Reward:
      type: object
      required:
      - player_id
      - experience
      - currency
      properties:
        player_id:
          type: string
          format: uuid
        currency:
          type: object
          properties:
            eurodollars:
              type: integer
            cryptos:
              type: integer
        items:
          type: array
          items:
            type: object
            required:
            - item_id
            - quantity
            properties:
              item_id:
                type: string
                format: uuid
              quantity:
                type: integer
                minimum: 1
        experience:
          type: integer
          minimum: 0
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'













