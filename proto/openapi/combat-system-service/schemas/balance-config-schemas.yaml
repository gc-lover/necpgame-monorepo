# Balance Config Schemas - Domain Separation
# Handles combat balance and configuration management
# Issue: #2231

openapi: 3.0.3
info:
  title: Balance Config Schemas
  version: 1.0.0
  description: Domain-separated schemas for combat balance configuration

components:
  schemas:

    CombatBalanceConfig:
      type: object
      required: [version, global_multipliers, character_balance, environment_balance]
      properties:
        id:
          type: string
          format: uuid
          description: Unique configuration identifier
        version:
          type: integer
          minimum: 1
          description: Configuration version for optimistic locking
        global_multipliers:
          $ref: '#/components/schemas/GlobalMultipliers'
        character_balance:
          $ref: '#/components/schemas/CharacterBalance'
        environment_balance:
          $ref: '#/components/schemas/EnvironmentBalance'
        faction_modifiers:
          type: array
          items:
            $ref: '#/components/schemas/FactionModifier'
          description: Faction-specific balance modifiers
        region_modifiers:
          type: array
          items:
            $ref: '#/components/schemas/RegionModifier'
          description: Region-specific balance modifiers
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    GlobalMultipliers:
      type: object
      required: [damage_multiplier, experience_multiplier, loot_multiplier]
      properties:
        damage_multiplier:
          type: number
          format: float
          minimum: 0.1
          maximum: 3.0
          default: 1.0
          description: Global damage multiplier
        experience_multiplier:
          type: number
          format: float
          minimum: 0.1
          maximum: 3.0
          default: 1.0
          description: Global experience gain multiplier
        loot_multiplier:
          type: number
          format: float
          minimum: 0.1
          maximum: 3.0
          default: 1.0
          description: Global loot drop multiplier
        currency_multiplier:
          type: number
          format: float
          minimum: 0.1
          maximum: 5.0
          default: 1.0
          description: Global currency reward multiplier

    CharacterBalance:
      type: object
      required: [class_modifiers, level_scaling]
      properties:
        class_modifiers:
          type: array
          items:
            $ref: '#/components/schemas/ClassModifier'
          description: Class-specific balance adjustments
        level_scaling:
          type: object
          properties:
            scaling_curve:
              type: string
              enum: [linear, exponential, logarithmic]
              default: exponential
            max_level:
              type: integer
              minimum: 1
              maximum: 200
              default: 100
            power_curve:
              type: number
              format: float
              minimum: 0.1
              maximum: 2.0
              default: 0.5
        stat_progression:
          type: object
          properties:
            health_per_level:
              type: integer
              minimum: 1
              maximum: 1000
              default: 10
            damage_per_level:
              type: number
              format: float
              minimum: 0.1
              maximum: 10.0
              default: 1.0
            defense_per_level:
              type: number
              format: float
              minimum: 0.1
              maximum: 10.0
              default: 0.5

    EnvironmentBalance:
      type: object
      required: [terrain_modifiers, weather_modifiers, time_modifiers]
      properties:
        terrain_modifiers:
          type: object
          properties:
            open_field:
              $ref: '#/components/schemas/TerrainModifier'
            urban:
              $ref: '#/components/schemas/TerrainModifier'
            forest:
              $ref: '#/components/schemas/TerrainModifier'
            mountain:
              $ref: '#/components/schemas/TerrainModifier'
        weather_modifiers:
          type: object
          properties:
            clear:
              type: number
              format: float
              minimum: 0.5
              maximum: 2.0
              default: 1.0
            rain:
              type: number
              format: float
              minimum: 0.5
              maximum: 2.0
              default: 0.9
            snow:
              type: number
              format: float
              minimum: 0.5
              maximum: 2.0
              default: 0.8
            storm:
              type: number
              format: float
              minimum: 0.5
              maximum: 2.0
              default: 1.2
        time_modifiers:
          type: object
          properties:
            day:
              type: number
              format: float
              minimum: 0.5
              maximum: 2.0
              default: 1.0
            night:
              type: number
              format: float
              minimum: 0.5
              maximum: 2.0
              default: 1.1

    TerrainModifier:
      type: object
      properties:
        movement_speed_modifier:
          type: number
          format: float
          minimum: 0.1
          maximum: 2.0
          default: 1.0
        cover_effectiveness:
          type: number
          format: float
          minimum: 0.0
          maximum: 1.0
          default: 0.5
        visibility_modifier:
          type: number
          format: float
          minimum: 0.1
          maximum: 2.0
          default: 1.0

    ClassModifier:
      type: object
      required: [class_name, damage_modifier, defense_modifier]
      properties:
        class_name:
          type: string
          enum: [warrior, mage, rogue, ranger, paladin, necromancer]
        damage_modifier:
          type: number
          format: float
          minimum: 0.1
          maximum: 3.0
          default: 1.0
        defense_modifier:
          type: number
          format: float
          minimum: 0.1
          maximum: 3.0
          default: 1.0
        health_modifier:
          type: number
          format: float
          minimum: 0.1
          maximum: 3.0
          default: 1.0
        special_abilities_modifier:
          type: number
          format: float
          minimum: 0.1
          maximum: 3.0
          default: 1.0

    FactionModifier:
      type: object
      required: [faction_name, reputation_modifier]
      properties:
        faction_name:
          type: string
        reputation_modifier:
          type: number
          format: float
          minimum: -2.0
          maximum: 2.0
          default: 0.0
        damage_modifier:
          type: number
          format: float
          minimum: 0.1
          maximum: 2.0
          default: 1.0
        reward_modifier:
          type: number
          format: float
          minimum: 0.1
          maximum: 2.0
          default: 1.0

    RegionModifier:
      type: object
      required: [region_name, difficulty_modifier]
      properties:
        region_name:
          type: string
        difficulty_modifier:
          type: number
          format: float
          minimum: 0.1
          maximum: 3.0
          default: 1.0
        experience_modifier:
          type: number
          format: float
          minimum: 0.1
          maximum: 3.0
          default: 1.0
        loot_quality_modifier:
          type: number
          format: float
          minimum: 0.1
          maximum: 3.0
          default: 1.0

    UpdateCombatBalanceConfigRequest:
      type: object
      required: [version]
      properties:
        version:
          type: integer
          minimum: 1
          description: Current version for optimistic locking
        global_multipliers:
          $ref: '#/components/schemas/GlobalMultipliers'
        character_balance:
          $ref: '#/components/schemas/CharacterBalance'
        environment_balance:
          $ref: '#/components/schemas/EnvironmentBalance'
        faction_modifiers:
          type: array
          items:
            $ref: '#/components/schemas/FactionModifier'
        region_modifiers:
          type: array
          items:
            $ref: '#/components/schemas/RegionModifier'