openapi: 3.0.3
info:
  title: Blackwall ICE Schemas
  description: Общие схемы данных для Blackwall ICE Protection System
  version: 1.0.0
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
components:
  schemas:
    ICEType:
      type: string
      enum:
        - guardian
        - hunter
        - deception
        - corruption
        - collective
      description: Тип Blackwall ICE
      example: guardian
    ICELevel:
      type: string
      enum:
        - alpha
        - beta
        - gamma
      description: Уровень сложности ICE
      example: alpha
    ICEStats:
      type: object
      required:
        - attack_speed
        - defense
        - adaptation_rate
        - aggression
      properties:
        attack_speed:
          type: string
          enum:
            - very_slow
            - slow
            - medium
            - fast
            - very_fast
          description: Скорость атаки
          example: slow
        defense:
          type: string
          enum:
            - low
            - medium
            - high
            - very_high
          description: Уровень защиты
          example: high
        adaptation_rate:
          type: string
          enum:
            - low
            - medium
            - high
            - very_high
          description: Скорость адаптации
          example: medium
        aggression:
          type: string
          enum:
            - low
            - medium
            - high
            - very_high
          description: Уровень агрессии
          example: low
        adaptation_level:
          type: integer
          minimum: 0
          maximum: 10
          description: Уровень адаптации
          example: 2
        defense_multiplier:
          type: number
          format: float
          minimum: 1.0
          maximum: 2.0
          description: Множитель защиты
          example: 1.15
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ICEInstance:
      type: object
      required:
        - ice_id
        - ice_type
        - level
        - adaptation_level
        - defense_multiplier
        - status
      properties:
        ice_id:
          type: string
          format: uuid
          description: UUID Blackwall ICE
          example: bb0e8400-e29b-41d4-a716-446655440000
        status:
          type: string
          enum:
            - active
            - hunting
            - passive
            - adapting
          description: Текущий статус ICE
          example: active
        position:
          type: object
          description: Позиция ICE в киберпространстве
          properties:
            x:
              type: number
              format: float
            y:
              type: number
              format: float
            z:
              type: number
              format: float
        level:
          $ref: '#/components/schemas/ICELevel'
        ice_type:
          $ref: '#/components/schemas/ICEType'
        adaptation_level:
          type: integer
          description: Уровень адаптации ICE (0-10)
          minimum: 0
          maximum: 10
          example: 2
        defense_multiplier:
          type: number
          format: float
          description: Множитель защиты (1.0 - базовая, увеличивается с адаптацией)
          minimum: 1.0
          maximum: 2.0
          example: 1.15
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ThreatAssessment:
      type: object
      required:
        - overall_threat
        - active_threats
      properties:
        overall_threat:
          type: string
          enum:
            - low
            - medium
            - high
            - critical
          description: Общая оценка угрозы
          example: high
        active_threats:
          type: integer
          description: Количество активных угроз
          minimum: 0
          example: 2
        recommended_caution:
          type: boolean
          description: Рекомендуется ли осторожность
          example: true
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ICEInteractionAction:
      type: string
      enum:
        - detect
        - analyze
        - bypass
        - attack
      description: Тип взаимодействия с ICE
      example: analyze
    SkillCheck:
      type: object
      required:
        - skill_type
        - skill_level
      properties:
        skill_type:
          type: string
          enum:
            - hacking
            - netrunning
            - technical
          description: Тип навыка
          example: hacking
        modifiers:
          type: array
          description: Модификаторы навыка
          items:
            $ref: '#/components/schemas/SkillModifier'
        skill_level:
          type: integer
          description: Уровень навыка
          minimum: 1
          maximum: 100
          example: 45
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    SkillModifier:
      type: object
      required:
        - type
        - value
      properties:
        type:
          type: string
          description: Тип модификатора
          example: netrunner_bonus
        value:
          type: number
          format: float
          description: Значение модификатора
          example: 0.2
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ICEInteractionResult:
      type: object
      required:
        - ice_type
        - level
        - stats
        - current_adaptation_level
        - defense_multiplier
      properties:
        level:
          $ref: '#/components/schemas/ICELevel'
        stats:
          $ref: '#/components/schemas/ICEStats'
        ice_type:
          $ref: '#/components/schemas/ICEType'
        current_adaptation_level:
          type: integer
          minimum: 0
          maximum: 10
          example: 2
        defense_multiplier:
          type: number
          format: float
          minimum: 1.0
          maximum: 2.0
          example: 1.15
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ICEResponse:
      type: object
      required:
        - response_type
        - message
        - psychological_effect
      properties:
        message:
          type: string
          description: Сообщение от ICE (может быть обманом)
          example: Защита активирована. Обнаружена попытка анализа.
        response_type:
          type: string
          enum:
            - defensive
            - aggressive
            - deceptive
            - passive
          description: Тип ответа ICE
          example: defensive
        psychological_effect:
          type: string
          enum:
            - none
            - low
            - medium
            - high
            - critical
          description: Уровень психологического воздействия
          example: low
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ICEConsequences:
      type: object
      properties:
        stress_increase:
          type: integer
          description: Увеличение стресса (0-100)
          minimum: 0
          maximum: 100
          example: 5
        detection_risk:
          type: integer
          description: Риск обнаружения NetWatch (0-100)
          minimum: 0
          maximum: 100
          example: 10
        data_leak:
          type: boolean
          description: Произошла ли утечка данных
          example: false
        digital_infection:
          type: boolean
          description: Произошло ли цифровое заражение
          example: false
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'

paths:
