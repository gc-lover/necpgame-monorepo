# Issue: #64
# Schemas for Economy Advertising Platform Service API
openapi: 3.0.3

components:
  schemas:
    AdvertisingSurface:
      type: object
      required:
        - id
        - surface_type
        - zone_id
        - status
      properties:
        id:
          type: string
          format: uuid
        surface_type:
          type: string
          enum: [billboard, ar_layer, broadcast, hub_screen, private_interior]
        zone_id:
          type: string
          format: uuid
        zone_name:
          type: string
        faction_id:
          type: string
          format: uuid
          nullable: true
        status:
          type: string
          enum: [available, reserved, active]
        base_price:
          type: number
          format: float
        traffic_level:
          type: string
          enum: [low, medium, high, very_high]

    AdvertisingSurfaceDetailed:
      type: object
      required:
        - id
        - surface_type
        - zone_id
        - status
      properties:
        id:
          type: string
          format: uuid
        surface_type:
          type: string
          enum: [billboard, ar_layer, broadcast, hub_screen, private_interior]
        zone_id:
          type: string
          format: uuid
        zone_name:
          type: string
        faction_id:
          type: string
          format: uuid
          nullable: true
        status:
          type: string
          enum: [available, reserved, active]
        base_price:
          type: number
          format: float
        traffic_level:
          type: string
          enum: [low, medium, high, very_high]
        size:
          type: string
        description:
          type: string
        current_campaign_id:
          type: string
          format: uuid
          nullable: true
        available_from:
          type: string
          format: date-time
          nullable: true

    CreateCampaignRequest:
      type: object
      required:
        - name
        - content_type
        - target_surfaces
      properties:
        name:
          type: string
        description:
          type: string
        content_type:
          type: string
          enum: [image, video, interactive, shopping_portal]
        content_url:
          type: string
          format: uri
        target_surfaces:
          type: array
          items:
            type: string
            format: uuid
        target_zones:
          type: array
          items:
            type: string
            format: uuid
        target_audience:
          type: object
          properties:
            character_classes:
              type: array
              items:
                type: string
            min_level:
              type: integer
            max_level:
              type: integer
        budget:
          type: number
          format: float
        start_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time

    Campaign:
      type: object
      required:
        - id
        - name
        - creator_id
        - status
        - created_at
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        creator_id:
          type: string
          format: uuid
        content_type:
          type: string
          enum: [image, video, interactive, shopping_portal]
        status:
          type: string
          enum: [draft, pending_moderation, approved, active, paused, completed, rejected]
        budget:
          type: number
          format: float
        spent:
          type: number
          format: float
        created_at:
          type: string
          format: date-time
        start_date:
          type: string
          format: date-time
          nullable: true
        end_date:
          type: string
          format: date-time
          nullable: true

    CampaignDetailed:
      type: object
      required:
        - id
        - name
        - creator_id
        - status
        - created_at
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
        creator_id:
          type: string
          format: uuid
        content_type:
          type: string
          enum: [image, video, interactive, shopping_portal]
        content_url:
          type: string
          format: uri
        status:
          type: string
          enum: [draft, pending_moderation, approved, active, paused, completed, rejected]
        moderation_notes:
          type: string
          nullable: true
        target_surfaces:
          type: array
          items:
            type: string
            format: uuid
        target_zones:
          type: array
          items:
            type: string
            format: uuid
        target_audience:
          type: object
        budget:
          type: number
          format: float
        spent:
          type: number
          format: float
        created_at:
          type: string
          format: date-time
        start_date:
          type: string
          format: date-time
          nullable: true
        end_date:
          type: string
          format: date-time
          nullable: true

    UpdateCampaignRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        content_url:
          type: string
          format: uri
        target_surfaces:
          type: array
          items:
            type: string
            format: uuid
        target_zones:
          type: array
          items:
            type: string
            format: uuid
        budget:
          type: number
          format: float
        start_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time

    Auction:
      type: object
      required:
        - id
        - surface_id
        - auction_type
        - status
        - start_date
        - end_date
      properties:
        id:
          type: string
          format: uuid
        surface_id:
          type: string
          format: uuid
        auction_type:
          type: string
          enum: [dutch, vickrey]
        status:
          type: string
          enum: [active, ended, cancelled]
        current_bid:
          type: number
          format: float
          nullable: true
        reserve_price:
          type: number
          format: float
        start_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time

    PlaceBidRequest:
      type: object
      required:
        - amount
      properties:
        amount:
          type: number
          format: float
          minimum: 0

    Bid:
      type: object
      required:
        - id
        - auction_id
        - bidder_id
        - amount
        - created_at
      properties:
        id:
          type: string
          format: uuid
        auction_id:
          type: string
          format: uuid
        bidder_id:
          type: string
          format: uuid
        amount:
          type: number
          format: float
        is_winning:
          type: boolean
        created_at:
          type: string
          format: date-time

    CampaignAnalytics:
      type: object
      required:
        - campaign_id
        - period
      properties:
        campaign_id:
          type: string
          format: uuid
        period:
          type: string
          enum: [day, week, month, all]
        impressions:
          type: integer
        clicks:
          type: integer
        ctr:
          type: number
          format: float
          description: Click-through rate (%)
        conversions:
          type: integer
        conversion_rate:
          type: number
          format: float
        revenue:
          type: number
          format: float
        cost:
          type: number
          format: float
        roi:
          type: number
          format: float
          description: Return on investment (%)

