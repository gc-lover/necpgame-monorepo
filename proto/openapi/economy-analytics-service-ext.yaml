              schema:
                $ref: common.yaml#/components/responses/TooManyRequests
        "500":
          $ref: common.yaml#/components/responses/InternalServerError

  /economy/analytics/alerts/{alertId}:
    get:
      tags:
        - Alerts
      summary: Get alert details
      operationId: getAlert
      security:
        - BearerAuth: []
      parameters:
        - name: alertId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Alert details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AlertResponse"
        "403":
          $ref: common.yaml#/components/responses/Forbidden
        "404":
          $ref: common.yaml#/components/responses/NotFound
        "500":
          $ref: common.yaml#/components/responses/InternalServerError

    put:
      tags:
        - Alerts
      summary: Update alert
      operationId: updateAlert
      security:
        - BearerAuth: []
      parameters:
        - name: alertId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateAlertRequest"
      responses:
        "200":
          description: Alert updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AlertResponse"
        "400":
          $ref: common.yaml#/components/responses/BadRequest
        "403":
          $ref: common.yaml#/components/responses/Forbidden
        "404":
          $ref: common.yaml#/components/responses/NotFound
        "500":
          $ref: common.yaml#/components/responses/InternalServerError

    delete:
      tags:
        - Alerts
      summary: Delete alert
      operationId: deleteAlert
      security:
        - BearerAuth: []
      parameters:
        - name: alertId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Alert deleted
          content:
            application/json:
              schema:
                $ref: common.yaml#/components/schemas/SuccessResponse
        "403":
          $ref: common.yaml#/components/responses/Forbidden
        "404":
          $ref: common.yaml#/components/responses/NotFound
        "500":
          $ref: common.yaml#/components/responses/InternalServerError

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    # Chart Data
    ChartDataResponse:
      type: object
      properties:
        asset_type:
          type: string
        asset_id:
          type: string
        timeframe:
          type: string
        data_type:
          type: string
        data:
          type: array
          items:
            $ref: "#/components/schemas/ChartDataPoint"
        metadata:
          $ref: "#/components/schemas/ChartMetadata"

    ChartDataPoint:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
        open:
          type: number
          format: float
        high:
          type: number
          format: float
        low:
          type: number
          format: float
        close:
          type: number
          format: float
        volume:
          type: integer

    ChartMetadata:
      type: object
      properties:
        total_points:
          type: integer
        last_updated:
          type: string
          format: date-time
        data_quality:
          type: string
          enum: [realtime, delayed, historical]

    # Technical Indicators
    TechnicalIndicatorsResponse:
      type: object
      properties:
        asset_type:
          type: string
        asset_id:
          type: string
        indicators:
          type: object
          additionalProperties:
            $ref: "#/components/schemas/IndicatorData"

    IndicatorData:
      type: object
      properties:
        name:
          type: string
        values:
          type: array
          items:
            type: number
            format: float
        signals:
          type: array
          items:
            $ref: "#/components/schemas/IndicatorSignal"

    IndicatorSignal:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
        type:
          type: string
          enum: [buy, sell, neutral]
        strength:
          type: number
          minimum: 0
          maximum: 1

    # Market Sentiment
    MarketSentimentResponse:
      type: object
      properties:
        overall_sentiment:
          type: number
          minimum: -1
          maximum: 1
          description: -1 (bearish) to 1 (bullish)
        fear_greed_index:
          type: integer
          minimum: 0
          maximum: 100
        sector_sentiment:
          type: object
          additionalProperties:
            type: number
            minimum: -1
            maximum: 1
        last_updated:
          type: string
          format: date-time

    SentimentHeatmapResponse:
      type: object
      properties:
        sector:
          type: string
        metric:
          type: string
        heatmap_data:
          type: array
          items:
            $ref: "#/components/schemas/HeatmapPoint"
        color_scale:
          type: array
          items:
            type: string

    HeatmapPoint:
      type: object
      properties:
        x:
          type: number
        y:
          type: number
        value:
          type: number
        label:
          type: string

    # Portfolio Analytics
    PortfolioAnalyticsResponse:
      type: object
      properties:
        portfolio_value:
          type: number
          format: float
        total_return:
          type: number
          format: float
        daily_change:
          type: number
          format: float
        assets:
          type: array
          items:
            $ref: "#/components/schemas/PortfolioAsset"
        performance_chart:
          type: array
          items:
            $ref: "#/components/schemas/PortfolioValuePoint"
        risk_metrics:
          $ref: "#/components/schemas/RiskMetrics"

    PortfolioAsset:
      type: object
      properties:
        asset_type:
          type: string
        asset_id:
          type: string
        quantity:
          type: number
        current_price:
          type: number
          format: float
        total_value:
          type: number
          format: float
        gain_loss:
          type: number
          format: float
        gain_loss_percent:
          type: number
          format: float

    PortfolioValuePoint:
      type: object
      properties:
        date:
          type: string
          format: date
        value:
          type: number
          format: float

    RiskMetrics:
      type: object
      properties:
        sharpe_ratio:
          type: number
          format: float
        volatility:
          type: number
          format: float
        max_drawdown:
          type: number
          format: float
        beta:
          type: number
          format: float

    PortfolioPerformanceResponse:
      type: object
      properties:
        total_trades:
          type: integer
        winning_trades:
          type: integer
        losing_trades:
          type: integer
        win_rate:
          type: number
          format: float
        profit_factor:
          type: number
          format: float
        average_win:
          type: number
          format: float
        average_loss:
          type: number
          format: float
        largest_win:
          type: number
          format: float
        largest_loss:
          type: number
          format: float
        risk_metrics:
          $ref: "#/components/schemas/RiskMetrics"

    # Alerts
    UserAlertsResponse:
      type: object
      properties:
        alerts:
          type: array
          items:
            $ref: "#/components/schemas/Alert"
        total_count:
          type: integer

    CreateAlertRequest:
      type: object
      required:
        - name
        - condition
        - asset_type
        - asset_id
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        condition:
          $ref: "#/components/schemas/AlertCondition"
        asset_type:
          type: string
          enum: [stock, currency, item, real_estate, vehicle]
        asset_id:
          type: string
        notification_channels:
          type: array
          items:
            type: string
            enum: [push, email, in_game]
          default: ["push"]
        active:
          type: boolean
          default: true

    UpdateAlertRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        condition:
          $ref: "#/components/schemas/AlertCondition"
        notification_channels:
          type: array
          items:
            type: string
            enum: [push, email, in_game]
        active:
          type: boolean

    AlertResponse:
      type: object
      properties:
        alert:
          $ref: "#/components/schemas/Alert"

    Alert:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        condition:
          $ref: "#/components/schemas/AlertCondition"
        asset_type:
          type: string
        asset_id:
          type: string
        status:
          type: string
          enum: [active, triggered, expired, paused]
        created_at:
          type: string
          format: date-time
        last_triggered:
          type: string
          format: date-time
        notification_channels:
          type: array
          items:
            type: string

    AlertCondition:
      type: object
      required:
        - type
      properties:
        type:
          type: string
          enum:
            [
              price_above,
              price_below,
              price_change,
              volume_spike,
              indicator_signal,
              custom_event,
            ]
        value:
          type: number
          format: float
        comparison_operator:
          type: string
          enum: [gt, lt, gte, lte, eq]
        timeframe:
          type: string
          enum: [1m, 5m, 15m, 1h, 4h, 1d, 1w]
        additional_params:
          type: object
