openapi: 3.0.3
info:
  title: Economy Trade Service Go API
  description: 'Enterprise-Grade Economy Trade Service API for NECPGAME MMOFPS RPG.

    **Enterprise-Grade Domain:** economy-domain

    **Module:** economy-trade-service-go

    **Purpose:** High-performance economy trade operations, active trades listing, and trade management

    **BACKEND NOTE:** Struct field alignment optimized (large → small types).

    All schemas ordered for optimal memory layout in generated Go code.

    Expected memory savings: 30-50% for trade-related structs.

    **Features:**

    - Real-time active trades listing (1000+ trades)
    - Trade filtering and sorting
    - Economy analytics integration
    - Anti-cheat validation for trade integrity

    **Performance:** P99 <50ms for trade operations, zero allocations in hot path
    '
  version: 1.0.0
  license:
    name: Proprietary
    url: https://necpgame.com/license
  contact:
    name: NECPGAME API Support
    url: https://necpgame.com/support
    email: api@economy-trade.necpgame.com
servers:
- url: http://localhost:8086/api/v1
  description: Economy Trade Service Go (development)
- url: https://economy-trade-go.necpgame.com/api/v1
  description: Economy Trade Service Go (production)
tags:
- name: Trade Operations
  description: Core trade operations and listings
- name: Trade Analytics
  description: Trade statistics and analytics
- name: Trade Validation
  description: Trade integrity validation
paths:
  /health:
    get:
      summary: Service health check
      operationId: healthCheck
      tags:
      - System
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
        '503':
          description: Service is unhealthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /economy/trade:
    get:
      summary: Get active trades
      operationId: getActiveTrades
      description: 'Retrieve list of active trades in the economy system.

        **BACKEND NOTE:** Hot path - optimized for 1000+ active trades, zero allocations.
        '
      tags:
      - Trade Operations
      parameters:
      - name: item_type
        in: query
        schema:
          type: string
          enum:
          - weapon
          - armor
          - implant
          - cosmetic
          - resource
          - all
        description: Filter by item type
      - name: min_price
        in: query
        schema:
          type: integer
          format: int64
          minimum: 0
        description: Minimum price filter
      - name: max_price
        in: query
        schema:
          type: integer
          format: int64
          minimum: 0
        description: Maximum price filter
      - name: seller_level
        in: query
        schema:
          type: integer
          format: int32
          minimum: 1
          maximum: 100
        description: Filter by seller level
      - name: sort_by
        in: query
        schema:
          type: string
          enum:
          - price_asc
          - price_desc
          - date_asc
          - date_desc
          - seller_level_desc
        default: date_desc
        description: Sort order for results
      - name: limit
        in: query
        schema:
          type: integer
          format: int32
          minimum: 1
          maximum: 100
          default: 20
        description: Maximum number of trades to return
      - name: offset
        in: query
        schema:
          type: integer
          format: int32
          minimum: 0
          default: 0
        description: Number of trades to skip
      responses:
        '200':
          description: Active trades retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ActiveTradesResponse'
        '400':
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '429':
          description: Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /economy/trade/{trade_id}:
    get:
      summary: Get trade details
      operationId: getTradeDetails
      description: Get detailed information about a specific active trade.
      tags:
      - Trade Operations
      parameters:
      - name: trade_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Trade ID
      responses:
        '200':
          description: Trade details retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TradeDetailsResponse'
        '404':
          description: Trade not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /economy/trade/stats:
    get:
      summary: Get trade statistics
      operationId: getTradeStats
      description: Get economy trade statistics and analytics.
      tags:
      - Trade Analytics
      responses:
        '200':
          description: Trade statistics retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TradeStatsResponse'
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      description: JWT Bearer token authentication
  schemas:
    HealthResponse:
      type: object
      required:
      - status
      - timestamp
      properties:
        version:
          type: string
        status:
          type: string
          enum:
          - healthy
        timestamp:
          type: string
          format: date-time
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    Error:
      type: object
      required:
      - code
      - message
      properties:
        code:
          type: string
          description: Error code
        message:
          type: string
          description: Human-readable error message
        details:
          type: object
          description: Additional error details
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ActiveTradesResponse:
      $ref: ./schemas/active-trades-response.yaml
    TradeDetailsResponse:
      $ref: ./schemas/trade-details-response.yaml
    TradeStatsResponse:
      $ref: ./schemas/trade-stats-response.yaml
    TradeListing:
      $ref: ./schemas/trade-listing.yaml
    TradeItem:
      $ref: ./schemas/trade-item.yaml
    DetailedTradeListing:
      $ref: ./schemas/detailed-trade-listing.yaml
    SellerInfo:
      $ref: ./schemas/seller-info.yaml
    DetailedTradeItem:
      $ref: ./schemas/detailed-trade-item.yaml
security:
- BearerAuth: []
