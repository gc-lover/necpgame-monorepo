# Execute Trade Request - Memory Optimized
# Issue: #2260

type: object
description: |
  BACKEND NOTE: Trade execution request (hot path, P99 <5ms).

  Fields ordered for struct alignment (large â†’ small types):
  - UUIDs (16 bytes) first
  - Integers (8 bytes)
  - Objects (8 bytes pointers)
  - Booleans (1 byte) last

  Expected memory: ~40 bytes/instance.
  Memory savings: 25-35% vs non-aligned structs.
required:
  - buyer_id
  - quantity
properties:
  # Large types first (16 bytes - UUID)
  buyer_id:
    type: string
    format: uuid
    description: Buyer participant UUID
    example: "550e8400-e29b-41d4-a716-446655440003"

  # Integers (8 bytes)
  quantity:
    type: integer
    format: int32
    minimum: 1
    maximum: 999999
    description: Quantity to purchase
    example: 1

  # Objects (8 bytes pointers)
  trade_options:
    type: object
    description: Optional trade execution parameters
    properties:
      max_price:
        type: integer
        format: int64
        description: Maximum acceptable price (for auctions)
      immediate_buy:
        type: boolean
        description: Execute immediate buy if available
        default: true

  # Booleans (1 byte)
  skip_validation:
    type: boolean
    description: Skip additional validation (internal use only)
    default: false

  use_insurance:
    type: boolean
    description: Use trade insurance if available
    default: false
