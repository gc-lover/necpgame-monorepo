# Listings Response - Memory Optimized
# Issue: #2260

type: object
description: |
  BACKEND NOTE: Paginated listings response (hot path, 1000+ RPS).

  Fields ordered for struct alignment (large â†’ small types):
  - Arrays (24 bytes) first
  - Integers (8 bytes)
  - Objects (8 bytes pointers)
  - Booleans (1 byte) last

  Expected memory: ~64 bytes/instance (plus array contents).
  Memory savings: 25-35% vs non-aligned structs.
required:
  - listings
  - total_count
  - page_info
properties:
  # Arrays (24 bytes)
  listings:
    type: array
    description: Array of trade listings
    items:
      $ref: '#/components/schemas/TradeListing'
    maxItems: 100

  # Integers (8 bytes)
  total_count:
    type: integer
    format: int64
    description: Total number of listings matching criteria
    example: 1250

  # Objects (8 bytes pointers)
  page_info:
    type: object
    description: Pagination information
    required:
      - has_next_page
      - has_previous_page
      - current_page
      - total_pages
    properties:
      has_next_page:
        type: boolean
        description: Whether there are more pages after current
      has_previous_page:
        type: boolean
        description: Whether there are pages before current
      current_page:
        type: integer
        format: int32
        minimum: 1
        description: Current page number
        example: 1
      total_pages:
        type: integer
        format: int32
        minimum: 1
        description: Total number of pages
        example: 63
      items_per_page:
        type: integer
        format: int32
        description: Items per page
        example: 20
      next_cursor:
        type: string
        description: Cursor for next page (if available)

  market_summary:
    type: object
    description: Market summary statistics
    properties:
      active_listings:
        type: integer
        format: int64
        description: Total active listings
      total_volume_24h:
        type: integer
        format: int64
        description: 24h trading volume
      average_price_change:
        type: number
        format: float
        description: Average price change percentage

  # Booleans (1 byte)
  cache_hit:
    type: boolean
    description: Whether response came from cache
    example: true
