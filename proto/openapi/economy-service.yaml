# Issue: #104

openapi: 3.0.3
info:
  title: Economy Service API
  description: |
    API для экономических механик: торговля, крафт, инвентарь, валюты, рынки, аукционы, биржа.
    
    **Основные модули:**
    - Trading - P2P торговля
    - Crafting - крафтинг предметов
    - Inventory - управление инвентарем
    - Currencies - валюты и ресурсы
    - Markets - рынки и аукционы
    - Stock Exchange - биржа
    - Production Chains - производственные цепочки
    
    **Performance:**
    - Hot endpoints: GET /economy/inventory, POST /economy/trade
    - Expected load: 1k RPS, P99 <50ms
    - Event-based для большинства операций
  version: 2.0.0
  contact:
    name: NECPGAME API Support
    email: api@necp.game

servers:
  - url: http://localhost:8085/api/v1
    description: Локальный сервер разработки
  - url: https://api.necp.game/api/v1
    description: Продакшен сервер

tags:
  - name: Trading
    description: Торговля
  - name: Crafting
    description: Крафтинг
  - name: Inventory
    description: Инвентарь
  - name: Currencies
    description: Валюты
  - name: Markets
    description: Рынки
  - name: Stock Exchange
    description: Биржа
  - name: Currency Exchange
    description: Валютная биржа
  - name: Investments
    description: Инвестиции
  - name: Economy Events
    description: Экономические события

paths:
  /economy/overview:
    $ref: "economy-core-service.yaml#/paths/~1economy~1overview"
  
  /economy/currencies:
    $ref: "economy-core-service.yaml#/paths/~1economy~1currencies"
  
  # Inventory - Issue: #104
  /economy/inventory/{characterId}:
    $ref: "economy-inventory-core-service.yaml#/paths/~1economy~1inventory~1{characterId}"
  
  /economy/inventory/{characterId}/items:
    $ref: "economy-inventory-core-service.yaml#/paths/~1economy~1inventory~1{characterId}~1items"
  
  /economy/inventory/{characterId}/equipment:
    $ref: "economy-inventory-equipment-service.yaml#/paths/~1economy~1inventory~1{characterId}~1equipment"
  
  /economy/inventory/{characterId}/equipment/equip:
    $ref: "economy-inventory-equipment-service.yaml#/paths/~1economy~1inventory~1{characterId}~1equipment~1equip"
  
  /economy/inventory/{characterId}/equipment/unequip:
    $ref: "economy-inventory-equipment-service.yaml#/paths/~1economy~1inventory~1{characterId}~1equipment~1unequip"
  
  /economy/inventory/{characterId}/storage:
    $ref: "economy-inventory-storage-service.yaml#/paths/~1economy~1inventory~1{characterId}~1storage"
  
  /economy/inventory/{characterId}/storage/items:
    $ref: "economy-inventory-storage-service.yaml#/paths/~1economy~1inventory~1{characterId}~1storage~1items"
  
  /economy/trade/sessions:
    $ref: "economy-trade-sessions-service.yaml#/paths/~1economy~1trade~1sessions"
  
  /economy/crafting/recipes:
    get:
      tags:
        - Crafting
      summary: Получить рецепты крафта
      operationId: getCraftingRecipes
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Список рецептов
          content:
            application/json:
              schema:
                type: object
                properties:
                  recipes:
                    type: array
        "401":
          $ref: "common.yaml#/components/responses/Unauthorized"
  
  /economy/market/listings:
    $ref: "economy-player-market-service.yaml#/paths/~1economy~1market~1listings"
  
  /economy/stock/exchange:
    $ref: "economy-stock-exchange-core-service.yaml#/paths/~1economy~1stock~1exchange"
  
  # Currency Exchange - Issue: #224
  /currency-exchange/rates:
    $ref: "economy-currency-exchange-rates-service.yaml#/paths/~1currency-exchange~1rates"
  
  /currency-exchange/rates/{pair}:
    $ref: "economy-currency-exchange-rates-service.yaml#/paths/~1currency-exchange~1rates~1{pair}"
  
  /currency-exchange/rates/history:
    $ref: "economy-currency-exchange-rates-service.yaml#/paths/~1currency-exchange~1rates~1history"
  
  /currency-exchange/quote:
    $ref: "economy-currency-exchange-rates-service.yaml#/paths/~1currency-exchange~1quote"
  
  /currency-exchange/orders/instant:
    $ref: "economy-currency-exchange-orders-service.yaml#/paths/~1currency-exchange~1orders~1instant"
  
  /currency-exchange/orders/limit:
    $ref: "economy-currency-exchange-orders-service.yaml#/paths/~1currency-exchange~1orders~1limit"
  
  /currency-exchange/orders:
    $ref: "economy-currency-exchange-orders-service.yaml#/paths/~1currency-exchange~1orders"
  
  /currency-exchange/orders/{order_id}:
    $ref: "economy-currency-exchange-orders-service.yaml#/paths/~1currency-exchange~1orders~1{order_id}"
  
  # Investments - Issue: #228
  /economy/investments/buy:
    $ref: "economy-investments-core-service.yaml#/paths/~1economy~1investments~1buy"
  
  /economy/investments/sell:
    $ref: "economy-investments-core-service.yaml#/paths/~1economy~1investments~1sell"
  
  /economy/investments/positions:
    $ref: "economy-investments-core-service.yaml#/paths/~1economy~1investments~1positions"
  
  /economy/investments/transactions:
    $ref: "economy-investments-core-service.yaml#/paths/~1economy~1investments~1transactions"
  
  # Economy Events - Issue: #225
  /economy/events:
    $ref: "economy-events-service.yaml#/paths/~1economy~1events"
  
  /economy/events/{event_id}:
    $ref: "economy-events-service.yaml#/paths/~1economy~1events~1{event_id}"
  
  /economy/events/{event_id}/announce:
    $ref: "economy-events-service.yaml#/paths/~1economy~1events~1{event_id}~1announce"
  
  /economy/events/{event_id}/activate:
    $ref: "economy-events-service.yaml#/paths/~1economy~1events~1{event_id}~1activate"
  
  /economy/events/{event_id}/archive:
    $ref: "economy-events-service.yaml#/paths/~1economy~1events~1{event_id}~1archive"
  
  /economy/events/active:
    $ref: "economy-events-service.yaml#/paths/~1economy~1events~1active"
  
  /economy/events/{event_id}/metrics:
    $ref: "economy-events-service.yaml#/paths/~1economy~1events~1{event_id}~1metrics"

components:
  securitySchemes:
    BearerAuth:
      $ref: "common.yaml#/components/securitySchemes/BearerAuth"

  responses:
    BadRequest:
      $ref: "common.yaml#/components/responses/BadRequest"
    Unauthorized:
      $ref: "common.yaml#/components/responses/Unauthorized"
    InternalServerError:
      $ref: "common.yaml#/components/responses/InternalServerError"

security:
  - BearerAuth: []

