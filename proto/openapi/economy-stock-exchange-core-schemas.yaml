openapi: 3.0.3
components:
  schemas:
    Stock:
      type: object
      required:
        - id
        - symbol
        - corporation_id
        - current_price
      properties:
        id:
          type: string
          format: uuid
        corporation_id:
          type: string
          format: uuid
        symbol:
          type: string
        corporation_name:
          type: string
        sector:
          type: string
        volume_24h:
          type: integer
          description: Объем торгов за 24 часа
        current_price:
          type: number
          format: float
        change_24h:
          type: number
          format: float
          description: Изменение цены за 24 часа (%)
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    StockDetailed:
      type: object
      required:
        - id
        - symbol
        - corporation_id
        - current_price
      properties:
        id:
          type: string
          format: uuid
        corporation_id:
          type: string
          format: uuid
        symbol:
          type: string
        corporation_name:
          type: string
        sector:
          type: string
        description:
          type: string
        volume_24h:
          type: integer
        shares_outstanding:
          type: integer
        current_price:
          type: number
          format: float
        change_24h:
          type: number
          format: float
        change_7d:
          type: number
          format: float
        market_cap:
          type: number
          format: float
        high_24h:
          type: number
          format: float
        low_24h:
          type: number
          format: float
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    StockPrice:
      type: object
      required:
        - stock_id
        - price
        - updated_at
      properties:
        stock_id:
          type: string
          format: uuid
        symbol:
          type: string
        updated_at:
          type: string
          format: date-time
        price:
          type: number
          format: float
        change_24h:
          type: number
          format: float
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CreateOrderRequest:
      type: object
      required:
        - stock_id
        - side
        - quantity
        - order_type
      properties:
        stock_id:
          type: string
          format: uuid
        side:
          type: string
          enum:
            - buy
            - sell
        order_type:
          type: string
          enum:
            - market
            - limit
        quantity:
          type: integer
          minimum: 1
        limit_price:
          type: number
          format: float
          description: Цена для limit ордера
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    Order:
      type: object
      required:
        - id
        - stock_id
        - side
        - quantity
        - order_type
        - status
        - created_at
      properties:
        id:
          type: string
          format: uuid
        stock_id:
          type: string
          format: uuid
        stock_symbol:
          type: string
        side:
          type: string
          enum:
            - buy
            - sell
        order_type:
          type: string
          enum:
            - market
            - limit
        status:
          type: string
          enum:
            - pending
            - partially_filled
            - filled
            - cancelled
        created_at:
          type: string
          format: date-time
        executed_at:
          type: string
          format: date-time
          nullable: true
        quantity:
          type: integer
        filled_quantity:
          type: integer
        limit_price:
          type: number
          format: float
          nullable: true
        average_fill_price:
          type: number
          format: float
          nullable: true
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    Portfolio:
      type: object
      required:
        - total_value
        - positions
      properties:
        positions:
          type: array
          items:
            $ref: '#/components/schemas/PortfolioPosition'
        total_value:
          type: number
          format: float
          description: Общая стоимость портфеля
        total_cost:
          type: number
          format: float
          description: Общая стоимость покупки
        total_profit:
          type: number
          format: float
          description: Общая прибыль/убыток
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    PortfolioPosition:
      type: object
      required:
        - stock_id
        - quantity
        - average_buy_price
      properties:
        stock_id:
          type: string
          format: uuid
        stock_symbol:
          type: string
        corporation_name:
          type: string
        quantity:
          type: integer
        average_buy_price:
          type: number
          format: float
        current_price:
          type: number
          format: float
        total_cost:
          type: number
          format: float
        current_value:
          type: number
          format: float
        profit:
          type: number
          format: float
        profit_percent:
          type: number
          format: float
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    Trade:
      type: object
      required:
        - id
        - stock_id
        - side
        - quantity
        - price
        - executed_at
      properties:
        id:
          type: string
          format: uuid
        stock_id:
          type: string
          format: uuid
        stock_symbol:
          type: string
        side:
          type: string
          enum:
            - buy
            - sell
        executed_at:
          type: string
          format: date-time
        quantity:
          type: integer
        price:
          type: number
          format: float
        total_value:
          type: number
          format: float
        commission:
          type: number
          format: float
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
