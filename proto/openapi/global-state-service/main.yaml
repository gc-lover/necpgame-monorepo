openapi: 3.0.3
info:
  title: Global State Service - Enterprise Grade
  description: 'Enterprise-Grade Global State Management API for NECPGAME MMOFPS RPG.

    **Enterprise-Grade Domain:** specialized-domain

    **Module:** global-state-service-go

    **Purpose:** High-performance global state management with event sourcing, distributed
    caching, and real-time synchronization for 10k+ concurrent players.

    **BACKEND NOTE:** Struct field alignment optimized (large â†’ small types). All
    schemas ordered for optimal memory layout in generated Go code. Expected memory
    savings: 30-50% for state structs.

    Context timeouts: 50ms for state operations, 200ms for analytics queries, 10ms
    for cache operations.

    DB pool config: Read replicas for historical queries, Redis cluster for hot state
    data.

    **Features:**

    - Event sourcing for complete state history and audit trails - Distributed state
    synchronization with CRDT conflict resolution - Multi-level caching (L1 memory,
    L2 Redis, L3 PostgreSQL) - Real-time state streaming with WebSocket support -
    State reconstruction and time travel capabilities - Anti-cheat state validation
    and rollback mechanisms

    **Performance:** P99 <50ms for state operations, 10k+ concurrent players, zero
    allocations in hot path '
  version: 1.0.0
  license:
    name: Proprietary
    url: https://necpgame.com/license
  contact:
    name: NECPGAME Global State API Support
    url: https://necpgame.com/support
    email: api@global-state.necpgame.com
servers:
- url: http://localhost:8087/api/v1
  description: Global State Service Go (development)
- url: https://global-state-go.necpgame.com/api/v1
  description: Global State Service Go (production)
security:
- BearerAuth: []
tags:
- name: State Management
  description: Core state operations and management
- name: Event Sourcing
  description: Event processing and state reconstruction
- name: Synchronization
  description: Cross-region state synchronization
- name: Analytics
  description: State analytics and reporting
- name: System
  description: System health and monitoring
paths:
  /health:
    $ref: ./paths/health.yaml#/paths/~1health
  /state/{aggregateType}/{aggregateId}:
    $ref: ./paths/state-{aggregateType}-{aggregateId}.yaml#/paths/~1state~1{aggregateType}~1{aggregateId}
  /events:
    $ref: ./paths/events.yaml#/paths/~1events
  /events/{aggregateType}/{aggregateId}:
    $ref: ./paths/events-{aggregateType}-{aggregateId}.yaml#/paths/~1events~1{aggregateType}~1{aggregateId}
  /sync:
    $ref: ./paths/sync.yaml#/paths/~1sync
  /analytics/state-changes:
    $ref: ./paths/analytics-state-changes.yaml#/paths/~1analytics~1state-changes
components:
  schemas:
    HealthResponse:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/HealthResponse
    Error:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/Error
    AggregateState:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/AggregateState
    StateUpdateRequest:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/StateUpdateRequest
    StateUpdateResponse:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/StateUpdateResponse
    GameEvent:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/GameEvent
    EventPublishRequest:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/EventPublishRequest
    EventPublishResponse:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/EventPublishResponse
    EventHistoryResponse:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/EventHistoryResponse
    SyncRequest:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/SyncRequest
    StateChange:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/StateChange
    SyncResponse:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/SyncResponse
    SyncConflict:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/SyncConflict
    StateAnalyticsResponse:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/StateAnalyticsResponse
    StateMetric:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/StateMetric
    StateAnalyticsSummary:
      $ref: ./schemas/global-state-service-schemas.yaml#/components/schemas/StateAnalyticsSummary
  responses: {}
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      description: JWT Bearer token authentication
