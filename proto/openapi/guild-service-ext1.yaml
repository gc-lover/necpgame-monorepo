        - BearerAuth: []
      parameters:
        - name: guild_id
          in: path
          required: true
          description: ID гильдии
          schema:
            type: string
            format: uuid
        - name: player_id
          in: path
          required: true
          description: ID игрока
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Член успешно исключен
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /guilds/{guild_id}/invitations:
    get:
      tags:
        - Member Management
      summary: Получить список приглашений гильдии
      description: Возвращает список активных приглашений гильдии.
      operationId: getGuildInvitations
      security:
        - BearerAuth: []
      parameters:
        - name: guild_id
          in: path
          required: true
          description: ID гильдии
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/Limit'
        - name: status
          in: query
          description: Статус приглашения
          schema:
            type: string
            enum: [pending, accepted, declined, expired]
      responses:
        '200':
          description: Список приглашений
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InvitationListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /guilds/{guild_id}/invitations/{invitation_id}:
    put:
      tags:
        - Member Management
      summary: Ответить на приглашение в гильдию
      description: Принимает или отклоняет приглашение в гильдию.
      operationId: respondToInvitation
      security:
        - BearerAuth: []
      parameters:
        - name: guild_id
          in: path
          required: true
          description: ID гильдии
          schema:
            type: string
            format: uuid
        - name: invitation_id
          in: path
          required: true
          description: ID приглашения
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RespondToInvitationRequest'
      responses:
        '200':
          description: Ответ на приглашение принят
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InvitationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          description: Приглашение уже обработано
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /guilds/{guild_id}/roles:
    get:
      tags:
        - Role Management
      summary: Получить роли гильдии
      description: Возвращает список ролей гильдии с их разрешениями.
      operationId: getGuildRoles
      security:
        - BearerAuth: []
      parameters:
        - name: guild_id
          in: path
          required: true
          description: ID гильдии
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Список ролей гильдии
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildRoleListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      tags:
        - Role Management
      summary: Создать новую роль в гильдии
      description: |
        Создает новую роль в гильдии с указанными разрешениями.
        Требует разрешений на управление ролями.
      operationId: createGuildRole
      security:
        - BearerAuth: []
      parameters:
        - name: guild_id
          in: path
          required: true
          description: ID гильдии
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGuildRoleRequest'
      responses:
        '201':
          description: Роль успешно создана
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildRoleResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          description: Роль с таким названием уже существует
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /guilds/{guild_id}/resources:
    get:
      tags:
        - Resource Management
      summary: Получить ресурсы гильдии
      description: Возвращает информацию о ресурсах и казне гильдии.
      operationId: getGuildResources
      security:
        - BearerAuth: []
      parameters:
        - name: guild_id
          in: path
          required: true
          description: ID гильдии
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Ресурсы гильдии
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildResourcesResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      tags:
        - Resource Management
      summary: Добавить ресурсы в казну гильдии
      description: Добавляет ресурсы в казну гильдии (валюту, предметы).
      operationId: addGuildResources
      security:
        - BearerAuth: []
      parameters:
        - name: guild_id
          in: path
          required: true
          description: ID гильдии
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddResourcesRequest'
      responses:
        '200':
          description: Ресурсы успешно добавлены
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildResourcesResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /guilds/{guild_id}/tournaments:
    get:
      tags:
        - Tournament Management
      summary: Получить турниры гильдии
      description: Возвращает список активных и предстоящих турниров гильдии.
      operationId: getGuildTournaments
      security:
        - BearerAuth: []
      parameters:
        - name: guild_id
          in: path
          required: true
          description: ID гильдии
          schema:
            type: string
            format: uuid
        - name: status
          in: query
          description: Статус турнира
          schema:
            type: string
            enum: [upcoming, active, completed, cancelled]
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/Limit'
      responses:
        '200':
          description: Список турниров гильдии
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildTournamentListResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

    post:
      tags:
        - Tournament Management
      summary: Создать турнир гильдии
      description: |
        Создает новый турнир для гильдии.
        Требует соответствующих разрешений и достаточных ресурсов.
      operationId: createGuildTournament
      security:
        - BearerAuth: []
      parameters:
        - name: guild_id
          in: path
          required: true
          description: ID гильдии
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTournamentRequest'
      responses:
        '201':
          description: Турнир успешно создан
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildTournamentResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          description: Конфликт времени проведения
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          $ref: '#/components/responses/InternalServerError'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  parameters:
    Page:
      name: page
      in: query
      description: Номер страницы (начиная с 1)
      schema:
        type: integer
        minimum: 1
        default: 1
    Limit:
      name: limit
      in: query
      description: Количество элементов на странице
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20

  responses:
    BadRequest:
      description: Некорректный запрос
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    Unauthorized:
