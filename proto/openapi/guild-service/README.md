# Guild Service - OpenAPI Specification

## üìã **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**

Guild Service –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–∏–ª—å–¥–∏—è–º–∏/–∫–ª–∞–Ω–∞–º–∏ –¥–ª—è NECPGAME - enterprise-grade API –¥–ª—è
—Å–æ–∑–¥–∞–Ω–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≥–∏–ª—å–¥–∏–π –≤ –∫–∏–±–µ—Ä–ø–∞–Ω–∫ MMOFPS RPG. –°–µ—Ä–≤–∏—Å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é, –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∏
–≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π.

## üéØ **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**

### **üè∞ Guild Lifecycle (–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –≥–∏–ª—å–¥–∏–π)**

- **–°–æ–∑–¥–∞–Ω–∏–µ –≥–∏–ª—å–¥–∏–π**: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏ –Ω–∞—á–∞–ª—å–Ω—ã–º –∫–∞–ø–∏—Ç–∞–ª–æ–º
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–∏–ª—å–¥–∏—è–º–∏**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫, –æ–ø–∏—Å–∞–Ω–∏–π –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- **–†–∞—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –≥–∏–ª—å–¥–∏–π —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –∞–∫—Ç–∏–≤–æ–≤
- **–ò–µ—Ä–∞—Ä—Ö–∏—è —É—Ä–æ–≤–Ω–µ–π**: –ü—Ä–æ–≥—Ä–µ—Å—Å–∏—è –≥–∏–ª—å–¥–∏–π —Å –æ–ø—ã—Ç–æ–º –∏ —Ä–µ–ø—É—Ç–∞—Ü–∏–µ–π

### **üë• Member Management (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–ª–µ–Ω–∞–º–∏)**

- **–†–æ–ª–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**: –õ–∏–¥–µ—Ä—ã, –æ—Ñ–∏—Ü–µ—Ä—ã, –≤–µ—Ç–µ—Ä–∞–Ω—ã, —Ä—è–¥–æ–≤—ã–µ —á–ª–µ–Ω—ã
- **–†–∞–∑—Ä–µ—à–µ–Ω–∏—è**: –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–∫–ª–∞–¥–∞ –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ—Å–µ—â–µ–Ω–∏—è
- **–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è**: –°–∏—Å—Ç–µ–º–∞ –∏–Ω–≤–∞–π—Ç–æ–≤ —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

### **üéØ Recruitment System (–°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥–∞)**

- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è**: –§–æ—Ä–º–∞–ª—å–Ω—ã–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ –≥–∏–ª—å–¥–∏—é
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —É—Ä–æ–≤–Ω–∏, —Ä–µ–ø—É—Ç–∞—Ü–∏—è, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∫—Ä–∏—Ç–µ—Ä–∏—è–º –≤—Å—Ç—É–ø–ª–µ–Ω–∏—è
- **–û–¥–æ–±—Ä–µ–Ω–∏–µ**: –ú–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –∑–∞—è–≤–æ–∫

### **üí∞ Banking & Economy (–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞)**

- **–û–±—â–∞—è –∫–∞–∑–Ω–∞**: –°–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –≤–∞–ª—é—Ç—ã
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∞—É–¥–∏—Ç–æ–º
- **–ù–∞–ª–æ–≥–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–±–æ—Ä—ã —Å —á–ª–µ–Ω–æ–≤ –≥–∏–ª—å–¥–∏–∏
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ**: –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–æ—Ö–æ–¥–æ–≤

### **üó∫Ô∏è Territory Control (–ö–æ–Ω—Ç—Ä–æ–ª—å —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π)**

- **–ó–∞—Ö–≤–∞—Ç –∑–æ–Ω**: PvP —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π
- **–†–µ—Å—É—Ä—Å—ã**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ—Ö–æ–¥–∞ –æ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã—Ö –∑–æ–Ω
- **–û–±–æ—Ä–æ–Ω–∞**: –°–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π
- **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã**: –ú–µ–∂–≥–∏–ª—å–¥–µ–π—Å–∫–∏–µ –≤–æ–π–Ω—ã –∏ –∞–ª—å—è–Ω—Å—ã

### **üì¢ Social Features (–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)**

- **–û–±—ä—è–≤–ª–µ–Ω–∏—è**: –ü—É–±–ª–∏—á–Ω—ã–µ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –≥–∏–ª—å–¥–∏–∏
- **–°–æ–±—ã—Ç–∏—è**: –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ä–µ–π–¥–æ–≤, –≤—Å—Ç—Ä–µ—á –∏ —Ç—É—Ä–Ω–∏—Ä–æ–≤
- **–ö–∞–ª–µ–Ω–¥–∞—Ä—å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–∏–ª—å–¥–µ–π—Å–∫–∏—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
- **–ò—Å—Ç–æ—Ä–∏—è**: –ê—Ä—Ö–∏–≤ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –∏ —Å–æ–±—ã—Ç–∏–π

## üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**

```
guild-service/
‚îú‚îÄ‚îÄ main.yaml           # –û—Å–Ω–æ–≤–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
‚îú‚îÄ‚îÄ README.md          # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ management/        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–∏–ª—å–¥–∏—è–º–∏
‚îú‚îÄ‚îÄ members/           # –ß–ª–µ–Ω—Å—Ç–≤–æ –∏ —Ä–æ–ª–∏
‚îú‚îÄ‚îÄ recruitment/       # –†–µ–∫—Ä—É—Ç–∏–Ω–≥ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ banking/           # –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îú‚îÄ‚îÄ territory/         # –¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –∏ PvP
‚îî‚îÄ‚îÄ social/            # –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
```

## üîó **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**

### **Common Architecture (SOLID/DRY)**

- **common/schemas/social-entities.yaml**: `GuildEntity`, `GuildMemberEntity`
- **common/schemas/common.yaml**: `BaseEntity`, `UUID`, `Timestamp`
- **common/responses/**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —É—Å–ø–µ—Ö–∞/–æ—à–∏–±–∫–∏
- **common/security/**: JWT Bearer authentication

### **External Services**

- **currency-service**: –î–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –Ω–∞–ª–æ–≥–æ–≤
- **notification-service**: –î–ª—è –æ–ø–æ–≤–µ—â–µ–Ω–∏–π —á–ª–µ–Ω–æ–≤ –≥–∏–ª—å–¥–∏–∏
- **achievement-service**: –î–ª—è –≥–∏–ª—å–¥–µ–π—Å–∫–∏—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- **territory-service**: –î–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π

## üìä **Performance**

### **Response Times (P99)**

- **Health Check**: <1ms
- **Get Guild Info**: <40ms (—Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
- **List Members**: <60ms (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)
- **Bank Transaction**: <70ms (—Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –±–∞–ª–∞–Ω—Å–∞)
- **Territory Update**: <50ms (—Å –≥–µ–æ-–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–µ–π)

### **Throughput**

- **Guild Operations**: 5,000+ ops/sec peak
- **Member Queries**: 10,000+ queries/sec peak
- **Bank Transactions**: 2,000+ tx/sec peak
- **Territory Updates**: 1,000+ updates/sec peak

### **Scalability**

- **Database Sharding**: –ü–æ guild_id –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- **Redis Clustering**: –î–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≥–∏–ª—å–¥–µ–π—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **Event-Driven**: Kafka –¥–ª—è –º–µ–∂–≥–∏–ª—å–¥–µ–π—Å–∫–∏—Ö –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π
- **CDN Integration**: –î–ª—è —ç–º–±–ª–µ–º –∏ –±–∞–Ω–Ω–µ—Ä–æ–≤ –≥–∏–ª—å–¥–∏–π

### **Memory Usage**

- **Per Guild Cache**: <2KB (metadata + member list)
- **Bank Balance Cache**: <512 bytes per guild
- **Territory Data**: <1KB per controlled zone
- **Event Calendar**: <256 bytes per active event

## üöÄ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**

### **–í–∞–ª–∏–¥–∞—Ü–∏—è**

```bash
# Redocly linting
npx @redocly/cli lint main.yaml

# Bundle –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ $ref
npx @redocly/cli bundle main.yaml -o bundled.yaml
```

### **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è Go –∫–æ–¥–∞**

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ bundled —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
ogen --target ../../services/guild-service-go/pkg/api \
     --package api --clean bundled.yaml
```

### **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

```bash
# HTML –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
npx @redocly/cli build-docs main.yaml -o docs/index.html

# Swagger UI playground
npx @redocly/cli build-docs main.yaml --template swagger-ui -o docs/playground.html
```

## üîß **Backend Implementation Notes**

### **Database Design**

```sql
-- Guilds table (main entity)
CREATE TABLE guilds (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(50) NOT NULL UNIQUE,
    tag VARCHAR(5) NOT NULL UNIQUE,
    description TEXT,
    leader_id UUID NOT NULL,
    level INTEGER NOT NULL DEFAULT 1,
    experience BIGINT NOT NULL DEFAULT 0,
    reputation INTEGER NOT NULL DEFAULT 0,
    member_count INTEGER NOT NULL DEFAULT 1,
    max_members INTEGER NOT NULL DEFAULT 50,
    is_recruiting BOOLEAN NOT NULL DEFAULT true,
    emblem_url TEXT,
    founded_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
) PARTITION BY HASH (id);

-- Guild members (membership tracking)
CREATE TABLE guild_members (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    guild_id UUID NOT NULL,
    user_id UUID NOT NULL,
    role VARCHAR(20) NOT NULL DEFAULT 'recruit',
    joined_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    contribution_points BIGINT NOT NULL DEFAULT 0,
    is_active BOOLEAN NOT NULL DEFAULT true,
    UNIQUE(guild_id, user_id)
) PARTITION BY HASH (guild_id);

-- Guild bank transactions
CREATE TABLE guild_bank_transactions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    guild_id UUID NOT NULL,
    type VARCHAR(20) NOT NULL,
    amount BIGINT NOT NULL,
    currency VARCHAR(20) NOT NULL DEFAULT 'credits',
    description TEXT,
    executed_by UUID NOT NULL,
    balance_after BIGINT NOT NULL,
    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
) PARTITION BY HASH (guild_id);

-- Guild applications (recruitment)
CREATE TABLE guild_applications (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    guild_id UUID NOT NULL,
    user_id UUID NOT NULL,
    application_text TEXT NOT NULL,
    status VARCHAR(20) NOT NULL DEFAULT 'pending',
    applied_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    reviewed_by UUID,
    reviewed_at TIMESTAMPTZ,
    UNIQUE(guild_id, user_id, status)
) PARTITION BY HASH (guild_id);
```

### **Redis Caching Strategy**

```go
// Guild metadata cache
guildMetaKey := fmt.Sprintf("guild:%s:meta", guildID)

// Member list cache (with pagination)
guildMembersKey := fmt.Sprintf("guild:%s:members:%d:%d", guildID, offset, limit)

// Bank balance cache
guildBankKey := fmt.Sprintf("guild:%s:bank", guildID)

// Territory control cache
guildTerritoryKey := fmt.Sprintf("guild:%s:territory", guildID)

// Active events cache
guildEventsKey := fmt.Sprintf("guild:%s:events:active", guildID)
```

### **Event-Driven Architecture**

```go
// Guild events via Kafka
type GuildEvent struct {
    GuildID    string    `json:"guild_id"`
    EventType  string    `json:"event_type"`  // member_joined, bank_transaction, territory_lost
    ActorID    string    `json:"actor_id"`
    TargetID   string    `json:"target_id,omitempty"`
    Data       any       `json:"data"`
    Timestamp  time.Time `json:"timestamp"`
}

// Event handlers
func handleGuildMemberJoined(event GuildEvent) {
    // Update member count cache
    // Send notifications to guild
    // Update activity metrics
}

func handleGuildBankTransaction(event GuildEvent) {
    // Update bank balance cache
    // Send transaction notifications
    // Update financial metrics
}
```

### **Territory Control System**

```go
type TerritoryController struct {
    redis  *redis.Client
    kafka  *kafka.Producer
    mutex  sync.RWMutex
    zones  map[string]*ControlledZone
}

type ControlledZone struct {
    ZoneID         string    `json:"zone_id"`
    GuildID        string    `json:"guild_id"`
    ControlPercent int       `json:"control_percent"`
    LastUpdated    time.Time `json:"last_updated"`
    DefenseLevel   int       `json:"defense_level"`
}

// Territory capture logic
func (tc *TerritoryController) CaptureZone(attackerGuildID, zoneID string) error {
    tc.mutex.Lock()
    defer tc.mutex.Unlock()

    zone, exists := tc.zones[zoneID]
    if !exists {
        return errors.New("zone not found")
    }

    // PvP capture logic here
    // Update control percentage
    // Send zone change events

    return tc.updateZoneControl(zoneID, attackerGuildID, newControlPercent)
}
```

### **Rate Limiting**

```go
// Guild creation limits
guildCreationLimiter := tollbooster.NewLimiter(1, time.Hour) // 1 guild per hour per user

// Application submission limits
applicationLimiter := tollbooster.NewLimiter(5, time.Hour) // 5 applications per hour

// Bank transaction limits
bankTransactionLimiter := tollbooster.NewLimiter(100, time.Hour) // 100 transactions per hour per guild

// Event creation limits
eventCreationLimiter := tollbooster.NewLimiter(10, time.Day) // 10 events per day per guild
```

## üîê **Security Considerations**

### **Guild Ownership**

- Leader-only operations: disband, transfer leadership
- Officer permissions: member management, bank withdrawals
- Member permissions: view operations, event participation
- Public permissions: view basic info, apply for membership

### **Bank Security**

- Multi-signature requirements for large transactions
- Audit trails for all financial operations
- Fraud detection and prevention
- Balance consistency checks

### **Recruitment Safety**

- Anti-spam measures for applications
- Identity verification for high-level guilds
- Background checks integration
- Automated risk assessment

### **Territory Protection**

- Anti-cheat measures for territory control
- Dispute resolution system
- Escalation procedures for conflicts
- Fair play enforcement

## üìà **Monitoring & Observability**

### **Key Metrics**

```prometheus
# Guild system metrics
guilds_active_total 15420
guild_members_total 245680
guild_bank_transactions_total{type="deposit"} 45670

# Performance metrics
guild_query_duration_p95 45
guild_member_list_duration_p95 67
guild_bank_transaction_duration_p95 78

# Territory metrics
guild_territory_controlled_zones 1250
guild_territory_conflicts_total 890
guild_territory_capture_rate 0.15

# Social metrics
guild_events_created_total 5600
guild_announcements_posted_total 12340
guild_applications_processed_total 45600
```

### **Distributed Tracing**

```go
// Guild operation tracing
func createGuild(ctx context.Context, req CreateGuildRequest) (*Guild, error) {
    span, ctx := tracer.StartSpanFromContext(ctx, "guild.create")
    defer span.Finish()

    span.SetTag("guild.name", req.Name)
    span.SetTag("guild.founder", req.LeaderID)
    span.SetTag("operation", "create")

    // Implementation with tracing
    guild, err := s.guildRepo.Create(ctx, req)
    if err != nil {
        span.SetTag("error", true)
        span.LogFields(log.Error(err))
        return nil, err
    }

    span.SetTag("guild.id", guild.ID)
    return guild, nil
}
```

### **Health Checks**

```yaml
# Guild service health endpoints
/health:
  status: "healthy"
  guilds_active: 15420
  members_online: 45670
  territories_controlled: 1250

/health/bank:
  status: "healthy"
  total_balance: 125000000
  transactions_today: 12450
  suspicious_activities: 0

/health/territory:
  status: "healthy"
  zones_monitored: 500
  conflicts_active: 12
  capture_events_today: 67
```

## üéØ **API Design Principles**

### **SOLID/DRY Compliance**

- **Single Responsibility**: –ö–∞–∂–¥—ã–π endpoint –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é –≥–∏–ª—å–¥–∏–∏
- **Open/Closed**: –õ–µ–≥–∫–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ common inheritance
- **DRY**: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GuildEntity –∏ GuildMemberEntity
- **SOLID Inheritance**: Domain-specific entity extension

### **RESTful Design**

- **Resource-Based URLs**: `/guilds/{guildId}/members/{userId}`
- **HTTP Methods**: GET, POST, PUT, DELETE appropriately
- **Status Codes**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ 200, 201, 204, 400, 403, 404
- **Content Negotiation**: JSON responses —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ headers

### **Pagination & Filtering**

- **Cursor-Based**: –î–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ —á–ª–µ–Ω–æ–≤ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **Filter Support**: –ü–æ —Ä–æ–ª–∏, —Å—Ç–∞—Ç—É—Å—É, —É—Ä–æ–≤–Ω—é, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **Sorting Options**: –ü–æ –¥–∞—Ç–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –≤–∫–ª–∞–¥—É, —Ä–∞–Ω–≥—É
- **Efficient Queries**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### **Optimistic Locking**

- **Version Fields**: –î–ª—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≥–∏–ª—å–¥–∏–π
- **Conflict Resolution**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- **Audit Trails**: –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **Data Consistency**: –ì–∞—Ä–∞–Ω—Ç–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

---

## üìû **–ö–æ–Ω—Ç–∞–∫—Ç—ã**

**–ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Guild Service:**

- **Tech Lead**: @guild-tech-lead
- **Backend**: @guild-backend
- **Database**: @guild-database
- **DevOps**: @guild-devops

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞:**

- **SRE Team**: @platform-sre
- **Security**: @platform-security
- **Game Balance**: @guild-balance

**–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞:**

- **Product Manager**: @guild-product
- **Community Manager**: @guild-community
- **Economics**: @guild-economics

---

*–≠—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é enterprise-grade –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã NECPGAME —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –∏–≥—Ä–æ–∫–æ–≤.*

