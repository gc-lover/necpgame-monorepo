openapi: 3.0.3
info:
  title: Hacking Service Schemas
  description: Схемы данных для Hacking Service API
  version: 1.0.0

components:
  schemas:
    InitiateHackRequest:
      type: object
      required:
        - character_id
        - target_type
        - target_id
      properties:
        character_id:
          type: string
          format: uuid
          description: ID персонажа, выполняющего взлом
        target_type:
          type: string
          enum:
            - device
            - network
            - cyberspace
          description: |
            Тип цели взлома:
            - `device` - устройство
            - `network` - сеть
            - `cyberspace` - киберпространство
        target_id:
          type: string
          format: uuid
          description: ID цели взлома
        difficulty:
          type: integer
          description: Сложность взлома (1-10)
          minimum: 1
          maximum: 10
          default: 5

    HackSession:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID сессии взлома
        character_id:
          type: string
          format: uuid
          description: ID персонажа
        target_type:
          type: string
          enum:
            - device
            - network
            - cyberspace
          description: Тип цели взлома
        target_id:
          type: string
          format: uuid
          description: ID цели взлома
        status:
          type: string
          enum:
            - initiated
            - in_progress
            - completed
            - failed
            - cancelled
          description: Статус сессии взлома
        difficulty:
          type: integer
          description: Сложность взлома
          minimum: 1
          maximum: 10
        progress:
          type: integer
          description: Прогресс взлома (0-100)
          minimum: 0
          maximum: 100
        created_at:
          type: string
          format: date-time
          description: Время создания сессии
        updated_at:
          type: string
          format: date-time
          description: Время последнего обновления

    ExecuteHackRequest:
      type: object
      required:
        - action
      properties:
        action:
          type: string
          enum:
            - step
            - complete
          description: |
            Действие:
            - `step` - выполнить шаг взлома
            - `complete` - завершить взлом
        step_data:
          type: object
          description: Данные шага взлома (опционально)

    HackResult:
      type: object
      properties:
        hack_id:
          type: string
          format: uuid
          description: ID сессии взлома
        success:
          type: boolean
          description: Успешность взлома
        result_type:
          type: string
          enum:
            - access
            - data
            - control
            - backdoor
          description: |
            Тип результата:
            - `access` - получен доступ
            - `data` - извлечены данные
            - `control` - получен контроль
            - `backdoor` - установлен бекдор
        data:
          type: object
          description: Данные, полученные в результате взлома
        effects:
          type: array
          description: Эффекты взлома
          items:
            type: object
            properties:
              type:
                type: string
                description: Тип эффекта
              value:
                type: string
                description: Значение эффекта

    CheckAttributeRequest:
      type: object
      required:
        - character_id
        - required_intelligence
      properties:
        character_id:
          type: string
          format: uuid
          description: ID персонажа
        required_intelligence:
          type: integer
          description: Требуемый уровень интеллекта
          minimum: 1
          maximum: 100

    AttributeCheckResult:
      type: object
      properties:
        character_id:
          type: string
          format: uuid
          description: ID персонажа
        current_intelligence:
          type: integer
          description: Текущий уровень интеллекта
          minimum: 1
          maximum: 100
        required_intelligence:
          type: integer
          description: Требуемый уровень интеллекта
          minimum: 1
          maximum: 100
        sufficient:
          type: boolean
          description: Достаточно ли уровня интеллекта
        modifiers:
          type: array
          description: Модификаторы интеллекта
          items:
            type: object
            properties:
              source:
                type: string
                description: Источник модификатора
              value:
                type: integer
                description: Значение модификатора

    IntelligenceLevel:
      type: object
      properties:
        character_id:
          type: string
          format: uuid
          description: ID персонажа
        base_intelligence:
          type: integer
          description: Базовый уровень интеллекта
          minimum: 1
          maximum: 100
        current_intelligence:
          type: integer
          description: Текущий уровень интеллекта с модификаторами
          minimum: 1
          maximum: 100
        modifiers:
          type: array
          description: Модификаторы интеллекта
          items:
            type: object
            properties:
              source:
                type: string
                description: Источник модификатора
              value:
                type: integer
                description: Значение модификатора

    HackingImplant:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID импланта
        character_id:
          type: string
          format: uuid
          description: ID персонажа
        name:
          type: string
          description: Название импланта
        type:
          type: string
          enum:
            - neural
            - cyberdeck
            - optical
            - protective
          description: |
            Тип импланта:
            - `neural` - нейронный имплант
            - `cyberdeck` - кибердек
            - `optical` - оптический имплант
            - `protective` - защитный имплант
        active:
          type: boolean
          description: Активен ли имплант
        effects:
          type: array
          description: Эффекты импланта
          items:
            type: object
            properties:
              type:
                type: string
                description: Тип эффекта
              value:
                type: number
                description: Значение эффекта

    ActivateImplantRequest:
      type: object
      required:
        - implant_id
      properties:
        implant_id:
          type: string
          format: uuid
          description: ID импланта для активации

    ImplantEffect:
      type: object
      properties:
        implant_id:
          type: string
          format: uuid
          description: ID импланта
        type:
          type: string
          description: Тип эффекта
        value:
          type: number
          description: Значение эффекта
        duration:
          type: integer
          description: Длительность эффекта в секундах

    HackingGadget:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID гаджета
        character_id:
          type: string
          format: uuid
          description: ID персонажа
        name:
          type: string
          description: Название гаджета
        type:
          type: string
          enum:
            - deck
            - chip
            - program
            - disposable
          description: |
            Тип гаджета:
            - `deck` - взлом-дек
            - `chip` - чип
            - `program` - программа взлома
            - `disposable` - одноразовое устройство
        quantity:
          type: integer
          description: Количество гаджетов
          minimum: 0
        effects:
          type: array
          description: Эффекты гаджета
          items:
            type: object
            properties:
              type:
                type: string
                description: Тип эффекта
              value:
                type: number
                description: Значение эффекта

    UseGadgetRequest:
      type: object
      required:
        - gadget_id
      properties:
        gadget_id:
          type: string
          format: uuid
          description: ID гаджета для использования

    GadgetUseResult:
      type: object
      properties:
        gadget_id:
          type: string
          format: uuid
          description: ID использованного гаджета
        success:
          type: boolean
          description: Успешность использования
        effects:
          type: array
          description: Применённые эффекты
          items:
            type: object
            properties:
              type:
                type: string
                description: Тип эффекта
              value:
                type: number
                description: Значение эффекта

    GadgetEffect:
      type: object
      properties:
        gadget_id:
          type: string
          format: uuid
          description: ID гаджета
        type:
          type: string
          description: Тип эффекта
        value:
          type: number
          description: Значение эффекта
        duration:
          type: integer
          description: Длительность эффекта в секундах

    HackStepRequest:
      type: object
      required:
        - step_type
      properties:
        step_type:
          type: string
          enum:
            - scan
            - breach
            - exploit
            - backdoor
          description: |
            Тип шага:
            - `scan` - сканирование
            - `breach` - взлом барьера
            - `exploit` - использование уязвимости
            - `backdoor` - установка бекдора
        step_data:
          type: object
          description: Данные шага

    HackStepResult:
      type: object
      properties:
        step_type:
          type: string
          description: Тип выполненного шага
        success:
          type: boolean
          description: Успешность шага
        progress:
          type: integer
          description: Прогресс взлома после шага (0-100)
          minimum: 0
          maximum: 100
        message:
          type: string
          description: Сообщение о результате шага

    HackProcessStatus:
      type: object
      properties:
        hack_id:
          type: string
          format: uuid
          description: ID сессии взлома
        status:
          type: string
          enum:
            - initiated
            - in_progress
            - completed
            - failed
            - cancelled
          description: Статус процесса взлома
        progress:
          type: integer
          description: Прогресс взлома (0-100)
          minimum: 0
          maximum: 100
        current_step:
          type: string
          description: Текущий шаг взлома
        steps_completed:
          type: integer
          description: Количество выполненных шагов
          minimum: 0
        total_steps:
          type: integer
          description: Общее количество шагов
          minimum: 1















