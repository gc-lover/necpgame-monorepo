# Issue: #153
# Account management paths for Auth & Character Management Service

paths:
  # ============================================================================
  # ACCOUNT MANAGEMENT
  # ============================================================================

  /accounts/{account_id}:
    get:
      tags: [ accounts ]
      summary: Get account details
      operationId: getAccount
      security:
        - BearerAuth: [ ]
      parameters:
        - name: account_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Account details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AccountResponse"
        "404":
          $ref: common.yaml#/components/responses/NotFound

    put:
      tags: [ accounts ]
      summary: Update account information
      operationId: updateAccount
      security:
        - BearerAuth: [ ]
      parameters:
        - name: account_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateAccountRequest"
      responses:
        "200":
          description: Account updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AccountResponse"
        "400":
          $ref: common.yaml#/components/responses/BadRequest

  /accounts/{account_id}/oauth/{provider}:
    post:
      tags: [ accounts ]
      summary: Link OAuth provider to account
      operationId: linkOAuthProvider
      security:
        - BearerAuth: [ ]
      parameters:
        - name: account_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: provider
          in: path
          required: true
          schema:
            type: string
            enum: [ google, discord, steam, epic ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OAuthLinkRequest"
      responses:
        "200":
          description: OAuth provider linked
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AccountResponse"
        "409":
          description: Provider already linked or linked to another account
          content:
            application/json:
              schema:
                $ref: common.yaml#/components/schemas/Error

  /accounts/{account_id}/security:
    get:
      tags: [ security ]
      summary: Get account security settings
      operationId: getAccountSecurity
      security:
        - BearerAuth: [ ]
      parameters:
        - name: account_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Security settings
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SecuritySettings"
