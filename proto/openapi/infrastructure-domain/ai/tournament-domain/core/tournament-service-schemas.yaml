# Issue: #1846 - Tournament Service Schemas
components:
  schemas:
    Tournament:
      type: object
      required:
        - id
        - name
        - game_mode
        - tournament_type
        - status
        - max_participants
        - registration_start
        - registration_end
        - start_time
        - end_time
        - created_at
      properties:
        id:
          type: string
          format: uuid
          description: ID турнира
        name:
          type: string
          maxLength: 255
          description: Название турнира
        description:
          type: string
          nullable: true
          description: Описание турнира
        game_mode:
          type: string
          enum:
            - arena_1v1
            - arena_3v3
            - arena_5v5
            - pvpve_extract
            - stealth_league
            - hardcore_auth
          description: Режим игры
        tournament_type:
          type: string
          enum:
            - qualification
            - final
            - special
          description: Тип турнира
        status:
          type: string
          enum:
            - upcoming
            - registration
            - active
            - completed
            - cancelled
          description: Статус турнира
        region:
          type: string
          nullable: true
          maxLength: 50
          description: Регион проведения
        max_participants:
          type: integer
          minimum: 2
          maximum: 10000
          description: Максимальное количество участников
        current_participants:
          type: integer
          default: 0
          description: Текущее количество участников
        registration_start:
          type: string
          format: date-time
          description: Начало регистрации
        registration_end:
          type: string
          format: date-time
          description: Окончание регистрации
        start_time:
          type: string
          format: date-time
          description: Время начала турнира
        end_time:
          type: string
          format: date-time
          nullable: true
          description: Время окончания турнира
        rules:
          type: string
          nullable: true
          description: Правила турнира
        anti_cheat_enabled:
          type: boolean
          default: true
          description: Античит защита включена
        allow_restarts:
          type: boolean
          default: true
          description: Разрешены рестарты при дисконнекте
        featured_replays:
          type: boolean
          default: true
          description: Реплеи топ-матчей
        created_at:
          type: string
          format: date-time
          description: Время создания
        updated_at:
          type: string
          format: date-time
          nullable: true
          description: Время последнего обновления
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~200 bytes/instance."
    TournamentSummary:
      type: object
      required:
        - id
        - name
        - game_mode
        - tournament_type
        - status
        - max_participants
        - current_participants
        - registration_start
        - registration_end
        - start_time
      properties:
        id:
          type: string
          format: uuid
          description: ID турнира
        name:
          type: string
          maxLength: 255
          description: Название турнира
        game_mode:
          type: string
          enum:
            - arena_1v1
            - arena_3v3
            - arena_5v5
            - pvpve_extract
            - stealth_league
            - hardcore_auth
          description: Режим игры
        tournament_type:
          type: string
          enum:
            - qualification
            - final
            - special
          description: Тип турнира
        status:
          type: string
          enum:
            - upcoming
            - registration
            - active
            - completed
            - cancelled
          description: Статус турнира
        max_participants:
          type: integer
          minimum: 2
          maximum: 10000
          description: Максимальное количество участников
        current_participants:
          type: integer
          default: 0
          description: Текущее количество участников
        registration_start:
          type: string
          format: date-time
          description: Начало регистрации
        registration_end:
          type: string
          format: date-time
          description: Окончание регистрации
        start_time:
          type: string
          format: date-time
          description: Время начала турнира
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~120 bytes/instance."
    TournamentDetail:
      allOf:
        - $ref: "#/components/schemas/Tournament"
        - type: object
          properties:
            rounds:
              type: array
              items:
                $ref: "#/components/schemas/TournamentRound"
            rewards:
              $ref: "#/components/schemas/TournamentRewards"
            statistics:
              $ref: "#/components/schemas/TournamentStatistics"
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~250 bytes/instance."
    TournamentRound:
      type: object
      required:
        - round_number
        - name
        - start_time
        - format
      properties:
        round_number:
          type: integer
          minimum: 1
          description: Номер раунда
        name:
          type: string
          maxLength: 100
          description: Название раунда
        description:
          type: string
          nullable: true
          description: Описание раунда
        start_time:
          type: string
          format: date-time
          description: Время начала раунда
        end_time:
          type: string
          format: date-time
          nullable: true
          description: Время окончания раунда
        format:
          type: string
          enum:
            - single_elimination
            - double_elimination
            - round_robin
            - swiss
          description: Формат раунда
        max_matches:
          type: integer
          nullable: true
          description: Максимальное количество матчей
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~80 bytes/instance."
    TournamentStatistics:
      type: object
      properties:
        total_matches:
          type: integer
          default: 0
          description: Общее количество матчей
        completed_matches:
          type: integer
          default: 0
          description: Завершенных матчей
        total_participants:
          type: integer
          default: 0
          description: Общее количество участников
        active_participants:
          type: integer
          default: 0
          description: Активных участников
        average_match_duration:
          type: integer
          nullable: true
          description: Средняя длительность матча (секунды)
        disconnection_rate:
          type: number
          format: float
          nullable: true
          description: Процент дисконнектов
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~32 bytes/instance."
    CreateTournamentRequest:
      type: object
      required:
        - name
        - game_mode
        - tournament_type
        - max_participants
        - registration_start
        - registration_end
        - start_time
      properties:
        name:
          type: string
          maxLength: 255
          description: Название турнира
        description:
          type: string
          nullable: true
          description: Описание турнира
        game_mode:
          type: string
          enum:
            - arena_1v1
            - arena_3v3
            - arena_5v5
            - pvpve_extract
            - stealth_league
            - hardcore_auth
          description: Режим игры
        tournament_type:
          type: string
          enum:
            - qualification
            - final
            - special
          description: Тип турнира
        region:
          type: string
          nullable: true
          maxLength: 50
          description: Регион проведения
        max_participants:
          type: integer
          minimum: 2
          maximum: 10000
          description: Максимальное количество участников
        registration_start:
          type: string
          format: date-time
          description: Начало регистрации
        registration_end:
          type: string
          format: date-time
          description: Окончание регистрации
        start_time:
          type: string
          format: date-time
          description: Время начала турнира
        rules:
          type: string
          nullable: true
          description: Правила турнира
        anti_cheat_enabled:
          type: boolean
          default: true
          description: Античит защита включена
        allow_restarts:
          type: boolean
          default: true
          description: Разрешены рестарты при дисконнекте
        featured_replays:
          type: boolean
          default: true
          description: Реплеи топ-матчей
        rounds:
          type: array
          items:
            $ref: "#/components/schemas/CreateRoundRequest"
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~150 bytes/instance."
    CreateRoundRequest:
      type: object
      required:
        - name
        - start_time
        - format
      properties:
        name:
          type: string
          maxLength: 100
          description: Название раунда
        description:
          type: string
          nullable: true
          description: Описание раунда
        start_time:
          type: string
          format: date-time
          description: Время начала раунда
        format:
          type: string
          enum:
            - single_elimination
            - double_elimination
            - round_robin
            - swiss
          description: Формат раунда
        max_matches:
          type: integer
          nullable: true
          description: Максимальное количество матчей
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~60 bytes/instance."
    UpdateTournamentRequest:
      type: object
      properties:
        name:
          type: string
          maxLength: 255
          description: Название турнира
        description:
          type: string
          nullable: true
          description: Описание турнира
        region:
          type: string
          nullable: true
          maxLength: 50
          description: Регион проведения
        max_participants:
          type: integer
          minimum: 2
          maximum: 10000
          description: Максимальное количество участников
