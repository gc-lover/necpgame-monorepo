components:
  responses:
    BadRequest:
      $ref: ../common-service/responses/error.yaml#/BadRequest
    BehaviorAnalysisCompleted:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/BehaviorAnalysisResult'
      description: Suspicious behavior analysis completed successfully
      headers:
        X-Processing-Time:
          schema:
            example: 200
            type: integer
    BehaviorAnalyticsRetrieved:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PlayerBehaviorAnalytics'
      description: Player behavior analytics retrieved successfully
      headers:
        Cache-Control:
          schema:
            example: max-age=600, private
            type: string
        X-Processing-Time:
          schema:
            example: 100
            type: integer
    CombatStrategyRetrieved:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CombatStrategyPrediction'
      description: Combat strategy prediction retrieved successfully
      headers:
        Cache-Control:
          schema:
            example: max-age=60, private
            type: string
        X-Processing-Time:
          schema:
            example: 30
            type: integer
    Conflict:
      $ref: ../common-service/responses/error.yaml#/Conflict
    Created:
      $ref: ../common-service/responses/success.yaml#/Created
    Forbidden:
      $ref: ../common-service/responses/error.yaml#/Forbidden
    HealthBatchSuccess:
      $ref: ../common-service/responses/success.yaml#/HealthBatchSuccess
    HealthOK:
      $ref: ../common-service/responses/success.yaml#/HealthOK
    InternalServerError:
      $ref: ../common-service/responses/error.yaml#/InternalServerError
    ModelTrainingInitiated:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ModelTrainingJob'
      description: AI model training initiated successfully
      headers:
        Location:
          schema:
            example: /api/v1/ai-behavior/models/training/550e8400-e29b-41d4-a716-446655440000
            type: string
        X-Processing-Time:
          schema:
            example: 10
            type: integer
    NotFound:
      $ref: ../common-service/responses/error.yaml#/NotFound
    NpcBehaviorRetrieved:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NpcBehavior'
      description: NPC behavior configuration retrieved successfully
      headers:
        Cache-Control:
          schema:
            example: max-age=300, private
            type: string
        ETag:
          schema:
            example: '"npc-behavior-123-v1"'
            type: string
        X-Processing-Time:
          schema:
            example: 10
            type: integer
    NpcBehaviorUpdated:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NpcBehavior'
      description: NPC behavior configuration updated successfully
      headers:
        ETag:
          schema:
            example: '"npc-behavior-123-v2"'
            type: string
        X-Processing-Time:
          schema:
            example: 20
            type: integer
    NpcGenerated:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/GeneratedNpc'
      description: NPC generated successfully
      headers:
        Location:
          schema:
            example: /api/v1/ai-behavior/npc-behavior/npcs/550e8400-e29b-41d4-a716-446655440000
            type: string
        X-Processing-Time:
          schema:
            example: 50
            type: integer
    OK:
      $ref: ../common-service/responses/success.yaml#/OK
    PlayerSkillAssessmentRetrieved:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PlayerSkillAssessment'
      description: Player skill assessment retrieved successfully
      headers:
        Cache-Control:
          schema:
            example: max-age=300, private
            type: string
        ETag:
          schema:
            example: '"assessment-123-v1"'
            type: string
        X-Processing-Time:
          schema:
            example: 15
            type: integer
    PlayerSkillAssessmentUpdated:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PlayerSkillAssessment'
      description: Player skill assessment updated successfully
      headers:
        ETag:
          schema:
            example: '"assessment-123-v2"'
            type: string
        X-Processing-Time:
          schema:
            example: 25
            type: integer
    QuestGenerated:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/GeneratedQuest'
      description: Quest generated successfully
      headers:
        Location:
          schema:
            example: /api/v1/ai-behavior/procedural/quests/550e8400-e29b-41d4-a716-446655440000
            type: string
        X-Processing-Time:
          schema:
            example: 75
            type: integer
    Unauthorized:
      $ref: ../common-service/responses/error.yaml#/Unauthorized
  schemas:
    BehaviorAnalysisResult:
      properties:
        account_id:
          format: uuid
          type: string
        analysis_id:
          format: uuid
          type: string
        analyzed_at:
          format: date-time
          type: string
        recommendations:
          items:
            type: string
          type: array
        requires_investigation:
          default: false
          type: boolean
        risk_level:
          enum:
          - low
          - medium
          - high
          - critical
          type: string
        risk_score:
          format: float
          maximum: 1
          minimum: 0
          type: number
      required:
      - account_id
      - analysis_id
      - risk_level
      - analyzed_at
      type: object
    BehaviorPattern:
      properties:
        confidence:
          format: float
          maximum: 1
          minimum: 0
          type: number
        detected_at:
          format: date-time
          type: string
        frequency:
          format: float
          maximum: 1
          minimum: 0
          type: number
        pattern_type:
          enum:
          - aggressive_play
          - defensive_play
          - team_player
          - lone_wolf
          - achievement_hunter
          - casual_player
          type: string
      required:
      - pattern_type
      - frequency
      - confidence
      type: object
    CombatStrategyPrediction:
      properties:
        account_id:
          format: uuid
          type: string
        confidence_score:
          format: float
          maximum: 1
          minimum: 0
          type: number
        counter_strategies:
          items:
            type: string
          type: array
        predicted_at:
          format: date-time
          type: string
        predicted_strategy:
          enum:
          - aggressive
          - defensive
          - flanking
          - camping
          - rushdown
          - kite
          type: string
        strategy_explanation:
          type: string
      required:
      - account_id
      - predicted_strategy
      - confidence_score
      - predicted_at
      type: object
    EngagementMetrics:
      properties:
        average_session_duration:
          description: Average session duration in minutes
          type: integer
        progression_rate:
          format: float
          type: number
        retention_rate:
          format: float
          maximum: 1
          minimum: 0
          type: number
        sessions_per_day:
          format: float
          type: number
      type: object
    Error:
      $ref: ../common-service/schemas/error.yaml#/Error
    GenerateNpcRequest:
      properties:
        custom_properties:
          additionalProperties: true
          type: object
        difficulty_level:
          default: 1
          format: float
          maximum: 10
          minimum: 0
          type: number
        faction:
          type: string
        location:
          $ref: '#/components/schemas/Vector3'
        npc_type:
          enum:
          - enemy
          - ally
          - neutral
          - merchant
          - quest_giver
          type: string
      required:
      - npc_type
      - location
      type: object
    GenerateQuestRequest:
      properties:
        custom_parameters:
          additionalProperties: true
          type: object
        difficulty:
          default: medium
          enum:
          - easy
          - medium
          - hard
          - epic
          type: string
        location:
          type: string
        player_level:
          maximum: 100
          minimum: 1
          type: integer
        quest_type:
          enum:
          - combat
          - exploration
          - collection
          - escort
          - puzzle
          - assassination
          type: string
        theme:
          enum:
          - cyberpunk
          - military
          - supernatural
          - mystery
          - adventure
          type: string
        time_limit:
          description: Time limit in minutes
          type: integer
      required:
      - player_level
      - quest_type
      type: object
    GeneratedNpc:
      properties:
        behavior:
          $ref: '#/components/schemas/NpcBehavior'
        generated_at:
          format: date-time
          type: string
        generation_seed:
          description: Seed used for procedural generation
          type: string
        id:
          format: uuid
          type: string
        location:
          $ref: '#/components/schemas/Vector3'
        npc_type:
          enum:
          - enemy
          - ally
          - neutral
          - merchant
          - quest_giver
          type: string
        stats:
          $ref: '#/components/schemas/NpcStats'
      required:
      - id
      - npc_type
      - location
      - behavior
      - generated_at
      type: object
    GeneratedQuest:
      properties:
        description:
          maxLength: 2000
          type: string
        difficulty:
          enum:
          - easy
          - medium
          - hard
          - epic
          type: string
        estimated_duration:
          description: Estimated completion time in minutes
          type: integer
        generated_at:
          format: date-time
          type: string
        generation_seed:
          type: string
        id:
          format: uuid
          type: string
        objectives:
          items:
            $ref: '#/components/schemas/QuestObjective'
          type: array
        rewards:
          items:
            $ref: '#/components/schemas/QuestReward'
          type: array
        title:
          maxLength: 200
          type: string
      required:
      - id
      - title
      - description
      - objectives
      - generated_at
      type: object
    HealthResponse:
      $ref: ../common-service/schemas/health.yaml#/HealthResponse
    ModelTrainingJob:
      properties:
        created_at:
          format: date-time
          type: string
        estimated_completion:
          format: date-time
          type: string
        job_id:
          format: uuid
          type: string
        model_type:
          type: string
        progress_percentage:
          format: float
          maximum: 100
          minimum: 0
          type: number
        status:
          enum:
          - queued
          - training
          - validating
          - completed
          - failed
          type: string
      required:
      - job_id
      - model_type
      - status
      - created_at
      type: object
    ModelTrainingRequest:
      properties:
        hyperparameters:
          additionalProperties: true
          type: object
        model_type:
          enum:
          - difficulty_scaling
          - behavior_prediction
          - content_recommendation
          - anti_cheat
          type: string
        priority:
          default: normal
          enum:
          - low
          - normal
          - high
          - critical
          type: string
        training_data:
          properties:
            data_sources:
              items:
                type: string
              type: array
            dataset_size:
              minimum: 1000
              type: integer
            time_range:
              properties:
                end_date:
                  format: date-time
                  type: string
                start_date:
                  format: date-time
                  type: string
              type: object
          type: object
      required:
      - model_type
      - training_data
      type: object
    NpcBehavior:
      properties:
        aggressiveness:
          format: float
          maximum: 1
          minimum: 0
          type: number
        behavior_type:
          enum:
          - passive
          - aggressive
          - defensive
          - patrol
          - guard
          - merchant
          - quest_giver
          type: string
        combat_style:
          enum:
          - melee
          - ranged
          - magic
          - mixed
          type: string
        intelligence:
          format: float
          maximum: 1
          minimum: 0
          type: number
        interaction_responses:
          additionalProperties:
            type: string
          type: object
        last_updated:
          format: date-time
          type: string
        npc_id:
          format: uuid
          type: string
        patrol_route:
          items:
            $ref: '#/components/schemas/Vector3'
          type: array
      required:
      - npc_id
      - behavior_type
      - aggressiveness
      - intelligence
      type: object
    NpcStats:
      properties:
        damage:
          minimum: 0
          type: integer
        defense:
          minimum: 0
          type: integer
        health:
          minimum: 1
          type: integer
        level:
          minimum: 1
          type: integer
        speed:
          format: float
          minimum: 0
          type: number
      type: object
    PerformanceMetrics:
      properties:
        accuracy_percentage:
          format: float
          type: number
        average_deaths_per_match:
          format: float
          type: number
        average_kills_per_match:
          format: float
          type: number
        average_match_duration:
          description: Average match duration in seconds
          type: integer
        average_score:
          format: float
          type: number
        win_rate:
          format: float
          maximum: 1
          minimum: 0
          type: number
      type: object
    PlayerBehaviorAnalytics:
      properties:
        account_id:
          format: uuid
          type: string
        analyzed_at:
          format: date-time
          type: string
        behavior_patterns:
          items:
            $ref: '#/components/schemas/BehaviorPattern'
          type: array
        engagement_metrics:
          $ref: '#/components/schemas/EngagementMetrics'
        risk_indicators:
          items:
            $ref: '#/components/schemas/RiskIndicator'
          type: array
        time_range:
          enum:
          - 1h
          - 24h
          - 7d
          - 30d
          - 90d
          type: string
      required:
      - account_id
      - time_range
      - analyzed_at
      type: object
    PlayerSkillAssessment:
      description: 'BACKEND NOTE: Fields ordered for optimal memory alignment.'
      properties:
        account_id:
          format: uuid
          type: string
        assessed_at:
          format: date-time
          type: string
        confidence_score:
          description: Confidence in assessment (0-1)
          format: float
          maximum: 1
          minimum: 0
          type: number
        performance_metrics:
          $ref: '#/components/schemas/PerformanceMetrics'
        play_style:
          enum:
          - aggressive
          - defensive
          - strategic
          - casual
          type: string
        preferred_game_modes:
          items:
            type: string
          type: array
        skill_level:
          description: Player skill level (0-10 scale)
          format: float
          maximum: 10
          minimum: 0
          type: number
      required:
      - account_id
      - skill_level
      - confidence_score
      - assessed_at
      type: object
    QuestObjective:
      properties:
        description:
          maxLength: 500
          type: string
        location:
          type: string
        objective_type:
          enum:
          - kill
          - collect
          - explore
          - interact
          - survive
          - escort
          type: string
        target_count:
          minimum: 1
          type: integer
        target_id:
          format: uuid
          type: string
      required:
      - description
      - objective_type
      type: object
    QuestReward:
      properties:
        amount:
          minimum: 0
          type: integer
        item_id:
          format: uuid
          type: string
        reward_type:
          enum:
          - experience
          - currency
          - item
          - reputation
          - title
          type: string
      required:
      - reward_type
      - amount
      type: object
    RiskIndicator:
      properties:
        description:
          type: string
        evidence:
          items:
            type: string
          type: array
        indicator_type:
          enum:
          - aimbot_suspicion
          - speed_hack_suspicion
          - wall_hack_suspicion
          - unusual_win_rate
          - pattern_exploitation
          type: string
        severity:
          format: float
          maximum: 1
          minimum: 0
          type: number
      required:
      - indicator_type
      - severity
      - description
      type: object
    SuspiciousBehaviorReport:
      properties:
        account_id:
          format: uuid
          type: string
        behavior_type:
          enum:
          - aimbot
          - speed_hack
          - wall_hack
          - unusual_accuracy
          - pattern_exploitation
          - stat_manipulation
          type: string
        evidence:
          items:
            type: string
          type: array
        session_id:
          format: uuid
          type: string
        severity:
          format: float
          maximum: 1
          minimum: 0
          type: number
        timestamp:
          format: date-time
          type: string
      required:
      - account_id
      - behavior_type
      - evidence
      - severity
      type: object
    UpdateNpcBehaviorRequest:
      properties:
        aggressiveness:
          format: float
          maximum: 1
          minimum: 0
          type: number
        behavior_type:
          enum:
          - passive
          - aggressive
          - defensive
          - patrol
          - guard
          - merchant
          - quest_giver
          type: string
        combat_style:
          enum:
          - melee
          - ranged
          - magic
          - mixed
          type: string
        intelligence:
          format: float
          maximum: 1
          minimum: 0
          type: number
        interaction_responses:
          additionalProperties:
            type: string
          type: object
        patrol_route:
          items:
            $ref: '#/components/schemas/Vector3'
          type: array
      type: object
    UpdateSkillAssessmentRequest:
      properties:
        performance_data:
          $ref: '#/components/schemas/PerformanceMetrics'
        play_style:
          enum:
          - aggressive
          - defensive
          - strategic
          - casual
          type: string
        skill_level:
          format: float
          maximum: 10
          minimum: 0
          type: number
      type: object
    Vector3:
      properties:
        x:
          format: float
          type: number
        y:
          format: float
          type: number
        z:
          format: float
          type: number
      required:
      - x
      - y
      - z
      type: object
    WebSocketHealthMessage:
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large â†’ small).
        Expected memory savings: 30-50%.'
      properties:
        health:
          $ref: ../common-service/schemas/health.yaml#/HealthResponse
        message_timestamp:
          description: Timestamp of the health message
          format: date-time
          maxLength: 1000
          type: string
        timestamp:
          format: date-time
          maxLength: 255
          type: string
        type:
          enum:
          - health_update
          - health_alert
          - service_down
          example: health_update
          maxLength: 255
          type: string
      required:
      - type
      - timestamp
      - health
      type: object
  securitySchemes:
    ApiKeyAuth:
      $ref: ../common-service/security/security.yaml#/ApiKeyAuth
    BearerAuth:
      $ref: ../common-service/security/security.yaml#/BearerAuth
    ServiceAuth:
      $ref: ../common-service/security/security.yaml#/ServiceAuth
info:
  contact:
    email: api@necpgame.com
    name: NECPGAME API Support
    url: https://necpgame.com/support
  description: '**Enterprise-Grade AI Behavior Management API for NECPGAME**

    This API manages artificial intelligence behavior systems, NPC decision-making
    algorithms, and adaptive AI mechanics for dynamic and responsive game world interactions.

    ## Key Features

    - **Adaptive Difficulty Scaling**: Dynamic difficulty adjustment based on player
    performance - **NPC Behavior Management**: Complex decision-making systems for
    game entities - **Procedural Generation**: Dynamic content creation with AI-driven
    algorithms - **Combat AI Optimization**: Strategic AI for tactical combat scenarios
    - **Behavior Analytics**: Player pattern analysis and predictive modeling - **Anti-Cheat
    Detection**: AI-powered suspicious behavior identification

    ## Domain Purpose

    The AI Behavior domain provides sophisticated artificial intelligence systems
    for NECPGAME. Game entities use these systems to make intelligent decisions, adapt
    to player actions, and create dynamic, responsive gameplay experiences throughout
    Night City.

    ## Performance Targets

    - P99 Latency: <30ms for AI decision operations - Memory: <35KB per active AI
    entity - Concurrent users: 300,000+ simultaneous AI operations - Decision calculations:
    <20ms response time

    '
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  title: AI Behavior Service API - Enterprise-Grade Domain Service
  version: 1.0.0
openapi: 3.0.3
paths:
  /adaptive-difficulty/player/{account_id}/assessment:
    get:
      operationId: getPlayerSkillAssessment
      parameters:
      - in: path
        name: account_id
        required: true
        schema:
          format: uuid
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlayerSkillAssessment'
          description: Player skill assessment retrieved
        '401':
          $ref: ../common-service/responses/error.yaml#/Unauthorized
        '404':
          $ref: ../common-service/responses/error.yaml#/NotFound
      security:
      - BearerAuth: []
      summary: Get player skill assessment for adaptive difficulty
      tags:
      - Adaptive Difficulty
    post:
      operationId: updatePlayerSkillAssessment
      parameters:
      - in: path
        name: account_id
        required: true
        schema:
          format: uuid
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSkillAssessmentRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlayerSkillAssessment'
          description: Player skill assessment updated
        '400':
          $ref: ../common-service/responses/error.yaml#/BadRequest
        '404':
          $ref: ../common-service/responses/error.yaml#/NotFound
      security:
      - BearerAuth: []
      summary: Update player skill assessment
      tags:
      - Adaptive Difficulty
  /analytics/player/{account_id}/behavior:
    get:
      operationId: getPlayerBehaviorAnalytics
      parameters:
      - in: path
        name: account_id
        required: true
        schema:
          format: uuid
          type: string
      - in: query
        name: time_range
        schema:
          default: 7d
          enum:
          - 1h
          - 24h
          - 7d
          - 30d
          - 90d
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlayerBehaviorAnalytics'
          description: Player behavior analytics retrieved
        '401':
          $ref: ../common-service/responses/error.yaml#/Unauthorized
        '404':
          $ref: ../common-service/responses/error.yaml#/NotFound
      security:
      - BearerAuth: []
      summary: Get player behavior analytics for AI training
      tags:
      - Behavior Analytics
  /anti-cheat/analyze/{account_id}/suspicious:
    post:
      operationId: analyzeSuspiciousBehavior
      parameters:
      - in: path
        name: account_id
        required: true
        schema:
          format: uuid
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SuspiciousBehaviorReport'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BehaviorAnalysisResult'
          description: Behavior analysis completed
        '400':
          $ref: ../common-service/responses/error.yaml#/BadRequest
        '404':
          $ref: ../common-service/responses/error.yaml#/NotFound
      security:
      - BearerAuth: []
      summary: Analyze player for suspicious behavior using AI
      tags:
      - Anti-Cheat
  /combat-ai/predict/{account_id}/strategy:
    get:
      operationId: getCombatStrategyPrediction
      parameters:
      - in: path
        name: account_id
        required: true
        schema:
          format: uuid
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CombatStrategyPrediction'
          description: Combat strategy prediction retrieved
        '401':
          $ref: ../common-service/responses/error.yaml#/Unauthorized
        '404':
          $ref: ../common-service/responses/error.yaml#/NotFound
      security:
      - BearerAuth: []
      summary: Get combat strategy prediction for player
      tags:
      - Combat AI
  /health:
    get:
      description: '**Enterprise-grade health check endpoint**


        Provides real-time health status of the AI behavior service microservice.

        Critical for service discovery, load balancing, and monitoring.


        **Performance:** <1ms response time, cached for 30 seconds

        '
      operationId: aiBehaviorServiceHealthCheck
      parameters:
      - in: header
        name: Accept-Encoding
        schema:
          enum:
          - gzip
          - deflate
          - br
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: ../common-service/schemas/health.yaml#/HealthResponse
          description: Service is healthy
          headers:
            Cache-Control:
              schema:
                example: max-age=30, s-maxage=60
                type: string
            Content-Encoding:
              schema:
                enum:
                - gzip
                - deflate
                - br
                type: string
            ETag:
              schema:
                example: '"health-v1.0"'
                type: string
        '429':
          content:
            application/json:
              schema:
                $ref: ../common-service/schemas/error.yaml#/Error
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                example: 60
                type: integer
        '503':
          content:
            application/json:
              schema:
                $ref: ../common-service/schemas/health.yaml#/HealthResponse
          description: Service is unhealthy
      summary: AI behavior service health check
      tags:
      - Health Monitoring
  /health/batch:
    post:
      description: '**Performance optimization:** Check multiple domain health in
        single request


        Reduces N HTTP calls to 1 call. Critical for microservice orchestration.

        Eliminates network overhead in health monitoring scenarios.


        **Use case:** Service mesh health checks, Kubernetes readiness probes

        '
      operationId: exampleDomainBatchHealthCheck
      requestBody:
        content:
          application/json:
            schema:
              properties:
                services:
                  description: List of services to check
                  items:
                    enum:
                    - example-domain
                    - system-domain
                    - specialized-domain
                    maxItems: 10
                    type: string
                  type: array
              required:
              - services
              type: object
        required: true
      responses:
        '200':
          $ref: ../common-service/responses/success.yaml#/HealthBatchSuccess
        '400':
          content:
            application/json:
              schema:
                $ref: ../common-service/schemas/error.yaml#/Error
          description: Invalid request - malformed service list
        '429':
          content:
            application/json:
              schema:
                $ref: ../common-service/schemas/error.yaml#/Error
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                description: Seconds to wait before retrying
                example: 60
                type: integer
      summary: Batch health check for multiple domain services
      tags:
      - Health Monitoring
  /health/ws:
    get:
      description: '**Performance optimization:** Real-time health updates without
        polling


        Eliminates periodic HTTP requests, reduces server load by ~90%.

        Perfect for dashboard monitoring and alerting systems.


        **Protocol:** WebSocket with JSON payloads

        **Heartbeat:** 30 second intervals

        **Reconnection:** Automatic with exponential backoff

        '
      operationId: exampleDomainHealthWebSocket
      parameters:
      - description: Services to monitor (optional, monitors all if not specified)
        in: query
        name: services
        schema:
          items:
            enum:
            - example-domain
            - system-domain
            - specialized-domain
            type: string
          type: array
      responses:
        '101':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebSocketHealthMessage'
          description: WebSocket connection established successfully
          headers:
            Connection:
              schema:
                example: Upgrade
                type: string
            Sec-WebSocket-Accept:
              schema:
                description: WebSocket handshake acceptance key
                type: string
            Upgrade:
              schema:
                example: websocket
                type: string
        '200':
          content:
            application/json:
              schema:
                properties:
                  supported_protocols:
                    example:
                    - health-monitoring-v1
                    items:
                      type: string
                    type: array
                  websocket_url:
                    example: ws://localhost:8080/api/v1/example-domain/health/ws
                    type: string
                type: object
          description: WebSocket upgrade information returned
        '400':
          content:
            application/json:
              schema:
                $ref: ../common-service/schemas/error.yaml#/Error
          description: Invalid request - malformed service parameters
        '401':
          content:
            application/json:
              schema:
                $ref: ../common-service/schemas/error.yaml#/Error
          description: Unauthorized - authentication required for WebSocket
        '429':
          content:
            application/json:
              schema:
                $ref: ../common-service/schemas/error.yaml#/Error
          description: Too many requests - WebSocket connection limit exceeded
          headers:
            Retry-After:
              schema:
                example: 30
                type: integer
      summary: Real-time health monitoring WebSocket
      tags:
      - Health Monitoring
  /models/train:
    post:
      operationId: triggerModelTraining
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ModelTrainingRequest'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelTrainingJob'
          description: Model training initiated successfully
        '400':
          $ref: ../common-service/responses/error.yaml#/BadRequest
        '429':
          $ref: ../common-service/responses/error.yaml#/TooManyRequests
      security:
      - BearerAuth: []
      summary: Trigger AI model training for behavior prediction
      tags:
      - Adaptive Difficulty
  /npc-behavior/generate:
    post:
      operationId: generateProceduralNpc
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GenerateNpcRequest'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GeneratedNpc'
          description: NPC generated successfully
        '400':
          $ref: ../common-service/responses/error.yaml#/BadRequest
        '500':
          $ref: ../common-service/responses/error.yaml#/InternalServerError
      security:
      - BearerAuth: []
      summary: Generate procedural NPC with AI behavior
      tags:
      - NPC Behavior
  /npc-behavior/npcs/{npc_id}/behavior:
    get:
      operationId: getNpcBehavior
      parameters:
      - in: path
        name: npc_id
        required: true
        schema:
          format: uuid
          type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NpcBehavior'
          description: NPC behavior retrieved
        '401':
          $ref: ../common-service/responses/error.yaml#/Unauthorized
        '404':
          $ref: ../common-service/responses/error.yaml#/NotFound
      security:
      - BearerAuth: []
      summary: Get NPC behavior configuration
      tags:
      - NPC Behavior
    put:
      operationId: updateNpcBehavior
      parameters:
      - in: path
        name: npc_id
        required: true
        schema:
          format: uuid
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateNpcBehaviorRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NpcBehavior'
          description: NPC behavior updated
        '400':
          $ref: ../common-service/responses/error.yaml#/BadRequest
        '404':
          $ref: ../common-service/responses/error.yaml#/NotFound
      security:
      - BearerAuth: []
      summary: Update NPC behavior configuration
      tags:
      - NPC Behavior
  /procedural/quest/generate:
    post:
      operationId: generateProceduralQuest
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GenerateQuestRequest'
        required: true
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GeneratedQuest'
          description: Quest generated successfully
        '400':
          $ref: ../common-service/responses/error.yaml#/BadRequest
        '500':
          $ref: ../common-service/responses/error.yaml#/InternalServerError
      security:
      - BearerAuth: []
      summary: Generate procedural quest with AI algorithms
      tags:
      - Procedural Generation
security:
- BearerAuth: []
servers:
- description: Production server
  url: https://api.necpgame.com/v1/ai-behavior
- description: Staging server
  url: https://staging-api.necpgame.com/v1/ai-behavior
- description: Local development server
  url: http://localhost:8080/api/v1/ai-behavior
tags:
- description: Dynamic difficulty scaling and player adaptation
  name: Adaptive Difficulty
- description: NPC AI behavior management and generation
  name: NPC Behavior
- description: Dynamic content generation algorithms
  name: Procedural Generation
- description: Combat AI optimization and strategy prediction
  name: Combat AI
- description: Player behavior analysis and insights
  name: Behavior Analytics
- description: AI-powered suspicious behavior detection
  name: Anti-Cheat
- description: System health and performance monitoring
  name: Health Monitoring
