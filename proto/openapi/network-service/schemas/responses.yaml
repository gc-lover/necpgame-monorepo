BroadcastMessageResponse:
  type: object
  properties:
    message_id:
      type: string
    recipients_count:
      type: integer
      minimum: 0
    sent_at:
      type: integer
      format: int64
    delivery_status:
      type: string
      enum: [ SENT, PARTIAL, FAILED ]
    failed_recipients:
      type: array
      items:
        type: string
    metadata:
      type: object
      additionalProperties: true
  required:
    - message_id
    - recipients_count
    - delivery_status

ChannelMessageResponse:
  type: object
  properties:
    message_id:
      type: string
    channel_id:
      type: string
    recipients_count:
      type: integer
      minimum: 0
    sent_at:
      type: integer
      format: int64
    channel_stats:
      type: object
      properties:
        active_members:
          type: integer
          minimum: 0
        offline_members:
          type: integer
          minimum: 0
        message_rate:
          type: number
          format: float
  required:
    - message_id
    - channel_id
    - recipients_count

GetPresenceResponse:
  type: object
  properties:
    user_id:
      type: string
    presence:
      $ref: './presence.yaml#/Presence'
    last_updated:
      type: integer
      format: int64
    is_online:
      type: boolean
  required:
    - user_id
    - presence

UpdatePresenceResponse:
  type: object
  properties:
    user_id:
      type: string
    previous_status:
      type: string
    new_status:
      type: string
    updated_at:
      type: integer
      format: int64
    broadcasted:
      type: boolean
    affected_subscribers:
      type: integer
      minimum: 0
  required:
    - user_id
    - new_status
    - updated_at

SubscribeEventsResponse:
  type: object
  properties:
    subscription_id:
      type: string
    status:
      type: string
      enum: [ ACTIVE, PENDING, FAILED ]
    initial_events_sent:
      type: integer
      minimum: 0
    websocket_url:
      type: string
    created_at:
      type: integer
      format: int64
    expires_at:
      type: integer
      format: int64
  required:
    - subscription_id
    - status

PublishEventResponse:
  type: object
  properties:
    event_id:
      type: string
    published_at:
      type: integer
      format: int64
    recipients_count:
      type: integer
      minimum: 0
    routing_strategy:
      type: string
    delivery_status:
      type: string
      enum: [ DELIVERED, QUEUED, FAILED ]
    processing_time_ms:
      type: integer
      minimum: 0
  required:
    - event_id
    - published_at
    - delivery_status

GetClusterStatusResponse:
  type: object
  properties:
    cluster_id:
      type: string
    status:
      type: string
      enum: [ HEALTHY, DEGRADED, CRITICAL ]
    nodes:
      type: array
      items:
        $ref: './clusters.yaml#/ClusterNode'
    shards:
      type: array
      items:
        $ref: './clusters.yaml#/ClusterShard'
    metrics:
      $ref: './clusters.yaml#/ClusterMetrics'
    load_balancer_config:
      $ref: './clusters.yaml#/LoadBalancerConfig'
    last_updated:
      type: integer
      format: int64
  required:
    - cluster_id
    - status
    - nodes
    - metrics
