# OAuth Service - OpenAPI Specification

## üìã **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**

OAuth Service –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **–∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –≤–Ω–µ—à–Ω–∏–º–∏ OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏** –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã NECPGAME. –°–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ Google, Facebook, Discord, Steam –∏ –¥—Ä—É–≥–∏–µ OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∏ –Ω–∞–¥–µ–∂–Ω—É—é —Å–æ—Ü–∏–∞–ª—å–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é.

## üéØ **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**

### üîê **OAuth –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (Google, Facebook, Discord, Steam)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è redirect URL –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ OAuth callback'–æ–≤ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ —Å–æ—Ü—Å–µ—Ç–∏

### üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- –í–∞–ª–∏–¥–∞—Ü–∏—è OAuth state –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF –∞—Ç–∞–∫ —á–µ—Ä–µ–∑ state tokens
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ access tokens
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å JWT —Å–∏—Å—Ç–µ–º–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### üë§ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ê–∫–∫–∞—É–Ω—Ç–∞–º–∏**
- –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ OAuth
- –°–≤—è–∑—ã–≤–∞–Ω–∏–µ OAuth –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ OAuth —Å–≤—è–∑—è–º–∏

## üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**

```
proto/openapi/oauth-service/
‚îú‚îÄ‚îÄ main.yaml           # –û—Å–Ω–æ–≤–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îú‚îÄ‚îÄ README.md          # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ docs/              # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    ‚îî‚îÄ‚îÄ index.html
```

## üîó **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**

- **common**: –û–±—â–∏–µ —Å—Ö–µ–º—ã –æ—Ç–≤–µ—Ç–æ–≤ –∏ –æ—à–∏–±–æ–∫
- **auth-service**: –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **user-profile-service**: –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π —á–µ—Ä–µ–∑ OAuth

## üìä **Performance**

- **P99 Latency**: <100ms –¥–ª—è OAuth –æ–ø–µ—Ä–∞—Ü–∏–π
- **Memory per Instance**: <75KB
- **Concurrent Users**: 5,000+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–π
- **Provider APIs**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∫ –≤–Ω–µ—à–Ω–∏–º —Å–µ—Ä–≤–∏—Å–∞–º

## üöÄ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**

### –í–∞–ª–∏–¥–∞—Ü–∏—è
```bash
npx @redocly/cli lint main.yaml
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Go –∫–æ–¥–∞
```bash
ogen --target ../../services/oauth-service-go/pkg/api \
     --package api --clean main.yaml
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```bash
npx @redocly/cli build-docs main.yaml -o docs/index.html
```

## üîó **–û—Å–Ω–æ–≤–Ω—ã–µ Endpoints**

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/auth/oauth/{provider}/redirect` | –ü–æ–ª—É—á–∏—Ç—å URL –¥–ª—è OAuth —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ |
| GET | `/auth/oauth/{provider}/callback` | –û–±—Ä–∞–±–æ—Ç–∫–∞ OAuth callback |

## üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**

- **State Validation**: –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF —á–µ—Ä–µ–∑ state tokens
- **PKCE Support**: Proof Key for Code Exchange –¥–ª—è enhanced security
- **Token Security**: –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ OAuth tokens
- **Rate Limiting**: –ó–∞—â–∏—Ç–∞ –æ—Ç abuse –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **Audit Logging**: –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ OAuth –æ–ø–µ—Ä–∞—Ü–∏–π

## üìà **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**

### –ú–µ—Ç—Ä–∏–∫–∏ OAuth
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–π –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å OAuth flows
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö API
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º

### Health Checks
- `/health` - –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
- `/health/oauth` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

---

**OAuth Service –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω—É—é –∏ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –≤–Ω–µ—à–Ω–∏–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è NECPGAME.**
