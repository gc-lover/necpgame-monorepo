openapi: 3.0.3
info:
  title: Social Domain - Content Management NPCs Module
  description: '**NPC Management API** for NECPGAME MMOFPS RPG.


    **Purpose:** CRUD operations for NPC definitions


    **Performance Targets:**

    - NPC queries: 1000+ RPS, P99 <30ms

    - Location-based filtering: <10ms

    - Memory: <100MB per service instance


    **Features:**

    - NPC CRUD operations

    - Faction/location filtering

    - Dialogue/quest associations

    '
  version: 1.0.0
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  contact:
    name: NECPGAME Content API Support
    email: content@social.necpgame.com
servers:
  - url: http://localhost:8084/api/v1/social/content/npcs
    description: Development server
  - url: https://api.necpgame.com/api/v1/social/content/npcs
    description: Production server
security:
  - BearerAuth: [ ]
tags:
  - name: NPCs
    description: NPC management endpoints
paths:
  /:
    get:
      summary: List NPCs with filtering
      operationId: listNPCs
      tags:
        - NPCs
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
        - name: faction
          in: query
          schema:
            type: string
        - name: location
          in: query
          schema:
            type: string
      responses:
        '200':
          description: List of NPCs
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NPCsListResponse'
    post:
      summary: Create new NPC
      operationId: createNPC
      tags:
        - NPCs
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateNPCRequest'
      responses:
        '201':
          description: NPC created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NPCResponse'
  /{npc_id}:
    get:
      summary: Get NPC by ID
      operationId: getNPC
      tags:
        - NPCs
      parameters:
        - name: npc_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: NPC details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NPCResponse'
    put:
      summary: Update NPC
      operationId: updateNPC
      tags:
        - NPCs
      parameters:
        - name: npc_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateNPCRequest'
      responses:
        '200':
          description: NPC updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NPCResponse'
    delete:
      summary: Delete NPC
      operationId: deleteNPC
      tags:
        - NPCs
      parameters:
        - name: npc_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: NPC deleted
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    NPC:
      type: object
      required:
        - id
        - name
        - faction
        - location
      properties:
        id:
          type: string
          format: uuid
        dialogue_id:
          type: string
          format: uuid
        name:
          type: string
          maxLength: 100
        faction:
          type: string
          maxLength: 50
        location:
          type: string
          maxLength: 100
        role:
          type: string
          maxLength: 100
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        appearance:
          type: object
          properties:
            model:
              type: string
            voice:
              type: string
        stats:
          type: object
          properties:
            health:
              type: integer
              minimum: 1
            level:
              type: integer
              minimum: 1
              maximum: 100
        quest_ids:
          type: array
          items:
            type: string
            format: uuid
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CreateNPCRequest:
      type: object
      required:
        - name
        - faction
        - location
      properties:
        dialogue_id:
          type: string
          format: uuid
        name:
          type: string
          maxLength: 100
        faction:
          type: string
          maxLength: 50
        location:
          type: string
          maxLength: 100
        role:
          type: string
          maxLength: 100
        appearance:
          type: object
          properties:
            model:
              type: string
            voice:
              type: string
        stats:
          type: object
          properties:
            health:
              type: integer
              minimum: 1
            level:
              type: integer
              minimum: 1
              maximum: 100
        quest_ids:
          type: array
          items:
            type: string
            format: uuid
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    UpdateNPCRequest:
      type: object
      properties:
        dialogue_id:
          type: string
          format: uuid
        name:
          type: string
          maxLength: 100
        faction:
          type: string
          maxLength: 50
        location:
          type: string
          maxLength: 100
        role:
          type: string
          maxLength: 100
        appearance:
          type: object
          properties:
            model:
              type: string
            voice:
              type: string
        stats:
          type: object
          properties:
            health:
              type: integer
              minimum: 1
            level:
              type: integer
              minimum: 1
              maximum: 100
        quest_ids:
          type: array
          items:
            type: string
            format: uuid
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    NPCResponse:
      type: object
      properties:
        npc:
          $ref: '#/components/schemas/NPC'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    NPCsListResponse:
      type: object
      properties:
        npcs:
          type: array
          items:
            $ref: '#/components/schemas/NPC'
        total_count:
          type: integer
          minimum: 0
        limit:
          type: integer
          minimum: 1
          maximum: 100
        offset:
          type: integer
          minimum: 0
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
