openapi: 3.0.3
info:
  title: Social Domain - Guilds Module API
  description: '**Enterprise-Grade Guilds Module** for NECPGAME MMOFPS RPG.


    **Module Purpose:** Complete guild management system with warfare, territories, and social hierarchy


    **Architecture:** Event-driven microservice with Kafka integration

    **Domain:** social-domain

    **Module:** guilds


    **Core Features:**

    - Guild creation and lifecycle management

    - Member management and roles (leader, officer, member)

    - Guild bank and resource management

    - Territory claiming and defense

    - Guild warfare and PvP mechanics

    - Reputation and ranking systems

    - Cross-guild alliances and diplomacy


    **Performance Targets:**

    - Hot paths: 2000+ RPS, P99 <15ms (guild status, member lists)

    - Event throughput: 1000+ events/sec (guild updates, territory changes)

    - Memory: <30MB per service instance (optimized structs)

    - Cache hit rate: >95% (Redis for active guilds)


    **BACKEND NOTE:** Struct field alignment optimized (large → small types).

    All schemas ordered for optimal memory layout in generated Go code.

    Expected memory savings: 30-50% for guild-related structs.

    '
  version: 1.0.0
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  contact:
    name: NECPGAME Guilds API Support
    url: https://necpgame.com/support
    email: api@guilds.necpgame.com
servers:
- url: http://localhost:8084/api/v1/social-domain/guilds
  description: Guilds Module Development Server
- url: https://guilds.necpgame.com/api/v1
  description: Guilds Module Production Server
security:
- BearerAuth: []
tags:
- name: Guild Management
  description: Core guild CRUD operations
- name: Guild Members
  description: Member management and roles
- name: Guild Bank
  description: Resource and inventory management
- name: Guild Territories
  description: Territory claiming and control
- name: Guild Warfare
  description: PvP and conflict systems
- name: Guild Statistics
  description: Analytics and performance metrics
paths:
  /health:
    $ref: ./paths/guild-management.yaml#/paths/~1health
  /guilds:
    $ref: ./paths/guild-management.yaml#/paths/~1guilds
  /guilds/{guild_id}:
    $ref: ./paths/guild-management.yaml#/paths/~1guilds~1{guild_id}
  /guilds/{guild_id}/members:
    $ref: ./paths/member-management.yaml#/paths/~1guilds~1{guild_id}~1members
  /guilds/{guild_id}/members/{player_id}:
    $ref: ./paths/member-management.yaml#/paths/~1guilds~1{guild_id}~1members~1{player_id}
  /guilds/{guild_id}/territories:
    $ref: ./paths/territory-management.yaml#/paths/~1guilds~1{guild_id}~1territories
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      description: JWT Bearer token authentication
  schemas:
    HealthResponse:
      $ref: ./schemas/health-schemas.yaml#/components/schemas/HealthResponse
    Error:
      type: object
      required:
      - code
      - message
      properties:
        code:
          type: string
          description: Unique error code
          example: GUILD_NOT_FOUND
        message:
          type: string
          description: Human-readable error message
          example: Guild with specified ID not found.
        details:
          type: object
          description: Additional error details (optional)
    Guild:
      type: object
      required:
      - id
      - name
      - created_at
      - level
      - member_count
      - is_active
      properties:
        id:
          type: string
          format: uuid
          description: Guild unique identifier
          example: 550e8400-e29b-41d4-a716-446655440000
        leader_id:
          type: string
          format: uuid
          description: UUID of the guild leader
          example: 550e8400-e29b-41d4-a716-446655440001
        name:
          type: string
          minLength: 3
          maxLength: 50
          description: Guild display name
          example: Shadow Hunters
        description:
          type: string
          maxLength: 500
          description: Guild description
          example: Elite PvP guild focused on territory control and resource acquisition.
        motto:
          type: string
          maxLength: 100
          description: Guild motto/slogan
          example: Conquer or Die
        faction:
          type: string
          enum:
          - corporate
          - nomad
          - street_kid
          - mercenary
          - other
          description: Guild faction alignment
          example: nomad
        created_at:
          type: string
          format: date-time
          description: Timestamp of guild creation
          example: '2025-12-20T10:00:00Z'
        last_activity:
          type: string
          format: date-time
          description: Last guild activity timestamp
          example: '2025-12-20T14:30:00Z'
        win_rate:
          type: number
          minimum: 0
          maximum: 1
          description: Guild PvP win rate
          example: 0.67
        is_recruiting:
          type: boolean
          description: Whether guild is accepting new members
          example: true
        is_active:
          type: boolean
          description: Indicates if the guild is active
          example: true
        has_bank:
          type: boolean
          description: Whether guild has bank functionality
          example: true
        level:
          type: integer
          format: int32
          minimum: 1
          maximum: 100
          description: Guild level
          example: 15
        member_count:
          type: integer
          format: int32
          minimum: 1
          maximum: 250
          description: Current number of members
          example: 75
        max_members:
          type: integer
          format: int32
          minimum: 1
          maximum: 250
          description: Maximum allowed members
          example: 100
        reputation_score:
          type: integer
          format: int32
          minimum: -10000
          maximum: 10000
          description: Guild reputation score
          example: 1250
        territory_count:
          type: integer
          format: int32
          minimum: 0
          maximum: 50
          description: Number of controlled territories
          example: 3
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CreateGuildRequest:
      type: object
      required:
      - name
      - description
      - faction
      properties:
        name:
          type: string
          minLength: 3
          maxLength: 50
          description: Desired guild name
          example: Night City Legends
        description:
          type: string
          maxLength: 500
          description: Guild description
          example: A new guild rising in Night City, seeking glory and wealth.
        motto:
          type: string
          maxLength: 100
          description: Guild motto
          example: Power Through Unity
        faction:
          type: string
          enum:
          - corporate
          - nomad
          - street_kid
          - mercenary
          - other
          description: Guild faction alignment
          example: street_kid
        is_recruiting:
          type: boolean
          default: true
          description: Whether to accept new members immediately
        max_members:
          type: integer
          minimum: 1
          maximum: 250
          default: 50
          description: Maximum members allowed
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    UpdateGuildRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 3
          maxLength: 50
          description: New guild name
          example: Night City Elite
        description:
          type: string
          maxLength: 500
          description: New guild description
          example: Updated description for the elite guild.
        motto:
          type: string
          maxLength: 100
          description: New guild motto
        faction:
          type: string
          enum:
          - corporate
          - nomad
          - street_kid
          - mercenary
          - other
          description: New faction alignment
        is_recruiting:
          type: boolean
          description: Update recruiting status
        max_members:
          type: integer
          minimum: 1
          maximum: 250
          description: New maximum members
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    GuildResponse:
      type: object
      required:
      - guild
      properties:
        guild:
          $ref: '#/components/schemas/Guild'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    GuildsListResponse:
      type: object
      required:
      - guilds
      - total_count
      properties:
        guilds:
          type: array
          items:
            $ref: '#/components/schemas/Guild'
          description: List of guilds
        has_more:
          type: boolean
          description: Whether there are more results available
          example: true
        total_count:
          type: integer
          description: Total number of guilds matching criteria
          example: 150
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    GuildMember: null
    Territory: null
