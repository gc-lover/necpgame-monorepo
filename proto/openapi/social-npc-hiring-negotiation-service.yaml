# Issue: #304
openapi: 3.0.3
info:
  title: Social NPC Hiring Negotiation Service API
  description: API для переговоров с NPC
  version: 2.0.0
  contact:
    name: NECPGAME API Support
    email: api@necp.game

servers:
  - url: http://localhost:8084/api/v1
    description: Локальный сервер разработки
  - url: https://api.necp.game/api/v1
    description: Продакшен сервер

tags:
  - name: NPC Hiring Negotiation
    description: Переговоры с NPC

paths:
  /social/npc-hiring/negotiate:
    post:
      tags:
        - NPC Hiring Negotiation
      summary: Начать переговоры с NPC
      operationId: startNegotiation
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/StartNegotiationRequest"
      responses:
        "200":
          description: Переговоры начаты
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NegotiationResponse"
        "400":
          $ref: "common.yaml#/components/responses/BadRequest"
        "401":
          $ref: "common.yaml#/components/responses/Unauthorized"
        "500":
          $ref: "common.yaml#/components/responses/InternalServerError"

components:
  securitySchemes:
    BearerAuth:
      $ref: "common.yaml#/components/securitySchemes/BearerAuth"

  schemas:
    StartNegotiationRequest:
      type: object
      required:
        - npc_id
        - hiring_type
      properties:
        npc_id:
          type: string
          format: uuid
        hiring_type:
          type: string
          enum: [merchant, quest_giver, fixer, bodyguard, mercenary, diplomat, engineer, hacker]
        proposed_salary:
          type: number
          format: float
        contract_duration:
          type: integer
        autonomy_level:
          type: string
          enum: [direct, autonomous, hybrid]
          default: hybrid

    NegotiationResponse:
      type: object
      properties:
        negotiation_id:
          type: string
          format: uuid
        npc_id:
          type: string
          format: uuid
        status:
          type: string
          enum: [in_progress, accepted, rejected, counter_offer]
        npc_counter_offer:
          type: object
          properties:
            salary:
              type: number
              format: float
            contract_duration:
              type: integer
            autonomy_level:
              type: string
              enum: [direct, autonomous, hybrid]
        message:
          type: string

security:
  - BearerAuth: []
















