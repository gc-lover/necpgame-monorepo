openapi: 3.0.3
info:
  title: Social Reputation Service - Schemas
  description: Общие схемы данных для Social Reputation Service
  version: 2.0.0
  license:
    name: Proprietary
servers:
- url: http://localhost:8084/api/v1
  description: Social Service (локальная разработка)
paths: {}
components:
  schemas:
    PlayerReputation:
      type: object
      properties:
        player_id:
          type: string
          format: uuid
        last_update:
          type: string
          format: date-time
        faction_reputations:
          type: array
          items:
            $ref: '#/components/schemas/FactionReputation'
        overall_reputation:
          type: integer
          minimum: -100
          maximum: 100
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    FactionReputation:
      type: object
      properties:
        player_id:
          type: string
          format: uuid
        faction_id:
          type: string
          format: uuid
        faction_name:
          type: string
        tier_color:
          type: string
        tier:
          type: string
          enum:
          - hated
          - hostile
          - unfriendly
          - neutral
          - friendly
          - honored
          - legendary
        last_change:
          type: string
          format: date-time
        last_update:
          type: string
          format: date-time
        reputation_value:
          type: integer
          minimum: -100
          maximum: 100
        heat:
          type: integer
          minimum: 0
          maximum: 100
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ChangeReputationRequest:
      type: object
      required:
      - faction_id
      - change_amount
      - reason
      properties:
        faction_id:
          type: string
          format: uuid
        source_id:
          type: string
          format: uuid
          nullable: true
          description: ID источника изменения
        reason:
          type: string
          enum:
          - quest_completed
          - enemy_killed
          - npc_interaction
          - transaction
          - world_event
          - player_order
          - other
        change_amount:
          type: integer
          description: Изменение репутации (может быть отрицательным)
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ReputationChangeResponse:
      type: object
      properties:
        player_id:
          type: string
          format: uuid
        faction_id:
          type: string
          format: uuid
        old_tier:
          type: string
          enum:
          - hated
          - hostile
          - unfriendly
          - neutral
          - friendly
          - honored
          - legendary
        new_tier:
          type: string
          enum:
          - hated
          - hostile
          - unfriendly
          - neutral
          - friendly
          - honored
          - legendary
        old_reputation:
          type: integer
        new_reputation:
          type: integer
        heat_change:
          type: integer
        new_heat:
          type: integer
        tier_changed:
          type: boolean
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ReputationTier:
      type: object
      properties:
        player_id:
          type: string
          format: uuid
        faction_id:
          type: string
          format: uuid
        tier_name:
          type: string
        tier_color:
          type: string
        tier:
          type: string
          enum:
          - hated
          - hostile
          - unfriendly
          - neutral
          - friendly
          - honored
          - legendary
        tier_range:
          type: object
          properties:
            min:
              type: integer
            max:
              type: integer
        effects:
          $ref: '#/components/schemas/ReputationEffects'
        reputation_value:
          type: integer
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    FactionRelationsResponse:
      type: object
      properties:
        player_id:
          type: string
          format: uuid
        relations:
          type: array
          items:
            $ref: '#/components/schemas/FactionReputation'
        total:
          type: integer
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ReputationEffects:
      type: object
      properties:
        player_id:
          type: string
          format: uuid
        faction_id:
          type: string
          format: uuid
        tier:
          type: string
          enum:
          - hated
          - hostile
          - unfriendly
          - neutral
          - friendly
          - honored
          - legendary
        territory_access:
          type: string
          enum:
          - blocked
          - restricted
          - normal
          - enhanced
        trade_access:
          type: string
          enum:
          - blocked
          - minimal
          - restricted
          - normal
          - enhanced
        npc_aggression:
          type: string
          enum:
          - none
          - low
          - medium
          - high
        quest_access:
          type: string
          enum:
          - none
          - limited
          - restricted
          - normal
          - enhanced
        faction_bonuses:
          type: array
          items:
            type: string
        price_modifier:
          type: number
          format: float
        decay_modifier:
          type: number
          format: float
        vip_services:
          type: boolean
        npc_recruitment:
          type: boolean
        exclusive_locations:
          type: boolean
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
