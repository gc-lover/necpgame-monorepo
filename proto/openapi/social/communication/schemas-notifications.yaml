components:
  schemas:
    Notification:
      type: object
      required:
      - notification_id
      - player_id
      - type
      - title
      - message
      - created_at
      properties:
        notification_id:
          type: string
          format: uuid
          description: Notification unique identifier
          example: 550e8400-e29b-41d4-a716-446655440020
        player_id:
          type: string
          format: uuid
          description: Target player ID
          example: 550e8400-e29b-41d4-a716-446655440002
        type:
          type: string
          enum:
          - system
          - guild
          - friend
          - quest
          - achievement
          - market
          - event
          description: Notification type
          example: guild
        title:
          type: string
          maxLength: 100
          description: Notification title
          example: "Guild Invitation"
        message:
          type: string
          maxLength: 500
          description: Notification message
          example: "You have been invited to join 'Shadow Hunters' guild"
        data:
          type: object
          description: Additional notification data
          example:
            guild_id: "550e8400-e29b-41d4-a716-446655440000"
            inviter_id: "550e8400-e29b-41d4-a716-446655440001"
        is_read:
          type: boolean
          description: Whether notification has been read
          example: false
        created_at:
          type: string
          format: date-time
          description: Notification creation timestamp
          example: '2025-12-27T09:54:00Z'
        expires_at:
          type: string
          format: date-time
          description: Notification expiration timestamp
          example: '2025-12-28T09:54:00Z'

    SendNotificationRequest:
      type: object
      required:
      - player_ids
      - type
      - title
      - message
      properties:
        player_ids:
          type: array
          items:
            type: string
            format: uuid
          minItems: 1
          maxItems: 1000
          description: Target player IDs
          example:
          - 550e8400-e29b-41d4-a716-446655440002
          - 550e8400-e29b-41d4-a716-446655440003
        type:
          type: string
          enum:
          - system
          - guild
          - friend
          - quest
          - achievement
          - market
          - event
          description: Notification type
          example: system
        title:
          type: string
          maxLength: 100
          description: Notification title
          example: "Server Maintenance"
        message:
          type: string
          maxLength: 500
          description: Notification message
          example: "Server will be down for maintenance in 30 minutes"
        data:
          type: object
          description: Additional notification data
          example:
            maintenance_start: "2025-12-27T10:30:00Z"
            duration_minutes: 60
        priority:
          type: string
          enum:
          - low
          - normal
          - high
          - urgent
          default: normal
          description: Notification priority
          example: high
        expires_in_minutes:
          type: integer
          minimum: 1
          maximum: 525600  # 1 year
          description: Minutes until notification expires
          example: 1440  # 24 hours

    NotificationResponse:
      type: object
      required:
      - notification
      properties:
        notification:
          $ref: '#/components/schemas/Notification'

    NotificationsListResponse:
      type: object
      required:
      - notifications
      - pagination
      properties:
        notifications:
          type: array
          items:
            $ref: '#/components/schemas/Notification'
        pagination:
          type: object
          required:
          - page
          - limit
          - total
          - total_pages
          properties:
            page:
              type: integer
              example: 1
            limit:
              type: integer
              example: 20
            total:
              type: integer
              example: 150
            total_pages:
              type: integer
              example: 8

    NotificationSettings:
      type: object
      required:
      - player_id
      properties:
        player_id:
          type: string
          format: uuid
          description: Player unique identifier
          example: 550e8400-e29b-41d4-a716-446655440002
        email_notifications:
          type: boolean
          description: Enable email notifications
          default: true
          example: true
        push_notifications:
          type: boolean
          description: Enable push notifications
          default: true
          example: true
        in_game_notifications:
          type: boolean
          description: Enable in-game notifications
          default: true
          example: true
        notification_types:
          type: object
          description: Per-type notification settings
          properties:
            system:
              type: boolean
              default: true
              example: true
            guild:
              type: boolean
              default: true
              example: true
            friend:
              type: boolean
              default: true
              example: true
            quest:
              type: boolean
              default: true
              example: true
            achievement:
              type: boolean
              default: true
              example: true
            market:
              type: boolean
              default: false
              example: false
            event:
              type: boolean
              default: true
              example: true
        quiet_hours_start:
          type: string
          pattern: '^([01]?[0-9]|2[0-3]):[0-5][0-9]$'
          description: Quiet hours start time (HH:MM)
          example: "22:00"
        quiet_hours_end:
          type: string
          pattern: '^([01]?[0-9]|2[0-3]):[0-5][0-9]$'
          description: Quiet hours end time (HH:MM)
          example: "08:00"

    NotificationStatsResponse:
      type: object
      required:
      - total_notifications
      - unread_count
      - read_count
      - notifications_by_type
      properties:
        total_notifications:
          type: integer
          minimum: 0
          description: Total notifications count
          example: 150
        unread_count:
          type: integer
          minimum: 0
          description: Unread notifications count
          example: 12
        read_count:
          type: integer
          minimum: 0
          description: Read notifications count
          example: 138
        notifications_by_type:
          type: object
          description: Notification counts by type
          properties:
            system:
              type: integer
              minimum: 0
              example: 25
            guild:
              type: integer
              minimum: 0
              example: 45
            friend:
              type: integer
              minimum: 0
              example: 30
            quest:
              type: integer
              minimum: 0
              example: 20
            achievement:
              type: integer
              minimum: 0
              example: 15
            market:
              type: integer
              minimum: 0
              example: 10
            event:
              type: integer
              minimum: 0
              example: 5
        oldest_unread:
          type: string
          format: date-time
          description: Oldest unread notification timestamp
          example: '2025-12-26T15:30:00Z'
