components:
  schemas:
    ModerationRule:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        pattern:
          type: string
        type:
          type: string
          enum:
            - word_filter
            - spam_detection
            - toxicity_analysis
        severity:
          type: string
          enum:
            - low
            - medium
            - high
            - critical
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        active:
          type: boolean
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CreateModerationRuleRequest:
      type: object
      required:
        - name
        - type
        - severity
      properties:
        name:
          type: string
        pattern:
          type: string
        type:
          type: string
          enum:
            - word_filter
            - spam_detection
            - toxicity_analysis
        severity:
          type: string
          enum:
            - low
            - medium
            - high
            - critical
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    UpdateModerationRuleRequest:
      type: object
      properties:
        name:
          type: string
        pattern:
          type: string
        severity:
          type: string
          enum:
            - low
            - medium
            - high
            - critical
        active:
          type: boolean
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ModerationViolation:
      type: object
      properties:
        id:
          type: string
          format: uuid
        rule_id:
          type: string
          format: uuid
        message_id:
          type: string
          format: uuid
        user_id:
          type: string
          format: uuid
        channel_id:
          type: string
          format: uuid
        content:
          type: string
        severity:
          type: string
          enum:
            - low
            - medium
            - high
            - critical
        status:
          type: string
          enum:
            - pending
            - resolved
            - dismissed
        detected_at:
          type: string
          format: date-time
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ApplyModerationActionRequest:
      type: object
      required:
        - action_type
        - reason
        - moderator_id
      properties:
        moderator_id:
          type: string
          format: uuid
        reason:
          type: string
        action_type:
          type: string
          enum:
            - warn
            - mute
            - ban
            - delete
        duration:
          type: integer
          description: Duration in seconds
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ModerationAction:
      type: object
      properties:
        id:
          type: string
          format: uuid
        violation_id:
          type: string
          format: uuid
        moderator_id:
          type: string
          format: uuid
        reason:
          type: string
        action_type:
          type: string
          enum:
            - warn
            - mute
            - ban
            - delete
        applied_at:
          type: string
          format: date-time
        duration:
          type: integer
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ModerationLog:
      type: object
      properties:
        id:
          type: string
          format: uuid
        action_id:
          type: string
          format: uuid
        moderator_id:
          type: string
          format: uuid
        target_user_id:
          type: string
          format: uuid
        action_type:
          type: string
          enum:
            - warn
            - mute
            - ban
            - delete
        timestamp:
          type: string
          format: date-time
        details:
          type: object
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CheckMessageRequest:
      type: object
      required:
        - content
        - user_id
        - channel_id
      properties:
        user_id:
          type: string
          format: uuid
        channel_id:
          type: string
          format: uuid
        content:
          type: string
        context:
          type: object
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CheckMessageResponse:
      type: object
      properties:
        violations:
          type: array
          items:
            $ref: '#/components/schemas/ModerationViolation'
        actions_required:
          type: array
          items:
            type: string
            enum:
              - warn
              - mute
              - ban
              - delete
        allowed:
          type: boolean
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
  responses:
    BadRequest:
      description: Bad request
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
              code:
                type: string
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
              code:
                type: string
    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
              code:
                type: string
