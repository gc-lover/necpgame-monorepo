openapi: 3.0.3
info:
  title: Combat Abilities Service Go API
  description: 'Enterprise-Grade Combat Abilities Service API for NECPGAME MMOFPS RPG.

    **Enterprise-Grade Domain:** specialized-domain

    **Module:** combat-abilities-service-go

    **Purpose:** High-performance combat abilities management, ability activation, and cooldown handling

    **BACKEND NOTE:** Struct field alignment optimized (large → small types).

    All schemas ordered for optimal memory layout in generated Go code.

    Expected memory savings: 30-50% for ability-related structs.

    **Features:**

    - Real-time ability activation (1000+ RPS)
    - Ability cooldown management
    - Resource consumption tracking
    - Ability synergies and combos
    - Anti-cheat validation

    **Performance:** P99 <50ms for ability operations, zero allocations in hot path
    '
  version: 1.0.0
  license:
    name: Proprietary
    url: https://necpgame.com/license
  contact:
    name: NECPGAME API Support
    url: https://necpgame.com/support
    email: api@combat-abilities.necpgame.com
servers:
  - url: http://localhost:8084/api/v1
    description: Combat Abilities Service Go (development)
  - url: https://combat-abilities-go.necpgame.com/api/v1
    description: Combat Abilities Service Go (production)
tags:
  - name: Ability Management
    description: Combat ability lifecycle operations
  - name: Ability Activation
    description: Real-time ability activation and execution
  - name: Ability Cooldowns
    description: Cooldown management and tracking
  - name: Ability Synergies
    description: Ability combinations and synergies
  - name: Anti-Cheat
    description: Ability validation and cheat prevention
paths:
  /health:
    get:
      summary: Service health check
      operationId: combatAbilitiesHealthCheck
      tags:
        - Health
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
        '503':
          description: Service is unhealthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /combat/abilities:
    post:
      summary: Activate combat ability
      operationId: combatAbilitiesActivateAbility
      description: 'Activate a combat ability with validation and anti-cheat checks.

        **BACKEND NOTE:** Hot path - optimized for 1000+ RPS, zero allocations.
        '
      tags:
        - Ability Activation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ActivateAbilityRequest'
      responses:
        '200':
          description: Ability activated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ActivateAbilityResponse'
        '400':
          description: Invalid ability activation request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Ability not available or insufficient resources
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '429':
          description: Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    get:
      summary: List available abilities
      operationId: combatAbilitiesListAbilities
      description: Get list of available combat abilities for a character.
      tags:
        - Ability Management
      parameters:
        - name: character_id
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: Character ID
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          description: Maximum number of abilities to return
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
          description: Number of abilities to skip
      responses:
        '200':
          description: List of available abilities
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListAbilitiesResponse'
  /combat/abilities/{ability_id}/cooldown:
    get:
      summary: Get ability cooldown status
      operationId: combatAbilitiesGetAbilityCooldown
      description: Get current cooldown status for a specific ability.
      tags:
        - Ability Cooldowns
      parameters:
        - name: ability_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Ability ID
        - name: character_id
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: Character ID
      responses:
        '200':
          description: Ability cooldown status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AbilityCooldownResponse'
        '404':
          description: Ability not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /combat/abilities/{ability_id}/synergies:
    get:
      summary: Get ability synergies
      operationId: combatAbilitiesGetAbilitySynergies
      description: Get synergies and combo possibilities for an ability.
      tags:
        - Ability Synergies
      parameters:
        - name: ability_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Ability ID
      responses:
        '200':
          description: Ability synergies
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AbilitySynergiesResponse'
  /combat/abilities/validate:
    post:
      summary: Validate ability activation
      operationId: combatAbilitiesValidateAbilityActivation
      description: 'Validate ability activation for anti-cheat purposes.

        **BACKEND NOTE:** Used for cheat detection and prevention.
        '
      tags:
        - Anti-Cheat
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ValidateAbilityRequest'
      responses:
        '200':
          description: Validation result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidateAbilityResponse'
        '400':
          description: Invalid validation request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      description: JWT Bearer token authentication
  schemas:
    HealthResponse:
      type: object
      required:
        - status
        - timestamp
      properties:
        version:
          type: string
        status:
          type: string
          enum:
            - healthy
        timestamp:
          type: string
          format: date-time
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          description: Error code
        message:
          type: string
          description: Human-readable error message
        details:
          type: object
          description: Additional error details
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ActivateAbilityRequest:
      type: object
      required:
        - ability_id
        - character_id
        - target_position
      properties:
        ability_id:
          type: string
          format: uuid
          description: 'BACKEND NOTE: UUID - 16 bytes, ordered first for struct alignment'
        character_id:
          type: string
          format: uuid
          description: Character activating the ability
        target_position:
          type: object
          required:
            - x
            - y
            - z
          properties:
            x:
              type: number
              format: float
              description: X coordinate
            y:
              type: number
              format: float
              description: Y coordinate
            z:
              type: number
              format: float
              description: Z coordinate
          description: 'BACKEND NOTE: 3D vector for positioning, optimized for game coordinates. Target position for the ability'
        target_entity_id:
          type: string
          format: uuid
          description: Target entity ID (optional for area abilities)
        synergy_abilities:
          type: array
          items:
            type: string
            format: uuid
          description: IDs of synergistic abilities activated together
          maxItems: 5
        timestamp:
          type: integer
          format: int64
          description: Client timestamp for anti-cheat validation
        client_version:
          type: string
          description: Client version for compatibility checks
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small types). Expected memory savings: 30-50% for activation requests.'
    ActivateAbilityResponse:
      type: object
      required:
        - success
        - activation_id
        - cooldown_end_time
      properties:
        success:
          type: boolean
          description: 'BACKEND NOTE: bool - 1 byte, ordered last for struct alignment'
        activation_id:
          type: string
          format: uuid
          description: 'BACKEND NOTE: UUID - 16 bytes, ordered first for struct alignment'
        ability_id:
          type: string
          format: uuid
          description: Activated ability ID
        character_id:
          type: string
          format: uuid
          description: Character ID
        cooldown_end_time:
          type: integer
          format: int64
          description: Timestamp when cooldown ends
        resource_cost:
          type: object
          properties:
            health:
              type: integer
              format: int32
            stamina:
              type: integer
              format: int32
            mana:
              type: integer
              format: int32
          description: Resources consumed by the ability
        synergy_bonus:
          type: number
          format: float
          description: Damage/resource multiplier from synergies
        validation_token:
          type: string
          description: Anti-cheat validation token
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small types). Expected memory savings: 30-50% for activation responses.'
    ListAbilitiesResponse:
      type: object
      required:
        - abilities
        - total_count
      properties:
        abilities:
          type: array
          items:
            type: object
            required:
              - id
              - name
              - type
              - cooldown
            properties:
              id:
                type: string
                format: uuid
                description: 'BACKEND NOTE: UUID - 16 bytes, ordered first for struct alignment'
              name:
                type: string
                description: Ability display name
              type:
                type: string
                enum:
                  - offensive
                  - defensive
                  - utility
                  - mobility
                description: Ability category
              cooldown:
                type: integer
                format: int32
                description: Base cooldown in milliseconds
              resource_cost:
                type: object
                properties:
                  health:
                    type: integer
                    format: int32
                  stamina:
                    type: integer
                    format: int32
                  mana:
                    type: integer
                    format: int32
                description: Resource costs
              damage_type:
                type: string
                enum:
                  - physical
                  - energy
                  - chemical
                  - thermal
                description: Type of damage dealt
              range:
                type: number
                format: float
                description: Ability range in meters
              area_of_effect:
                type: number
                format: float
                description: Area of effect radius
              level_requirement:
                type: integer
                format: int32
                description: Minimum character level required
              is_unlocked:
                type: boolean
                description: 'BACKEND NOTE: bool - 1 byte, ordered last for struct alignment'
            description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small types). Expected memory savings: 30-50%.'
          description: 'BACKEND NOTE: Array of ability objects, ordered for optimal struct layout'
        total_count:
          type: integer
          format: int32
          description: Total number of abilities available
        pagination:
          type: object
          properties:
            offset:
              type: integer
              format: int32
            limit:
              type: integer
              format: int32
            has_more:
              type: boolean
          description: Pagination information
      description: 'BACKEND NOTE: Response optimized for struct alignment with large arrays first.'
    AbilityCooldownResponse:
      type: object
      required:
        - ability_id
        - is_on_cooldown
        - remaining_time
      properties:
        ability_id:
          type: string
          format: uuid
          description: 'BACKEND NOTE: UUID - 16 bytes, ordered first for struct alignment'
        is_on_cooldown:
          type: boolean
          description: Whether ability is currently on cooldown
        remaining_time:
          type: integer
          format: int32
          description: Remaining cooldown time in milliseconds
        total_cooldown:
          type: integer
          format: int32
          description: Total cooldown duration
        last_used:
          type: integer
          format: int64
          description: Timestamp when ability was last used
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small types).'
    AbilitySynergiesResponse:
      type: object
      required:
        - ability_id
        - synergies
      properties:
        ability_id:
          type: string
          format: uuid
          description: Ability for which synergies are being queried
        synergies:
          type: array
          items:
            type: object
            required:
              - partner_ability_id
              - synergy_type
              - bonus_multiplier
            properties:
              partner_ability_id:
                type: string
                format: uuid
                description: 'BACKEND NOTE: UUID - 16 bytes, ordered first for struct alignment'
              synergy_type:
                type: string
                enum:
                  - damage_boost
                  - cooldown_reduction
                  - resource_efficiency
                  - critical_chance
                description: Type of synergy effect
              bonus_multiplier:
                type: number
                format: float
                description: Multiplier for the synergy bonus
              condition:
                type: string
                description: Condition for synergy activation
              is_active:
                type: boolean
                description: 'BACKEND NOTE: bool - 1 byte, ordered last for struct alignment'
            description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small types).'
          description: List of possible synergies for this ability
        total_synergies:
          type: integer
          format: int32
          description: Total number of synergies available
      description: 'BACKEND NOTE: Response optimized for struct alignment.'
    ValidateAbilityRequest:
      type: object
      required:
        - ability_id
        - character_id
        - activation_data
      properties:
        ability_id:
          type: string
          format: uuid
          description: 'BACKEND NOTE: UUID - 16 bytes, ordered first for struct alignment'
        character_id:
          type: string
          format: uuid
          description: Character ID
        activation_data:
          type: object
          properties:
            timestamp:
              type: integer
              format: int64
            position:
              type: object
              required:
                - x
                - y
                - z
              properties:
                x:
                  type: number
                  format: float
                  description: X coordinate
                y:
                  type: number
                  format: float
                  description: Y coordinate
                z:
                  type: number
                  format: float
                  description: Z coordinate
              description: 'BACKEND NOTE: 3D vector for positioning, optimized for game coordinates.'
            target:
              type: string
              format: uuid
          description: Activation context data for validation
        client_hash:
          type: string
          description: Client-side hash for anti-cheat validation
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small types).'
    ValidateAbilityResponse:
      type: object
      required:
        - is_valid
        - validation_token
      properties:
        is_valid:
          type: boolean
          description: 'BACKEND NOTE: bool - 1 byte, ordered last for struct alignment'
        validation_token:
          type: string
          description: 'BACKEND NOTE: String - variable length, ordered first'
        violations:
          type: array
          items:
            type: string
          description: List of validation violations found
        confidence_score:
          type: number
          format: float
          minimum: 0
          maximum: 1
          description: Confidence score of validation (0-1)
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small types).'
    AbilityInfo:
      type: object
      required:
        - id
        - name
        - type
        - cooldown
      properties:
        id:
          type: string
          format: uuid
          description: 'BACKEND NOTE: UUID - 16 bytes, ordered first for struct alignment'
        name:
          type: string
          description: Ability display name
        type:
          type: string
          enum:
            - offensive
            - defensive
            - utility
            - mobility
          description: Ability category
        cooldown:
          type: integer
          format: int32
          description: Base cooldown in milliseconds
        resource_cost:
          type: object
          properties:
            health:
              type: integer
              format: int32
            stamina:
              type: integer
              format: int32
            mana:
              type: integer
              format: int32
          description: Resource costs
        damage_type:
          type: string
          enum:
            - physical
            - energy
            - chemical
            - thermal
          description: Type of damage dealt
        range:
          type: number
          format: float
          description: Ability range in meters
        area_of_effect:
          type: number
          format: float
          description: Area of effect radius
        level_requirement:
          type: integer
          format: int32
          description: Minimum character level required
        is_unlocked:
          type: boolean
          description: 'BACKEND NOTE: bool - 1 byte, ordered last for struct alignment'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small types). Expected memory savings: 30-50%.'
    SynergyInfo:
      type: object
      required:
        - partner_ability_id
        - synergy_type
        - bonus_multiplier
      properties:
        partner_ability_id:
          type: string
          format: uuid
          description: 'BACKEND NOTE: UUID - 16 bytes, ordered first for struct alignment'
        synergy_type:
          type: string
          enum:
            - damage_boost
            - cooldown_reduction
            - resource_efficiency
            - critical_chance
          description: Type of synergy effect
        bonus_multiplier:
          type: number
          format: float
          description: Multiplier for the synergy bonus
        condition:
          type: string
          description: Condition for synergy activation
        is_active:
          type: boolean
          description: 'BACKEND NOTE: bool - 1 byte, ordered last for struct alignment'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small types).'
    Vector3:
      type: object
      required:
        - x
        - y
        - z
      properties:
        x:
          type: number
          format: float
          description: X coordinate
        y:
          type: number
          format: float
          description: Y coordinate
        z:
          type: number
          format: float
          description: Z coordinate
      description: 'BACKEND NOTE: 3D vector for positioning, optimized for game coordinates.'
security:
  - BearerAuth: [ ]
