components:
  schemas:
    FreerunComboRequest:
      type: object
      required:
      - character_id
      - session_id
      - action_sequence
      properties:
        character_id:
          type: string
          format: uuid
          description: ID персонажа
        session_id:
          type: string
          format: uuid
          description: ID боевой сессии
        action_sequence:
          type: array
          items:
            type: string
            enum:
            - roof_jump
            - wall_climb
            - wire_slide
            - rock_climb
            - hook_grab
            - gravibot
            - leg_implant
          minItems: 2
          description: Последовательность действий комбо
        combat_integration:
          type: boolean
          default: false
          description: Интегрировать с боевыми комбо
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    FreerunComboResponse:
      type: object
      required:
      - success
      - combo_id
      properties:
        combo_id:
          type: string
          format: uuid
          description: ID выполненного комбо
        message:
          type: string
          description: Дополнительное сообщение
        bonuses_applied:
          type: object
          description: Примененные бонусы
          additionalProperties:
            type: number
        success:
          type: boolean
          description: Успешность выполнения комбо
        combat_integrated:
          type: boolean
          description: Было ли интегрировано с боевой системой
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    MobileAbilityRequest:
      type: object
      required:
      - character_id
      - session_id
      - ability_id
      - current_action
      properties:
        character_id:
          type: string
          format: uuid
          description: ID персонажа
        session_id:
          type: string
          format: uuid
          description: ID боевой сессии
        ability_id:
          type: string
          format: uuid
          description: ID активируемой способности
        current_action:
          type: string
          enum:
          - roof_jump
          - wall_climb
          - wire_slide
          - rock_climb
          - hook_grab
          - gravibot
          - leg_implant
          - wall_run
          - double_jump
          - slide
          - air_dash
          - wall_kick
          - vault
          - wall_run
          - double_jump
          - slide
          - air_dash
          - wall_kick
          - vault
          description: Текущее действие паркура
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    MobileAbilityResponse:
      type: object
      required:
      - success
      - activation_id
      - mobile_version_used
      properties:
        activation_id:
          type: string
          format: uuid
          description: ID активации способности
        message:
          type: string
          description: Дополнительное сообщение
        success:
          type: boolean
          description: Успешность активации
        mobile_version_used:
          type: boolean
          description: Использована ли мобильная версия способности
        cost_adjusted:
          type: integer
          minimum: 0
          description: Скорректированная стоимость способности
        original_cost:
          type: integer
          minimum: 0
          description: Оригинальная стоимость способности
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CreateRouteRequest:
      type: object
      required:
      - character_id
      - name
      - route_points
      properties:
        character_id:
          type: string
          format: uuid
          description: ID персонажа-создателя
        name:
          type: string
          minLength: 3
          maxLength: 100
          description: Название маршрута
        difficulty:
          type: string
          enum:
          - easy
          - medium
          - hard
          - expert
          default: medium
          description: Сложность маршрута
        route_points:
          type: array
          items:
            $ref: '#/components/schemas/RoutePoint'
          minItems: 2
          description: Точки маршрута
        is_public:
          type: boolean
          default: false
          description: Публичный ли маршрут
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CreateRouteResponse:
      type: object
      required:
      - success
      - route_id
      - validation_passed
      properties:
        route_id:
          type: string
          format: uuid
          description: ID созданного маршрута
        message:
          type: string
          description: Дополнительное сообщение
        success:
          type: boolean
          description: Успешность создания
        validation_passed:
          type: boolean
          description: Прошла ли валидация маршрута
        estimated_time:
          type: integer
          minimum: 0
          description: Предполагаемое время прохождения (секунды)
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    FreerunRoute:
      type: object
      required:
      - route_id
      - character_id
      - name
      - route_points
      - difficulty
      - is_public
      - created_at
      properties:
        route_id:
          type: string
          format: uuid
          description: ID маршрута
        character_id:
          type: string
          format: uuid
          description: ID создателя
        name:
          type: string
          description: Название маршрута
        difficulty:
          type: string
          enum:
          - easy
          - medium
          - hard
          - expert
          description: Сложность
        created_at:
          type: string
          format: date-time
          description: Дата создания
        route_points:
          type: array
          items:
            $ref: '#/components/schemas/RoutePoint'
          description: Точки маршрута
        is_public:
          type: boolean
          description: Публичный ли маршрут
        completion_count:
          type: integer
          minimum: 0
          description: Количество прохождений
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    RoutePoint:
      type: object
      required:
      - position
      - action_type
      properties:
        action_type:
          type: string
          enum:
          - roof_jump
          - wall_climb
          - wire_slide
          - rock_climb
          - hook_grab
          - gravibot
          - leg_implant
          - wall_run
          - double_jump
          - slide
          - air_dash
          - wall_kick
          - vault
          - wall_run
          - double_jump
          - slide
          - air_dash
          - wall_kick
          - vault
          description: Тип действия в этой точке
        position:
          $ref: '#/components/schemas/Position3D'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    Position3D:
      type: object
      required:
      - x
      - y
      - z
      properties:
        x:
          type: number
          format: double
          description: Координата X
        y:
          type: number
          format: double
          description: Координата Y
        z:
          type: number
          format: double
          description: Координата Z
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    FreerunTelemetryResponse:
      type: object
      required:
      - character_id
      - telemetry_records
      properties:
        character_id:
          type: string
          format: uuid
          description: ID персонажа
        pagination:
          type: object
          properties:
            page:
              type: integer
              minimum: 1
            page_size:
              type: integer
              minimum: 1
            total_records:
              type: integer
              minimum: 0
        telemetry_records:
          type: array
          items:
            $ref: '#/components/schemas/TelemetryRecord'
          description: Записи телеметрии
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    TelemetryRecord:
      type: object
      required:
      - action_type
      - duration
      - distance
      - stamina_used
      - timestamp
      properties:
        action_type:
          type: string
          description: Тип действия паркура
        timestamp:
          type: string
          format: date-time
          description: Время выполнения действия
        distance:
          type: number
          format: double
          minimum: 0
          description: Пройденная дистанция (метры)
        combo_triggered:
          type: boolean
          description: Было ли активировано комбо
        duration:
          type: integer
          minimum: 0
          description: Длительность действия (миллисекунды)
        stamina_used:
          type: integer
          minimum: 0
          description: Потрачена выносливость
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
