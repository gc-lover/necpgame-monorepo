components:
  schemas:
    CombatActionRequest:
      type: object
      required:
      - action_type
      - timestamp
      properties:
        target_id:
          type: string
          format: uuid
          description: Target participant ID
        weapon_id:
          type: string
          format: uuid
          description: Weapon to use
        ability_id:
          type: string
          format: uuid
          description: Ability to activate
        action_type:
          type: string
          enum:
          - move
          - attack
          - ability
          - reload
          - interact
          - surrender
          description: Type of combat action
        timestamp:
          type: string
          format: date-time
          description: Client timestamp
        parameters:
          type: object
          description: Action-specific parameters
        target_position:
          $ref: '#/components/schemas/Vector3'
          description: Target position for movement/attack
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CombatActionResult:
      type: object
      required:
      - success
      - timestamp
      properties:
        action_id:
          type: string
          format: uuid
          description: Unique action identifier
        timestamp:
          type: string
          format: date-time
          description: Server timestamp
        effects:
          type: array
          items:
            $ref: '#/components/schemas/CombatEffect'
          description: Effects caused by this action
        validation_errors:
          type: array
          items:
            type: string
          description: Validation errors (if success = false)
        success:
          type: boolean
          description: Whether action was successful
        cooldown_ms:
          type: integer
          minimum: 0
          description: Cooldown in milliseconds
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CombatEffect:
      type: object
      required:
      - effect_type
      - target_id
      properties:
        target_id:
          type: string
          format: uuid
          description: Affected participant ID
        effect_type:
          type: string
          enum:
          - damage
          - healing
          - buff
          - debuff
          - knockback
          - stun
          - death
          description: Type of combat effect
        parameters:
          type: object
          description: Effect-specific parameters
        value:
          type: number
          format: float
          description: Effect magnitude
        duration_ms:
          type: integer
          minimum: 0
          description: Effect duration in milliseconds
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CombatState:
      type: object
      required:
      - session_id
      - timestamp
      - participants
      properties:
        session_id:
          type: string
          format: uuid
          description: Combat session ID
        status:
          type: string
          enum:
          - preparing
          - active
          - paused
          - completed
          - failed
          description: Current session status
        timestamp:
          type: string
          format: date-time
          description: State timestamp
        participants:
          type: array
          items:
            $ref: '#/components/schemas/CombatParticipant'
          description: Current participants
        active_effects:
          type: array
          items:
            $ref: '#/components/schemas/ActiveEffect'
          description: Currently active effects
        objectives:
          type: array
          items:
            $ref: '#/components/schemas/CombatObjective'
          description: Current objectives
        time_remaining_seconds:
          type: integer
          minimum: 0
          description: Time remaining in session
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ActiveEffect:
      type: object
      required:
      - effect_id
      - effect_type
      - target_id
      - remaining_ms
      properties:
        effect_id:
          type: string
          format: uuid
          description: Effect instance ID
        target_id:
          type: string
          format: uuid
          description: Affected participant ID
        effect_type:
          type: string
          enum:
          - buff
          - debuff
          - damage_over_time
          - healing_over_time
          description: Type of active effect
        magnitude:
          type: number
          format: float
          description: Effect magnitude per tick
        remaining_ms:
          type: integer
          minimum: 0
          description: Remaining duration in milliseconds
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CombatObjective:
      type: object
      required:
      - id
      - type
      - description
      - status
      properties:
        id:
          type: string
          format: uuid
          description: Objective ID
        description:
          type: string
          description: Objective description
        type:
          type: string
          enum:
          - eliminate_enemies
          - survive_time
          - collect_items
          - defend_position
          description: Objective type
        status:
          type: string
          enum:
          - pending
          - active
          - completed
          - failed
          description: Objective completion status
        progress:
          type: number
          format: float
          minimum: 0.0
          maximum: 100.0
          description: Completion progress percentage
        target_value:
          type: integer
          minimum: 0
          description: Target value to achieve
        current_value:
          type: integer
          minimum: 0
          description: Current progress value
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    Vector3:
      type: object
      required:
      - x
      - y
      - z
      properties:
        x:
          type: number
          format: float
          description: X coordinate
        y:
          type: number
          format: float
          description: Y coordinate
        z:
          type: number
          format: float
          description: Z coordinate
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
