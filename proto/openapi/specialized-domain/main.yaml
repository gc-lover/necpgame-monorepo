openapi: 3.0.3
info:
  title: Specialized domain API
  description: 'Consolidated specialized domain Domain API for NECPGAME.


    This domain consolidates all specialized functionality.

    '
  version: 1.0.0
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  contact:
    name: NECPGAME API Support
    url: https://necpgame.com/support
    email: api@necpgame.com
servers:
- url: http://localhost:8080/api/v1
  description: Development server
- url: https://api.necpgame.com/api/v1
  description: Production server
security:
- BearerAuth: []
tags:
- name: Specialized domain
  description: specialized domain domain endpoints
paths:
  # Quest System Integration - enterprise-grade quest management
  /api/v1/quests/health:
    $ref: './quests/main.yaml#/paths/~1api~1v1~1quests~1health'
  /api/v1/quests:
    $ref: './quests/main.yaml#/paths/~1api~1v1~1quests'
  /api/v1/quests/{quest_id}:
    $ref: './quests/main.yaml#/paths/~1api~1v1~1quests~1{quest_id}'
  /api/v1/quests/{quest_id}/accept:
    $ref: './quests/main.yaml#/paths/~1api~1v1~1quests~1{quest_id}~1accept'
  /api/v1/quests/{quest_id}/progress:
    $ref: './quests/main.yaml#/paths/~1api~1v1~1quests~1{quest_id}~1progress'
  /api/v1/quests/{quest_id}/complete:
    $ref: './quests/main.yaml#/paths/~1api~1v1~1quests~1{quest_id}~1complete'

  # Combat System Integration - enterprise-grade combat management
  /health:
    $ref: './combat/combat-system.yaml#/paths/~1health'
  /api/v1/combat/sessions:
    $ref: './combat/combat-system.yaml#/paths/~1api~1v1~1combat~1sessions'
  /api/v1/combat/sessions/{session_id}:
    $ref: './combat/combat-system.yaml#/paths/~1api~1v1~1combat~1sessions~1{session_id}'
  /api/v1/combat/sessions/{session_id}/actions:
    $ref: './combat/combat-system.yaml#/paths/~1api~1v1~1combat~1sessions~1{session_id}~1actions'
  /api/v1/combat/weapons:
    $ref: './combat/combat-system.yaml#/paths/~1api~1v1~1combat~1weapons'
  /api/v1/combat/abilities:
    $ref: './combat/combat-system.yaml#/paths/~1api~1v1~1combat~1abilities'

  # Combat Abilities Service Go Integration - enterprise-grade ability management (commented out due to operationId conflicts)
  # /combat/abilities/health: $ref: './combat/combat-abilities-service-go/main.yaml#/paths/~1health'
  # /combat/abilities: $ref: './combat/combat-abilities-service-go/main.yaml#/paths/~1combat~1abilities'
  # /combat/abilities/{ability_id}/cooldown: $ref: './combat/combat-abilities-service-go/main.yaml#/paths/~1combat~1abilities~1{ability_id}~1cooldown'
  # /combat/abilities/{ability_id}/synergies: $ref: './combat/combat-abilities-service-go/main.yaml#/paths/~1combat~1abilities~1{ability_id}~1synergies'
  # /combat/abilities/validate: $ref: './combat/combat-abilities-service-go/main.yaml#/paths/~1combat~1abilities~1validate'

  # Real-time Combat Integration (requires operationId fix in realtime-combat-service)
  # /realtime-combat/health: $ref: './combat/realtime-combat-service/main.yaml#/paths/~1health'
  # /realtime-combat/sessions: $ref: './combat/realtime-combat-service/main.yaml#/paths/~1sessions'

  /api/v1/specialized-domain/health:
    get:
      summary: specialized domain domain health check
      operationId: specialized-domainHealthCheck
      tags:
      - Specialized domain
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
          headers:
            Cache-Control:
              schema:
                type: string
                example: max-age=300, s-maxage=600
            ETag:
              schema:
                type: string
                example: '"-api-v1-specialized-domain-health-v1.0"'
            Content-Encoding:
              schema:
                type: string
                enum:
                - gzip
                - deflate
                - br
  /api/v1/specialized-domain/health/batch:
    post:
      summary: Batch health check for multiple domains
      operationId: batchHealthCheck
      tags:
      - System
      description: 'Performance optimization: Check multiple domain health in single request'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - domains
              properties:
                domains:
                  type: array
                  items:
                    type: string
                  maxItems: 10
      responses:
        '200':
          description: Batch health results
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/HealthResponse'
                  total_time_ms:
                    type: integer
                    description: Total processing time
  /api/v1/specialized-domain/health/ws:
    get:
      summary: Real-time health monitoring WebSocket
      operationId: healthWebSocket
      tags:
      - System
      description: Real-time health updates without polling
      responses:
        '101':
          description: WebSocket connection established
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    # Quest System Schemas Integration
    Quest:
      $ref: './quests/main.yaml#/components/schemas/Quest'
    QuestDetailResponse:
      $ref: './quests/main.yaml#/components/schemas/QuestDetailResponse'
    QuestListResponse:
      $ref: './quests/main.yaml#/components/schemas/QuestListResponse'
    QuestProgressResponse:
      $ref: './quests/main.yaml#/components/schemas/QuestProgressResponse'
    QuestCompletionResponse:
      $ref: './quests/main.yaml#/components/schemas/QuestCompletionResponse'
    QuestObjective:
      $ref: './quests/main.yaml#/components/schemas/QuestObjective'
    QuestReward:
      $ref: './quests/main.yaml#/components/schemas/QuestReward'

    # Combat Abilities Service Go Schemas Integration (commented out due to conflicts)
    # CombatAbilityHealthResponse: $ref: './combat/combat-abilities-service-go/main.yaml#/components/schemas/HealthResponse'
    # CombatAbilityError: $ref: './combat/combat-abilities-service-go/main.yaml#/components/schemas/Error'
    # CombatActivateAbilityRequest: $ref: './combat/combat-abilities-service-go/main.yaml#/components/schemas/ActivateAbilityRequest'
    # CombatActivateAbilityResponse: $ref: './combat/combat-abilities-service-go/main.yaml#/components/schemas/ActivateAbilityResponse'
    # CombatListAbilitiesResponse: $ref: './combat/combat-abilities-service-go/main.yaml#/components/schemas/ListAbilitiesResponse'
    # CombatAbilityCooldownResponse: $ref: './combat/combat-abilities-service-go/main.yaml#/components/schemas/AbilityCooldownResponse'
    # CombatAbilitySynergiesResponse: $ref: './combat/combat-abilities-service-go/main.yaml#/components/schemas/AbilitySynergiesResponse'
    # CombatValidateAbilityRequest: $ref: './combat/combat-abilities-service-go/main.yaml#/components/schemas/ValidateAbilityRequest'
    # CombatValidateAbilityResponse: $ref: './combat/combat-abilities-service-go/main.yaml#/components/schemas/ValidateAbilityResponse'
    # CombatAbilityInfo: $ref: './combat/combat-abilities-service-go/main.yaml#/components/schemas/AbilityInfo'
    # CombatSynergyInfo: $ref: './combat/combat-abilities-service-go/main.yaml#/components/schemas/SynergyInfo'


    HealthResponse:
      type: object
      properties:
        status:
          type: string
          example: healthy
          maxLength: 255
        domain:
          type: string
          example: specialized-domain
          maxLength: 255
        timestamp:
          type: string
          format: date-time
          maxLength: 255
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    Error:
      type: object
      properties:
        message:
          type: string
          example: Internal server error
          maxLength: 1000
        domain:
          type: string
          example: specialized-domain
          maxLength: 255
        timestamp:
          type: string
          format: date-time
          maxLength: 255
        code:
          type: integer
          example: 500
          format: int32
          minimum: 100
          maximum: 599
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    WebSocketHealthMessage:
      type: object
      required:
      - type
      - message_timestamp
      - health
      properties:
        type:
          type: string
          enum:
          - health_update
          - health_alert
          - service_down
        message_timestamp:
          type: string
          format: date-time
          description: Timestamp of the health message
        health:
          $ref: '#/components/schemas/HealthResponse'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
