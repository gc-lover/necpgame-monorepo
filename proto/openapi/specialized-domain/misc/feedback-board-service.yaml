# Issue: #1335
openapi: 3.0.3
info:
  title: Feedback Board Service API
  description: API для доски идей (публичные предложения)
  version: 1.0.0
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  contact:
    name: NECPGAME API Support
    email: api@necp.game

servers:
  - url: http://localhost:8090/api/v1/feedback
    description: Локальный сервер разработки
  - url: https://api.necp.game/api/v1/feedback
    description: Продакшен сервер

tags:
  - name: Feedback Board
    description: Доска идей

paths:
  /board:
    get:
      tags:
        - Feedback Board
      summary: Получить доску идей
      description: |
        Доска идей (публичные предложения).
        
        **Публичный доступ:** Не требует аутентификации.
        
        **Параметры фильтрации:**
        - type - тип обращения
        - category - категория
        - status - статус обращения
        - sort - сортировка (votes, date, status)
        - search - поиск по заголовку и описанию
        - limit, offset - пагинация
      operationId: getFeedbackBoard
      parameters:
        - name: type
          in: query
          schema:
            type: string
            enum: [ feature_request, bug_report, wishlist, feedback ]
        - name: category
          in: query
          schema:
            type: string
            enum: [ gameplay, balance, content, technical, lore, ui_ux, other ]
        - name: status
          in: query
          schema:
            type: string
            enum: [ pending_moderation, pending, in_review, assigned, in_progress, resolved, rejected, duplicate, merged ]
        - name: sort
          in: query
          schema:
            type: string
            enum: [ votes, date, status ]
            default: votes
        - name: search
          in: query
          schema:
            type: string
            description: Поиск по заголовку и описанию
        - $ref: '../../common-schemas.yaml#/components/parameters/Limit'
        - $ref: '../../common-schemas.yaml#/components/parameters/Offset'
      responses:
        '200':
          description: Доска идей
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedbackBoardResponse'
        '500':
          $ref: '../../common-schemas.yaml#/components/responses/InternalServerError'

components:
  schemas:
    FeedbackBoardResponse:
      allOf:
        - $ref: '../../common-schemas.yaml#/components/schemas/PaginationResponse'
        - type: object
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/FeedbackBoardItem'

    FeedbackBoardItem:
      allOf:
        - $ref: '../../common-schemas.yaml#/components/schemas/BaseEntityWithTimestamps'
        - type: object
          properties:
            type:
              type: string
              enum: [ feature_request, bug_report, wishlist, feedback ]
            category:
              type: string
              enum: [ gameplay, balance, content, technical, lore, ui_ux, other ]
            title:
              type: string
            description:
              type: string
            votes_count:
              type: integer
              minimum: 0
            status:
              type: string
              enum: [ pending_moderation, pending, in_review, assigned, in_progress, resolved, rejected, duplicate, merged ]
            github_issue_number:
              type: integer
              nullable: true
            github_issue_url:
              type: string
              format: uri
              nullable: true


