components:
  schemas:
    Error:
      type: object
      required:
        - error
        - message
      properties:
        error:
          type: string
          description: Error code
        message:
          type: string
          description: Human-readable error message
        details:
          type: object
          description: Additional error details
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    PlayerId:
      type: string
      format: uuid
      description: Player unique identifier
    RoomId:
      type: string
      format: uuid
      description: Voice room unique identifier
    SessionId:
      type: string
      format: uuid
      description: Voice session unique identifier
    VoiceRoom:
      type: object
      required:
        - id
        - name
        - host_id
        - max_participants
        - status
        - created_at
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: Voice room display name
        description:
          type: string
          maxLength: 500
          description: Optional room description
        status:
          type: string
          enum:
            - active
            - inactive
            - full
            - closed
          description: Room status
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        host_id:
          $ref: '#/components/schemas/PlayerId'
        id:
          $ref: '#/components/schemas/RoomId'
        game_session_id:
          $ref: '#/components/schemas/SessionId'
        participants:
          type: array
          items:
            $ref: '#/components/schemas/VoiceParticipant'
        max_participants:
          type: integer
          minimum: 2
          maximum: 50
          default: 10
          description: Maximum number of participants
        current_participants:
          type: integer
          minimum: 0
          description: Current number of participants
        is_spatial_audio:
          type: boolean
          default: false
          description: Whether spatial audio is enabled
        is_muted:
          type: boolean
          default: false
          description: Whether room is globally muted
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    VoiceParticipant:
      type: object
      required:
        - player_id
        - joined_at
        - is_muted
        - is_host
      properties:
        display_name:
          type: string
          maxLength: 50
          description: Player display name
        joined_at:
          type: string
          format: date-time
        player_id:
          $ref: '#/components/schemas/PlayerId'
        position:


        volume_level:
          type: number
          minimum: 0.0
          maximum: 1.0
          default: 1.0
          description: Participant volume level
        is_muted:
          type: boolean
          description: Whether participant is muted
        is_host:
          type: boolean
          description: Whether participant is room host
        is_deafened:
          type: boolean
          default: false
          description: Whether participant has deafened themselves
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    Vector3:
      type: object
      required:
        - x
        - y
        - z
      properties:
        x:
          type: number
          format: float
          description: X coordinate
        y:
          type: number
          format: float
          description: Y coordinate
        z:
          type: number
          format: float
          description: Z coordinate
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    WebRTCSignal:
      type: object
      required:
        - type
        - from_player_id
        - to_player_id
        - room_id
      properties:
        type:
          type: string
          enum:
            - offer
            - answer
            - ice_candidate
          description: WebRTC signal type
        timestamp:
          type: string
          format: date-time
        payload:
          type: object
          description: WebRTC signal payload (SDP, ICE candidate)
        from_player_id:
          $ref: '#/components/schemas/PlayerId'
        to_player_id:
          $ref: '#/components/schemas/PlayerId'
        room_id:
          $ref: '#/components/schemas/RoomId'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CreateRoomRequest:
      type: object
      required:
        - name
        - max_participants
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: Voice room name
        description:
          type: string
          maxLength: 500
          description: Optional room description
        game_session_id:
          $ref: '#/components/schemas/SessionId'
        max_participants:
          type: integer
          minimum: 2
          maximum: 50
          default: 10
        is_spatial_audio:
          type: boolean
          default: false
        is_private:
          type: boolean
          default: false
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    UpdateRoomRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
          maxLength: 500
        max_participants:
          type: integer
          minimum: 2
          maximum: 50
        is_spatial_audio:
          type: boolean
        is_muted:
          type: boolean
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    JoinRoomRequest:
      type: object
      properties:
        password:
          type: string
          description: Password for private rooms
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    RoomListResponse:
      type: object
      required:
        - rooms
        - total_count
        - page
        - page_size
      properties:
        rooms:
          type: array
          items:
            $ref: '#/components/schemas/VoiceRoom'
        total_count:
          type: integer
          minimum: 0
        page:
          type: integer
          minimum: 1
          default: 1
        page_size:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ParticipantUpdateRequest:
      type: object
      properties:
        volume_level:
          type: number
          minimum: 0.0
          maximum: 1.0
        is_muted:
          type: boolean
        is_deafened:
          type: boolean
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
