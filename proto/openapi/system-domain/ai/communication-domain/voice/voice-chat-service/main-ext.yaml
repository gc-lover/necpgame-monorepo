description: Invalid request
content:
  application/json:
    schema:
      $ref: '#/components/schemas/Error'
'401':
  description: Unauthorized
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/Error'
'404':
  description: Channel not found
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/Error'
/voice-chat/audio/proximity:
  post:
    tags:
    - Audio Streaming
    summary: Update player position for proximity audio
    operationId: updateProximity
    security:
    - BearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UpdateProximityRequest'
    responses:
      '200':
        description: Proximity updated
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProximityResponse'
      '400':
        description: Invalid request
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Error'
      '401':
        description: Unauthorized
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Error'
/voice-chat/tts/synthesize:
  post:
    tags:
    - Text-to-Speech
    summary: Convert text to speech
    operationId: synthesizeSpeech
    security:
    - BearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/SynthesizeSpeechRequest'
    responses:
      '200':
        description: Speech synthesized
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SynthesizeSpeechResponse'
      '400':
        description: Invalid request
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Error'
      '401':
        description: Unauthorized
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Error'
      '429':
        description: Rate limit exceeded
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Error'
/voice-chat/moderation/report:
  post:
    tags:
    - Moderation
    summary: Report voice chat abuse
    operationId: reportVoiceAbuse
    security:
    - BearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ReportVoiceAbuseRequest'
    responses:
      '200':
        description: Report submitted
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReportVoiceAbuseResponse'
      '400':
        description: Invalid request
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Error'
      '401':
        description: Unauthorized
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Error'
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    Error:
      type: object
      properties:
        message:
          type: string
        details:
          type: string
        code:
          type: integer
          format: int32
      required:
      - code
      - message
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    VoiceChannel:
      type: object
      properties:
        channel_id:
          type: string
          format: uuid
        name:
          type: string
        owner_id:
          type: string
        type:
          type: string
          enum:
          - global
          - guild
          - group
          - proximity
          - private
        settings:
          $ref: '#/components/schemas/ChannelSettings'
        is_public:
          type: boolean
        created_at:
          type: integer
          format: int64
        last_activity:
          type: integer
          format: int64
        participant_count:
          type: integer
        max_participants:
          type: integer
      required:
      - channel_id
      - name
      - type
      - owner_id
      - participant_count
      - max_participants
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ChannelSettings:
      type: object
      properties:
        codec:
          type: string
          enum:
          - opus
          - speex
          - g711
          default: opus
        proximity_radius:
          type: number
          format: float
          default: 50.0
        echo_cancellation:
          type: boolean
          default: true
        voice_activity_detection:
          type: boolean
          default: true
        noise_suppression:
          type: boolean
          default: true
        bitrate:
          type: integer
          minimum: 8000
          maximum: 128000
          default: 64000
      required:
      - proximity_radius
      - codec
      - bitrate
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CreateChannelRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
          pattern: ^[a-zA-Z0-9._-]+$
        type:
          type: string
          enum:
          - global
          - guild
          - group
          - proximity
          - private
          default: group
        settings:
          $ref: '#/components/schemas/ChannelSettings'
        is_public:
          type: boolean
          default: true
        max_participants:
          type: integer
          minimum: 2
          maximum: 1000
          default: 50
      required:
      - name
      - type
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CreateChannelResponse:
      type: object
      properties:
        channel_id:
          type: string
          format: uuid
        name:
          type: string
        type:
          type: string
        websocket_url:
          type: string
        stun_servers:
          type: array
          items:
            type: string
        turn_servers:
          type: array
          items:
            type: string
        created_at:
          type: integer
          format: int64
      required:
      - channel_id
      - name
      - type
      - websocket_url
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ListChannelsResponse:
      type: object
      properties:
        channels:
          type: array
          items:
            $ref: '#/components/schemas/VoiceChannel'
        total_count:
          type: integer
      required:
      - channels
      - total_count
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    GetChannelResponse:
      type: object
      properties:
        channel:
          $ref: '#/components/schemas/VoiceChannel'
        participants:
          type: array
          items:
            $ref: '#/components/schemas/ChannelParticipant'
      required:
      - channel
      - participants
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ChannelParticipant:
      type: object
      properties:
        user_id:
          type: string
        display_name:
          type: string
        is_muted:
          type: boolean
        is_deafened:
          type: boolean
        joined_at:
          type: integer
          format: int64
      required:
      - user_id
      - display_name
      - is_muted
      - is_deafened
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    UpdateChannelRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        settings:
          $ref: '#/components/schemas/ChannelSettings'
        is_public:
          type: boolean
        max_participants:
          type: integer
          minimum: 2
          maximum: 1000
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    UpdateChannelResponse:
      type: object
      properties:
        channel_id:
          type: string
          format: uuid
        updated_fields:
          type: array
          items:
            type: string
        updated_at:
          type: integer
          format: int64
      required:
      - channel_id
      - updated_fields
      - updated_at
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    JoinChannelRequest:
      type: object
      properties:
        user_id:
          type: string
        mute_on_join:
          type: boolean
          default: false
        deafen_on_join:
          type: boolean
          default: false
      required:
      - user_id
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    JoinChannelResponse:
      type: object
      properties:
        channel_id:
          type: string
          format: uuid
        user_id:
          type: string
        websocket_url:
          type: string
        session_token:
          type: string
        joined_at:
          type: integer
          format: int64
      required:
      - channel_id
      - user_id
      - websocket_url
      - session_token
      - joined_at
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    LeaveChannelResponse:
      type: object
      properties:
        channel_id:
          type: string
          format: uuid
        user_id:
          type: string
        left_at:
          type: integer
          format: int64
      required:
      - channel_id
      - user_id
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
