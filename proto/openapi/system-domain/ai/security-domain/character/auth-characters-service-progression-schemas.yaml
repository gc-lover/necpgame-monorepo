components:
  schemas:
    CharacterProgression:
      type: object
      required:
      - character_id
      - level
      - experience
      - experience_to_next_level
      - attribute_points_available
      properties:
        character_id:
          type: string
          format: uuid
        skills:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/SkillInfo'
        progression_stats:
          type: object
          properties:
            total_experience_gained:
              type: integer
            levels_gained:
              type: integer
            attributes_distributed:
              type: integer
            skills_upgraded:
              type: integer
        attributes:
          $ref: '#/components/schemas/CharacterAttributes'
        level:
          type: integer
          minimum: 1
        experience:
          type: integer
          minimum: 0
        experience_to_next_level:
          type: integer
          minimum: 0
        attribute_points_available:
          type: integer
          minimum: 0
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    SkillInfo:
      type: object
      required:
      - level
      - experience
      - experience_to_next_level
      properties:
        level:
          type: integer
          minimum: 0
        experience:
          type: integer
          minimum: 0
        experience_to_next_level:
          type: integer
          minimum: 0
        max_level:
          type: integer
        is_unlocked:
          type: boolean
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    GrantExperienceRequest:
      type: object
      required:
      - amount
      properties:
        source_id:
          type: string
          format: uuid
        source:
          type: string
          enum:
          - quest_completion
          - combat_victory
          - exploration
          - achievement
          - admin_grant
        multiplier:
          type: number
          minimum: 1.0
          default: 1.0
        amount:
          type: integer
          minimum: 1
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ExperienceGrantResult:
      type: object
      required:
      - experience_granted
      - new_experience_total
      - leveled_up
      properties:
        level_up_rewards:
          type: array
          items:
            type: object
            properties:
              reward_type:
                type: string
              reward_amount:
                type: integer
        experience_granted:
          type: integer
        new_experience_total:
          type: integer
        new_level:
          type: integer
        leveled_up:
          type: boolean
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    UpgradeSkillRequest:
      type: object
      required:
      - skill_name
      properties:
        skill_name:
          type: string
        levels_to_upgrade:
          type: integer
          minimum: 1
          default: 1
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    SkillUpgradeResult:
      type: object
      required:
      - skill_name
      - new_level
      - attribute_points_spent
      properties:
        skill_name:
          type: string
        skill_bonuses:
          type: object
          additionalProperties: true
        old_level:
          type: integer
        new_level:
          type: integer
        attribute_points_spent:
          type: integer
        experience_gained:
          type: integer
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    DistributeAttributesRequest:
      type: object
      required:
      - attributes
      properties:
        attributes:
          type: object
          properties:
            strength:
              type: integer
              minimum: 0
            dexterity:
              type: integer
              minimum: 0
            constitution:
              type: integer
              minimum: 0
            intelligence:
              type: integer
              minimum: 0
            reflexes:
              type: integer
              minimum: 0
            charisma:
              type: integer
              minimum: 0
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    AttributeDistributionResult:
      type: object
      required:
      - attributes_distributed
      - attribute_points_remaining
      properties:
        stat_bonuses_applied:
          type: object
          additionalProperties:
            type: number
        attributes_distributed:
          $ref: '#/components/schemas/CharacterAttributes'
        attribute_points_spent:
          type: integer
        attribute_points_remaining:
          type: integer
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
