components:
  schemas:
    PlayerDeathEvent:
      allOf:
      - $ref: '#/components/schemas/BaseEvent'
      - type: object
        required:
        - victim_id
        - killer_id
        - weapon_used
        - damage_dealt
        properties:
          event_type:
            type: string
            enum:
            - player_death
          victim_id:
            type: string
            format: uuid
            description: Player who died
          killer_id:
            type: string
            format: uuid
            description: Player who caused the death
          weapon_used:
            type: string
            format: uuid
            description: Weapon item used
          damage_dealt:
            type: integer
            minimum: 0
            description: Damage dealt in final hit
          location:
            $ref: '#/components/schemas/Vector3'
            description: Death location coordinates
          zone_id:
            type: string
            format: uuid
            description: Zone where death occurred
          is_headshot:
            type: boolean
            description: Whether death was caused by headshot
    AbilityUsedEvent:
      allOf:
      - $ref: '#/components/schemas/BaseEvent'
      - type: object
        required:
        - player_id
        - ability_id
        - ability_name
        properties:
          event_type:
            type: string
            enum:
            - ability_used
          player_id:
            type: string
            format: uuid
            description: Player who used ability
          ability_id:
            type: string
            format: uuid
            description: Ability identifier
          ability_name:
            type: string
            description: Ability display name
          cooldown:
            type: number
            format: float
            description: Ability cooldown in seconds
          mana_cost:
            type: integer
            minimum: 0
            description: Mana cost of ability
          location:
            $ref: '#/components/schemas/Vector3'
            description: Location where ability was used
    DamageDealtEvent:
      allOf:
      - $ref: '#/components/schemas/BaseEvent'
      - type: object
        required:
        - attacker_id
        - target_id
        - damage_amount
        - damage_type
        properties:
          event_type:
            type: string
            enum:
            - damage_dealt
          attacker_id:
            type: string
            format: uuid
            description: Player who dealt damage
          target_id:
            type: string
            format: uuid
            description: Player who received damage
          damage_amount:
            type: integer
            minimum: 0
            description: Amount of damage dealt
          damage_type:
            type: string
            enum:
            - physical
            - energy
            - chemical
            - thermal
            - cyberware
            description: Type of damage dealt
          weapon_used:
            type: string
            format: uuid
            description: Weapon used to deal damage
          is_critical:
            type: boolean
            description: Whether damage was critical
          distance:
            type: number
            format: float
            description: Distance between attacker and target
    Vector3:
      type: object
      required:
      - x
      - y
      - z
      properties:
        x:
          type: number
          format: float
          description: X coordinate
        y:
          type: number
          format: float
          description: Y coordinate
        z:
          type: number
          format: float
          description: Z coordinate
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large â†’ small). Expected memory savings: 30-50%.'
