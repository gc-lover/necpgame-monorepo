# Issue: #2216 - Kafka Player Event Schemas
components:
  schemas:

    # ============================================================================
    # BASE EVENT SCHEMA
    # ============================================================================

    BaseEvent:
      type: object
      required:
        - event_id
        - event_type
        - timestamp
        - source
      properties:
        event_id:
          type: string
          format: uuid
          description: Unique event identifier
        event_type:
          type: string
          description: Event type identifier
        timestamp:
          type: string
          format: date-time
          description: Event timestamp
        source:
          type: string
          description: Service or component that generated the event
        correlation_id:
          type: string
          format: uuid
          description: Correlation ID for event tracing
        player_id:
          type: string
          format: uuid
          description: Player associated with the event

    # ============================================================================
    # PLAYER EVENTS
    # ============================================================================

    PlayerLoginEvent:
      allOf:
        - $ref: '#/components/schemas/BaseEvent'
        - type: object
          required:
            - player_id
            - session_id
            - login_method
          properties:
            event_type:
              type: string
              enum: [ player_login ]
            player_id:
              type: string
              format: uuid
              description: Player who logged in
            session_id:
              type: string
              format: uuid
              description: Game session identifier
            login_method:
              type: string
              enum: [ password, oauth, guest ]
              description: Authentication method used
            client_version:
              type: string
              description: Game client version
            platform:
              type: string
              enum: [ pc, console, mobile ]
              description: Platform type
            ip_address:
              type: string
              description: Client IP address
            user_agent:
              type: string
              description: Client user agent

    PlayerLogoutEvent:
      allOf:
        - $ref: '#/components/schemas/BaseEvent'
        - type: object
          required:
            - player_id
            - session_id
            - session_duration
          properties:
            event_type:
              type: string
              enum: [ player_logout ]
            player_id:
              type: string
              format: uuid
              description: Player who logged out
            session_id:
              type: string
              format: uuid
              description: Game session identifier
            session_duration:
              type: integer
              description: Session duration in seconds
            logout_reason:
              type: string
              enum: [ normal, timeout, kicked, banned ]
              description: Reason for logout

    PlayerLevelUpEvent:
      allOf:
        - $ref: '#/components/schemas/BaseEvent'
        - type: object
          required:
            - player_id
            - new_level
            - old_level
            - experience_gained
          properties:
            event_type:
              type: string
              enum: [ player_level_up ]
            player_id:
              type: string
              format: uuid
              description: Player who leveled up
            new_level:
              type: integer
              minimum: 1
              description: New player level
            old_level:
              type: integer
              minimum: 1
              description: Previous player level
            experience_gained:
              type: integer
              minimum: 0
              description: Experience points gained in this level up
            total_experience:
              type: integer
              minimum: 0
              description: Total experience points

    AchievementUnlockedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseEvent'
        - type: object
          required:
            - player_id
            - achievement_id
            - achievement_name
          properties:
            event_type:
              type: string
              enum: [ achievement_unlocked ]
            player_id:
              type: string
              format: uuid
              description: Player who unlocked achievement
            achievement_id:
              type: string
              format: uuid
              description: Achievement identifier
            achievement_name:
              type: string
              description: Achievement display name
            achievement_category:
              type: string
              enum: [ combat, exploration, social, economy, collection ]
              description: Achievement category
            points_awarded:
              type: integer
              minimum: 0
              description: Achievement points awarded
            rarity:
              type: string
              enum: [ common, uncommon, rare, epic, legendary ]
              description: Achievement rarity
