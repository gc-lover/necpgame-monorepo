components:
  schemas:
    # Основные сущности
    ClanWar:
      type: object
      description: Клановая война
      properties:
        id:
          type: string
          format: uuid
          description: Уникальный ID войны
        status:
          type: string
          enum: [ DECLARED, PREPARATION, ACTIVE, ENDING, ENDED ]
          description: Статус войны
        phase:
          type: string
          enum: [ PREPARATION, ACTIVE, ENDING ]
          description: Текущая фаза
        attackerClanId:
          type: string
          format: uuid
          description: ID атакующего клана
        defenderClanId:
          type: string
          format: uuid
          description: ID защищающегося клана
        winnerClanId:
          type: string
          format: uuid
          description: ID победившего клана
        attackerScore:
          type: integer
          description: Очки атакующего
        defenderScore:
          type: integer
          description: Очки защищающегося
        alliesAttacker:
          type: array
          items:
            type: string
            format: uuid
          description: Союзники атакующего
        alliesDefender:
          type: array
          items:
            type: string
            format: uuid
          description: Союзники защищающегося
        preparationStartedAt:
          type: string
          format: date-time
          description: Время начала фазы подготовки
        activeStartedAt:
          type: string
          format: date-time
          description: Время начала активной фазы
        endedAt:
          type: string
          format: date-time
          description: Время окончания войны
        createdAt:
          type: string
          format: date-time
          description: Время создания
        updatedAt:
          type: string
          format: date-time
          description: Время последнего обновления
      required:
        - id
        - status
        - attackerClanId
        - defenderClanId
        - createdAt

    Territory:
      type: object
      description: Территория для клановых войн
      properties:
        id:
          type: string
          format: uuid
          description: Уникальный ID территории
        name:
          type: string
          description: Название территории
        description:
          type: string
          description: Описание территории
        resourceType:
          type: string
          enum: [ ORE, ENERGY, DATA, MIXED ]
          description: Тип ресурсов на территории
        ownerClanId:
          type: string
          format: uuid
          description: ID владеющего клана
        isActive:
          type: boolean
          description: Активна ли территория для войн
        coordinates:
          $ref: "#/components/schemas/Coordinates"
        bonuses:
          type: array
          items:
            $ref: "#/components/schemas/TerritoryBonus"
          description: Бонусы территории
        createdAt:
          type: string
          format: date-time
          description: Время создания
        updatedAt:
          type: string
          format: date-time
          description: Время последнего обновления
      required:
        - id
        - name
        - resourceType
        - isActive

    Coordinates:
      type: object
      description: Координаты в игровом мире
      properties:
        x:
          type: number
          format: float
          description: X координата
        y:
          type: number
          format: float
          description: Y координата
        z:
          type: number
          format: float
          description: Z координата
      required:
        - x
        - y
        - z

    TerritoryBonus:
      type: object
      description: Бонус территории
      properties:
        type:
          type: string
          enum: [ RESOURCE_MULTIPLIER, DEFENSE_BONUS, ATTACK_BONUS, SCORE_MULTIPLIER ]
          description: Тип бонуса
        value:
          type: number
          format: float
          description: Значение бонуса
        description:
          type: string
          description: Описание бонуса
      required:
        - type
        - value

    PaginationInfo:
      type: object
      description: Информация о пагинации
      properties:
        limit:
          type: integer
          description: Размер страницы
        offset:
          type: integer
          description: Смещение
        hasNext:
          type: boolean
          description: Есть ли следующая страница
        hasPrev:
          type: boolean
          description: Есть ли предыдущая страница
      required:
        - limit
        - offset
        - hasNext
        - hasPrev

    Error:
      type: object
      description: Ошибка API
      properties:
        code:
          type: string
          description: Код ошибки
        message:
          type: string
          description: Сообщение об ошибке
        details:
          type: object
          description: Дополнительные детали ошибки
      required:
        - code
        - message

  responses:
    BadRequest:
      description: Неверный запрос
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"

    NotFound:
      description: Ресурс не найден
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"

    InternalServerError:
      description: Внутренняя ошибка сервера
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Error"
