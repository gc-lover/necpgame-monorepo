components:
  schemas:
    ClanWar:
      type: object
      description: 'Клановая война

        BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
      properties:
        id:
          type: string
          format: uuid
          description: Уникальный ID войны
        attackerClanId:
          type: string
          format: uuid
          description: ID атакующего клана
        defenderClanId:
          type: string
          format: uuid
          description: ID защищающегося клана
        winnerClanId:
          type: string
          format: uuid
          description: ID победившего клана
        status:
          type: string
          enum:
            - DECLARED
            - PREPARATION
            - ACTIVE
            - ENDING
            - ENDED
          description: Статус войны
        phase:
          type: string
          enum:
            - PREPARATION
            - ACTIVE
            - ENDING
          description: Текущая фаза
        preparationStartedAt:
          type: string
          format: date-time
          description: Время начала фазы подготовки
        activeStartedAt:
          type: string
          format: date-time
          description: Время начала активной фазы
        endedAt:
          type: string
          format: date-time
          description: Время окончания войны
        createdAt:
          type: string
          format: date-time
          description: Время создания
        updatedAt:
          type: string
          format: date-time
          description: Время последнего обновления
        alliesAttacker:
          type: array
          items:
            type: string
            format: uuid
          description: Союзники атакующего
        alliesDefender:
          type: array
          items:
            type: string
            format: uuid
          description: Союзники защищающегося
        attackerScore:
          type: integer
          description: Очки атакующего
        defenderScore:
          type: integer
          description: Очки защищающегося
      required:
        - id
        - status
        - attackerClanId
        - defenderClanId
        - createdAt
    Territory:
      type: object
      description: 'Территория для клановых войн

        BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
      properties:
        id:
          type: string
          format: uuid
          description: Уникальный ID территории
        ownerClanId:
          type: string
          format: uuid
          description: ID владеющего клана
        name:
          type: string
          description: Название территории
        description:
          type: string
          description: Описание территории
        resourceType:
          type: string
          enum:
            - ORE
            - ENERGY
            - DATA
            - MIXED
          description: Тип ресурсов на территории
        createdAt:
          type: string
          format: date-time
          description: Время создания
        updatedAt:
          type: string
          format: date-time
          description: Время последнего обновления
        coordinates:
          $ref: '#/components/schemas/Coordinates'
        bonuses:
          type: array
          items:
            $ref: '#/components/schemas/TerritoryBonus'
          description: Бонусы территории
        isActive:
          type: boolean
          description: Активна ли территория для войн
      required:
        - id
        - name
        - resourceType
        - isActive
    Coordinates:
      type: object
      description: 'Координаты в игровом мире

        BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
      properties:
        x:
          type: number
          format: float
          description: X координата
        y:
          type: number
          format: float
          description: Y координата
        z:
          type: number
          format: float
          description: Z координата
      required:
        - x
        - y
        - z
    TerritoryBonus:
      type: object
      description: 'Бонус территории

        BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
      properties:
        description:
          type: string
          description: Описание бонуса
        type:
          type: string
          enum:
            - RESOURCE_MULTIPLIER
            - DEFENSE_BONUS
            - ATTACK_BONUS
            - SCORE_MULTIPLIER
          description: Тип бонуса
        value:
          type: number
          format: float
          description: Значение бонуса
      required:
        - type
        - value
    PaginationInfo:
      type: object
      description: 'Информация о пагинации

        BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
      properties:
        limit:
          type: integer
          description: Размер страницы
        offset:
          type: integer
          description: Смещение
        hasNext:
          type: boolean
          description: Есть ли следующая страница
        hasPrev:
          type: boolean
          description: Есть ли предыдущая страница
      required:
        - limit
        - offset
        - hasNext
        - hasPrev
    Error:
      type: object
      description: 'Ошибка API

        BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
      properties:
        code:
          type: string
          description: Код ошибки
        message:
          type: string
          description: Сообщение об ошибке
        details:
          type: object
          description: Дополнительные детали ошибки
      required:
        - code
        - message
  responses:
    BadRequest:
      description: Неверный запрос
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    NotFound:
      description: Ресурс не найден
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    InternalServerError:
      description: Внутренняя ошибка сервера
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
