schema:
  $ref: common.yaml#/components/responses/TooManyRequests
'500':
  $ref: common.yaml#/components/responses/InternalServerError
/economy/analytics/alerts/{alertId}:
  get:
    tags:
    - Alerts
    summary: Get alert details
    operationId: getAlert
    security:
    - BearerAuth: []
    parameters:
    - name: alertId
      in: path
      required: true
      schema:
        type: string
        format: uuid
    responses:
      '200':
        description: Alert details
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AlertResponse'
      '403':
        $ref: common.yaml#/components/responses/Forbidden
      '404':
        $ref: common.yaml#/components/responses/NotFound
      '500':
        $ref: common.yaml#/components/responses/InternalServerError
  put:
    tags:
    - Alerts
    summary: Update alert
    operationId: updateAlert
    security:
    - BearerAuth: []
    parameters:
    - name: alertId
      in: path
      required: true
      schema:
        type: string
        format: uuid
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UpdateAlertRequest'
    responses:
      '200':
        description: Alert updated
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AlertResponse'
      '400':
        $ref: common.yaml#/components/responses/BadRequest
      '403':
        $ref: common.yaml#/components/responses/Forbidden
      '404':
        $ref: common.yaml#/components/responses/NotFound
      '500':
        $ref: common.yaml#/components/responses/InternalServerError
  delete:
    tags:
    - Alerts
    summary: Delete alert
    operationId: deleteAlert
    security:
    - BearerAuth: []
    parameters:
    - name: alertId
      in: path
      required: true
      schema:
        type: string
        format: uuid
    responses:
      '200':
        description: Alert deleted
        content:
          application/json:
            schema:
              $ref: common.yaml#/components/schemas/SuccessResponse
      '403':
        $ref: common.yaml#/components/responses/Forbidden
      '404':
        $ref: common.yaml#/components/responses/NotFound
      '500':
        $ref: common.yaml#/components/responses/InternalServerError
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    ChartDataResponse:
      type: object
      properties:
        asset_type:
          type: string
        asset_id:
          type: string
        timeframe:
          type: string
        data_type:
          type: string
        metadata:
          $ref: '#/components/schemas/ChartMetadata'
        data:
          type: array
          items:
            $ref: '#/components/schemas/ChartDataPoint'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ChartDataPoint:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
        volume:
          type: integer
        open:
          type: number
          format: float
        high:
          type: number
          format: float
        low:
          type: number
          format: float
        close:
          type: number
          format: float
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ChartMetadata:
      type: object
      properties:
        data_quality:
          type: string
          enum:
          - realtime
          - delayed
          - historical
        last_updated:
          type: string
          format: date-time
        total_points:
          type: integer
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    TechnicalIndicatorsResponse:
      type: object
      properties:
        asset_type:
          type: string
        asset_id:
          type: string
        indicators:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/IndicatorData'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    IndicatorData:
      type: object
      properties:
        name:
          type: string
        values:
          type: array
          items:
            type: number
            format: float
        signals:
          type: array
          items:
            $ref: '#/components/schemas/IndicatorSignal'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    IndicatorSignal:
      type: object
      properties:
        type:
          type: string
          enum:
          - buy
          - sell
          - neutral
        timestamp:
          type: string
          format: date-time
        strength:
          type: number
          minimum: 0
          maximum: 1
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    MarketSentimentResponse:
      type: object
      properties:
        last_updated:
          type: string
          format: date-time
        sector_sentiment:
          type: object
          additionalProperties:
            type: number
            minimum: -1
            maximum: 1
        overall_sentiment:
          type: number
          minimum: -1
          maximum: 1
          description: -1 (bearish) to 1 (bullish)
        fear_greed_index:
          type: integer
          minimum: 0
          maximum: 100
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    SentimentHeatmapResponse:
      type: object
      properties:
        sector:
          type: string
        metric:
          type: string
        heatmap_data:
          type: array
          items:
            $ref: '#/components/schemas/HeatmapPoint'
        color_scale:
          type: array
          items:
            type: string
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    HeatmapPoint:
      type: object
      properties:
        label:
          type: string
        x:
          type: number
        y:
          type: number
        value:
          type: number
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    PortfolioAnalyticsResponse:
      type: object
      properties:
        risk_metrics:
          $ref: '#/components/schemas/RiskMetrics'
        assets:
          type: array
          items:
            $ref: '#/components/schemas/PortfolioAsset'
        performance_chart:
          type: array
          items:
            $ref: '#/components/schemas/PortfolioValuePoint'
        portfolio_value:
          type: number
          format: float
        total_return:
          type: number
          format: float
        daily_change:
          type: number
          format: float
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    PortfolioAsset:
      type: object
      properties:
        asset_type:
          type: string
        asset_id:
          type: string
        quantity:
          type: number
        current_price:
          type: number
          format: float
        total_value:
          type: number
          format: float
        gain_loss:
          type: number
          format: float
        gain_loss_percent:
          type: number
          format: float
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    PortfolioValuePoint:
      type: object
      properties:
        date:
          type: string
          format: date
        value:
          type: number
          format: float
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    RiskMetrics:
      type: object
      properties:
        sharpe_ratio:
          type: number
          format: float
        volatility:
          type: number
          format: float
        max_drawdown:
          type: number
          format: float
        beta:
          type: number
          format: float
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    PortfolioPerformanceResponse:
      type: object
      properties:
        risk_metrics:
          $ref: '#/components/schemas/RiskMetrics'
        total_trades:
          type: integer
        winning_trades:
          type: integer
        losing_trades:
          type: integer
        win_rate:
          type: number
          format: float
        profit_factor:
          type: number
          format: float
        average_win:
          type: number
          format: float
        average_loss:
          type: number
          format: float
        largest_win:
          type: number
          format: float
        largest_loss:
          type: number
          format: float
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    UserAlertsResponse:
      type: object
      properties:
        alerts:
          type: array
          items:
            $ref: '#/components/schemas/Alert'
        total_count:
          type: integer
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CreateAlertRequest:
      type: object
      required:
      - name
      - condition
      - asset_type
      - asset_id
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        asset_id:
          type: string
        asset_type:
          type: string
          enum:
          - stock
          - currency
          - item
          - real_estate
          - vehicle
        condition:
          $ref: '#/components/schemas/AlertCondition'
        notification_channels:
          type: array
          items:
            type: string
            enum:
            - push
            - email
            - in_game
          default:
          - push
        active:
          type: boolean
          default: true
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    UpdateAlertRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        condition:
          $ref: '#/components/schemas/AlertCondition'
        notification_channels:
          type: array
          items:
            type: string
            enum:
            - push
            - email
            - in_game
        active:
          type: boolean
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    AlertResponse:
      type: object
      properties:
        alert:
          $ref: '#/components/schemas/Alert'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    Alert:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        asset_type:
          type: string
        asset_id:
          type: string
        status:
          type: string
          enum:
          - active
          - triggered
          - expired
          - paused
        created_at:
          type: string
          format: date-time
        last_triggered:
          type: string
          format: date-time
        condition:
          $ref: '#/components/schemas/AlertCondition'
        notification_channels:
          type: array
          items:
            type: string
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    AlertCondition:
      type: object
      required:
      - type
      properties:
        type:
          type: string
          enum:
          - price_above
          - price_below
          - price_change
          - volume_spike
          - indicator_signal
          - custom_event
        comparison_operator:
          type: string
          enum:
          - gt
          - lt
          - gte
          - lte
          - eq
        timeframe:
          type: string
          enum:
          - 1m
          - 5m
          - 15m
          - 1h
          - 4h
          - 1d
          - 1w
        additional_params:
          type: object
        value:
          type: number
          format: float
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
