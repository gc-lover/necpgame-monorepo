openapi: 3.0.3
info:
  title: System domain API
  description: 'Consolidated system domain Domain API for NECPGAME.


    This domain consolidates all system functionality.

    '
  version: 1.0.0
  contact:
    name: NECPGAME API Support
    url: https://necpgame.com/support
    email: api@necpgame.com
servers:
- url: http://localhost:8080/api/v1
  description: Development server
- url: https://api.necpgame.com/api/v1
  description: Production server
security:
- BearerAuth: []
tags:
- name: System domain
  description: system domain domain endpoints
paths:
  /api/v1/system-domain/health:
    get:
      summary: system domain domain health check
      operationId: system-domainHealthCheck
      tags:
      - System domain
      parameters:
      - name: Accept-Encoding
        in: header
        schema:
          type: string
          enum:
          - gzip
          - deflate
          - br
      responses:
        '200':
          description: OK
          headers:
            Cache-Control:
              schema:
                type: string
                example: max-age=300, s-maxage=600
            Etag:
              schema:
                type: string
                example: '"health-v1.0"'
            Content-Encoding:
              schema:
                type: string
                enum:
                - gzip
                - deflate
                - br
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
  /api/v1/system-domain/health/batch:
    post:
      summary: Batch health check for multiple domains
      operationId: system-domainBatchHealthCheck
      tags:
      - System domain
      description: 'Performance optimization: Check multiple domain health in single
        request.

        Reduces N HTTP calls to 1 call. Critical for microservice orchestration.

        '
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - domains
              properties:
                domains:
                  type: array
                  items:
                    type: string
                    enum:
                    - system-domain
                    - social-domain
                    - economy-domain
                    - world-domain
                  maxItems: 10
      responses:
        '200':
          description: Batch health results
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/HealthResponse'
                  total_time_ms:
                    type: integer
                    description: Total processing time in milliseconds
          headers:
            Content-Encoding:
              schema:
                type: string
                enum:
                - gzip
                - deflate
                - br
  /api/v1/system-domain/health/ws:
    get:
      summary: Real-time health monitoring WebSocket
      operationId: system-domainHealthWebSocket
      tags:
      - System domain
      description: 'Performance optimization: Real-time health updates without polling.

        Eliminates periodic HTTP requests, reduces server load by ~90%.

        '
      parameters:
      - name: domains
        in: query
        schema:
          type: array
          items:
            type: string
            enum:
            - system-domain
            - social-domain
            - economy-domain
            - world-domain
      responses:
        '101':
          description: WebSocket connection established
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WebSocketHealthMessage'
          headers:
            Cache-Control:
              schema:
                type: string
                example: max-age=300, s-maxage=600
            ETag:
              schema:
                type: string
                example: '"-api-v1-system-domain-health-ws-v1.0"'
            Content-Encoding:
              schema:
                type: string
                enum:
                - gzip
                - deflate
                - br

  # WebSocket streaming service endpoints included via bundling
  # Note: WebSocket streaming service defines its own paths
  # This main file serves as domain entry point

  # Circuit breaker service endpoints included via bundling
  # Note: Circuit breaker service defines its own paths
  # This main file serves as domain entry point

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    HealthResponse:
      type: object
      required:
      - status
      - timestamp
      properties:
        timestamp:
          type: string
          format: date-time
          example: '2024-01-01T12:00:00Z'
          maxLength: 255
        domain:
          type: string
          example: system-domain
          maxLength: 50
        status:
          type: string
          enum:
          - healthy
          - degraded
          - unhealthy
          example: healthy
          maxLength: 255
    Error:
      type: object
      required:
      - code
      - message
      properties:
        message:
          type: string
          maxLength: 256
          example: Internal server error
        code:
          type: integer
          format: int32
          minimum: 100
          maximum: 599
          example: 500
    WebSocketHealthMessage:
      type: object
      required:
      - type
      - timestamp
      - health
      properties:
        timestamp:
          type: string
          format: date-time
          maxLength: 255
        type:
          type: string
          enum:
          - health_update
          - health_alert
          - service_down
          example: health_update
          maxLength: 255
        message_timestamp:
          type: string
          format: date-time
          description: Timestamp of the health message
          maxLength: 1000
        health:
          $ref: '#/components/schemas/HealthResponse'

    # WebSocket streaming service schemas included via bundling
    # Note: WebSocket streaming service defines its own schemas
    # Common domain schemas defined here

    # Circuit breaker service schemas included via bundling
    # Note: Circuit breaker service defines its own schemas
    # Common domain schemas defined here

    # Rate limiting service schemas included via bundling
    # Note: Rate limiting service defines its own schemas
    # Common domain schemas defined here
          type: string
          example: Internal server error
          maxLength: 255
        domain:
          type: string
          example: system-domain
          maxLength: 255
