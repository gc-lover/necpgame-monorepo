# Bandwidth Analysis schemas
# Bandwidth utilization, forecasting and cost optimization schemas

BandwidthUtilizationAnalysis:
  type: object
  required:
    - current_utilization
    - forecast_data
    - capacity_analysis
    - cost_optimization
  properties:
    current_utilization:
      $ref: '#/components/schemas/BandwidthUtilization'
    forecast_data:
      type: array
      items:
        $ref: '#/components/schemas/BandwidthForecast'
    capacity_analysis:
      $ref: '#/components/schemas/CapacityAnalysis'
    cost_optimization:
      type: array
      items:
        $ref: '#/components/schemas/CostOptimizationRecommendation'

# BACKEND NOTE: Bandwidth analysis optimized for time-series forecasting calculations
BandwidthUtilization:
  type: object
  required:
    - current_usage_mbps
    - peak_usage_mbps
    - average_usage_mbps
    - utilization_percentage
  properties:
    current_usage_mbps:
      type: number
      format: float
      description: Current bandwidth usage in Mbps
      example: 8500
    peak_usage_mbps:
      type: number
      format: float
      description: Peak bandwidth usage in Mbps
      example: 12000
    average_usage_mbps:
      type: number
      format: float
      description: Average bandwidth usage in Mbps
      example: 7200
    utilization_percentage:
      type: number
      format: float
      description: Current utilization percentage
      example: 85.0

BandwidthForecast:
  type: object
  required:
    - forecast_date
    - predicted_usage_mbps
    - confidence_interval
  properties:
    forecast_date:
      type: string
      format: date
      description: Date of forecast
    predicted_usage_mbps:
      type: number
      format: float
      description: Predicted bandwidth usage in Mbps
    confidence_interval:
      type: object
      properties:
        lower_bound:
          type: number
          format: float
        upper_bound:
          type: number
          format: float

CapacityAnalysis:
  type: object
  required:
    - current_capacity_mbps
    - available_capacity_mbps
    - time_to_capacity_exhaustion
    - bottleneck_identification
  properties:
    current_capacity_mbps:
      type: number
      format: float
      description: Total available capacity in Mbps
      example: 15000
    available_capacity_mbps:
      type: number
      format: float
      description: Remaining available capacity in Mbps
      example: 6500
    time_to_capacity_exhaustion:
      type: integer
      description: Days until capacity exhaustion at current growth rate
      example: 45
    bottleneck_identification:
      type: array
      items:
        type: string
      description: Identified bottleneck points

CostOptimizationRecommendation:
  type: object
  required:
    - recommendation
    - potential_savings
    - implementation_complexity
  properties:
    recommendation:
      type: string
      description: Cost optimization recommendation
    potential_savings:
      type: number
      format: float
      description: Potential monthly savings in USD
    implementation_complexity:
      type: string
      enum: [low, medium, high]
      description: Implementation complexity level
