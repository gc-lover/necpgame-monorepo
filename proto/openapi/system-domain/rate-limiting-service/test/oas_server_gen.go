// Code generated by ogen, DO NOT EDIT.

package api

import (
	"context"
)

// Handler handles operations described by OpenAPI v3 specification.
type Handler interface {
	// BlacklistEntity implements blacklistEntity operation.
	//
	// Manually add IP address or service identifier to blacklist.
	// **BACKEND NOTE:** Immediate blocking across all services.
	// Administrative override for emergency situations.
	//
	// POST /abuse/blacklist
	BlacklistEntity(ctx context.Context, req *BlacklistRequest) (BlacklistEntityRes, error)
	// CreateRateLimit implements createRateLimit operation.
	//
	// Creates a new rate limit rule for API protection.
	// **BACKEND NOTE:** Validates rule configuration, registers with Redis, updates service mesh.
	// Rule becomes active immediately with configured parameters.
	//
	// POST /rate-limits
	CreateRateLimit(ctx context.Context, req *CreateRateLimitRequest) (CreateRateLimitRes, error)
	// DeleteRateLimit implements deleteRateLimit operation.
	//
	// Removes a rate limit rule from the system.
	// **BACKEND NOTE:** Cleans up Redis state, unregisters from service mesh.
	// Use with caution - may expose service to abuse.
	//
	// DELETE /rate-limits/{rule_id}
	DeleteRateLimit(ctx context.Context, params DeleteRateLimitParams) (DeleteRateLimitRes, error)
	// GetBlacklist implements getBlacklist operation.
	//
	// Retrieve current blacklist entries with optional filtering.
	//
	// GET /abuse/blacklist
	GetBlacklist(ctx context.Context, params GetBlacklistParams) (*BlacklistResponse, error)
	// GetRateLimit implements getRateLimit operation.
	//
	// Retrieve detailed information about a specific rate limit rule.
	//
	// GET /rate-limits/{rule_id}
	GetRateLimit(ctx context.Context, params GetRateLimitParams) (GetRateLimitRes, error)
	// GetRateLimitStats implements getRateLimitStats operation.
	//
	// Retrieve current rate limiting statistics and blocked requests.
	//
	// GET /monitoring/rate-limits
	GetRateLimitStats(ctx context.Context, params GetRateLimitStatsParams) (GetRateLimitStatsRes, error)
	// GetUserQuota implements getUserQuota operation.
	//
	// Retrieve current quota usage and limits for a user.
	//
	// GET /quotas/{user_id}
	GetUserQuota(ctx context.Context, params GetUserQuotaParams) (GetUserQuotaRes, error)
	// ListRateLimits implements listRateLimits operation.
	//
	// Retrieve a paginated list of rate limit rules with optional filtering.
	//
	// GET /rate-limits
	ListRateLimits(ctx context.Context, params ListRateLimitsParams) (*RateLimitListResponse, error)
	// RateLimitingHealth implements rateLimitingHealth operation.
	//
	// Rate limiting service health check.
	//
	// GET /health
	RateLimitingHealth(ctx context.Context) (RateLimitingHealthRes, error)
	// RemoveFromBlacklist implements removeFromBlacklist operation.
	//
	// Remove an entity from the blacklist.
	//
	// DELETE /abuse/blacklist/{entry_id}
	RemoveFromBlacklist(ctx context.Context, params RemoveFromBlacklistParams) (RemoveFromBlacklistRes, error)
	// ReportAbuse implements reportAbuse operation.
	//
	// Report suspicious activity for automated analysis and potential blocking.
	// **BACKEND NOTE:** Triggers automated analysis, may result in temporary blocks.
	// Used by services to report potential DDoS or abuse patterns.
	//
	// POST /abuse/report
	ReportAbuse(ctx context.Context, req *AbuseReport) (ReportAbuseRes, error)
	// UpdateRateLimit implements updateRateLimit operation.
	//
	// Updates rate limit rule configuration (limits, algorithms, etc.).
	// **BACKEND NOTE:** Validates new configuration, applies changes atomically.
	// May trigger traffic redistribution if limits are modified.
	//
	// PUT /rate-limits/{rule_id}
	UpdateRateLimit(ctx context.Context, req *UpdateRateLimitRequest, params UpdateRateLimitParams) (UpdateRateLimitRes, error)
	// UpdateUserQuota implements updateUserQuota operation.
	//
	// Updates quota limits for a specific user.
	// **BACKEND NOTE:** Validates new limits, applies changes immediately.
	// May trigger notifications if limits are reduced significantly.
	//
	// PUT /quotas/{user_id}
	UpdateUserQuota(ctx context.Context, req *UpdateQuotaRequest, params UpdateUserQuotaParams) (UpdateUserQuotaRes, error)
}

// Server implements http server based on OpenAPI v3 specification and
// calls Handler to handle requests.
type Server struct {
	h   Handler
	sec SecurityHandler
	baseServer
}

// NewServer creates new Server.
func NewServer(h Handler, sec SecurityHandler, opts ...ServerOption) (*Server, error) {
	s, err := newServerConfig(opts...).baseServer()
	if err != nil {
		return nil, err
	}
	return &Server{
		h:          h,
		sec:        sec,
		baseServer: s,
	}, nil
}
