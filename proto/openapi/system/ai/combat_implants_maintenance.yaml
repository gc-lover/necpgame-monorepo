openapi: 3.0.3
info:
  title: Combat Implants Maintenance Service API
  description: 'API для обслуживания и кастомизации имплантов в NECPGAME.

    **Основные возможности:**

    - Ремонт повреждённых имплантов

    - Улучшение (апгрейды)

    - Модификации

    - Визуальная кастомизация

    **Долговечность:**

    - Износ со временем

    - Повреждения от EMP и критического урона

    - Временные отключения при низкой прочности

    - Деградация усиливает риск киберпсихоза

    **Способы ремонта:**

    - NPC Ripperdoc

    - Crafting

    - Emergency Kit

    **Улучшения:**

    - Повышение характеристик до потолка

    - Требуют компоненты и навыки

    **Модификации:**

    - Аффиксы и перераспределение статов

    - Усиление синергий с экипировкой

    **Визуализация:**

    - Режимы видимости (full, partial, hidden)

    - Кастомизация цветов и эффектов

    - Брендовые стили

    '
  version: 1.0.0
  license:
    name: Proprietary
    url: https://necpgame.com/license
  contact:
    name: NECPGAME API Support
    url: https://necpgame.com/support
    email: api@necpgame.com
servers:
- url: http://localhost:8083/api/v1
  description: Gameplay Service (локальная разработка)
- url: https://gameplay.necpgame.com/api/v1
  description: Gameplay Service (продакшн)
tags:
- name: Repair
  description: Ремонт
- name: Upgrades
  description: Улучшения
- name: Modifications
  description: Модификации
- name: Visuals
  description: Визуализация
paths:
  /combat/implants/repair:
    post:
      tags:
      - Repair
      summary: Ремонт импланта
      description: 'Ремонтирует повреждённый имплант.

        **Способы:**

        - NPC Ripperdoc - полный ремонт, требует посещения

        - Crafting - частичный ремонт, требует компоненты

        - Emergency Kit - быстрый ремонт, ограниченная эффективность

        '
      operationId: repairImplant
      security:
      - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RepairRequest'
      responses:
        '200':
          description: Ремонт выполнен
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RepairResult'
        '400':
          $ref: ../../../../common-schemas.yaml#/components/responses/BadRequest
        '401':
          $ref: ../../../../common-schemas.yaml#/components/responses/Unauthorized
        '500':
          $ref: ../../../../common-schemas.yaml#/components/responses/InternalServerError
  /combat/implants/upgrade:
    post:
      tags:
      - Upgrades
      summary: Улучшить имплант
      description: 'Улучшает характеристики импланта.

        **Улучшения:**

        - Повышение базовых характеристик

        - Увеличение потолка статов

        - Требуют компоненты и навыки

        - Ограничены редкостью импланта

        '
      operationId: upgradeImplant
      security:
      - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpgradeRequest'
      responses:
        '200':
          description: Улучшение выполнено
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpgradeResult'
        '400':
          $ref: ../../../../common-schemas.yaml#/components/responses/BadRequest
        '401':
          $ref: ../../../../common-schemas.yaml#/components/responses/Unauthorized
        '500':
          $ref: ../../../../common-schemas.yaml#/components/responses/InternalServerError
  /combat/implants/modify:
    post:
      tags:
      - Modifications
      summary: Модифицировать имплант
      description: 'Добавляет модификации к импланту.

        **Модификации:**

        - Аффиксы (бонусы к статам)

        - Перераспределение характеристик

        - Синергии с экипировкой

        - Усиление сет-бонусов

        '
      operationId: modifyImplant
      security:
      - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ModifyRequest'
      responses:
        '200':
          description: Модификация выполнена
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModifyResult'
        '400':
          $ref: ../../../../common-schemas.yaml#/components/responses/BadRequest
        '401':
          $ref: ../../../../common-schemas.yaml#/components/responses/Unauthorized
        '500':
          $ref: ../../../../common-schemas.yaml#/components/responses/InternalServerError
  /combat/implants/visuals:
    get:
      tags:
      - Visuals
      summary: Визуальные настройки
      description: 'Возвращает визуальные настройки имплантов.

        **Настройки:**

        - Режим видимости

        - Цветовая схема

        - Эффекты

        '
      operationId: getVisuals
      security:
      - BearerAuth: []
      responses:
        '200':
          description: Визуальные настройки
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VisualsSettings'
        '401':
          $ref: ../../../../common-schemas.yaml#/components/responses/Unauthorized
        '500':
          $ref: ../../../../common-schemas.yaml#/components/responses/InternalServerError
  /combat/implants/visuals/customize:
    post:
      tags:
      - Visuals
      summary: Кастомизировать визуал
      description: 'Изменяет визуальные настройки импланта.

        **Режимы видимости:**

        - Full - полная видимость

        - Partial - частичная маскировка

        - Hidden - скрытие (для внутренних имплантов)

        '
      operationId: customizeVisuals
      security:
      - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CustomizeVisualsRequest'
      responses:
        '200':
          description: Визуал изменён
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomizeVisualsResult'
        '400':
          $ref: ../../../../common-schemas.yaml#/components/responses/BadRequest
        '401':
          $ref: ../../../../common-schemas.yaml#/components/responses/Unauthorized
        '500':
          $ref: ../../../../common-schemas.yaml#/components/responses/InternalServerError
components:
  securitySchemes:
    BearerAuth:
      $ref: ../../../../common-schemas.yaml#/components/securitySchemes/BearerAuth
  schemas:
    RepairRequest:
      type: object
      required:
      - implant_id
      - repair_type
      properties:
        implant_id:
          type: string
          format: uuid
          description: ID импланта
        repair_type:
          type: string
          enum:
          - npc
          - crafting
          - kit
          description: Способ ремонта
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    RepairResult:
      type: object
      properties:
        cost:
          type: object
          description: Стоимость ремонта
          properties:
            currency:
              type: string
            amount:
              type: integer
        durability:
          type: number
          description: Новая прочность (0-100%)
          format: float
          minimum: 0
          maximum: 100
        success:
          type: boolean
          description: Успешен ли ремонт
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    UpgradeRequest:
      type: object
      required:
      - implant_id
      properties:
        implant_id:
          type: string
          format: uuid
          description: ID импланта
        components:
          type: array
          description: Компоненты для апгрейда
          items:
            type: object
            properties:
              component_id:
                type: string
                format: uuid
              quantity:
                type: integer
                minimum: 1
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    UpgradeResult:
      type: object
      properties:
        new_stats:
          type: object
          description: Новые характеристики
          additionalProperties: true
        success:
          type: boolean
          description: Успешно ли улучшение
        new_level:
          type: integer
          description: Новый уровень
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ModifyRequest:
      type: object
      required:
      - implant_id
      - modification_id
      properties:
        implant_id:
          type: string
          format: uuid
          description: ID импланта
        modification_id:
          type: string
          format: uuid
          description: ID модификации
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ModifyResult:
      type: object
      properties:
        applied_modifications:
          type: array
          description: Применённые модификации
          items:
            type: object
            properties:
              modification_id:
                type: string
                format: uuid
              name:
                type: string
              description:
                type: string
        success:
          type: boolean
          description: Успешна ли модификация
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    VisualsSettings:
      type: object
      properties:
        color_scheme:
          type: string
          description: Цветовая схема
        brand_style:
          type: string
          description: Стиль бренда
        visibility_mode:
          type: string
          enum:
          - full
          - partial
          - hidden
          description: Режим видимости
        effects_enabled:
          type: boolean
          description: Включены ли эффекты
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CustomizeVisualsRequest:
      type: object
      required:
      - implant_id
      properties:
        implant_id:
          type: string
          format: uuid
          description: ID импланта
        color_scheme:
          type: string
          description: Цветовая схема
        visibility_mode:
          type: string
          enum:
          - full
          - partial
          - hidden
          description: Режим видимости
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CustomizeVisualsResult:
      type: object
      properties:
        success:
          type: boolean
          description: Успешна ли кастомизация
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
security:
- BearerAuth: []
