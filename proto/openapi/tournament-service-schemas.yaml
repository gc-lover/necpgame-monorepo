# Issue: #1846 - Tournament Service Schemas
components:
  schemas:
    Tournament:
      type: object
      required:
        - id
        - name
        - game_mode
        - tournament_type
        - status
        - max_participants
        - registration_start
        - registration_end
        - start_time
        - end_time
        - created_at
      properties:
        id:
          type: string
          format: uuid
          description: ID турнира
        name:
          type: string
          maxLength: 255
          description: Название турнира
        description:
          type: string
          nullable: true
          description: Описание турнира
        game_mode:
          type: string
          enum:
            - arena_1v1
            - arena_3v3
            - arena_5v5
            - pvpve_extract
            - stealth_league
            - hardcore_auth
          description: Режим игры
        tournament_type:
          type: string
          enum:
            - qualification
            - final
            - special
          description: Тип турнира
        status:
          type: string
          enum:
            - upcoming
            - registration
            - active
            - completed
            - cancelled
          description: Статус турнира
        region:
          type: string
          nullable: true
          maxLength: 50
          description: Регион проведения
        max_participants:
          type: integer
          minimum: 2
          maximum: 10000
          description: Максимальное количество участников
        current_participants:
          type: integer
          default: 0
          description: Текущее количество участников
        registration_start:
          type: string
          format: date-time
          description: Начало регистрации
        registration_end:
          type: string
          format: date-time
          description: Окончание регистрации
        start_time:
          type: string
          format: date-time
          description: Время начала турнира
        end_time:
          type: string
          format: date-time
          nullable: true
          description: Время окончания турнира
        rules:
          type: string
          nullable: true
          description: Правила турнира
        anti_cheat_enabled:
          type: boolean
          default: true
          description: Античит защита включена
        allow_restarts:
          type: boolean
          default: true
          description: Разрешены рестарты при дисконнекте
        featured_replays:
          type: boolean
          default: true
          description: Реплеи топ-матчей
        created_at:
          type: string
          format: date-time
          description: Время создания
        updated_at:
          type: string
          format: date-time
          nullable: true
          description: Время последнего обновления
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~200 bytes/instance."
    TournamentSummary:
      type: object
      required:
        - id
        - name
        - game_mode
        - tournament_type
        - status
        - max_participants
        - current_participants
        - registration_start
        - registration_end
        - start_time
      properties:
        id:
          type: string
          format: uuid
          description: ID турнира
        name:
          type: string
          maxLength: 255
          description: Название турнира
        game_mode:
          type: string
          enum:
            - arena_1v1
            - arena_3v3
            - arena_5v5
            - pvpve_extract
            - stealth_league
            - hardcore_auth
          description: Режим игры
        tournament_type:
          type: string
          enum:
            - qualification
            - final
            - special
          description: Тип турнира
        status:
          type: string
          enum:
            - upcoming
            - registration
            - active
            - completed
            - cancelled
          description: Статус турнира
        max_participants:
          type: integer
          minimum: 2
          maximum: 10000
          description: Максимальное количество участников
        current_participants:
          type: integer
          default: 0
          description: Текущее количество участников
        registration_start:
          type: string
          format: date-time
          description: Начало регистрации
        registration_end:
          type: string
          format: date-time
          description: Окончание регистрации
        start_time:
          type: string
          format: date-time
          description: Время начала турнира
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~120 bytes/instance."
    TournamentDetail:
      allOf:
        - $ref: "#/components/schemas/Tournament"
        - type: object
          properties:
            rounds:
              type: array
              items:
                $ref: "#/components/schemas/TournamentRound"
            rewards:
              $ref: "#/components/schemas/TournamentRewards"
            statistics:
              $ref: "#/components/schemas/TournamentStatistics"
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~250 bytes/instance."
    TournamentRound:
      type: object
      required:
        - round_number
        - name
        - start_time
        - format
      properties:
        round_number:
          type: integer
          minimum: 1
          description: Номер раунда
        name:
          type: string
          maxLength: 100
          description: Название раунда
        description:
          type: string
          nullable: true
          description: Описание раунда
        start_time:
          type: string
          format: date-time
          description: Время начала раунда
        end_time:
          type: string
          format: date-time
          nullable: true
          description: Время окончания раунда
        format:
          type: string
          enum:
            - single_elimination
            - double_elimination
            - round_robin
            - swiss
          description: Формат раунда
        max_matches:
          type: integer
          nullable: true
          description: Максимальное количество матчей
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~80 bytes/instance."
    TournamentStatistics:
      type: object
      properties:
        total_matches:
          type: integer
          default: 0
          description: Общее количество матчей
        completed_matches:
          type: integer
          default: 0
          description: Завершенных матчей
        total_participants:
          type: integer
          default: 0
          description: Общее количество участников
        active_participants:
          type: integer
          default: 0
          description: Активных участников
        average_match_duration:
          type: integer
          nullable: true
          description: Средняя длительность матча (секунды)
        disconnection_rate:
          type: number
          format: float
          nullable: true
          description: Процент дисконнектов
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~32 bytes/instance."
    CreateTournamentRequest:
      type: object
      required:
        - name
        - game_mode
        - tournament_type
        - max_participants
        - registration_start
        - registration_end
        - start_time
      properties:
        name:
          type: string
          maxLength: 255
          description: Название турнира
        description:
          type: string
          nullable: true
          description: Описание турнира
        game_mode:
          type: string
          enum:
            - arena_1v1
            - arena_3v3
            - arena_5v5
            - pvpve_extract
            - stealth_league
            - hardcore_auth
          description: Режим игры
        tournament_type:
          type: string
          enum:
            - qualification
            - final
            - special
          description: Тип турнира
        region:
          type: string
          nullable: true
          maxLength: 50
          description: Регион проведения
        max_participants:
          type: integer
          minimum: 2
          maximum: 10000
          description: Максимальное количество участников
        registration_start:
          type: string
          format: date-time
          description: Начало регистрации
        registration_end:
          type: string
          format: date-time
          description: Окончание регистрации
        start_time:
          type: string
          format: date-time
          description: Время начала турнира
        rules:
          type: string
          nullable: true
          description: Правила турнира
        anti_cheat_enabled:
          type: boolean
          default: true
          description: Античит защита включена
        allow_restarts:
          type: boolean
          default: true
          description: Разрешены рестарты при дисконнекте
        featured_replays:
          type: boolean
          default: true
          description: Реплеи топ-матчей
        rounds:
          type: array
          items:
            $ref: "#/components/schemas/CreateRoundRequest"
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~150 bytes/instance."
    CreateRoundRequest:
      type: object
      required:
        - name
        - start_time
        - format
      properties:
        name:
          type: string
          maxLength: 100
          description: Название раунда
        description:
          type: string
          nullable: true
          description: Описание раунда
        start_time:
          type: string
          format: date-time
          description: Время начала раунда
        format:
          type: string
          enum:
            - single_elimination
            - double_elimination
            - round_robin
            - swiss
          description: Формат раунда
        max_matches:
          type: integer
          nullable: true
          description: Максимальное количество матчей
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~60 bytes/instance."
    UpdateTournamentRequest:
      type: object
      properties:
        name:
          type: string
          maxLength: 255
          description: Название турнира
        description:
          type: string
          nullable: true
          description: Описание турнира
        region:
          type: string
          nullable: true
          maxLength: 50
          description: Регион проведения
        max_participants:
          type: integer
          minimum: 2
          maximum: 10000
          description: Максимальное количество участников
        registration_start:
          type: string
          format: date-time
          description: Начало регистрации
        registration_end:
          type: string
          format: date-time
          description: Окончание регистрации
        start_time:
          type: string
          format: date-time
          description: Время начала турнира
        rules:
          type: string
          nullable: true
          description: Правила турнира
        anti_cheat_enabled:
          type: boolean
          description: Античит защита включена
        allow_restarts:
          type: boolean
          description: Разрешены рестарты при дисконнекте
        featured_replays:
          type: boolean
          description: Реплеи топ-матчей
        status:
          type: string
          enum:
            - upcoming
            - registration
            - active
            - completed
            - cancelled
          description: Новый статус турнира
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~100 bytes/instance."
    Registration:
      type: object
      required:
        - id
        - tournament_id
        - character_id
        - registered_at
        - status
      properties:
        id:
          type: string
          format: uuid
          description: ID регистрации
        tournament_id:
          type: string
          format: uuid
          description: ID турнира
        character_id:
          type: string
          format: uuid
          description: ID персонажа
        registered_at:
          type: string
          format: date-time
          description: Время регистрации
        status:
          type: string
          enum:
            - active
            - withdrawn
            - disqualified
          description: Статус регистрации
        seed:
          type: integer
          nullable: true
          description: Посев в турнире
        division:
          type: string
          nullable: true
          maxLength: 50
          description: Дивизион/группа
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~80 bytes/instance."
    RegistrationRequest:
      type: object
      properties:
        team_members:
          type: array
          items:
            type: string
            format: uuid
          maxItems: 4
          description: ID персонажей команды (для командных режимов)
        preferred_division:
          type: string
          nullable: true
          maxLength: 50
          description: Предпочитаемый дивизион
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~40 bytes/instance."
    Participant:
      type: object
      required:
        - character_id
        - character_name
        - level
        - registration_time
      properties:
        character_id:
          type: string
          format: uuid
          description: ID персонажа
        character_name:
          type: string
          maxLength: 100
          description: Имя персонажа
        level:
          type: integer
          minimum: 1
          description: Уровень персонажа
        guild_name:
          type: string
          nullable: true
          maxLength: 100
          description: Название гильдии
        registration_time:
          type: string
          format: date-time
          description: Время регистрации
        division:
          type: string
          nullable: true
          maxLength: 50
          description: Дивизион
        seed:
          type: integer
          nullable: true
          description: Посев
        statistics:
          $ref: "#/components/schemas/PlayerStatistics"
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~100 bytes/instance."
    PlayerStatistics:
      type: object
      properties:
        matches_played:
          type: integer
          default: 0
          description: Сыграно матчей
        wins:
          type: integer
          default: 0
          description: Побед
        losses:
          type: integer
          default: 0
          description: Поражений
        win_rate:
          type: number
          format: float
          nullable: true
          description: Процент побед
        average_score:
          type: integer
          nullable: true
          description: Средний счет
        best_rank:
          type: integer
          nullable: true
          description: Лучший ранг
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~32 bytes/instance."
    Match:
      type: object
      required:
        - id
        - tournament_id
        - round_number
        - participants
        - status
        - scheduled_time
      properties:
        id:
          type: string
          format: uuid
          description: ID матча
        tournament_id:
          type: string
          format: uuid
          description: ID турнира
        round_number:
          type: integer
          minimum: 1
          description: Номер раунда
        participants:
          type: array
          items:
            type: string
            format: uuid
          minItems: 2
          maxItems: 10
          description: ID участников
        status:
          type: string
          enum:
            - pending
            - in_progress
            - completed
            - cancelled
            - disputed
          description: Статус матча
        scheduled_time:
          type: string
          format: date-time
          description: Запланированное время
        started_at:
          type: string
          format: date-time
          nullable: true
          description: Время начала
        completed_at:
          type: string
          format: date-time
          nullable: true
          description: Время завершения
        winner_id:
          type: string
          format: uuid
          nullable: true
          description: ID победителя
        server_id:
          type: string
          nullable: true
          maxLength: 100
          description: ID сервера
        replay_url:
          type: string
          nullable: true
          description: URL реплея
        dispute_reason:
          type: string
          nullable: true
          description: Причина спора
      description: "BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory: ~150 bytes/instance."
