# Tracking Service - OpenAPI Specification

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**Tracking Service** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç enterprise-grade —Å–∏—Å—Ç–µ–º—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –≤ NECPGAME. –°–µ—Ä–≤–∏—Å —Å–æ–±–∏—Ä–∞–µ—Ç, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –ø–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ GDPR –∏ CCPA, —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

## –ö–ª—é—á–µ–≤—ã–µ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### üìä –°–±–æ—Ä –°–æ–±—ã—Ç–∏–π
- **–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–±–æ—Ä** —Å–æ–±—ã—Ç–∏–π —Å throughput 100k+ events/second
- **Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–µ—Ç–µ–≤—ã—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- **Real-time –æ–±—Ä–∞–±–æ—Ç–∫–∞** —Å sub-millisecond latency

### üîí –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –∏ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
- **GDPR/CCPA compliance** —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —Å–æ–≥–ª–∞—Å–∏–π
- **Data minimization** –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏—è
- **Right to erasure** —Å –∞—É–¥–∏—Ç–æ—Ä—Å–∫–∏–º–∏ —Å–ª–µ–¥–∞–º–∏

### üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –ú–µ—Ç—Ä–∏–∫–∏
- **Real-time aggregation** –º–µ—Ç—Ä–∏–∫ –¥–ª—è dashboard
- **Behavioral segmentation** –Ω–∞ –æ—Å–Ω–æ–≤–µ ML –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
- **Privacy-preserving analytics** –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏

### üéØ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- **Event-driven personalization** –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
- **User profiling** –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- **A/B testing support** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –æ–ø—ã—Ç–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

```
tracking-service/
‚îú‚îÄ‚îÄ main.yaml              # –û—Å–Ω–æ–≤–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è OpenAPI
‚îú‚îÄ‚îÄ README.md             # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docs/                 # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îî‚îÄ‚îÄ tests/               # –¢–µ—Å—Ç—ã API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –°–±–æ—Ä –°–æ–±—ã—Ç–∏–π
- `POST /events` - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
- `POST /events/batch` - Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /users/{userId}/events` - –ò—Å—Ç–æ—Ä–∏—è —Å–æ–±—ã—Ç–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /analytics/behavior/segments` - –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –∏ Consent
- `GET /users/{userId}/consent` - –°—Ç–∞—Ç—É—Å —Å–æ–≥–ª–∞—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /users/{userId}/consent` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–∏–π
- `POST /users/{userId}/data/delete` - GDPR data deletion

### –ú–µ—Ç—Ä–∏–∫–∏ –∏ Dashboard
- `GET /analytics/metrics/{metricType}` - –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ó–¥–æ—Ä–æ–≤—å—è
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
- `POST /health/batch` - –ú–∞—Å—Å–æ–≤—ã–π health check
- `GET /health/ws` - WebSocket –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –î—Ä—É–≥–∏—Ö –°–µ—Ä–≤–∏—Å–æ–≤

### –¢—Ä–µ–±—É–µ–º—ã–µ –°–µ—Ä–≤–∏—Å—ã
- **user-profile-service** - –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∞–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏–∏
- **adaptive-system-service** - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏–π
- **player-analytics-service** - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è

### –û–±—â–∏–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `../common/schemas/health.yaml` - –°—Ö–µ–º—ã –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
- `../common/schemas/error.yaml` - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏
- `../common/responses/success.yaml` - –£—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –¶–µ–ª–µ–≤—ã–µ –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- **P99 Latency**: <10ms –¥–ª—è ingestion —Å–æ–±—ã—Ç–∏–π
- **–ü–∞–º—è—Ç—å**: <50KB –Ω–∞ –∞–∫—Ç–∏–≤–Ω—É—é —Å–µ—Å—Å–∏—é –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- **–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: 500,000+ simultaneous tracking
- **Throughput**: 100,000+ events/second
- **Data retention**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–æ–π

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **Memory-mapped files** –¥–ª—è –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–≥–æ ingestion
- **Time-series databases** –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- **Bloom filters** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ —Å–æ–±—ã—Ç–∏–π
- **Event-driven architecture** –¥–ª—è real-time processing

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–∞–ª–∏–¥–∞—Ü–∏—è –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
```bash
# –õ–∏–Ω—Ç–∏–Ω–≥ —Å Redocly
npx @redocly/cli lint main.yaml

# –ë–∞–Ω–¥–ª–∏–Ω–≥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ $ref
npx @redocly/cli bundle main.yaml -o bundled.yaml
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Go –ö–æ–¥–∞
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å ogen
ogen --target ../../services/tracking-service-go/pkg/api \
     --package api --clean main.yaml
```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
npx @redocly/cli build-docs main.yaml -o docs/index.html
```

## –ü—Ä–∏–º–µ—Ä—ã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –°–æ–±—ã—Ç–∏—è
```bash
curl -X POST \
     -H "Authorization: Bearer {token}" \
     -H "Content-Type: application/json" \
     -d '{
       "user_id": "123e4567-e89b-12d3-a456-426614174000",
       "event_type": "game_action",
       "event_name": "player_level_up",
       "timestamp": "2025-12-21T10:00:00Z",
       "properties": {
         "level": 15,
         "duration": 45
       }
     }' \
     https://api.necpgame.com/v1/tracking/events
```

### Batch –û—Ç–ø—Ä–∞–≤–∫–∞ –°–æ–±—ã—Ç–∏–π
```bash
curl -X POST \
     -H "Authorization: Bearer {token}" \
     -H "Content-Type: application/json" \
     -d '{
       "events": [
         {
           "user_id": "123e4567-e89b-12d3-a456-426614174000",
           "event_type": "ui_interaction",
           "event_name": "button_click",
           "timestamp": "2025-12-21T10:00:00Z"
         },
         {
           "user_id": "123e4567-e89b-12d3-a456-426614174000",
           "event_type": "achievement",
           "event_name": "achievement_unlocked",
           "timestamp": "2025-12-21T10:00:05Z",
           "properties": {
             "achievement_id": "first_kill"
           }
         }
       ]
     }' \
     https://api.necpgame.com/v1/tracking/events/batch
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –°–æ–±—ã—Ç–∏–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
curl -H "Authorization: Bearer {token}" \
     "https://api.necpgame.com/v1/tracking/users/123e4567-e89b-12d3-a456-426614174000/events?event_type=game_action&limit=20"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –°–æ–≥–ª–∞—Å–∏–π
```bash
curl -H "Authorization: Bearer {token}" \
     https://api.necpgame.com/v1/tracking/users/123e4567-e89b-12d3-a456-426614174000/consent
```

### GDPR Data Deletion
```bash
curl -X POST \
     -H "Authorization: Bearer {token}" \
     -H "Content-Type: application/json" \
     -d '{
       "reason": "user_request",
       "confirmation": true,
       "delete_related_data": true
     }' \
     https://api.necpgame.com/v1/tracking/users/123e4567-e89b-12d3-a456-426614174000/data/delete
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ú–µ—Ç—Ä–∏–∫
```bash
curl -H "Authorization: Bearer {token}" \
     "https://api.necpgame.com/v1/tracking/analytics/metrics/user_engagement?period=day"
```

### WebSocket –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```javascript
const ws = new WebSocket('ws://localhost:8080/api/v1/tracking/health/ws');
ws.onmessage = (event) => {
    const health = JSON.parse(event.data);
    console.log('Tracking service health:', health);
};
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –†–µ—à–µ–Ω–∏—è

### Domain-Driven Design
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è
- **–ê–≥—Ä–µ–≥–∞—Ç—ã**: Event, UserConsent, AnalyticsMetric, BehaviorSegment
- **Value Objects**: EventType, ConsentStatus, MetricPeriod

### Data Architecture
- **Time-series storage** –¥–ª—è —Å–æ–±—ã—Ç–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **Document database** –¥–ª—è –≥–∏–±–∫–∏—Ö —Å–≤–æ–π—Å—Ç–≤ —Å–æ–±—ã—Ç–∏–π
- **In-memory caching** –¥–ª—è –≥–æ—Ä—è—á–∏—Ö –º–µ—Ç—Ä–∏–∫

### Privacy by Design
- **Data minimization** - —Å–±–æ—Ä —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Purpose limitation** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–æ–ª—å–∫–æ –ø–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é
- **Storage limitation** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- **Horizontal scaling** –¥–ª—è ingestion –∏ processing
- **Event streaming** —Å Kafka –¥–ª—è decoupling
- **CQRS pattern** –¥–ª—è reads/writes separation

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **JWT Bearer tokens** –¥–ª—è API –¥–æ—Å—Ç—É–ø–∞
- **Service-to-service** –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **API key authentication** –¥–ª—è SDK integration

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **Resource ownership** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Å–æ–±—ã—Ç–∏—è
- **Role-based access** –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –º–µ—Ç—Ä–∏–∫
- **Data classification** —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ –¥–æ—Å—Ç—É–ø–∞

### –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å
- **End-to-end encryption** –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Pseudonymization** –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- **Audit logging** –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–æ–≤ –∫ –¥–∞–Ω–Ω—ã–º

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ Observability

### –ú–µ—Ç—Ä–∏–∫–∏
- **Ingestion rates** - —Å–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–∏–µ–º–∞ —Å–æ–±—ã—Ç–∏–π
- **Processing latency** - –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **Data retention** - –æ–±—ä–µ–º —Ö—Ä–∞–Ω–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Privacy compliance** - —Å—Ç–∞—Ç—É—Å —Å–æ–≥–ª–∞—Å–∏–π

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```json
{
  "timestamp": "2025-12-21T10:00:00Z",
  "level": "INFO",
  "service": "tracking-service",
  "operation": "event_ingestion",
  "user_id": "123e4567-e89b-12d3-a456-426614174000",
  "event": {
    "type": "game_action",
    "name": "player_level_up",
    "processing_time_ms": 5
  }
}
```

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞
- **OpenTelemetry** –¥–ª—è end-to-end tracing ingestion
- **Jaeger** –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ processing pipelines
- **Service mesh** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit Tests
```bash
go test ./pkg/event/
go test ./pkg/consent/
go test ./pkg/analytics/
```

### Integration Tests
```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
./scripts/run-integration-tests.sh tracking-service
```

### Performance Tests
```bash
# –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ingestion
./scripts/run-performance-tests.sh --service tracking-service --events-per-second 100000

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ data deletion
./scripts/test-gdpr-compliance.sh
```

### Privacy Tests
```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
./scripts/test-privacy-compliance.sh --regulation gdpr

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ data anonymization
./scripts/test-data-anonymization.sh
```

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Kubernetes
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: tracking-service
spec:
  replicas: 10
  template:
    spec:
      containers:
      - name: tracking
        image: necpgame/tracking-service:v1.0.0
        resources:
          requests:
            memory: "512Mi"
            cpu: "500m"
          limits:
            memory: "2Gi"
            cpu: "2000m"
        env:
        - name: EVENT_INGESTION_RATE_LIMIT
          value: "100000"
        - name: DATA_RETENTION_DAYS
          value: "365"
        - name: PRIVACY_MODE
          value: "gdpr"
        ports:
        - containerPort: 8080
          name: http
        - containerPort: 9090
          name: websocket
```

### Helm Chart
```bash
helm install tracking-service ./charts/tracking-service \
  --set ingestion.rateLimit=100000 \
  --set privacy.regulation=gdpr \
  --set retention.days=365
```

## SDK Integration

### JavaScript SDK
```javascript
import { TrackingSDK } from '@necpgame/tracking-sdk';

const tracker = new TrackingSDK({
  apiKey: 'your-api-key',
  endpoint: 'https://api.necpgame.com/v1/tracking'
});

// Track event
tracker.track('game_action', 'player_level_up', {
  level: 15,
  duration: 45
});

// Batch track
tracker.trackBatch([
  { type: 'ui_interaction', name: 'button_click' },
  { type: 'achievement', name: 'first_kill' }
]);
```

### Mobile SDKs
```swift
// iOS
let tracker = TrackingSDK(apiKey: "your-api-key")
tracker.track(event: "purchase", properties: ["item": "premium_skin", "amount": 9.99])
```

```kotlin
// Android
val tracker = TrackingSDK(apiKey = "your-api-key")
tracker.track("game_start", mapOf("mode" to "pvp", "region" to "eu"))
```

## –ë–∏–∑–Ω–µ—Å-–ü—Ä–∞–≤–∏–ª–∞

### Data Retention
- **Standard retention**: 365 –¥–Ω–µ–π –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **Extended retention**: –¥–æ 2555 –¥–Ω–µ–π (GDPR max) –¥–ª—è premium –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **Immediate deletion**: –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### Consent Management
- **Granular consents**: –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- **Consent versioning**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–µ—Ä—Å–∏–π —É—Å–ª–æ–≤–∏–π
- **Consent withdrawal**: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∑—ã–≤–∞ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è

### Event Processing
- **Real-time validation** –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–±—ã—Ç–∏–π
- **Deduplication** –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- **Filtering** –Ω–∞ –æ—Å–Ω–æ–≤–µ consent settings

## Troubleshooting

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ü—Ä–æ–±–ª–µ–º—ã

#### –í—ã—Å–æ–∫–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å ingestion
**–°–∏–º–ø—Ç–æ–º—ã**: >10ms P99 latency –Ω–∞ event ingestion
**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å rate limiting
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å database –∏–Ω–¥–µ–∫—Å—ã
- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å ingestion workers

#### Data retention violations
**–°–∏–º–ø—Ç–æ–º—ã**: –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–æ–ª—å—à–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞
**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å cleanup jobs
- –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å consent settings
- –û–±–Ω–æ–≤–∏—Ç—å retention policies

#### Privacy compliance issues
**–°–∏–º–ø—Ç–æ–º—ã**: –ù–∞—Ä—É—à–µ–Ω–∏—è GDPR/CCPA —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
**–†–µ—à–µ–Ω–∏–µ**:
- –ê—É–¥–∏—Ç consent management
- –í–Ω–µ–¥—Ä–∏—Ç—å data anonymization
- –û–±–Ω–æ–≤–∏—Ç—å privacy policies

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **–í–ª–∞–¥–µ–ª–µ—Ü —Å–µ—Ä–≤–∏—Å–∞**: @tracking-team
- **DevOps**: @platform-team
- **Security**: @security-team
- **Privacy**: @legal-privacy-team
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: docs@necpgame.com

## –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏

1. **SDK development** –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
2. **Advanced ML analytics** –¥–ª—è behavioral insights
3. **Real-time dashboards** –¥–ª—è game monitoring
4. **Privacy-preserving federated learning** –¥–ª—è cross-game analytics

---

*Tracking Service —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–æ–º data-driven –ø–æ–¥—Ö–æ–¥–∞ –≤ NECPGAME, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –≥–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø—Ä–∏ —Å—Ç—Ä–æ–≥–æ–º —Å–æ–±–ª—é–¥–µ–Ω–∏–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏.*