openapi: 3.0.3
paths:
  /audit/preferences:
    get:
      operationId: userPreferenceServiceGetPreferenceAuditLog
      summary: Get preference audit log
      description: 'Retrieve audit log for preference-related operations.


        **Privacy Notes:**

        - GDPR compliant audit trails

        - Sensitive preference data masking

        - User consent for audit access

        - Configurable retention policies

        '
      tags:
      - Privacy Controls
      parameters:
      - name: user_id
        in: query
        schema:
          type: string
          format: uuid
        description: Filter by user ID
      - name: category
        in: query
        schema:
          type: string
          enum:
          - appearance
          - notifications
          - gameplay
          - privacy
          - accessibility
          - performance
        description: Filter by preference category
      - name: action
        in: query
        schema:
          type: string
          enum:
          - create
          - update
          - reset
          - sync
        description: Filter by action type
      - name: start_date
        in: query
        schema:
          type: string
          format: date-time
        description: Start date for audit log
      - name: limit
        in: query
        schema:
          type: integer
          minimum: 1
          maximum: 1000
          default: 100
        description: Number of audit records to return
      responses:
        '200':
          description: Audit log retrieved
          content:
            application/json:
              schema:
                allOf:
                - $ref: ../common/responses/success.yaml#/OK
                - type: object
                  properties:
                    data:
                      type: array
                      items:
                        $ref: '#/components/schemas/PreferenceAuditEntry'
