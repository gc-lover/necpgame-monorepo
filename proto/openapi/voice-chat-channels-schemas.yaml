components:
  schemas:
    VoiceChannelType:
      type: string
      enum:
        - PARTY
        - GUILD
        - RAID
        - PROXIMITY
      description: Тип голосового канала
    ParticipantStatus:
      type: string
      enum:
        - MUTED
        - DEAFENED
        - SPEAKING
        - IDLE
      description: Статус участника
    VoiceChannel:
      type: object
      properties:
        id:
          type: string
          format: uuid
        owner_id:
          type: string
          format: uuid
          nullable: true
        name:
          type: string
          maxLength: 255
        channel_type:
          type: string
          enum:
            - PARTY
            - GUILD
            - RAID
            - PROXIMITY
        quality_preset:
          type: string
          enum:
            - HIGH
            - MEDIUM
            - LOW
            - ADAPTIVE
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        max_participants:
          type: integer
        is_active:
          type: boolean
          default: true
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    VoiceParticipant:
      type: object
      properties:
        id:
          type: string
          format: uuid
        channel_id:
          type: string
          format: uuid
        player_id:
          type: string
          format: uuid
        webrtc_token:
          type: string
          maxLength: 255
        joined_at:
          type: string
          format: date-time
        last_activity_at:
          type: string
          format: date-time
        position_x:
          type: number
          format: float
          nullable: true
        position_y:
          type: number
          format: float
          nullable: true
        position_z:
          type: number
          format: float
          nullable: true
        is_muted:
          type: boolean
          default: false
        is_deafened:
          type: boolean
          default: false
        is_speaking:
          type: boolean
          default: false
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CreateChannelRequest:
      type: object
      required:
        - player_id
        - channel_type
        - name
      properties:
        player_id:
          type: string
          format: uuid
        name:
          type: string
          maxLength: 255
        channel_type:
          type: string
          enum:
            - PARTY
            - GUILD
            - RAID
            - PROXIMITY
        quality_preset:
          type: string
          enum:
            - HIGH
            - MEDIUM
            - LOW
            - ADAPTIVE
        max_participants:
          type: integer
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    JoinChannelRequest:
      type: object
      required:
        - player_id
      properties:
        player_id:
          type: string
          format: uuid
        position_x:
          type: number
          format: float
          nullable: true
        position_y:
          type: number
          format: float
          nullable: true
        position_z:
          type: number
          format: float
          nullable: true
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    LeaveChannelRequest:
      type: object
      required:
        - player_id
      properties:
        player_id:
          type: string
          format: uuid
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    UpdateParticipantStatusRequest:
      type: object
      required:
        - player_id
      properties:
        player_id:
          type: string
          format: uuid
        is_muted:
          type: boolean
        is_deafened:
          type: boolean
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    UpdateParticipantPositionRequest:
      type: object
      required:
        - player_id
        - position_x
        - position_y
        - position_z
      properties:
        player_id:
          type: string
          format: uuid
        position_x:
          type: number
          format: float
        position_y:
          type: number
          format: float
        position_z:
          type: number
          format: float
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ChannelListResponse:
      type: object
      properties:
        channels:
          type: array
          items:
            $ref: '#/components/schemas/VoiceChannel'
        total:
          type: integer
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ParticipantListResponse:
      type: object
      properties:
        participants:
          type: array
          items:
            $ref: '#/components/schemas/VoiceParticipant'
        total:
          type: integer
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ChannelDetailResponse:
      type: object
      properties:
        channel:
          $ref: '#/components/schemas/VoiceChannel'
        participants:
          type: array
          items:
            $ref: '#/components/schemas/VoiceParticipant'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    WebRTCTokenResponse:
      type: object
      properties:
        token:
          type: string
        server_url:
          type: string
        expires_at:
          type: string
          format: date-time
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    GetWebRTCTokenRequest:
      type: object
      required:
        - channel_id
        - player_id
      properties:
        channel_id:
          type: string
          format: uuid
        player_id:
          type: string
          format: uuid
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    ConnectWebRTCRequest:
      type: object
      required:
        - channel_id
        - player_id
        - token
      properties:
        channel_id:
          type: string
          format: uuid
        player_id:
          type: string
          format: uuid
        token:
          type: string
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    DisconnectWebRTCRequest:
      type: object
      required:
        - channel_id
        - player_id
      properties:
        channel_id:
          type: string
          format: uuid
        player_id:
          type: string
          format: uuid
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    WebRTCConnectionResponse:
      type: object
      properties:
        channel_id:
          type: string
          format: uuid
        player_id:
          type: string
          format: uuid
        connection_status:
          type: string
          enum:
            - INITIATING
            - CONNECTING
            - CONNECTED
            - DISCONNECTED
            - RECONNECTING
        success:
          type: boolean
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    WebRTCDisconnectResponse:
      type: object
      properties:
        channel_id:
          type: string
          format: uuid
        player_id:
          type: string
          format: uuid
        success:
          type: boolean
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
