description: Результаты scoring сохранены
content:
  application/json:
    schema:
      type: object
      properties:
        scoreId:
          type: string
          format: uuid
          description: ID сохраненного scoring
        category:
          type: string
          enum:
          - Bronze
          - Silver
          - Gold
          - Platinum
          - Legendary
          description: Категория достижения
        rewards:
          type: array
          items:
            $ref: '#/components/schemas/Reward'
          description: Доступные награды за достижение
      required:
      - scoreId
      - category
'400':
  $ref: '#/components/responses/BadRequest'
'404':
  description: Активация комбо не найдена
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/Error'
'409':
  description: Scoring уже отправлен для данной активации
  content:
    application/json:
      schema:
        $ref: '#/components/schemas/Error'
'500':
  $ref: '#/components/responses/InternalServerError'
/gameplay/combat/combos/analytics:
  get:
    summary: Получить метрики эффективности комбо
    description: 'Возвращает аналитику по использованию комбо для персонажа или команды.

      Используется для оптимизации и балансировки.

      '
    operationId: getComboAnalytics
    tags:
    - Combo Analytics
    parameters:
    - name: characterId
      in: query
      schema:
        type: string
        format: uuid
      description: ID персонажа (опционально, если не указан - статистика по всем)
    - name: comboType
      in: query
      schema:
        type: string
        enum:
        - solo
        - team
        - legendary
      description: Фильтр по типу комбо
    - name: timeRange
      in: query
      schema:
        type: string
        enum:
        - 1h
        - 24h
        - 7d
        - 30d
        - all
        default: 7d
      description: Временной диапазон для статистики
    - name: limit
      in: query
      schema:
        type: integer
        minimum: 1
        maximum: 50
        default: 10
      description: Количество топ комбо для возврата
    responses:
      '200':
        description: Успешный ответ с метриками комбо
        content:
          application/json:
            schema:
              type: object
              properties:
                characterId:
                  type: string
                  format: uuid
                  description: ID персонажа
                timeRange:
                  type: string
                  description: Временной диапазон статистики
                totalActivations:
                  type: integer
                  description: Общее количество активаций
                successfulActivations:
                  type: integer
                  description: Успешных активаций
                averageScore:
                  type: number
                  format: float
                  description: Средний score
                topCombos:
                  type: array
                  items:
                    type: object
                    properties:
                      comboId:
                        type: string
                        format: uuid
                      comboName:
                        type: string
                      activationCount:
                        type: integer
                      averageScore:
                        type: number
                        format: float
                      successRate:
                        type: number
                        format: float
                        minimum: 0
                        maximum: 1
                    required:
                    - comboId
                    - comboName
                    - activationCount
                  description: Топ комбо по использованию
                synergyStats:
                  type: object
                  description: Статистика по синергиям
                  additionalProperties:
                    type: object
                    properties:
                      appliedCount:
                        type: integer
                      successRate:
                        type: number
                        format: float
              required:
              - totalActivations
              - successfulActivations
              - topCombos
      '400':
        $ref: '#/components/responses/BadRequest'
      '404':
        $ref: '#/components/responses/NotFound'
      '500':
        $ref: '#/components/responses/InternalServerError'
components:
  schemas:
    ComboDefinition:
      type: object
      description: 'Определение комбо


        BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
      properties:
        id:
          type: string
          format: uuid
          description: Уникальный ID комбо
        name:
          type: string
          description: Название комбо
          maxLength: 255
        description:
          type: string
          description: Описание комбо
        comboType:
          type: string
          enum:
          - solo
          - team
          - legendary
          description: Тип комбо
        complexity:
          type: string
          enum:
          - Bronze
          - Silver
          - Gold
          - Platinum
          - Legendary
          description: Уровень сложности
        createdAt:
          type: string
          format: date-time
          description: Дата создания
        bonuses:
          type: object
          description: Бонусы при успешной активации
          additionalProperties:
            type: number
        requirements:
          $ref: '#/components/schemas/ComboRequirements'
        sequence:
          type: array
          items:
            $ref: '#/components/schemas/ComboAction'
          description: Последовательность действий
          minItems: 1
          maxItems: 20
        cooldown:
          type: integer
          description: Кулдаун в секундах
          minimum: 0
        chainCompatible:
          type: boolean
          description: Совместимо с chain-комбо
          default: false
      required:
      - id
      - name
      - comboType
      - complexity
      - sequence
    ComboRequirements:
      type: object
      description: 'Требования для активации комбо


        BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
      properties:
        equipmentRequirements:
          type: object
          description: Требования к экипировке
          additionalProperties:
            type: string
        requiredSkills:
          type: array
          items:
            type: object
            properties:
              skillId:
                type: string
                format: uuid
              minLevel:
                type: integer
                minimum: 1
            required:
            - skillId
            - minLevel
          description: Требуемые навыки
        requiredAbilities:
          type: array
          items:
            type: string
            format: uuid
          description: Требуемые способности
        minLevel:
          type: integer
          description: Минимальный уровень персонажа
          minimum: 1
        teamSize:
          type: integer
          description: Размер команды для team комбо
          minimum: 2
          maximum: 5
    ComboAction:
      type: object
      description: 'Действие в последовательности комбо


        BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
      properties:
        abilityId:
          type: string
          format: uuid
          description: ID способности (для ability действий)
        actionType:
          type: string
          enum:
          - ability
          - movement
          - attack
          - defense
          - special
          description: Тип действия
        parameters:
          type: object
          description: Параметры действия
          additionalProperties: true
        timing:
          type: number
          format: float
          description: Временные ограничения в секундах
          minimum: 0
      required:
      - actionType
    ComboContext:
      type: object
      description: 'Контекст выполнения комбо


        BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
      properties:
        location:
          type: object
          properties:
            x:
              type: number
              format: float
            y:
              type: number
              format: float
            z:
              type: number
              format: float
          description: Координаты выполнения
        environment:
          type: object
          description: Параметры окружающей среды
          additionalProperties: true
        enemies:
          type: array
          items:
            type: string
            format: uuid
          description: ID врагов в зоне
        allies:
          type: array
          items:
            type: string
            format: uuid
          description: ID союзников в зоне
    SynergyEffect:
      type: object
      description: 'Эффект синергии


        BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
      properties:
        synergyId:
          type: string
          format: uuid
          description: ID синергии
        synergyType:
          type: string
          enum:
          - ability
          - team
          - equipment
          - implant
          - timing
          description: Тип синергии
        bonuses:
          type: object
          description: Примененные бонусы
          additionalProperties:
            type: number
        duration:
          type: integer
          description: Длительность эффекта в секундах
          minimum: 0
      required:
      - synergyId
      - synergyType
      - bonuses
    ComboScore:
      type: object
      description: 'Результаты scoring комбо


        BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
      properties:
        category:
          type: string
          enum:
          - Bronze
          - Silver
          - Gold
          - Platinum
          - Legendary
          description: Категория достижения
        executionDifficulty:
          type: integer
          description: Сложность исполнения (1-10)
          minimum: 1
          maximum: 10
        damageOutput:
          type: integer
          description: Нанесенный урон
          minimum: 0
        visualImpact:
          type: integer
          description: Визуальный эффект (1-10)
          minimum: 1
          maximum: 10
        teamCoordination:
          type: integer
          description: Координация команды (1-10)
          minimum: 1
          maximum: 10
        totalScore:
          type: integer
          description: Общий score
          minimum: 0
      required:
      - executionDifficulty
      - damageOutput
      - visualImpact
      - totalScore
      - category
    ComboLoadout:
      type: object
      description: 'Лоадаут комбо персонажа


        BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
      properties:
        characterId:
          type: string
          format: uuid
          description: ID персонажа
        preferences:
          type: object
          description: Настройки предпочтений
          properties:
            autoActivate:
              type: boolean
              description: Автоматическая активация
              default: false
            priorityCombos:
              type: array
              items:
                type: string
                format: uuid
              description: Приоритетные комбо
              maxItems: 5
        activeCombos:
          type: array
          items:
            type: string
            format: uuid
          description: ID активных комбо
          maxItems: 10
