components:
  schemas:
    EventSubscriptionRequest:
      type: object
      required:
      - player_id
      - event_types
      properties:
        player_id:
          type: string
          format: uuid
          description: Player creating subscription
        session_id:
          type: string
          format: uuid
          description: Specific session to monitor (optional)
        priority:
          type: string
          enum:
          - low
          - normal
          - high
          - critical
          default: normal
          description: Subscription priority
        filters:
          $ref: '#/components/schemas/EventFilters'
          description: Additional event filtering criteria
        event_types:
          type: array
          items:
            type: string
            enum:
            - combat_actions
            - ability_usage
            - damage_events
            - player_movements
            - ai_updates
            - session_events
          description: Event types to subscribe to
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    EventFilters:
      type: object
      properties:
        distance_filter:
          type: object
          properties:
            max_distance:
              type: number
              format: float
              minimum: 0
              description: Maximum distance from player
            center_position:
              $ref: ./realtime-combat-api-common-schemas.yaml#/components/schemas/Vector3
              description: Center position for distance calculations
        zone_filter:
          type: array
          items:
            type: string
            format: uuid
          description: Specific zones to monitor
        player_only:
          type: boolean
          default: false
          description: Only events involving the subscribing player
        min_damage:
          type: integer
          minimum: 0
          description: Minimum damage threshold
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    EventSubscription:
      type: object
      required:
      - id
      - player_id
      - event_types
      - status
      - created_at
      properties:
        id:
          type: string
          format: uuid
          description: Subscription identifier
        player_id:
          type: string
          format: uuid
          description: Subscribing player
        session_id:
          type: string
          format: uuid
          description: Associated session
        priority:
          type: string
          enum:
          - low
          - normal
          - high
          - critical
          description: Subscription priority
        status:
          type: string
          enum:
          - active
          - paused
          - suspended
          - expired
          description: Subscription status
        created_at:
          type: string
          format: date-time
          description: Subscription creation time
        expires_at:
          type: string
          format: date-time
          description: Subscription expiration time
        last_used:
          type: string
          format: date-time
          description: Last event delivery time
        filters:
          $ref: '#/components/schemas/EventFilters'
          description: Active filters
        event_types:
          type: array
          items:
            type: string
            enum:
            - combat_actions
            - ability_usage
            - damage_events
            - player_movements
            - ai_updates
            - session_events
          description: Subscribed event types
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    EventSubscriptionUpdate:
      type: object
      properties:
        priority:
          type: string
          enum:
          - low
          - normal
          - high
          - critical
          description: Updated priority
        status:
          type: string
          enum:
          - active
          - paused
          - suspended
          description: Updated status
        filters:
          $ref: '#/components/schemas/EventFilters'
          description: Updated filters
        event_types:
          type: array
          items:
            type: string
            enum:
            - combat_actions
            - ability_usage
            - damage_events
            - player_movements
            - ai_updates
            - session_events
          description: Updated event types
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    EventSubscriptionListResponse:
      type: object
      required:
      - subscriptions
      - total
      properties:
        subscriptions:
          type: array
          items:
            $ref: '#/components/schemas/EventSubscription'
          description: Event subscriptions
        total:
          type: integer
          minimum: 0
          description: Total number of subscriptions
        limit:
          type: integer
          minimum: 1
          maximum: 100
          description: Items per page
        offset:
          type: integer
          minimum: 0
          description: Pagination offset
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
