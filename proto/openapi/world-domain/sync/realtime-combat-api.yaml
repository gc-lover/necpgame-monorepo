# Issue: #2197 - Real-time Combat API Specification
openapi: 3.0.3
info:
  title: Real-time Combat API
  version: 1.0.0
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  description: |
    REST API for managing real-time combat interactions in MMOFPS RPG.

    This API provides endpoints for managing WebSocket connections, event subscriptions,
    real-time state synchronization, and server-sent events for combat systems.

    ## Integration with WebSocket API

    This REST API works alongside the WebSocket API (`combat-systems-wave1-websocket.yaml`)
    to provide:
    - Connection management and authentication
    - Event subscription configuration
    - Server-sent events fallback
    - Administrative controls

    ## Key Features

    - WebSocket connection lifecycle management
    - Event filtering and subscription management
    - Real-time state synchronization
    - Server-sent events (SSE) fallback
    - Connection health monitoring
    - Rate limiting and throttling controls

    ## Performance Requirements

    - Connection establishment: <50ms P99
    - Event routing: <10ms P99
    - Concurrent connections: 1000+ per server
    - Memory efficient state management

servers:
  - url: http://localhost:8110
    description: Local development
  - url: https://api.necpgame.com/v1/realtime/combat
    description: Production API

tags:
  - name: connections
    description: WebSocket connection management
  - name: subscriptions
    description: Event subscription management
  - name: events
    description: Server-sent events (SSE)
  - name: state
    description: Real-time state synchronization
  - name: monitoring
    description: Connection and performance monitoring

security:
  - BearerAuth: [ ]

# API is split into multiple files for maintainability:
# - realtime-combat-connections.yaml: Connection management endpoints
# - realtime-combat-subscriptions.yaml: Event subscription endpoints
# - realtime-combat-events.yaml: Server-sent events endpoints
# - realtime-combat-state.yaml: State synchronization endpoints
# - realtime-combat-monitoring.yaml: Monitoring endpoints
# - realtime-combat-schemas.yaml: Shared schemas

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

paths:
  /health:
    get:
      summary: Health check
      operationId: getHealth
      responses:
        '200':
          description: Service is healthy
