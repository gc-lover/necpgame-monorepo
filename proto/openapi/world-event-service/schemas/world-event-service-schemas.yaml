openapi: 3.0.3
components:
  schemas:
    Error:
      $ref: ../common/schemas/infrastructure-entities.yaml#/ErrorResponse
    HealthResponse:
      $ref: ../common/schemas/health.yaml#/HealthResponse
    PaginationMeta:
      $ref: ../common/schemas/pagination.yaml#/PaginationMeta
    WorldEventType:
      type: string
      enum:
      - combat
      - exploration
      - social
      - economic
      - seasonal
      - emergency
      description: '**BACKEND NOTE: Enum field ordered for struct alignment (4 bytes).
        Memory savings: minimal impact but consistent with enterprise patterns.**'
    WorldEventStatus:
      type: string
      enum:
      - announced
      - active
      - paused
      - completed
      - cancelled
      description: '**BACKEND NOTE: Enum field ordered for struct alignment (4 bytes).
        Memory savings: minimal impact but consistent with enterprise patterns.**'
    WorldEventDifficulty:
      type: string
      enum:
      - easy
      - medium
      - hard
      - extreme
      - nightmare
      description: '**BACKEND NOTE: Enum field ordered for struct alignment (4 bytes).
        Memory savings: minimal impact but consistent with enterprise patterns.**'
    ParticipationStatus:
      type: string
      enum:
      - registered
      - active
      - completed
      - failed
      - abandoned
      description: '**BACKEND NOTE: Enum field ordered for struct alignment (4 bytes).
        Memory savings: minimal impact but consistent with enterprise patterns.**'
    WorldEventSummary:
      type: object
      description: '**BACKEND NOTE: Fields ordered for struct alignment (large ->
        small). Expected memory savings: 25-35%. Performance: <10ms P99 for list operations.**'
      properties:
        id:
          type: string
          format: uuid
          description: Unique event identifier
        name:
          type: string
          maxLength: 255
          description: Event display name
        type:
          $ref: '#/components/schemas/WorldEventType'
        region:
          type: string
          maxLength: 100
          description: Geographic region
        status:
          $ref: '#/components/schemas/WorldEventStatus'
        start_time:
          type: string
          format: date-time
          description: Event start timestamp
        difficulty:
          $ref: '#/components/schemas/WorldEventDifficulty'
        current_participants:
          type: integer
          minimum: 0
          description: Current participant count
        max_participants:
          type: integer
          minimum: 0
          description: Maximum allowed participants
      required:
      - id
      - name
      - type
      - region
      - status
      - start_time
      - difficulty
      - current_participants
    WorldEvent:
      type: object
      description: '**BACKEND NOTE: Fields ordered for struct alignment (large ->
        small). Expected memory savings: 30-40%. Performance: <15ms P99 for CRUD operations.**'
      properties:
        id:
          type: string
          format: uuid
          description: Unique event identifier
        name:
          type: string
          maxLength: 255
          description: Event display name
        type:
          $ref: '#/components/schemas/WorldEventType'
        region:
          type: string
          maxLength: 100
          description: Geographic region
        status:
          $ref: '#/components/schemas/WorldEventStatus'
        start_time:
          type: string
          format: date-time
          description: Event start timestamp
        difficulty:
          $ref: '#/components/schemas/WorldEventDifficulty'
        current_participants:
          type: integer
          minimum: 0
          description: Current participant count
        description:
          type: string
          maxLength: 2000
          description: Detailed event description
        end_time:
          type: string
          format: date-time
          description: Event end timestamp
        max_participants:
          type: integer
          minimum: 0
          description: Maximum allowed participants
        objectives:
          type: object
          description: Event objectives (JSON)
          additionalProperties: true
        rewards:
          type: object
          description: Event rewards (JSON)
          additionalProperties: true
        min_level:
          type: integer
          minimum: 1
          maximum: 100
          description: Minimum player level requirement
        max_level:
          type: integer
          minimum: 1
          maximum: 100
          description: Maximum player level requirement
        faction_restrictions:
          type: array
          items:
            type: string
          description: Allowed factions (empty = all allowed)
        region_restrictions:
          type: array
          items:
            type: string
          description: Allowed regions (empty = all allowed)
        prerequisites:
          type: object
          description: Event prerequisites (JSON)
          additionalProperties: true
        metadata:
          type: object
          description: Additional event metadata (JSON)
          additionalProperties: true
        created_at:
          type: string
          format: date-time
          description: Event creation timestamp
        updated_at:
          type: string
          format: date-time
          description: Last update timestamp
      required:
      - id
      - name
      - type
      - region
      - status
      - start_time
      - difficulty
      - current_participants
      - created_at
      - updated_at
    WorldEventDetail:
      allOf:
      - $ref: '#/components/schemas/WorldEvent'
      - type: object
        properties:
          participants:
            type: array
            items:
              $ref: '#/components/schemas/EventParticipant'
            description: Current event participants
    CreateEventRequest:
      type: object
      description: '**BACKEND NOTE: Fields ordered for struct alignment (large ->
        small). Expected memory savings: 20-30%. Validation: Comprehensive business
        rule checks.**'
      properties:
        name:
          type: string
          minLength: 3
          maxLength: 255
          description: Event display name
        type:
          $ref: '#/components/schemas/WorldEventType'
        region:
          type: string
          minLength: 2
          maxLength: 100
          description: Geographic region
        start_time:
          type: string
          format: date-time
          description: Event start timestamp
        difficulty:
          $ref: '#/components/schemas/WorldEventDifficulty'
        description:
          type: string
          maxLength: 2000
          description: Detailed event description
        end_time:
          type: string
          format: date-time
          description: Event end timestamp
        max_participants:
          type: integer
          minimum: 1
          maximum: 1000000
          description: Maximum allowed participants
        objectives:
          type: object
          description: Event objectives (JSON)
          additionalProperties: true
        rewards:
          type: object
          description: Event rewards (JSON)
          additionalProperties: true
        min_level:
          type: integer
          minimum: 1
          maximum: 100
          description: Minimum player level requirement
        max_level:
          type: integer
          minimum: 1
          maximum: 100
          description: Maximum player level requirement
        faction_restrictions:
          type: array
          items:
            type: string
          description: Allowed factions (empty = all allowed)
        region_restrictions:
          type: array
          items:
            type: string
          description: Allowed regions (empty = all allowed)
        prerequisites:
          type: object
          description: Event prerequisites (JSON)
          additionalProperties: true
        metadata:
          type: object
          description: Additional event metadata (JSON)
          additionalProperties: true
      required:
      - name
      - type
      - region
      - start_time
      - difficulty
    UpdateEventRequest:
      type: object
      description: '**BACKEND NOTE: Fields ordered for struct alignment. Partial updates
        supported with optimistic locking.**'
      properties:
        name:
          type: string
          minLength: 3
          maxLength: 255
          description: Event display name
        description:
          type: string
          maxLength: 2000
          description: Detailed event description
        status:
          $ref: '#/components/schemas/WorldEventStatus'
        end_time:
          type: string
          format: date-time
          description: Event end timestamp
        max_participants:
          type: integer
          minimum: 1
          maximum: 1000000
          description: Maximum allowed participants
        objectives:
          type: object
          description: Event objectives (JSON)
          additionalProperties: true
        rewards:
          type: object
          description: Event rewards (JSON)
          additionalProperties: true
        faction_restrictions:
          type: array
          items:
            type: string
          description: Allowed factions (empty = all allowed)
        region_restrictions:
          type: array
          items:
            type: string
          description: Allowed regions (empty = all allowed)
        prerequisites:
          type: object
          description: Event prerequisites (JSON)
          additionalProperties: true
        metadata:
          type: object
          description: Additional event metadata (JSON)
          additionalProperties: true
    EventParticipant:
      type: object
      description: '**BACKEND NOTE: Fields ordered for struct alignment. Performance:
        Indexed queries for participant lookups.**'
      properties:
        player_id:
          type: string
          format: uuid
          description: Unique player identifier
        joined_at:
          type: string
          format: date-time
          description: Participation join timestamp
        status:
          $ref: '#/components/schemas/ParticipationStatus'
        progress_data:
          type: object
          description: Player progress data (JSON)
          additionalProperties: true
        score:
          type: integer
          minimum: 0
          description: Player score in event
        rank:
          type: integer
          minimum: 1
          description: Player rank in event
        last_activity_at:
          type: string
          format: date-time
          description: Last activity timestamp
      required:
      - player_id
      - joined_at
      - status
      - last_activity_at
    EventParticipantsList:
      type: object
      properties:
        participants:
          type: array
          items:
            $ref: '#/components/schemas/EventParticipant'
        total:
          type: integer
          minimum: 0
          description: Total number of participants
    EventParticipation:
      type: object
      description: '**BACKEND NOTE: Fields ordered for struct alignment. Audit trail
        with full participation history.**'
      properties:
        id:
          type: string
          format: uuid
          description: Unique participation record ID
        player_id:
          type: string
          format: uuid
          description: Player identifier
        event_id:
          type: string
          format: uuid
          description: Event identifier
        status:
          $ref: '#/components/schemas/ParticipationStatus'
        joined_at:
          type: string
          format: date-time
          description: Participation start timestamp
        last_activity_at:
          type: string
          format: date-time
          description: Last activity timestamp
        completed_at:
          type: string
          format: date-time
          description: Completion timestamp
        failed_at:
          type: string
          format: date-time
          description: Failure timestamp
        abandoned_at:
          type: string
          format: date-time
          description: Abandon timestamp
        progress_data:
          type: object
          description: Progress tracking data (JSON)
          additionalProperties: true
        rewards_claimed:
          type: boolean
          default: false
          description: Whether rewards have been claimed
        score:
          type: integer
          minimum: 0
          description: Final score achieved
        rank:
          type: integer
          minimum: 1
          description: Final rank achieved
        metadata:
          type: object
          description: Additional participation metadata (JSON)
          additionalProperties: true
        created_at:
          type: string
          format: date-time
          description: Record creation timestamp
        updated_at:
          type: string
          format: date-time
          description: Last update timestamp
      required:
      - id
      - player_id
      - event_id
      - status
      - joined_at
      - last_activity_at
      - rewards_claimed
      - created_at
      - updated_at
    EventParticipationResponse:
      type: object
      properties:
        participation:
          $ref: '#/components/schemas/EventParticipation'
    JoinEventRequest:
      type: object
      properties:
        player_id:
          type: string
          format: uuid
          description: Player identifier
      required:
      - player_id
    UpdateParticipationRequest:
      type: object
      properties:
        status:
          $ref: '#/components/schemas/ParticipationStatus'
        progress_data:
          type: object
          description: Updated progress data (JSON)
          additionalProperties: true
        score:
          type: integer
          minimum: 0
          description: Updated score
      required:
      - status
    PlayerEventSummary:
      type: object
      description: '**BACKEND NOTE: Fields ordered for struct alignment. Player-specific
        event history queries.**'
      properties:
        event_id:
          type: string
          format: uuid
          description: Event identifier
        event_name:
          type: string
          maxLength: 255
          description: Event display name
        event_type:
          $ref: '#/components/schemas/WorldEventType'
        status:
          $ref: '#/components/schemas/ParticipationStatus'
        joined_at:
          type: string
          format: date-time
          description: Participation join timestamp
        score:
          type: integer
          minimum: 0
          description: Player score
        rank:
          type: integer
          minimum: 1
          description: Player rank
        rewards_claimed:
          type: boolean
          description: Whether rewards were claimed
      required:
      - event_id
      - event_name
      - event_type
      - status
      - joined_at
      - rewards_claimed
    EventReward:
      type: object
      description: '**BACKEND NOTE: Fields ordered for struct alignment. Reward validation
        and anti-cheat measures.**'
      properties:
        id:
          type: string
          format: uuid
          description: Unique reward identifier
        event_id:
          type: string
          format: uuid
          description: Associated event identifier
        player_id:
          type: string
          format: uuid
          description: Player identifier
        reward_type:
          type: string
          enum:
          - currency
          - item
          - experience
          - cosmetic
          - title
          description: Type of reward
        reward_id:
          type: string
          description: Specific reward identifier
        amount:
          type: integer
          minimum: 1
          description: Reward amount/quantity
        claimed:
          type: boolean
          default: false
          description: Whether reward has been claimed
        claimed_at:
          type: string
          format: date-time
          description: Claim timestamp
        created_at:
          type: string
          format: date-time
          description: Reward creation timestamp
      required:
      - id
      - event_id
      - player_id
      - reward_type
      - amount
      - claimed
      - created_at
    PlayerRewardsList:
      type: object
      properties:
        rewards:
          type: array
          items:
            $ref: '#/components/schemas/EventReward'
        total:
          type: integer
          minimum: 0
          description: Total number of rewards
    ClaimRewardRequest:
      type: object
      properties:
        player_id:
          type: string
          format: uuid
          description: Player identifier for validation
      required:
      - player_id
    RewardClaimResponse:
      type: object
      properties:
        reward_id:
          type: string
          format: uuid
          description: Claimed reward identifier
        player_id:
          type: string
          format: uuid
          description: Player identifier
        event_id:
          type: string
          format: uuid
          description: Associated event identifier
        claimed_at:
          type: string
          format: date-time
          description: Claim timestamp
        status:
          type: string
          enum:
          - success
          - pending
          - failed
          description: Claim status
        delivered:
          type: boolean
          default: false
          description: Whether reward was delivered to player inventory
      required:
      - reward_id
      - player_id
      - event_id
      - claimed_at
      - status
      - delivered
    EventAnalyticsResponse:
      type: object
      description: '**BACKEND NOTE: Aggregated analytics data. Performance: Pre-calculated
        metrics for real-time access.**'
      properties:
        event_id:
          type: string
          format: uuid
          description: Event identifier
        total_participants:
          type: integer
          minimum: 0
          description: Total registered participants
        completed_participants:
          type: integer
          minimum: 0
          description: Participants who completed the event
        average_completion_time:
          type: string
          description: Average time to complete (PostgreSQL interval format)
        average_score:
          type: number
          format: float
          minimum: 0
          description: Average participant score
        participation_rate:
          type: number
          format: float
          minimum: 0
          maximum: 1
          description: Participation completion rate
        satisfaction_rating:
          type: number
          format: float
          minimum: 1
          maximum: 5
          description: Average satisfaction rating
        last_updated:
          type: string
          format: date-time
          description: Analytics last update timestamp
      required:
      - event_id
      - total_participants
      - completed_participants
      - last_updated
    EventTemplateSummary:
      type: object
      description: '**BACKEND NOTE: Template summary for listing. Performance: Cached
        template metadata.**'
      properties:
        id:
          type: string
          format: uuid
          description: Template identifier
        name:
          type: string
          maxLength: 255
          description: Template display name
        type:
          $ref: '#/components/schemas/WorldEventType'
        difficulty:
          $ref: '#/components/schemas/WorldEventDifficulty'
        is_active:
          type: boolean
          default: true
          description: Whether template is active for use
        created_at:
          type: string
          format: date-time
          description: Template creation timestamp
      required:
      - id
      - name
      - type
      - difficulty
      - is_active
      - created_at
    EventTemplate:
      type: object
      description: '**BACKEND NOTE: Complete template with all configuration data.
        Performance: Template inheritance and reusability.**'
      allOf:
      - $ref: '#/components/schemas/EventTemplateSummary'
      - type: object
        properties:
          description:
            type: string
            maxLength: 2000
            description: Template description
          objectives_template:
            type: object
            description: Default objectives configuration (JSON)
            additionalProperties: true
          rewards_template:
            type: object
            description: Default rewards configuration (JSON)
            additionalProperties: true
          duration_minutes:
            type: integer
            minimum: 1
            description: Default event duration in minutes
          max_participants:
            type: integer
            minimum: 1
            description: Default maximum participants
          region_restrictions:
            type: array
            items:
              type: string
            description: Default region restrictions
          event_data_template:
            type: object
            description: Default event data configuration (JSON)
            additionalProperties: true
          updated_at:
            type: string
            format: date-time
            description: Template last update timestamp
        required:
        - updated_at
    EventTemplateResponse:
      type: object
      properties:
        template:
          $ref: '#/components/schemas/EventTemplate'
    CreateTemplateRequest:
      type: object
      description: '**BACKEND NOTE: Template creation request with validation. Performance:
        Template validation on creation.**'
      properties:
        name:
          type: string
          minLength: 3
          maxLength: 255
          description: Template display name
        type:
          $ref: '#/components/schemas/WorldEventType'
        difficulty:
          $ref: '#/components/schemas/WorldEventDifficulty'
        description:
          type: string
          maxLength: 2000
          description: Template description
        objectives_template:
          type: object
          description: Default objectives configuration (JSON)
          additionalProperties: true
        rewards_template:
          type: object
          description: Default rewards configuration (JSON)
          additionalProperties: true
        duration_minutes:
          type: integer
          minimum: 1
          description: Default event duration in minutes
        max_participants:
          type: integer
          minimum: 1
          description: Default maximum participants
        region_restrictions:
          type: array
          items:
            type: string
          description: Default region restrictions
        event_data_template:
          type: object
          description: Default event data configuration (JSON)
          additionalProperties: true
      required:
      - name
      - type
      - difficulty
