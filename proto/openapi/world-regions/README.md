# World Regions Service - OpenAPI Specification

## üìã **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**

World Regions Service –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **enterprise-grade —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–≥–∏–æ–Ω–∞–º–∏** –¥–ª—è NECPGAME —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã. –°–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ —Ä–µ–≥–∏–æ–Ω–∞–º–∏ –∏–≥—Ä–æ–≤–æ–≥–æ –º–∏—Ä–∞, –≤–∫–ª—é—á–∞—è timeline —Å–æ–±—ã—Ç–∏—è, –≥–æ—Ä–æ–¥–∞ –≤ —Ä–µ–≥–∏–æ–Ω–∞—Ö –∏ narrative –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é.

## üéØ **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**

### üó∫Ô∏è **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –†–µ–≥–∏–æ–Ω–∞–º–∏**
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–µ–≥–∏–æ–Ω–æ–≤ –≤ –∏–≥—Ä–æ–≤–æ–º –º–∏—Ä–µ
- –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –∏ —Ç–æ–ø–æ–≥—Ä–∞—Ñ–∏—è
- –ö–ª–∏–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–æ–Ω—ã –∏ –±–∏–æ–º—ã
- –ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å

### üèôÔ∏è **–ì–æ—Ä–æ–¥—Å–∫–∞—è –ò–µ—Ä–∞—Ä—Ö–∏—è**
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –≥–æ—Ä–æ–¥–æ–≤ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º
- –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Ç–æ–ª–∏—Ü—ã –∏ —Ü–µ–Ω—Ç—Ä—ã
- –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å–µ—Ç–∏ –º–µ–∂–¥—É –≥–æ—Ä–æ–¥–∞–º–∏
- –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏ –∏ —Ç–æ—Ä–≥–æ–≤—ã–µ –ø—É—Ç–∏

### üìú **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –°–æ–±—ã—Ç–∏—è**
- Timeline —Å–æ–±—ã—Ç–∏–π –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º
- –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è —ç–≤–æ–ª—é—Ü–∏—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π
- –ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
- –ö—É–ª—å—Ç—É—Ä–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ –∏ —Ç—Ä–∞–¥–∏—Ü–∏–∏

### üåç **–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**
- –õ–∞–Ω–¥—à–∞—Ñ—Ç –∏ –ø—Ä–∏—Ä–æ–¥–Ω—ã–µ –∑–æ–Ω—ã
- –†–µ—Å—É—Ä—Å—ã –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏
- –û–ø–∞—Å–Ω—ã–µ –∑–æ–Ω—ã –∏ –∑–∞–ø—Ä–µ—Ç–Ω—ã–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏
- –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã

### üé≠ **Narrative –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å—é–∂–µ—Ç–Ω—ã–µ –ª–∏–Ω–∏–∏
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –ª–µ–≥–µ–Ω–¥—ã –∏ –º–∏—Ñ—ã
- –ö—É–ª—å—Ç—É—Ä–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Ç—Ä–∞–¥–∏—Ü–∏–∏
- –ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –∏ NPC –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ —Ä–µ–≥–∏–æ–Ω–∞–º

## üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

### Enterprise-Grade –ü—Ä–∏–Ω—Ü–∏–ø—ã
- **SOLID/DRY Compliance**: –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- **Performance Optimized**: –°—Ç—Ä—É–∫—Ç—É—Ä—ã —Å —É—á–µ—Ç–æ–º alignment –ø–∞–º—è—Ç–∏
- **Security First**: JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- **Scalable Design**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∏–ª–ª–∏–æ–Ω–æ–≤ —Ä–µ–≥–∏–æ–Ω–æ–≤

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **P99 Latency**: <30ms –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ä–µ–≥–∏–æ–Ω–∞–º–∏
- **Memory**: <40KB –Ω–∞ –∞–∫—Ç–∏–≤–Ω—É—é —Å–µ—Å—Å–∏—é —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–≥–∏–æ–Ω–∞–º–∏
- **Concurrent Users**: 75,000+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **Spatial Queries**: <50ms –¥–ª—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üîå **API Endpoints**

### –û—Å–Ω–æ–≤–Ω—ã–µ –û–ø–µ—Ä–∞—Ü–∏–∏
- `GET /regions` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–µ–≥–∏–æ–Ω–æ–≤
- `POST /regions` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ä–µ–≥–∏–æ–Ω
- `GET /regions/{id}` - –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–≥–∏–æ–Ω –ø–æ ID
- `PUT /regions/{id}` - –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–≥–∏–æ–Ω
- `DELETE /regions/{id}` - –£–¥–∞–ª–∏—Ç—å —Ä–µ–≥–∏–æ–Ω

### –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ó–∞–ø—Ä–æ—Å—ã
- `GET /regions/search` - –ü–æ–∏—Å–∫ —Ä–µ–≥–∏–æ–Ω–æ–≤ –ø–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º
- `GET /regions/{id}/cities` - –ì–æ—Ä–æ–¥–∞ –≤ —Ä–µ–≥–∏–æ–Ω–µ
- `GET /regions/{id}/timeline` - Timeline —Å–æ–±—ã—Ç–∏–π —Ä–µ–≥–∏–æ–Ω–∞
- `GET /regions/boundary` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ —Ç–æ—á–∫–∏ –∫ —Ä–µ–≥–∏–æ–Ω—É

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –§—É–Ω–∫—Ü–∏–∏
- `POST /regions/{id}/cities` - –î–æ–±–∞–≤–∏—Ç—å –≥–æ—Ä–æ–¥ –≤ —Ä–µ–≥–∏–æ–Ω
- `PUT /regions/{id}/timeline` - –û–±–Ω–æ–≤–∏—Ç—å timeline —Å–æ–±—ã—Ç–∏—è
- `PATCH /regions/{id}/boundaries` - –û–±–Ω–æ–≤–∏—Ç—å –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã

### WebSocket –û–ø–µ—Ä–∞—Ü–∏–∏
- `GET /regions/health/ws` - WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- `POST /regions/{id}/events` - –¢—Ä–∞–Ω—Å–ª–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ –≤ —Ä–µ–≥–∏–æ–Ω

## üìä **–°—Ö–µ–º—ã –î–∞–Ω–Ω—ã—Ö**

### Region Entity
```yaml
Region:
  type: object
  properties:
    id: string (UUID)
    name: string
    boundaries: GeoPolygon
    biome_type: string
    climate: string
    controlling_faction: string (UUID)
    cities: CityReference[]
    timeline_events: TimelineEvent[]
    natural_resources: Resource[]
    danger_level: integer (1-10)
```

### Timeline Event
```yaml
TimelineEvent:
  type: object
  properties:
    id: string (UUID)
    title: string
    description: string
    event_date: date-time
    event_type: string
    impact_level: integer (1-10)
    affected_cities: string[] (UUIDs)
    narrative_importance: integer (1-5)
```

### City Reference
```yaml
CityReference:
  type: object
  properties:
    city_id: string (UUID)
    city_name: string
    city_type: string
    population: integer
    coordinates: GeoPoint
    regional_role: string
```

## üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**

- **JWT Authentication**: –í—Å–µ endpoints —Ç—Ä–µ–±—É—é—Ç –≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω
- **Role-Based Access**: –†–∞–∑–ª–∏—á–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤/–∞–¥–º–∏–Ω–æ–≤
- **Input Validation**: –°—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **Rate Limiting**: –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π –≥–µ–æ-–∑–∞–ø—Ä–æ—Å–∞–º–∏
- **Audit Logging**: –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–µ–≥–∏–æ–Ω–æ–≤

## üìà **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞**

- **Performance Metrics**: P99 latency, throughput, error rates
- **Geographic Analytics**: –ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å —Ä–µ–≥–∏–æ–Ω–æ–≤, –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–≤–∏–∂–µ–Ω–∏—è
- **Content Metrics**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–≤–µ—Å—Ç–æ–≤
- **User Engagement**: –í—Ä–µ–º—è –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω–æ–µ –≤ —Ä–µ–≥–∏–æ–Ω–∞—Ö

## üöÄ **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**

### Production Environment
- Kubernetes –∫–ª–∞—Å—Ç–µ—Ä —Å auto-scaling
- PostgreSQL —Å PostGIS –¥–ª—è –≥–µ–æ–¥–∞–Ω–Ω—ã—Ö
- Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –≥–µ–æ-–∑–∞–ø—Ä–æ—Å–æ–≤
- WebSocket —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

### Development Environment
- Docker Compose –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- In-memory database –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- Mock –≥–µ–æ-–¥–∞–Ω–Ω—ã–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞

## ü§ù **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**

- **World Cities Service**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞–º–∏ –≤ —Ä–µ–≥–∏–æ–Ω–∞—Ö
- **Location Service**: –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ –∑–æ–Ω—ã
- **Faction Service**: –ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–µ–≥–∏–æ–Ω–æ–≤ —Ñ—Ä–∞–∫—Ü–∏—è–º–∏
- **Quest Service**: –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–≤–µ—Å—Ç—ã –∏ –º–∏—Å—Å–∏–∏
- **Timeline Service**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π

## üìù **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**

### –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–≥–∏–æ–Ω–∞
```bash
curl -X POST /api/v1/world-regions/regions \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Badlands",
    "boundaries": {"type": "Polygon", "coordinates": [[[ ... ]]},
    "biome_type": "desert",
    "climate": "harsh",
    "danger_level": 8,
    "description": "Lawless wasteland filled with nomads and outlaws"
  }'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞ —Å –≥–æ—Ä–æ–¥–∞–º–∏
```bash
curl "/api/v1/world-regions/regions/{id}?include=cities,timeline"
```

### WebSocket –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
```javascript
const ws = new WebSocket('ws://api.necpgame.com/v1/world-regions/regions/{id}/events');
ws.onmessage = (event) => {
  const regionEvent = JSON.parse(event.data);
  // Handle real-time region events
};
```

–≠—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫—É—é –æ—Å–Ω–æ–≤—É –¥–ª—è NECPGAME, –ø–æ–∑–≤–æ–ª—è—è —Å–æ–∑–¥–∞–≤–∞—Ç—å immersive, –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–Ω—ã–π –º–∏—Ä —Å –±–æ–≥–∞—Ç—ã–º–∏ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏.
