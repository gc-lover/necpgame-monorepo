openapi: 3.0.3
info:
  title: Achievement Service API
  description: '**Enterprise-grade API for Achievement System**


    ## Domain Purpose

    Achievement Service provides comprehensive achievement and reward system for NECPGAME
    platform with enterprise-grade performance and scalability.


    ## Performance Targets

    - P99 Latency: <30ms for all endpoints

    - Memory per Instance: <50KB baseline

    - Concurrent Users: 500,000+ supported

    - Uptime: 99.9% SLA


    ## Domain Inheritance

    This service inherits from game-entities.yaml providing:

    - Consistent base entity structure (id, timestamps, version)

    - Achievement progress tracking entities

    - Optimistic locking for concurrent operations

    - Strict typing with validation rules

    '
  version: 1.0.0
  contact:
    name: NECPGAME API Team
    email: api@necpgame.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
servers:
- url: https://api.necpgame.com/v1/achievement
  description: Production environment
- url: https://staging-api.necpgame.com/v1/achievement
  description: Staging environment
- url: http://localhost:8080/api/v1/achievement
  description: Local development
security:
- BearerAuth: []
tags:
- name: Achievements
  description: Core achievement operations
- name: Progress Tracking
  description: Achievement progress management
- name: Rewards
  description: Reward distribution system
- name: Analytics
  description: Achievement analytics and reporting
- name: Health Monitoring
  description: Service health and performance monitoring
- name: Administration
  description: Administrative operations
paths:
  /health:
    get:
      operationId: achievementHealthCheck
      summary: Basic health check
      description: Returns service health status
      tags:
      - Health Monitoring
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                type: object
                required:
                - status
                - timestamp
                properties:
                  status:
                    type: string
                    enum:
                    - ok
                    - degraded
                    - critical
                    example: ok
                    description: Current health status
                  message:
                    type: string
                    example: Service is healthy
                    description: Human-readable status message
                  timestamp:
                    type: string
                    format: date-time
                    example: '2024-01-15T10:30:00Z'
                    description: Time when health check was performed
                  version:
                    type: string
                    example: 1.0.0
                    description: Service version
                  uptime:
                    type: integer
                    example: 3600
                    description: Service uptime in seconds
                  checks:
                    type: object
                    description: Detailed health checks
                    additionalProperties:
                      type: object
                      properties:
                        status:
                          type: string
                          enum:
                          - ok
                          - degraded
                          - critical
                        message:
                          type: string
                        response_time:
                          type: integer
                          description: Response time in milliseconds
        '503':
          description: Service is unhealthy
          content:
            application/json:
              schema:
                allOf:
                - $ref: '#/components/schemas/Error'
                - type: object
                  properties:
                    code:
                      example: 503
                    message:
                      example: Service temporarily unavailable
                    estimated_recovery_time:
                      type: integer
                      description: Estimated recovery time in seconds
                      example: 300
                    maintenance_mode:
                      type: boolean
                      description: Whether service is in maintenance mode
                      example: false
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /health/detailed:
    get:
      operationId: achievementDetailedHealthCheck
      summary: Detailed health check with metrics
      description: Returns comprehensive health status including performance metrics
      tags:
      - Health Monitoring
      responses:
        '200':
          description: Detailed health information
          content:
            application/json:
              schema:
                allOf:
                - $ref: '#/components/schemas/HealthResponse'
                - type: object
                  properties:
                    dependencies:
                      type: object
                      description: Health status of service dependencies
                      properties:
                        database:
                          $ref: '#/components/schemas/HealthResponse'
                        redis:
                          $ref: '#/components/schemas/HealthResponse'
                        external_services:
                          type: array
                          items:
                            type: object
                            properties:
                              name:
                                type: string
                                example: payment-service
                              status:
                                type: string
                                enum:
                                - ok
                                - degraded
                                - critical
                              response_time:
                                type: integer
                    metrics:
                      type: object
                      description: Service performance metrics
                      properties:
                        active_connections:
                          type: integer
                          example: 150
                        requests_per_second:
                          type: number
                          example: 45.2
                        average_response_time:
                          type: integer
                          example: 25
                        error_rate:
                          type: number
                          example: 0.001
        '503':
          description: Service is unhealthy
          content:
            application/json:
              schema:
                allOf:
                - $ref: '#/components/schemas/Error'
                - type: object
                  properties:
                    code:
                      example: 503
                    message:
                      example: Service temporarily unavailable
                    estimated_recovery_time:
                      type: integer
                      description: Estimated recovery time in seconds
                      example: 300
                    maintenance_mode:
                      type: boolean
                      description: Whether service is in maintenance mode
                      example: false
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /achievements:
    get:
      operationId: listAchievements
      summary: List achievements with filtering and pagination
      description: 'Retrieve a paginated list of achievements with advanced filtering
        options.


        **Performance Notes:**

        - Uses database indexes for efficient filtering

        - Implements cursor-based pagination for large datasets

        - Response cached for 30 seconds

        '
      tags:
      - Achievements
      parameters:
      - name: limit
        in: query
        schema:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
        description: Number of items to return
      - name: cursor
        in: query
        schema:
          type: string
        description: Pagination cursor
      - name: category
        in: query
        schema:
          type: string
          enum:
          - progress
          - milestone
          - challenge
          - seasonal
        description: Achievement category filter
      - name: status
        in: query
        schema:
          type: string
          enum:
          - active
          - inactive
          - deprecated
          default: active
        description: Achievement status filter
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                required:
                - success
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Operation completed successfully
                  data:
                    type: array
                    description: Array of items
                  pagination:
                    type: object
                    properties:
                      page:
                        type: integer
                        example: 1
                      per_page:
                        type: integer
                        example: 25
                      total:
                        type: integer
                        example: 100
                      total_pages:
                        type: integer
                        example: 4
                  timestamp:
                    type: string
                    format: date-time
                    example: '2024-01-15T10:30:00Z'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
    post:
      operationId: createAchievement
      summary: Create a new achievement
      description: 'Create a new achievement with validation and business rules.


        **Business Rules:**

        - Validates all required fields

        - Applies domain-specific constraints

        - Generates audit trail

        '
      tags:
      - Achievements
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAchievementRequest'
      responses:
        '201':
          description: Achievement created successfully
          content:
            application/json:
              schema:
                allOf:
                - $ref: '#/components/schemas/OK'
                - type: object
                  properties:
                    data:
                      $ref: '#/components/schemas/Achievement'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '429':
          $ref: '#/components/responses/TooManyRequests'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /achievements/{achievementId}:
    get:
      operationId: getAchievement
      summary: Get achievement details
      description: Retrieve detailed information about a specific achievement
      tags:
      - Achievements
      parameters:
      - name: achievementId
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Achievement unique identifier
      responses:
        '200':
          description: Achievement details
          content:
            application/json:
              schema:
                allOf:
                - $ref: '#/components/schemas/OK'
                - type: object
                  properties:
                    data:
                      $ref: '#/components/schemas/Achievement'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
    put:
      operationId: updateAchievement
      summary: Update achievement
      description: Update achievement details with optimistic locking
      tags:
      - Achievements
      parameters:
      - name: achievementId
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Achievement unique identifier
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAchievementRequest'
      responses:
        '200':
          description: Achievement updated successfully
          content:
            application/json:
              schema:
                allOf:
                - $ref: '#/components/schemas/OK'
                - type: object
                  properties:
                    data:
                      $ref: '#/components/schemas/Achievement'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /players/{playerId}/achievements:
    get:
      operationId: getPlayerAchievements
      summary: Get player's achievements
      description: Retrieve all achievements for a specific player with progress
      tags:
      - Progress Tracking
      parameters:
      - name: playerId
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Player unique identifier
      - name: status
        in: query
        schema:
          type: string
          enum:
          - locked
          - in_progress
          - completed
        description: Achievement progress status filter
      - name: category
        in: query
        schema:
          type: string
          enum:
          - progress
          - milestone
          - challenge
          - seasonal
        description: Achievement category filter
      responses:
        '200':
          description: Player achievements
          content:
            application/json:
              schema:
                allOf:
                - $ref: '#/components/schemas/OK'
                - type: object
                  properties:
                    data:
                      type: array
                      items:
                        $ref: '#/components/schemas/PlayerAchievement'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /players/{playerId}/achievements/check:
    post:
      operationId: checkPlayerAchievements
      summary: Check and update achievement progress
      description: 'Check player''s progress against all active achievements and update
        progress.

        This is called when player performs actions that may unlock achievements.

        '
      tags:
      - Progress Tracking
      parameters:
      - name: playerId
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Player unique identifier
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CheckAchievementsRequest'
      responses:
        '200':
          description: Achievement check completed
          content:
            application/json:
              schema:
                allOf:
                - $ref: '#/components/schemas/OK'
                - type: object
                  properties:
                    data:
                      type: object
                      properties:
                        unlocked:
                          type: array
                          items:
                            $ref: '#/components/schemas/AchievementUnlock'
                        progress_updated:
                          type: array
                          items:
                            $ref: '#/components/schemas/AchievementProgress'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /players/{playerId}/achievements/{achievementId}/unlock:
    post:
      operationId: unlockPlayerAchievement
      summary: Manually unlock achievement for player
      description: 'Manually unlock an achievement for a player (admin operation).

        Used for testing, events, or special promotions.

        '
      tags:
      - Progress Tracking
      - Administration
      parameters:
      - name: playerId
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Player unique identifier
      - name: achievementId
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Achievement unique identifier
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UnlockAchievementRequest'
      responses:
        '200':
          description: Achievement unlocked successfully
          content:
            application/json:
              schema:
                allOf:
                - $ref: '#/components/schemas/OK'
                - type: object
                  properties:
                    data:
                      $ref: '#/components/schemas/AchievementUnlock'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /rewards/claim:
    post:
      operationId: claimRewards
      summary: Claim achievement rewards
      description: 'Claim rewards for completed achievements.

        Rewards are distributed automatically to player''s inventory/wallet.

        '
      tags:
      - Rewards
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClaimRewardsRequest'
      responses:
        '200':
          description: Rewards claimed successfully
          content:
            application/json:
              schema:
                allOf:
                - $ref: '#/components/schemas/OK'
                - type: object
                  properties:
                    data:
                      type: object
                      properties:
                        claimed_rewards:
                          type: array
                          items:
                            $ref: '#/components/schemas/RewardClaim'
                        distribution_results:
                          type: array
                          items:
                            $ref: '#/components/schemas/DistributionResult'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '409':
          $ref: '#/components/responses/Conflict'
        '401':
          $ref: '#/components/responses/Unauthorized'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /analytics/achievements:
    get:
      operationId: getAchievementAnalytics
      summary: Get achievement analytics
      description: Retrieve analytics data for achievements and player engagement
      tags:
      - Analytics
      parameters:
      - name: period
        in: query
        schema:
          type: string
          enum:
          - day
          - week
          - month
          - quarter
          - year
          default: month
        description: Analytics period
      - name: category
        in: query
        schema:
          type: string
          enum:
          - progress
          - milestone
          - challenge
          - seasonal
        description: Achievement category filter
      responses:
        '200':
          description: Achievement analytics
          content:
            application/json:
              schema:
                allOf:
                - $ref: '#/components/schemas/OK'
                - type: object
                  properties:
                    data:
                      $ref: '#/components/schemas/AchievementAnalytics'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
components:
  schemas:
    Achievement:
      allOf:
      - type: object
        required:
        - id
        - created_at
        - updated_at
        properties:
          id:
            type: string
            format: uuid
            description: Unique identifier
            example: f47ac10b-58cc-4372-a567-0e02b2c3d479
          created_at:
            type: string
            format: date-time
            description: Creation timestamp
            example: '2024-01-15T10:30:00Z'
          updated_at:
            type: string
            format: date-time
            description: Last modification timestamp
            example: '2024-01-15T14:20:00Z'
      - type: object
        required:
        - name
        - description
        - category
        - requirements
        - rewards
        properties:
          name:
            type: string
            minLength: 1
            maxLength: 100
            description: Achievement display name
          description:
            type: string
            minLength: 1
            maxLength: 500
            description: Achievement description
          category:
            type: string
            enum:
            - progress
            - milestone
            - challenge
            - seasonal
            description: Achievement category
          requirements:
            type: object
            description: Achievement completion requirements
            properties:
              type:
                type: string
                enum:
                - count
                - threshold
                - combination
                - time_based
              target_value:
                type: number
                minimum: 1
              conditions:
                type: array
                items:
                  $ref: '#/components/schemas/AchievementCondition'
          rewards:
            type: array
            items:
              $ref: '#/components/schemas/AchievementReward'
            description: Rewards for completing achievement
          status:
            type: string
            enum:
            - active
            - inactive
            - deprecated
            default: active
            description: Achievement status
          max_progress:
            type: integer
            minimum: 1
            description: Maximum progress value for progress-based achievements
          is_hidden:
            type: boolean
            default: false
            description: Whether achievement is hidden until unlocked
          prerequisites:
            type: array
            items:
              type: string
              format: uuid
            description: IDs of prerequisite achievements
    AchievementSummary:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        category:
          type: string
          enum:
          - progress
          - milestone
          - challenge
          - seasonal
        status:
          type: string
          enum:
          - active
          - inactive
          - deprecated
        is_hidden:
          type: boolean
        max_progress:
          type: integer
        created_at:
          type: string
          format: date-time
    AchievementCondition:
      type: object
      required:
      - type
      - target
      properties:
        type:
          type: string
          enum:
          - kill_count
          - score_threshold
          - item_collect
          - quest_complete
          - time_played
          - level_reached
        target:
          type: string
          description: Target entity (enemy type, item id, quest id, etc.)
        value:
          type: number
          minimum: 0
        operator:
          type: string
          enum:
          - equals
          - greater_than
          - less_than
          - greater_equal
          - less_equal
          default: greater_equal
    AchievementReward:
      type: object
      required:
      - type
      - value
      properties:
        type:
          type: string
          enum:
          - currency
          - item
          - title
          - cosmetic
          - experience
          - reputation
        value:
          oneOf:
          - type: number
          - type: string
          description: Reward value (amount or item ID)
        rarity:
          type: string
          enum:
          - common
          - uncommon
          - rare
          - epic
          - legendary
          description: Reward rarity (for display purposes)
    PlayerAchievement:
      allOf:
      - type: object
        required:
        - id
        - created_at
        - updated_at
        properties:
          id:
            type: string
            format: uuid
            description: Unique identifier
            example: f47ac10b-58cc-4372-a567-0e02b2c3d479
          created_at:
            type: string
            format: date-time
            description: Creation timestamp
            example: '2024-01-15T10:30:00Z'
          updated_at:
            type: string
            format: date-time
            description: Last modification timestamp
            example: '2024-01-15T14:20:00Z'
      - type: object
        required:
        - player_id
        - achievement_id
        - status
        properties:
          player_id:
            type: string
            format: uuid
            description: Player unique identifier
          achievement_id:
            type: string
            format: uuid
            description: Achievement unique identifier
          status:
            type: string
            enum:
            - locked
            - in_progress
            - completed
            description: Achievement progress status
          current_progress:
            type: integer
            minimum: 0
            default: 0
            description: Current progress value
          completed_at:
            type: string
            format: date-time
            description: Completion timestamp
          unlocked_at:
            type: string
            format: date-time
            description: Unlock timestamp
          last_updated:
            type: string
            format: date-time
            description: Last progress update timestamp
    AchievementProgress:
      type: object
      required:
      - achievement_id
      - previous_progress
      - new_progress
      properties:
        achievement_id:
          type: string
          format: uuid
        previous_progress:
          type: integer
          minimum: 0
        new_progress:
          type: integer
          minimum: 0
        completed:
          type: boolean
          description: Whether achievement was completed in this update
    AchievementUnlock:
      allOf:
      - $ref: '#/components/schemas/AchievementProgress'
      - type: object
        properties:
          unlocked_at:
            type: string
            format: date-time
          rewards_claimed:
            type: boolean
            default: false
    CreateAchievementRequest:
      type: object
      required:
      - name
      - description
      - category
      - requirements
      - rewards
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
          minLength: 1
          maxLength: 500
        category:
          type: string
          enum:
          - progress
          - milestone
          - challenge
          - seasonal
        requirements:
          $ref: '#/components/schemas/AchievementRequirements'
        rewards:
          type: array
          items:
            $ref: '#/components/schemas/AchievementReward'
        max_progress:
          type: integer
          minimum: 1
        is_hidden:
          type: boolean
          default: false
        prerequisites:
          type: array
          items:
            type: string
            format: uuid
    UpdateAchievementRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
          minLength: 1
          maxLength: 500
        requirements:
          $ref: '#/components/schemas/AchievementRequirements'
        rewards:
          type: array
          items:
            $ref: '#/components/schemas/AchievementReward'
        status:
          type: string
          enum:
          - active
          - inactive
          - deprecated
        max_progress:
          type: integer
          minimum: 1
        is_hidden:
          type: boolean
    AchievementRequirements:
      type: object
      required:
      - type
      - target_value
      properties:
        type:
          type: string
          enum:
          - count
          - threshold
          - combination
          - time_based
        target_value:
          type: number
          minimum: 1
        conditions:
          type: array
          items:
            $ref: '#/components/schemas/AchievementCondition'
    CheckAchievementsRequest:
      type: object
      required:
      - player_id
      - actions
      properties:
        player_id:
          type: string
          format: uuid
        actions:
          type: array
          items:
            $ref: '#/components/schemas/PlayerAction'
          description: Player actions that may trigger achievement progress
    PlayerAction:
      type: object
      required:
      - type
      - timestamp
      properties:
        type:
          type: string
          enum:
          - kill_enemy
          - collect_item
          - complete_quest
          - reach_level
          - play_time
          - score_points
        target:
          type: string
          description: Action target (enemy type, item id, quest id, etc.)
        value:
          type: number
          minimum: 0
          description: Action value (kill count, score, etc.)
        timestamp:
          type: string
          format: date-time
        metadata:
          type: object
          description: Additional action metadata
    UnlockAchievementRequest:
      type: object
      properties:
        reason:
          type: string
          enum:
          - admin_override
          - event_bonus
          - testing
          - promotion
          default: admin_override
        admin_notes:
          type: string
          maxLength: 500
        skip_prerequisites:
          type: boolean
          default: false
    ClaimRewardsRequest:
      type: object
      required:
      - player_id
      - achievement_ids
      properties:
        player_id:
          type: string
          format: uuid
        achievement_ids:
          type: array
          items:
            type: string
            format: uuid
          minItems: 1
          description: IDs of achievements to claim rewards for
    RewardClaim:
      type: object
      required:
      - achievement_id
      - rewards
      - claimed_at
      properties:
        achievement_id:
          type: string
          format: uuid
        rewards:
          type: array
          items:
            $ref: '#/components/schemas/AchievementReward'
        claimed_at:
          type: string
          format: date-time
    DistributionResult:
      type: object
      required:
      - reward_type
      - success
      properties:
        reward_type:
          type: string
          enum:
          - currency
          - item
          - title
          - cosmetic
          - experience
          - reputation
        success:
          type: boolean
        distributed_to:
          type: string
          description: Target service/system where reward was distributed
        amount:
          type: number
          description: Amount distributed
        error_message:
          type: string
          description: Error message if distribution failed
    AchievementAnalytics:
      type: object
      properties:
        period:
          type: object
          properties:
            start_date:
              type: string
              format: date
            end_date:
              type: string
              format: date
        total_achievements:
          type: integer
        active_achievements:
          type: integer
        completion_stats:
          type: object
          properties:
            total_completions:
              type: integer
            unique_players:
              type: integer
            average_completion_time:
              type: string
              description: Average time to complete achievements
        category_breakdown:
          type: object
          additionalProperties:
            type: object
            properties:
              total:
                type: integer
              completions:
                type: integer
              completion_rate:
                type: number
                format: float
        top_achievements:
          type: array
          items:
            type: object
            properties:
              achievement_id:
                type: string
                format: uuid
              name:
                type: string
              completions:
                type: integer
              completion_rate:
                type: number
                format: float
    HealthResponse:
      type: object
      required:
      - status
      - timestamp
      properties:
        status:
          type: string
          enum:
          - ok
          - degraded
          - critical
          example: ok
          description: Current health status
        message:
          type: string
          example: Service is healthy
          description: Human-readable status message
        timestamp:
          type: string
          format: date-time
          example: '2024-01-15T10:30:00Z'
          description: Time when health check was performed
        version:
          type: string
          example: 1.0.0
          description: Service version
        uptime:
          type: integer
          example: 3600
          description: Service uptime in seconds
        checks:
          type: object
          description: Detailed health checks
          additionalProperties:
            type: object
            properties:
              status:
                type: string
                enum:
                - ok
                - degraded
                - critical
              message:
                type: string
              response_time:
                type: integer
                description: Response time in milliseconds
    DetailedHealthResponse:
      allOf:
      - $ref: '#/components/schemas/HealthResponse'
      - type: object
        properties:
          dependencies:
            type: object
            description: Health status of service dependencies
            properties:
              database:
                $ref: '#/components/schemas/HealthResponse'
              redis:
                $ref: '#/components/schemas/HealthResponse'
              external_services:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                      example: payment-service
                    status:
                      type: string
                      enum:
                      - ok
                      - degraded
                      - critical
                    response_time:
                      type: integer
          metrics:
            type: object
            description: Service performance metrics
            properties:
              active_connections:
                type: integer
                example: 150
              requests_per_second:
                type: number
                example: 45.2
              average_response_time:
                type: integer
                example: 25
              error_rate:
                type: number
                example: 0.001
    HealthBatchRequest:
      type: object
      properties:
        services:
          type: array
          items:
            type: string
            example: database
          description: List of services to check
        timeout:
          type: integer
          minimum: 1
          maximum: 30
          default: 5
          description: Timeout for each health check in seconds
    HealthBatchResponse:
      type: object
      properties:
        overall_status:
          type: string
          enum:
          - ok
          - degraded
          - critical
          example: ok
          description: Overall health status across all checked services
        timestamp:
          type: string
          format: date-time
          example: '2024-01-15T10:30:00Z'
        results:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/HealthResponse'
          description: Health results for each service
    Error:
      type: object
      required:
      - code
      - message
      properties:
        code:
          type: integer
          minimum: 100
          maximum: 599
          example: 400
        message:
          type: string
          example: Bad request
        details:
          type: object
          description: Additional error details
    BadRequest:
      allOf:
      - $ref: '#/components/schemas/Error'
      - type: object
        properties:
          code:
            example: 400
          message:
            example: Invalid request parameters
          validation_errors:
            type: array
            items:
              type: object
              properties:
                field:
                  type: string
                  example: email
                message:
                  type: string
                  example: Invalid email format
    Unauthorized:
      allOf:
      - $ref: '#/components/schemas/Error'
      - type: object
        properties:
          code:
            example: 401
          message:
            example: Authentication required
    Forbidden:
      allOf:
      - $ref: '#/components/schemas/Error'
      - type: object
        properties:
          code:
            example: 403
          message:
            example: Access denied
    NotFound:
      allOf:
      - $ref: '#/components/schemas/Error'
      - type: object
        properties:
          code:
            example: 404
          message:
            example: Resource not found
          resource_type:
            type: string
            example: user
          resource_id:
            type: string
            example: 123e4567-e89b-12d3-a456-426614174000
    Conflict:
      allOf:
      - $ref: '#/components/schemas/Error'
      - type: object
        properties:
          code:
            example: 409
          message:
            example: Resource conflict
          conflict_type:
            type: string
            enum:
            - duplicate
            - version_conflict
            - state_conflict
            example: duplicate
          existing_resource:
            type: object
            description: Information about existing conflicting resource
    TooManyRequests:
      allOf:
      - $ref: '#/components/schemas/Error'
      - type: object
        properties:
          code:
            example: 429
          message:
            example: Rate limit exceeded
          retry_after:
            type: integer
            description: Seconds to wait before retrying
            example: 60
          limit:
            type: integer
            description: Request limit per time window
            example: 100
          window_seconds:
            type: integer
            description: Time window in seconds
            example: 60
    InternalServerError:
      allOf:
      - $ref: '#/components/schemas/Error'
      - type: object
        properties:
          code:
            example: 500
          message:
            example: Internal server error
          request_id:
            type: string
            description: Request ID for tracing
            example: req-123456789
          timestamp:
            type: string
            format: date-time
            example: '2024-01-15T10:30:00Z'
    ServiceUnavailable:
      allOf:
      - $ref: '#/components/schemas/Error'
      - type: object
        properties:
          code:
            example: 503
          message:
            example: Service temporarily unavailable
          estimated_recovery_time:
            type: integer
            description: Estimated recovery time in seconds
            example: 300
          maintenance_mode:
            type: boolean
            description: Whether service is in maintenance mode
            example: false
    Success:
      type: object
      required:
      - success
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Operation completed successfully
        timestamp:
          type: string
          format: date-time
          example: '2024-01-15T10:30:00Z'
        request_id:
          type: string
          description: Request ID for tracing
          example: req-123456789
    Created:
      allOf:
      - $ref: '#/components/schemas/Success'
      - type: object
        required:
        - data
        properties:
          message:
            example: Resource created successfully
          data:
            type: object
            description: Created resource data
          location:
            type: string
            description: URL to access created resource
            example: /api/v1/resources/123
    OK:
      allOf:
      - $ref: '#/components/schemas/Success'
      - type: object
        properties:
          message:
            example: Operation completed successfully
          data:
            type: object
            description: Response data
          meta:
            type: object
            description: Metadata about response
            properties:
              count:
                type: integer
                description: Number of items (for lists)
                example: 25
              total:
                type: integer
                description: Total number of items available
                example: 100
              page:
                type: integer
                description: Current page number
                example: 1
              per_page:
                type: integer
                description: Items per page
                example: 25
    NoContent:
      type: object
      description: Empty response for successful operations that return no content
    PaginatedResponse:
      type: object
      required:
      - success
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: Operation completed successfully
        data:
          type: array
          description: Array of items
        pagination:
          type: object
          properties:
            page:
              type: integer
              example: 1
            per_page:
              type: integer
              example: 25
            total:
              type: integer
              example: 100
            total_pages:
              type: integer
              example: 4
        timestamp:
          type: string
          format: date-time
          example: '2024-01-15T10:30:00Z'
    SuccessResponse:
      $ref: '#/components/schemas/OK'
    Accepted:
      allOf:
      - $ref: '#/components/schemas/Success'
      - type: object
        properties:
          message:
            example: Request accepted for processing
          job_id:
            type: string
            description: Job ID for tracking async operation
            example: job-123456789
          estimated_completion_time:
            type: integer
            description: Estimated completion time in seconds
            example: 30
          status_url:
            type: string
            description: URL to check job status
            example: /api/v1/jobs/job-123456789
    BaseEntity:
      type: object
      required:
      - id
      - created_at
      - updated_at
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier
          example: f47ac10b-58cc-4372-a567-0e02b2c3d479
        created_at:
          type: string
          format: date-time
          description: Creation timestamp
          example: '2024-01-15T10:30:00Z'
        updated_at:
          type: string
          format: date-time
          description: Last modification timestamp
          example: '2024-01-15T14:20:00Z'
    OptimisticLock:
      type: object
      properties:
        version:
          type: integer
          minimum: 1
          description: Version for optimistic locking
          example: 1
    GameEntity:
      type: object
      required:
      - id
      - created_at
      - updated_at
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier for game entity
          example: f47ac10b-58cc-4372-a567-0e02b2c3d479
        created_at:
          type: string
          format: date-time
          description: Entity creation timestamp
          example: '2024-01-15T10:30:00Z'
        updated_at:
          type: string
          format: date-time
          description: Last modification timestamp
          example: '2024-01-15T14:20:00Z'
        version:
          type: integer
          minimum: 1
          description: Optimistic locking version for concurrent operations
          example: 1
    CharacterEntity:
      allOf:
      - $ref: '#/components/schemas/GameEntity'
      - type: object
        required:
        - level
        - experience
        - stats
        properties:
          level:
            type: integer
            minimum: 1
            maximum: 100
            description: Character level
            example: 25
          experience:
            type: integer
            minimum: 0
            description: Current experience points
            example: 15420
          stats:
            $ref: '#/components/schemas/CharacterStats'
          cyberware_level:
            type: integer
            minimum: 0
            maximum: 20
            description: Cyberware enhancement level
            example: 8
          reputation:
            type: integer
            minimum: -1000
            maximum: 1000
            description: Faction reputation score
            example: 450
    CharacterStats:
      type: object
      required:
      - health
      - stamina
      - strength
      - agility
      - intelligence
      - charisma
      properties:
        health:
          type: integer
          minimum: 0
          maximum: 1000
          description: Current health points
          example: 850
        max_health:
          type: integer
          minimum: 1
          maximum: 1000
          description: Maximum health points
          example: 900
        stamina:
          type: integer
          minimum: 0
          maximum: 500
          description: Current stamina points
          example: 320
        max_stamina:
          type: integer
          minimum: 1
          maximum: 500
          description: Maximum stamina points
          example: 350
        strength:
          type: integer
          minimum: 1
          maximum: 100
          description: Physical strength attribute
          example: 75
        agility:
          type: integer
          minimum: 1
          maximum: 100
          description: Speed and reflexes attribute
          example: 68
        intelligence:
          type: integer
          minimum: 1
          maximum: 100
          description: Mental acuity attribute
          example: 82
        charisma:
          type: integer
          minimum: 1
          maximum: 100
          description: Social influence attribute
          example: 45
        perception:
          type: integer
          minimum: 1
          maximum: 100
          description: Awareness and detection attribute
          example: 71
        luck:
          type: integer
          minimum: 1
          maximum: 100
          description: Fortune and probability modifier
          example: 33
    CombatActionEntity:
      allOf:
      - $ref: '#/components/schemas/GameEntity'
      - type: object
        required:
        - action_type
        - source_character_id
        - target_character_id
        - damage_dealt
        properties:
          action_type:
            type: string
            enum:
            - attack
            - defend
            - ability
            - item
            - flee
            description: Type of combat action
            example: attack
          source_character_id:
            type: string
            format: uuid
            description: Character performing the action
            example: f47ac10b-58cc-4372-a567-0e02b2c3d479
          target_character_id:
            type: string
            format: uuid
            description: Character receiving the action
            example: a1b2c3d4-e5f6-7890-abcd-ef1234567890
          damage_dealt:
            type: integer
            minimum: 0
            description: Damage points inflicted
            example: 145
          accuracy_roll:
            type: integer
            minimum: 0
            maximum: 100
            description: Accuracy percentage for the action
            example: 87
          critical_hit:
            type: boolean
            description: Whether this was a critical hit
            example: false
          status_effects:
            type: array
            items:
              $ref: '#/components/schemas/StatusEffect'
            description: Status effects applied by this action
    StatusEffect:
      type: object
      required:
      - effect_type
      - duration
      - potency
      properties:
        effect_type:
          type: string
          enum:
          - poison
          - bleed
          - stun
          - buff_strength
          - buff_agility
          - heal_over_time
          - damage_over_time
          description: Type of status effect
          example: buff_strength
        duration:
          type: integer
          minimum: 0
          description: Effect duration in combat rounds
          example: 3
        potency:
          type: integer
          minimum: 1
          maximum: 100
          description: Effect strength percentage
          example: 25
        source:
          type: string
          enum:
          - ability
          - item
          - environment
          - cyberware
          description: Source of the effect
          example: ability
    AbilityEntity:
      allOf:
      - $ref: '#/components/schemas/GameEntity'
      - type: object
        required:
        - name
        - ability_type
        - cooldown
        - mana_cost
        properties:
          name:
            type: string
            minLength: 1
            maxLength: 50
            description: Ability name
            example: Neural Overload
          ability_type:
            type: string
            enum:
            - offensive
            - defensive
            - healing
            - utility
            - passive
            description: Category of ability
            example: offensive
          cooldown:
            type: integer
            minimum: 0
            description: Cooldown in combat rounds
            example: 3
          mana_cost:
            type: integer
            minimum: 0
            description: Mana/stamina cost to use
            example: 45
          damage_type:
            type: string
            enum:
            - physical
            - energy
            - chemical
            - cyber
            - elemental
            description: Type of damage dealt
            example: cyber
          range:
            type: integer
            minimum: 0
            description: Ability range in game units
            example: 25
          area_effect:
            type: boolean
            description: Whether ability affects multiple targets
            example: false
    InventoryItemEntity:
      allOf:
      - $ref: '#/components/schemas/GameEntity'
      - type: object
        required:
        - item_id
        - quantity
        - durability
        properties:
          item_id:
            type: string
            format: uuid
            description: Reference to item definition
            example: b2c3d4e5-f6g7-8901-bcde-f23456789012
          quantity:
            type: integer
            minimum: 1
            description: Number of items in stack
            example: 5
          durability:
            type: integer
            minimum: 0
            maximum: 100
            description: Item condition percentage
            example: 87
          equipped:
            type: boolean
            description: Whether item is currently equipped
            example: true
          enhancement_level:
            type: integer
            minimum: 0
            maximum: 10
            description: Item enhancement/modification level
            example: 2
    QuestEntity:
      allOf:
      - $ref: '#/components/schemas/GameEntity'
      - type: object
      - type: object
        required:
        - title
        - description
        - quest_type
        - status
        - objectives
        properties:
          title:
            type: string
            minLength: 1
            maxLength: 100
            description: Quest title
            example: Corporate Espionage
          description:
            type: string
            minLength: 1
            maxLength: 1000
            description: Detailed quest description
            example: Infiltrate Arasaka corporation headquarters and extract sensitive
              data...
          quest_type:
            type: string
            enum:
            - main_story
            - side_quest
            - daily
            - event
            - faction
            description: Category of quest
            example: faction
          status:
            type: string
            enum:
            - available
            - active
            - completed
            - failed
            - expired
            description: Current quest status
            example: active
          objectives:
            type: array
            items:
              $ref: '#/components/schemas/QuestObjective'
            minItems: 1
            description: Quest completion objectives
          rewards:
            $ref: '#/components/schemas/QuestRewards'
          time_limit:
            type: integer
            minimum: 0
            description: Time limit in hours (0 = no limit)
            example: 168
          faction_id:
            type: string
            format: uuid
            description: Associated faction
            example: c3d4e5f6-g7h8-9012-cdef-345678901234
    QuestObjective:
      type: object
      required:
      - description
      - objective_type
      - current_progress
      - target_progress
      properties:
        description:
          type: string
          minLength: 1
          maxLength: 200
          description: Objective description
          example: Hack 3 corporate terminals
        objective_type:
          type: string
          enum:
          - kill
          - collect
          - deliver
          - explore
          - interact
          - hack
          - craft
          description: Type of objective
          example: hack
        current_progress:
          type: integer
          minimum: 0
          description: Current completion progress
          example: 2
        target_progress:
          type: integer
          minimum: 1
          description: Required completion target
          example: 3
    QuestRewards:
      type: object
      properties:
        experience:
          type: integer
          minimum: 0
          description: Experience points reward
          example: 2500
        currency:
          type: integer
          minimum: 0
          description: Currency reward
          example: 15000
        items:
          type: array
          items:
            $ref: '#/components/schemas/InventoryItemEntity'
          description: Item rewards
        reputation:
          type: integer
          minimum: -1000
          maximum: 1000
          description: Faction reputation change
          example: 150
  responses:
    BadRequest:
      description: Bad request - validation error
      content:
        application/json:
          schema:
            allOf:
            - $ref: '#/components/schemas/Error'
            - type: object
              properties:
                code:
                  example: 400
                message:
                  example: Invalid request parameters
                validation_errors:
                  type: array
                  items:
                    type: object
                    properties:
                      field:
                        type: string
                        example: email
                      message:
                        type: string
                        example: Invalid email format
    Unauthorized:
      description: Authentication required
      content:
        application/json:
          schema:
            allOf:
            - $ref: '#/components/schemas/Error'
            - type: object
              properties:
                code:
                  example: 401
                message:
                  example: Authentication required
    Forbidden:
      description: Insufficient permissions
      content:
        application/json:
          schema:
            allOf:
            - $ref: '#/components/schemas/Error'
            - type: object
              properties:
                code:
                  example: 403
                message:
                  example: Access denied
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            allOf:
            - $ref: '#/components/schemas/Error'
            - type: object
              properties:
                code:
                  example: 404
                message:
                  example: Resource not found
                resource_type:
                  type: string
                  example: user
                resource_id:
                  type: string
                  example: 123e4567-e89b-12d3-a456-426614174000
    Conflict:
      description: Resource conflict
      content:
        application/json:
          schema:
            allOf:
            - $ref: '#/components/schemas/Error'
            - type: object
              properties:
                code:
                  example: 409
                message:
                  example: Resource conflict
                conflict_type:
                  type: string
                  enum:
                  - duplicate
                  - version_conflict
                  - state_conflict
                  example: duplicate
                existing_resource:
                  type: object
                  description: Information about existing conflicting resource
    TooManyRequests:
      description: Rate limit exceeded
      content:
        application/json:
          schema:
            allOf:
            - $ref: '#/components/schemas/Error'
            - type: object
              properties:
                code:
                  example: 429
                message:
                  example: Rate limit exceeded
                retry_after:
                  type: integer
                  description: Seconds to wait before retrying
                  example: 60
                limit:
                  type: integer
                  description: Request limit per time window
                  example: 100
                window_seconds:
                  type: integer
                  description: Time window in seconds
                  example: 60
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      description: JWT Bearer token authentication
