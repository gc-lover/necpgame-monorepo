// Code generated by ogen, DO NOT EDIT.

package api

import (
	"context"
)

// Handler handles operations described by OpenAPI v3 specification.
type Handler interface {
	// AvatarServiceHealthCheck implements avatarServiceHealthCheck operation.
	//
	// **Enterprise-grade health check endpoint**
	// Provides real-time health status of the avatar management microservice.
	// Critical for service discovery, load balancing, and monitoring.
	// **Performance:** <1ms response time, cached for 30 seconds.
	//
	// GET /health
	AvatarServiceHealthCheck(ctx context.Context, params AvatarServiceHealthCheckParams) (AvatarServiceHealthCheckRes, error)
	// DeleteUserAvatar implements deleteUserAvatar operation.
	//
	// **Avatar deletion endpoint**
	// Removes user avatar and all generated variants. Supports soft delete with recovery.
	// **Performance:** <10ms P95, includes cleanup operations.
	//
	// DELETE /avatars/{user_id}
	DeleteUserAvatar(ctx context.Context, params DeleteUserAvatarParams) (DeleteUserAvatarRes, error)
	// GetAvatarMetadata implements getAvatarMetadata operation.
	//
	// **Avatar metadata endpoint**
	// Retrieves metadata about user's avatar including sizes, formats, and upload history.
	// **Performance:** <5ms P95, cached metadata.
	//
	// GET /avatars/{user_id}/metadata
	GetAvatarMetadata(ctx context.Context, params GetAvatarMetadataParams) (GetAvatarMetadataRes, error)
	// GetUserAvatar implements getUserAvatar operation.
	//
	// **Avatar retrieval endpoint**
	// Retrieves user avatar with optimal size and format based on client requirements. Supports multiple
	// sizes and formats with CDN caching for performance.
	// **Performance:** <15ms P95 with CDN caching.
	//
	// GET /avatars/{user_id}
	GetUserAvatar(ctx context.Context, params GetUserAvatarParams) (GetUserAvatarRes, error)
	// ProcessAvatarImage implements processAvatarImage operation.
	//
	// **Image processing endpoint**
	// Processes uploaded image for avatar use with optimization, resizing, and format conversion. Used
	// internally by upload endpoint but available for advanced use cases.
	// **Performance:** <150ms P95, includes image processing pipeline.
	//
	// POST /process
	ProcessAvatarImage(ctx context.Context, req *ProcessAvatarRequest) (ProcessAvatarImageRes, error)
	// UpdateUserAvatar implements updateUserAvatar operation.
	//
	// **Avatar upload/update endpoint**
	// Uploads new avatar image, processes it with optimization and generates multiple sizes. Supports
	// validation, compression, and automatic format conversion.
	// **Performance:** <200ms P95, includes image processing.
	//
	// PUT /avatars/{user_id}
	UpdateUserAvatar(ctx context.Context, req *UpdateUserAvatarReq, params UpdateUserAvatarParams) (UpdateUserAvatarRes, error)
	// NewError creates *ErrRespStatusCode from error returned by handler.
	//
	// Used for common default response.
	NewError(ctx context.Context, err error) *ErrRespStatusCode
}

// Server implements http server based on OpenAPI v3 specification and
// calls Handler to handle requests.
type Server struct {
	h   Handler
	sec SecurityHandler
	baseServer
}

// NewServer creates new Server.
func NewServer(h Handler, sec SecurityHandler, opts ...ServerOption) (*Server, error) {
	s, err := newServerConfig(opts...).baseServer()
	if err != nil {
		return nil, err
	}
	return &Server{
		h:          h,
		sec:        sec,
		baseServer: s,
	}, nil
}
