<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

    <changeSet id="052-seed-vendors-data" author="system">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="vendors"/>
            <sqlCheck expectedResult="0">SELECT COUNT(*) FROM vendors</sqlCheck>
        </preConditions>

        <!-- Vendor 1 - Оружейник -->
        <insert tableName="vendors">
            <column name="id" value="vendor_weapons_01"/>
            <column name="name" value="2nd Amendment"/>
            <column name="description" value="Легальный оружейный магазин. Широкий ассортимент пистолетов и винтовок."/>
            <column name="location_id" value="loc_watson_center"/>
            <column name="vendor_type" value="weapons"/>
            <column name="reputation_required" value="0"/>
            <column name="discount_percent" value="0"/>
            <column name="available" valueBoolean="true"/>
        </insert>

        <!-- Vendor 2 - Риппердок -->
        <insert tableName="vendors">
            <column name="id" value="vendor_ripperdoc_01"/>
            <column name="name" value="Рэйвен Майкоши"/>
            <column name="description" value="Опытный риппердок. Импланты высокого качества по разумным ценам."/>
            <column name="location_id" value="loc_watson_center"/>
            <column name="vendor_type" value="cyberware"/>
            <column name="reputation_required" value="0"/>
            <column name="discount_percent" value="5"/>
            <column name="available" valueBoolean="true"/>
        </insert>

        <!-- Vendor 3 - Черный рынок -->
        <insert tableName="vendors">
            <column name="id" value="vendor_blackmarket_01"/>
            <column name="name" value="Перекупщик"/>
            <column name="description" value="Сомнительная личность. Продает все, что не прибито."/>
            <column name="location_id" value="loc_watson_market"/>
            <column name="vendor_type" value="black_market"/>
            <column name="reputation_required" value="10"/>
            <column name="discount_percent" value="0"/>
            <column name="available" valueBoolean="true"/>
        </insert>

        <rollback>
            <delete tableName="vendors"/>
        </rollback>
    </changeSet>

</databaseChangeLog>
