openapi: 3.0.3
info:
  title: Boss Service API - Enterprise-Grade Boss Management
  description: '**Enterprise-Grade Boss API for NECPGAME**

    Boss Service manages world bosses, elite champions, raid coordination, and boss-related
    gameplay mechanics. Provides comprehensive boss lifecycle management, league systems,
    real-time telemetry, and reward distribution for epic encounters.

    ## Key Features

    - **World Boss Management**: Complete boss lifecycle from spawning to aftermath
    - **League System**: Bronze to Mythic difficulty progression with scaling - **Elite
    Champions**: Enhanced boss variants with unique mechanics - **Real-time Coordination**:
    WebSocket telemetry and raid synchronization - **Reward Systems**: Dynamic loot
    tables and achievement tracking - **Performance Optimized**: High-throughput boss
    operations with <50ms P99 latency

    ## Domain Purpose

    Manages all boss-related gameplay in Night City, from routine world bosses to
    epic elite champion encounters. Creates memorable, challenging experiences that
    drive community engagement and progression systems.

    ## Performance Targets

    - P99 Latency: <50ms for boss operations during events - Memory: <30KB per active
    boss session - Concurrent users: 50,000+ simultaneous participants - Telemetry
    throughput: 10,000+ events per second - Event load: 5000+ RPS during active boss
    encounters

    '
  version: 1.0.0
  contact:
    name: NECPGAME API Support
    url: https://necpgame.com/support
    email: api@necpgame.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
servers:
- url: https://api.necpgame.com/v1/boss
  description: Production server
- url: https://staging-api.necpgame.com/v1/boss
  description: Staging server
- url: http://localhost:8080/api/v1/boss
  description: Local development server
security:
- BearerAuth: []
tags:
- name: World Bosses
  description: Core world boss management and lifecycle
- name: Elite Champions
  description: Enhanced boss variants and champion raids
- name: Boss Telemetry
  description: Real-time boss encounter monitoring
- name: League System
  description: Difficulty progression and ranking
- name: Health Monitoring
  description: System health and performance monitoring
paths:
  /health:
    $ref: ./paths/health.yaml#/paths/~1health
  /bosses/active:
    $ref: ./paths/bosses-active.yaml#/paths/~1bosses~1active
  /bosses/{boss_id}/encounter:
    $ref: ./paths/bosses-{boss_id}-encounter.yaml#/paths/~1bosses~1{boss_id}~1encounter
  /encounters/{encounter_id}:
    $ref: ./paths/encounters-{encounter_id}.yaml#/paths/~1encounters~1{encounter_id}
  /encounters/{encounter_id}/join:
    $ref: ./paths/encounters-{encounter_id}-join.yaml#/paths/~1encounters~1{encounter_id}~1join
  /encounters/{encounter_id}/rewards:
    $ref: ./paths/encounters-{encounter_id}-rewards.yaml#/paths/~1encounters~1{encounter_id}~1rewards
  /champions/elite/active:
    $ref: ./paths/champions-elite-active.yaml#/paths/~1champions~1elite~1active
  /telemetry/encounters/{encounter_id}/stream:
    $ref: ./paths/telemetry-encounters-{encounter_id}-stream.yaml#/paths/~1telemetry~1encounters~1{encounter_id}~1stream
components:
  schemas:
    Error:
      $ref: ../common/schemas/infrastructure-entities.yaml#/ErrorResponse
    WorldBoss:
      type: object
      description: World boss definition and configuration
      properties:
        id:
          type: string
          format: uuid
          description: Unique boss identifier
        name:
          type: string
          description: Boss display name
        description:
          type: string
          description: Boss lore and encounter description
        level:
          type: integer
          minimum: 1
          description: Boss level requirement
        league:
          type: string
          enum:
          - bronze
          - silver
          - gold
          - platinum
          - diamond
          - master
          - mythic
          description: Difficulty league
        health:
          type: integer
          description: Base health points
        phases:
          type: array
          items:
            $ref: '#/components/schemas/BossPhase'
          description: Boss encounter phases
        location:
          type: object
          properties:
            zoneId:
              type: string
              format: uuid
            coordinates:
              type: object
              properties:
                x:
                  type: number
                y:
                  type: number
                z:
                  type: number
          description: Boss spawn location
        schedule:
          type: object
          properties:
            type:
              type: string
              enum:
              - timed
              - event
              - random
            interval:
              type: integer
              description: Spawn interval in minutes
            duration:
              type: integer
              description: Active duration in minutes
          description: Boss spawn schedule
        rewards:
          type: array
          items:
            $ref: '#/components/schemas/BossReward'
          description: Available rewards
        isActive:
          type: boolean
          description: Whether boss is currently active
        lastSpawn:
          type: string
          format: date-time
          description: Last spawn timestamp
        defeatedBy:
          type: string
          format: uuid
          description: Character ID of final blow
      required:
      - id
      - name
      - level
      - league
      - health
      - phases
      - location
      - schedule
    BossPhase:
      type: object
      description: Individual boss encounter phase
      properties:
        id:
          type: integer
          minimum: 1
        name:
          type: string
        description:
          type: string
        healthThreshold:
          type: number
          format: float
          minimum: 0
          maximum: 1
          description: Health percentage to trigger phase
        mechanics:
          type: array
          items:
            type: string
          description: Special mechanics for this phase
        rewards:
          type: array
          items:
            $ref: '#/components/schemas/BossReward'
          description: Phase-specific rewards
      required:
      - id
      - name
      - healthThreshold
    BossReward:
      type: object
      description: Boss encounter reward
      properties:
        type:
          type: string
          enum:
          - currency
          - item
          - experience
          - achievement
          - title
          - cosmetic
        value:
          oneOf:
          - type: integer
          - type: string
          description: Reward value or identifier
        rarity:
          type: string
          enum:
          - common
          - uncommon
          - rare
          - epic
          - legendary
          - mythic
        dropRate:
          type: number
          format: float
          minimum: 0
          maximum: 1
          description: Drop probability
      required:
      - type
      - value
      - rarity
    EliteChampion:
      type: object
      description: Elite champion boss variant
      properties:
        id:
          type: string
          format: uuid
        baseBossId:
          type: string
          format: uuid
          description: Reference to base boss
        name:
          type: string
        description:
          type: string
        modifiers:
          type: object
          properties:
            healthMultiplier:
              type: number
              format: float
              default: 2.0
            damageMultiplier:
              type: number
              format: float
              default: 1.5
            speedMultiplier:
              type: number
              format: float
              default: 1.2
          description: Stat modifiers vs base boss
        uniqueMechanics:
          type: array
          items:
            type: string
          description: Special mechanics unique to elite variant
        spawnCondition:
          type: string
          description: Condition for elite variant to spawn
        exclusiveRewards:
          type: array
          items:
            $ref: '#/components/schemas/BossReward'
          description: Elite-exclusive rewards
      required:
      - id
      - baseBossId
      - name
      - modifiers
    BossEncounter:
      type: object
      description: Active boss encounter state
      properties:
        encounterId:
          type: string
          format: uuid
        bossId:
          type: string
          format: uuid
        isElite:
          type: boolean
          default: false
        startTime:
          type: string
          format: date-time
        participants:
          type: array
          items:
            type: object
            properties:
              characterId:
                type: string
                format: uuid
              joinTime:
                type: string
                format: date-time
              damageDealt:
                type: integer
                default: 0
              healingDone:
                type: integer
                default: 0
              isActive:
                type: boolean
                default: true
          description: Active participants
        currentPhase:
          type: integer
          minimum: 1
        bossHealth:
          type: object
          properties:
            current:
              type: integer
            maximum:
              type: integer
            percentage:
              type: number
              format: float
          description: Current boss health state
        status:
          type: string
          enum:
          - spawning
          - active
          - defeated
          - escaped
          - terminated
        endTime:
          type: string
          format: date-time
          description: Encounter end timestamp (if completed)
      required:
      - encounterId
      - bossId
      - startTime
      - participants
      - currentPhase
      - bossHealth
      - status
  responses: {}
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: '**JWT Bearer token authentication**

        Required for all authenticated endpoints. Token must be obtained from auth-service
        and included in Authorization header.

        **Format:** `Authorization: Bearer <token>`

        **Token Expiry:** 15 minutes for access tokens, 7 days for refresh tokens '
