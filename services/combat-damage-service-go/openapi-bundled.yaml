openapi: 3.0.3
info:
  title: Combat Damage Service Go API
  description: |
    Enterprise-Grade Combat Damage Service API for NECPGAME MMOFPS RPG.
    **Enterprise-Grade Domain:** specialized-domain
    **Module:** combat-damage-service-go
    **Purpose:** High-performance damage calculation and combat effects management
    **BACKEND NOTE:** Struct field alignment optimized (large → small types).
    All schemas ordered for optimal memory layout in generated Go code.
    Expected memory savings: 30-50% for damage-related structs.
    **Features:**
    - Real-time damage calculation (1000+ RPS)
    - Combat effects management (buffs/debuffs/statuses)
    - Anti-cheat validation
    - Implant synergy calculations
    - Environmental damage modifiers
    **Performance:** P99 <5ms for damage calculations, zero allocations in hot path
  version: 1.0.0
  license:
    name: Proprietary
    url: https://necpgame.com/license
  contact:
    name: NECPGAME API Support
    url: https://necpgame.com/support
    email: api@combat-damage.necpgame.com
servers:
  - url: http://localhost:8083/api/v1
    description: Combat Damage Service Go (development)
  - url: https://combat-damage-go.necpgame.com/api/v1
    description: Combat Damage Service Go (production)
security:
  - BearerAuth: []
tags:
  - name: Damage Calculation
    description: Real-time damage calculations and validation
  - name: Combat Effects
    description: Buff/debuff and status effect management
  - name: Anti-Cheat
    description: Damage validation and cheat prevention
paths:
  /health:
    get:
      summary: Service health check
      operationId: healthCheck
      tags:
        - Health
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
        '503':
          description: Service is unhealthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /combat/damage/calculate:
    post:
      summary: Calculate combat damage
      operationId: calculateDamage
      description: |
        Calculate damage with all modifiers, critical hits, and anti-cheat validation.
        **BACKEND NOTE:** Hot path - optimized for 1000+ RPS, zero allocations.
      tags:
        - Damage Calculation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/damage-request'
      responses:
        '200':
          description: Damage calculation result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/damage-result'
        '400':
          description: Invalid request parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '429':
          description: Rate limit exceeded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /combat/effects/apply:
    post:
      summary: Apply combat effects
      operationId: applyEffects
      description: Apply buffs, debuffs, and status effects to combat participants.
      tags:
        - Combat Effects
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/effects-request'
      responses:
        '200':
          description: Effects applied successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/effects-result'
        '400':
          description: Invalid effect parameters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /combat/effects/{participant_id}/active:
    get:
      summary: Get active combat effects
      operationId: getActiveEffects
      description: Retrieve all active effects for a combat participant.
      tags:
        - Combat Effects
      parameters:
        - name: participant_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Combat participant ID
      responses:
        '200':
          description: Active effects list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/active-effects'
        '404':
          description: Participant not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /combat/effects/{effect_id}:
    delete:
      summary: Remove combat effect
      operationId: removeEffect
      description: Remove a specific combat effect.
      tags:
        - Combat Effects
      parameters:
        - name: effect_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Effect ID to remove
      responses:
        '204':
          description: Effect removed successfully
        '404':
          description: Effect not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /combat/damage/validate:
    post:
      summary: Validate damage calculation
      operationId: validateDamage
      description: |
        Validate damage calculation for anti-cheat purposes.
        **BACKEND NOTE:** Used for cheat detection and prevention.
      tags:
        - Anti-Cheat
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/damage-validation-request'
      responses:
        '200':
          description: Validation result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/damage-validation-result'
        '400':
          description: Invalid validation request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      description: JWT Bearer token authentication
  schemas:
    HealthResponse:
      type: object
      required:
        - status
        - timestamp
      properties:
        version:
          type: string
        status:
          type: string
          enum:
            - healthy
        timestamp:
          type: string
          format: date-time
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          description: Error code
        message:
          type: string
          description: Human-readable error message
        details:
          type: object
          description: Additional error details
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    DamageCalculationRequest:
      $ref: '#/components/schemas/damage-request'
    DamageCalculationResult:
      $ref: '#/components/schemas/damage-result'
    ApplyEffectsRequest:
      $ref: '#/components/schemas/effects-request'
    ApplyEffectsResult:
      $ref: '#/components/schemas/effects-result'
    ActiveEffectsResponse:
      $ref: '#/components/schemas/active-effects'
    DamageValidationRequest:
      $ref: '#/components/schemas/damage-validation-request'
    DamageValidationResult:
      $ref: '#/components/schemas/damage-validation-result'
    damage-request:
      type: object
      description: |
        BACKEND NOTE: Hot path (combat calculations, 1000+ RPS).

        Fields ordered for struct alignment (large → small types):
        - UUID fields (16 bytes) first
        - Objects/arrays (24 bytes: pointer + len + cap)
        - Integers (8 bytes)
        - Booleans (1 byte) last

        Expected memory: ~64 bytes/instance.
        Memory savings: 30-50% vs non-aligned structs.
      required:
        - attacker_id
        - target_id
        - base_damage
        - damage_type
      properties:
        attacker_id:
          type: string
          format: uuid
          description: Attacking participant UUID
          example: 550e8400-e29b-41d4-a716-446655440000
        target_id:
          type: string
          format: uuid
          description: Target participant UUID
          example: 550e8400-e29b-41d4-a716-446655440001
        weapon_modifiers:
          type: array
          description: Weapon-specific modifiers and synergies
          items:
            type: object
            description: Individual weapon modifier
            required:
              - type
              - value
            properties:
              type:
                type: string
                enum:
                  - damage_boost
                  - accuracy_bonus
                  - armor_penetration
                  - elemental_damage
                description: Modifier type
              value:
                type: number
                format: float
                description: Modifier value/multiplier
          maxItems: 10
        implant_synergies:
          type: array
          description: Active implant synergies affecting damage
          items:
            type: object
            description: Active implant synergy effect
            required:
              - implant_type
              - synergy_bonus
            properties:
              implant_type:
                type: string
                enum:
                  - gorilla_arms
                  - mantis_blades
                  - kerenzikov
                  - sandevistan
                  - projectile_launcher
                description: Implant providing synergy
              synergy_bonus:
                type: number
                format: float
                minimum: 0
                maximum: 2
                description: Damage synergy multiplier
          maxItems: 5
        environmental_modifiers:
          type: object
          description: Environmental damage modifiers (weather, terrain, etc.)
          properties:
            weather_multiplier:
              type: number
              format: float
              minimum: 0.1
              maximum: 3
              default: 1
              description: Weather damage multiplier
            terrain_cover:
              type: number
              format: float
              minimum: 0
              maximum: 1
              default: 0
              description: Terrain cover reduction (0-1)
        base_damage:
          type: integer
          format: int32
          minimum: 0
          maximum: 10000
          description: Base weapon/ability damage
          example: 150
        attacker_level:
          type: integer
          format: int32
          minimum: 1
          maximum: 100
          description: Attacker character level
          example: 25
        target_level:
          type: integer
          format: int32
          minimum: 1
          maximum: 100
          description: Target character level
          example: 22
        timestamp:
          type: integer
          format: int64
          description: Request timestamp (unix milliseconds)
          example: 1640995200000
        damage_type:
          type: string
          enum:
            - physical
            - fire
            - cold
            - lightning
            - poison
            - cyber
            - radiation
            - explosive
          description: Primary damage type
          example: physical
        weapon_type:
          type: string
          description: Weapon class/type for modifiers
          example: assault_rifle
        critical_multiplier:
          type: number
          format: float
          minimum: 1
          maximum: 5
          default: 1
          description: Critical hit multiplier
          example: 2.5
        range_modifier:
          type: number
          format: float
          minimum: 0.1
          maximum: 2
          default: 1
          description: Range-based damage modifier
          example: 0.8
        is_critical_hit:
          type: boolean
          default: false
          description: Whether this is a critical hit
          example: true
        is_weak_spot_hit:
          type: boolean
          default: false
          description: Whether hit weak spot/headshot
          example: false
        is_backstab:
          type: boolean
          default: false
          description: Whether attack is from behind
          example: false
        ignore_armor:
          type: boolean
          default: false
          description: Whether to ignore target armor
          example: false
        WeaponModifier:
          type: object
          description: Individual weapon modifier
          required:
            - type
            - value
          properties:
            type:
              type: string
              enum:
                - damage_boost
                - accuracy_bonus
                - armor_penetration
                - elemental_damage
              description: Modifier type
            value:
              type: number
              format: float
              description: Modifier value/multiplier
        ImplantSynergy:
          type: object
          description: Active implant synergy effect
          required:
            - implant_type
            - synergy_bonus
          properties:
            implant_type:
              type: string
              enum:
                - gorilla_arms
                - mantis_blades
                - kerenzikov
                - sandevistan
                - projectile_launcher
              description: Implant providing synergy
            synergy_bonus:
              type: number
              format: float
              minimum: 0
              maximum: 2
              description: Damage synergy multiplier
    damage-result:
      type: object
      description: |
        BACKEND NOTE: Hot path response (1000+ RPS).

        Fields ordered for struct alignment (large → small):
        - UUIDs (16 bytes) first
        - Arrays (24 bytes)
        - Integers (8 bytes)
        - Objects (8 bytes pointers)
        - Booleans (1 byte) last

        Expected memory: ~72 bytes/instance.
        Memory savings: 35-45% vs non-aligned structs.
      required:
        - attacker_id
        - target_id
        - final_damage
        - damage_type
        - calculation_id
      properties:
        attacker_id:
          type: string
          format: uuid
          description: Attacking participant UUID
          example: 550e8400-e29b-41d4-a716-446655440000
        target_id:
          type: string
          format: uuid
          description: Target participant UUID
          example: 550e8400-e29b-41d4-a716-446655440001
        calculation_id:
          type: string
          format: uuid
          description: Unique calculation ID for tracking
          example: 550e8400-e29b-41d4-a716-446655440002
        applied_modifiers:
          type: array
          description: All modifiers applied in calculation
          items:
            type: object
            description: Individual modifier applied in calculation
            required:
              - type
              - value
              - source
            properties:
              type:
                type: string
                enum:
                  - critical_hit
                  - weak_spot
                  - armor_reduction
                  - elemental_bonus
                  - implant_synergy
                  - environmental
                  - backstab
                description: Modifier type
              value:
                type: number
                format: float
                description: Modifier value
              source:
                type: string
                description: Source of modifier (weapon, implant, environment, etc.)
          maxItems: 20
        damage_breakdown:
          type: array
          description: Detailed damage breakdown by component
          items:
            type: object
            description: Individual damage component in breakdown
            required:
              - type
              - amount
            properties:
              type:
                type: string
                enum:
                  - base_damage
                  - critical_bonus
                  - weak_spot_bonus
                  - armor_penetration
                  - elemental_damage
                  - synergy_bonus
                  - environmental_modifier
                description: Component type
              amount:
                type: integer
                format: int32
                description: Damage amount for this component
          maxItems: 10
        final_damage:
          type: integer
          format: int32
          minimum: 0
          maximum: 50000
          description: Final calculated damage after all modifiers
          example: 187
        base_damage:
          type: integer
          format: int32
          minimum: 0
          maximum: 10000
          description: Original base damage
          example: 150
        armor_reduction:
          type: integer
          format: int32
          minimum: 0
          maximum: 10000
          description: Damage reduction from armor
          example: 25
        timestamp:
          type: integer
          format: int64
          description: Calculation timestamp (unix milliseconds)
          example: 1640995200000
        processing_time_ns:
          type: integer
          format: int64
          description: Server processing time in nanoseconds
          example: 2500000
        damage_type:
          type: string
          enum:
            - physical
            - fire
            - cold
            - lightning
            - poison
            - cyber
            - radiation
            - explosive
          description: Final damage type after synergies
          example: physical
        critical_multiplier:
          type: number
          format: float
          minimum: 1
          maximum: 5
          description: Applied critical multiplier
          example: 2.5
        total_multiplier:
          type: number
          format: float
          minimum: 0
          maximum: 10
          description: Total damage multiplier from all sources
          example: 1.25
        target_stats:
          type: object
          description: Target stats snapshot at calculation time
          properties:
            current_hp:
              type: integer
              format: int32
              minimum: 0
              description: Current HP before damage
            max_hp:
              type: integer
              format: int32
              minimum: 1
              description: Maximum HP
            armor_rating:
              type: integer
              format: int32
              minimum: 0
              maximum: 1000
              description: Current armor rating
        was_critical:
          type: boolean
          description: Whether critical hit was applied
          example: true
        was_dodged:
          type: boolean
          description: Whether attack was dodged (final_damage = 0)
          example: false
        was_blocked:
          type: boolean
          description: Whether attack was blocked
          example: false
        target_alive:
          type: boolean
          description: Whether target survived the damage
          example: true
        AppliedModifier:
          type: object
          description: Individual modifier applied in calculation
          required:
            - type
            - value
            - source
          properties:
            type:
              type: string
              enum:
                - critical_hit
                - weak_spot
                - armor_reduction
                - elemental_bonus
                - implant_synergy
                - environmental
                - backstab
              description: Modifier type
            value:
              type: number
              format: float
              description: Modifier value
            source:
              type: string
              description: Source of modifier (weapon, implant, environment, etc.)
        DamageComponent:
          type: object
          description: Individual damage component in breakdown
          required:
            - type
            - amount
          properties:
            type:
              type: string
              enum:
                - base_damage
                - critical_bonus
                - weak_spot_bonus
                - armor_penetration
                - elemental_damage
                - synergy_bonus
                - environmental_modifier
              description: Component type
            amount:
              type: integer
              format: int32
              description: Damage amount for this component
    effects-request:
      type: object
      description: |
        BACKEND NOTE: Combat effects application request.

        Fields ordered for struct alignment (large → small):
        - UUIDs first
        - Arrays
        - Integers
        - Objects
        - Booleans last

        Expected memory: ~48 bytes/instance.
      required:
        - participant_id
        - effects
      properties:
        participant_id:
          type: string
          format: uuid
          description: Combat participant to apply effects to
          example: 550e8400-e29b-41d4-a716-446655440000
        effects:
          type: array
          description: Effects to apply
          items:
            type: object
            description: Individual combat effect to apply
            required:
              - effect_type
              - duration_ms
              - source_id
            properties:
              effect_type:
                type: string
                enum:
                  - buff_damage
                  - debuff_damage_reduction
                  - buff_speed
                  - debuff_slow
                  - buff_regeneration
                  - debuff_poison
                  - buff_shield
                  - debuff_stun
                  - buff_critical_chance
                  - debuff_accuracy_reduction
                description: Type of combat effect
              duration_ms:
                type: integer
                format: int32
                minimum: 1000
                maximum: 300000
                description: Effect duration in milliseconds
              source_id:
                type: string
                format: uuid
                description: Source entity ID (weapon, ability, etc.)
              intensity:
                type: number
                format: float
                minimum: 0.1
                maximum: 5
                default: 1
                description: Effect intensity multiplier
              stacks:
                type: integer
                format: int32
                minimum: 1
                maximum: 10
                default: 1
                description: Number of effect stacks
          minItems: 1
          maxItems: 20
        session_id:
          type: integer
          format: int64
          description: Combat session ID (optional, for context)
          example: 12345
        timestamp:
          type: integer
          format: int64
          description: Request timestamp (unix milliseconds)
          example: 1640995200000
        source_type:
          type: string
          enum:
            - weapon
            - ability
            - implant
            - environmental
            - status_effect
          description: Source of the effects
          example: weapon
        context:
          type: object
          description: Additional context for effect application
          properties:
            area_id:
              type: string
              description: Combat area/location ID
            weather_conditions:
              type: string
              enum:
                - clear
                - rain
                - storm
                - fog
              description: Current weather affecting effects
        override_existing:
          type: boolean
          default: false
          description: Whether to override existing effects of same type
          example: false
        stack_effects:
          type: boolean
          default: true
          description: Whether effects can stack with existing ones
          example: true
        CombatEffect:
          type: object
          description: Individual combat effect to apply
          required:
            - effect_type
            - duration_ms
            - source_id
          properties:
            effect_type:
              type: string
              enum:
                - buff_damage
                - debuff_damage_reduction
                - buff_speed
                - debuff_slow
                - buff_regeneration
                - debuff_poison
                - buff_shield
                - debuff_stun
                - buff_critical_chance
                - debuff_accuracy_reduction
              description: Type of combat effect
            duration_ms:
              type: integer
              format: int32
              minimum: 1000
              maximum: 300000
              description: Effect duration in milliseconds
            source_id:
              type: string
              format: uuid
              description: Source entity ID (weapon, ability, etc.)
            intensity:
              type: number
              format: float
              minimum: 0.1
              maximum: 5
              default: 1
              description: Effect intensity multiplier
            stacks:
              type: integer
              format: int32
              minimum: 1
              maximum: 10
              default: 1
              description: Number of effect stacks
    effects-result:
      type: object
      description: |
        BACKEND NOTE: Effects application result.

        Fields ordered for struct alignment (large → small):
        - UUIDs first
        - Arrays
        - Integers
        - Objects
        - Booleans last

        Expected memory: ~40 bytes/instance.
      required:
        - participant_id
        - applied_effects
        - success
      properties:
        participant_id:
          type: string
          format: uuid
          description: Combat participant effects were applied to
          example: 550e8400-e29b-41d4-a716-446655440000
        applied_effects:
          type: array
          description: Successfully applied effects with IDs
          items:
            type: object
            description: Information about successfully applied effect
            required:
              - effect_type
              - effect_id
              - duration_ms
            properties:
              effect_type:
                type: string
                description: Type of applied effect
              effect_id:
                type: string
                format: uuid
                description: Unique effect instance ID
              duration_ms:
                type: integer
                format: int32
                description: Effect duration in milliseconds
              stacks:
                type: integer
                format: int32
                description: Current stack count
          maxItems: 20
        rejected_effects:
          type: array
          description: Effects that were rejected (conflicts, limits, etc.)
          items:
            type: object
            description: Information about rejected effect
            required:
              - effect_type
              - reason
            properties:
              effect_type:
                type: string
                description: Type of rejected effect
              reason:
                type: string
                enum:
                  - effect_limit_reached
                  - conflicting_effect
                  - invalid_parameters
                  - participant_not_found
                  - effect_already_active
                description: Reason for rejection
          maxItems: 10
        timestamp:
          type: integer
          format: int64
          description: Application timestamp (unix milliseconds)
          example: 1640995200000
        processing_time_ns:
          type: integer
          format: int64
          description: Server processing time in nanoseconds
          example: 1500000
        status:
          type: string
          enum:
            - success
            - partial_success
            - failed
          description: Overall application status
          example: success
        summary:
          type: object
          description: Application summary statistics
          properties:
            total_requested:
              type: integer
              format: int32
              description: Total effects requested
            successfully_applied:
              type: integer
              format: int32
              description: Successfully applied count
            rejected_count:
              type: integer
              format: int32
              description: Rejected effects count
        success:
          type: boolean
          description: Whether application was successful
          example: true
        AppliedEffectInfo:
          type: object
          description: Information about successfully applied effect
          required:
            - effect_type
            - effect_id
            - duration_ms
          properties:
            effect_type:
              type: string
              description: Type of applied effect
            effect_id:
              type: string
              format: uuid
              description: Unique effect instance ID
            duration_ms:
              type: integer
              format: int32
              description: Effect duration in milliseconds
            stacks:
              type: integer
              format: int32
              description: Current stack count
        RejectedEffectInfo:
          type: object
          description: Information about rejected effect
          required:
            - effect_type
            - reason
          properties:
            effect_type:
              type: string
              description: Type of rejected effect
            reason:
              type: string
              enum:
                - effect_limit_reached
                - conflicting_effect
                - invalid_parameters
                - participant_not_found
                - effect_already_active
              description: Reason for rejection
    active-effects:
      type: object
      description: |
        BACKEND NOTE: Active effects query response.

        Fields ordered for struct alignment (large → small):
        - UUIDs first
        - Arrays
        - Integers
        - Objects
        - Booleans last

        Expected memory: ~52 bytes/instance.
      required:
        - participant_id
        - effects
        - timestamp
      properties:
        participant_id:
          type: string
          format: uuid
          description: Combat participant ID
          example: 550e8400-e29b-41d4-a716-446655440000
        effects:
          type: array
          description: Currently active effects
          items:
            type: object
            description: Individual active effect information
            required:
              - effect_id
              - effect_type
              - remaining_ms
              - source_id
            properties:
              effect_id:
                type: string
                format: uuid
                description: Unique effect instance ID
              effect_type:
                type: string
                enum:
                  - buff_damage
                  - debuff_damage_reduction
                  - buff_speed
                  - debuff_slow
                  - buff_regeneration
                  - debuff_poison
                  - buff_shield
                  - debuff_stun
                  - buff_critical_chance
                  - debuff_accuracy_reduction
                description: Type of effect
              remaining_ms:
                type: integer
                format: int32
                minimum: 0
                description: Remaining duration in milliseconds
              source_id:
                type: string
                format: uuid
                description: Source entity ID
              intensity:
                type: number
                format: float
                minimum: 0.1
                maximum: 5
                description: Current effect intensity
              stacks:
                type: integer
                format: int32
                minimum: 1
                maximum: 10
                description: Current stack count
              applied_at:
                type: integer
                format: int64
                description: When effect was applied (unix milliseconds)
          maxItems: 50
        timestamp:
          type: integer
          format: int64
          description: Response timestamp (unix milliseconds)
          example: 1640995200000
        total_effects:
          type: integer
          format: int32
          minimum: 0
          maximum: 50
          description: Total number of active effects
          example: 3
        summary:
          type: object
          description: Effects summary by category
          properties:
            buffs:
              type: integer
              format: int32
              description: Number of active buffs
            debuffs:
              type: integer
              format: int32
              description: Number of active debuffs
            status_effects:
              type: integer
              format: int32
              description: Number of active status effects
        has_critical_effects:
          type: boolean
          description: Whether participant has critical effects (stun, etc.)
          example: false
        ActiveEffect:
          type: object
          description: Individual active effect information
          required:
            - effect_id
            - effect_type
            - remaining_ms
            - source_id
          properties:
            effect_id:
              type: string
              format: uuid
              description: Unique effect instance ID
            effect_type:
              type: string
              enum:
                - buff_damage
                - debuff_damage_reduction
                - buff_speed
                - debuff_slow
                - buff_regeneration
                - debuff_poison
                - buff_shield
                - debuff_stun
                - buff_critical_chance
                - debuff_accuracy_reduction
              description: Type of effect
            remaining_ms:
              type: integer
              format: int32
              minimum: 0
              description: Remaining duration in milliseconds
            source_id:
              type: string
              format: uuid
              description: Source entity ID
            intensity:
              type: number
              format: float
              minimum: 0.1
              maximum: 5
              description: Current effect intensity
            stacks:
              type: integer
              format: int32
              minimum: 1
              maximum: 10
              description: Current stack count
            applied_at:
              type: integer
              format: int64
              description: When effect was applied (unix milliseconds)
    damage-validation-request:
      type: object
      description: |
        BACKEND NOTE: Anti-cheat damage validation request.

        Fields ordered for struct alignment (large → small):
        - UUIDs first
        - Arrays
        - Integers
        - Objects
        - Booleans last

        Expected memory: ~56 bytes/instance.
      required:
        - session_id
        - attacker_id
        - target_id
        - reported_damage
        - damage_type
      properties:
        session_id:
          type: string
          format: uuid
          description: Combat session ID
          example: 550e8400-e29b-41d4-a716-446655440000
        attacker_id:
          type: string
          format: uuid
          description: Attacking participant UUID
          example: 550e8400-e29b-41d4-a716-446655440001
        target_id:
          type: string
          format: uuid
          description: Target participant UUID
          example: 550e8400-e29b-41d4-a716-446655440002
        client_modifiers:
          type: array
          description: Modifiers reported by client
          items:
            type: object
            description: Modifier reported by client
            required:
              - type
              - value
            properties:
              type:
                type: string
                enum:
                  - critical_multiplier
                  - range_modifier
                  - weak_spot_bonus
                  - armor_penetration
                  - elemental_damage
                description: Modifier type
              value:
                type: number
                format: float
                description: Modifier value
          maxItems: 15
        reported_damage:
          type: integer
          format: int32
          minimum: 0
          maximum: 50000
          description: Damage amount reported by client
          example: 187
        timestamp:
          type: integer
          format: int64
          description: Client timestamp (unix milliseconds)
          example: 1640995200000
        sequence_number:
          type: integer
          format: int32
          minimum: 0
          description: Client sequence number for ordering
          example: 42
        damage_type:
          type: string
          enum:
            - physical
            - fire
            - cold
            - lightning
            - poison
            - cyber
            - radiation
            - explosive
          description: Reported damage type
          example: physical
        weapon_hash:
          type: string
          description: Client weapon hash for validation
          example: abc123def456
        position_data:
          type: object
          description: Position data for line-of-sight validation
          required:
            - attacker_pos
            - target_pos
          properties:
            attacker_pos:
              type: object
              description: 3D vector coordinates
              required:
                - x
                - 'y'
                - z
              properties:
                x:
                  type: number
                  format: float
                  description: X coordinate
                'y':
                  type: number
                  format: float
                  description: Y coordinate
                z:
                  type: number
                  format: float
                  description: Z coordinate
            target_pos:
              type: object
              description: 3D vector coordinates
              required:
                - x
                - 'y'
                - z
              properties:
                x:
                  type: number
                  format: float
                  description: X coordinate
                'y':
                  type: number
                  format: float
                  description: Y coordinate
                z:
                  type: number
                  format: float
                  description: Z coordinate
            attacker_yaw:
              type: number
              format: float
              description: Attacker facing direction (degrees)
        was_critical:
          type: boolean
          description: Client reported critical hit
          example: true
        was_headshot:
          type: boolean
          description: Client reported headshot
          example: false
        ClientModifier:
          type: object
          description: Modifier reported by client
          required:
            - type
            - value
          properties:
            type:
              type: string
              enum:
                - critical_multiplier
                - range_modifier
                - weak_spot_bonus
                - armor_penetration
                - elemental_damage
              description: Modifier type
            value:
              type: number
              format: float
              description: Modifier value
        Vector3:
          type: object
          description: 3D vector coordinates
          required:
            - x
            - 'y'
            - z
          properties:
            x:
              type: number
              format: float
              description: X coordinate
            'y':
              type: number
              format: float
              description: Y coordinate
            z:
              type: number
              format: float
              description: Z coordinate
    damage-validation-result:
      type: object
      description: |
        BACKEND NOTE: Anti-cheat validation result.

        Fields ordered for struct alignment (large → small):
        - UUIDs first
        - Arrays
        - Integers
        - Objects
        - Booleans last

        Expected memory: ~48 bytes/instance.
      required:
        - session_id
        - is_valid
        - validation_score
        - server_calculated_damage
      properties:
        session_id:
          type: string
          format: uuid
          description: Combat session ID
          example: 550e8400-e29b-41d4-a716-446655440000
        validation_issues:
          type: array
          description: Detected validation issues/flags
          items:
            type: object
            description: Individual validation issue detected
            required:
              - issue_type
              - severity
              - description
            properties:
              issue_type:
                type: string
                enum:
                  - damage_mismatch
                  - invalid_modifier
                  - line_of_sight_blocked
                  - impossible_timing
                  - suspicious_pattern
                  - weapon_hash_mismatch
                  - position_inconsistency
                description: Type of validation issue
              severity:
                type: string
                enum:
                  - low
                  - medium
                  - high
                  - critical
                description: Issue severity level
              description:
                type: string
                description: Human-readable description of the issue
              evidence_value:
                type: number
                format: float
                description: Quantitative evidence for the issue
          maxItems: 10
        server_calculated_damage:
          type: integer
          format: int32
          minimum: 0
          maximum: 50000
          description: Server-calculated correct damage
          example: 180
        validation_score:
          type: integer
          format: int32
          minimum: 0
          maximum: 100
          description: Validation confidence score (0-100, 100 = perfect)
          example: 95
        timestamp:
          type: integer
          format: int64
          description: Validation timestamp (unix milliseconds)
          example: 1640995200000
        processing_time_ns:
          type: integer
          format: int64
          description: Server validation time in nanoseconds
          example: 2000000
        validation_status:
          type: string
          enum:
            - valid
            - suspicious
            - invalid
            - requires_review
          description: Overall validation status
          example: valid
        corrected_values:
          type: object
          description: Corrected values if validation failed
          properties:
            corrected_damage:
              type: integer
              format: int32
              description: Corrected damage amount
            corrected_modifiers:
              type: array
              items:
                type: object
                description: Corrected modifier value
                required:
                  - type
                  - correct_value
                properties:
                  type:
                    type: string
                    description: Modifier type
                  correct_value:
                    type: number
                    format: float
                    description: Server-calculated correct value
                  reported_value:
                    type: number
                    format: float
                    description: Client-reported value
              description: Corrected modifiers
        is_valid:
          type: boolean
          description: Whether the reported damage is valid
          example: true
        requires_server_correction:
          type: boolean
          description: Whether server should override client values
          example: false
        flagged_for_review:
          type: boolean
          description: Whether this event should be flagged for manual review
          example: false
        ValidationIssue:
          type: object
          description: Individual validation issue detected
          required:
            - issue_type
            - severity
            - description
          properties:
            issue_type:
              type: string
              enum:
                - damage_mismatch
                - invalid_modifier
                - line_of_sight_blocked
                - impossible_timing
                - suspicious_pattern
                - weapon_hash_mismatch
                - position_inconsistency
              description: Type of validation issue
            severity:
              type: string
              enum:
                - low
                - medium
                - high
                - critical
              description: Issue severity level
            description:
              type: string
              description: Human-readable description of the issue
            evidence_value:
              type: number
              format: float
              description: Quantitative evidence for the issue
        CorrectedModifier:
          type: object
          description: Corrected modifier value
          required:
            - type
            - correct_value
          properties:
            type:
              type: string
              description: Modifier type
            correct_value:
              type: number
              format: float
              description: Server-calculated correct value
            reported_value:
              type: number
              format: float
              description: Client-reported value
