// Code generated by ogen, DO NOT EDIT.

package api

import (
	"context"
)

// Handler handles operations described by OpenAPI v3 specification.
type Handler interface {
	// ApplyEffects implements applyEffects operation.
	//
	// Применяет эффекты (баффы, дебаффы, статусы) к
	// участнику боя.
	// **Типы эффектов:**
	// - `buff` - положительный эффект (увеличение
	// характеристик)
	// - `debuff` - отрицательный эффект (снижение характеристик)
	// - `status` - статус (яд, кровотечение, ожог, паралич,
	// ослепление)
	// **Примеры баффов:**
	// - Увеличение силы/ловкости/интеллекта
	// - Увеличение скорости
	// - Регенерация здоровья
	// - Щит/барьер
	// **Примеры дебаффов:**
	// - Снижение защиты
	// - Замедление
	// - Ослабление
	// **Примеры статусов:**
	// - Яд (урон каждый ход)
	// - Кровотечение (урон каждый ход)
	// - Ожог (урон каждый ход)
	// - Паралич (пропуск хода)
	// - Ослепление (снижение точности).
	//
	// POST /gameplay/combat/apply-effects
	ApplyEffects(ctx context.Context, req *ApplyEffectsRequest) (ApplyEffectsRes, error)
	// CalculateDamage implements calculateDamage operation.
	//
	// Рассчитывает урон на основе характеристик
	// атакующего и защищающегося.
	// **Учитывает:**
	// - Базовый урон оружия/способности
	// - Характеристики атакующего (сила, ловкость,
	// интеллект)
	// - Броню и сопротивления защищающегося
	// - Модификаторы (критический удар, слабые места)
	// - Баффы и дебаффы
	// **Формула:**
	// ```
	// final_damage = (base_damage + attacker_modifiers) * critical_multiplier
	// - (armor + resistances) * defense_multiplier
	// ```
	// **Защита от читов:**
	// - Все расчёты на сервере
	// - Валидация базового урона по оружию
	// - Проверка модификаторов на адекватность
	// - Логирование всех расчётов для аудита.
	//
	// POST /gameplay/combat/calculate-damage
	CalculateDamage(ctx context.Context, req *DamageCalculationRequest) (CalculateDamageRes, error)
	// ExtendEffect implements extendEffect operation.
	//
	// Продлевает длительность активного эффекта на
	// указанное количество ходов.
	//
	// POST /gameplay/combat/effects/{effect_id}/extend
	ExtendEffect(ctx context.Context, req *ExtendEffectReq, params ExtendEffectParams) (ExtendEffectRes, error)
	// RemoveEffect implements removeEffect operation.
	//
	// Удаляет активный эффект с участника боя.
	// Используется для:
	// - Снятия дебаффов/статусов через способности
	// - Очистки эффектов при завершении боя
	// - Ручного удаления эффектов (например, через предмет).
	//
	// DELETE /gameplay/combat/effects/{effect_id}
	RemoveEffect(ctx context.Context, params RemoveEffectParams) (RemoveEffectRes, error)
}

// Server implements http server based on OpenAPI v3 specification and
// calls Handler to handle requests.
type Server struct {
	h   Handler
	sec SecurityHandler
	baseServer
}

// NewServer creates new Server.
func NewServer(h Handler, sec SecurityHandler, opts ...ServerOption) (*Server, error) {
	s, err := newServerConfig(opts...).baseServer()
	if err != nil {
		return nil, err
	}
	return &Server{
		h:          h,
		sec:        sec,
		baseServer: s,
	}, nil
}
