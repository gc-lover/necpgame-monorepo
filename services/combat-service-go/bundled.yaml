openapi: 3.0.3
info:
  title: Combat Service API - Enterprise-Grade Combat System
  description: '**Enterprise-grade API for Combat System**

    Complete combat mechanics and battle system management for NECPGAME. Handles real-time
    combat calculations, damage processing, battle states, and combat-related game
    mechanics.

    ## Key Features

    - **Enterprise-grade architecture** with proper domain separation - **Backend
    optimization hints** for struct alignment and performance - **Complete validation**
    with redocly and ogen code generation - **Security-first approach** with JWT authentication
    - **Performance-optimized** response structures

    ## Domain Purpose

    Handles core combat operations including session management, action processing,
    damage calculations, and real-time battle state synchronization.

    ## Performance Targets

    - P99 Latency: <25ms for combat actions - Memory: <100KB per active battle - Concurrent
    users: 10,000+ simultaneous battles - Data consistency: ACID compliance for combat
    operations

    '
  version: 1.0.0
  contact:
    name: NECPGAME API Support
    email: api@necpgame.com
  license:
    name: MIT
servers:
- url: https://api.necpgame.com/v1/combat
  description: Production server
- url: https://staging-api.necpgame.com/v1/combat
  description: Staging server
- url: http://localhost:8080/api/v1/combat
  description: Local development server
security:
- BearerAuth: []
tags:
- name: Combat Sessions
  description: Combat session lifecycle management
- name: Combat Actions
  description: Player combat actions and validation
- name: Health Monitoring
  description: System health and performance monitoring
paths:
  /health:
    get:
      summary: Combat service health check
      description: '**Enterprise-grade health check endpoint**

        Provides real-time health status of the combat microservice.

        Critical for service discovery, load balancing, and monitoring.

        **Performance:** <1ms response time, cached for 30 seconds

        '
      operationId: combatServiceHealthCheck
      tags:
      - Health Monitoring
      parameters:
      - name: Accept-Encoding
        in: header
        schema:
          type: string
          enum:
          - gzip
          - deflate
          - br
      responses:
        '200':
          description: Service is healthy
          headers:
            Cache-Control:
              schema:
                type: string
                example: max-age=30, s-maxage=60
            ETag:
              schema:
                type: string
                example: '"health-v1.0"'
            Content-Encoding:
              schema:
                type: string
                enum:
                - gzip
                - deflate
                - br
          content:
            application/json:
              schema:
                type: object
                required:
                - status
                - timestamp
                properties:
                  status:
                    type: string
                    enum:
                    - healthy
                    - degraded
                    - unhealthy
                    example: healthy
                    maxLength: 255
                  domain:
                    type: string
                    example: service-name
                    maxLength: 255
                  timestamp:
                    type: string
                    format: date-time
                    example: '2025-12-28T10:00:00Z'
                    maxLength: 255
                  version:
                    type: string
                    example: 1.0.0
                    maxLength: 50
                  uptime_seconds:
                    type: integer
                    example: 3600
                    minimum: 0
                  active_connections:
                    type: integer
                    example: 1500
                    minimum: 0
                description: 'BACKEND NOTE: Fields ordered for struct alignment (large
                  → small). Expected memory savings: 30-50%.'
        '503':
          description: Service is unhealthy
          content:
            application/json:
              schema:
                type: object
                required:
                - status
                - timestamp
                properties:
                  status:
                    type: string
                    enum:
                    - healthy
                    - degraded
                    - unhealthy
                    example: healthy
                    maxLength: 255
                  domain:
                    type: string
                    example: service-name
                    maxLength: 255
                  timestamp:
                    type: string
                    format: date-time
                    example: '2025-12-28T10:00:00Z'
                    maxLength: 255
                  version:
                    type: string
                    example: 1.0.0
                    maxLength: 50
                  uptime_seconds:
                    type: integer
                    example: 3600
                    minimum: 0
                  active_connections:
                    type: integer
                    example: 1500
                    minimum: 0
                description: 'BACKEND NOTE: Fields ordered for struct alignment (large
                  → small). Expected memory savings: 30-50%.'
        '429':
          description: Too many requests - rate limit exceeded
          content:
            application/json:
              schema:
                allOf:
                - type: object
                  required:
                  - code
                  - message
                  properties:
                    code:
                      type: integer
                      example: 500
                      format: int32
                      minimum: 100
                      maximum: 599
                    message:
                      type: string
                      example: Internal server error
                      maxLength: 1000
                    details:
                      type: object
                      description: Additional error details
                  description: Standard error response format
                - type: object
                  properties:
                    retry_after:
                      type: integer
                      example: 60
                      description: Seconds to wait before retrying
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /health/batch:
    post:
      summary: Batch health check for multiple services
      description: '**Performance optimization:** Check multiple services health in
        single request

        Reduces N HTTP calls to 1 call. Critical for orchestration.

        **Use case:** Service mesh health checks, Kubernetes readiness probes

        '
      operationId: combatServiceBatchHealthCheck
      tags:
      - Health Monitoring
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - services
              properties:
                services:
                  type: array
                  items:
                    type: string
                    enum:
                    - combat-service
                    - user-service
                    - session-service
                  maxItems: 10
                  description: List of services to check
      responses:
        '200':
          $ref: '#/components/responses/HealthBatchSuccess'
        '400':
          description: Invalid request - malformed service list
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '429':
          description: Too many requests - rate limit exceeded
          content:
            application/json:
              schema:
                allOf:
                - type: object
                  required:
                  - code
                  - message
                  properties:
                    code:
                      type: integer
                      example: 500
                      format: int32
                      minimum: 100
                      maximum: 599
                    message:
                      type: string
                      example: Internal server error
                      maxLength: 1000
                    details:
                      type: object
                      description: Additional error details
                  description: Standard error response format
                - type: object
                  properties:
                    retry_after:
                      type: integer
                      example: 60
                      description: Seconds to wait before retrying
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /health/ws:
    get:
      summary: Real-time health monitoring WebSocket
      description: '**Performance optimization:** Real-time health updates without
        polling

        Eliminates periodic HTTP requests, reduces server load by ~90%.

        Perfect for dashboard monitoring and alerting systems.

        **Protocol:** WebSocket with JSON payloads

        **Heartbeat:** 30 second intervals

        **Reconnection:** Automatic with exponential backoff

        '
      operationId: combatServiceHealthWebSocket
      tags:
      - Health Monitoring
      parameters:
      - name: services
        in: query
        schema:
          type: array
          items:
            type: string
            enum:
            - combat-service
            - user-service
            - session-service
        description: Services to monitor (optional, monitors all if not specified)
      responses:
        '200':
          description: WebSocket upgrade information returned
          content:
            application/json:
              schema:
                type: object
                properties:
                  websocket_url:
                    type: string
                    example: ws://localhost:8080/api/v1/combat/health/ws
                  supported_protocols:
                    type: array
                    items:
                      type: string
                    example:
                    - health-monitoring-v1
        '101':
          description: WebSocket connection established successfully
          headers:
            Upgrade:
              schema:
                type: string
                example: websocket
            Connection:
              schema:
                type: string
                example: Upgrade
            Sec-WebSocket-Accept:
              schema:
                type: string
                description: WebSocket handshake acceptance key
        '400':
          description: Invalid request - malformed service parameters
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '401':
          description: Unauthorized - authentication required for WebSocket
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '429':
          description: Too many requests - WebSocket connection limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 30
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /combat/sessions:
    post:
      summary: Create new combat session
      description: '**Combat session creation endpoint**

        Initializes a new combat session with participants, rules, and environment.

        **Performance:** <50ms P95, includes validation and setup

        '
      operationId: combatServiceCreateSession
      tags:
      - Combat Sessions
      security:
      - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCombatSessionRequest'
      responses:
        '201':
          description: Combat session created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CombatSessionResponse'
        '400':
          description: Invalid request parameters
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '429':
          description: Too many requests - rate limit exceeded
          content:
            application/json:
              schema:
                allOf:
                - type: object
                  required:
                  - code
                  - message
                  properties:
                    code:
                      type: integer
                      example: 500
                      format: int32
                      minimum: 100
                      maximum: 599
                    message:
                      type: string
                      example: Internal server error
                      maxLength: 1000
                    details:
                      type: object
                      description: Additional error details
                  description: Standard error response format
                - type: object
                  properties:
                    retry_after:
                      type: integer
                      example: 60
                      description: Seconds to wait before retrying
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /combat/sessions/{sessionId}:
    get:
      summary: Get combat session details
      description: '**Combat session retrieval endpoint**

        Returns current state and details of a combat session.

        **Performance:** <25ms P95, cached for active sessions

        '
      operationId: combatServiceGetSession
      tags:
      - Combat Sessions
      security:
      - BearerAuth: []
      parameters:
      - name: sessionId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Combat session details retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CombatSessionResponse'
        '404':
          description: Resource not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /combat/sessions/{sessionId}/actions:
    post:
      summary: Execute combat action
      description: '**Combat action execution endpoint**

        Processes player combat actions like attacks, abilities, movement.

        **Performance:** <15ms P95, real-time processing required

        '
      operationId: combatServiceExecuteAction
      tags:
      - Combat Actions
      security:
      - BearerAuth: []
      parameters:
      - name: sessionId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CombatActionRequest'
      responses:
        '200':
          description: Action executed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CombatActionResponse'
        '400':
          description: Invalid request parameters
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '429':
          description: Too many requests - rate limit exceeded
          content:
            application/json:
              schema:
                allOf:
                - type: object
                  required:
                  - code
                  - message
                  properties:
                    code:
                      type: integer
                      example: 500
                      format: int32
                      minimum: 100
                      maximum: 599
                    message:
                      type: string
                      example: Internal server error
                      maxLength: 1000
                    details:
                      type: object
                      description: Additional error details
                  description: Standard error response format
                - type: object
                  properties:
                    retry_after:
                      type: integer
                      example: 60
                      description: Seconds to wait before retrying
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /combat/sessions/{sessionId}/state:
    get:
      summary: Get combat session state
      description: '**Combat session state endpoint**

        Returns real-time state of combat session including participant status, effects,
        and current turn information.

        **Performance:** <10ms P95, real-time updates required

        '
      operationId: combatServiceGetSessionState
      tags:
      - Combat Sessions
      security:
      - BearerAuth: []
      parameters:
      - name: sessionId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: Combat session state retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CombatSessionState'
        '404':
          description: Resource not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /combat/damage/calculate:
    post:
      summary: Calculate combat damage
      description: '**Enterprise-grade damage calculation endpoint**

        Calculates final damage based on attacker stats, weapon properties, target
        defenses, and active modifiers/effects.

        Essential for fair combat mechanics and anti-cheat validation.

        **Performance:** <5ms P95, synchronous calculation required

        **Security:** Server-side only, validates all input parameters

        '
      operationId: combatServiceCalculateDamage
      tags:
      - Damage Calculation
      security:
      - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DamageCalculationRequest'
      responses:
        '200':
          description: Damage calculated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DamageCalculationResult'
        '400':
          description: Invalid calculation request - validation failed
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '500':
          description: Internal calculation error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
      default:
        description: Unexpected error
        content:
          application/json:
            schema:
              type: object
              required:
              - code
              - message
              properties:
                code:
                  type: integer
                  example: 500
                  format: int32
                  minimum: 100
                  maximum: 599
                message:
                  type: string
                  example: Internal server error
                  maxLength: 1000
                details:
                  type: object
                  description: Additional error details
              description: Standard error response format
  /combat/weapons/{weaponId}/analytics:
    get:
      summary: Get weapon performance analytics
      description: '**Enterprise-grade weapon analytics endpoint**

        Provides comprehensive statistics on weapon usage patterns, effectiveness
        metrics, balance analysis, and player behavior insights.

        Essential for game balancing, content updates, and player experience optimization.

        **Performance:** <50ms P95 with cached aggregations

        **Data Sources:** Combat logs, player statistics, matchmaking data

        '
      operationId: combatServiceGetWeaponAnalytics
      tags:
      - Weapon Analytics
      security:
      - BearerAuth: []
      parameters:
      - name: weaponId
        in: path
        required: true
        schema:
          type: string
          format: uuid
          description: Weapon unique identifier
      - name: period
        in: query
        schema:
          type: string
          enum:
          - hourly
          - daily
          - weekly
          - monthly
          - all_time
          default: weekly
          description: Analysis time period
      - name: include_player_breakdown
        in: query
        schema:
          type: boolean
          default: false
          description: Include per-player usage statistics
      - name: time_range
        in: query
        schema:
          $ref: '#/components/schemas/TimeRange'
        description: Custom time range for analysis
      responses:
        '200':
          description: Weapon analytics retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WeaponAnalyticsResponse'
        '400':
          description: Invalid request parameters
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '404':
          description: Weapon not found or no usage data available
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
components:
  responses:
    HealthBatchSuccess:
      description: Batch health results retrieved successfully
      headers:
        Cache-Control:
          schema:
            type: string
            example: no-cache
        X-Processing-Time:
          schema:
            type: integer
            example: 15
            description: Processing time in milliseconds
      content:
        application/json:
          schema:
            type: object
            required:
            - results
            - total_time_ms
            properties:
              results:
                type: array
                items:
                  type: object
                  required:
                  - status
                  - timestamp
                  properties:
                    status:
                      type: string
                      enum:
                      - healthy
                      - degraded
                      - unhealthy
                      example: healthy
                      maxLength: 255
                    domain:
                      type: string
                      example: service-name
                      maxLength: 255
                    timestamp:
                      type: string
                      format: date-time
                      example: '2025-12-28T10:00:00Z'
                      maxLength: 255
                    version:
                      type: string
                      example: 1.0.0
                      maxLength: 50
                    uptime_seconds:
                      type: integer
                      example: 3600
                      minimum: 0
                    active_connections:
                      type: integer
                      example: 1500
                      minimum: 0
                  description: 'BACKEND NOTE: Fields ordered for struct alignment
                    (large → small). Expected memory savings: 30-50%.'
                description: Health status for each requested service
              total_time_ms:
                type: integer
                description: Total processing time in milliseconds
    TooManyRequests:
      description: Too many requests - rate limit exceeded
      headers:
        Retry-After:
          schema:
            type: integer
            example: 60
            description: Seconds to wait before retrying
      content:
        application/json:
          schema:
            type: object
            required:
            - code
            - message
            properties:
              code:
                type: integer
                example: 500
                format: int32
                minimum: 100
                maximum: 599
              message:
                type: string
                example: Internal server error
                maxLength: 1000
              details:
                type: object
                description: Additional error details
            description: Standard error response format
  schemas:
    Error:
      type: object
      required:
      - code
      - message
      properties:
        code:
          type: integer
          example: 500
          format: int32
          minimum: 100
          maximum: 599
        message:
          type: string
          example: Internal server error
          maxLength: 1000
        details:
          type: object
          description: Additional error details
      description: Standard error response format
    HealthResponse:
      type: object
      required:
      - status
      - timestamp
      properties:
        status:
          type: string
          enum:
          - healthy
          - degraded
          - unhealthy
          example: healthy
          maxLength: 255
        domain:
          type: string
          example: service-name
          maxLength: 255
        timestamp:
          type: string
          format: date-time
          example: '2025-12-28T10:00:00Z'
          maxLength: 255
        version:
          type: string
          example: 1.0.0
          maxLength: 50
        uptime_seconds:
          type: integer
          example: 3600
          minimum: 0
        active_connections:
          type: integer
          example: 1500
          minimum: 0
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    WebSocketHealthMessage:
      type: object
      required:
      - type
      - timestamp
      - services
      properties:
        type:
          type: string
          enum:
          - health_update
          - service_down
          - service_up
          example: health_update
        timestamp:
          type: string
          format: date-time
          example: '2025-12-28T10:00:00Z'
        services:
          type: object
          additionalProperties:
            type: object
            required:
            - status
            - timestamp
            properties:
              status:
                type: string
                enum:
                - healthy
                - degraded
                - unhealthy
                example: healthy
                maxLength: 255
              domain:
                type: string
                example: service-name
                maxLength: 255
              timestamp:
                type: string
                format: date-time
                example: '2025-12-28T10:00:00Z'
                maxLength: 255
              version:
                type: string
                example: 1.0.0
                maxLength: 50
              uptime_seconds:
                type: integer
                example: 3600
                minimum: 0
              active_connections:
                type: integer
                example: 1500
                minimum: 0
            description: 'BACKEND NOTE: Fields ordered for struct alignment (large
              → small). Expected memory savings: 30-50%.'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    CreateCombatSessionRequest:
      type: object
      required:
      - participants
      - rules
      properties:
        participants:
          type: array
          items:
            $ref: '#/components/schemas/CombatParticipant'
          minItems: 2
          maxItems: 8
        rules:
          $ref: '#/components/schemas/CombatRules'
        environment:
          type: string
          description: Combat environment/map
          example: urban_street
        timeout_minutes:
          type: integer
          minimum: 5
          maximum: 60
          default: 15
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    CombatSessionResponse:
      allOf:
      - allOf:
        - allOf:
          - $ref: '#/components/schemas/BaseEntity'
          - type: object
            required:
            - version
            properties:
              version:
                type: integer
                minimum: 1
                description: Optimistic locking version
                example: 1
          description: 'BACKEND NOTE: Extends BaseEntity with version control. Use
            for concurrent-safe updates.'
        - type: object
          required:
          - participants
          - status
          - start_time
          properties:
            participants:
              type: array
              items:
                $ref: '#/components/schemas/CharacterEntity'
              minItems: 2
              maxItems: 10
              description: Characters involved in combat
            status:
              type: string
              enum:
              - active
              - paused
              - completed
              - aborted
              description: Current combat state
              example: active
            start_time:
              type: string
              format: date-time
              description: ISO 8601 timestamp
              example: '2025-12-28T10:00:00Z'
              maxLength: 30
            end_time:
              type: string
              format: date-time
              description: ISO 8601 timestamp
              example: '2025-12-28T10:00:00Z'
              maxLength: 30
            current_turn:
              type: integer
              minimum: 0
              description: Current turn number in combat
              example: 1
            turn_order:
              type: array
              items:
                type: string
                format: uuid
                description: Universally Unique Identifier (UUID v4)
                example: 123e4567-e89b-12d3-a456-426614174000
                maxLength: 36
              description: Order of turns by character ID
            environment_effects:
              type: array
              items:
                type: string
              description: Active environmental effects
              example:
              - heavy_rain
              - urban_cover
        description: 'BACKEND NOTE: Combat session with optimistic locking.'
      - type: object
        properties:
          rules:
            $ref: '#/components/schemas/CombatRules'
          current_turn:
            type: integer
            minimum: 0
            description: Current turn number in combat
            example: 3
          game_mode:
            type: string
            enum:
            - deathmatch
            - team_deathmatch
            - capture_the_flag
            - domination
            description: Combat game mode
            example: deathmatch
          max_participants:
            type: integer
            minimum: 2
            maximum: 100
            description: Maximum number of participants
            example: 10
      description: 'BACKEND NOTE: SOLID inheritance from CombatSessionEntity. Fields
        ordered for struct alignment (large → small). Expected memory savings: 30-50%.'
    CombatActionRequest:
      type: object
      required:
      - action_type
      - target_id
      properties:
        action_type:
          type: string
          enum:
          - attack
          - ability
          - move
          - defend
          - item
          example: attack
        target_id:
          type: string
          format: uuid
          description: Target participant ID
        ability_id:
          type: string
          format: uuid
          description: Ability ID if action_type is ability
        position:
          $ref: '#/components/schemas/Position'
        parameters:
          type: object
          description: Additional action parameters
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    CombatActionResponse:
      type: object
      required:
      - success
      - action_id
      - effects
      properties:
        success:
          type: boolean
          example: true
        action_id:
          type: string
          format: uuid
          description: Unique action identifier
        effects:
          type: array
          items:
            $ref: '#/components/schemas/CombatEffect'
        new_state:
          $ref: '#/components/schemas/CombatSessionState'
        next_turn:
          type: integer
          description: Next turn number
        action_result:
          $ref: '#/components/schemas/CombatActionResult'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    CombatSessionState:
      type: object
      required:
      - session_id
      - status
      - participants
      - current_turn
      properties:
        session_id:
          type: string
          format: uuid
        status:
          type: string
          enum:
          - waiting
          - active
          - paused
          - finished
          - cancelled
        participants:
          type: array
          items:
            $ref: '#/components/schemas/CombatParticipantState'
        current_turn:
          type: integer
          minimum: 0
        active_effects:
          type: array
          items:
            $ref: '#/components/schemas/CombatEffect'
        environment_state:
          type: object
          description: Current environment state
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    CombatParticipant:
      allOf:
      - allOf:
        - type: object
          required:
          - id
          - created_at
          - updated_at
          properties:
            id:
              type: string
              format: uuid
              description: Unique identifier (UUID v4)
              example: 123e4567-e89b-12d3-a456-426614174000
              maxLength: 36
            created_at:
              type: string
              format: date-time
              description: Creation timestamp (ISO 8601)
              example: '2025-12-28T10:00:00Z'
              maxLength: 30
            updated_at:
              type: string
              format: date-time
              description: Last modification timestamp (ISO 8601)
              example: '2025-12-28T10:30:00Z'
              maxLength: 30
          description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
            Memory savings: 30-50%. All domain entities should extend this.'
        - type: object
          required:
          - name
          - level
          properties:
            name:
              type: string
              description: Character display name
              example: V, the Mercenary
              maxLength: 100
            level:
              type: integer
              minimum: 1
              maximum: 50
              description: Character level
              example: 25
            experience:
              type: integer
              minimum: 0
              description: Current experience points
              example: 125000
            experience_to_next:
              type: integer
              minimum: 0
              description: Experience needed for next level
              example: 150000
        description: 'BACKEND NOTE: Base character entity. Memory-aligned for performance.'
      - type: object
        required:
        - participant_type
        properties:
          participant_type:
            type: string
            enum:
            - player
            - npc
            - enemy
            description: Type of combat participant
            example: player
          combat_stats:
            $ref: '#/components/schemas/CombatStats'
          team:
            type: string
            enum:
            - red
            - blue
            - neutral
            description: Combat team assignment
            example: red
          inventory:
            type: array
            items:
              $ref: '#/components/schemas/CombatItem'
            description: Combat inventory items
          abilities:
            type: array
            items:
              $ref: '#/components/schemas/CombatAbility'
            description: Combat abilities
      description: 'BACKEND NOTE: SOLID inheritance from CharacterEntity. Fields ordered
        for struct alignment (large → small). Expected memory savings: 30-50%.'
    CombatParticipantState:
      type: object
      required:
      - participant_id
      - health
      - position
      properties:
        participant_id:
          type: string
          format: uuid
        health:
          $ref: '#/components/schemas/HealthStatus'
        position:
          $ref: '#/components/schemas/Position'
        status_effects:
          type: array
          items:
            $ref: '#/components/schemas/StatusEffect'
        action_points:
          type: integer
          minimum: 0
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    CombatRules:
      type: object
      properties:
        max_participants:
          type: integer
          minimum: 2
          maximum: 8
          default: 2
        turn_timeout_seconds:
          type: integer
          minimum: 30
          maximum: 300
          default: 60
        allow_abilities:
          type: boolean
          default: true
        allow_items:
          type: boolean
          default: true
        victory_conditions:
          type: array
          items:
            type: string
            enum:
            - eliminate_all
            - survive_time
            - collect_items
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    CombatStats:
      type: object
      required:
      - health
      - attack
      - defense
      properties:
        health:
          type: integer
          minimum: 1
        attack:
          type: integer
          minimum: 0
        defense:
          type: integer
          minimum: 0
        speed:
          type: integer
          minimum: 0
        critical_chance:
          type: number
          minimum: 0
          maximum: 1
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    HealthStatus:
      type: object
      required:
      - current
      - maximum
      properties:
        current:
          type: integer
          minimum: 0
        maximum:
          type: integer
          minimum: 1
        shield:
          type: integer
          minimum: 0
          default: 0
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    Position:
      type: object
      required:
      - x
      - y
      properties:
        x:
          type: number
          format: float
        y:
          type: number
          format: float
        z:
          type: number
          format: float
          default: 0
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    CombatEffect:
      type: object
      required:
      - type
      - target_id
      - value
      properties:
        type:
          type: string
          enum:
          - damage
          - heal
          - buff
          - debuff
          - status
        target_id:
          type: string
          format: uuid
        value:
          type: integer
        duration_turns:
          type: integer
          minimum: 0
        effect_id:
          type: string
          format: uuid
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    StatusEffect:
      type: object
      required:
      - type
      - duration
      properties:
        type:
          type: string
          enum:
          - poison
          - burn
          - stun
          - slow
          - haste
        duration:
          type: integer
          minimum: 1
        intensity:
          type: integer
          minimum: 1
          default: 1
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    PaginationParams:
      type: object
      properties:
        limit:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          example: 20
        offset:
          type: integer
          minimum: 0
          default: 0
          example: 0
    PaginatedResponse:
      type: object
      required:
      - items
      - total
      - limit
      - offset
      properties:
        items:
          type: array
          description: Array of items
        total:
          type: integer
          minimum: 0
          example: 100
          description: Total number of items
        limit:
          type: integer
          minimum: 1
          maximum: 100
          example: 20
          description: Items per page
        offset:
          type: integer
          minimum: 0
          example: 0
          description: Number of items to skip
    DamageCalculationRequest:
      type: object
      required:
      - attacker_id
      - target_id
      - base_damage
      - damage_type
      properties:
        attacker_id:
          type: string
          format: uuid
          description: Attacking entity identifier
        target_id:
          type: string
          format: uuid
          description: Target entity identifier
        base_damage:
          type: number
          format: float
          minimum: 0
          description: Base damage before modifiers
        damage_type:
          type: string
          enum:
          - physical
          - energy
          - chemical
          - cybernetic
          - elemental
          description: Type of damage being dealt
        weapon_id:
          type: string
          format: uuid
          description: Weapon or ability used
        modifiers:
          type: object
          properties:
            is_critical:
              type: boolean
              default: false
            weak_spot:
              type: boolean
              default: false
            range_modifier:
              type: number
              format: float
              minimum: 0.1
              maximum: 2.0
              default: 1.0
            environmental_factor:
              type: number
              format: float
              minimum: 0.0
              maximum: 2.0
              default: 1.0
          description: Damage modifiers and multipliers
        attacker_stats:
          type: object
          properties:
            strength:
              type: integer
              minimum: 0
            agility:
              type: integer
              minimum: 0
            intelligence:
              type: integer
              minimum: 0
            cybernetic_level:
              type: integer
              minimum: 0
              maximum: 5
          description: Attacker's relevant statistics
        target_defenses:
          type: object
          properties:
            armor:
              type: number
              format: float
              minimum: 0
            resistances:
              type: object
              additionalProperties:
                type: number
                format: float
                minimum: 0
                maximum: 1
              description: Damage type resistances (0.0-1.0)
            shield:
              type: number
              format: float
              minimum: 0
          description: Target's defensive capabilities
      description: '"BACKEND NOTE: Request structure optimized for damage calculation
        pipeline.

        All fields validated against game state before calculation."

        '
    DamageCalculationResult:
      type: object
      required:
      - attacker_id
      - target_id
      - base_damage
      - final_damage
      - damage_type
      - calculation_details
      properties:
        attacker_id:
          type: string
          format: uuid
          description: Attacking entity identifier
        target_id:
          type: string
          format: uuid
          description: Target entity identifier
        base_damage:
          type: number
          format: float
          description: Original base damage
        final_damage:
          type: number
          format: float
          minimum: 0
          description: Final damage after all calculations
        damage_type:
          type: string
          enum:
          - physical
          - energy
          - chemical
          - cybernetic
          - elemental
          description: Type of damage dealt
        modifiers_applied:
          type: array
          items:
            type: object
            required:
            - name
            - value
            properties:
              name:
                type: string
              value:
                type: number
                format: float
              type:
                type: string
                enum:
                - multiplier
                - additive
                - reduction
          description: List of modifiers applied in calculation
        was_critical:
          type: boolean
          description: Whether the attack was critical
        was_blocked:
          type: boolean
          description: Whether the attack was blocked
        damage_reduction:
          type: number
          format: float
          minimum: 0
          description: Total damage reduction applied
        penetration:
          type: number
          format: float
          minimum: 0
          maximum: 1
          description: Armor penetration percentage
        calculation_details:
          type: object
          properties:
            attacker_contribution:
              type: number
              format: float
            weapon_contribution:
              type: number
              format: float
            modifier_contribution:
              type: number
              format: float
            defense_reduction:
              type: number
              format: float
          description: Detailed breakdown of damage calculation
        elemental_effects:
          type: array
          items:
            $ref: '#/components/schemas/ElementalEffect'
          description: Elemental damage effects applied
        timestamp:
          type: string
          format: date-time
          description: Calculation timestamp
      description: '"BACKEND NOTE: Result structure designed for combat logging and
        replay.

        All calculations logged for anti-cheat auditing."

        '
    WeaponAnalyticsResponse:
      type: object
      required:
      - weapon_id
      - analysis_period
      - usage_stats
      - performance_metrics
      - balance_assessment
      properties:
        weapon_id:
          type: string
          format: uuid
          description: Weapon identifier
        weapon_name:
          type: string
          description: Human-readable weapon name
        analysis_period:
          type: object
          required:
          - period_type
          - start_date
          - end_date
          properties:
            period_type:
              type: string
              enum:
              - hourly
              - daily
              - weekly
              - monthly
              - all_time
            start_date:
              type: string
              format: date-time
            end_date:
              type: string
              format: date-time
            total_hours:
              type: integer
              description: Total hours analyzed
        usage_stats:
          type: object
          required:
          - total_uses
          - unique_users
          - average_uses_per_user
          properties:
            total_uses:
              type: integer
              minimum: 0
              description: Total times weapon was used
            unique_users:
              type: integer
              minimum: 0
              description: Number of unique players using weapon
            average_uses_per_user:
              type: number
              format: float
              description: Average usage per player
            usage_by_level:
              type: object
              additionalProperties:
                type: integer
              description: Usage breakdown by player level
            usage_by_region:
              type: object
              additionalProperties:
                type: integer
              description: Usage by game region
            items:
              type: array
              items:
                $ref: '#/components/schemas/WeaponAnalyticsItem'
              description: Detailed weapon analytics items
        performance_metrics:
          type: object
          required:
          - average_damage
          - kill_death_ratio
          - win_rate
          properties:
            average_damage:
              type: number
              format: float
              description: Average damage per use
            kill_death_ratio:
              type: number
              format: float
              description: Kills per death ratio
            win_rate:
              type: number
              format: float
              minimum: 0
              maximum: 1
              description: Win rate when using this weapon
            accuracy_rate:
              type: number
              format: float
              minimum: 0
              maximum: 1
              description: Hit accuracy percentage
            time_to_kill:
              type: number
              format: float
              description: Average time to defeat opponent
            damage_per_second:
              type: number
              format: float
              description: Average DPS
        balance_assessment:
          type: object
          required:
          - balance_score
          - recommendations
          properties:
            balance_score:
              type: number
              format: float
              minimum: 0
              maximum: 100
              description: Overall balance score (0-100)
            power_level:
              type: string
              enum:
              - underpowered
              - balanced
              - overpowered
              description: Power level assessment
            recommendations:
              type: array
              items:
                type: object
                required:
                - type
                - description
                - priority
                properties:
                  type:
                    type: string
                    enum:
                    - buff_damage
                    - nerf_damage
                    - adjust_cooldown
                    - change_cost
                    - balance_other_weapons
                  description:
                    type: string
                  priority:
                    type: string
                    enum:
                    - low
                    - medium
                    - high
                    - critical
              description: Balance adjustment recommendations
            compared_to_similar:
              type: object
              description: Comparison with similar weapons
              additionalProperties: true
      description: '"BACKEND NOTE: Analytics data aggregated from combat logs.

        Cached for performance with configurable TTL based on period."

        '
    CombatItem:
      type: object
      required:
      - id
      - name
      - type
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          maxLength: 100
        type:
          type: string
          enum:
          - weapon
          - armor
          - consumable
          - implant
        damage:
          type: integer
          minimum: 0
        ammo:
          type: integer
          minimum: 0
        durability:
          type: integer
          minimum: 0
      description: Combat item with performance optimizations
    CombatAbility:
      type: object
      required:
      - id
      - name
      - type
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          maxLength: 100
        type:
          type: string
          enum:
          - attack
          - defense
          - heal
          - buff
        damage:
          type: integer
          minimum: 0
        cooldown:
          type: integer
          minimum: 0
        last_used:
          type: string
          format: date-time
      description: Combat ability with cooldown tracking
    CombatActionResult:
      type: object
      required:
      - action_id
      - participant
      - action_type
      - timestamp
      - success
      properties:
        action_id:
          type: string
        participant:
          type: string
        action_type:
          type: string
        timestamp:
          type: string
          format: date-time
        effects:
          type: array
          items:
            $ref: '#/components/schemas/CombatEffect'
        success:
          type: boolean
      description: Result of a combat action
    ElementalEffect:
      type: object
      required:
      - type
      - value
      properties:
        type:
          type: string
          enum:
          - fire
          - ice
          - electric
          - poison
        value:
          type: integer
      description: Elemental damage effect
    TimeRange:
      type: object
      required:
      - start_time
      - end_time
      properties:
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
      description: Time range filter for analytics
    WeaponAnalyticsItem:
      type: object
      required:
      - weapon_type
      - total_damage
      - accuracy
      - usage_count
      properties:
        weapon_type:
          type: string
        total_damage:
          type: integer
        accuracy:
          type: number
          minimum: 0
          maximum: 1
        usage_count:
          type: integer
      description: Weapon performance analytics
    CharacterEntity:
      allOf:
      - type: object
        required:
        - id
        - created_at
        - updated_at
        properties:
          id:
            type: string
            format: uuid
            description: Unique identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          created_at:
            type: string
            format: date-time
            description: Creation timestamp (ISO 8601)
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          updated_at:
            type: string
            format: date-time
            description: Last modification timestamp (ISO 8601)
            example: '2025-12-28T10:30:00Z'
            maxLength: 30
        description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
          Memory savings: 30-50%. All domain entities should extend this.'
      - type: object
        required:
        - name
        - level
        properties:
          name:
            type: string
            description: Character display name
            example: V, the Mercenary
            maxLength: 100
          level:
            type: integer
            minimum: 1
            maximum: 50
            description: Character level
            example: 25
          experience:
            type: integer
            minimum: 0
            description: Current experience points
            example: 125000
          experience_to_next:
            type: integer
            minimum: 0
            description: Experience needed for next level
            example: 150000
      description: 'BACKEND NOTE: Base character entity. Memory-aligned for performance.'
    CharacterStats:
      type: object
      required:
      - health
      - max_health
      - stamina
      - max_stamina
      properties:
        health:
          type: integer
          minimum: 0
          description: Current health points
          example: 850
        max_health:
          type: integer
          minimum: 1
          description: Maximum health points
          example: 1000
        stamina:
          type: integer
          minimum: 0
          description: Current stamina points
          example: 75
        max_stamina:
          type: integer
          minimum: 1
          description: Maximum stamina points
          example: 100
        strength:
          type: integer
          minimum: 0
          maximum: 20
          description: Physical strength attribute
          example: 15
        dexterity:
          type: integer
          minimum: 0
          maximum: 20
          description: Agility and precision
          example: 18
        intelligence:
          type: integer
          minimum: 0
          maximum: 20
          description: Mental acuity and hacking
          example: 12
        cool:
          type: integer
          minimum: 0
          maximum: 20
          description: Composure under pressure
          example: 16
        tech:
          type: integer
          minimum: 0
          maximum: 20
          description: Technical aptitude
          example: 10
      description: 'BACKEND NOTE: Character attributes and vital stats.'
    ItemEntity:
      allOf:
      - type: object
        required:
        - id
        - created_at
        - updated_at
        properties:
          id:
            type: string
            format: uuid
            description: Unique identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          created_at:
            type: string
            format: date-time
            description: Creation timestamp (ISO 8601)
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          updated_at:
            type: string
            format: date-time
            description: Last modification timestamp (ISO 8601)
            example: '2025-12-28T10:30:00Z'
            maxLength: 30
        description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
          Memory savings: 30-50%. All domain entities should extend this.'
      - type: object
        required:
        - name
        - type
        - rarity
        properties:
          name:
            type: string
            description: Item display name
            example: Malorian Arms 3516
            maxLength: 100
          type:
            type: string
            enum:
            - weapon
            - armor
            - implant
            - consumable
            - quest_item
            - cosmetic
            description: Item category
            example: weapon
          rarity:
            type: string
            enum:
            - common
            - uncommon
            - rare
            - epic
            - legendary
            - unique
            description: Item rarity tier
            example: epic
          description:
            type: string
            description: Item description/flavor text
            example: A powerful pistol with cyberpunk aesthetics
            maxLength: 500
          icon_url:
            type: string
            format: uri
            description: Item icon image URL
            example: https://cdn.necpgame.com/items/malorian-3516.png
          is_stackable:
            type: boolean
            description: Whether item can stack in inventory
            example: false
          max_stack_size:
            type: integer
            minimum: 1
            description: Maximum stack size if stackable
            example: 99
      description: 'BACKEND NOTE: Base item entity with gaming-specific fields.'
    WeaponEntity:
      allOf:
      - $ref: '#/components/schemas/ItemEntity'
      - type: object
        required:
        - damage
        - fire_rate
        - ammo_type
        properties:
          damage:
            type: integer
            minimum: 1
            description: Base damage per shot
            example: 45
          damage_type:
            type: string
            enum:
            - physical
            - thermal
            - electrical
            - chemical
            - cyber
            description: Type of damage dealt
            example: physical
          fire_rate:
            type: number
            minimum: 0.1
            description: Shots per second
            example: 8.5
          ammo_type:
            type: string
            description: Required ammunition type
            example: 9mm
            maxLength: 50
          magazine_size:
            type: integer
            minimum: 1
            description: Rounds per magazine
            example: 12
          range:
            type: integer
            minimum: 1
            description: Effective range in meters
            example: 25
      description: 'BACKEND NOTE: Weapon-specific item properties.'
    CombatSessionEntity:
      allOf:
      - allOf:
        - $ref: '#/components/schemas/BaseEntity'
        - type: object
          required:
          - version
          properties:
            version:
              type: integer
              minimum: 1
              description: Optimistic locking version
              example: 1
        description: 'BACKEND NOTE: Extends BaseEntity with version control. Use for
          concurrent-safe updates.'
      - type: object
        required:
        - participants
        - status
        - start_time
        properties:
          participants:
            type: array
            items:
              $ref: '#/components/schemas/CharacterEntity'
            minItems: 2
            maxItems: 10
            description: Characters involved in combat
          status:
            type: string
            enum:
            - active
            - paused
            - completed
            - aborted
            description: Current combat state
            example: active
          start_time:
            type: string
            format: date-time
            description: ISO 8601 timestamp
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          end_time:
            type: string
            format: date-time
            description: ISO 8601 timestamp
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          current_turn:
            type: integer
            minimum: 0
            description: Current turn number in combat
            example: 1
          turn_order:
            type: array
            items:
              type: string
              format: uuid
              description: Universally Unique Identifier (UUID v4)
              example: 123e4567-e89b-12d3-a456-426614174000
              maxLength: 36
            description: Order of turns by character ID
          environment_effects:
            type: array
            items:
              type: string
            description: Active environmental effects
            example:
            - heavy_rain
            - urban_cover
      description: 'BACKEND NOTE: Combat session with optimistic locking.'
    CombatEffectEntity:
      allOf:
      - type: object
        required:
        - id
        - created_at
        - updated_at
        properties:
          id:
            type: string
            format: uuid
            description: Unique identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          created_at:
            type: string
            format: date-time
            description: Creation timestamp (ISO 8601)
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          updated_at:
            type: string
            format: date-time
            description: Last modification timestamp (ISO 8601)
            example: '2025-12-28T10:30:00Z'
            maxLength: 30
        description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
          Memory savings: 30-50%. All domain entities should extend this.'
      - type: object
        required:
        - target_id
        - effect_type
        - duration
        properties:
          target_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          effect_type:
            type: string
            enum:
            - buff
            - debuff
            - dot
            - hot
            - stun
            - slow
            description: Type of combat effect
            example: buff
          name:
            type: string
            description: Effect display name
            example: Adrenaline Rush
            maxLength: 50
          description:
            type: string
            description: Effect description
            example: +50% movement speed for 30 seconds
            maxLength: 200
          duration:
            type: integer
            minimum: 1
            description: Effect duration in seconds
            example: 30
          remaining_duration:
            type: integer
            minimum: 0
            description: Time remaining in seconds
            example: 15
          magnitude:
            type: number
            description: Effect strength/intensity
            example: 0.5
          stacks:
            type: integer
            minimum: 1
            maximum: 10
            description: Number of effect stacks
            example: 1
          source_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
      description: 'BACKEND NOTE: Combat effects and status conditions.'
    QuestEntity:
      allOf:
      - allOf:
        - $ref: '#/components/schemas/BaseEntity'
        - type: object
          properties:
            created_by:
              type: string
              format: uuid
              description: ID of user who created the entity
              example: 123e4567-e89b-12d3-a456-426614174001
              maxLength: 36
            updated_by:
              type: string
              format: uuid
              description: ID of user who last modified the entity
              example: 123e4567-e89b-12d3-a456-426614174002
              maxLength: 36
        description: 'BACKEND NOTE: Extends BaseEntity with audit trail. Use for admin-managed
          entities.'
      - type: object
        required:
        - title
        - description
        - type
        - status
        properties:
          title:
            type: string
            description: Quest display title
            example: Phantom Liberty
            maxLength: 100
          description:
            type: string
            description: Quest description
            example: Investigate the mysterious data fragment
            maxLength: 1000
          type:
            type: string
            enum:
            - main_story
            - side_quest
            - gig
            - romance
            - faction
            - cyberpsycho
            description: Quest category
            example: main_story
          status:
            type: string
            enum:
            - available
            - active
            - completed
            - failed
            - expired
            description: Quest availability status
            example: active
          level_requirement:
            type: integer
            minimum: 1
            maximum: 50
            description: Minimum character level required
            example: 20
          rewards:
            type: array
            items:
              type: object
              properties:
                type:
                  type: string
                  enum:
                  - experience
                  - money
                  - item
                  - reputation
                amount:
                  type: integer
                  minimum: 1
                item_id:
                  type: string
                  format: uuid
                  description: Universally Unique Identifier (UUID v4)
                  example: 123e4567-e89b-12d3-a456-426614174000
                  maxLength: 36
            description: Quest completion rewards
          objectives:
            type: array
            items:
              type: object
              required:
              - description
              - completed
              properties:
                description:
                  type: string
                  maxLength: 200
                completed:
                  type: boolean
                progress:
                  type: integer
                  minimum: 0
                target:
                  type: integer
                  minimum: 1
            description: Quest objectives and progress
      description: 'BACKEND NOTE: Quest definition with progress tracking.'
    CombatActionEntity:
      allOf:
      - type: object
        required:
        - id
        - created_at
        - updated_at
        properties:
          id:
            type: string
            format: uuid
            description: Unique identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          created_at:
            type: string
            format: date-time
            description: Creation timestamp (ISO 8601)
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          updated_at:
            type: string
            format: date-time
            description: Last modification timestamp (ISO 8601)
            example: '2025-12-28T10:30:00Z'
            maxLength: 30
        description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
          Memory savings: 30-50%. All domain entities should extend this.'
      - type: object
        required:
        - session_id
        - action_type
        - source_id
        properties:
          session_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          action_type:
            type: string
            enum:
            - attack
            - defend
            - ability
            - item
            - move
            description: Type of combat action
            example: attack
          source_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          target_ids:
            type: array
            items:
              type: string
              format: uuid
              description: Universally Unique Identifier (UUID v4)
              example: 123e4567-e89b-12d3-a456-426614174000
              maxLength: 36
            description: Targets of the action
          damage_dealt:
            type: integer
            minimum: 0
            description: Damage dealt by this action
            example: 145
          effects_applied:
            type: array
            items:
              type: string
              enum:
              - stun
              - poison
              - burn
              - bleed
              - slow
            description: Status effects applied
          turn_number:
            type: integer
            minimum: 1
            description: Combat turn when action occurred
            example: 3
      description: 'BACKEND NOTE: Combat actions with damage and effects tracking.'
    AbilityEntity:
      allOf:
      - type: object
        required:
        - id
        - created_at
        - updated_at
        properties:
          id:
            type: string
            format: uuid
            description: Unique identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          created_at:
            type: string
            format: date-time
            description: Creation timestamp (ISO 8601)
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          updated_at:
            type: string
            format: date-time
            description: Last modification timestamp (ISO 8601)
            example: '2025-12-28T10:30:00Z'
            maxLength: 30
        description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
          Memory savings: 30-50%. All domain entities should extend this.'
      - type: object
        required:
        - name
        - type
        - cooldown
        properties:
          name:
            type: string
            description: Ability display name
            example: Sandevistan Overdrive
            maxLength: 100
          description:
            type: string
            description: Ability description
            example: Temporarily increases movement speed by 300%
            maxLength: 500
          type:
            type: string
            enum:
            - offensive
            - defensive
            - utility
            - movement
            - hacking
            description: Ability category
            example: movement
          cooldown:
            type: integer
            minimum: 0
            description: Cooldown in seconds
            example: 30
          mana_cost:
            type: integer
            minimum: 0
            description: Resource cost to use
            example: 25
          range:
            type: integer
            minimum: 0
            description: Ability range in meters
            example: 10
          damage:
            type: integer
            minimum: 0
            description: Base damage if applicable
            example: 0
          healing:
            type: integer
            minimum: 0
            description: Healing amount if applicable
            example: 50
          effects:
            type: array
            items:
              type: string
            description: Effects applied by ability
            example:
            - speed_boost
            - damage_reduction
          level_requirement:
            type: integer
            minimum: 1
            maximum: 50
            description: Required character level
            example: 15
          icon_url:
            type: string
            format: uri
            description: Ability icon URL
      description: 'BACKEND NOTE: Character abilities and special moves.'
    LocationEntity:
      allOf:
      - type: object
        required:
        - id
        - created_at
        - updated_at
        properties:
          id:
            type: string
            format: uuid
            description: Unique identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          created_at:
            type: string
            format: date-time
            description: Creation timestamp (ISO 8601)
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          updated_at:
            type: string
            format: date-time
            description: Last modification timestamp (ISO 8601)
            example: '2025-12-28T10:30:00Z'
            maxLength: 30
        description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
          Memory savings: 30-50%. All domain entities should extend this.'
      - type: object
        required:
        - name
        - coordinates
        - type
        properties:
          name:
            type: string
            description: Location display name
            example: Container Plaza
            maxLength: 100
          coordinates:
            type: object
            required:
            - x
            - y
            - z
            properties:
              x:
                type: number
                description: X coordinate
                example: 1234.56
              y:
                type: number
                description: Y coordinate
                example: 7890.12
              z:
                type: number
                description: Z coordinate (height)
                example: 15.5
            description: 3D world coordinates
          type:
            type: string
            enum:
            - district
            - building
            - landmark
            - fast_travel
            - quest_location
            - vendor
            description: Location category
            example: district
          faction_control:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          security_level:
            type: string
            enum:
            - safe
            - moderate
            - dangerous
            - deadly
            description: Location danger level
            example: moderate
          is_discovered:
            type: boolean
            description: Whether player has discovered this location
            example: true
      description: 'BACKEND NOTE: Game world locations and points of interest.'
    BaseEntity:
      type: object
      required:
      - id
      - created_at
      - updated_at
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier (UUID v4)
          example: 123e4567-e89b-12d3-a456-426614174000
          maxLength: 36
        created_at:
          type: string
          format: date-time
          description: Creation timestamp (ISO 8601)
          example: '2025-12-28T10:00:00Z'
          maxLength: 30
        updated_at:
          type: string
          format: date-time
          description: Last modification timestamp (ISO 8601)
          example: '2025-12-28T10:30:00Z'
          maxLength: 30
      description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
        Memory savings: 30-50%. All domain entities should extend this.'
    AuditableEntity:
      allOf:
      - $ref: '#/components/schemas/BaseEntity'
      - type: object
        properties:
          created_by:
            type: string
            format: uuid
            description: ID of user who created the entity
            example: 123e4567-e89b-12d3-a456-426614174001
            maxLength: 36
          updated_by:
            type: string
            format: uuid
            description: ID of user who last modified the entity
            example: 123e4567-e89b-12d3-a456-426614174002
            maxLength: 36
      description: 'BACKEND NOTE: Extends BaseEntity with audit trail. Use for admin-managed
        entities.'
    VersionedEntity:
      allOf:
      - $ref: '#/components/schemas/BaseEntity'
      - type: object
        required:
        - version
        properties:
          version:
            type: integer
            minimum: 1
            description: Optimistic locking version
            example: 1
      description: 'BACKEND NOTE: Extends BaseEntity with version control. Use for
        concurrent-safe updates.'
    SoftDeletableEntity:
      allOf:
      - $ref: '#/components/schemas/BaseEntity'
      - type: object
        properties:
          deleted_at:
            type: string
            format: date-time
            nullable: true
            description: Soft deletion timestamp (null if not deleted)
            example: null
            maxLength: 30
      description: 'BACKEND NOTE: Extends BaseEntity with soft delete capability.
        Use for recoverable deletions.'
    UpdateRequest:
      type: object
      required:
      - id
      description: Base schema for update operations with optimistic locking support.
      properties:
        id:
          $ref: '#/components/schemas/UUID'
        version:
          type: integer
          minimum: 1
          description: Current entity version for optimistic locking
        metadata:
          type: object
          properties:
            updated_by:
              $ref: '#/components/schemas/UUID'
            reason:
              type: string
              maxLength: 200
              description: Update reason for audit trail
    UUID:
      type: string
      format: uuid
      description: Universally Unique Identifier (UUID v4)
      example: 123e4567-e89b-12d3-a456-426614174000
      maxLength: 36
    Email:
      type: string
      format: email
      description: Email address
      example: user@necpgame.com
      maxLength: 255
    Timestamp:
      type: string
      format: date-time
      description: ISO 8601 timestamp
      example: '2025-12-28T10:00:00Z'
      maxLength: 30
    Version:
      type: string
      pattern: ^\d+\.\d+\.\d+$
      description: Semantic version (MAJOR.MINOR.PATCH)
      example: 1.0.0
      maxLength: 20
    ValidationResult:
      type: object
      required:
      - valid
      properties:
        valid:
          type: boolean
          description: Whether validation passed
          example: true
        errors:
          type: array
          items:
            type: string
          description: Validation error messages
          example:
          - Field is required
          - Invalid format
        warnings:
          type: array
          items:
            type: string
          description: Validation warnings
          example:
          - Deprecated field usage
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT Bearer token authentication
