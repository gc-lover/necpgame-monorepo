openapi: 3.0.3
info:
  title: Cosmetic Service API - Enterprise-Grade
  description: '**Enterprise-Grade Cosmetic Service API for NECPGAME**

    This service manages cosmetic items, appearances, and visual customizations for
    players in the Night City universe. Provides comprehensive cosmetic functionality
    with performance optimizations and enterprise-grade architecture.

    ## Key Features

    - **Cosmetic Item Management**: Complete CRUD operations for cosmetic items -
    **Character Appearance**: Player customization and visual configurations - **Shop
    Integration**: Purchase and acquisition systems - **Equipment System**: Cosmetic
    item equipping and management - **Event System**: Time-limited cosmetic events
    and promotions

    ## Domain Purpose

    The Cosmetic Service handles all visual customizations and cosmetic items in NECPGAME.
    This includes character appearances, weapon skins, vehicle modifications, and
    other visual enhancements.

    ## Performance Targets

    - P99 Latency: <50ms for hot paths - Memory: <50KB per player instance - Concurrent
    users: 10,000+ simultaneous connections - Data consistency: Event-sourced with
    CQRS patterns

    ## Modular Architecture

    The Cosmetic Service is organized into specialized modules for better maintainability:

    - **Core Module** (`cosmetic.yaml`): Core cosmetic operations and health checks
    - **Shop Module** (`cosmetic_shop.yaml`): Purchase and acquisition functionality
    - **Equipment Module** (`cosmetic_equipment.yaml`): Item equipping and management
    - **Catalog Module** (`cosmetic_catalog.yaml`): Item browsing and search - **Events
    Module** (`cosmetic_events.yaml`): Event-based cosmetic promotions

    Each module can be developed, deployed, and scaled independently while maintaining
    consistent API patterns and shared infrastructure.

    ## BACKEND NOTE - Struct alignment hints: 30-50% memory savings across all cosmetic
    operations - Optimized for MMOFPS RPG with low latency cosmetic operations - Context
    timeouts: Module-specific timeout configurations - DB pool config: Dedicated connection
    pools per module - Performance target: <50ms P95 for cross-module operations '
  version: 1.0.0
  contact:
    name: NECPGAME API Support
    url: https://necpgame.com/support
    email: api@necpgame.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
servers:
- url: https://api.necpgame.com/v1/cosmetic
  description: Production server
- url: https://staging-api.necpgame.com/v1/cosmetic
  description: Staging server
- url: http://localhost:8117/api/v1/cosmetic
  description: Local development server
security:
- BearerAuth: []
tags:
- name: Health Monitoring
  description: System health and performance monitoring
paths:
  /health:
    get:
      summary: Cosmetic Service Health Check
      description: '**Enterprise-grade health check endpoint**

        Provides real-time health status of the cosmetic service and all modules.

        Critical for service discovery, load balancing, and monitoring.

        **Performance:** <1ms response time, cached for 30 seconds '
      operationId: cosmeticServiceHealthCheck
      tags:
      - Health Monitoring
      parameters:
      - name: Accept-Encoding
        in: header
        schema:
          type: string
          enum:
          - gzip
          - deflate
          - br
      responses:
        '200':
          description: Service is healthy
          headers:
            Cache-Control:
              schema:
                type: string
                example: max-age=30, s-maxage=60
            ETag:
              schema:
                type: string
                example: '"health-v1.0"'
            Content-Encoding:
              schema:
                type: string
                enum:
                - gzip
                - deflate
                - br
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
        '503':
          description: Service is unhealthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
components:
  responses:
    OK:
      $ref: ../common/responses/success.yaml#/OK
    Created:
      $ref: ../common/responses/success.yaml#/Created
    Updated:
      $ref: ../common/responses/success.yaml#/Updated
    Deleted:
      $ref: ../common/responses/success.yaml#/Deleted
    BadRequest:
      $ref: ../common/responses/error.yaml#/BadRequest
    Unauthorized:
      $ref: ../common/responses/error.yaml#/Unauthorized
    NotFound:
      $ref: ../common/responses/error.yaml#/NotFound
    TooManyRequests:
      $ref: ../common/responses/error.yaml#/TooManyRequests
  schemas:
    HealthResponse:
      type: object
      required:
      - status
      - timestamp
      - service
      properties:
        status:
          type: string
          enum:
          - healthy
          - unhealthy
          - degraded
          example: healthy
        timestamp:
          type: string
          format: date-time
          example: '2024-01-01T12:00:00Z'
        service:
          type: string
          example: cosmetic-service
        version:
          type: string
          example: 1.0.0
        uptime:
          type: integer
          description: Uptime in seconds
          example: 3600
        active_connections:
          type: integer
          example: 1250
      description: Comprehensive health response including module statuses
    Error:
      type: object
      required:
      - code
      - message
      properties:
        code:
          type: integer
          minimum: 100
          maximum: 599
          example: 400
        message:
          type: string
          example: Bad request
        details:
          type: object
          description: Additional error details
    InfrastructureEntity:
      type: object
      required:
      - id
      - created_at
      - updated_at
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier for infrastructure entity
          example: f47ac10b-58cc-4372-a567-0e02b2c3d479
        created_at:
          type: string
          format: date-time
          description: Entity creation timestamp
          example: '2024-01-15T10:30:00Z'
        updated_at:
          type: string
          format: date-time
          description: Last modification timestamp
          example: '2024-01-15T14:20:00Z'
        version:
          type: integer
          minimum: 1
          description: Optimistic locking version for concurrent operations
          example: 1
    ErrorResponse:
      type: object
      required:
      - code
      - message
      properties:
        code:
          type: integer
          minimum: 100
          maximum: 599
          example: 400
        message:
          type: string
          example: Bad request
        details:
          type: object
          description: Additional error details
    HealthBatchRequest:
      type: object
      properties:
        services:
          type: array
          items:
            type: string
          description: List of services to check
    HealthBatchResponse:
      type: object
      properties:
        results:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/HealthResponse'
    BaseEntity:
      type: object
      required:
      - id
      - created_at
      - updated_at
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier
          example: f47ac10b-58cc-4372-a567-0e02b2c3d479
        created_at:
          type: string
          format: date-time
          description: Creation timestamp
          example: '2024-01-15T10:30:00Z'
        updated_at:
          type: string
          format: date-time
          description: Last modification timestamp
          example: '2024-01-15T14:20:00Z'
    OptimisticLock:
      type: object
      properties:
        version:
          type: integer
          minimum: 1
          description: Version for optimistic locking
          example: 1
    UserAccountEntity:
      allOf:
      - $ref: '#/components/schemas/InfrastructureEntity'
      - type: object
        required:
        - username
        - email
        - account_status
        - registration_method
        properties:
          username:
            type: string
            minLength: 3
            maxLength: 30
            pattern: ^[a-zA-Z0-9_-]+$
            description: Unique username for login
            example: nightrunner2077
          email:
            type: string
            format: email
            description: Primary email address
            example: nightrunner@necpgame.com
          email_verified:
            type: boolean
            description: Whether email is verified
            example: true
          email_verification_token:
            type: string
            description: Token for email verification
            example: abc123def456
          password_hash:
            type: string
            description: Bcrypt password hash
            example: $2b$10$...
          account_status:
            type: string
            enum:
            - active
            - suspended
            - banned
            - pending_verification
            - deactivated
            description: Account status
            example: active
          registration_method:
            type: string
            enum:
            - email_password
            - google_oauth
            - discord_oauth
            - steam_oauth
            - guest
            description: How user registered
            example: email_password
          registration_ip:
            type: string
            description: IP address used during registration
            example: 192.168.1.100
          last_login_ip:
            type: string
            description: IP address of last login
            example: 10.0.0.50
          last_login_at:
            type: string
            format: date-time
            description: Timestamp of last successful login
            example: '2024-01-15T14:20:00Z'
          login_count:
            type: integer
            minimum: 0
            description: Total number of logins
            example: 147
          failed_login_attempts:
            type: integer
            minimum: 0
            description: Recent failed login attempts
            example: 0
          account_locked_until:
            type: string
            format: date-time
            description: When account lock expires
            example: '2024-01-15T16:00:00Z'
          two_factor_enabled:
            type: boolean
            description: Whether 2FA is enabled
            example: true
          two_factor_secret:
            type: string
            description: TOTP secret for 2FA
            example: JBSWY3DPEHPK3PXP
          recovery_email:
            type: string
            format: email
            description: Backup email for account recovery
            example: backup@necpgame.com
          preferred_language:
            type: string
            enum:
            - en
            - es
            - zh
            - ja
            - ru
            - de
            - fr
            - pl
            - ko
            - pt
            description: User's preferred language
            example: en
    SessionEntity:
      allOf:
      - $ref: '#/components/schemas/InfrastructureEntity'
      - type: object
        required:
        - user_id
        - session_token
        - ip_address
        - user_agent
        - expires_at
        properties:
          user_id:
            type: string
            format: uuid
            description: User this session belongs to
            example: a1b2c3d4-e5f6-7890-abcd-ef1234567890
          session_token:
            type: string
            minLength: 32
            maxLength: 128
            description: Unique session identifier/token
            example: abc123def456ghi789jkl012mno345pqr678stu901vwx
          refresh_token:
            type: string
            minLength: 32
            maxLength: 128
            description: Token for refreshing session
            example: yz234abc567def890ghi123jkl456mno789pqr012stu
          ip_address:
            type: string
            description: Client IP address
            example: 192.168.1.100
          user_agent:
            type: string
            description: Client user agent string
            example: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36
          device_fingerprint:
            type: string
            description: Unique device identifier
            example: fp_abcdef1234567890
          location:
            type: string
            description: Approximate location based on IP
            example: New York, US
          expires_at:
            type: string
            format: date-time
            description: When session expires
            example: '2024-01-15T16:20:00Z'
          is_active:
            type: boolean
            description: Whether session is currently active
            example: true
          last_activity_at:
            type: string
            format: date-time
            description: Last user activity in this session
            example: '2024-01-15T15:45:00Z'
          security_level:
            type: string
            enum:
            - standard
            - elevated
            - maximum
            description: Security level of session
            example: standard
          session_metadata:
            type: object
            description: Additional session data
            properties:
              game_version:
                type: string
                description: Client game version
                example: 1.2.3
              platform:
                type: string
                enum:
                - windows
                - macos
                - linux
                - ios
                - android
                - web
                description: Client platform
                example: windows
              vpn_detected:
                type: boolean
                description: Whether VPN usage was detected
                example: false
    AuditLogEntity:
      allOf:
      - $ref: '#/components/schemas/InfrastructureEntity'
      - type: object
        required:
        - event_type
        - actor_id
        - resource_type
        - action
        - severity
        properties:
          event_type:
            type: string
            enum:
            - user_action
            - system_event
            - security_event
            - admin_action
            - api_call
            description: Category of audit event
            example: user_action
          actor_id:
            type: string
            format: uuid
            description: User/system that performed the action
            example: b2c3d4e5-f6g7-8901-bcde-f23456789012
          actor_type:
            type: string
            enum:
            - user
            - system
            - admin
            - api_client
            description: Type of actor
            example: user
          resource_type:
            type: string
            enum:
            - user
            - session
            - character
            - guild
            - item
            - transaction
            - quest
            - chat
            - file
            description: Type of resource affected
            example: character
          resource_id:
            type: string
            format: uuid
            description: Specific resource that was affected
            example: c3d4e5f6-g7h8-9012-cdef-345678901234
          action:
            type: string
            enum:
            - create
            - read
            - update
            - delete
            - login
            - logout
            - ban
            - unban
            - transfer
            - execute
            description: Action performed
            example: update
          old_values:
            type: object
            description: Previous state of modified fields
            example:
              level: 24
              experience: 12000
          new_values:
            type: object
            description: New state of modified fields
            example:
              level: 25
              experience: 12500
          severity:
            type: string
            enum:
            - low
            - medium
            - high
            - critical
            description: Security/impact severity
            example: low
          ip_address:
            type: string
            description: IP address of the actor
            example: 192.168.1.100
          user_agent:
            type: string
            description: User agent of the actor
            example: NECPGAME Client v1.2.3
          location:
            type: string
            description: Approximate location
            example: Night City, NC
          success:
            type: boolean
            description: Whether the action succeeded
            example: true
          error_message:
            type: string
            description: Error message if action failed
            example: Insufficient permissions
          metadata:
            type: object
            description: Additional audit data
            properties:
              request_id:
                type: string
                description: Unique request identifier
                example: req_abc123def456
              session_id:
                type: string
                format: uuid
                description: Associated session ID
                example: d4e5f6g7-h8i9-0123-def0-456789012345
              api_endpoint:
                type: string
                description: API endpoint called
                example: /api/v1/characters/upgrade
              response_time_ms:
                type: integer
                description: API response time
                example: 45
    ApiKeyEntity:
      allOf:
      - $ref: '#/components/schemas/InfrastructureEntity'
      - type: object
        required:
        - owner_id
        - name
        - key_hash
        - permissions
        - status
        properties:
          owner_id:
            type: string
            format: uuid
            description: User or service that owns this API key
            example: e5f6g7h8-i9j0-1234-ef01-567890123456
          name:
            type: string
            minLength: 1
            maxLength: 50
            description: Human-readable name for the key
            example: Mobile App Key
          description:
            type: string
            maxLength: 200
            description: Description of key usage
            example: API key for mobile application authentication
          key_hash:
            type: string
            description: SHA-256 hash of the actual API key
            example: a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3
          key_prefix:
            type: string
            minLength: 8
            maxLength: 8
            description: First 8 characters of API key for identification
            example: ncp_1a2b
          permissions:
            type: array
            items:
              type: string
              enum:
              - read_user
              - write_user
              - read_character
              - write_character
              - read_inventory
              - write_inventory
              - admin
            description: Granted permissions
            example:
            - read_user
            - read_character
            - read_inventory
          status:
            type: string
            enum:
            - active
            - suspended
            - revoked
            - expired
            description: API key status
            example: active
          expires_at:
            type: string
            format: date-time
            description: When key expires (null = never)
            example: '2025-01-15T10:30:00Z'
          last_used_at:
            type: string
            format: date-time
            description: Last time key was used
            example: '2024-01-15T14:20:00Z'
          usage_count:
            type: integer
            minimum: 0
            description: Total API calls made with this key
            example: 15420
          rate_limit:
            type: integer
            minimum: 1
            description: Requests per minute allowed
            example: 60
          allowed_ips:
            type: array
            items:
              type: string
            description: IP addresses allowed to use this key
            example:
            - 192.168.1.0/24
            - 10.0.0.1
          metadata:
            type: object
            description: Additional key metadata
            properties:
              created_by:
                type: string
                format: uuid
                description: User who created this key
                example: f6g7h8i9-j0k1-2345-f012-678901234567
              application:
                type: string
                description: Application using this key
                example: NECPGAME Mobile App
              environment:
                type: string
                enum:
                - development
                - staging
                - production
                description: Environment this key is for
                example: production
    ConfigurationEntity:
      allOf:
      - $ref: '#/components/schemas/InfrastructureEntity'
      - type: object
        required:
        - config_key
        - config_value
        - config_type
        - environment
        properties:
          config_key:
            type: string
            minLength: 1
            maxLength: 100
            pattern: ^[a-zA-Z0-9_\-\.]+$
            description: Configuration key
            example: game.max_players_per_server
          config_value:
            type: string
            description: Configuration value (stored as string)
            example: '1000'
          config_type:
            type: string
            enum:
            - string
            - integer
            - float
            - boolean
            - json
            description: Data type of the value
            example: integer
          environment:
            type: string
            enum:
            - development
            - staging
            - production
            - all
            description: Environment this config applies to
            example: production
          description:
            type: string
            maxLength: 500
            description: Description of what this config controls
            example: Maximum number of players allowed per game server
          default_value:
            type: string
            description: Default value if not set
            example: '500'
          validation_rules:
            type: object
            description: Validation rules for the value
            properties:
              min_value:
                type: number
                description: Minimum allowed value
                example: 1
              max_value:
                type: number
                description: Maximum allowed value
                example: 10000
              allowed_values:
                type: array
                items:
                  type: string
                description: List of allowed values
                example:
                - '100'
                - '500'
                - '1000'
                - '2000'
          is_encrypted:
            type: boolean
            description: Whether value is encrypted
            example: false
          last_modified_by:
            type: string
            format: uuid
            description: User who last modified this config
            example: g7h8i9j0-k1l2-3456-0123-456789012345
          requires_restart:
            type: boolean
            description: Whether server restart is required after change
            example: true
    ServiceHealthEntity:
      allOf:
      - $ref: '#/components/schemas/InfrastructureEntity'
      - type: object
        required:
        - service_name
        - status
        - response_time_ms
        - timestamp
        properties:
          service_name:
            type: string
            minLength: 1
            maxLength: 50
            description: Name of the service being monitored
            example: auth-service
          status:
            type: string
            enum:
            - healthy
            - degraded
            - unhealthy
            - down
            - maintenance
            description: Current health status
            example: healthy
          response_time_ms:
            type: integer
            minimum: 0
            description: Response time in milliseconds
            example: 45
          timestamp:
            type: string
            format: date-time
            description: When this health check was performed
            example: '2024-01-15T15:30:00Z'
          uptime_seconds:
            type: integer
            minimum: 0
            description: Service uptime in seconds
            example: 86400
          memory_usage_mb:
            type: integer
            minimum: 0
            description: Current memory usage in MB
            example: 256
          memory_usage_percent:
            type: number
            minimum: 0
            maximum: 100
            description: Memory usage percentage
            example: 23.5
          cpu_usage_percent:
            type: number
            minimum: 0
            maximum: 100
            description: CPU usage percentage
            example: 15.2
          active_connections:
            type: integer
            minimum: 0
            description: Number of active connections
            example: 1250
          queue_depth:
            type: integer
            minimum: 0
            description: Number of queued requests
            example: 5
          error_rate_percent:
            type: number
            minimum: 0
            maximum: 100
            description: Error rate percentage
            example: 0.1
          version:
            type: string
            description: Service version
            example: 1.2.3
          environment:
            type: string
            enum:
            - development
            - staging
            - production
            description: Deployment environment
            example: production
          checks:
            type: array
            items:
              $ref: '#/components/schemas/HealthCheck'
            description: Detailed health checks
    HealthCheck:
      type: object
      required:
      - check_name
      - status
      - response_time_ms
      properties:
        check_name:
          type: string
          minLength: 1
          maxLength: 50
          description: Name of the health check
          example: database_connection
        status:
          type: string
          enum:
          - pass
          - warn
          - fail
          description: Health check result
          example: pass
        response_time_ms:
          type: integer
          minimum: 0
          description: Check response time
          example: 12
        message:
          type: string
          maxLength: 200
          description: Check result message
          example: Database connection successful
        details:
          type: object
          description: Additional check details
          example:
            connection_pool_size: 10
            active_connections: 3
    NotificationQueueEntity:
      allOf:
      - $ref: '#/components/schemas/InfrastructureEntity'
      - type: object
        required:
        - notification_type
        - recipient_id
        - content
        - priority
        - status
        properties:
          notification_type:
            type: string
            enum:
            - email
            - push
            - in_game
            - sms
            - webhook
            description: Type of notification
            example: email
          recipient_id:
            type: string
            format: uuid
            description: User receiving the notification
            example: a1b2c3d4-e5f6-7890-abcd-ef1234567890
          recipient_contact:
            type: string
            description: Contact info (email, phone, etc.)
            example: user@necpgame.com
          content:
            type: object
            description: Notification content
            required:
            - subject
            - body
            properties:
              subject:
                type: string
                minLength: 1
                maxLength: 100
                description: Notification subject/title
                example: Quest Completed!
              body:
                type: string
                minLength: 1
                maxLength: 2000
                description: Notification body/content
                example: Congratulations! You have completed the 'Corporate Espionage'
                  quest.
              template_id:
                type: string
                description: Template used for notification
                example: quest_completion_v2
          priority:
            type: string
            enum:
            - low
            - normal
            - high
            - critical
            description: Notification priority
            example: normal
          status:
            type: string
            enum:
            - queued
            - processing
            - sent
            - delivered
            - failed
            - cancelled
            description: Delivery status
            example: queued
          scheduled_for:
            type: string
            format: date-time
            description: When to send notification (null = immediate)
            example: '2024-01-15T16:00:00Z'
          sent_at:
            type: string
            format: date-time
            description: When notification was sent
            example: '2024-01-15T15:45:00Z'
          delivered_at:
            type: string
            format: date-time
            description: When notification was delivered
            example: '2024-01-15T15:45:02Z'
          retry_count:
            type: integer
            minimum: 0
            description: Number of delivery attempts
            example: 0
          max_retries:
            type: integer
            minimum: 0
            maximum: 5
            description: Maximum retry attempts
            example: 3
          error_message:
            type: string
            description: Delivery error message
            example: SMTP server timeout
          metadata:
            type: object
            description: Additional notification data
            properties:
              campaign_id:
                type: string
                description: Marketing campaign ID
                example: quest_reminder_2024
              source_service:
                type: string
                description: Service that triggered notification
                example: quest-service
              user_preferences:
                type: object
                description: User's notification preferences
                example:
                  email_enabled: true
                  push_enabled: false
    WebSocketHealthMessage:
      type: object
      required:
      - type
      - timestamp
      properties:
        type:
          type: string
          enum:
          - health_update
          - service_alert
          - performance_metric
          example: health_update
        timestamp:
          type: string
          format: date-time
          example: '2024-01-01T12:00:00Z'
        service:
          type: string
          example: cosmetic-service
        status:
          type: string
          enum:
          - healthy
          - unhealthy
          - degraded
          example: healthy
        metrics:
          type: object
          additionalProperties:
            type: number
          example:
            cpu_usage: 45.2
            memory_usage: 67.8
            response_time: 12.5
    CosmeticItem:
      type: object
      required:
      - id
      - name
      - category
      - rarity
      properties:
        id:
          type: string
          format: uuid
          example: 123e4567-e89b-12d3-a456-426614174000
        name:
          type: string
          example: Neon Cyber Armor
        category:
          type: string
          enum:
          - character
          - weapon
          - vehicle
          - housing
          example: character
        rarity:
          type: string
          enum:
          - common
          - uncommon
          - rare
          - epic
          - legendary
          example: epic
        description:
          type: string
          example: High-tech armor with neon accents
        owned:
          type: boolean
          example: true
        equipped:
          type: boolean
          example: false
        price:
          type: object
          properties:
            currency:
              type: string
              enum:
              - eddies
              - credits
              example: eddies
            amount:
              type: integer
              example: 50000
        tags:
          type: array
          items:
            type: string
          example:
          - cyberpunk
          - neon
          - armor
    CosmeticItemDetail:
      allOf:
      - $ref: '#/components/schemas/CosmeticItem'
      - type: object
        properties:
          stats:
            type: object
            properties:
              defense:
                type: integer
                example: 25
              style:
                type: integer
                example: 80
              rarity_bonus:
                type: integer
                example: 15
          requirements:
            type: object
            properties:
              level:
                type: integer
                example: 10
              faction:
                type: string
                example: nomad
          unlock_conditions:
            type: array
            items:
              type: string
            example:
            - 'Complete quest: Street Cred'
            - Reach level 15
          preview_images:
            type: array
            items:
              type: string
              format: uri
            example:
            - https://cdn.necpgame.com/cosmetics/123/preview1.jpg
    EquippedCosmetic:
      type: object
      required:
      - item_id
      - slot
      - equipped_at
      properties:
        item_id:
          type: string
          format: uuid
          example: 123e4567-e89b-12d3-a456-426614174000
        slot:
          type: string
          enum:
          - head
          - body
          - weapon_primary
          - weapon_secondary
          - vehicle
          example: body
        equipped_at:
          type: string
          format: date-time
          example: '2024-01-01T12:00:00Z'
        previous_item_id:
          type: string
          format: uuid
          nullable: true
          example: 456e7890-e89b-12d3-a456-426614174001
    PlayerAppearance:
      type: object
      required:
      - player_id
      - character_base
      - equipped_cosmetics
      properties:
        player_id:
          type: string
          format: uuid
          example: 123e4567-e89b-12d3-a456-426614174000
        character_base:
          type: object
          properties:
            body_type:
              type: string
              enum:
              - athletic
              - bulky
              - slim
              example: athletic
            skin_tone:
              type: string
              example: '#8B4513'
            hair_color:
              type: string
              example: '#FF4500'
            eye_color:
              type: string
              example: '#00FF00'
        equipped_cosmetics:
          type: object
          properties:
            head:
              type: string
              format: uuid
              nullable: true
            body:
              type: string
              format: uuid
              nullable: true
            weapon_primary:
              type: string
              format: uuid
              nullable: true
            weapon_secondary:
              type: string
              format: uuid
              nullable: true
            vehicle:
              type: string
              format: uuid
              nullable: true
        last_updated:
          type: string
          format: date-time
          example: '2024-01-01T12:00:00Z'
    PlayerAppearanceUpdate:
      type: object
      required:
      - player_id
      properties:
        player_id:
          type: string
          format: uuid
          example: 123e4567-e89b-12d3-a456-426614174000
        character_base:
          type: object
          properties:
            body_type:
              type: string
              enum:
              - athletic
              - bulky
              - slim
            skin_tone:
              type: string
              pattern: ^#[0-9A-Fa-f]{6}$
            hair_color:
              type: string
              pattern: ^#[0-9A-Fa-f]{6}$
            eye_color:
              type: string
              pattern: ^#[0-9A-Fa-f]{6}$
        equipped_cosmetics:
          type: object
          properties:
            head:
              type: string
              format: uuid
              nullable: true
            body:
              type: string
              format: uuid
              nullable: true
            weapon_primary:
              type: string
              format: uuid
              nullable: true
            weapon_secondary:
              type: string
              format: uuid
              nullable: true
            vehicle:
              type: string
              format: uuid
              nullable: true
    PaginationMeta:
      type: object
      required:
      - page
      - limit
      - total
      - total_pages
      properties:
        page:
          type: integer
          example: 1
        limit:
          type: integer
          example: 20
        total:
          type: integer
          example: 150
        total_pages:
          type: integer
          example: 8
        has_next:
          type: boolean
          example: true
        has_prev:
          type: boolean
          example: false
  securitySchemes:
    BearerAuth:
      $ref: ../common/security/security.yaml#/BearerAuth
    ApiKeyAuth:
      $ref: ../common/security/security.yaml#/ApiKeyAuth
    ServiceAuth:
      $ref: ../common/security/security.yaml#/ServiceAuth
x-module-cosmetic-core:
  description: Core cosmetic functionality - imported from cosmetic.yaml
  paths:
    /health:
      get:
        summary: Cosmetic service health check
        description: '**Enterprise-grade health check endpoint**

          Provides real-time health status of the cosmetic domain microservice.

          Critical for service discovery, load balancing, and monitoring.

          **Performance:** <1ms response time, cached for 30 seconds '
        operationId: cosmeticServiceHealthCheck
        tags:
        - Health Monitoring
        parameters:
        - name: Accept-Encoding
          in: header
          schema:
            type: string
            enum:
            - gzip
            - deflate
            - br
        responses:
          '200':
            description: Service is healthy
            headers:
              Cache-Control:
                schema:
                  type: string
                  example: max-age=30, s-maxage=60
              ETag:
                schema:
                  type: string
                  example: '"health-v1.0"'
              Content-Encoding:
                schema:
                  type: string
                  enum:
                  - gzip
                  - deflate
                  - br
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/HealthResponse'
          '503':
            description: Service is unhealthy
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/HealthResponse'
          '429':
            description: Too many requests - rate limit exceeded
            headers:
              Retry-After:
                schema:
                  type: integer
                  example: 60
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'
    /health/batch:
      post:
        summary: Batch health check for multiple cosmetic services
        description: '**Performance optimization:** Check multiple cosmetic service
          health in single request

          Reduces N HTTP calls to 1 call. Critical for microservice orchestration.

          Eliminates network overhead in health monitoring scenarios.

          **Use case:** Service mesh health checks, Kubernetes readiness probes '
        operationId: cosmeticServiceBatchHealthCheck
        tags:
        - Health Monitoring
        requestBody:
          required: true
          content:
            application/json:
              schema:
                type: object
                required:
                - services
                properties:
                  services:
                    type: array
                    items:
                      type: string
                      enum:
                      - cosmetic-service
                      - cosmetic-shop-service
                      - cosmetic-catalog-service
                      - cosmetic-equipment-service
                      maxItems: 10
                    description: List of services to check
        responses:
          '200':
            $ref: '#/components/responses/HealthBatchSuccess'
          '400':
            description: Invalid request - malformed service list
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'
          '429':
            description: Too many requests - rate limit exceeded
            headers:
              Retry-After:
                schema:
                  type: integer
                  example: 60
                  description: Seconds to wait before retrying
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'
    /health/ws:
      get:
        summary: Real-time health monitoring WebSocket
        description: '**Performance optimization:** Real-time health updates without
          polling

          Eliminates periodic HTTP requests, reduces server load by ~90%.

          Perfect for dashboard monitoring and alerting systems. '
        operationId: cosmeticServiceHealthWebSocket
        tags:
        - Health Monitoring
        parameters:
        - name: token
          in: query
          required: true
          schema:
            type: string
          description: JWT token for authentication
        responses:
          '101':
            description: WebSocket connection established
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/WebSocketHealthMessage'
          '401':
            description: Authentication failed
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'
    /cosmetics:
      get:
        summary: List cosmetic items
        description: '**Performance optimization:** Paginated list with filtering

          Returns cosmetic items available to the player.

          **Backend hint:** Use database indexing on player_id, category, rarity **Memory
          alignment:** 64-byte aligned structs for cache efficiency '
        operationId: listCosmeticItems
        tags:
        - Cosmetic Items
        parameters:
        - name: player_id
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: Player identifier
        - name: category
          in: query
          schema:
            type: string
            enum:
            - character
            - weapon
            - vehicle
            - housing
        - name: rarity
          in: query
          schema:
            type: string
            enum:
            - common
            - uncommon
            - rare
            - epic
            - legendary
        - name: owned_only
          in: query
          schema:
            type: boolean
            default: false
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        responses:
          '200':
            description: Successful response with cosmetic items
            headers:
              X-Total-Count:
                schema:
                  type: integer
                  example: 150
              X-Page:
                schema:
                  type: integer
                  example: 1
              X-Limit:
                schema:
                  type: integer
                  example: 20
            content:
              application/json:
                schema:
                  type: object
                  required:
                  - items
                  - pagination
                  properties:
                    items:
                      type: array
                      items:
                        $ref: '#/components/schemas/CosmeticItem'
                    pagination:
                      $ref: '#/components/schemas/PaginationMeta'
          '400':
            description: Invalid request parameters
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'
          '401':
            description: Authentication required
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'
    /cosmetics/{item_id}:
      get:
        summary: Get cosmetic item details
        description: '**Performance optimization:** Cached response with ETag

          Returns detailed information about a specific cosmetic item.

          **Backend hint:** Use Redis caching with 5-minute TTL **Memory alignment:**
          Pre-allocated response buffer '
        operationId: getCosmeticItem
        tags:
        - Cosmetic Items
        parameters:
        - name: item_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: player_id
          in: query
          required: true
          schema:
            type: string
            format: uuid
        responses:
          '200':
            description: Successful response with cosmetic item details
            headers:
              ETag:
                schema:
                  type: string
                  example: '"cosmetic-123-v1"'
              Cache-Control:
                schema:
                  type: string
                  example: max-age=300
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/CosmeticItemDetail'
          '404':
            description: Cosmetic item not found
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'
    /cosmetics/{item_id}/equip:
      post:
        summary: Equip cosmetic item
        description: '**Performance optimization:** Event-sourced operation

          Equips a cosmetic item for the player.

          **Backend hint:** Use CQRS pattern - command to write model, query from
          read model **Memory alignment:** Event structure aligned to 64 bytes '
        operationId: equipCosmeticItem
        tags:
        - Cosmetic Items
        parameters:
        - name: item_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        requestBody:
          required: true
          content:
            application/json:
              schema:
                type: object
                required:
                - player_id
                properties:
                  player_id:
                    type: string
                    format: uuid
                    description: Player identifier
                  slot:
                    type: string
                    enum:
                    - head
                    - body
                    - weapon_primary
                    - weapon_secondary
                    - vehicle
                    description: Equipment slot (optional, auto-assigned if not specified)
        responses:
          '200':
            description: Cosmetic item equipped successfully
            content:
              application/json:
                schema:
                  type: object
                  required:
                  - success
                  - equipped_item
                  properties:
                    success:
                      type: boolean
                      example: true
                    equipped_item:
                      $ref: '#/components/schemas/EquippedCosmetic'
          '400':
            description: Invalid request or item cannot be equipped
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'
          '409':
            description: Slot already occupied or item requirements not met
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'
    /appearance:
      get:
        summary: Get player appearance
        description: '**Performance optimization:** Cached appearance data

          Returns current player appearance configuration.

          **Backend hint:** Cache appearance data with player_id key **Memory alignment:**
          Struct alignment for network serialization '
        operationId: getPlayerAppearance
        tags:
        - Character Appearance
        parameters:
        - name: player_id
          in: query
          required: true
          schema:
            type: string
            format: uuid
        responses:
          '200':
            description: Successful response with player appearance
            headers:
              Cache-Control:
                schema:
                  type: string
                  example: max-age=60
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/PlayerAppearance'
          '404':
            description: Player appearance not found
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'
      put:
        summary: Update player appearance
        description: '**Performance optimization:** Batched appearance updates

          Updates player appearance with new cosmetic configurations.

          **Backend hint:** Batch multiple appearance changes in single transaction
          **Memory alignment:** Appearance struct optimized for cache efficiency '
        operationId: updatePlayerAppearance
        tags:
        - Character Appearance
        requestBody:
          required: true
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlayerAppearanceUpdate'
        responses:
          '200':
            description: Player appearance updated successfully
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/PlayerAppearance'
          '400':
            description: Invalid appearance data
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'
          '409':
            description: Appearance update conflict
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Error'
  components:
    schemas:
      HealthResponse:
        type: object
        required:
        - status
        - timestamp
        - service
        properties:
          status:
            type: string
            enum:
            - healthy
            - unhealthy
            - degraded
            example: healthy
          timestamp:
            type: string
            format: date-time
            example: '2024-01-01T12:00:00Z'
          service:
            type: string
            example: cosmetic-service
          version:
            type: string
            example: 1.0.0
          uptime:
            type: integer
            description: Uptime in seconds
            example: 3600
          memory_usage:
            type: object
            properties:
              used:
                type: integer
                example: 52428800
              total:
                type: integer
                example: 1073741824
          active_connections:
            type: integer
            example: 1250
      WebSocketHealthMessage:
        type: object
        required:
        - type
        - timestamp
        properties:
          type:
            type: string
            enum:
            - health_update
            - service_alert
            - performance_metric
            example: health_update
          timestamp:
            type: string
            format: date-time
            example: '2024-01-01T12:00:00Z'
          service:
            type: string
            example: cosmetic-service
          status:
            type: string
            enum:
            - healthy
            - unhealthy
            - degraded
            example: healthy
          metrics:
            type: object
            additionalProperties:
              type: number
            example:
              cpu_usage: 45.2
              memory_usage: 67.8
              response_time: 12.5
      Error:
        type: object
        required:
        - error
        - message
        properties:
          error:
            type: string
            enum:
            - validation_error
            - authentication_error
            - authorization_error
            - not_found_error
            - conflict_error
            - rate_limit_error
            - internal_error
            example: validation_error
          message:
            type: string
            example: Invalid request parameters
          details:
            type: object
            additionalProperties: true
            example:
              field: player_id
              reason: must be valid UUID
          request_id:
            type: string
            format: uuid
            example: 123e4567-e89b-12d3-a456-426614174000
          timestamp:
            type: string
            format: date-time
            example: '2024-01-01T12:00:00Z'
      CosmeticItem:
        type: object
        required:
        - id
        - name
        - category
        - rarity
        properties:
          id:
            type: string
            format: uuid
            example: 123e4567-e89b-12d3-a456-426614174000
          name:
            type: string
            example: Neon Cyber Armor
          category:
            type: string
            enum:
            - character
            - weapon
            - vehicle
            - housing
            example: character
          rarity:
            type: string
            enum:
            - common
            - uncommon
            - rare
            - epic
            - legendary
            example: epic
          description:
            type: string
            example: High-tech armor with neon accents
          owned:
            type: boolean
            example: true
          equipped:
            type: boolean
            example: false
          price:
            type: object
            properties:
              currency:
                type: string
                enum:
                - eddies
                - credits
                example: eddies
              amount:
                type: integer
                example: 50000
          tags:
            type: array
            items:
              type: string
            example:
            - cyberpunk
            - neon
            - armor
      CosmeticItemDetail:
        allOf:
        - $ref: '#/components/schemas/CosmeticItem'
        - type: object
          properties:
            stats:
              type: object
              properties:
                defense:
                  type: integer
                  example: 25
                style:
                  type: integer
                  example: 80
                rarity_bonus:
                  type: integer
                  example: 15
            requirements:
              type: object
              properties:
                level:
                  type: integer
                  example: 10
                faction:
                  type: string
                  example: nomad
            unlock_conditions:
              type: array
              items:
                type: string
              example:
              - 'Complete quest: Street Cred'
              - Reach level 15
            preview_images:
              type: array
              items:
                type: string
                format: uri
              example:
              - https://cdn.necpgame.com/cosmetics/123/preview1.jpg
      EquippedCosmetic:
        type: object
        required:
        - item_id
        - slot
        - equipped_at
        properties:
          item_id:
            type: string
            format: uuid
            example: 123e4567-e89b-12d3-a456-426614174000
          slot:
            type: string
            enum:
            - head
            - body
            - weapon_primary
            - weapon_secondary
            - vehicle
            example: body
          equipped_at:
            type: string
            format: date-time
            example: '2024-01-01T12:00:00Z'
          previous_item_id:
            type: string
            format: uuid
            nullable: true
            example: 456e7890-e89b-12d3-a456-426614174001
      PlayerAppearance:
        type: object
        required:
        - player_id
        - character_base
        - equipped_cosmetics
        properties:
          player_id:
            type: string
            format: uuid
            example: 123e4567-e89b-12d3-a456-426614174000
          character_base:
            type: object
            properties:
              body_type:
                type: string
                enum:
                - athletic
                - bulky
                - slim
                example: athletic
              skin_tone:
                type: string
                example: '#8B4513'
              hair_color:
                type: string
                example: '#FF4500'
              eye_color:
                type: string
                example: '#00FF00'
          equipped_cosmetics:
            type: object
            properties:
              head:
                type: string
                format: uuid
                nullable: true
              body:
                type: string
                format: uuid
                nullable: true
              weapon_primary:
                type: string
                format: uuid
                nullable: true
              weapon_secondary:
                type: string
                format: uuid
                nullable: true
              vehicle:
                type: string
                format: uuid
                nullable: true
          last_updated:
            type: string
            format: date-time
            example: '2024-01-01T12:00:00Z'
      PlayerAppearanceUpdate:
        type: object
        required:
        - player_id
        properties:
          player_id:
            type: string
            format: uuid
            example: 123e4567-e89b-12d3-a456-426614174000
          character_base:
            type: object
            properties:
              body_type:
                type: string
                enum:
                - athletic
                - bulky
                - slim
              skin_tone:
                type: string
                pattern: ^#[0-9A-Fa-f]{6}$
              hair_color:
                type: string
                pattern: ^#[0-9A-Fa-f]{6}$
              eye_color:
                type: string
                pattern: ^#[0-9A-Fa-f]{6}$
          equipped_cosmetics:
            type: object
            properties:
              head:
                type: string
                format: uuid
                nullable: true
              body:
                type: string
                format: uuid
                nullable: true
              weapon_primary:
                type: string
                format: uuid
                nullable: true
              weapon_secondary:
                type: string
                format: uuid
                nullable: true
              vehicle:
                type: string
                format: uuid
                nullable: true
      PaginationMeta:
        type: object
        required:
        - page
        - limit
        - total
        - total_pages
        properties:
          page:
            type: integer
            example: 1
          limit:
            type: integer
            example: 20
          total:
            type: integer
            example: 150
          total_pages:
            type: integer
            example: 8
          has_next:
            type: boolean
            example: true
          has_prev:
            type: boolean
            example: false
    responses:
      HealthBatchSuccess:
        description: Batch health check completed
        content:
          application/json:
            schema:
              type: object
              required:
              - results
              - summary
              properties:
                results:
                  type: array
                  items:
                    type: object
                    required:
                    - service
                    - status
                    - response_time
                    properties:
                      service:
                        type: string
                        example: cosmetic-service
                      status:
                        type: string
                        enum:
                        - healthy
                        - unhealthy
                        - degraded
                        example: healthy
                      response_time:
                        type: integer
                        description: Response time in milliseconds
                        example: 12
                      error:
                        type: string
                        nullable: true
                        example: null
                summary:
                  type: object
                  required:
                  - total_services
                  - healthy_count
                  - unhealthy_count
                  - average_response_time
                  properties:
                    total_services:
                      type: integer
                      example: 3
                    healthy_count:
                      type: integer
                      example: 2
                    unhealthy_count:
                      type: integer
                      example: 1
                    average_response_time:
                      type: integer
                      example: 15
    securitySchemes:
      BearerAuth:
        type: http
        scheme: bearer
        bearerFormat: JWT
        description: '**JWT Bearer token authentication**

          Enterprise-grade JWT authentication with RS256 signing.

          **Token Structure:** - Header: `{"alg": "RS256", "typ": "JWT"}` - Payload:
          `{"sub": "player_id", "exp": 1640995200, "iat": 1640991600, "iss": "necpgame",
          "roles": ["player"]}` - Signature: RS256 signed with private key

          **Security Features:** - RS256 asymmetric encryption (not symmetric HS256)
          - Expiration time validation - Issuer validation - Audience validation (optional)
          - Revocation list checking

          **Performance:** Token validation cached for 5 minutes '
      ApiKeyAuth:
        type: apiKey
        in: header
        name: X-API-Key
        description: '**API Key authentication for service-to-service communication**

          Used for internal microservice communication and API access.

          **Format:** 32-character hexadecimal string **Example:** `a1b2c3d4e5f678901234567890abcdef`

          **Security:** HMAC-SHA256 signature validation '
x-module-cosmetic-shop:
  description: Cosmetic shop functionality - imported from cosmetic_shop.yaml
  paths:
    /monetization/cosmetic/shop/daily:
      get:
        tags:
        - Shop
        summary:    
        operationId: getDailyShop
        security:
        - BearerAuth: []
        responses:
          '200':
            description:  
            content:
              application/json:
                schema:
                  $ref: cosmetic-service-schemas.yaml#/components/schemas/DailyShopResponse
          '401':
            description: Unauthorized access
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Unauthorized
          '500':
            description: Internal server error
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Internal server error
    /monetization/cosmetic/shop/history:
      get:
        tags:
        - Shop
        summary:    
        operationId: getShopHistory
        security:
        - BearerAuth: []
        parameters:
        - name: limit
          in: query
          description: Maximum number of items to return
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of items to skip
          required: false
          schema:
            type: integer
            minimum: 0
            default: 0
        responses:
          '200':
            description:  
            content:
              application/json:
                schema:
                  $ref: cosmetic-service-schemas.yaml#/components/schemas/ShopHistoryResponse
          '401':
            description: Unauthorized access
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Unauthorized
          '500':
            description: Internal server error
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Internal server error
  components:
    schemas:
      $ref: ./cosmetic_shop.yaml#/components/schemas
x-module-cosmetic-equipment:
  description: Cosmetic equipment functionality - imported from cosmetic_equipment.yaml
  paths:
    /monetization/cosmetic/{cosmetic_id}/equip:
      post:
        tags:
        - Equipment
        summary:   
        operationId: equipCosmetic
        security:
        - BearerAuth: []
        parameters:
        - name: cosmetic_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        requestBody:
          required: true
          content:
            application/json:
              schema:
                $ref: cosmetic-service-schemas.yaml#/components/schemas/EquipCosmeticRequest
        responses:
          '200':
            description:  
            content:
              application/json:
                schema:
                  $ref: cosmetic-service-schemas.yaml#/components/schemas/EquippedCosmetics
          '400':
            description: Bad request
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Bad request
          '401':
            description: Unauthorized access
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Unauthorized
          '404':
            description: Resource not found
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Not found
          '500':
            description: Internal server error
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Internal server error
    /monetization/cosmetic/{cosmetic_id}/unequip:
      post:
        tags:
        - Equipment
        summary:   
        operationId: unequipCosmetic
        security:
        - BearerAuth: []
        parameters:
        - name: cosmetic_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        requestBody:
          required: true
          content:
            application/json:
              schema:
                $ref: cosmetic-service-schemas.yaml#/components/schemas/UnequipCosmeticRequest
        responses:
          '200':
            description:  
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    status:
                      type: string
                      example: unequipped
          '400':
            description: Bad request
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Bad request
          '401':
            description: Unauthorized access
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Unauthorized
          '404':
            description: Resource not found
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Not found
          '500':
            description: Internal server error
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Internal server error
    /monetization/cosmetic/equipped/{player_id}:
      get:
        tags:
        - Equipment
        summary:    
        operationId: getEquippedCosmetics
        security:
        - BearerAuth: []
        parameters:
        - name: player_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        responses:
          '200':
            description:  
            content:
              application/json:
                schema:
                  $ref: cosmetic-service-schemas.yaml#/components/schemas/EquippedCosmetics
          '401':
            description: Unauthorized access
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Unauthorized
          '404':
            description: Resource not found
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Not found
          '500':
            description: Internal server error
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Internal server error
  components:
    schemas:
      $ref: ./cosmetic_equipment.yaml#/components/schemas
x-module-cosmetic-catalog:
  description: Cosmetic catalog functionality - imported from cosmetic_catalog.yaml
  paths:
    /monetization/cosmetic/catalog:
      get:
        tags:
        - Catalog
        summary:   
        operationId: getCosmeticCatalog
        security:
        - BearerAuth: []
        parameters:
        - name: category
          in: query
          schema:
            type: string
            enum:
            - CHARACTER_SKIN
            - WEAPON_SKIN
            - EMOTE
            - TITLE
            - NAME_PLATE
        - name: rarity
          in: query
          schema:
            type: string
            enum:
            - COMMON
            - UNCOMMON
            - RARE
            - EPIC
            - LEGENDARY
            - EXOTIC
        - name: limit
          in: query
          description: Maximum number of items to return
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of items to skip
          required: false
          schema:
            type: integer
            minimum: 0
            default: 0
        responses:
          '200':
            description:  
            content:
              application/json:
                schema:
                  $ref: cosmetic-service-schemas.yaml#/components/schemas/CosmeticCatalogResponse
          '401':
            description: Unauthorized access
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Unauthorized
          '500':
            description: Internal server error
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Internal server error
    /monetization/cosmetic/categories:
      get:
        tags:
        - Catalog
        summary:   
        operationId: getCosmeticCategories
        security:
        - BearerAuth: []
        responses:
          '200':
            description:  
            content:
              application/json:
                schema:
                  $ref: cosmetic-service-schemas.yaml#/components/schemas/CosmeticCategoriesResponse
          '401':
            description: Unauthorized access
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Unauthorized
          '500':
            description: Internal server error
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Internal server error
    /monetization/cosmetic/{cosmetic_id}:
      get:
        tags:
        - Catalog
        summary:   
        operationId: getCosmeticDetails
        security:
        - BearerAuth: []
        parameters:
        - name: cosmetic_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        responses:
          '200':
            description:  
            content:
              application/json:
                schema:
                  $ref: cosmetic-service-schemas.yaml#/components/schemas/CosmeticItem
          '401':
            description: Unauthorized access
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Unauthorized
          '404':
            description: Resource not found
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Not found
          '500':
            description: Internal server error
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Internal server error
    /monetization/cosmetic/rarity/{rarity}:
      get:
        tags:
        - Rarity
        summary:    
        operationId: getCosmeticsByRarity
        security:
        - BearerAuth: []
        parameters:
        - name: rarity
          in: path
          required: true
          schema:
            type: string
            enum:
            - COMMON
            - UNCOMMON
            - RARE
            - EPIC
            - LEGENDARY
            - EXOTIC
        - name: category
          in: query
          schema:
            type: string
            enum:
            - CHARACTER_SKIN
            - WEAPON_SKIN
            - EMOTE
            - TITLE
            - NAME_PLATE
        - name: limit
          in: query
          description: Maximum number of items to return
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of items to skip
          required: false
          schema:
            type: integer
            minimum: 0
            default: 0
        responses:
          '200':
            description:   
            content:
              application/json:
                schema:
                  $ref: cosmetic-service-schemas.yaml#/components/schemas/CosmeticCatalogResponse
          '401':
            description: Unauthorized access
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Unauthorized
          '500':
            description: Internal server error
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Internal server error
  components:
    schemas:
      $ref: ./cosmetic_catalog.yaml#/components/schemas
x-module-cosmetic-events:
  description: Cosmetic events functionality - imported from cosmetic_events.yaml
  paths:
    /monetization/cosmetic/events/{player_id}:
      get:
        tags:
        - Events
        summary:    
        operationId: getCosmeticEvents
        security:
        - BearerAuth: []
        parameters:
        - name: player_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: event_type
          in: query
          schema:
            type: string
            enum:
            - cosmetic:purchased
            - cosmetic:equipped
            - cosmetic:unequipped
            - cosmetic:shop-rotated
        - name: limit
          in: query
          description: Maximum number of items to return
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          description: Number of items to skip
          required: false
          schema:
            type: integer
            minimum: 0
            default: 0
        responses:
          '200':
            description:  
            content:
              application/json:
                schema:
                  $ref: cosmetic-service-schemas.yaml#/components/schemas/CosmeticEventsResponse
          '401':
            description: Unauthorized access
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Unauthorized
          '404':
            description: Resource not found
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Not found
          '500':
            description: Internal server error
            content:
              application/json:
                schema:
                  type: object
                  properties:
                    error:
                      type: string
                      example: Internal server error
  components:
    schemas:
      $ref: ./cosmetic_events.yaml#/components/schemas
