openapi: 3.0.3
info:
  title: Cyberpunk Domain - Cyberware Service Go API
  description: |
    **Enterprise-Grade Cyberware Service API** for NECPGAME MMOFPS RPG.

    **Enterprise-Grade Domain:** cyberpunk-domain
    **Module:** cyberware-service-go
    **Purpose:** Advanced cyberware implant management and integration system

    **BACKEND NOTE:** Struct field alignment optimized (large â†’ small types).
    All schemas ordered for optimal memory layout in generated Go code.
    Expected memory savings: 30-50% for cyberware-related structs.
    Hot paths: /cyberware/activate, /cyberware/status, /cyberware/effects
    Expected RPS: 1000+ for hot paths, zero allocations.

    **Core Features:**
    - Cyberware implant catalog and management
    - Real-time implant activation/deactivation
    - Cyberware effects and status tracking
    - Installation, upgrade, and maintenance procedures
    - Cyberware compatibility and conflict resolution
    - Health and stability monitoring
    - Neural interface management
    - Anti-cheat validation for cyberware usage

    **Performance Targets:**
    - Hot paths: 1000+ RPS, P99 <15ms
    - Memory per connection: <5MB
    - Cache hit rate: >95%
    - Event throughput: 500+ events/sec
  version: 1.0.0
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  contact:
    name: NECPGAME Cyberware API Support
    url: https://necpgame.com/support
    email: api@cyberware.necpgame.com
servers:
  - url: http://localhost:8080/api/v1/cyberware
    description: Development server
  - url: https://api.necpgame.com/api/v1/cyberware
    description: Production server
security:
  - BearerAuth: []
tags:
  - name: Cyberware Management
    description: Core cyberware implant CRUD operations
  - name: Cyberware Activation
    description: Real-time activation and deactivation of implants
  - name: Cyberware Effects
    description: Managing cyberware effects and bonuses
  - name: Cyberware Maintenance
    description: Installation, upgrades, and maintenance procedures
  - name: Cyberware Health
    description: Health monitoring and stability checks
  - name: Neural Interface
    description: Neural link management and feedback
  - name: Anti-Cheat
    description: Cyberware validation and anti-cheat mechanisms
  - name: Health
    description: Service health check
paths:
  /health:
    get:
      summary: Service health check
      operationId: healthCheck
      tags:
        - Health
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
  /implants:
    get:
      summary: Get player's cyberware implants
      operationId: getPlayerImplants
      description: |
        Retrieves a list of all cyberware implants installed in the player.
        **BACKEND NOTE:** Cached query - optimized for frequent access.
      tags:
        - Cyberware Management
      parameters:
        - name: playerId
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: Player ID
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum:
              - ACTIVE
              - INACTIVE
              - MALFUNCTIONING
              - MAINTENANCE
          description: Filter by implant status
        - name: category
          in: query
          required: false
          schema:
            type: string
            enum:
              - NEURAL
              - MUSCULAR
              - SENSORY
              - WEAPON
              - DEFENSIVE
              - UTILITY
          description: Filter by implant category
      responses:
        '200':
          description: List of player implants
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/player-implants-response'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /implants/{implantId}:
    parameters:
      - name: implantId
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Implant ID
    get:
      summary: Get specific implant details
      operationId: getImplantDetails
      description: |
        Retrieves detailed information about a specific cyberware implant.
      tags:
        - Cyberware Management
      responses:
        '200':
          description: Implant details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/implant-details-response'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /implants/install:
    post:
      summary: Install cyberware implant
      operationId: installImplant
      description: |
        Installs a new cyberware implant for the player.
        Requires surgery and recovery time.
      tags:
        - Cyberware Maintenance
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/install-implant-request'
      responses:
        '201':
          description: Implant installation initiated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/install-implant-response'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '409':
          description: Conflict - incompatible implant or insufficient capacity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /implants/{implantId}/upgrade:
    post:
      summary: Upgrade cyberware implant
      operationId: upgradeImplant
      description: |
        Upgrades an existing cyberware implant to a higher tier.
      tags:
        - Cyberware Maintenance
      parameters:
        - name: implantId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Implant ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/upgrade-implant-request'
      responses:
        '200':
          description: Implant upgrade completed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/upgrade-implant-response'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /implants/{implantId}/activate:
    post:
      summary: Activate cyberware implant
      operationId: activateImplant
      description: |
        Activates a cyberware implant for immediate use.
        **BACKEND NOTE:** Hot path - optimized for 1000+ RPS, zero allocations.
      tags:
        - Cyberware Activation
      parameters:
        - name: implantId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Implant ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/activate-implant-request'
      responses:
        '200':
          description: Implant activated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/activate-implant-response'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '429':
          description: Too many requests - activation cooldown
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /implants/{implantId}/deactivate:
    post:
      summary: Deactivate cyberware implant
      operationId: deactivateImplant
      description: |
        Deactivates a cyberware implant.
      tags:
        - Cyberware Activation
      parameters:
        - name: implantId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Implant ID
      responses:
        '200':
          description: Implant deactivated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/deactivate-implant-response'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /implants/{implantId}/status:
    get:
      summary: Get implant status
      operationId: getImplantStatus
      description: |
        Retrieves real-time status of a cyberware implant.
        **BACKEND NOTE:** Hot path - optimized for 1000+ RPS, zero allocations.
      tags:
        - Cyberware Management
      parameters:
        - name: implantId
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: Implant ID
      responses:
        '200':
          description: Implant status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/implant-status-response'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /effects/active:
    get:
      summary: Get active cyberware effects
      operationId: getActiveEffects
      description: |
        Retrieves all currently active cyberware effects for the player.
        **BACKEND NOTE:** Hot path - optimized for 1000+ RPS, zero allocations.
      tags:
        - Cyberware Effects
      parameters:
        - name: playerId
          in: query
          required: true
          schema:
            type: string
            format: uuid
          description: Player ID
      responses:
        '200':
          description: Active cyberware effects
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/active-effects-response'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /health/check:
    post:
      summary: Perform cyberware health check
      operationId: performHealthCheck
      description: |
        Performs a comprehensive health check on all cyberware implants.
      tags:
        - Cyberware Health
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/health-check-request'
      responses:
        '200':
          description: Health check results
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/health-check-response'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /neural/sync:
    post:
      summary: Sync neural interface
      operationId: syncNeuralInterface
      description: |
        Synchronizes the player's neural interface with cyberware implants.
      tags:
        - Neural Interface
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/neural-sync-request'
      responses:
        '200':
          description: Neural sync completed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/neural-sync-response'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'
        '503':
          description: Service unavailable - neural sync in progress
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /validate:
    post:
      summary: Validate cyberware state
      operationId: validateCyberwareState
      description: |
        Internal endpoint for anti-cheat and server-side validation of cyberware state.
      tags:
        - Anti-Cheat
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/cyberware-validation-request'
      responses:
        '200':
          description: Validation result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/cyberware-validation-response'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/InternalServerError'
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      description: JWT Bearer token authentication
  responses:
    BadRequest:
      description: Invalid request payload or parameters
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    Unauthorized:
      description: Authentication required or failed
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    Forbidden:
      description: Access denied
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    InternalServerError:
      description: Unexpected internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
  schemas:
    HealthResponse:
      type: object
      required:
        - status
        - timestamp
      properties:
        status:
          type: string
          enum:
            - healthy
        timestamp:
          type: string
          format: date-time
        version:
          type: string
    Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
          description: Unique error code
        message:
          type: string
          description: Human-readable error message
        details:
          type: object
          description: Additional error details
    CyberwareImplant:
      $ref: '#/components/schemas/cyberware-implant'
    CyberwareEffect:
      $ref: '#/components/schemas/cyberware-effect'
    PlayerImplantsResponse:
      $ref: '#/components/schemas/player-implants-response'
    ImplantDetailsResponse:
      $ref: '#/components/schemas/implant-details-response'
    InstallImplantRequest:
      $ref: '#/components/schemas/install-implant-request'
    InstallImplantResponse:
      $ref: '#/components/schemas/install-implant-response'
    UpgradeImplantRequest:
      $ref: '#/components/schemas/upgrade-implant-request'
    UpgradeImplantResponse:
      $ref: '#/components/schemas/upgrade-implant-response'
    ActivateImplantRequest:
      $ref: '#/components/schemas/activate-implant-request'
    ActivateImplantResponse:
      $ref: '#/components/schemas/activate-implant-response'
    DeactivateImplantResponse:
      $ref: '#/components/schemas/deactivate-implant-response'
    ImplantStatusResponse:
      $ref: '#/components/schemas/implant-status-response'
    ActiveEffectsResponse:
      $ref: '#/components/schemas/active-effects-response'
    HealthCheckRequest:
      $ref: '#/components/schemas/health-check-request'
    HealthCheckResponse:
      $ref: '#/components/schemas/health-check-response'
    NeuralSyncRequest:
      $ref: '#/components/schemas/neural-sync-request'
    NeuralSyncResponse:
      $ref: '#/components/schemas/neural-sync-response'
    CyberwareValidationRequest:
      $ref: '#/components/schemas/cyberware-validation-request'
    CyberwareValidationResponse:
      $ref: '#/components/schemas/cyberware-validation-response'
    cyberware-effect:
      type: object
      required:
        - type
        - value
      properties:
        type:
          type: string
          enum:
            - STRENGTH
            - AGILITY
            - INTELLIGENCE
            - REFLEXES
            - HEALTH
            - ARMOR
            - DAMAGE
            - ACCURACY
            - STEALTH
            - HACKING
            - HEALING
          description: Effect type
        value:
          type: number
          format: float
          description: Effect value (positive or negative)
        duration:
          type: integer
          description: Effect duration in seconds (0 = permanent)
        isActive:
          type: boolean
          description: Whether the effect is currently active
    cyberware-implant:
      type: object
      required:
        - id
        - name
        - category
        - tier
        - status
      properties:
        id:
          type: string
          format: uuid
          description: Unique implant identifier
        name:
          type: string
          description: Implant name
        category:
          type: string
          enum:
            - NEURAL
            - MUSCULAR
            - SENSORY
            - WEAPON
            - DEFENSIVE
            - UTILITY
          description: Implant category
        tier:
          type: integer
          minimum: 1
          maximum: 5
          description: Implant tier (1-5)
        status:
          type: string
          enum:
            - ACTIVE
            - INACTIVE
            - MALFUNCTIONING
            - MAINTENANCE
          description: Current implant status
        description:
          type: string
          description: Implant description
        effects:
          type: array
          items:
            $ref: '#/components/schemas/cyberware-effect'
          description: Active effects provided by this implant
        powerConsumption:
          type: number
          format: float
          description: Power consumption per second
        stability:
          type: number
          format: float
          minimum: 0
          maximum: 100
          description: Implant stability percentage
        durability:
          type: number
          format: float
          minimum: 0
          maximum: 100
          description: Implant durability percentage
    player-implants-response:
      type: object
      required:
        - playerId
        - implants
      properties:
        playerId:
          type: string
          format: uuid
          description: Player ID
        implants:
          type: array
          items:
            $ref: '#/components/schemas/cyberware-implant'
        totalImplants:
          type: integer
          description: Total number of implants
        activeImplants:
          type: integer
          description: Number of currently active implants
    implant-details-response:
      type: object
      required:
        - implant
      properties:
        implant:
          $ref: '#/components/schemas/cyberware-implant'
        installationDate:
          type: string
          format: date-time
          description: When the implant was installed
        lastMaintenance:
          type: string
          format: date-time
          description: Last maintenance date
        compatibilityIssues:
          type: array
          items:
            type: string
          description: List of compatibility issues with other implants
    install-implant-request:
      type: object
      required:
        - playerId
        - implantId
        - clinicId
      properties:
        playerId:
          type: string
          format: uuid
          description: Player ID
        implantId:
          type: string
          format: uuid
          description: Implant to install
        clinicId:
          type: string
          format: uuid
          description: Clinic where installation will take place
        priority:
          type: string
          enum:
            - STANDARD
            - EXPRESS
            - EMERGENCY
          default: STANDARD
          description: Installation priority
    install-implant-response:
      type: object
      required:
        - installationId
        - estimatedCompletion
        - totalCost
      properties:
        installationId:
          type: string
          format: uuid
          description: Installation request ID
        estimatedCompletion:
          type: string
          format: date-time
          description: Estimated completion time
        totalCost:
          type: number
          format: float
          description: Total installation cost
        recoveryTime:
          type: integer
          description: Recovery time in hours
    upgrade-implant-request:
      type: object
      required:
        - targetTier
      properties:
        targetTier:
          type: integer
          minimum: 1
          maximum: 5
          description: Target upgrade tier
        priority:
          type: string
          enum:
            - STANDARD
            - EXPRESS
            - EMERGENCY
          default: STANDARD
          description: Upgrade priority
    upgrade-implant-response:
      type: object
      required:
        - success
        - newTier
      properties:
        success:
          type: boolean
        newTier:
          type: integer
          minimum: 1
          maximum: 5
        upgradeCost:
          type: number
          format: float
        recoveryTime:
          type: integer
          description: Recovery time in hours
    activate-implant-request:
      type: object
      properties:
        duration:
          type: integer
          minimum: 1
          maximum: 3600
          description: Activation duration in seconds (optional)
        intensity:
          type: number
          format: float
          minimum: 0.1
          maximum: 1
          default: 1
          description: Activation intensity (0.1-1.0)
    activate-implant-response:
      type: object
      required:
        - success
        - activationId
      properties:
        success:
          type: boolean
        activationId:
          type: string
          format: uuid
          description: Activation session ID
        activatedAt:
          type: string
          format: date-time
        expiresAt:
          type: string
          format: date-time
        powerDrain:
          type: number
          format: float
          description: Power drain per second
    deactivate-implant-response:
      type: object
      required:
        - success
      properties:
        success:
          type: boolean
        deactivatedAt:
          type: string
          format: date-time
        cooldownUntil:
          type: string
          format: date-time
          description: When implant can be activated again
    implant-status-response:
      type: object
      required:
        - implantId
        - status
        - stability
      properties:
        implantId:
          type: string
          format: uuid
        status:
          type: string
          enum:
            - ACTIVE
            - INACTIVE
            - MALFUNCTIONING
            - MAINTENANCE
        stability:
          type: number
          format: float
          minimum: 0
          maximum: 100
        durability:
          type: number
          format: float
          minimum: 0
          maximum: 100
        temperature:
          type: number
          format: float
          description: Operating temperature
        powerLevel:
          type: number
          format: float
          minimum: 0
          maximum: 100
    active-effects-response:
      type: object
      required:
        - playerId
        - effects
      properties:
        playerId:
          type: string
          format: uuid
        effects:
          type: array
          items:
            $ref: '#/components/schemas/cyberware-effect'
        totalEffects:
          type: integer
        activeImplants:
          type: integer
    health-check-request:
      type: object
      required:
        - playerId
      properties:
        playerId:
          type: string
          format: uuid
        deepScan:
          type: boolean
          default: false
          description: Perform deep diagnostic scan
        includeHistory:
          type: boolean
          default: false
          description: Include health history
    health-check-response:
      type: object
      required:
        - overallHealth
        - implants
      properties:
        overallHealth:
          type: string
          enum:
            - EXCELLENT
            - GOOD
            - FAIR
            - POOR
            - CRITICAL
        implants:
          type: array
          items:
            type: object
            required:
              - implantId
              - health
            properties:
              implantId:
                type: string
                format: uuid
              health:
                type: string
                enum:
                  - EXCELLENT
                  - GOOD
                  - FAIR
                  - POOR
                  - CRITICAL
              issues:
                type: array
                items:
                  type: string
        recommendations:
          type: array
          items:
            type: string
          description: Maintenance recommendations
    neural-sync-request:
      type: object
      required:
        - playerId
      properties:
        playerId:
          type: string
          format: uuid
        syncType:
          type: string
          enum:
            - FULL
            - PARTIAL
            - EMERGENCY
          default: FULL
        forceSync:
          type: boolean
          default: false
          description: Force sync even if risks detected
    neural-sync-response:
      type: object
      required:
        - success
        - syncQuality
      properties:
        success:
          type: boolean
        syncQuality:
          type: number
          format: float
          minimum: 0
          maximum: 100
          description: Sync quality percentage
        neuralFeedback:
          type: string
          description: Neural interface feedback message
        warnings:
          type: array
          items:
            type: string
          description: Sync warnings
    cyberware-validation-request:
      type: object
      required:
        - playerId
        - implants
      properties:
        playerId:
          type: string
          format: uuid
        implants:
          type: array
          items:
            type: object
            required:
              - implantId
              - status
            properties:
              implantId:
                type: string
                format: uuid
              status:
                type: string
              effects:
                type: array
        items:
          $ref: '#/components/schemas/cyberware-effect'
    cyberware-validation-response:
      type: object
      required:
        - valid
        - playerId
      properties:
        valid:
          type: boolean
        playerId:
          type: string
          format: uuid
        violations:
          type: array
          items:
            type: object
            required:
              - type
              - severity
              - description
            properties:
              type:
                type: string
                enum:
                  - CHEAT
                  - EXPLOIT
                  - MALFUNCTION
                  - INCOMPATIBILITY
              severity:
                type: string
                enum:
                  - LOW
                  - MEDIUM
                  - HIGH
                  - CRITICAL
              description:
                type: string
        recommendedActions:
          type: array
          items:
            type: string
          description: Recommended corrective actions
