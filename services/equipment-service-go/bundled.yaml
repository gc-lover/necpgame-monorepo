openapi: 3.0.3
info:
  title: Equipment Service API - Enterprise-Grade Domain Service
  description: '**Enterprise-Grade Equipment Management API for NECPGAME**

    This API manages equipment systems, item generation, and equipment analytics in
    the Night City universe, providing comprehensive equipment workflows, procedural
    generation, and performance optimization.

    ## Key Features

    - **Equipment Catalog**: Comprehensive equipment database with filtering - **Procedural
    Generation**: Dynamic equipment creation with quality control - **Iconic Equipment**:
    Legendary equipment timeline and unlock mechanics - **Equipment Matrix**: Attribute
    calculation and equipment synergies - **Equipment Analytics**: Usage statistics
    and balance monitoring - **Performance Optimized**: MMOFPS-grade performance with
    <30ms P99 latency

    ## Domain Purpose

    The Equipment domain handles all aspects of character equipment in Night City.
    Players equip gear that affects their abilities, appearance, and combat effectiveness.
    Equipment ranges from basic items to legendary cyberware and weapons.

    ## Performance Targets

    - P99 Latency: <30ms for equipment operations - Memory: <25KB per equipment query
    - Concurrent users: 50,000+ simultaneous equipment operations - Generation time:
    <10ms for procedural equipment

    '
  version: 1.0.0
  contact:
    name: NECPGAME API Support
    email: api@necpgame.com
  license:
    name: MIT
servers:
- url: https://api.necpgame.com/v1/equipment
  description: Production server
- url: https://staging-api.necpgame.com/v1/equipment
  description: Staging server
- url: http://localhost:8080/api/v1/equipment
  description: Local development server
security:
- BearerAuth: []
tags:
- name: Equipment Catalog
  description: null
- name: Iconic Equipment
  description: null
- name: Equipment Matrix
  description: null
- name: Equipment Analytics
  description: null
- name: Health Monitoring
  description: System health and performance monitoring
- name: AI Generation
  description: AI-powered equipment generation
- name: AI Training
  description: Equipment AI model training
paths:
  /health:
    $ref: ./paths/health.yaml#/paths/~1health
  /health/batch:
    $ref: ./paths/health-batch.yaml#/paths/~1health~1batch
  /equipment/catalog:
    $ref: ./paths/equipment-catalog.yaml#/paths/~1equipment~1catalog
  /equipment/catalog/{id}:
    $ref: ./paths/equipment-catalog-{id}.yaml#/paths/~1equipment~1catalog~1{id}
  /equipment/iconic/timeline:
    $ref: ./paths/equipment-iconic-timeline.yaml#/paths/~1equipment~1iconic~1timeline
  /equipment/iconic/{id}:
    $ref: ./paths/equipment-iconic-{id}.yaml#/paths/~1equipment~1iconic~1{id}
  /equipment/analytics:
    $ref: ./paths/equipment-analytics.yaml#/paths/~1equipment~1analytics
  /equipment/generate:
    $ref: ./paths/equipment-generate.yaml#/paths/~1equipment~1generate
  /equipment/matrix:
    $ref: ./paths/equipment-matrix.yaml#/paths/~1equipment~1matrix
  /equipment/brands:
    $ref: ./paths/equipment-brands.yaml#/paths/~1equipment~1brands
  /equipment/rarities:
    $ref: ./paths/equipment-rarities.yaml#/paths/~1equipment~1rarities
  /equipment/stat-pools:
    $ref: ./paths/equipment-stat-pools.yaml#/paths/~1equipment~1stat-pools
  /equipment/validate-balance:
    $ref: ./paths/equipment-validate-balance.yaml#/paths/~1equipment~1validate-balance
components:
  schemas:
    HealthResponse:
      $ref: ../common/schemas/health.yaml#/HealthResponse
    Error:
      type: object
      required:
      - code
      - message
      properties:
        code:
          type: integer
          example: 500
          format: int32
          minimum: 100
          maximum: 599
        message:
          type: string
          example: Internal server error
          maxLength: 1000
        details:
          type: object
          description: Additional error details
      description: Standard error response format
    Equipment:
      allOf:
      - $ref: ../common/schemas/game-entities.yaml#/components/schemas/ItemEntity
      - type: object
        properties:
          equipment_type:
            type: string
            enum:
            - weapon
            - armor
            - implant
            - cyberware
            - clothing
            - accessory
            description: Specific equipment category
            example: weapon
          level_requirement:
            type: integer
            minimum: 1
            maximum: 50
            description: Required character level
            example: 15
          stats:
            type: object
            properties:
              attack:
                type: integer
                minimum: 0
                description: Attack stat bonus
                example: 45
              defense:
                type: integer
                minimum: 0
                description: Defense stat bonus
                example: 30
              health:
                type: integer
                minimum: 0
                description: Health stat bonus
                example: 100
              stamina:
                type: integer
                minimum: 0
                description: Stamina stat bonus
                example: 25
            description: Equipment stat bonuses
          durability:
            type: object
            properties:
              current:
                type: integer
                minimum: 0
                description: Current durability
                example: 85
              maximum:
                type: integer
                minimum: 1
                description: Maximum durability
                example: 100
            description: Equipment durability status
          equipped_by:
            type: array
            items:
              $ref: ../common/schemas/common.yaml#/components/schemas/UUID
            description: Character IDs currently equipping this item
            example:
            - 123e4567-e89b-12d3-a456-426614174000
    CatalogItem:
      allOf:
      - $ref: ../common/schemas/common.yaml#/BaseEntity
      - type: object
        properties:
          name:
            type: string
            description: Equipment display name
          category:
            type: string
            enum:
            - weapon
            - armor
            - accessory
            description: Equipment category
          rarity:
            type: string
            enum:
            - common
            - uncommon
            - rare
            - epic
            - legendary
            description: Equipment rarity
          level_requirement:
            type: integer
            minimum: 1
            description: Required character level
          stats:
            type: object
            properties:
              attack:
                type: integer
                minimum: 0
              defense:
                type: integer
                minimum: 0
      description: 'BACKEND NOTE: Equipment catalog item. Struct-aligned for performance.'
    IconicItem:
      allOf:
      - $ref: '#/components/schemas/CatalogItem'
      - type: object
        properties:
          timeline_year:
            type: integer
            minimum: 2000
            maximum: 2100
            description: Year this iconic item was introduced
          lore_description:
            type: string
            description: Historical significance in Night City lore
      description: 'BACKEND NOTE: Iconic equipment with historical significance.'
    EquipmentAnalytics:
      type: object
      properties:
        total_items:
          type: integer
          minimum: 0
        popular_rarities:
          type: object
          additionalProperties:
            type: integer
            minimum: 0
        category_distribution:
          type: object
          additionalProperties:
            type: integer
            minimum: 0
      description: 'BACKEND NOTE: Equipment usage analytics.'
    GenerateEquipmentRequest:
      type: object
      required:
      - category
      - rarity
      - level
      properties:
        category:
          type: string
          enum:
          - weapon
          - armor
          - accessory
        rarity:
          type: string
          enum:
          - common
          - uncommon
          - rare
          - epic
          - legendary
        level:
          type: integer
          minimum: 1
          maximum: 50
        seed:
          type: integer
          description: Random seed for reproducible generation
      description: 'BACKEND NOTE: Request for procedural equipment generation.'
    GeneratedItem:
      allOf:
      - $ref: '#/components/schemas/CatalogItem'
      - type: object
      description: 'BACKEND NOTE: Procedurally generated equipment item.'
    EquipmentMatrix:
      type: object
      properties:
        brand_id:
          type: string
          format: uuid
        matrix_data:
          type: object
          additionalProperties: true
      description: 'BACKEND NOTE: Equipment compatibility matrix.'
    BrandsListResponse:
      type: object
      properties:
        brands:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                format: uuid
              name:
                type: string
              description:
                type: string
      description: 'BACKEND NOTE: List of equipment brands.'
    RaritiesListResponse:
      type: object
      properties:
        rarities:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              name:
                type: string
              color:
                type: string
              drop_rate:
                type: number
                minimum: 0
                maximum: 1
      description: 'BACKEND NOTE: List of equipment rarities.'
    StatPoolsListResponse:
      type: object
      properties:
        stat_pools:
          type: array
          items:
            type: object
            properties:
              item_type:
                type: string
                enum:
                - weapon
                - armor
                - accessory
              available_stats:
                type: array
                items:
                  type: string
      description: 'BACKEND NOTE: Available stat pools by item type.'
    BalanceValidationResult:
      type: object
      required:
      - is_valid
      - issues
      properties:
        is_valid:
          type: boolean
          description: Whether the equipment balance is valid
        issues:
          type: array
          items:
            type: string
          description: List of balance issues found
        suggestions:
          type: array
          items:
            type: string
          description: Suggestions for fixing balance issues
      description: Equipment rarity levels
    EquipmentItemType:
      type: string
      enum:
      - weapon
      - armor
      - implant
      - cyberware
      - clothing
      - accessory
      description: Equipment item types
    EquipmentRarity:
      type: string
      enum:
      - common
      - uncommon
      - rare
      - epic
      - legendary
      - unique
    ValidateBalanceRequest:
      type: object
      required:
      - character_id
      - equipment_id
      properties:
        character_id:
          type: string
          format: uuid
          description: Character identifier
        equipment_id:
          type: string
          format: uuid
          description: Equipment item identifier
        current_equipment:
          type: array
          items:
            type: string
            format: uuid
          description: Currently equipped items IDs
      description: Request to validate equipment balance
  responses:
    OK:
      $ref: ../common/responses/success.yaml#/OK
    Created:
      $ref: ../common/responses/success.yaml#/Created
    Updated:
      $ref: ../common/responses/success.yaml#/Updated
    Deleted:
      $ref: ../common/responses/success.yaml#/Deleted
    BadRequest:
      $ref: ../common/responses/error.yaml#/BadRequest
    Unauthorized:
      $ref: ../common/responses/error.yaml#/Unauthorized
    NotFound:
      $ref: ../common/responses/error.yaml#/NotFound
    TooManyRequests:
      $ref: ../common/responses/error.yaml#/TooManyRequests
  securitySchemes:
    BearerAuth:
      $ref: ../common/security/security.yaml#/BearerAuth
    ApiKeyAuth:
      $ref: ../common/security/security.yaml#/ApiKeyAuth
    ServiceAuth:
      $ref: ../common/security/security.yaml#/ServiceAuth
  parameters:
    Limit:
      name: limit
      in: query
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 50
      description: Number of items to return
    Offset:
      name: offset
      in: query
      schema:
        type: integer
        minimum: 0
        default: 0
      description: Number of items to skip
