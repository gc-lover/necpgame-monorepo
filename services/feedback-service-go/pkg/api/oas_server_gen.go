// Code generated by ogen, DO NOT EDIT.

package api

import (
	"context"
)

// Handler handles operations described by OpenAPI v3 specification.
type Handler interface {
	// GetFeedback implements getFeedback operation.
	//
	// Получить обращение.
	//
	// GET /{id}
	GetFeedback(ctx context.Context, params GetFeedbackParams) (GetFeedbackRes, error)
	// GetPlayerFeedback implements getPlayerFeedback operation.
	//
	// Получить обращения игрока.
	//
	// GET /player/{player_id}
	GetPlayerFeedback(ctx context.Context, params GetPlayerFeedbackParams) (GetPlayerFeedbackRes, error)
	// SubmitFeedback implements submitFeedback operation.
	//
	// Создание нового обращения от игрока.
	// **Требует:** Аутентификация (session token).
	// **Rate limiting:** 5 обращений в час на игрока.
	// **Валидация:**
	// - title: обязательное, до 100 символов
	// - description: обязательное, до 2000 символов
	// - screenshots: до 3 файлов.
	//
	// POST /submit
	SubmitFeedback(ctx context.Context, req *SubmitFeedbackRequest) (SubmitFeedbackRes, error)
	// UpdateFeedbackStatus implements updateFeedbackStatus operation.
	//
	// Обновление статуса обращения.
	// **Требует:** Специальная аутентификация
	// (агенты/админы).
	// **Статусы:**
	// - pending_moderation - ожидает модерации
	// - pending - ожидает обработки
	// - in_review - на рассмотрении
	// - assigned - назначено агенту
	// - in_progress - в работе
	// - resolved - решено
	// - rejected - отклонено
	// - duplicate - дубликат
	// - merged - объединено с другим обращением.
	//
	// POST /{id}/update-status
	UpdateFeedbackStatus(ctx context.Context, req *UpdateStatusRequest, params UpdateFeedbackStatusParams) (UpdateFeedbackStatusRes, error)
}

// Server implements http server based on OpenAPI v3 specification and
// calls Handler to handle requests.
type Server struct {
	h   Handler
	sec SecurityHandler
	baseServer
}

// NewServer creates new Server.
func NewServer(h Handler, sec SecurityHandler, opts ...ServerOption) (*Server, error) {
	s, err := newServerConfig(opts...).baseServer()
	if err != nil {
		return nil, err
	}
	return &Server{
		h:          h,
		sec:        sec,
		baseServer: s,
	}, nil
}
