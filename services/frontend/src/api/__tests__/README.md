# –¢–µ—Å—Ç—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–µ–∫–µ–Ω–¥—É

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∫ –±–µ–∫–µ–Ω–¥ API.

## –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

### 1. –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (`api-client.test.ts`)
–ü—Ä–æ–≤–µ—Ä—è—é—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é API –∫–ª–∏–µ–Ω—Ç–∞:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ baseURL
- –ù–∞–ª–∏—á–∏–µ —Ç–∞–π–º–∞—É—Ç–æ–≤
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- –ù–∞–ª–∏—á–∏–µ interceptors

**–ó–∞–ø—É—Å–∫:** –ù–µ —Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –±–µ–∫–µ–Ω–¥–∞
```bash
npm test api-client.test.ts
```

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã Health Checks (`backend-connection.integration.test.ts`)
–ü—Ä–æ–≤–µ—Ä—è—é—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ—Å–Ω–æ–≤–Ω—ã—Ö health —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:
- `/api/v1/health`
- `/api/v1/gameplay/health`
- `/api/v1/social/health`
- `/api/v1/gameplay/status`

**–ó–∞–ø—É—Å–∫:** –¢—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –±–µ–∫–µ–Ω–¥–∞
```bash
npm test backend-connection.integration.test.ts
```

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã Auth API (`auth-api.integration.test.ts`)
–ü—Ä–æ–≤–µ—Ä—è—é—Ç —Ä–∞–±–æ—Ç—É —Å–æ —Å–ø—Ä–∞–≤–æ—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–ª–∞—Å—Å–æ–≤ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–π
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–æ–≤
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ—Ä–∞–∫—Ü–∏–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ñ—Ä–∞–∫—Ü–∏–π –ø–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—é

**–ó–∞–ø—É—Å–∫:** –¢—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –±–µ–∫–µ–Ω–¥–∞
```bash
npm test auth-api.integration.test.ts
```

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã Characters API (`characters-api.integration.test.ts`)
–ü—Ä–æ–≤–µ—Ä—è—é—Ç —Ä–∞–±–æ—Ç—É —Å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏:
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤

**–ó–∞–ø—É—Å–∫:** –¢—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –±–µ–∫–µ–Ω–¥–∞ (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
```bash
npm test characters-api.integration.test.ts
```

## –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–µ–∫–µ–Ω–¥—É
```bash
npm test -- src/api/__tests__
```

### –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤ (–±–µ–∑ –±–µ–∫–µ–Ω–¥–∞)
```bash
npm test api-client.test.ts
```

### –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ (—Å –±–µ–∫–µ–Ω–¥–æ–º)
```bash
npm test -- --grep integration
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.test` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```env
VITE_API_BASE_URL=http://localhost:8080/api/v1
```

### –ó–∞–ø—É—Å–∫ –±–µ–∫–µ–Ω–¥–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
cd ../BACK-GO
./mvnw spring-boot:run
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: Docker
```bash
cd ../BACK-GO
docker-compose up
```

## –ü–æ–≤–µ–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–ø—É—Å–∫
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –±–µ–∫–µ–Ω–¥–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:
- ‚úÖ –ï—Å–ª–∏ –±–µ–∫–µ–Ω–¥ –¥–æ—Å—Ç—É–ø–µ–Ω - —Ç–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
- ‚è≠Ô∏è –ï—Å–ª–∏ –±–µ–∫–µ–Ω–¥ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω - —Ç–µ—Å—Ç—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è (skip)

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã –±–µ–∑ –æ—à–∏–±–æ–∫, –¥–∞–∂–µ –µ—Å–ª–∏ –±–µ–∫–µ–Ω–¥ –Ω–µ –∑–∞–ø—É—â–µ–Ω.

### –¢–∞–π–º–∞—É—Ç—ã
- Health check: 5 —Å–µ–∫—É–Ω–¥
- API –∑–∞–ø—Ä–æ—Å—ã: 30 —Å–µ–∫—É–Ω–¥ (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ client.ts)

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É—Ç–∏–ª–∏—Ç—ã –∏–∑ `test-utils.ts`:

```typescript
import { getBackendInfo, printBackendInfo } from './test-utils'

// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ –≤ —Ç–µ—Å—Ç–∞—Ö
await printBackendInfo()
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–¢–µ—Å—Ç—ã –≤—ã–≤–æ–¥—è—Ç –ø–æ–ª–µ–∑–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
- ‚úì –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–µ–∫–µ–Ω–¥—É
- ‚ö† –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- üîç –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–æ–∫ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
echo $VITE_API_BASE_URL

# –ò–ª–∏ –≤ Node.js
node -e "console.log(process.env.VITE_API_BASE_URL)"
```

## Troubleshooting

### –ë–µ–∫–µ–Ω–¥ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–µ–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω: `curl http://localhost:8080/api/v1/health`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±–µ–∫–µ–Ω–¥–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –∏ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å

### –û—à–∏–±–∫–∞ CORS
**–ü—Ä–æ–±–ª–µ–º–∞:** CORS policy error

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–µ–∫–µ–Ω–¥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –ø—Ä–∏–µ–º–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `WebConfig.java` –≤ –±–µ–∫–µ–Ω–¥–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ origin –≤ –±–µ–∫–µ–Ω–¥–µ –≤–∫–ª—é—á–∞–µ—Ç `http://localhost:5173`

### –û—à–∏–±–∫–∞ 401 Unauthorized
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 401

**–†–µ—à–µ–Ω–∏–µ:**
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –¢–µ—Å—Ç—ã —É—á–∏—Ç—ã–≤–∞—é—Ç —ç—Ç–æ –∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏—è
- –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–±–∞–≤—å—Ç–µ –≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ `setMockAuthToken()`

### –¢–∞–π–º–∞—É—Ç —Ç–µ—Å—Ç–æ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ—Å—Ç—ã –∑–∞–≤–∏—Å–∞—é—Ç –∏–ª–∏ –ø–∞–¥–∞—é—Ç –ø–æ —Ç–∞–π–º–∞—É—Ç—É

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç –≤ `vitest.config.ts`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–µ–∫–µ–Ω–¥–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

## –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (CI)

### GitHub Actions
–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –≤ CI:

```yaml
- name: Start Backend
  run: |
    cd BACK-GO
    docker-compose up -d
    
- name: Wait for Backend
  run: |
    timeout 30 bash -c 'until curl -f http://localhost:8080/api/v1/health; do sleep 1; done'
    
- name: Run Integration Tests
  run: |
    cd FRONT-WEB
    npm test -- src/api/__tests__
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
src/api/__tests__/
‚îú‚îÄ‚îÄ README.md                                    # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ test-utils.ts                               # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ api-client.test.ts                          # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ backend-connection.integration.test.ts      # Health checks
‚îú‚îÄ‚îÄ auth-api.integration.test.ts                # Auth API —Ç–µ—Å—Ç—ã
‚îî‚îÄ‚îÄ characters-api.integration.test.ts          # Characters API —Ç–µ—Å—Ç—ã
```

## –ú–µ—Ç—Ä–∏–∫–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

```
‚úì API Client (X tests)
‚úì Backend Connection Integration Tests (X tests) 
‚úì Auth API Integration Tests (X tests)
‚úì Characters API Integration Tests (X tests)

Test Files  4 passed (4)
     Tests  XX passed (XX)
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [Vitest Documentation](https://vitest.dev/)
- [Axios Documentation](https://axios-http.com/)
- [Testing Best Practices](https://github.com/goldbergyoni/javascript-testing-best-practices)

