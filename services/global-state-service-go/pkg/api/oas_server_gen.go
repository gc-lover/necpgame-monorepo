// Code generated by ogen, DO NOT EDIT.

package api

import (
	"context"
)

// Handler handles operations described by OpenAPI v3 specification.
type Handler interface {
	// GetAggregateEvents implements getAggregateEvents operation.
	//
	// Retrieve event history for specific aggregate.
	//
	// GET /events/{aggregateType}/{aggregateId}
	GetAggregateEvents(ctx context.Context, params GetAggregateEventsParams) (GetAggregateEventsRes, error)
	// GetAggregateState implements getAggregateState operation.
	//
	// Retrieve current state for specific aggregate with optional version.
	//
	// GET /state/{aggregateType}/{aggregateId}
	GetAggregateState(ctx context.Context, params GetAggregateStateParams) (GetAggregateStateRes, error)
	// GetStateChangeAnalytics implements getStateChangeAnalytics operation.
	//
	// Retrieve analytics about state changes and patterns.
	//
	// GET /analytics/state-changes
	GetStateChangeAnalytics(ctx context.Context, params GetStateChangeAnalyticsParams) (GetStateChangeAnalyticsRes, error)
	// GlobalStateHealth implements globalStateHealth operation.
	//
	// Global state service health check.
	//
	// GET /health
	GlobalStateHealth(ctx context.Context) (GlobalStateHealthRes, error)
	// PublishEvent implements publishEvent operation.
	//
	// Publish event to event store with validation and processing.
	//
	// POST /events
	PublishEvent(ctx context.Context, req *EventPublishRequest) (PublishEventRes, error)
	// SynchronizeState implements synchronizeState operation.
	//
	// Synchronize state changes across regions with conflict resolution.
	//
	// POST /sync
	SynchronizeState(ctx context.Context, req *SyncRequest) (SynchronizeStateRes, error)
	// UpdateAggregateState implements updateAggregateState operation.
	//
	// Update state for specific aggregate with optimistic locking.
	//
	// PUT /state/{aggregateType}/{aggregateId}
	UpdateAggregateState(ctx context.Context, req *StateUpdateRequest, params UpdateAggregateStateParams) (UpdateAggregateStateRes, error)
}

// Server implements http server based on OpenAPI v3 specification and
// calls Handler to handle requests.
type Server struct {
	h   Handler
	sec SecurityHandler
	baseServer
}

// NewServer creates new Server.
func NewServer(h Handler, sec SecurityHandler, opts ...ServerOption) (*Server, error) {
	s, err := newServerConfig(opts...).baseServer()
	if err != nil {
		return nil, err
	}
	return &Server{
		h:          h,
		sec:        sec,
		baseServer: s,
	}, nil
}
