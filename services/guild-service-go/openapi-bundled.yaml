openapi: 3.0.3
info:
  title: Guild Service API - Enterprise-Grade Social Gaming Systems
  description: '**Enterprise-Grade Guild Service API for NECPGAME**

    This API manages guild systems, social mechanics, and cooperative gameplay in
    the Night City universe, providing comprehensive guild management, member coordination,
    and competitive guild features.

    ## Key Features

    - **Guild Management**: Creation, hierarchy, and administration - **Social Systems**:
    Member recruitment, roles, and communication - **Cooperative Gameplay**: Guild
    quests, events, and resource sharing - **Competitive Elements**: Guild rankings,
    PvP, and inter-guild conflicts - **Performance Optimized**: MMOFPS-grade performance
    with <20ms P99 latency

    ## Domain Purpose

    The Guild domain handles all aspects of player organization and social cooperation
    in Night City. Players form guilds to tackle challenges together, compete against
    other guilds, and build lasting social connections.

    ## Performance Targets

    - P99 Latency: <20ms for guild operations - Memory: <12KB per active guild member
    - Concurrent guilds: 50,000+ active guilds - Real-time updates: <50ms propagation
    time - Guild chat: 1000+ concurrent users

    '
  version: 1.0.0
  contact:
    name: NECPGAME API Support
    url: https://necpgame.com/support
    email: api@necpgame.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
servers:
- url: https://api.necpgame.com/v1/guild
  description: Production server
- url: https://staging-api.necpgame.com/v1/guild
  description: Staging server
- url: http://localhost:8080/api/v1/guild
  description: Local development server
security:
- BearerAuth: []
tags:
- name: Guild Management
  description: Core guild creation and administration
- name: Member Management
  description: Guild membership, roles, and permissions
- name: Guild Communication
  description: Chat, announcements, and coordination
- name: Guild Economy
  description: Bank, resources, and shared assets
- name: Guild Competition
  description: Rankings, PvP, and inter-guild activities
- name: Health Monitoring
  description: System health and performance monitoring
paths:
  /health:
    get:
      summary: Guild service health check
      description: '**Enterprise-grade health check endpoint**

        Provides real-time health status of the guild microservice. Critical for service
        discovery, load balancing, and monitoring. **Performance:** <1ms response
        time, cached for 30 seconds

        '
      operationId: guildServiceHealthCheck
      tags:
      - Health Monitoring
      parameters:
      - name: Accept-Encoding
        in: header
        schema:
          type: string
          enum:
          - gzip
          - deflate
          - br
      responses:
        '200':
          description: Service is healthy
          headers:
            Cache-Control:
              schema:
                type: string
                example: max-age=30, s-maxage=60
            ETag:
              schema:
                type: string
                example: '"guild-health-v1.0"'
            Content-Encoding:
              schema:
                type: string
                enum:
                - gzip
                - deflate
                - br
          content:
            application/json:
              schema:
                type: object
                required:
                - status
                - timestamp
                properties:
                  status:
                    type: string
                    enum:
                    - ok
                    - degraded
                    - critical
                    example: ok
                    description: Current health status
                  message:
                    type: string
                    example: Service is healthy
                    description: Human-readable status message
                  timestamp:
                    type: string
                    format: date-time
                    example: '2024-01-15T10:30:00Z'
                    description: Time when health check was performed
                  version:
                    type: string
                    example: 1.0.0
                    description: Service version
                  uptime:
                    type: integer
                    example: 3600
                    description: Service uptime in seconds
                  checks:
                    type: object
                    description: Detailed health checks
                    additionalProperties:
                      type: object
                      properties:
                        status:
                          type: string
                          enum:
                          - ok
                          - degraded
                          - critical
                        message:
                          type: string
                        response_time:
                          type: integer
                          description: Response time in milliseconds
        '503':
          description: Service is unhealthy
          content:
            application/json:
              schema:
                type: object
                required:
                - status
                - timestamp
                properties:
                  status:
                    type: string
                    enum:
                    - ok
                    - degraded
                    - critical
                    example: ok
                    description: Current health status
                  message:
                    type: string
                    example: Service is healthy
                    description: Human-readable status message
                  timestamp:
                    type: string
                    format: date-time
                    example: '2024-01-15T10:30:00Z'
                    description: Time when health check was performed
                  version:
                    type: string
                    example: 1.0.0
                    description: Service version
                  uptime:
                    type: integer
                    example: 3600
                    description: Service uptime in seconds
                  checks:
                    type: object
                    description: Detailed health checks
                    additionalProperties:
                      type: object
                      properties:
                        status:
                          type: string
                          enum:
                          - ok
                          - degraded
                          - critical
                        message:
                          type: string
                        response_time:
                          type: integer
                          description: Response time in milliseconds
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
                description: Seconds to wait before retrying
            X-RateLimit-Limit:
              schema:
                type: integer
                description: Maximum requests per time window
            X-RateLimit-Remaining:
              schema:
                type: integer
                description: Remaining requests in current window
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
                description: Time when rate limit resets
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
  /health/batch:
    post:
      summary: Batch health check for multiple guild services
      description: '**Performance optimization:** Check multiple guild health in single
        request

        Reduces N HTTP calls to 1 call. Critical for microservice orchestration.

        Eliminates network overhead in health monitoring scenarios.

        **Use case:** Service mesh health checks, Kubernetes readiness probes

        '
      operationId: guildServiceBatchHealthCheck
      tags:
      - Health Monitoring
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - services
              properties:
                services:
                  type: array
                  items:
                    type: string
                    enum:
                    - guild-service
                    - social-service
                    - communication-service
                  maxItems: 10
                  description: List of services to check
      responses:
        '200':
          description: Batch health check completed successfully
          content:
            application/json:
              schema:
                type: object
                required:
                - overall_status
                - timestamp
                - results
                properties:
                  overall_status:
                    type: string
                    enum:
                    - healthy
                    - degraded
                    - critical
                    example: healthy
                  timestamp:
                    type: string
                    format: date-time
                    example: '2024-01-15T10:30:00Z'
                  results:
                    type: object
                    additionalProperties:
                      type: object
                      required:
                      - status
                      - timestamp
                      properties:
                        status:
                          type: string
                          enum:
                          - ok
                          - degraded
                          - critical
                          example: ok
                          description: Current health status
                        message:
                          type: string
                          example: Service is healthy
                          description: Human-readable status message
                        timestamp:
                          type: string
                          format: date-time
                          example: '2024-01-15T10:30:00Z'
                          description: Time when health check was performed
                        version:
                          type: string
                          example: 1.0.0
                          description: Service version
                        uptime:
                          type: integer
                          example: 3600
                          description: Service uptime in seconds
                        checks:
                          type: object
                          description: Detailed health checks
                          additionalProperties:
                            type: object
                            properties:
                              status:
                                type: string
                                enum:
                                - ok
                                - degraded
                                - critical
                              message:
                                type: string
                              response_time:
                                type: integer
                                description: Response time in milliseconds
                    description: Health status for each requested service
        '400':
          description: Invalid request - malformed service list
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
                description: Seconds to wait before retrying
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
  /guilds:
    get:
      summary: List guilds with filtering and pagination
      description: '**Enterprise-grade guild listing endpoint**

        Retrieves guilds with advanced filtering by name, level, reputation, and activity
        status. Supports comprehensive search and discovery.

        **Performance:** <15ms P95 with database indexing

        **Features:** Full-text search, location-based filtering, activity metrics

        '
      operationId: listGuilds
      tags:
      - Guild Management
      parameters:
      - name: name
        in: query
        schema:
          type: string
          minLength: 1
          maxLength: 50
      - name: level_min
        in: query
        schema:
          type: integer
          minimum: 1
      - name: level_max
        in: query
        schema:
          type: integer
          minimum: 1
      - name: reputation_min
        in: query
        schema:
          type: integer
          minimum: 0
      - name: member_count_min
        in: query
        schema:
          type: integer
          minimum: 1
      - name: activity_status
        in: query
        schema:
          type: string
          enum:
          - active
          - recruiting
          - maintenance
          - disbanding
      - name: page
        in: query
        schema:
          type: integer
          minimum: 1
          default: 1
      - name: limit
        in: query
        schema:
          type: integer
          minimum: 1
          maximum: 50
          default: 20
      responses:
        '200':
          description: Guilds retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildListResponse'
          headers:
            X-Total-Count:
              schema:
                type: integer
              description: Total number of guilds matching criteria
            X-Page-Count:
              schema:
                type: integer
              description: Total number of pages
            Cache-Control:
              schema:
                type: string
                example: max-age=60, private
        '400':
          description: Invalid query parameters
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
                description: Seconds to wait before retrying
            X-RateLimit-Limit:
              schema:
                type: integer
                description: Maximum requests per time window
            X-RateLimit-Remaining:
              schema:
                type: integer
                description: Remaining requests in current window
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
                description: Time when rate limit resets
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
    post:
      summary: Create new guild
      description: '**Guild creation endpoint**

        Creates a new guild with initial configuration and founder assignment. Validates
        guild name uniqueness and founder eligibility.

        **Performance:** <50ms P95 including validation and initial setup

        **Validation:** Name uniqueness, founder permissions, creation limits

        '
      operationId: createGuild
      tags:
      - Guild Management
      security:
      - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGuildRequest'
      responses:
        '201':
          description: Guild created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildResponse'
          headers:
            Location:
              schema:
                type: string
                example: /api/v1/guild/guilds/550e8400-e29b-41d4-a716-446655440000
        '400':
          description: Invalid guild configuration
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '401':
          description: Unauthorized - authentication required or invalid token
          headers:
            WWW-Authenticate:
              schema:
                type: string
                example: Bearer realm="NECPGAME API"
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '409':
          description: Guild name already exists or creation limit reached
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
                description: Seconds to wait before retrying
            X-RateLimit-Limit:
              schema:
                type: integer
                description: Maximum requests per time window
            X-RateLimit-Remaining:
              schema:
                type: integer
                description: Remaining requests in current window
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
                description: Time when rate limit resets
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
  /guilds/{guild_id}:
    get:
      summary: Get guild details
      description: '**Guild details retrieval endpoint**

        Retrieves comprehensive guild information including members, statistics, and
        configuration. Supports partial member loading for performance.

        **Performance:** <10ms P95 with Redis caching

        **Features:** Conditional requests, partial responses

        '
      operationId: getGuild
      tags:
      - Guild Management
      parameters:
      - name: guild_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      - name: include_members
        in: query
        schema:
          type: boolean
          default: true
      - name: include_statistics
        in: query
        schema:
          type: boolean
          default: true
      - name: If-None-Match
        in: header
        schema:
          type: string
      responses:
        '200':
          description: Guild details retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildResponse'
          headers:
            ETag:
              schema:
                type: string
                example: '"guild-123-v1"'
            Cache-Control:
              schema:
                type: string
                example: max-age=300, private
        '304':
          description: Not modified - guild has not changed
        '404':
          description: Guild not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
                description: Seconds to wait before retrying
            X-RateLimit-Limit:
              schema:
                type: integer
                description: Maximum requests per time window
            X-RateLimit-Remaining:
              schema:
                type: integer
                description: Remaining requests in current window
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
                description: Time when rate limit resets
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
    put:
      summary: Update guild configuration
      description: '**Guild update endpoint**

        Updates guild settings, description, and configuration. Supports partial updates
        with optimistic locking.

        **Performance:** <25ms P95 with conflict resolution

        **Security:** Leadership permissions required

        '
      operationId: updateGuild
      tags:
      - Guild Management
      security:
      - BearerAuth: []
      parameters:
      - name: guild_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      - name: If-Match
        in: header
        schema:
          type: string
        description: Optimistic locking version
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateGuildRequest'
      responses:
        '200':
          description: Guild updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildResponse'
        '400':
          description: Invalid update parameters
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '401':
          description: Unauthorized - authentication required or invalid token
          headers:
            WWW-Authenticate:
              schema:
                type: string
                example: Bearer realm="NECPGAME API"
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '403':
          description: Insufficient permissions to update guild
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '404':
          description: Guild not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '409':
          description: Version conflict - guild was modified concurrently
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
                description: Seconds to wait before retrying
            X-RateLimit-Limit:
              schema:
                type: integer
                description: Maximum requests per time window
            X-RateLimit-Remaining:
              schema:
                type: integer
                description: Remaining requests in current window
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
                description: Time when rate limit resets
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
    delete:
      summary: Disband guild
      description: '**Guild disband endpoint**

        Permanently disbands a guild, handling member removal and asset distribution.
        Requires leadership consensus or administrative override.

        **Performance:** <100ms P95 including cleanup operations

        **Security:** Strict permission checks and confirmation required

        '
      operationId: disbandGuild
      tags:
      - Guild Management
      security:
      - BearerAuth: []
      parameters:
      - name: guild_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
              - confirmation_code
              properties:
                confirmation_code:
                  type: string
                  description: Guild disband confirmation code
                asset_distribution:
                  type: string
                  enum:
                  - distribute_evenly
                  - return_to_members
                  - donate_to_system
                  default: distribute_evenly
      responses:
        '204':
          description: Guild disbanded successfully
        '400':
          description: Invalid confirmation or parameters
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '401':
          description: Unauthorized - authentication required or invalid token
          headers:
            WWW-Authenticate:
              schema:
                type: string
                example: Bearer realm="NECPGAME API"
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '403':
          description: Insufficient permissions to disband guild
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '404':
          description: Guild not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
                description: Seconds to wait before retrying
            X-RateLimit-Limit:
              schema:
                type: integer
                description: Maximum requests per time window
            X-RateLimit-Remaining:
              schema:
                type: integer
                description: Remaining requests in current window
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
                description: Time when rate limit resets
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
  /guilds/{guild_id}/members:
    get:
      summary: List guild members
      description: '**Guild member listing endpoint**

        Retrieves guild member roster with roles, activity, and permissions. Supports
        filtering by role, activity level, and online status.

        **Performance:** <20ms P95 with member indexing

        '
      operationId: listGuildMembers
      tags:
      - Member Management
      parameters:
      - name: guild_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      - name: role
        in: query
        schema:
          type: string
          enum:
          - leader
          - officer
          - veteran
          - member
          - recruit
      - name: online_status
        in: query
        schema:
          type: string
          enum:
          - online
          - offline
          - away
      - name: page
        in: query
        schema:
          type: integer
          minimum: 1
          default: 1
      - name: limit
        in: query
        schema:
          type: integer
          minimum: 1
          maximum: 100
          default: 50
      responses:
        '200':
          description: Guild members retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildMembersResponse'
          headers:
            X-Total-Count:
              schema:
                type: integer
              description: Total number of members
        '404':
          description: Guild not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
                description: Seconds to wait before retrying
            X-RateLimit-Limit:
              schema:
                type: integer
                description: Maximum requests per time window
            X-RateLimit-Remaining:
              schema:
                type: integer
                description: Remaining requests in current window
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
                description: Time when rate limit resets
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
    post:
      summary: Invite player to guild
      description: '**Guild invitation endpoint**

        Sends guild invitation to specified player with optional message. Validates
        invitation limits and player eligibility.

        **Performance:** <30ms P95 including notification dispatch

        **Features:** Invitation expiry, bulk invitations, role assignment

        '
      operationId: inviteToGuild
      tags:
      - Member Management
      security:
      - BearerAuth: []
      parameters:
      - name: guild_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InviteToGuildRequest'
      responses:
        '201':
          description: Invitation sent successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildInvitationResponse'
        '400':
          description: Invalid invitation parameters
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '401':
          description: Unauthorized - authentication required or invalid token
          headers:
            WWW-Authenticate:
              schema:
                type: string
                example: Bearer realm="NECPGAME API"
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '403':
          description: Insufficient permissions to send invitations
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '404':
          description: Guild or player not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '409':
          description: Player already in guild or invitation limit reached
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
                description: Seconds to wait before retrying
            X-RateLimit-Limit:
              schema:
                type: integer
                description: Maximum requests per time window
            X-RateLimit-Remaining:
              schema:
                type: integer
                description: Remaining requests in current window
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
                description: Time when rate limit resets
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
  /guilds/{guild_id}/members/{user_id}:
    put:
      summary: Update member role and permissions
      description: '**Member role update endpoint**

        Updates guild member''s role, permissions, and responsibilities. Supports
        promotion, demotion, and permission changes.

        **Performance:** <15ms P95 with permission validation

        **Security:** Hierarchical permission checks

        '
      operationId: updateGuildMember
      tags:
      - Member Management
      security:
      - BearerAuth: []
      parameters:
      - name: guild_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      - name: user_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateGuildMemberRequest'
      responses:
        '200':
          description: Member updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildMemberResponse'
        '400':
          description: Invalid role or permission parameters
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '401':
          description: Unauthorized - authentication required or invalid token
          headers:
            WWW-Authenticate:
              schema:
                type: string
                example: Bearer realm="NECPGAME API"
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '403':
          description: Insufficient permissions to modify member
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '404':
          description: Guild or member not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
                description: Seconds to wait before retrying
            X-RateLimit-Limit:
              schema:
                type: integer
                description: Maximum requests per time window
            X-RateLimit-Remaining:
              schema:
                type: integer
                description: Remaining requests in current window
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
                description: Time when rate limit resets
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
    delete:
      summary: Remove member from guild
      description: '**Member removal endpoint**

        Removes a member from the guild with optional reason and notification. Handles
        asset redistribution and role reassignments.

        **Performance:** <25ms P95 including cleanup operations

        **Features:** Voluntary leave vs forced removal, asset handling

        '
      operationId: removeGuildMember
      tags:
      - Member Management
      security:
      - BearerAuth: []
      parameters:
      - name: guild_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      - name: user_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                  maxLength: 500
                  description: Reason for removal (optional)
                asset_distribution:
                  type: string
                  enum:
                  - keep_with_guild
                  - distribute_to_member
                  - return_to_guild_bank
                  default: keep_with_guild
      responses:
        '204':
          description: Member removed successfully
        '401':
          description: Unauthorized - authentication required or invalid token
          headers:
            WWW-Authenticate:
              schema:
                type: string
                example: Bearer realm="NECPGAME API"
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '403':
          description: Insufficient permissions to remove member
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '404':
          description: Guild or member not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
                description: Seconds to wait before retrying
            X-RateLimit-Limit:
              schema:
                type: integer
                description: Maximum requests per time window
            X-RateLimit-Remaining:
              schema:
                type: integer
                description: Remaining requests in current window
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
                description: Time when rate limit resets
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
  /guilds/{guild_id}/bank:
    get:
      summary: Get guild bank contents
      description: '**Guild bank inventory endpoint**

        Retrieves guild bank items, currency, and shared resources. Supports filtering
        by item type and quality.

        **Performance:** <20ms P95 with inventory indexing

        **Security:** Role-based access to bank contents

        '
      operationId: getGuildBank
      tags:
      - Guild Economy
      security:
      - BearerAuth: []
      parameters:
      - name: guild_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      - name: item_type
        in: query
        schema:
          type: string
          enum:
          - weapon
          - armor
          - consumable
          - material
          - currency
      - name: quality_min
        in: query
        schema:
          type: integer
          minimum: 1
          maximum: 100
      responses:
        '200':
          description: Guild bank retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildBankResponse'
        '401':
          description: Unauthorized - authentication required or invalid token
          headers:
            WWW-Authenticate:
              schema:
                type: string
                example: Bearer realm="NECPGAME API"
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '403':
          description: Insufficient permissions to access guild bank
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '404':
          description: Guild not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
                description: Seconds to wait before retrying
            X-RateLimit-Limit:
              schema:
                type: integer
                description: Maximum requests per time window
            X-RateLimit-Remaining:
              schema:
                type: integer
                description: Remaining requests in current window
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
                description: Time when rate limit resets
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
    post:
      summary: Deposit item to guild bank
      description: '**Guild bank deposit endpoint**

        Deposits items or currency into the guild bank for shared use. Validates item
        ownership and deposit permissions.

        **Performance:** <30ms P95 including inventory updates

        **Features:** Partial deposits, bulk operations

        '
      operationId: depositToGuildBank
      tags:
      - Guild Economy
      security:
      - BearerAuth: []
      parameters:
      - name: guild_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GuildBankDepositRequest'
      responses:
        '200':
          description: Deposit completed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildBankTransactionResponse'
        '400':
          description: Invalid deposit parameters
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '401':
          description: Unauthorized - authentication required or invalid token
          headers:
            WWW-Authenticate:
              schema:
                type: string
                example: Bearer realm="NECPGAME API"
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '403':
          description: Insufficient permissions or item ownership
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '404':
          description: Guild or item not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '409':
          description: Insufficient item quantity or bank capacity
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
                description: Seconds to wait before retrying
            X-RateLimit-Limit:
              schema:
                type: integer
                description: Maximum requests per time window
            X-RateLimit-Remaining:
              schema:
                type: integer
                description: Remaining requests in current window
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
                description: Time when rate limit resets
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
  /guilds/rankings:
    get:
      summary: Get guild rankings and statistics
      description: '**Guild rankings endpoint**

        Retrieves global guild rankings by level, reputation, and activity. Supports
        different ranking categories and time periods.

        **Performance:** <25ms P95 with cached rankings

        **Caching:** Rankings updated hourly with real-time deltas

        '
      operationId: getGuildRankings
      tags:
      - Guild Competition
      parameters:
      - name: category
        in: query
        schema:
          type: string
          enum:
          - level
          - reputation
          - activity
          - pvp_wins
          - quest_completion
          default: level
      - name: time_period
        in: query
        schema:
          type: string
          enum:
          - daily
          - weekly
          - monthly
          - all_time
          default: all_time
      - name: page
        in: query
        schema:
          type: integer
          minimum: 1
          default: 1
      - name: limit
        in: query
        schema:
          type: integer
          minimum: 1
          maximum: 100
          default: 50
      responses:
        '200':
          description: Guild rankings retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GuildRankingsResponse'
          headers:
            Cache-Control:
              schema:
                type: string
                example: max-age=3600, public
        '400':
          description: Invalid ranking parameters
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
                description: Seconds to wait before retrying
            X-RateLimit-Limit:
              schema:
                type: integer
                description: Maximum requests per time window
            X-RateLimit-Remaining:
              schema:
                type: integer
                description: Remaining requests in current window
            X-RateLimit-Reset:
              schema:
                type: string
                format: date-time
                description: Time when rate limit resets
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    minimum: 100
                    maximum: 599
                    example: 400
                  message:
                    type: string
                    example: Bad request
                  details:
                    type: object
                    description: Additional error details
components:
  responses:
    HealthBatchSuccess:
      description: Batch health check completed successfully
      content:
        application/json:
          schema:
            type: object
            required:
            - overall_status
            - timestamp
            - results
            properties:
              overall_status:
                type: string
                enum:
                - healthy
                - degraded
                - critical
                example: healthy
              timestamp:
                type: string
                format: date-time
                example: '2024-01-15T10:30:00Z'
              results:
                type: object
                additionalProperties:
                  type: object
                  required:
                  - status
                  - timestamp
                  properties:
                    status:
                      type: string
                      enum:
                      - ok
                      - degraded
                      - critical
                      example: ok
                      description: Current health status
                    message:
                      type: string
                      example: Service is healthy
                      description: Human-readable status message
                    timestamp:
                      type: string
                      format: date-time
                      example: '2024-01-15T10:30:00Z'
                      description: Time when health check was performed
                    version:
                      type: string
                      example: 1.0.0
                      description: Service version
                    uptime:
                      type: integer
                      example: 3600
                      description: Service uptime in seconds
                    checks:
                      type: object
                      description: Detailed health checks
                      additionalProperties:
                        type: object
                        properties:
                          status:
                            type: string
                            enum:
                            - ok
                            - degraded
                            - critical
                          message:
                            type: string
                          response_time:
                            type: integer
                            description: Response time in milliseconds
                description: Health status for each requested service
    OK:
      description: Operation completed successfully
      headers:
        Content-Type:
          schema:
            type: string
            example: application/json
        ETag:
          schema:
            type: string
            description: Entity version for optimistic locking
      content:
        application/json:
          schema:
            type: object
            required:
            - success
            - message
            properties:
              success:
                type: boolean
                example: true
              message:
                type: string
                example: Operation completed successfully
              data:
                type: object
                description: Response data payload
    Created:
      description: Resource created successfully
      headers:
        Content-Type:
          schema:
            type: string
            example: application/json
        Location:
          schema:
            type: string
            description: URL of the created resource
        ETag:
          schema:
            type: string
            description: Entity version for optimistic locking
      content:
        application/json:
          schema:
            type: object
            required:
            - success
            - message
            - id
            properties:
              success:
                type: boolean
                example: true
              message:
                type: string
                example: Resource created successfully
              id:
                type: string
                format: uuid
                description: ID of the created resource
                example: f47ac10b-58cc-4372-a567-0e02b2c3d479
              data:
                type: object
                description: Created resource data
    BadRequest:
      description: Bad request - validation failed or malformed data
      headers:
        Content-Type:
          schema:
            type: string
            example: application/json
      content:
        application/json:
          schema:
            type: object
            required:
            - code
            - message
            properties:
              code:
                type: integer
                minimum: 100
                maximum: 599
                example: 400
              message:
                type: string
                example: Bad request
              details:
                type: object
                description: Additional error details
    Unauthorized:
      description: Unauthorized - authentication required or invalid token
      headers:
        WWW-Authenticate:
          schema:
            type: string
            example: Bearer realm="NECPGAME API"
      content:
        application/json:
          schema:
            type: object
            required:
            - code
            - message
            properties:
              code:
                type: integer
                minimum: 100
                maximum: 599
                example: 400
              message:
                type: string
                example: Bad request
              details:
                type: object
                description: Additional error details
    Forbidden:
      description: Forbidden - insufficient permissions for this operation
      content:
        application/json:
          schema:
            type: object
            required:
            - code
            - message
            properties:
              code:
                type: integer
                minimum: 100
                maximum: 599
                example: 400
              message:
                type: string
                example: Bad request
              details:
                type: object
                description: Additional error details
    NotFound:
      description: Not found - requested resource does not exist
      content:
        application/json:
          schema:
            type: object
            required:
            - code
            - message
            properties:
              code:
                type: integer
                minimum: 100
                maximum: 599
                example: 400
              message:
                type: string
                example: Bad request
              details:
                type: object
                description: Additional error details
    Conflict:
      description: Conflict - resource has been modified by another request
    InternalServerError:
      description: Internal server error - unexpected system error occurred
      content:
        application/json:
          schema:
            type: object
            required:
            - code
            - message
            properties:
              code:
                type: integer
                minimum: 100
                maximum: 599
                example: 400
              message:
                type: string
                example: Bad request
              details:
                type: object
                description: Additional error details
    HealthOK:
      $ref: ../common/responses/success.yaml#/components/responses/HealthOK
  schemas:
    HealthResponse:
      type: object
      required:
      - status
      - timestamp
      properties:
        status:
          type: string
          enum:
          - ok
          - degraded
          - critical
          example: ok
          description: Current health status
        message:
          type: string
          example: Service is healthy
          description: Human-readable status message
        timestamp:
          type: string
          format: date-time
          example: '2024-01-15T10:30:00Z'
          description: Time when health check was performed
        version:
          type: string
          example: 1.0.0
          description: Service version
        uptime:
          type: integer
          example: 3600
          description: Service uptime in seconds
        checks:
          type: object
          description: Detailed health checks
          additionalProperties:
            type: object
            properties:
              status:
                type: string
                enum:
                - ok
                - degraded
                - critical
              message:
                type: string
              response_time:
                type: integer
                description: Response time in milliseconds
    GuildListResponse:
      type: object
      required:
      - guilds
      - pagination
      properties:
        guilds:
          type: array
          items:
            $ref: '#/components/schemas/GuildSummary'
        pagination:
          type: object
          required:
          - page
          - limit
          - total_count
          - total_pages
          properties:
            page:
              type: integer
            limit:
              type: integer
            total_count:
              type: integer
            total_pages:
              type: integer
      description: 'BACKEND NOTE: Guild list response optimized for discovery UI.
        Paginated results prevent large payloads.'
    GuildSummary:
      type: object
      required:
      - guild_id
      - name
      - level
      - member_count
      properties:
        guild_id:
          type: string
          format: uuid
        name:
          type: string
          maxLength: 50
        level:
          type: integer
          minimum: 1
        member_count:
          type: integer
          minimum: 1
        reputation:
          type: integer
          minimum: 0
        activity_status:
          type: string
          enum:
          - active
          - recruiting
          - maintenance
          - disbanding
        recruitment_open:
          type: boolean
        description:
          type: string
          maxLength: 500
        created_at:
          type: string
          format: date-time
      description: 'BACKEND NOTE: Guild summary optimized for listing performance.
        Minimal fields for search and discovery.'
    Guild:
      type: object
      required:
      - guild_id
      - name
      - level
      - leader_id
      - created_at
      properties:
        guild_id:
          type: string
          format: uuid
        name:
          type: string
          minLength: 3
          maxLength: 50
        description:
          type: string
          maxLength: 1000
        level:
          type: integer
          minimum: 1
          default: 1
        experience_points:
          type: integer
          minimum: 0
          default: 0
        reputation:
          type: integer
          minimum: 0
          default: 0
        leader_id:
          type: string
          format: uuid
        member_count:
          type: integer
          minimum: 1
          maximum: 1000
        max_members:
          type: integer
          minimum: 1
          maximum: 1000
          default: 100
        activity_status:
          type: string
          enum:
          - active
          - recruiting
          - maintenance
          - disbanding
          default: active
        recruitment_open:
          type: boolean
          default: true
        motd:
          type: string
          maxLength: 500
          description: Message of the day
        requirements:
          $ref: '#/components/schemas/GuildRequirements'
        statistics:
          $ref: '#/components/schemas/GuildStatistics'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      description: 'BACKEND NOTE: Guild data structure optimized for MMOFPS performance.
        Fields ordered for struct alignment (large  small). Expected memory savings:
        30-50%.'
    GuildRequirements:
      type: object
      properties:
        min_level:
          type: integer
          minimum: 1
          default: 1
        max_level:
          type: integer
          minimum: 1
        reputation_required:
          type: integer
          minimum: 0
          default: 0
        application_required:
          type: boolean
          default: false
        approval_required:
          type: boolean
          default: true
      description: 'BACKEND NOTE: Guild requirements optimized for fast validation.
        Boolean flags enable efficient permission checks.'
    GuildStatistics:
      type: object
      properties:
        total_experience_gained:
          type: integer
          minimum: 0
        quests_completed:
          type: integer
          minimum: 0
        pvp_wins:
          type: integer
          minimum: 0
        pvp_losses:
          type: integer
          minimum: 0
        tournaments_won:
          type: integer
          minimum: 0
        average_member_level:
          type: number
          format: float
        last_activity:
          type: string
          format: date-time
      description: 'BACKEND NOTE: Guild statistics optimized for ranking calculations.
        Integer fields enable fast sorting and aggregation.'
    CreateGuildRequest:
      type: object
      required:
      - name
      properties:
        name:
          type: string
          minLength: 3
          maxLength: 50
          description: Guild name (must be unique)
        description:
          type: string
          maxLength: 1000
          description: Guild description
        max_members:
          type: integer
          minimum: 5
          maximum: 1000
          default: 100
        recruitment_open:
          type: boolean
          default: true
        requirements:
          $ref: '#/components/schemas/GuildRequirements'
      description: 'BACKEND NOTE: Guild creation request optimized for validation.
        Minimal required fields reduce input overhead.'
    UpdateGuildRequest:
      type: object
      properties:
        description:
          type: string
          maxLength: 1000
        recruitment_open:
          type: boolean
        motd:
          type: string
          maxLength: 500
        requirements:
          $ref: '#/components/schemas/GuildRequirements'
      description: 'BACKEND NOTE: Guild update request supports partial updates. Optional
        fields enable flexible configuration changes.'
    GuildResponse:
      type: object
      required:
      - guild
      properties:
        guild:
          $ref: '#/components/schemas/Guild'
      description: 'BACKEND NOTE: Guild response optimized for single-entity operations.
        Consistent wrapper pattern across all guild endpoints.'
    GuildMembersResponse:
      type: object
      required:
      - members
      - pagination
      properties:
        members:
          type: array
          items:
            $ref: '#/components/schemas/GuildMember'
        pagination:
          type: object
          required:
          - page
          - limit
          - total_count
          properties:
            page:
              type: integer
            limit:
              type: integer
            total_count:
              type: integer
      description: 'BACKEND NOTE: Guild members response optimized for roster management.
        Paginated for large guilds with efficient member lookup.'
    GuildMember:
      type: object
      required:
      - user_id
      - username
      - role
      - joined_at
      properties:
        user_id:
          type: string
          format: uuid
        username:
          type: string
          maxLength: 50
        role:
          type: string
          enum:
          - leader
          - officer
          - veteran
          - member
          - recruit
        permissions:
          type: array
          items:
            type: string
            enum:
            - invite_members
            - kick_members
            - manage_bank
            - manage_settings
            - send_announcements
          description: Specific permissions granted to this member
        level:
          type: integer
          minimum: 1
        contribution_points:
          type: integer
          minimum: 0
        joined_at:
          type: string
          format: date-time
        last_active:
          type: string
          format: date-time
        online_status:
          type: string
          enum:
          - online
          - offline
          - away
      description: 'BACKEND NOTE: Guild member data optimized for permission checks.
        Role enums enable fast hierarchical comparisons.'
    InviteToGuildRequest:
      type: object
      required:
      - player_id
      properties:
        player_id:
          type: string
          format: uuid
        message:
          type: string
          maxLength: 500
          description: Optional invitation message
        initial_role:
          type: string
          enum:
          - member
          - recruit
          default: recruit
      description: 'BACKEND NOTE: Guild invitation request optimized for bulk operations.
        Optional fields reduce required input for mass invitations.'
    GuildInvitationResponse:
      type: object
      required:
      - invitation_id
      - expires_at
      properties:
        invitation_id:
          type: string
          format: uuid
        player_id:
          type: string
          format: uuid
        expires_at:
          type: string
          format: date-time
        initial_role:
          type: string
          enum:
          - member
          - recruit
      description: 'BACKEND NOTE: Invitation response optimized for tracking. Minimal
        data for invitation management and expiry handling.'
    UpdateGuildMemberRequest:
      type: object
      required:
      - role
      properties:
        role:
          type: string
          enum:
          - leader
          - officer
          - veteran
          - member
          - recruit
        permissions:
          type: array
          items:
            type: string
            enum:
            - invite_members
            - kick_members
            - manage_bank
            - manage_settings
            - send_announcements
      description: 'BACKEND NOTE: Member update request optimized for role management.
        Permission arrays enable granular access control.'
    GuildMemberResponse:
      type: object
      required:
      - member
      properties:
        member:
          $ref: '#/components/schemas/GuildMember'
      description: 'BACKEND NOTE: Member response optimized for single operations.
        Consistent with other entity response patterns.'
    GuildBankResponse:
      type: object
      required:
      - items
      - currency
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/GuildBankItem'
        currency:
          type: object
          additionalProperties:
            type: integer
            minimum: 0
          description: Currency balances by type
        capacity_used:
          type: integer
          minimum: 0
        capacity_total:
          type: integer
          minimum: 0
      description: 'BACKEND NOTE: Guild bank response optimized for inventory management.
        Separate currency and item arrays enable efficient querying.'
    GuildBankItem:
      type: object
      required:
      - item_id
      - quantity
      properties:
        item_id:
          type: string
          format: uuid
        item_name:
          type: string
        quantity:
          type: integer
          minimum: 1
        quality:
          type: integer
          minimum: 1
          maximum: 100
        deposited_by:
          type: string
          format: uuid
        deposited_at:
          type: string
          format: date-time
      description: 'BACKEND NOTE: Bank item data optimized for inventory operations.
        Quality and quantity fields enable efficient filtering.'
    GuildBankDepositRequest:
      type: object
      required:
      - item_type
      - item_id
      - quantity
      properties:
        item_type:
          type: string
          enum:
          - item
          - currency
        item_id:
          type: string
          format: uuid
        quantity:
          type: integer
          minimum: 1
        currency_type:
          type: string
          description: Required if item_type is currency
      description: 'BACKEND NOTE: Bank deposit request optimized for validation. Item
        vs currency distinction enables proper handling.'
    GuildBankTransactionResponse:
      type: object
      required:
      - transaction_id
      - transaction_type
      properties:
        transaction_id:
          type: string
          format: uuid
        transaction_type:
          type: string
          enum:
          - deposit
          - withdrawal
        item_type:
          type: string
          enum:
          - item
          - currency
        item_id:
          type: string
          format: uuid
        quantity:
          type: integer
        currency_type:
          type: string
        processed_at:
          type: string
          format: date-time
      description: 'BACKEND NOTE: Bank transaction response optimized for audit trails.
        Transaction details enable proper financial tracking.'
    GuildRankingsResponse:
      type: object
      required:
      - rankings
      - pagination
      properties:
        rankings:
          type: array
          items:
            $ref: '#/components/schemas/GuildRanking'
        pagination:
          type: object
          required:
          - page
          - limit
          - total_count
          properties:
            page:
              type: integer
            limit:
              type: integer
            total_count:
              type: integer
        category:
          type: string
        time_period:
          type: string
      description: 'BACKEND NOTE: Guild rankings response optimized for leaderboard
        display. Cached results reduce database load on popular categories.'
    GuildRanking:
      type: object
      required:
      - guild_id
      - name
      - rank
      - score
      properties:
        guild_id:
          type: string
          format: uuid
        name:
          type: string
        rank:
          type: integer
          minimum: 1
        score:
          type: integer
          minimum: 0
        previous_rank:
          type: integer
          minimum: 1
        rank_change:
          type: integer
          description: Positive for rank improvement, negative for decline
        level:
          type: integer
          minimum: 1
        member_count:
          type: integer
          minimum: 1
      description: 'BACKEND NOTE: Guild ranking data optimized for leaderboard calculations.
        Rank change tracking enables trend analysis.'
    DetailedHealthResponse:
      allOf:
      - $ref: '#/components/schemas/HealthResponse'
      - type: object
        properties:
          dependencies:
            type: object
            description: Health status of service dependencies
            properties:
              database:
                $ref: '#/components/schemas/HealthResponse'
              redis:
                $ref: '#/components/schemas/HealthResponse'
              external_services:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                      example: payment-service
                    status:
                      type: string
                      enum:
                      - ok
                      - degraded
                      - critical
                    response_time:
                      type: integer
          metrics:
            type: object
            description: Service performance metrics
            properties:
              active_connections:
                type: integer
                example: 150
              requests_per_second:
                type: number
                example: 45.2
              average_response_time:
                type: integer
                example: 25
              error_rate:
                type: number
                example: 0.001
    HealthBatchRequest:
      type: object
      properties:
        services:
          type: array
          items:
            type: string
            example: database
          description: List of services to check
        timeout:
          type: integer
          minimum: 1
          maximum: 30
          default: 5
          description: Timeout for each health check in seconds
    HealthBatchResponse:
      type: object
      properties:
        overall_status:
          type: string
          enum:
          - ok
          - degraded
          - critical
          example: ok
          description: Overall health status across all checked services
        timestamp:
          type: string
          format: date-time
          example: '2024-01-15T10:30:00Z'
        results:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/HealthResponse'
          description: Health results for each service
    InfrastructureEntity:
      type: object
      required:
      - id
      - created_at
      - updated_at
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier for infrastructure entity
          example: f47ac10b-58cc-4372-a567-0e02b2c3d479
        created_at:
          type: string
          format: date-time
          description: Entity creation timestamp
          example: '2024-01-15T10:30:00Z'
        updated_at:
          type: string
          format: date-time
          description: Last modification timestamp
          example: '2024-01-15T14:20:00Z'
        version:
          type: integer
          minimum: 1
          description: Optimistic locking version for concurrent operations
          example: 1
    ErrorResponse:
      type: object
      required:
      - code
      - message
      properties:
        code:
          type: integer
          minimum: 100
          maximum: 599
          example: 400
        message:
          type: string
          example: Bad request
        details:
          type: object
          description: Additional error details
    BaseEntity:
      type: object
      required:
      - id
      - created_at
      - updated_at
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier
          example: f47ac10b-58cc-4372-a567-0e02b2c3d479
        created_at:
          type: string
          format: date-time
          description: Creation timestamp
          example: '2024-01-15T10:30:00Z'
        updated_at:
          type: string
          format: date-time
          description: Last modification timestamp
          example: '2024-01-15T14:20:00Z'
    OptimisticLock:
      type: object
      properties:
        version:
          type: integer
          minimum: 1
          description: Version for optimistic locking
          example: 1
    UserAccountEntity:
      allOf:
      - $ref: '#/components/schemas/InfrastructureEntity'
      - type: object
        required:
        - username
        - email
        - account_status
        - registration_method
        properties:
          username:
            type: string
            minLength: 3
            maxLength: 30
            pattern: ^[a-zA-Z0-9_-]+$
            description: Unique username for login
            example: nightrunner2077
          email:
            type: string
            format: email
            description: Primary email address
            example: nightrunner@necpgame.com
          email_verified:
            type: boolean
            description: Whether email is verified
            example: true
          email_verification_token:
            type: string
            description: Token for email verification
            example: abc123def456
          password_hash:
            type: string
            description: Bcrypt password hash
            example: $2b$10$...
          account_status:
            type: string
            enum:
            - active
            - suspended
            - banned
            - pending_verification
            - deactivated
            description: Account status
            example: active
          registration_method:
            type: string
            enum:
            - email_password
            - google_oauth
            - discord_oauth
            - steam_oauth
            - guest
            description: How user registered
            example: email_password
          registration_ip:
            type: string
            description: IP address used during registration
            example: 192.168.1.100
          last_login_ip:
            type: string
            description: IP address of last login
            example: 10.0.0.50
          last_login_at:
            type: string
            format: date-time
            description: Timestamp of last successful login
            example: '2024-01-15T14:20:00Z'
          login_count:
            type: integer
            minimum: 0
            description: Total number of logins
            example: 147
          failed_login_attempts:
            type: integer
            minimum: 0
            description: Recent failed login attempts
            example: 0
          account_locked_until:
            type: string
            format: date-time
            description: When account lock expires
            example: '2024-01-15T16:00:00Z'
          two_factor_enabled:
            type: boolean
            description: Whether 2FA is enabled
            example: true
          two_factor_secret:
            type: string
            description: TOTP secret for 2FA
            example: JBSWY3DPEHPK3PXP
          recovery_email:
            type: string
            format: email
            description: Backup email for account recovery
            example: backup@necpgame.com
          preferred_language:
            type: string
            enum:
            - en
            - es
            - zh
            - ja
            - ru
            - de
            - fr
            - pl
            - ko
            - pt
            description: User's preferred language
            example: en
    SessionEntity:
      allOf:
      - $ref: '#/components/schemas/InfrastructureEntity'
      - type: object
        required:
        - user_id
        - session_token
        - ip_address
        - user_agent
        - expires_at
        properties:
          user_id:
            type: string
            format: uuid
            description: User this session belongs to
            example: a1b2c3d4-e5f6-7890-abcd-ef1234567890
          session_token:
            type: string
            minLength: 32
            maxLength: 128
            description: Unique session identifier/token
            example: abc123def456ghi789jkl012mno345pqr678stu901vwx
          refresh_token:
            type: string
            minLength: 32
            maxLength: 128
            description: Token for refreshing session
            example: yz234abc567def890ghi123jkl456mno789pqr012stu
          ip_address:
            type: string
            description: Client IP address
            example: 192.168.1.100
          user_agent:
            type: string
            description: Client user agent string
            example: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36
          device_fingerprint:
            type: string
            description: Unique device identifier
            example: fp_abcdef1234567890
          location:
            type: string
            description: Approximate location based on IP
            example: New York, US
          expires_at:
            type: string
            format: date-time
            description: When session expires
            example: '2024-01-15T16:20:00Z'
          is_active:
            type: boolean
            description: Whether session is currently active
            example: true
          last_activity_at:
            type: string
            format: date-time
            description: Last user activity in this session
            example: '2024-01-15T15:45:00Z'
          security_level:
            type: string
            enum:
            - standard
            - elevated
            - maximum
            description: Security level of session
            example: standard
          session_metadata:
            type: object
            description: Additional session data
            properties:
              game_version:
                type: string
                description: Client game version
                example: 1.2.3
              platform:
                type: string
                enum:
                - windows
                - macos
                - linux
                - ios
                - android
                - web
                description: Client platform
                example: windows
              vpn_detected:
                type: boolean
                description: Whether VPN usage was detected
                example: false
    AuditLogEntity:
      allOf:
      - $ref: '#/components/schemas/InfrastructureEntity'
      - type: object
        required:
        - event_type
        - actor_id
        - resource_type
        - action
        - severity
        properties:
          event_type:
            type: string
            enum:
            - user_action
            - system_event
            - security_event
            - admin_action
            - api_call
            description: Category of audit event
            example: user_action
          actor_id:
            type: string
            format: uuid
            description: User/system that performed the action
            example: b2c3d4e5-f6g7-8901-bcde-f23456789012
          actor_type:
            type: string
            enum:
            - user
            - system
            - admin
            - api_client
            description: Type of actor
            example: user
          resource_type:
            type: string
            enum:
            - user
            - session
            - character
            - guild
            - item
            - transaction
            - quest
            - chat
            - file
            description: Type of resource affected
            example: character
          resource_id:
            type: string
            format: uuid
            description: Specific resource that was affected
            example: c3d4e5f6-g7h8-9012-cdef-345678901234
          action:
            type: string
            enum:
            - create
            - read
            - update
            - delete
            - login
            - logout
            - ban
            - unban
            - transfer
            - execute
            description: Action performed
            example: update
          old_values:
            type: object
            description: Previous state of modified fields
            example:
              level: 24
              experience: 12000
          new_values:
            type: object
            description: New state of modified fields
            example:
              level: 25
              experience: 12500
          severity:
            type: string
            enum:
            - low
            - medium
            - high
            - critical
            description: Security/impact severity
            example: low
          ip_address:
            type: string
            description: IP address of the actor
            example: 192.168.1.100
          user_agent:
            type: string
            description: User agent of the actor
            example: NECPGAME Client v1.2.3
          location:
            type: string
            description: Approximate location
            example: Night City, NC
          success:
            type: boolean
            description: Whether the action succeeded
            example: true
          error_message:
            type: string
            description: Error message if action failed
            example: Insufficient permissions
          metadata:
            type: object
            description: Additional audit data
            properties:
              request_id:
                type: string
                description: Unique request identifier
                example: req_abc123def456
              session_id:
                type: string
                format: uuid
                description: Associated session ID
                example: d4e5f6g7-h8i9-0123-def0-456789012345
              api_endpoint:
                type: string
                description: API endpoint called
                example: /api/v1/characters/upgrade
              response_time_ms:
                type: integer
                description: API response time
                example: 45
    ApiKeyEntity:
      allOf:
      - $ref: '#/components/schemas/InfrastructureEntity'
      - type: object
        required:
        - owner_id
        - name
        - key_hash
        - permissions
        - status
        properties:
          owner_id:
            type: string
            format: uuid
            description: User or service that owns this API key
            example: e5f6g7h8-i9j0-1234-ef01-567890123456
          name:
            type: string
            minLength: 1
            maxLength: 50
            description: Human-readable name for the key
            example: Mobile App Key
          description:
            type: string
            maxLength: 200
            description: Description of key usage
            example: API key for mobile application authentication
          key_hash:
            type: string
            description: SHA-256 hash of the actual API key
            example: a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3
          key_prefix:
            type: string
            minLength: 8
            maxLength: 8
            description: First 8 characters of API key for identification
            example: ncp_1a2b
          permissions:
            type: array
            items:
              type: string
              enum:
              - read_user
              - write_user
              - read_character
              - write_character
              - read_inventory
              - write_inventory
              - admin
            description: Granted permissions
            example:
            - read_user
            - read_character
            - read_inventory
          status:
            type: string
            enum:
            - active
            - suspended
            - revoked
            - expired
            description: API key status
            example: active
          expires_at:
            type: string
            format: date-time
            description: When key expires (null = never)
            example: '2025-01-15T10:30:00Z'
          last_used_at:
            type: string
            format: date-time
            description: Last time key was used
            example: '2024-01-15T14:20:00Z'
          usage_count:
            type: integer
            minimum: 0
            description: Total API calls made with this key
            example: 15420
          rate_limit:
            type: integer
            minimum: 1
            description: Requests per minute allowed
            example: 60
          allowed_ips:
            type: array
            items:
              type: string
            description: IP addresses allowed to use this key
            example:
            - 192.168.1.0/24
            - 10.0.0.1
          metadata:
            type: object
            description: Additional key metadata
            properties:
              created_by:
                type: string
                format: uuid
                description: User who created this key
                example: f6g7h8i9-j0k1-2345-f012-678901234567
              application:
                type: string
                description: Application using this key
                example: NECPGAME Mobile App
              environment:
                type: string
                enum:
                - development
                - staging
                - production
                description: Environment this key is for
                example: production
    ConfigurationEntity:
      allOf:
      - $ref: '#/components/schemas/InfrastructureEntity'
      - type: object
        required:
        - config_key
        - config_value
        - config_type
        - environment
        properties:
          config_key:
            type: string
            minLength: 1
            maxLength: 100
            pattern: ^[a-zA-Z0-9_\-\.]+$
            description: Configuration key
            example: game.max_players_per_server
          config_value:
            type: string
            description: Configuration value (stored as string)
            example: '1000'
          config_type:
            type: string
            enum:
            - string
            - integer
            - float
            - boolean
            - json
            description: Data type of the value
            example: integer
          environment:
            type: string
            enum:
            - development
            - staging
            - production
            - all
            description: Environment this config applies to
            example: production
          description:
            type: string
            maxLength: 500
            description: Description of what this config controls
            example: Maximum number of players allowed per game server
          default_value:
            type: string
            description: Default value if not set
            example: '500'
          validation_rules:
            type: object
            description: Validation rules for the value
            properties:
              min_value:
                type: number
                description: Minimum allowed value
                example: 1
              max_value:
                type: number
                description: Maximum allowed value
                example: 10000
              allowed_values:
                type: array
                items:
                  type: string
                description: List of allowed values
                example:
                - '100'
                - '500'
                - '1000'
                - '2000'
          is_encrypted:
            type: boolean
            description: Whether value is encrypted
            example: false
          last_modified_by:
            type: string
            format: uuid
            description: User who last modified this config
            example: g7h8i9j0-k1l2-3456-0123-456789012345
          requires_restart:
            type: boolean
            description: Whether server restart is required after change
            example: true
    ServiceHealthEntity:
      allOf:
      - $ref: '#/components/schemas/InfrastructureEntity'
      - type: object
        required:
        - service_name
        - status
        - response_time_ms
        - timestamp
        properties:
          service_name:
            type: string
            minLength: 1
            maxLength: 50
            description: Name of the service being monitored
            example: auth-service
          status:
            type: string
            enum:
            - healthy
            - degraded
            - unhealthy
            - down
            - maintenance
            description: Current health status
            example: healthy
          response_time_ms:
            type: integer
            minimum: 0
            description: Response time in milliseconds
            example: 45
          timestamp:
            type: string
            format: date-time
            description: When this health check was performed
            example: '2024-01-15T15:30:00Z'
          uptime_seconds:
            type: integer
            minimum: 0
            description: Service uptime in seconds
            example: 86400
          memory_usage_mb:
            type: integer
            minimum: 0
            description: Current memory usage in MB
            example: 256
          memory_usage_percent:
            type: number
            minimum: 0
            maximum: 100
            description: Memory usage percentage
            example: 23.5
          cpu_usage_percent:
            type: number
            minimum: 0
            maximum: 100
            description: CPU usage percentage
            example: 15.2
          active_connections:
            type: integer
            minimum: 0
            description: Number of active connections
            example: 1250
          queue_depth:
            type: integer
            minimum: 0
            description: Number of queued requests
            example: 5
          error_rate_percent:
            type: number
            minimum: 0
            maximum: 100
            description: Error rate percentage
            example: 0.1
          version:
            type: string
            description: Service version
            example: 1.2.3
          environment:
            type: string
            enum:
            - development
            - staging
            - production
            description: Deployment environment
            example: production
          checks:
            type: array
            items:
              $ref: '#/components/schemas/HealthCheck'
            description: Detailed health checks
    HealthCheck:
      type: object
      required:
      - check_name
      - status
      - response_time_ms
      properties:
        check_name:
          type: string
          minLength: 1
          maxLength: 50
          description: Name of the health check
          example: database_connection
        status:
          type: string
          enum:
          - pass
          - warn
          - fail
          description: Health check result
          example: pass
        response_time_ms:
          type: integer
          minimum: 0
          description: Check response time
          example: 12
        message:
          type: string
          maxLength: 200
          description: Check result message
          example: Database connection successful
        details:
          type: object
          description: Additional check details
          example:
            connection_pool_size: 10
            active_connections: 3
    NotificationQueueEntity:
      allOf:
      - $ref: '#/components/schemas/InfrastructureEntity'
      - type: object
        required:
        - notification_type
        - recipient_id
        - content
        - priority
        - status
        properties:
          notification_type:
            type: string
            enum:
            - email
            - push
            - in_game
            - sms
            - webhook
            description: Type of notification
            example: email
          recipient_id:
            type: string
            format: uuid
            description: User receiving the notification
            example: a1b2c3d4-e5f6-7890-abcd-ef1234567890
          recipient_contact:
            type: string
            description: Contact info (email, phone, etc.)
            example: user@necpgame.com
          content:
            type: object
            description: Notification content
            required:
            - subject
            - body
            properties:
              subject:
                type: string
                minLength: 1
                maxLength: 100
                description: Notification subject/title
                example: Quest Completed!
              body:
                type: string
                minLength: 1
                maxLength: 2000
                description: Notification body/content
                example: Congratulations! You have completed the 'Corporate Espionage'
                  quest.
              template_id:
                type: string
                description: Template used for notification
                example: quest_completion_v2
          priority:
            type: string
            enum:
            - low
            - normal
            - high
            - critical
            description: Notification priority
            example: normal
          status:
            type: string
            enum:
            - queued
            - processing
            - sent
            - delivered
            - failed
            - cancelled
            description: Delivery status
            example: queued
          scheduled_for:
            type: string
            format: date-time
            description: When to send notification (null = immediate)
            example: '2024-01-15T16:00:00Z'
          sent_at:
            type: string
            format: date-time
            description: When notification was sent
            example: '2024-01-15T15:45:00Z'
          delivered_at:
            type: string
            format: date-time
            description: When notification was delivered
            example: '2024-01-15T15:45:02Z'
          retry_count:
            type: integer
            minimum: 0
            description: Number of delivery attempts
            example: 0
          max_retries:
            type: integer
            minimum: 0
            maximum: 5
            description: Maximum retry attempts
            example: 3
          error_message:
            type: string
            description: Delivery error message
            example: SMTP server timeout
          metadata:
            type: object
            description: Additional notification data
            properties:
              campaign_id:
                type: string
                description: Marketing campaign ID
                example: quest_reminder_2024
              source_service:
                type: string
                description: Service that triggered notification
                example: quest-service
              user_preferences:
                type: object
                description: User's notification preferences
                example:
                  email_enabled: true
                  push_enabled: false
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: '**JWT Bearer Authentication**


        Use JWT tokens obtained from `/auth/login` or `/auth/refresh`.


        **Token Format:** `Authorization: Bearer <jwt_token>`


        **Token Expiration:** 15 minutes for access tokens, 7 days for refresh tokens


        **Security Features:**

        - RS256 signature verification

        - Token blacklisting on logout

        - Rate limiting per user

        - Geographic restrictions (optional)

        '
    ApiKeyAuth:
      $ref: ../common/security/security.yaml#/components/security/security.yaml#/components/securitySchemes/ApiKeyAuth
    ServiceAuth:
      $ref: ../common/security/security.yaml#/components/securitySchemes/ServiceAuth
