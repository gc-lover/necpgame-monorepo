package api

import (
	"time"

	"github.com/google/uuid"
)

// Custom types not generated by ogen

type GuildBank struct {
	ID             string    `json:"id"`
	GuildID        string    `json:"guildId"`
	Version        int       `json:"version"`
	CurrencyType   string    `json:"currencyType"`
	Amount         int64     `json:"amount"`
	LastTransaction time.Time `json:"lastTransaction"`
}

type GuildEvent struct {
	ID               string     `json:"id"`
	GuildID          string     `json:"guildId"`
	EventType        string     `json:"eventType"`
	Title            string     `json:"title"`
	Description      OptString  `json:"description"`
	ScheduledAt      time.Time  `json:"scheduledAt"`
	DurationMinutes  int        `json:"durationMinutes"`
	MaxParticipants  OptInt     `json:"maxParticipants"`
	CurrentParticipants int     `json:"currentParticipants"`
	Status           string     `json:"status"`
	CreatedBy        string     `json:"createdBy"`
	CreatedAt        OptDateTime `json:"createdAt"`
}

type GuildRelationship struct {
	ID               string     `json:"id"`
	GuildAID         string     `json:"guildAId"`
	GuildBID         string     `json:"guildBId"`
	RelationshipType string     `json:"relationshipType"`
	EstablishedAt    time.Time  `json:"establishedAt"`
	ExpiresAt        *time.Time `json:"expiresAt,omitempty"`
}

type GuildApplicationResponse struct {
	ID          string     `json:"id"`
	UserID      string     `json:"userId"`
	GuildID     string     `json:"guildId"`
	Message     OptString  `json:"message"`
	Status      string     `json:"status"`
	AppliedAt   OptDateTime `json:"appliedAt"`
	ReviewedAt  OptDateTime `json:"reviewedAt,omitempty"`
	ReviewedBy  OptString  `json:"reviewedBy,omitempty"`
	CreatedAt   OptDateTime `json:"createdAt"`
	UpdatedAt   OptDateTime `json:"updatedAt"`
}

type GuildBankResponse struct {
	Bank []*GuildBank `json:"bank"`
}


type GuildEventResponse struct {
	Event *GuildEvent `json:"event,omitempty"`
}

type GuildEventListResponse struct {
	Events []*GuildEvent `json:"events"`
}

type GuildRelationshipResponse struct {
	Relationship *GuildRelationship `json:"relationship,omitempty"`
}

type GuildRelationshipListResponse struct {
	Relationships []*GuildRelationship `json:"relationships"`
}

// Missing API types for health batch operations
type HealthBatchRequest struct {
	Services []string `json:"services"`
}

type HealthBatchResponse struct {
	Results map[string]*HealthResponse `json:"results"`
}

// Missing API types for guild member operations
type UpdateGuildMemberRequest struct {
	Role        GuildMemberRole `json:"role"`
	Permissions []string        `json:"permissions,omitempty"`
}

type GuildServiceUpdateGuildMemberParams struct {
	GuildId  string `json:"guildId"`
	PlayerId string `json:"playerId"`
}

type GuildServiceRemoveGuildMemberParams struct {
	GuildId  string `json:"guildId"`
	PlayerId string `json:"playerId"`
}

type GuildServiceGetGuildBankParams struct {
	GuildId string `json:"guildId"`
}

type GuildServiceGetGuildBankRes struct {
	Response GuildBank `json:"response"`
}

type GuildServiceDeleteGuildParams struct {
	GuildId string `json:"guildId"`
}

// Helper functions for UUID conversion
func uuidToString(id uuid.UUID) string {
	return id.String()
}

func stringToUUID(id string) uuid.UUID {
	result, _ := uuid.Parse(id)
	return result
}