// Code generated by OpenAPI Generator (https://openapi-generator.tech); DO NOT EDIT.

/*
 * Inventory Service API - Enterprise-Grade Player Inventory Management
 *
 * **Enterprise-Grade Inventory Service API for NECPGAME**  Comprehensive player inventory system managing items, equipment, consumables, and inventory operations for the NECPGAME ecosystem with high-performance item management and trading integration.  ## Key Features - **Enterprise-grade architecture** with proper domain separation - **Backend optimization hints** for struct alignment and performance (30-50% memory savings) - **Complete validation** with redocly and ogen code generation - **Security-first approach** with JWT authentication and item validation - **Performance-optimized** response structures with field ordering - **Comprehensive error handling** with proper HTTP status codes  ## Domain Purpose The Inventory Service manages all aspects of player inventory in NECPGAME including item storage, equipment management, consumable usage, inventory operations, and integration with trading systems. Supports high-throughput item operations critical for gameplay.  ## Performance Targets - P99 Latency: <25ms for inventory operations (HOT PATH) - P99 Latency: <75ms for complex inventory operations - Memory: <15KB per active inventory session - Concurrent users: 50,000+ simultaneous inventory operations - Item operations: 5000+ operations/minute - Data consistency: Event-sourced with CQRS patterns 
 *
 * API version: 1.0.0
 * Contact: api@necpgame.com
 */

package inventory-service-go

import (
	"encoding/json"
	"net/http"
	"strings"
	"time"

	"github.com/gorilla/mux"
)

// ExampleDomainAPIController binds http requests to an api service and writes the service results to the http response
type ExampleDomainAPIController struct {
	service ExampleDomainAPIServicer
	errorHandler ErrorHandler
}

// ExampleDomainAPIOption for how the controller is set up.
type ExampleDomainAPIOption func(*ExampleDomainAPIController)

// WithExampleDomainAPIErrorHandler inject ErrorHandler into controller
func WithExampleDomainAPIErrorHandler(h ErrorHandler) ExampleDomainAPIOption {
	return func(c *ExampleDomainAPIController) {
		c.errorHandler = h
	}
}

// NewExampleDomainAPIController creates a default api controller
func NewExampleDomainAPIController(s ExampleDomainAPIServicer, opts ...ExampleDomainAPIOption) *ExampleDomainAPIController {
	controller := &ExampleDomainAPIController{
		service:      s,
		errorHandler: DefaultErrorHandler,
	}

	for _, opt := range opts {
		opt(controller)
	}

	return controller
}

// Routes returns all the api routes for the ExampleDomainAPIController
func (c *ExampleDomainAPIController) Routes() Routes {
	return Routes{
		"ListExamples": Route{
			"ListExamples",
			strings.ToUpper("Get"),
			"/v1/inventory/examples",
			c.ListExamples,
		},
		"CreateExample": Route{
			"CreateExample",
			strings.ToUpper("Post"),
			"/v1/inventory/examples",
			c.CreateExample,
		},
		"GetExample": Route{
			"GetExample",
			strings.ToUpper("Get"),
			"/v1/inventory/examples/{example_id}",
			c.GetExample,
		},
		"UpdateExample": Route{
			"UpdateExample",
			strings.ToUpper("Put"),
			"/v1/inventory/examples/{example_id}",
			c.UpdateExample,
		},
		"DeleteExample": Route{
			"DeleteExample",
			strings.ToUpper("Delete"),
			"/v1/inventory/examples/{example_id}",
			c.DeleteExample,
		},
	}
}

// OrderedRoutes returns all the api routes in a deterministic order for the ExampleDomainAPIController
func (c *ExampleDomainAPIController) OrderedRoutes() []Route {
	return []Route{
		Route{
			"ListExamples",
			strings.ToUpper("Get"),
			"/v1/inventory/examples",
			c.ListExamples,
		},
		Route{
			"CreateExample",
			strings.ToUpper("Post"),
			"/v1/inventory/examples",
			c.CreateExample,
		},
		Route{
			"GetExample",
			strings.ToUpper("Get"),
			"/v1/inventory/examples/{example_id}",
			c.GetExample,
		},
		Route{
			"UpdateExample",
			strings.ToUpper("Put"),
			"/v1/inventory/examples/{example_id}",
			c.UpdateExample,
		},
		Route{
			"DeleteExample",
			strings.ToUpper("Delete"),
			"/v1/inventory/examples/{example_id}",
			c.DeleteExample,
		},
	}
}



// ListExamples - List examples with filtering and pagination
func (c *ExampleDomainAPIController) ListExamples(w http.ResponseWriter, r *http.Request) {
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	var pageParam int32
	if query.Has("page") {
		param, err := parseNumericParameter[int32](
			query.Get("page"),
			WithParse[int32](parseInt32),
			WithMinimum[int32](1),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "page", Err: err}, nil)
			return
		}

		pageParam = param
	} else {
		var param int32 = 1
		pageParam = param
	}
	var limitParam int32
	if query.Has("limit") {
		param, err := parseNumericParameter[int32](
			query.Get("limit"),
			WithParse[int32](parseInt32),
			WithMinimum[int32](1),
			WithMaximum[int32](100),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "limit", Err: err}, nil)
			return
		}

		limitParam = param
	} else {
		var param int32 = 20
		limitParam = param
	}
	var sortByParam string
	if query.Has("sort_by") {
		param := query.Get("sort_by")

		sortByParam = param
	} else {
		param := "created_at"
		sortByParam = param
	}
	var sortOrderParam string
	if query.Has("sort_order") {
		param := query.Get("sort_order")

		sortOrderParam = param
	} else {
		param := "desc"
		sortOrderParam = param
	}
	var filterStatusParam string
	if query.Has("filter_status") {
		param := query.Get("filter_status")

		filterStatusParam = param
	} else {
	}
	result, err := c.service.ListExamples(r.Context(), pageParam, limitParam, sortByParam, sortOrderParam, filterStatusParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// CreateExample - Create new example
func (c *ExampleDomainAPIController) CreateExample(w http.ResponseWriter, r *http.Request) {
	var createExampleRequestParam CreateExampleRequest
	d := json.NewDecoder(r.Body)
	d.DisallowUnknownFields()
	if err := d.Decode(&createExampleRequestParam); err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	if err := AssertCreateExampleRequestRequired(createExampleRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	if err := AssertCreateExampleRequestConstraints(createExampleRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	result, err := c.service.CreateExample(r.Context(), createExampleRequestParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// GetExample - Get specific example by ID
func (c *ExampleDomainAPIController) GetExample(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	exampleIdParam := params["example_id"]
	if exampleIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"example_id"}, nil)
		return
	}
	var includeRelatedParam bool
	if query.Has("include_related") {
		param, err := parseBoolParameter(
			query.Get("include_related"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "include_related", Err: err}, nil)
			return
		}

		includeRelatedParam = param
	} else {
		var param bool = false
		includeRelatedParam = param
	}
	ifNoneMatchParam := r.Header.Get("If-None-Match")
	ifModifiedSinceParam := r.Header.Get("If-Modified-Since")
	result, err := c.service.GetExample(r.Context(), exampleIdParam, includeRelatedParam, ifNoneMatchParam, ifModifiedSinceParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// UpdateExample - Update existing example
func (c *ExampleDomainAPIController) UpdateExample(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	exampleIdParam := params["example_id"]
	if exampleIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"example_id"}, nil)
		return
	}
	var updateExampleRequestParam UpdateExampleRequest
	d := json.NewDecoder(r.Body)
	d.DisallowUnknownFields()
	if err := d.Decode(&updateExampleRequestParam); err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	if err := AssertUpdateExampleRequestRequired(updateExampleRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	if err := AssertUpdateExampleRequestConstraints(updateExampleRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	ifMatchParam := r.Header.Get("If-Match")
	ifUnmodifiedSinceParam := r.Header.Get("If-Unmodified-Since")
	result, err := c.service.UpdateExample(r.Context(), exampleIdParam, updateExampleRequestParam, ifMatchParam, ifUnmodifiedSinceParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// DeleteExample - Delete example
func (c *ExampleDomainAPIController) DeleteExample(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	exampleIdParam := params["example_id"]
	if exampleIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"example_id"}, nil)
		return
	}
	result, err := c.service.DeleteExample(r.Context(), exampleIdParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}
