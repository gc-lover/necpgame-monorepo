// Code generated by ogen, DO NOT EDIT.

package api

import (
	"context"
)

// Handler handles operations described by OpenAPI v3 specification.
type Handler interface {
	// AddTemplateVariant implements addTemplateVariant operation.
	//
	// Add template variant.
	//
	// POST /templates/{template_id}/variants
	AddTemplateVariant(ctx context.Context, req *CreateVariantRequest, params AddTemplateVariantParams) (AddTemplateVariantRes, error)
	// CreateTemplate implements createTemplate operation.
	//
	// Create new story template.
	//
	// POST /templates
	CreateTemplate(ctx context.Context, req *CreateTemplateRequest) (CreateTemplateRes, error)
	// CreateVariable implements createVariable operation.
	//
	// Create variable rule.
	//
	// POST /variables
	CreateVariable(ctx context.Context, req *CreateVariableRequest) (CreateVariableRes, error)
	// DeleteTemplate implements deleteTemplate operation.
	//
	// Delete template.
	//
	// DELETE /templates/{template_id}
	DeleteTemplate(ctx context.Context, params DeleteTemplateParams) (DeleteTemplateRes, error)
	// DeleteTemplateVariant implements deleteTemplateVariant operation.
	//
	// Delete template variant.
	//
	// DELETE /templates/{template_id}/variants/{variant_id}
	DeleteTemplateVariant(ctx context.Context, params DeleteTemplateVariantParams) (DeleteTemplateVariantRes, error)
	// DeleteVariable implements deleteVariable operation.
	//
	// Delete variable rule.
	//
	// DELETE /variables/{variable_id}
	DeleteVariable(ctx context.Context, params DeleteVariableParams) (DeleteVariableRes, error)
	// GenerateLegend implements generateLegend operation.
	//
	// **HOT PATH ENDPOINT** - Optimized for real-time story generation
	// Expected performance: <1ms per request, zero allocations.
	//
	// POST /generate
	GenerateLegend(ctx context.Context, req *GenerateLegendRequest) (GenerateLegendRes, error)
	// GetActiveTemplates implements getActiveTemplates operation.
	//
	// **HOT PATH ENDPOINT** - Returns cached active templates
	// Expected performance: <100Î¼s per request.
	//
	// GET /templates/active
	GetActiveTemplates(ctx context.Context, params GetActiveTemplatesParams) (GetActiveTemplatesRes, error)
	// GetHealth implements getHealth operation.
	//
	// Health check endpoint.
	//
	// GET /health
	GetHealth(ctx context.Context) (GetHealthRes, error)
	// GetTemplate implements getTemplate operation.
	//
	// Get template by ID.
	//
	// GET /templates/{template_id}
	GetTemplate(ctx context.Context, params GetTemplateParams) (GetTemplateRes, error)
	// GetTemplateVariants implements getTemplateVariants operation.
	//
	// Get template variants.
	//
	// GET /templates/{template_id}/variants
	GetTemplateVariants(ctx context.Context, params GetTemplateVariantsParams) (GetTemplateVariantsRes, error)
	// GetTemplates implements getTemplates operation.
	//
	// Get all story templates.
	//
	// GET /templates
	GetTemplates(ctx context.Context, params GetTemplatesParams) (GetTemplatesRes, error)
	// GetVariable implements getVariable operation.
	//
	// Get variable by ID.
	//
	// GET /variables/{variable_id}
	GetVariable(ctx context.Context, params GetVariableParams) (GetVariableRes, error)
	// GetVariables implements getVariables operation.
	//
	// Get all variable rules.
	//
	// GET /variables
	GetVariables(ctx context.Context, params GetVariablesParams) (GetVariablesRes, error)
	// UpdateTemplate implements updateTemplate operation.
	//
	// Update template.
	//
	// PUT /templates/{template_id}
	UpdateTemplate(ctx context.Context, req *UpdateTemplateRequest, params UpdateTemplateParams) (UpdateTemplateRes, error)
	// UpdateTemplateVariant implements updateTemplateVariant operation.
	//
	// Update template variant.
	//
	// PUT /templates/{template_id}/variants/{variant_id}
	UpdateTemplateVariant(ctx context.Context, req *UpdateVariantRequest, params UpdateTemplateVariantParams) (UpdateTemplateVariantRes, error)
	// UpdateVariable implements updateVariable operation.
	//
	// Update variable rule.
	//
	// PUT /variables/{variable_id}
	UpdateVariable(ctx context.Context, req *UpdateVariableRequest, params UpdateVariableParams) (UpdateVariableRes, error)
	// ValidateTemplate implements validateTemplate operation.
	//
	// Validate template structure.
	//
	// POST /validate
	ValidateTemplate(ctx context.Context, req *ValidateTemplateRequest) (ValidateTemplateRes, error)
}

// Server implements http server based on OpenAPI v3 specification and
// calls Handler to handle requests.
type Server struct {
	h   Handler
	sec SecurityHandler
	baseServer
}

// NewServer creates new Server.
func NewServer(h Handler, sec SecurityHandler, opts ...ServerOption) (*Server, error) {
	s, err := newServerConfig(opts...).baseServer()
	if err != nil {
		return nil, err
	}
	return &Server{
		h:          h,
		sec:        sec,
		baseServer: s,
	}, nil
}
