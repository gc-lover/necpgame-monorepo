openapi: 3.0.3
info:
  title: Level Service API - Enterprise-Grade Domain Service
  description: '**Enterprise-Grade Level Management API for NECPGAME**

    This API manages character leveling, experience calculation, and progression systems
    for player characters in the Night City universe.

    ## Key Features

    - **Experience Calculation**: Dynamic XP rewards based on actions and difficulty
    - **Level Progression**: Automatic level advancement with stat bonuses - **Progression
    Analytics**: Player growth tracking and optimization - **Anti-Cheat Validation**:
    Experience gain validation and fraud detection - **Performance Optimized**: MMOFPS-grade
    performance with <25ms P99 latency - **Memory Efficient**: 30-50% memory savings
    for level data structures

    ## Domain Purpose

    The Level domain handles all character progression mechanics in Night City. Players
    advance through levels by gaining experience from combat, quests, exploration,
    and achievements, unlocking new abilities and improving stats.

    ## Performance Targets

    - P99 Latency: <25ms for level operations - Memory: <15KB per active character
    level data - Concurrent users: 50,000+ simultaneous level calculations - XP calculation:
    <10ms response time

    '
  version: 1.0.0
  contact:
    name: NECPGAME API Support
    url: https://necpgame.com/support
    email: api@necpgame.com
  license:
    name: MIT
servers:
- url: https://api.necpgame.com/v1/level
  description: Production server
- url: https://staging-api.necpgame.com/v1/level
  description: Staging server
- url: http://localhost:8080/api/v1/level
  description: Local development server
security:
- BearerAuth: []
tags:
- name: Level Management
  description: Character level and experience operations
- name: Health Monitoring
  description: System health and performance monitoring
paths:
  /health:
    get:
      summary: Health check endpoint
      operationId: levelServiceHealthCheck
      tags:
      - Health Monitoring
      responses:
        '200':
          $ref: '#/components/responses/OK'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /gameplay/level/calculate:
    post:
      summary: Calculate experience and level progression
      operationId: calculateLevelProgression
      tags:
      - Level Management
      security:
      - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CalculateLevelRequest'
      responses:
        '200':
          $ref: '#/components/responses/OK'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CalculateLevelResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /gameplay/level/{characterId}:
    get:
      summary: Get character level information
      operationId: getCharacterLevel
      tags:
      - Level Management
      security:
      - BearerAuth: []
      parameters:
      - name: characterId
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Character unique identifier
      responses:
        '200':
          $ref: '#/components/responses/OK'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CharacterLevelInfo'
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/Unauthorized'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      description: JWT Bearer token authentication
  responses:
    OK:
      description: Operation completed successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: true
              message:
                type: string
                example: Operation completed
    Created:
      description: Resource created successfully
      headers:
        Location:
          schema:
            type: string
            format: uri
          description: URI of the created resource
      content:
        application/json:
          schema:
            type: object
            properties:
              id:
                type: string
                format: uuid
                description: Unique identifier of created resource
              created_at:
                type: string
                format: date-time
                description: Creation timestamp
    Updated:
      description: Resource updated successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              id:
                type: string
                format: uuid
                description: Unique identifier of updated resource
              updated_at:
                type: string
                format: date-time
                description: Last modification timestamp
    Deleted:
      description: Resource deleted successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              id:
                type: string
                format: uuid
                description: Unique identifier of deleted resource
              deleted_at:
                type: string
                format: date-time
                description: Deletion timestamp
    BadRequest:
      description: Invalid request parameters
      content:
        application/json:
          schema:
            type: object
            required:
            - code
            - message
            properties:
              code:
                type: integer
                example: 500
                format: int32
                minimum: 100
                maximum: 599
              message:
                type: string
                example: Internal server error
                maxLength: 1000
              details:
                type: object
                description: Additional error details
            description: Standard error response format
    Unauthorized:
      description: Authentication required
      content:
        application/json:
          schema:
            type: object
            required:
            - code
            - message
            properties:
              code:
                type: integer
                example: 500
                format: int32
                minimum: 100
                maximum: 599
              message:
                type: string
                example: Internal server error
                maxLength: 1000
              details:
                type: object
                description: Additional error details
            description: Standard error response format
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            type: object
            required:
            - code
            - message
            properties:
              code:
                type: integer
                example: 500
                format: int32
                minimum: 100
                maximum: 599
              message:
                type: string
                example: Internal server error
                maxLength: 1000
              details:
                type: object
                description: Additional error details
            description: Standard error response format
    TooManyRequests:
      description: Too many requests - rate limit exceeded
      content:
        application/json:
          schema:
            allOf:
            - type: object
              required:
              - code
              - message
              properties:
                code:
                  type: integer
                  example: 500
                  format: int32
                  minimum: 100
                  maximum: 599
                message:
                  type: string
                  example: Internal server error
                  maxLength: 1000
                details:
                  type: object
                  description: Additional error details
              description: Standard error response format
            - type: object
              properties:
                retry_after:
                  type: integer
                  example: 60
                  description: Seconds to wait before retrying
    ServiceUnavailable:
      description: Service is temporarily unavailable
      content:
        application/json:
          schema:
            Error:
              type: object
              required:
              - code
              - message
              properties:
                code:
                  type: integer
                  example: 500
                  format: int32
                  minimum: 100
                  maximum: 599
                message:
                  type: string
                  example: Internal server error
                  maxLength: 1000
                details:
                  type: object
                  description: Additional error details
              description: Standard error response format
  schemas:
    Error:
      Error:
        type: object
        required:
        - code
        - message
        properties:
          code:
            type: integer
            example: 500
            format: int32
            minimum: 100
            maximum: 599
          message:
            type: string
            example: Internal server error
            maxLength: 1000
          details:
            type: object
            description: Additional error details
        description: Standard error response format
    HealthResponse:
      HealthResponse:
        type: object
        required:
        - status
        - timestamp
        properties:
          status:
            type: string
            enum:
            - healthy
            - degraded
            - unhealthy
            example: healthy
            maxLength: 255
          domain:
            type: string
            example: service-name
            maxLength: 255
          timestamp:
            type: string
            format: date-time
            example: '2025-12-28T10:00:00Z'
            maxLength: 255
          version:
            type: string
            example: 1.0.0
            maxLength: 50
          uptime_seconds:
            type: integer
            example: 3600
            minimum: 0
          active_connections:
            type: integer
            example: 1500
            minimum: 0
        description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
          Expected memory savings: 30-50%.'
    CalculateLevelRequest:
      type: object
      required:
      - character_id
      - experience_gained
      - source
      properties:
        character_id:
          type: string
          format: uuid
          description: Character gaining experience
        experience_gained:
          type: integer
          minimum: 0
          description: Amount of experience gained
        source:
          type: string
          enum:
          - combat
          - quest
          - exploration
          - achievement
          description: Source of experience gain
        difficulty_multiplier:
          type: number
          minimum: 0.1
          maximum: 5.0
          default: 1.0
          description: Difficulty-based experience multiplier
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).'
    CalculateLevelResponse:
      type: object
      required:
      - character_id
      - previous_level
      - new_level
      - experience_gained
      - total_experience
      - leveled_up
      properties:
        character_id:
          type: string
          format: uuid
          description: Character ID
        previous_level:
          type: integer
          minimum: 1
          description: Level before calculation
        new_level:
          type: integer
          minimum: 1
          description: Level after calculation
        experience_gained:
          type: integer
          minimum: 0
          description: Experience points gained
        total_experience:
          type: integer
          minimum: 0
          description: Total experience points
        experience_to_next:
          type: integer
          minimum: 0
          description: Experience needed for next level
        leveled_up:
          type: boolean
          description: Whether character leveled up
        stat_bonuses:
          type: object
          properties:
            health:
              type: integer
              minimum: 0
              description: Health bonus from level up
            stamina:
              type: integer
              minimum: 0
              description: Stamina bonus from level up
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).'
    CharacterLevelInfo:
      allOf:
      - allOf:
        - type: object
          required:
          - id
          - created_at
          - updated_at
          properties:
            id:
              type: string
              format: uuid
              description: Unique identifier (UUID v4)
              example: 123e4567-e89b-12d3-a456-426614174000
              maxLength: 36
            created_at:
              type: string
              format: date-time
              description: Creation timestamp (ISO 8601)
              example: '2025-12-28T10:00:00Z'
              maxLength: 30
            updated_at:
              type: string
              format: date-time
              description: Last modification timestamp (ISO 8601)
              example: '2025-12-28T10:30:00Z'
              maxLength: 30
          description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
            Memory savings: 30-50%. All domain entities should extend this.'
        - type: object
          required:
          - name
          - level
          properties:
            name:
              type: string
              description: Character display name
              example: V, the Mercenary
              maxLength: 100
            level:
              type: integer
              minimum: 1
              maximum: 50
              description: Character level
              example: 25
            experience:
              type: integer
              minimum: 0
              description: Current experience points
              example: 125000
            experience_to_next:
              type: integer
              minimum: 0
              description: Experience needed for next level
              example: 150000
        description: 'BACKEND NOTE: Base character entity. Memory-aligned for performance.'
      - type: object
        properties:
          current_level:
            type: integer
            minimum: 1
            maximum: 50
            description: Current character level
          total_experience:
            type: integer
            minimum: 0
            description: Total accumulated experience
          experience_to_next:
            type: integer
            minimum: 0
            description: Experience needed for next level
          level_progress:
            type: number
            minimum: 0
            maximum: 1
            description: Progress to next level (0-1)
      description: 'BACKEND NOTE: Domain inheritance from CharacterEntity + level-specific
        fields.'
    CharacterEntity:
      allOf:
      - type: object
        required:
        - id
        - created_at
        - updated_at
        properties:
          id:
            type: string
            format: uuid
            description: Unique identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          created_at:
            type: string
            format: date-time
            description: Creation timestamp (ISO 8601)
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          updated_at:
            type: string
            format: date-time
            description: Last modification timestamp (ISO 8601)
            example: '2025-12-28T10:30:00Z'
            maxLength: 30
        description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
          Memory savings: 30-50%. All domain entities should extend this.'
      - type: object
        required:
        - name
        - level
        properties:
          name:
            type: string
            description: Character display name
            example: V, the Mercenary
            maxLength: 100
          level:
            type: integer
            minimum: 1
            maximum: 50
            description: Character level
            example: 25
          experience:
            type: integer
            minimum: 0
            description: Current experience points
            example: 125000
          experience_to_next:
            type: integer
            minimum: 0
            description: Experience needed for next level
            example: 150000
      description: 'BACKEND NOTE: Base character entity. Memory-aligned for performance.'
    CharacterStats:
      type: object
      required:
      - health
      - max_health
      - stamina
      - max_stamina
      properties:
        health:
          type: integer
          minimum: 0
          description: Current health points
          example: 850
        max_health:
          type: integer
          minimum: 1
          description: Maximum health points
          example: 1000
        stamina:
          type: integer
          minimum: 0
          description: Current stamina points
          example: 75
        max_stamina:
          type: integer
          minimum: 1
          description: Maximum stamina points
          example: 100
        strength:
          type: integer
          minimum: 0
          maximum: 20
          description: Physical strength attribute
          example: 15
        dexterity:
          type: integer
          minimum: 0
          maximum: 20
          description: Agility and precision
          example: 18
        intelligence:
          type: integer
          minimum: 0
          maximum: 20
          description: Mental acuity and hacking
          example: 12
        cool:
          type: integer
          minimum: 0
          maximum: 20
          description: Composure under pressure
          example: 16
        tech:
          type: integer
          minimum: 0
          maximum: 20
          description: Technical aptitude
          example: 10
      description: 'BACKEND NOTE: Character attributes and vital stats.'
    ItemEntity:
      allOf:
      - type: object
        required:
        - id
        - created_at
        - updated_at
        properties:
          id:
            type: string
            format: uuid
            description: Unique identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          created_at:
            type: string
            format: date-time
            description: Creation timestamp (ISO 8601)
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          updated_at:
            type: string
            format: date-time
            description: Last modification timestamp (ISO 8601)
            example: '2025-12-28T10:30:00Z'
            maxLength: 30
        description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
          Memory savings: 30-50%. All domain entities should extend this.'
      - type: object
        required:
        - name
        - type
        - rarity
        properties:
          name:
            type: string
            description: Item display name
            example: Malorian Arms 3516
            maxLength: 100
          type:
            type: string
            enum:
            - weapon
            - armor
            - implant
            - consumable
            - quest_item
            - cosmetic
            description: Item category
            example: weapon
          rarity:
            type: string
            enum:
            - common
            - uncommon
            - rare
            - epic
            - legendary
            - unique
            description: Item rarity tier
            example: epic
          description:
            type: string
            description: Item description/flavor text
            example: A powerful pistol with cyberpunk aesthetics
            maxLength: 500
          icon_url:
            type: string
            format: uri
            description: Item icon image URL
            example: https://cdn.necpgame.com/items/malorian-3516.png
          is_stackable:
            type: boolean
            description: Whether item can stack in inventory
            example: false
          max_stack_size:
            type: integer
            minimum: 1
            description: Maximum stack size if stackable
            example: 99
      description: 'BACKEND NOTE: Base item entity with gaming-specific fields.'
    WeaponEntity:
      allOf:
      - $ref: '#/components/schemas/ItemEntity'
      - type: object
        required:
        - damage
        - fire_rate
        - ammo_type
        properties:
          damage:
            type: integer
            minimum: 1
            description: Base damage per shot
            example: 45
          damage_type:
            type: string
            enum:
            - physical
            - thermal
            - electrical
            - chemical
            - cyber
            description: Type of damage dealt
            example: physical
          fire_rate:
            type: number
            minimum: 0.1
            description: Shots per second
            example: 8.5
          ammo_type:
            type: string
            description: Required ammunition type
            example: 9mm
            maxLength: 50
          magazine_size:
            type: integer
            minimum: 1
            description: Rounds per magazine
            example: 12
          range:
            type: integer
            minimum: 1
            description: Effective range in meters
            example: 25
      description: 'BACKEND NOTE: Weapon-specific item properties.'
    CombatSessionEntity:
      allOf:
      - allOf:
        - $ref: '#/components/schemas/BaseEntity'
        - type: object
          required:
          - version
          properties:
            version:
              type: integer
              minimum: 1
              description: Optimistic locking version
              example: 1
        description: 'BACKEND NOTE: Extends BaseEntity with version control. Use for
          concurrent-safe updates.'
      - type: object
        required:
        - participants
        - status
        - start_time
        properties:
          participants:
            type: array
            items:
              $ref: '#/components/schemas/CharacterEntity'
            minItems: 2
            maxItems: 10
            description: Characters involved in combat
          status:
            type: string
            enum:
            - active
            - paused
            - completed
            - aborted
            description: Current combat state
            example: active
          start_time:
            type: string
            format: date-time
            description: ISO 8601 timestamp
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          end_time:
            type: string
            format: date-time
            description: ISO 8601 timestamp
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          current_turn:
            type: integer
            minimum: 0
            description: Current turn number in combat
            example: 1
          turn_order:
            type: array
            items:
              type: string
              format: uuid
              description: Universally Unique Identifier (UUID v4)
              example: 123e4567-e89b-12d3-a456-426614174000
              maxLength: 36
            description: Order of turns by character ID
          environment_effects:
            type: array
            items:
              type: string
            description: Active environmental effects
            example:
            - heavy_rain
            - urban_cover
      description: 'BACKEND NOTE: Combat session with optimistic locking.'
    CombatEffectEntity:
      allOf:
      - type: object
        required:
        - id
        - created_at
        - updated_at
        properties:
          id:
            type: string
            format: uuid
            description: Unique identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          created_at:
            type: string
            format: date-time
            description: Creation timestamp (ISO 8601)
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          updated_at:
            type: string
            format: date-time
            description: Last modification timestamp (ISO 8601)
            example: '2025-12-28T10:30:00Z'
            maxLength: 30
        description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
          Memory savings: 30-50%. All domain entities should extend this.'
      - type: object
        required:
        - target_id
        - effect_type
        - duration
        properties:
          target_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          effect_type:
            type: string
            enum:
            - buff
            - debuff
            - dot
            - hot
            - stun
            - slow
            description: Type of combat effect
            example: buff
          name:
            type: string
            description: Effect display name
            example: Adrenaline Rush
            maxLength: 50
          description:
            type: string
            description: Effect description
            example: +50% movement speed for 30 seconds
            maxLength: 200
          duration:
            type: integer
            minimum: 1
            description: Effect duration in seconds
            example: 30
          remaining_duration:
            type: integer
            minimum: 0
            description: Time remaining in seconds
            example: 15
          magnitude:
            type: number
            description: Effect strength/intensity
            example: 0.5
          stacks:
            type: integer
            minimum: 1
            maximum: 10
            description: Number of effect stacks
            example: 1
          source_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
      description: 'BACKEND NOTE: Combat effects and status conditions.'
    QuestEntity:
      allOf:
      - allOf:
        - $ref: '#/components/schemas/BaseEntity'
        - type: object
          properties:
            created_by:
              type: string
              format: uuid
              description: ID of user who created the entity
              example: 123e4567-e89b-12d3-a456-426614174001
              maxLength: 36
            updated_by:
              type: string
              format: uuid
              description: ID of user who last modified the entity
              example: 123e4567-e89b-12d3-a456-426614174002
              maxLength: 36
        description: 'BACKEND NOTE: Extends BaseEntity with audit trail. Use for admin-managed
          entities.'
      - type: object
        required:
        - title
        - description
        - type
        - status
        properties:
          title:
            type: string
            description: Quest display title
            example: Phantom Liberty
            maxLength: 100
          description:
            type: string
            description: Quest description
            example: Investigate the mysterious data fragment
            maxLength: 1000
          type:
            type: string
            enum:
            - main_story
            - side_quest
            - gig
            - romance
            - faction
            - cyberpsycho
            description: Quest category
            example: main_story
          status:
            type: string
            enum:
            - available
            - active
            - completed
            - failed
            - expired
            description: Quest availability status
            example: active
          level_requirement:
            type: integer
            minimum: 1
            maximum: 50
            description: Minimum character level required
            example: 20
          rewards:
            type: array
            items:
              type: object
              properties:
                type:
                  type: string
                  enum:
                  - experience
                  - money
                  - item
                  - reputation
                amount:
                  type: integer
                  minimum: 1
                item_id:
                  type: string
                  format: uuid
                  description: Universally Unique Identifier (UUID v4)
                  example: 123e4567-e89b-12d3-a456-426614174000
                  maxLength: 36
            description: Quest completion rewards
          objectives:
            type: array
            items:
              type: object
              required:
              - description
              - completed
              properties:
                description:
                  type: string
                  maxLength: 200
                completed:
                  type: boolean
                progress:
                  type: integer
                  minimum: 0
                target:
                  type: integer
                  minimum: 1
            description: Quest objectives and progress
      description: 'BACKEND NOTE: Quest definition with progress tracking.'
    CombatActionEntity:
      allOf:
      - type: object
        required:
        - id
        - created_at
        - updated_at
        properties:
          id:
            type: string
            format: uuid
            description: Unique identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          created_at:
            type: string
            format: date-time
            description: Creation timestamp (ISO 8601)
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          updated_at:
            type: string
            format: date-time
            description: Last modification timestamp (ISO 8601)
            example: '2025-12-28T10:30:00Z'
            maxLength: 30
        description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
          Memory savings: 30-50%. All domain entities should extend this.'
      - type: object
        required:
        - session_id
        - action_type
        - source_id
        properties:
          session_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          action_type:
            type: string
            enum:
            - attack
            - defend
            - ability
            - item
            - move
            description: Type of combat action
            example: attack
          source_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          target_ids:
            type: array
            items:
              type: string
              format: uuid
              description: Universally Unique Identifier (UUID v4)
              example: 123e4567-e89b-12d3-a456-426614174000
              maxLength: 36
            description: Targets of the action
          damage_dealt:
            type: integer
            minimum: 0
            description: Damage dealt by this action
            example: 145
          effects_applied:
            type: array
            items:
              type: string
              enum:
              - stun
              - poison
              - burn
              - bleed
              - slow
            description: Status effects applied
          turn_number:
            type: integer
            minimum: 1
            description: Combat turn when action occurred
            example: 3
      description: 'BACKEND NOTE: Combat actions with damage and effects tracking.'
    AbilityEntity:
      allOf:
      - type: object
        required:
        - id
        - created_at
        - updated_at
        properties:
          id:
            type: string
            format: uuid
            description: Unique identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          created_at:
            type: string
            format: date-time
            description: Creation timestamp (ISO 8601)
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          updated_at:
            type: string
            format: date-time
            description: Last modification timestamp (ISO 8601)
            example: '2025-12-28T10:30:00Z'
            maxLength: 30
        description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
          Memory savings: 30-50%. All domain entities should extend this.'
      - type: object
        required:
        - name
        - type
        - cooldown
        properties:
          name:
            type: string
            description: Ability display name
            example: Sandevistan Overdrive
            maxLength: 100
          description:
            type: string
            description: Ability description
            example: Temporarily increases movement speed by 300%
            maxLength: 500
          type:
            type: string
            enum:
            - offensive
            - defensive
            - utility
            - movement
            - hacking
            description: Ability category
            example: movement
          cooldown:
            type: integer
            minimum: 0
            description: Cooldown in seconds
            example: 30
          mana_cost:
            type: integer
            minimum: 0
            description: Resource cost to use
            example: 25
          range:
            type: integer
            minimum: 0
            description: Ability range in meters
            example: 10
          damage:
            type: integer
            minimum: 0
            description: Base damage if applicable
            example: 0
          healing:
            type: integer
            minimum: 0
            description: Healing amount if applicable
            example: 50
          effects:
            type: array
            items:
              type: string
            description: Effects applied by ability
            example:
            - speed_boost
            - damage_reduction
          level_requirement:
            type: integer
            minimum: 1
            maximum: 50
            description: Required character level
            example: 15
          icon_url:
            type: string
            format: uri
            description: Ability icon URL
      description: 'BACKEND NOTE: Character abilities and special moves.'
    LocationEntity:
      allOf:
      - type: object
        required:
        - id
        - created_at
        - updated_at
        properties:
          id:
            type: string
            format: uuid
            description: Unique identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          created_at:
            type: string
            format: date-time
            description: Creation timestamp (ISO 8601)
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          updated_at:
            type: string
            format: date-time
            description: Last modification timestamp (ISO 8601)
            example: '2025-12-28T10:30:00Z'
            maxLength: 30
        description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
          Memory savings: 30-50%. All domain entities should extend this.'
      - type: object
        required:
        - name
        - coordinates
        - type
        properties:
          name:
            type: string
            description: Location display name
            example: Container Plaza
            maxLength: 100
          coordinates:
            type: object
            required:
            - x
            - y
            - z
            properties:
              x:
                type: number
                description: X coordinate
                example: 1234.56
              y:
                type: number
                description: Y coordinate
                example: 7890.12
              z:
                type: number
                description: Z coordinate (height)
                example: 15.5
            description: 3D world coordinates
          type:
            type: string
            enum:
            - district
            - building
            - landmark
            - fast_travel
            - quest_location
            - vendor
            description: Location category
            example: district
          faction_control:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          security_level:
            type: string
            enum:
            - safe
            - moderate
            - dangerous
            - deadly
            description: Location danger level
            example: moderate
          is_discovered:
            type: boolean
            description: Whether player has discovered this location
            example: true
      description: 'BACKEND NOTE: Game world locations and points of interest.'
    BaseEntity:
      type: object
      required:
      - id
      - created_at
      - updated_at
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier (UUID v4)
          example: 123e4567-e89b-12d3-a456-426614174000
          maxLength: 36
        created_at:
          type: string
          format: date-time
          description: Creation timestamp (ISO 8601)
          example: '2025-12-28T10:00:00Z'
          maxLength: 30
        updated_at:
          type: string
          format: date-time
          description: Last modification timestamp (ISO 8601)
          example: '2025-12-28T10:30:00Z'
          maxLength: 30
      description: 'BACKEND NOTE: Base entity with ordered fields for struct alignment.
        Memory savings: 30-50%. All domain entities should extend this.'
    AuditableEntity:
      allOf:
      - $ref: '#/components/schemas/BaseEntity'
      - type: object
        properties:
          created_by:
            type: string
            format: uuid
            description: ID of user who created the entity
            example: 123e4567-e89b-12d3-a456-426614174001
            maxLength: 36
          updated_by:
            type: string
            format: uuid
            description: ID of user who last modified the entity
            example: 123e4567-e89b-12d3-a456-426614174002
            maxLength: 36
      description: 'BACKEND NOTE: Extends BaseEntity with audit trail. Use for admin-managed
        entities.'
    VersionedEntity:
      allOf:
      - $ref: '#/components/schemas/BaseEntity'
      - type: object
        required:
        - version
        properties:
          version:
            type: integer
            minimum: 1
            description: Optimistic locking version
            example: 1
      description: 'BACKEND NOTE: Extends BaseEntity with version control. Use for
        concurrent-safe updates.'
    SoftDeletableEntity:
      allOf:
      - $ref: '#/components/schemas/BaseEntity'
      - type: object
        properties:
          deleted_at:
            type: string
            format: date-time
            nullable: true
            description: Soft deletion timestamp (null if not deleted)
            example: null
            maxLength: 30
      description: 'BACKEND NOTE: Extends BaseEntity with soft delete capability.
        Use for recoverable deletions.'
    UpdateRequest:
      type: object
      required:
      - id
      description: Base schema for update operations with optimistic locking support.
      properties:
        id:
          $ref: '#/components/schemas/UUID'
        version:
          type: integer
          minimum: 1
          description: Current entity version for optimistic locking
        metadata:
          type: object
          properties:
            updated_by:
              $ref: '#/components/schemas/UUID'
            reason:
              type: string
              maxLength: 200
              description: Update reason for audit trail
    PaginationParams:
      type: object
      properties:
        limit:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          example: 20
        offset:
          type: integer
          minimum: 0
          default: 0
          example: 0
    PaginatedResponse:
      type: object
      required:
      - items
      - total
      - limit
      - offset
      properties:
        items:
          type: array
          description: Array of items
        total:
          type: integer
          minimum: 0
          example: 100
          description: Total number of items
        limit:
          type: integer
          minimum: 1
          maximum: 100
          example: 20
          description: Items per page
        offset:
          type: integer
          minimum: 0
          example: 0
          description: Number of items to skip
    UUID:
      type: string
      format: uuid
      description: Universally Unique Identifier (UUID v4)
      example: 123e4567-e89b-12d3-a456-426614174000
      maxLength: 36
    Email:
      type: string
      format: email
      description: Email address
      example: user@necpgame.com
      maxLength: 255
    Timestamp:
      type: string
      format: date-time
      description: ISO 8601 timestamp
      example: '2025-12-28T10:00:00Z'
      maxLength: 30
    Version:
      type: string
      pattern: ^\d+\.\d+\.\d+$
      description: Semantic version (MAJOR.MINOR.PATCH)
      example: 1.0.0
      maxLength: 20
    ValidationResult:
      type: object
      required:
      - valid
      properties:
        valid:
          type: boolean
          description: Whether validation passed
          example: true
        errors:
          type: array
          items:
            type: string
          description: Validation error messages
          example:
          - Field is required
          - Invalid format
        warnings:
          type: array
          items:
            type: string
          description: Validation warnings
          example:
          - Deprecated field usage
