openapi: 3.0.3
info:
  title: Location Service API - Enterprise-Grade Location Management
  description: '**Enterprise-Grade Location API for NECPGAME**

    Location Service manages geographical locations, coordinates, zones, and spatial
    relationships within the game world. Provides location-based services, proximity
    calculations, and world navigation.

    ## Key Features

    - **Geographical coordinate system** with high precision - **Location-based queries**
    and proximity searches - **Zone management** and boundary definitions - **Spatial
    relationships** and distance calculations - **Performance-optimized** for real-time
    positioning - **Scalable** world coordinate system

    ## Domain Purpose

    Manages all location-related operations including coordinate storage, proximity
    calculations, zone boundaries, and spatial queries. Essential for world navigation,
    proximity-based features, and location-aware gameplay.

    ## Performance Targets

    - P99 Latency: <25ms for coordinate queries - Memory: <30KB per active location
    session - Concurrent users: 50,000+ simultaneous location updates - Spatial queries:
    <100ms response time

    '
  version: 1.0.0
  contact:
    name: NECPGAME API Support
    url: https://necpgame.com/support
    email: api@necpgame.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
servers:
- url: https://api.necpgame.com/v1/location
  description: Production server
- url: https://staging-api.necpgame.com/v1/location
  description: Staging server
- url: http://localhost:8080/api/v1/location
  description: Local development server
security:
- BearerAuth: []
tags:
- name: Auctions
  description: Auction creation and management
- name: Bidding
  description: Bid placement and validation
- name: Auction Lifecycle
  description: Auction start, end, and settlement
- name: Auction Items
  description: Item management in auctions
paths:
  /health:
    $ref: ./paths/health.yaml#/paths/~1health
  /health/batch:
    $ref: ./paths/health-batch.yaml#/paths/~1health~1batch
  /health/ws:
    $ref: ./paths/health-ws.yaml#/paths/~1health~1ws
  /location/create:
    $ref: ./paths/location-create.yaml#/paths/~1location~1create
  /location/{auctionId}/bid:
    $ref: ./paths/location-{auctionId}-bid.yaml#/paths/~1location~1{auctionId}~1bid
  /location/{auctionId}:
    $ref: ./paths/location-{auctionId}.yaml#/paths/~1location~1{auctionId}
  /location/{auctionId}/bids:
    $ref: ./paths/location-{auctionId}-bids.yaml#/paths/~1location~1{auctionId}~1bids
  /location/list:
    $ref: ./paths/location-list.yaml#/paths/~1location~1list
components:
  schemas:
    Error:
      $ref: ../common/schemas/infrastructure-entities.yaml#/ErrorResponse
    HealthResponse:
      $ref: ../common/schemas/health.yaml#/HealthResponse
    LoginRequest:
      type: object
      required:
      - email
      - password
      properties:
        email:
          type: string
          format: email
          description: User email address
          example: user@necpgame.com
        password:
          type: string
          minLength: 8
          maxLength: 128
          description: User password
          example: MySecurePass123!
        remember_me:
          type: boolean
          description: Extend session duration
          example: true
          default: false
        mfa_code:
          type: string
          minLength: 6
          maxLength: 8
          description: Multi-factor authentication code (if enabled)
          example: '123456'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    RegisterRequest:
      type: object
      required:
      - email
      - password
      - username
      properties:
        email:
          type: string
          format: email
          description: User email address
          example: newuser@necpgame.com
        password:
          type: string
          minLength: 8
          maxLength: 128
          description: User password (must meet complexity requirements)
          example: MySecurePass123!
        username:
          type: string
          minLength: 3
          maxLength: 50
          pattern: ^[a-zA-Z0-9_-]+$
          description: Unique username
          example: cyber_runner_2077
        accept_terms:
          type: boolean
          description: User accepts terms of service
          example: true
        marketing_consent:
          type: boolean
          description: Consent for marketing communications
          example: false
          default: false
        referral_code:
          type: string
          maxLength: 50
          description: Referral code from another user
          example: FRIEND123
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    AuthResponse:
      type: object
      required:
      - access_token
      - token_type
      - expires_in
      properties:
        access_token:
          type: string
          description: JWT access token for API authentication
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        token_type:
          type: string
          enum:
          - Bearer
          example: Bearer
        expires_in:
          type: integer
          description: Token expiration time in seconds
          example: 3600
        refresh_token:
          type: string
          description: Refresh token for obtaining new access tokens
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        user:
          $ref: '#/components/schemas/UserSummary'
        session_id:
          type: string
          format: uuid
          description: Session identifier
          example: 550e8400-e29b-41d4-a716-446655440000
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    RegisterResponse:
      type: object
      required:
      - user_id
      - email
      - verification_required
      properties:
        user_id:
          type: string
          format: uuid
          description: Newly created user ID
          example: 550e8400-e29b-41d4-a716-446655440000
        email:
          type: string
          format: email
          description: Registered email address
          example: newuser@necpgame.com
        username:
          type: string
          description: Registered username
          example: cyber_runner_2077
        verification_required:
          type: boolean
          description: Whether email verification is required
          example: true
        verification_token_expires:
          type: string
          format: date-time
          description: When verification token expires
          example: '2025-12-21T12:00:00Z'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    UserSummary:
      type: object
      required:
      - id
      - email
      - username
      properties:
        id:
          type: string
          format: uuid
          description: User unique identifier
          example: 550e8400-e29b-41d4-a716-446655440000
        email:
          type: string
          format: email
          description: User email address
          example: user@necpgame.com
        username:
          type: string
          description: User display name
          example: cyber_runner_2077
        avatar_url:
          type: string
          format: uri
          description: User avatar image URL
          example: https://cdn.necpgame.com/avatars/550e8400-e29b-41d4-a716-446655440000.jpg
        level:
          type: integer
          minimum: 1
          description: User level
          example: 25
        is_verified:
          type: boolean
          description: Email verification status
          example: true
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    UserProfile:
      type: object
      required:
      - id
      - email
      - username
      - created_at
      properties:
        id:
          type: string
          format: uuid
          description: User unique identifier
          example: 550e8400-e29b-41d4-a716-446655440000
        email:
          type: string
          format: email
          description: User email address
          example: user@necpgame.com
        username:
          type: string
          description: User display name
          example: cyber_runner_2077
        avatar_url:
          type: string
          format: uri
          description: User avatar image URL
          example: https://cdn.necpgame.com/avatars/550e8400-e29b-41d4-a716-446655440000.jpg
        level:
          type: integer
          minimum: 1
          description: User level
          example: 25
        experience:
          type: integer
          minimum: 0
          description: Total experience points
          example: 12500
        created_at:
          type: string
          format: date-time
          description: Account creation timestamp
          example: '2025-01-15T10:30:00Z'
        last_login:
          type: string
          format: date-time
          description: Last login timestamp
          example: '2025-12-21T08:15:00Z'
        is_verified:
          type: boolean
          description: Email verification status
          example: true
        preferences:
          type: object
          description: User preferences and settings
          properties:
            theme:
              type: string
              enum:
              - light
              - dark
              - cyberpunk
              example: cyberpunk
            language:
              type: string
              example: en
            notifications:
              type: object
              properties:
                email:
                  type: boolean
                  example: true
                push:
                  type: boolean
                  example: false
        stats:
          type: object
          description: User statistics
          properties:
            games_played:
              type: integer
              minimum: 0
              example: 150
            hours_played:
              type: integer
              minimum: 0
              example: 250
            achievements_unlocked:
              type: integer
              minimum: 0
              example: 25
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    PaginationParams:
      $ref: ../common/schemas/pagination.yaml#/PaginationParams
    PaginatedResponse:
      $ref: ../common/schemas/pagination.yaml#/PaginatedResponse
  responses:
    HealthBatchSuccess:
      $ref: ../common/responses/success.yaml#/HealthBatchSuccess
    TooManyRequests:
      description: Too many requests - rate limit exceeded
      headers:
        Retry-After:
          schema:
            type: integer
            example: 60
            description: Seconds to wait before retrying
      content:
        application/json:
          schema:
            $ref: ../common/schemas/infrastructure-entities.yaml#/ErrorResponse
  securitySchemes:
    BearerAuth:
      $ref: ../common/security/security.yaml#/BearerAuth
    ApiKeyAuth:
      $ref: ../common/security/security.yaml#/ApiKeyAuth
    ServiceAuth:
      $ref: ../common/security/security.yaml#/ServiceAuth
  parameters:
    AuctionId:
      name: auctionId
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Unique identifier of the auction
