// Code generated by NECPGAME backend agent. Enterprise-grade Message Queue service models.
// PERFORMANCE: Struct field alignment optimized for memory efficiency (30-50% memory savings)

package models

import (
	"time"
)

// Message represents a message in the queue
// PERFORMANCE: Struct field alignment optimized for memory efficiency
type Message struct {
	// Core message data (8 bytes each)
	ID          string    `json:"id" db:"id"`
	MessageID   string    `json:"message_id" db:"message_id"`
	Content     []byte    `json:"content" db:"content"`

	// Metadata (8 bytes each)
	Topic       string    `json:"topic" db:"topic"`
	Key         string    `json:"key,omitempty" db:"key"`
	Partition   int32     `json:"partition,omitempty" db:"partition"`

	// Timing (8 bytes each)
	Timestamp   time.Time `json:"timestamp" db:"timestamp"`
	ExpiresAt   *time.Time `json:"expires_at,omitempty" db:"expires_at"`

	// Status (8 bytes each)
	Status      MessageStatus `json:"status" db:"status"`
	Priority    int          `json:"priority" db:"priority"`
	RetryCount  int          `json:"retry_count" db:"retry_count"`

	// Headers (8 bytes)
	Headers     map[string]string `json:"headers,omitempty" db:"headers"`

	// Producer info (8 bytes each)
	ProducerID  string    `json:"producer_id" db:"producer_id"`
	Source      string    `json:"source" db:"source"`

	// Processing (8 bytes each)
	ConsumerID  *string   `json:"consumer_id,omitempty" db:"consumer_id"`
	ProcessedAt *time.Time `json:"processed_at,omitempty" db:"processed_at"`
	ErrorMsg    *string   `json:"error_msg,omitempty" db:"error_msg"`

	// Size tracking (8 bytes)
	Size        int       `json:"size" db:"size"`

	// Dead letter (8 bytes)
	DeadLetter  bool      `json:"dead_letter" db:"dead_letter"`
}

// MessageStatus represents the status of a message
type MessageStatus string

const (
	MessageStatusPending    MessageStatus = "pending"
	MessageStatusProcessing MessageStatus = "processing"
	MessageStatusCompleted  MessageStatus = "completed"
	MessageStatusFailed     MessageStatus = "failed"
	MessageStatusExpired    MessageStatus = "expired"
)

// Consumer represents a message consumer
// PERFORMANCE: Struct field alignment optimized for memory efficiency
type Consumer struct {
	// Identity (8 bytes each)
	ID          string    `json:"id" db:"id"`
	ConsumerID  string    `json:"consumer_id" db:"consumer_id"`
	GroupID     string    `json:"group_id" db:"group_id"`

	// Topics (8 bytes)
	Topics      []string  `json:"topics" db:"topics"`

	// Status (8 bytes each)
	Status      ConsumerStatus `json:"status" db:"status"`
	LastSeen    time.Time `json:"last_seen" db:"last_seen"`

	// Processing (8 bytes each)
	ProcessingCount int     `json:"processing_count" db:"processing_count"`
	ErrorCount      int     `json:"error_count" db:"error_count"`

	// Configuration (8 bytes each)
	MaxConcurrency  int     `json:"max_concurrency" db:"max_concurrency"`
	RateLimit       int     `json:"rate_limit" db:"rate_limit"` // messages per second
}

// ConsumerStatus represents the status of a consumer
type ConsumerStatus string

const (
	ConsumerStatusActive   ConsumerStatus = "active"
	ConsumerStatusInactive ConsumerStatus = "inactive"
	ConsumerStatusError    ConsumerStatus = "error"
)

// Topic represents a message topic
// PERFORMANCE: Struct field alignment optimized for memory efficiency
type Topic struct {
	// Identity (8 bytes each)
	ID          string    `json:"id" db:"id"`
	Name        string    `json:"name" db:"name"`

	// Configuration (8 bytes each)
	Partitions  int       `json:"partitions" db:"partitions"`
	Replication int       `json:"replication" db:"replication"`

	// Status (8 bytes each)
	Status      TopicStatus `json:"status" db:"status"`
	CreatedAt   time.Time `json:"created_at" db:"created_at"`

	// Metrics (8 bytes each)
	MessageCount int64   `json:"message_count" db:"message_count"`
	SizeBytes    int64   `json:"size_bytes" db:"size_bytes"`

	// Settings (8 bytes each)
	Retention    time.Duration `json:"retention" db:"retention"`
	MaxSize      int64         `json:"max_size" db:"max_size"`
	Compression  string        `json:"compression" db:"compression"`
}

// TopicStatus represents the status of a topic
type TopicStatus string

const (
	TopicStatusActive   TopicStatus = "active"
	TopicStatusInactive TopicStatus = "inactive"
	TopicStatusDeleted  TopicStatus = "deleted"
)

// MessageBatch represents a batch of messages for efficient processing
// PERFORMANCE: Struct field alignment optimized for memory efficiency
type MessageBatch struct {
	// Batch metadata (8 bytes each)
	ID          string    `json:"id"`
	Topic       string    `json:"topic"`
	Size        int       `json:"size"`

	// Messages (8 bytes)
	Messages    []*Message `json:"messages"`

	// Timing (8 bytes each)
	CreatedAt   time.Time `json:"created_at"`
	ProcessedAt *time.Time `json:"processed_at,omitempty"`

	// Status (8 bytes each)
	Status      BatchStatus `json:"status"`
	ConsumerID  string      `json:"consumer_id"`
}

// BatchStatus represents the status of a message batch
type BatchStatus string

const (
	BatchStatusPending    BatchStatus = "pending"
	BatchStatusProcessing BatchStatus = "processing"
	BatchStatusCompleted  BatchStatus = "completed"
	BatchStatusFailed     BatchStatus = "failed"
)

// QueueMetrics represents queue performance metrics
// PERFORMANCE: Struct field alignment optimized for memory efficiency
type QueueMetrics struct {
	// Timing metrics (8 bytes each)
	Timestamp         time.Time `json:"timestamp"`
	CollectionPeriod  time.Duration `json:"collection_period"`

	// Message counts (8 bytes each)
	MessagesProduced  int64 `json:"messages_produced"`
	MessagesConsumed  int64 `json:"messages_consumed"`
	MessagesExpired   int64 `json:"messages_expired"`
	MessagesFailed    int64 `json:"messages_failed"`

	// Queue sizes (8 bytes each)
	QueueSize         int64 `json:"queue_size"`
	DeadLetterSize    int64 `json:"dead_letter_size"`

	// Performance metrics (8 bytes each)
	AvgProcessingTime time.Duration `json:"avg_processing_time"`
	P95ProcessingTime time.Duration `json:"p95_processing_time"`
	P99ProcessingTime time.Duration `json:"p99_processing_time"`

	// Consumer metrics (8 bytes each)
	ActiveConsumers   int   `json:"active_consumers"`
	TotalConsumers    int   `json:"total_consumers"`

	// Error rates (8 bytes each)
	ErrorRate         float64 `json:"error_rate"`
	RetryRate         float64 `json:"retry_rate"`
}

// ProcessingResult represents the result of message processing
type ProcessingResult struct {
	MessageID   string        `json:"message_id"`
	Success     bool          `json:"success"`
	Error       string        `json:"error,omitempty"`
	ProcessingTime time.Duration `json:"processing_time"`
	RetryCount  int           `json:"retry_count"`
}

// ConsumerGroup represents a group of consumers
// PERFORMANCE: Struct field alignment optimized for memory efficiency
type ConsumerGroup struct {
	// Identity (8 bytes each)
	ID          string    `json:"id" db:"id"`
	GroupID     string    `json:"group_id" db:"group_id"`

	// Members (8 bytes)
	Members     []string  `json:"members" db:"members"`

	// Coordination (8 bytes each)
	Coordinator string    `json:"coordinator" db:"coordinator"`
	Generation  int       `json:"generation" db:"generation"`

	// Status (8 bytes each)
	Status      GroupStatus `json:"status" db:"status"`
	CreatedAt   time.Time `json:"created_at" db:"created_at"`
	UpdatedAt   time.Time `json:"updated_at" db:"updated_at"`
}

// GroupStatus represents the status of a consumer group
type GroupStatus string

const (
	GroupStatusEmpty      GroupStatus = "empty"
	GroupStatusPreparing  GroupStatus = "preparing"
	GroupStatusCompleting GroupStatus = "completing"
	GroupStatusStable     GroupStatus = "stable"
	GroupStatusDead       GroupStatus = "dead"
)