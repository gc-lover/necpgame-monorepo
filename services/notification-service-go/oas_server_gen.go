// Code generated by ogen, DO NOT EDIT.

package api

import (
	"context"
)

// Handler handles operations described by OpenAPI v3 specification.
type Handler interface {
	// AcknowledgeMessage implements acknowledgeMessage operation.
	//
	// Confirm message processing.
	//
	// PUT /queues/messages/{messageId}/ack
	AcknowledgeMessage(ctx context.Context, req *AcknowledgeMessageRequest, params AcknowledgeMessageParams) (AcknowledgeMessageRes, error)
	// CreateChatChannel implements createChatChannel operation.
	//
	// Create a new chat channel.
	//
	// POST /chat/channels
	CreateChatChannel(ctx context.Context, req *CreateChannelRequest) (CreateChatChannelRes, error)
	// CreateQueue implements createQueue operation.
	//
	// Create a new message queue.
	//
	// POST /queues
	CreateQueue(ctx context.Context, req *CreateQueueRequest) (CreateQueueRes, error)
	// DequeueMessages implements dequeueMessages operation.
	//
	// Retrieve messages from a queue.
	//
	// GET /queues/messages
	DequeueMessages(ctx context.Context, params DequeueMessagesParams) (DequeueMessagesRes, error)
	// EnqueueMessage implements enqueueMessage operation.
	//
	// Add a message to a queue.
	//
	// POST /queues/messages
	EnqueueMessage(ctx context.Context, req *EnqueueMessageRequest) (EnqueueMessageRes, error)
	// GetBatchHealth implements getBatchHealth operation.
	//
	// **Performance optimization:** Check multiple services health in single request
	// Reduces network overhead by ~80% for monitoring dashboards.
	// **Input:** Array of service names **Output:** Health status for each service.
	//
	// POST /health/batch
	GetBatchHealth(ctx context.Context, req *GetBatchHealthReq) (GetBatchHealthRes, error)
	// GetChatMessages implements getChatMessages operation.
	//
	// Retrieve chat messages with filtering and pagination.
	//
	// GET /chat/messages
	GetChatMessages(ctx context.Context, params GetChatMessagesParams) (GetChatMessagesRes, error)
	// GetHealth implements getHealth operation.
	//
	// **Enterprise-grade health check endpoint**
	// Provides real-time health status of the notification service microservice.
	// Critical for service discovery, load balancing, and monitoring.
	//
	// GET /health
	GetHealth(ctx context.Context, params GetHealthParams) (GetHealthRes, error)
	// GetNotifications implements getNotifications operation.
	//
	// Retrieve user notifications.
	//
	// GET /notifications
	GetNotifications(ctx context.Context, params GetNotificationsParams) (GetNotificationsRes, error)
	// ListChatChannels implements listChatChannels operation.
	//
	// Get list of available chat channels.
	//
	// GET /chat/channels
	ListChatChannels(ctx context.Context, params ListChatChannelsParams) (ListChatChannelsRes, error)
	// ListEventTopics implements listEventTopics operation.
	//
	// Get available Kafka event topics.
	//
	// GET /events/topics
	ListEventTopics(ctx context.Context) (ListEventTopicsRes, error)
	// NotificationHealthWebSocket implements notificationHealthWebSocket operation.
	//
	// **Performance optimization:** Real-time health updates without polling
	// Eliminates periodic HTTP requests, reduces server load by ~90%.
	// **Protocol:** WebSocket with JSON payloads **Heartbeat:** 30 second intervals **Reconnection:**
	// Automatic with exponential backoff.
	//
	// GET /health/ws
	NotificationHealthWebSocket(ctx context.Context, params NotificationHealthWebSocketParams) (NotificationHealthWebSocketRes, error)
	// PublishEvent implements publishEvent operation.
	//
	// Publish an event to Kafka topics.
	//
	// POST /events/publish
	PublishEvent(ctx context.Context, req *PublishEventRequest) (PublishEventRes, error)
	// SendChatMessage implements sendChatMessage operation.
	//
	// Send a new chat message.
	//
	// POST /chat/messages
	SendChatMessage(ctx context.Context, req *SendMessageRequest) (SendChatMessageRes, error)
	// SendNotification implements sendNotification operation.
	//
	// Send a notification to a user.
	//
	// POST /notifications
	SendNotification(ctx context.Context, req *SendNotificationRequest) (SendNotificationRes, error)
	// NewError creates *ErrRespStatusCode from error returned by handler.
	//
	// Used for common default response.
	NewError(ctx context.Context, err error) *ErrRespStatusCode
}

// Server implements http server based on OpenAPI v3 specification and
// calls Handler to handle requests.
type Server struct {
	h   Handler
	sec SecurityHandler
	baseServer
}

// NewServer creates new Server.
func NewServer(h Handler, sec SecurityHandler, opts ...ServerOption) (*Server, error) {
	s, err := newServerConfig(opts...).baseServer()
	if err != nil {
		return nil, err
	}
	return &Server{
		h:          h,
		sec:        sec,
		baseServer: s,
	}, nil
}
