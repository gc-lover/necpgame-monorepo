# Компоненты пагинации
# Источник: Общие компоненты для всех API
# Версия: 1.0.0

openapi: 3.0.3
info:
  title: Pagination Components
  version: 1.0.0
  description: |
    Общие компоненты для пагинации в API.
    Используйте эти схемы через $ref в других API файлах.

paths: {}

components:
  parameters:
    PageNumber:
      $ref: '#/components/parameters/Page'
    Page:
      name: page
      in: query
      description: Номер страницы (начинается с 1)
      required: false
      schema:
        type: integer
        minimum: 1
        default: 1
        example: 1
    
    PageSize:
      name: page_size
      in: query
      description: Количество элементов на странице
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
        example: 20
    
    Limit:
      name: limit
      in: query
      description: Максимальное количество элементов для выборки
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 1000
        default: 100
        example: 100
    
    Offset:
      name: offset
      in: query
      description: Смещение от начала (для курсорной пагинации)
      required: false
      schema:
        type: integer
        minimum: 0
        default: 0
        example: 0

  schemas:
    Page:
      type: object
      description: Базовые метаданные пагинации.
      required:
        - page
        - page_size
        - total
        - total_pages
      properties:
        page:
          type: integer
          minimum: 1
          description: Текущий номер страницы
          example: 1
        page_size:
          type: integer
          minimum: 1
          description: Количество элементов на странице
          example: 20
        total:
          type: integer
          minimum: 0
          description: Общее количество элементов
          example: 156
        total_pages:
          type: integer
          minimum: 0
          description: Общее количество страниц
          example: 8
        has_next:
          type: boolean
          description: Есть ли следующая страница
          example: true
        has_prev:
          type: boolean
          description: Есть ли предыдущая страница
          example: false

    PaginationMeta:
      type: object
      description: Метаданные пагинации
      required:
        - page
        - page_size
        - total
        - total_pages
      properties:
        page:
          type: integer
          description: Текущий номер страницы
          minimum: 1
          example: 1
        page_size:
          type: integer
          description: Количество элементов на странице
          minimum: 1
          example: 20
        total:
          type: integer
          description: Общее количество элементов
          minimum: 0
          example: 156
        total_pages:
          type: integer
          description: Общее количество страниц
          minimum: 0
          example: 8
        has_next:
          type: boolean
          description: Есть ли следующая страница
          example: true
        has_prev:
          type: boolean
          description: Есть ли предыдущая страница
          example: false

    PaginatedResponse:
      type: object
      description: Обертка для пагинированного ответа
      required:
        - data
        - meta
      properties:
        data:
          type: array
          description: Массив данных текущей страницы
          items: {}
        meta:
          $ref: '#/components/schemas/PaginationMeta'

