# Task ID: API-TASK-135
**–¢–∏–ø:** API Generation  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≤—ã—Å–æ–∫–∏–π  
**–°—Ç–∞—Ç—É—Å:** queued  
**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-07 10:30  
**–°–æ–∑–¥–∞—Ç–µ–ª—å:** AI Agent  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** API-TASK-133

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
–°–æ–∑–¥–∞—Ç—å OpenAPI-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –≥–∏–ª—å–¥–∏–π: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–æ–º, —Ä–∞–Ω–≥–∞–º–∏, –±–∞–Ω–∫–æ–º, –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –∏ —Å–æ–±—ã—Ç–∏—è–º–∏.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:** –æ–ø–∏—Å–∞—Ç—å API `social-service` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.BRAIN/05-technical/backend/guild-system-backend.md`.

---

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è
–î–∞—Ç—å —Å–∫–≤–æ–∑–Ω–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –≥–∏–ª—å–¥–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π PvE/PvP –∫–æ–Ω—Ç–µ–Ω—Ç–∞, —ç–∫–æ–Ω–æ–º–∏–∫–∏ (–±–∞–Ω–∫) –∏ —Å–æ–±—ã—Ç–∏–π–Ω–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–Ω–∞–º–∏ –∏ –∏—Ö —Ä–µ—Å—É—Ä—Å–∞–º–∏.  
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∫ (–≤—Å—Ç—É–ø–ª–µ–Ω–∏—è, –≤–æ–π–Ω—ã, –∏–≤–µ–Ω—Ç—ã).  
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —ç–∫–æ–Ω–æ–º–∏–∫–æ–π, world –∏ progression –ø–æ–¥—Å–∏—Å—Ç–µ–º–∞–º–∏.

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫
**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `.BRAIN`  
**–ü—É—Ç—å:** `.BRAIN/05-technical/backend/guild-system-backend.md`  
**–í–µ—Ä—Å–∏—è:** v1.0.0  
**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2025-11-07  
**–°—Ç–∞—Ç—É—Å:** ready  

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- –£—Ä–æ–≤–Ω–∏ –≥–∏–ª—å–¥–∏–π, –ø–µ—Ä–∫–∏, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.  
- Guild bank (–≤–∞–ª—é—Ç–∞, –ø—Ä–µ–¥–º–µ—Ç—ã, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è).  
- –°–∏—Å—Ç–µ–º–∞ —Ä–∞–Ω–≥–æ–≤ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π, —Å–æ–±—ã—Ç–∏—è (–∫–∞–ª–µ–Ω–¥–∞—Ä—å, –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è).  
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Guild Wars, territory control.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
- `.BRAIN/05-technical/backend/territory-control.md` ‚Äî –≤–ª–∞–¥–µ–Ω–∏–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è–º–∏.  
- `.BRAIN/05-technical/backend/guild-wars.md` ‚Äî –º–µ—Ö–∞–Ω–∏–∫–∏ –≤–æ–π–Ω.  
- `.BRAIN/05-technical/backend/economy-guild-bank.md` ‚Äî —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.  
- `API-SWAGGER/api/v1/social/party/party-system.yaml` (–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –≥—Ä—É–ø–ø–∞–º–∏ –∏ –≥–∏–ª—å–¥–∏—è–º–∏).

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- `.BRAIN/02-gameplay/social/guild-features.md` ‚Äî UX/—Ñ—É–Ω–∫—Ü–∏–∏.  
- `.BRAIN/02-gameplay/economy/guild-perks.md` ‚Äî –±–æ–Ω—É—Å—ã —É—Ä–æ–≤–Ω–µ–π.  
- `.BRAIN/05-technical/backend/event-bus-overview.md` ‚Äî —Å–æ–±—ã—Ç–∏—è –≥–∏–ª—å–¥–∏–π.

---

## üìÅ –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API
### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `API-SWAGGER`
**–¶–µ–ª–µ–≤–æ–π —Ñ–∞–π–ª:** `api/v1/social/guilds/guild-system.yaml`  
> ‚ö†Ô∏è –°–µ—Ä–≤–µ—Ä—ã: `https://api.necp.game/v1/social` –∏ `http://localhost:8080/api/v1/social`.

**–¢–∏–ø:** OpenAPI 3.0.3  
**–í–µ—Ä—Å–∏—è:** v1

```
API-SWAGGER/
‚îî‚îÄ‚îÄ api/
    ‚îî‚îÄ‚îÄ v1/
        ‚îî‚îÄ‚îÄ social/
            ‚îî‚îÄ‚îÄ guilds/
                ‚îî‚îÄ‚îÄ guild-system.yaml
```

---

## üèóÔ∏è –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

### Backend
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:** social-service  
- **–ü–æ—Ä—Ç:** 8084  
- **API Base:** `/api/v1/social/guilds`  
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** economy-service (–±–∞–Ω–∫), world-service (—Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏), combat-service (guild wars), notification-service, analytics-service.  
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
  ```yaml
  # Target Architecture:
  # - Microservice: social-service (port 8084)
  # - API Base: /api/v1/social/guilds
  # - Dependencies: economy-service, world-service, combat-service, notification-service
  # - Frontend Module: modules/social/guilds
  # - UI: GuildDashboard, GuildMemberTable, GuildBankPanel
  # - Forms: GuildCreationForm, GuildInviteForm, GuildBankTransferForm
  # - Hooks: useSocialStore, useRealtime, useGuildPermissions
  ```

### OpenAPI —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- `info.x-microservice`:
  ```yaml
  x-microservice:
    name: social-service
    port: 8084
    domain: social
    base-path: /api/v1/social/guilds
    directory: api/v1/social/guilds
    package: com.necpgame.socialservice
  ```
- `servers` –∫–∞–∫ –≤—ã—à–µ, WebSocket `x-websocket`: `wss://api.necp.game/v1/social/guilds/{guildId}/stream` (–∏–≤–µ–Ω—Ç—ã, –±–∞–Ω–∫).  
- –°–æ–±—ã—Ç–∏—è: `guildUpdated`, `memberJoined`, `bankChanged`, `warDeclared`.

### Frontend
- **–ú–æ–¥—É–ª—å:** `modules/social/guilds`.  
- **State Store:** `useSocialStore` (`guild`, `members`, `bank`, `events`, `wars`).  
- **UI:** GuildDashboard, GuildMemberTable, PermissionsMatrix, GuildBankPanel, GuildEventCalendar.  
- **–§–æ—Ä–º—ã:** GuildCreationForm, GuildInviteForm, GuildRankForm, GuildBankTransferForm, GuildEventForm.  
- **–•—É–∫–∏:** useRealtime, usePermissions, useTerritoryMap, useEconomyStore.  
- **Layouts:** GameLayout, GuildManagementLayout.

---

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### –®–∞–≥ 1. –ê–Ω–∞–ª–∏–∑
- –ü–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å —Ä–∞–Ω–≥–∏, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è, –ª–∏–º–∏—Ç—ã.  
- –£—á–µ—Å—Ç—å –º–µ—Ö–∞–Ω–∏–∫–∏ —Ä–∞–∑–≤–∏—Ç–∏—è (—É—Ä–æ–≤–Ω–∏, –æ–ø—ã—Ç), —Å–≤—è–∑–∞–Ω–Ω—ã–µ perks.  
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è.  
- –°–æ–±—ã—Ç–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è –∏ —É—á–∞—Å—Ç–∏–µ.

### –®–∞–≥ 2. Endpoints
1. **POST `/api/v1/social/guilds`** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –≥–∏–ª—å–¥–∏–∏.  
2. **GET `/api/v1/social/guilds/{guildId}`** ‚Äî –ø—Ä–æ—Ñ–∏–ª—å –≥–∏–ª—å–¥–∏–∏.  
3. **PATCH `/api/v1/social/guilds/{guildId}`** ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫, –æ–ø–∏—Å–∞–Ω–∏—è, —ç–º–±–ª–µ–º—ã.  
4. **POST `/api/v1/social/guilds/{guildId}/invite`**, **POST `/api/v1/social/guilds/{guildId}/invite/respond`** ‚Äî –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è.  
5. **POST `/api/v1/social/guilds/{guildId}/leave`**, **POST `/api/v1/social/guilds/{guildId}/kick`**.  
6. **PATCH `/api/v1/social/guilds/{guildId}/members/{memberId}/rank`** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–Ω–≥–∞–º–∏.  
7. **GET `/api/v1/social/guilds/{guildId}/members`** ‚Äî —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Å —Ä–æ–ª—è–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π.  
8. **GET `/api/v1/social/guilds/{guildId}/bank`**, **POST `/bank/deposit`**, **POST `/bank/withdraw`**, **GET `/bank/logs`**.  
9. **GET `/api/v1/social/guilds/{guildId}/progress`** ‚Äî —É—Ä–æ–≤–µ–Ω—å, –æ–ø—ã—Ç, –ø–µ—Ä–∫–∏.  
10. **POST `/api/v1/social/guilds/{guildId}/events`**, **GET `/events`**, **POST `/events/{eventId}/rsvp`**.  
11. **POST `/api/v1/social/guilds/{guildId}/wars/declare`**, **POST `/wars/{warId}/respond`**, **GET `/wars`**.  
12. **GET `/api/v1/social/guilds/search`** ‚Äî –ø–æ–∏—Å–∫ –≥–∏–ª—å–¥–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.  
13. **DELETE `/api/v1/social/guilds/{guildId}`** ‚Äî —Ä–æ—Å–ø—É—Å–∫ (—Ç–æ–ª—å–∫–æ –ª–∏–¥–µ—Ä).

### –®–∞–≥ 3. –ú–æ–¥–µ–ª–∏
- `Guild`, `GuildSettings`, `GuildMember`, `GuildRank`, `GuildPermission`, `GuildBank`, `BankTransaction`, `GuildProgress`, `GuildEvent`, `GuildWar`.  
- –û—à–∏–±–∫–∏: `GuildError` (`VAL_NAME_TAKEN`, `VAL_BANK_LIMIT`, `BIZ_NOT_LEADER`, `BIZ_PERMISSION_DENIED`, `BIZ_WAR_ALREADY_DECLARED`).  
- WebSocket payload: `guildUpdated`, `bankUpdated`, `eventCreated`, `warDeclared`.

### –®–∞–≥ 4. OpenAPI
- –†–∞–∑–¥–µ–ª—ã `paths`, `components`, `security`.  
- –ü—Ä–∏–º–µ—Ä—ã: —Å–æ–∑–¥–∞–Ω–∏–µ –≥–∏–ª—å–¥–∏–∏, –≤—ã–¥–∞—á–∞ —Ä–∞–Ω–≥–∞, –¥–µ–ø–æ–∑–∏—Ç –≤ –±–∞–Ω–∫, –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤–æ–π–Ω—ã.  
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `$ref` –Ω–∞ `shared/common`.  
- –£–∫–∞–∑–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –±–∞–Ω–∫–∞, rate limiting –Ω–∞ invitations.

### –®–∞–≥ 5. –í–∞–ª–∏–¥–∞—Ü–∏—è
- `scripts/validate-swagger.ps1 -ApiDirectory API-SWAGGER/api/v1/social/guilds/`.  
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–∫–ª—é—á–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ (–±–∞–Ω–∫, —Å–æ–±—ã—Ç–∏—è, –≤–æ–π–Ω—ã).  
- –û–±–Ω–æ–≤–∏—Ç—å brain-mapping, `.BRAIN` –¥–æ–∫—É–º–µ–Ω—Ç –∏ README –∫–∞—Ç–∞–ª–æ–≥–∞ `guilds`.

---

## üîç –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏
1. –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `info.x-microservice` (`social-service`, 8084, `social`).  
2. –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –ª–µ–∂–∞—Ç –ø–æ–¥ `/api/v1/social/guilds`.  
3. –ü–æ–¥–¥–µ—Ä–∂–∞–Ω—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–æ–º, —Ä–∞–Ω–≥–∞–º–∏, permissions, –±–∞–Ω–∫, –ø—Ä–æ–≥—Ä–µ—Å—Å.  
4. –ñ—É—Ä–Ω–∞–ª –±–∞–Ω–∫–∞ –∏ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç.  
5. –í–µ–±-—Å–æ–∫–µ—Ç —Å–æ–±—ã—Ç–∏—è –æ–ø–∏—Å–∞–Ω—ã –≤ `x-websocket`.  
6. –û—à–∏–±–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `shared/common/responses.yaml`.  
7. –ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.  
8. –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã (`swagger-cli`, —Å–∫—Ä–∏–ø—Ç) –ø—Ä–æ—Ö–æ–¥—è—Ç.  
9. –û–±–Ω–æ–≤–ª–µ–Ω—ã brain-mapping –∏ `.BRAIN` —Å –Ω–æ–≤—ã–º –ø—É—Ç—ë–º `api/v1/social/guilds/guild-system.yaml`.  
10. README –∫–∞—Ç–∞–ª–æ–≥–∞ `guilds` –æ—Ç—Ä–∞–∂–∞–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ API.  
11. –£–∫–∞–∑–∞–Ω—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–ª–∏–º–∏—Ç—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –±–∞–Ω–∫, cooldown –≤–æ–π–Ω).

---

## FAQ
- **–ú–æ–∂–Ω–æ –ª–∏ –º–µ–Ω—è—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ/—Ç–µ–≥?** –¢–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø–µ—Ä–º–∏—à–µ–Ω–æ–≤ –∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é.  
- **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–∞–Ω–∫?** –¢–æ–ª—å–∫–æ —Ä–∞–Ω–≥–∏ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º `BANK_WITHDRAW`; –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è.  
- **–ß—Ç–æ –µ—Å–ª–∏ –ª–∏–¥–µ—Ä –æ—Ñ–ª–∞–π–Ω?** –ü–µ—Ä–µ–¥–∞—á–∞ –≥–∏–ª—å–¥–∏–∏ –¥—Ä—É–≥–∏–º –æ—Ñ–∏—Ü–µ—Ä–∞–º —á–µ—Ä–µ–∑ endpoint.  
- **–ö–∞–∫ –æ–±—ä—è–≤–∏—Ç—å –≤–æ–π–Ω—É?** –ß–µ—Ä–µ–∑ dedicated endpoint, —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –≤—Ç–æ—Ä–æ–π —Å—Ç–æ—Ä–æ–Ω—ã.  
- **–ù—É–∂–Ω—ã –ª–∏ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏?** API –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ territory-service –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–ª–∞–¥–µ–Ω–∏–π.

---

**–ò—Å—Ç–æ—á–Ω–∏–∫:** `.BRAIN/05-technical/backend/guild-system-backend.md` (v1.0.0, ready)

