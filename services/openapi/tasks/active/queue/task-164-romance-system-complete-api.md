# Task ID: API-TASK-164
**–¢–∏–ø:** API Generation | **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** —Å—Ä–µ–¥–Ω–∏–π | **–°—Ç–∞—Ç—É—Å:** queued
**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-07 11:40 | **–°–æ–∑–¥–∞—Ç–µ–ª—å:** AI Agent | **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** API-TASK-138

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–°–æ–∑–¥–∞—Ç—å API –¥–ª—è –ø–æ–ª–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π (23 –¥–æ–∫—É–º–µ–Ω—Ç–∞). MEGA-ROMANCE-SYSTEM-1000 + –≤—Å–µ —Å–æ–±—ã—Ç–∏—è + —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ NPC.

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ (23 –¥–æ–∫—É–º–µ–Ω—Ç–∞)

**–û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (3):**
- `MEGA-ROMANCE-SYSTEM-1000.md` - –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞ 1000 NPC
- `ROMANCE-EVENTS-INDEX-1000.md` - –∏–Ω–¥–µ–∫—Å –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π
- `hanako-tanaka-tokyo.md` - –ø—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞—Ä–∫–∞

**–°–æ–±—ã—Ç–∏—è –ø–æ —Å—Ç–∞–¥–∏—è–º (9):**
- `events/01-meeting-events.md` - –≤—Å—Ç—Ä–µ—á–∞
- `events/02-friendship-events.md` - –¥—Ä—É–∂–±–∞
- `events/03-flirting-events.md` - —Ñ–ª–∏—Ä—Ç
- `events/04-dating-events.md` - —Å–≤–∏–¥–∞–Ω–∏—è
- `events/05-intimacy-events.md` - –±–ª–∏–∑–æ—Å—Ç—å
- `events/06-conflict-events.md` - –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
- `events/07-reconciliation-events.md` - –ø—Ä–∏–º–∏—Ä–µ–Ω–∏–µ
- `events/08-commitment-events.md` - –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- `events/09-crisis-breakup-events.md` - –∫—Ä–∏–∑–∏—Å/—Ä–∞—Å—Å—Ç–∞–≤–∞–Ω–∏–µ

**–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ NPC (6):**
- `regions/africa-romance-events-100.md` (100 NPC)
- `regions/america-romance-events-150.md` (150 NPC)
- `regions/asia-romance-events-150.md` (150 NPC)
- `regions/cis-romance-events-100.md` (100 NPC)
- `regions/europe-romance-events-150.md` (150 NPC)
- `regions/middleeast-romance-events-100.md` (100 NPC)

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (5):**
- `romance-events-complete-library.md`
- `npc-profile-generator.md`
- `ROMANCE-SYSTEM-TECHNICAL-OVERVIEW.md`
- `romance-event-engine.md`
- `npc-personality-romance-ai.md`

**–í–°–ï–ì–û: 1000+ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö NPC, 1000+ —Å–æ–±—ã—Ç–∏–π**

---

## üìÅ –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
api/v1/romance/
‚îú‚îÄ‚îÄ romance-system.yaml
‚îú‚îÄ‚îÄ romance-events.yaml
‚îú‚îÄ‚îÄ romance-npcs-regions.yaml
‚îî‚îÄ‚îÄ romance-engine.yaml
```

---

## üèóÔ∏è –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Backend (–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å):

**–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:** social-service  
**–ü–æ—Ä—Ç:** 8084  
**API –ø—É—Ç–∏:** /api/v1/romance/*

### OpenAPI (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- –ó–∞–ø–æ–ª–Ω–∏ `info.x-microservice` (name, port, domain, base-path, package) –ø–æ –¥–∞–Ω–Ω—ã–º —Ü–µ–ª–µ–≤–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞.
- –í —Å–µ–∫—Ü–∏–∏ `servers` –æ—Å—Ç–∞–≤—å Production gateway `https://api.necp.game/v1` –∏ –ø—Ä–∏–º–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ `http://localhost:8080/api/v1`.
- WebSocket –º–∞—Ä—à—Ä—É—Ç—ã –ø—É–±–ª–∏–∫—É–π —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `wss://api.necp.game/v1/...`.

### Frontend (–º–æ–¥—É–ª—å):

**–ú–æ–¥—É–ª—å:** social  
**–ü—É—Ç—å:** modules/social/romance  
**State Store:** useSocialStore (romances, romanceEvents, npcRelationships)

### Frontend (–±–∏–±–ª–∏–æ—Ç–µ–∫–∏):

**UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (@shared/ui):**
- NPCCard, RomanceCard, EventCard, RelationshipBar, HeartMeter

**–ì–æ—Ç–æ–≤—ã–µ —Ñ–æ—Ä–º—ã (@shared/forms):**
- DialogueChoiceForm, RomanceActionForm

**Layouts (@shared/layouts):**
- GameLayout

**–•—É–∫–∏ (@shared/hooks):**
- useRealtime (–¥–ª—è romance event triggers)
- useDebounce

---

## ‚úÖ Endpoints

1. **GET /api/v1/romance/npcs** - –†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ NPC –ø–æ —Ä–µ–≥–∏–æ–Ω—É
2. **GET /api/v1/romance/events** - –°–æ–±—ã—Ç–∏—è –ø–æ —Å—Ç–∞–¥–∏–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
3. **POST /api/v1/romance/event/trigger** - Trigger —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ
4. **GET /api/v1/romance/relationship/{npc_id}** - –°—Ç–∞—Ç—É—Å –æ—Ç–Ω–æ—à–µ–Ω–∏–π —Å NPC
5. **POST /api/v1/romance/action** - –†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ

**Models:** RomanceNPC, RomanceEvent, RomanceRelationship, RomanceStage

---

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** 23 romance –¥–æ–∫—É–º–µ–Ω—Ç–∞

