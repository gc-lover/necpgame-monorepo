# Task ID: API-TASK-214
**–¢–∏–ø:** API Generation
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≤—ã—Å–æ–∫–∏–π
**–°—Ç–∞—Ç—É—Å:** queued
**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-08 01:40
**–°–æ–∑–¥–∞—Ç–µ–ª—å:** GPT-5 Codex (API Task Creator)
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** API-TASK-128, API-TASK-203

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–†–∞—Å—à–∏—Ä–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä–Ω—É—é —Å–∏—Å—Ç–µ–º—É API, –¥–æ–±–∞–≤–∏–≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –º–µ—Ö–∞–Ω–∏–∫: –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞, –∞–≤—Ç–æ-—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –∞–≤—Ç–æ-–ª—É—Ç, –∫–∞—á–µ—Å—Ç–≤–æ –∏ –∞–ø–≥—Ä–µ–π–¥—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤, –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –ª–∏–º–∏—Ç—ã, –º–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:** –°–æ–∑–¥–∞—Ç—å `api/v1/inventory/inventory-advanced.yaml`, –æ–ø–∏—Å–∞–≤ REST –∏ —Å–æ–±—ã—Ç–∏–π–Ωy—é –º–æ–¥–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞ Part 2.

---

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è

–°–¥–µ–ª–∞—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏–≥—Ä–æ–∫–∞ —É–¥–æ–±–Ω—ã–º –∏ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º, –æ–±–µ—Å–ø–µ—á–∏–≤ —Å–µ—Ä–≤–µ—Ä–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–∞—á–µ—Å—Ç–≤ –ø—Ä–µ–¥–º–µ—Ç–æ–≤, –≤–µ—Å–∞, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤.

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –≥–µ–π–º–¥–∏–∑–∞–π–Ω –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏, –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –∞–ø–≥—Ä–µ–π–¥–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É/–ø–æ–¥–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–æ–≤, —Å–Ω–∏–∑–∏–≤ –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞
- –£–ø—Ä–∞–≤–ª—è—Ç—å –ª–∏–º–∏—Ç–∞–º–∏ —Å–ª–æ—Ç–æ–≤, –±–∞–Ω–∫–æ–º, —Ä–µ–º–æ–Ω—Ç–æ–º –∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏ —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π API
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —ç–∫–æ–Ω–æ–º–∏–∫—É, –ª—É—Ç –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è —Ü–µ–ª–æ—Å—Ç–Ω–æ–≥–æ UX

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç

**–ü—É—Ç—å:** `.BRAIN/05-technical/backend/inventory-system/part2-advanced-features.md`
**–í–µ—Ä—Å–∏—è:** v1.0.1 (2025-11-07 02:16)
**–°—Ç–∞—Ç—É—Å:** approved, api-readiness: ready

**–ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–¥–µ–ª—ã:**
- Weight & Encumbrance formulas (–º–∞–∫—Å –≤–µ—Å, —à—Ç—Ä–∞—Ñ—ã)
- Auto-sort –∏ auto-loot –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- Item quality, tiers, upgrade/enchantment –±–æ–Ω—É—Å—ã
- Slot –∏ bank –ª–∏–º–∏—Ç—ã, premium –±–æ–Ω—É—Å—ã
- –ü–µ—Ä–µ—á–µ–Ω—å API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (sort, repair, upgrade, transfer)
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, batch operations)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

- `.BRAIN/05-technical/backend/inventory-system/part1-core-system.md`
- `.BRAIN/05-technical/backend/loot-system/part1-loot-generation.md`
- `.BRAIN/05-technical/backend/economy-system.md`
- `.BRAIN/05-technical/backend/progression-backend.md`
- `.BRAIN/05-technical/backend/notification-system.md`

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `API-SWAGGER/tasks/active/queue/task-128-inventory-system-api.md`
- `API-SWAGGER/tasks/active/queue/task-203-cosmetic-system-api.md`
- `API-SWAGGER/tasks/active/queue/task-200-support-ticket-system-api.md` (–¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏–π –ø–æ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–º –ø—Ä–µ–¥–º–µ—Ç–∞–º)

---

## üìÅ –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API

- **–§–∞–π–ª:** `api/v1/inventory/inventory-advanced.yaml`
- **–í–µ—Ä—Å–∏—è API:** v1
- **–§–æ—Ä–º–∞—Ç:** OpenAPI 3.0.3 (REST + Events)

```
API-SWAGGER/api/v1/inventory/
 ‚îú‚îÄ‚îÄ inventory.yaml              (–±–∞–∑–æ–≤—ã–µ CRUD, API-TASK-128)
 ‚îî‚îÄ‚îÄ inventory-advanced.yaml     ‚Üê —Å–æ–∑–¥–∞—Ç—å/–∑–∞–ø–æ–ª–Ω–∏—Ç—å
```

---

## üèóÔ∏è –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

### Backend
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:** economy-service
- **–ü–æ—Ä—Ç:** 8085
- **API Base Path:** `/api/v1/inventory`
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
  - auth-service ‚Äì –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
  - gameplay-service ‚Äì –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, –∞—Ç—Ä–∏–±—É—Ç—ã (–≤–µ—Å)
  - loot-service ‚Äì –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (drop ‚Üí inventory)
  - economy-service (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–æ–¥—É–ª–∏) ‚Äì —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–µ–º–æ–Ω—Ç–∞/–∞–ø–≥—Ä–µ–π–¥–∞
  - notification-service ‚Äì —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∞–≤—Ç–æ–ª—É—Ç–µ/–ø–µ—Ä–µ–≥—Ä—É–∑–∫–µ
  - analytics-service ‚Äì —Å–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è

### Frontend
- **–ú–æ–¥—É–ª—å:** `modules/economy/inventory`
- **State Store:** `useInventoryStore`
- **State:** `backpack`, `equipment`, `bank`, `weight`, `autoLoot`, `quality`, `batchOps`
- **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** `InventoryGrid`, `WeightMeter`, `AutoLootSettingsPanel`, `ItemQualityBadge`, `BankStorage`, `BatchOperationModal`
- **–§–æ—Ä–º—ã:** `AutoSortConfigForm`, `RepairItemForm`, `UpgradeItemForm`, `TransferItemForm`
- **Layouts:** `GameLayout`
- **–•—É–∫–∏:** `useInventoryWeight`, `useAutoLoot`, `useBatchPickup`, `useBankStorage`

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è YAML

```yaml
# Target Architecture:
# - Microservice: economy-service (port 8085)
# - API Base: /api/v1/inventory
# - Dependencies: auth, gameplay, loot, notification, analytics
# - Frontend Module: modules/economy/inventory (useInventoryStore)
# - UI: InventoryGrid, WeightMeter, AutoLootSettingsPanel, ItemQualityBadge, BankStorage, BatchOperationModal
# - Forms: AutoSortConfigForm, RepairItemForm, UpgradeItemForm, TransferItemForm
# - Hooks: useInventoryWeight, useAutoLoot, useBatchPickup, useBankStorage
```

---

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å (–¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω)

1. –†–∞—Å—à–∏—Ä–∏—Ç—å —Å—Ö–µ–º—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤: –∫–∞—á–µ—Å—Ç–≤–æ, –∞–ø–≥—Ä–µ–π–¥—ã, –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞, —Ç–µ–≥–∏ –∞–≤—Ç–æ–ª—É—Ç–∞.
2. –î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ-—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π, –∞–≤—Ç–æ-–ª—É—Ç–æ–º, –ª–∏–º–∏—Ç–∞–º–∏, repair/upgrade.
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (batch pickup/transfer) –∏ –∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è.
4. –û–ø–∏—Å–∞—Ç—å —Ä–∞—Å—á—ë—Ç –≤–µ—Å–∞/–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏, –æ—Ç–≤–µ—Ç API —Å —Ç–µ–∫—É—â–∏–º —Å—Ç–∞—Ç—É—Å–æ–º –∏ —à—Ç—Ä–∞—Ñ–∞–º–∏.
5. –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–±—ã—Ç–∏—è event bus (loot picked, weight changed, item upgraded).
6. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –ª–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞—É–¥–∏—Ç–∞–º (transfer/upgrade).
7. –£–∫–∞–∑–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ (–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞, –∞–≤—Ç–æ–ª—É—Ç, —Ä–µ–º–æ–Ω—Ç), –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∏ —ç–∫–æ–Ω–æ–º–∏–∫–æ–π.
8. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤, —Ç–µ—Å—Ç-–ø–ª–∞–Ω, –ø—Ä–æ–π—Ç–∏ —á–µ–∫–ª–∏—Å—Ç.

---

## üîÄ Endpoints

1. **GET `/api/v1/inventory/status`** ‚Äì —Ç–µ–∫—É—â–∏–π –≤–µ—Å, –ª–∏–º–∏—Ç—ã, –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞, –±–æ–Ω—É—Å—ã, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è.
2. **POST `/api/v1/inventory/auto-sort`** ‚Äì –∑–∞–ø—É—Å–∫ –∞–≤—Ç–æ—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã, –æ–±–ª–∞—Å—Ç–∏).
3. **GET `/api/v1/inventory/auto-loot`** ‚Äì –ø–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–ª—É—Ç–∞ (–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–¥–∫–æ—Å—Ç—å, —Ç–∏–ø—ã).
4. **PUT `/api/v1/inventory/auto-loot`** ‚Äì –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–ª—É—Ç–∞.
5. **POST `/api/v1/inventory/batch/pickup`** ‚Äì –º–∞—Å—Å–æ–≤–æ–µ –ø–æ–¥–Ω—è—Ç–∏–µ –ª—É—Ç–∞ (–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫—É, —Å–ª–æ—Ç—ã).
6. **POST `/api/v1/inventory/batch/transfer`** ‚Äì –ø–µ—Ä–µ–Ω–æ—Å –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –º–µ–∂–¥—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º–∏ (backpack ‚Üî bank ‚Üî stash).
7. **POST `/api/v1/inventory/items/{itemId}/repair`** ‚Äì —Ä–µ–º–æ–Ω—Ç –ø—Ä–µ–¥–º–µ—Ç–∞, —Å—Ç–æ–∏–º–æ—Å—Ç—å, —Ä–µ—Å—É—Ä—Å.
8. **POST `/api/v1/inventory/items/{itemId}/upgrade`** ‚Äì —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞ (—É—Ä–æ–≤–µ–Ω—å, —Ä–µ—Å—É—Ä—Å—ã, –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å).
9. **POST `/api/v1/inventory/items/{itemId}/enchant`** ‚Äì –Ω–∞–ª–æ–∂–µ–Ω–∏–µ –∑–∞—á–∞—Ä–æ–≤–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª—ã).
10. **GET `/api/v1/inventory/items/{itemId}/quality`** ‚Äì –ø–æ–ª—É—á–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ, –±–æ–Ω—É—Å—ã, –∏—Å—Ç–æ—Ä–∏—é —Ä–µ–º–æ–Ω—Ç–æ–≤.
11. **POST `/api/v1/inventory/slots/expand`** ‚Äì —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è (–ø–µ—Ä–∫–∏, premium, –∫–≤–µ—Å—Ç).
12. **POST `/api/v1/bank/slots/expand`** ‚Äì —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –±–∞–Ω–∫–∞/—Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (–æ–ø–ª–∞—Ç–∞ –≤–∞–ª—é—Ç–æ–π).
13. **GET `/api/v1/inventory/logs`** ‚Äì –∏—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π (pickup, drop, transfer, upgrade) —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.
14. **POST `/api/v1/inventory/alerts`** ‚Äì –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞, –∞–≤—Ç–æ–ª—É—Ç, –Ω–∏–∑–∫–∞—è –ø—Ä–æ—á–Ω–æ—Å—Ç—å).
15. **WS `/api/v1/inventory/stream`** ‚Äì realtime —Å–æ–±—ã—Ç–∏—è: `weight-changed`, `item-acquired`, `auto-loot`, `item-upgraded`, `repair-failed`, `slots-expanded`.

---

## üß± –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

- **InventoryStatus** ‚Äì `currentWeight`, `maxWeight`, `encumbranceState`, `speedModifier`, `bonuses[]`, `warnings[]`.
- **AutoLootSettings** ‚Äì `enabled`, `minRarity`, `autoPickupTypes[]`, `skipIfOverweight`, `blacklist[]`.
- **BatchPickupRequest** ‚Äì `sourceId`, `drops[]`, `ignoreWeightCheck`, `auditId`.
- **BatchTransferRequest** ‚Äì `items[]`, `fromStorage`, `toStorage`, `allowPartial`, `auditId`.
- **ItemMaintenanceResult** ‚Äì `itemId`, `quality`, `durability`, `cost`, `resourcesSpent`, `success`, `failureReason`.
- **UpgradeRequest** ‚Äì `materials[]`, `catalyst`, `targetLevel`, `guaranteeToken`.
- **SlotExpansionRequest** ‚Äì `storageType`, `expansionType`, `payment`, `newSlotCount`.
- **InventoryLogEntry** ‚Äì `timestamp`, `action`, `item`, `amount`, `source`, `destination`, `actor`, `metadata`.
- **InventoryAlertSubscription** ‚Äì `alertType`, `threshold`, `channels[]`, `cooldown`.
- **RealtimeEventPayload** ‚Äì union —Ç–∏–ø–æ–≤ (`weightChanged`, `itemAcquired`, `autoLoot`, `itemUpgraded`, `repairFailed`, `slotsExpanded`).
- **Error Schema (`InventoryAdvancedError`)** ‚Äì codes (`OVERWEIGHT`, `SLOT_LIMIT`, `INSUFFICIENT_RESOURCES`, `QUALITY_CAP`, `AUTO_LOOT_DISABLED`, `BATCH_LIMIT_EXCEEDED`).

---

## üß≠ –ü—Ä–∏–Ω—Ü–∏–ø—ã –∏ –ø—Ä–∞–≤–∏–ª–∞

- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: `BearerAuth` (–∏–≥—Ä–æ–∫), `ServiceToken` –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ (loot, quest).
- –õ–∏–º–∏—Ç—ã: `batch/pickup` –¥–æ 50 –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∑–∞ –∑–∞–ø—Ä–æ—Å, `transfer` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–Ω—Ç–∏-–¥—é–ø.
- –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞: API –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∑–∞–ø—Ä–µ—Ç –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ `>100%` –≤–µ—Å–∞.
- –≠–∫–æ–Ω–æ–º–∏–∫–∞: —Ä–µ–º–æ–Ω—Ç/–∞–ø–≥—Ä–µ–π–¥ —Å–ø–∏—Å—ã–≤–∞—é—Ç –≤–∞–ª—é—Ç—É/–º–∞—Ç–µ—Ä–∏–∞–ª—ã —á–µ—Ä–µ–∑ economy-service —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º.
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: `GET` –∑–∞–ø—Ä–æ—Å—ã (status/settings) —Å `Cache-Control: max-age=5`; `POST` –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫—ç—à.
- –°–æ–±—ã—Ç–∏—è: –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ event bus (`inventory:weight-changed`, `inventory:item-upgraded`).
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: auditId –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ä–µ–¥–∫–∏–º–∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ (transfer/upgrade).
- DRY: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (`responses.yaml`, `pagination.yaml`, `security.yaml`).

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã

- –û—Ç–≤–µ—Ç `InventoryStatus` —Å —Ç–µ–∫—É—â–∏–º –≤–µ—Å–æ–º 82%, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–µ.
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ-–ª—É—Ç —Ñ–∏–ª—å—Ç—Ä–∞ (—Ç–æ–ª—å–∫–æ rare+ –º–∞—Ç–µ—Ä–∏–∞–ª—ã).
- –ú–∞—Å—Å–æ–≤—ã–π pickup 5 –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ª–∏–º–∏—Ç–æ–≤.
- –£–ª—É—á—à–µ–Ω–∏–µ –æ—Ä—É–∂–∏—è –¥–æ —É—Ä–æ–≤–Ω—è 3 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–∞—Ç–∞–ª–∏–∑–∞—Ç–æ—Ä–∞.
- Event `item-upgraded` –≤ WebSocket (payload —Å –Ω–æ–≤—ã–º –∫–∞—á–µ—Å—Ç–≤–æ–º).

---

## üîó –°–≤—è–∑–Ω–æ—Å—Ç–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ/–æ–ø–µ—Ä–∞—Ü–∏–∏ core –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è (`API-TASK-128`).
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å loot-system, progression, economy –∏ notification —Å–µ—Ä–≤–∏—Å–∞–º–∏.
- –°–æ–±—ã—Ç–∏—è –≤–ª–∏—è—é—Ç –Ω–∞ cosmetics (–≤–∏—Ç—Ä–∏–Ω—ã), housing (—Ö—Ä–∞–Ω–∏–ª–∏—â–∞), companion system (–∞–≤—Ç–æ–ª—É—Ç –∫–æ–º–ø–∞–Ω—å–æ–Ω–æ–≤).

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

1. –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `inventory-advanced.yaml` —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º –∏ –ø–æ–ª–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö API.
2. –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤–µ—Å, –∞–≤—Ç–æ-—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É, –∞–≤—Ç–æ-–ª—É—Ç, —Ä–µ–º–æ–Ω—Ç/–∞–ø–≥—Ä–µ–π–¥, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤, batch –æ–ø–µ—Ä–∞—Ü–∏–∏.
3. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –æ–ø–∏—Å—ã–≤–∞—é—Ç –∫–∞—á–µ—Å—Ç–≤–æ, –∞–ø–≥—Ä–µ–π–¥—ã, –ª–æ–≥–∏, —Å–æ–±—ã—Ç–∏—è; –æ—à–∏–±–∫–∏ –æ—Ç—Ä–∞–∂–∞—é—Ç –∏–≥—Ä–æ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è.
4. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –ª–∏–º–∏—Ç—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ event bus —Å–æ–±—ã—Ç–∏—è.
5. –ü—Ä–∏–ª–æ–∂–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏ —Ç–µ—Å—Ç-–ø–ª–∞–Ω, –∑–∞–¥–∞–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —á–µ–∫–ª–∏—Å—Ç—É.

---

## üìé Checklist

- [ ] –®–∞–±–ª–æ–Ω `api-generation-task-template.md` —Å–æ–±–ª—é–¥—ë–Ω
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å, –º–æ–¥—É–ª—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ —Å–æ–±—ã—Ç–∏—è –ø–æ–∫—Ä—ã–≤–∞—é—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –º–æ–¥–µ–ª–∏, –æ—à–∏–±–∫–∏, –ø—Ä–∏–º–µ—Ä—ã, –∫—Ä–∏—Ç–µ—Ä–∏–∏
- [ ] –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±–Ω–æ–≤–∏—Ç—å `tasks/config/brain-mapping.yaml`

---

## ‚ùìFAQ

**Q:** –ü–æ—á–µ–º—É –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –æ—Ç `inventory.yaml`?
**A:** –ë–∞–∑–æ–≤—ã–π —Ñ–∞–π–ª –∑–∞–∫—Ä—ã–≤–∞–µ—Ç CRUD, —ç—Ç–æ—Ç ‚Äî –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ (–≤–µ—Å, –∫–∞—á–µ—Å—Ç–≤–æ, batch, —Ä–µ–º–æ–Ω—Ç—ã), —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–∏–º–∏—Ç 400 —Å—Ç—Ä–æ–∫ –∏ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.

**Q:** –ö—Ç–æ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ-–ª—É—Ç–∞?
**A:** –¢–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü (–∏–≥—Ä–æ–∫) —á–µ—Ä–µ–∑ `BearerAuth`; —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–∞–≤—Ç–æ–ª—É—Ç –∫–æ–º–ø–∞–Ω—å–æ–Ω–∞) –∏—Å–ø–æ–ª—å–∑—É—é—Ç `ServiceToken` —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏.

**Q:** –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–µ—É–¥–∞—á–Ω—ã–π –∞–ø–≥—Ä–µ–π–¥?
**A:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `success=false` –∏ —Å–æ–±—ã—Ç–∏–µ `repairFailed`, —Ä–µ—Å—É—Ä—Å—ã —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —á–∞—Å—Ç–∏—á–Ω–æ/–ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç—É; –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ audit.



### OpenAPI (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- –ó–∞–ø–æ–ª–Ω–∏ `info.x-microservice` (name, port, domain, base-path, package) –ø–æ –¥–∞–Ω–Ω—ã–º —Ü–µ–ª–µ–≤–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞.
- –í —Å–µ–∫—Ü–∏–∏ `servers` –æ—Å—Ç–∞–≤—å Production gateway `https://api.necp.game/v1` –∏ –ø—Ä–∏–º–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ `http://localhost:8080/api/v1`.
- WebSocket –º–∞—Ä—à—Ä—É—Ç—ã –ø—É–±–ª–∏–∫—É–π —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `wss://api.necp.game/v1/...`.

