# Task ID: API-TASK-233
**–¢–∏–ø:** API Generation
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≤—ã—Å–æ–∫–∏–π
**–°—Ç–∞—Ç—É—Å:** queued
**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-08 05:55
**–°–æ–∑–¥–∞—Ç–µ–ª—å:** GPT-5 Codex (API Task Creator)
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** API-TASK-215, API-TASK-227, API-TASK-230

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é P2P trade —Å–∏—Å—Ç–µ–º—ã: –æ–±–º–µ–Ω –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏/–≤–∞–ª—é—Ç–æ–π, –¥–≤–æ–π–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –∏—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫, –∞–Ω—Ç–∏—Ñ—Ä–æ–¥, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:** –°–æ–∑–¥–∞—Ç—å `api/v1/trade/trade-system.yaml`, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ `.BRAIN/05-technical/backend/trade-system.md`.

---

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è

–û–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –æ–±–º–µ–Ω –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å —ç–∫–æ–Ω–æ–º–∏–∫–æ–π, –∏–Ω–≤–µ–Ω—Ç–∞—Ä—ë–º –∏ –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π.

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä—è–º–æ–π –æ–±–º–µ–Ω –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏, –≤–∞–ª—é—Ç–æ–π, —Ç–æ–∫–µ–Ω–∞–º–∏
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞ (–¥–≤–æ–π–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –∞–Ω—Ç–∏—Å–ø–∞–º)
- –í–µ—Å—Ç–∏ –∏—Å—Ç–æ—Ä–∏—é —Å–¥–µ–ª–æ–∫ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π, –Ω–∞–ª–æ–≥–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å P2P —Ç–æ—Ä–≥–æ–≤–ª—é —Å guild/clan —ç–∫–æ–Ω–æ–º–∏–∫–æ–π –∏ —Å–æ–±—ã—Ç–∏—è–º–∏

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç

**–ü—É—Ç—å:** `.BRAIN/05-technical/backend/trade-system.md`
**–í–µ—Ä—Å–∏—è:** v1.0.0 (2025-11-07)
**–°—Ç–∞—Ç—É—Å:** approved, api-readiness: ready

**–ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–¥–µ–ª—ã:**
- Trade session lifecycle (initiate ‚Üí offer ‚Üí confirm ‚Üí finalize)
- –õ–∏–º–∏—Ç—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤, binding rules
- Currency transfer, taxes, fees
- Trade history, audit, dispute resolution
- Anti-scam –º–µ—Ö–∞–Ω–∏–∫–∏, proximity checks
- GM/Admin –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –∂—É—Ä–Ω–∞–ª —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

- `.BRAIN/05-technical/backend/inventory-system/part1-core-system.md`
- `.BRAIN/05-technical/backend/loot-system/part2-advanced-loot.md`
- `.BRAIN/05-technical/backend/economy-system.md`
- `.BRAIN/05-technical/backend/notification-system.md`
- `.BRAIN/05-technical/backend/support/support-ticket-system.md`
- `.BRAIN/05-technical/backend/admin/admin-tools-core.md`

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `API-SWAGGER/tasks/active/queue/task-215-loot-advanced-api.md`
- `API-SWAGGER/tasks/active/queue/task-227-combat-session-api.md`
- `API-SWAGGER/tasks/active/queue/task-230-notification-system-api.md`

---

## üìÅ –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API

- **–§–∞–π–ª:** `api/v1/trade/trade-system.yaml`
- **–í–µ—Ä—Å–∏—è API:** v1
- **–§–æ—Ä–º–∞—Ç:** OpenAPI 3.0.3

```
API-SWAGGER/api/v1/trade/
 ‚îú‚îÄ‚îÄ trade-system.yaml       ‚Üê —Å–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å
 ‚îú‚îÄ‚îÄ trade-components.yaml
 ‚îî‚îÄ‚îÄ trade-examples.yaml
```

---

## üèóÔ∏è –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

### Backend
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:** trade-service
- **–ü–æ—Ä—Ç:** 8095
- **API Base Path:** `/api/v1/trade`
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
  - auth-service ‚Äì –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤
  - inventory-service ‚Äì –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤, lock/unlock
  - economy-service ‚Äì –ø–µ—Ä–µ–≤–æ–¥ –≤–∞–ª—é—Ç, –∫–æ–º–∏—Å—Å–∏–∏
  - notification-service ‚Äì —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ trade –∑–∞–ø—Ä–æ—Å–∞—Ö, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
  - analytics-service ‚Äì —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–¥–µ–ª–æ–∫, –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  - moderation-service ‚Äì –∞–Ω—Ç–∏—Ñ—Ä–æ–¥, –∂–∞–ª–æ–±—ã, —Å–∞–Ω–∫—Ü–∏–∏
  - support-service ‚Äì —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å–ø–æ—Ä–æ–≤
  - realtime-service ‚Äì live –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–∫–Ω–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏

### Frontend
- **–ú–æ–¥—É–ª—å:** `modules/economy/trade`
- **State Store:** `useTradeStore`
- **State:** `currentTrade`, `offers`, `items`, `currency`, `timer`, `history`
- **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** `TradeWindow`, `TradeOfferPanel`, `TradeConfirmation`, `TradeHistoryList`, `TradeWarningBanner`, `TradeRestrictionsModal`
- **–§–æ—Ä–º—ã:** `TradeInviteForm`, `TradeItemForm`, `TradeCurrencyForm`, `TradeDisputeForm`
- **–•—É–∫–∏:** `useTradeSession`, `useTradeHistory`, `useTradeValidation`, `useTradeNotifications`

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è YAML

```yaml
# Target Architecture:
# - Microservice: trade-service (port 8095)
# - API Base: /api/v1/trade
# - Dependencies: auth, inventory, economy, notification, analytics, moderation, support, realtime
# - Frontend Module: modules/economy/trade (useTradeStore)
# - UI: TradeWindow, TradeOfferPanel, TradeConfirmation, TradeHistoryList, TradeWarningBanner, TradeRestrictionsModal
# - Forms: TradeInviteForm, TradeItemForm, TradeCurrencyForm, TradeDisputeForm
# - Hooks: useTradeSession, useTradeHistory, useTradeValidation, useTradeNotifications
```

---

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å (–¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω)

1. –û–ø–∏—Å–∞—Ç—å –º–æ–¥–µ–ª–∏ trade session, offers, items, currency, confirmations, history.
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–ª–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –æ—Ç–º–µ–Ω—ã.
3. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (binding, soulbound, level requirements).
4. –û–ø–∏—Å–∞—Ç—å –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤/–≤–∞–ª—é—Ç—ã –ø–æ—Å–ª–µ finalize, –æ–±—Ä–∞–±–æ—Ç–∫—É COD-like —Ñ–∏—á.
5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, realtime —Å–æ–±—ã—Ç–∏—è, —Ç–∞–π–º–µ—Ä—ã session timeout.
6. –í–µ—Å—Ç–∏ –∂—É—Ä–Ω–∞–ª —Å–¥–µ–ª–æ–∫, audit trail, dispute workflow.
7. –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å GM/Admin endpoints –¥–ª—è –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞, –≤–æ–∑–≤—Ä–∞—Ç–æ–≤, –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.
8. –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å –∞–Ω—Ç–∏—Å–ø–∞–º, rate limits, blacklists.
9. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã, —Ç–µ—Å—Ç-–∫–µ–π—Å—ã, —á–µ–∫–ª–∏—Å—Ç.

---

## üîÄ Endpoints

1. **POST `/api/v1/trade/sessions`** ‚Äì –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å trade (target player, context, restrictions).
2. **GET `/api/v1/trade/sessions/{sessionId}`** ‚Äì —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Å—Å–∏–∏, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω, —Ç–∞–π–º–µ—Ä.
3. **POST `/api/v1/trade/sessions/{sessionId}/items`** ‚Äì –¥–æ–±–∞–≤–∏—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç –≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.
4. **DELETE `/api/v1/trade/sessions/{sessionId}/items/{itemEntryId}`** ‚Äì —É–±—Ä–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.
5. **POST `/api/v1/trade/sessions/{sessionId}/currency`** ‚Äì –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≤–∞–ª—é—Ç—É (amount, currencyType).
6. **POST `/api/v1/trade/sessions/{sessionId}/lock`** ‚Äì –∏–≥—Ä–æ–∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–≤–æ—ë –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ (lock-in).
7. **POST `/api/v1/trade/sessions/{sessionId}/unlock`** ‚Äì —Å–Ω—è—Ç—å lock –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π.
8. **POST `/api/v1/trade/sessions/{sessionId}/confirm`** ‚Äì —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏.
9. **POST `/api/v1/trade/sessions/{sessionId}/cancel`** ‚Äì –æ—Ç–º–µ–Ω–∏—Ç—å —Ç–æ—Ä–≥–æ–≤–ª—é (–¥–æ–±—Ä–æ–≤–æ–ª—å–Ω–æ –∏–ª–∏ –∞–≤—Ç–æ).
10. **POST `/api/v1/trade/sessions/{sessionId}/pause`** ‚Äì –≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (disconnect, incident).
11. **POST `/api/v1/trade/sessions/{sessionId}/resume`** ‚Äì –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ –ø–∞—É–∑—ã.
12. **GET `/api/v1/trade/sessions/{sessionId}/history`** ‚Äì –∂—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π –≤–Ω—É—Ç—Ä–∏ —Å–µ—Å—Å–∏–∏.
13. **GET `/api/v1/trade/history`** ‚Äì –∏—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫ –∏–≥—Ä–æ–∫–∞ (—Ñ–∏–ª—å—Ç—Ä—ã: period, partner, item).
14. **POST `/api/v1/trade/sessions/{sessionId}/dispute`** ‚Äì –æ—Ç–∫—Ä—ã—Ç—å —Å–ø–æ—Ä/–∂–∞–ª–æ–±—É (support workflow).
15. **POST `/api/v1/trade/sessions/{sessionId}/gm/intervene`** ‚Äì GM –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ (freeze, rollback, confiscate).
16. **GET `/api/v1/trade/restrictions`** ‚Äì —Ç–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (blacklist, cooldowns, trade bans).
17. **POST `/api/v1/trade/restrictions`** ‚Äì –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (GM/anti-cheat).
18. **GET `/api/v1/trade/stats`** ‚Äì –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (volume, suspicious trades, taxes).
19. **POST `/api/v1/trade/invitations`** ‚Äì –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ç–æ—Ä–≥–æ–≤–ª—é (–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ).
20. **WS `/api/v1/trade/sessions/{sessionId}/stream`** ‚Äì —Å–æ–±—ã—Ç–∏—è: `session-updated`, `item-added`, `item-removed`, `currency-updated`, `player-locked`, `player-confirmed`, `session-cancelled`, `trade-completed`, `dispute-opened`.

---

## üß± –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

- **TradeSession** ‚Äì `sessionId`, `initiatorId`, `targetId`, `status`, `startedAt`, `expiresAt`, `context` (`WORLD|MARKET|GUILD_HALL`), `location`.
- **TradeOffer** ‚Äì `offerId`, `playerId`, `items[]`, `currency`, `locked`, `confirmed`, `updatedAt`.
- **TradeItem** ‚Äì `itemEntryId`, `itemId`, `name`, `quantity`, `rarity`, `bindType`, `tradable`, `metadata`.
- **TradeCurrency** ‚Äì `currencyType`, `amount`, `limit`, `fee`, `tax`.
- **TradeHistoryEntry** ‚Äì `entryId`, `sessionId`, `playerId`, `action`, `payload`, `timestamp`.
- **TradeRestriction** ‚Äì `playerId`, `type` (`BAN|LIMIT|COOLDOWN`), `reason`, `expiresAt`.
- **TradeDispute** ‚Äì `disputeId`, `sessionId`, `reporterId`, `status`, `resolution`, `notes`.
- **RealtimeEventPayload** ‚Äì `sessionUpdated`, `itemAdded`, `itemRemoved`, `currencyUpdated`, `playerLocked`, `playerConfirmed`, `sessionCancelled`, `tradeCompleted`, `disputeOpened`.
- **Error Schema (`TradeError`)** ‚Äì codes (`TRADE_NOT_FOUND`, `TRADE_LOCKED`, `ITEM_NOT_TRADABLE`, `CURRENCY_LIMIT`, `CONFIRMATION_PENDING`, `RESTRICTION_ACTIVE`, `SESSION_TIMEOUT`, `DISPUTE_ALREADY_OPEN`).

---

## üß≠ –ü—Ä–∏–Ω—Ü–∏–ø—ã –∏ –ø—Ä–∞–≤–∏–ª–∞

- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: `BearerAuth`; GM/Admin –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ scope (`TradeGM`).
- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å: –ø—Ä–µ–¥–º–µ—Ç—ã –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –Ω–∞ –≤—Ä–µ–º—è trade; –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ —Å–Ω–∏–º–∞–µ—Ç—Å—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞.
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –ª–∏–º–∏—Ç—ã –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫ –≤ –¥–µ–Ω—å, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤.
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: proximity check, anti-spam, escrow –¥–ª—è –≤–∞–ª—é—Ç—ã.
- Audit: –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è; –∏—Å—Ç–æ—Ä–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ support –∏ moderation.
- Localization: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –æ–ø–∏—Å–∞–Ω–∏—è —á–µ—Ä–µ–∑ notification-service –∏ templates.
- Scalability: sharding trade sessions –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º, —Ö—Ä–∞–Ω–∏—Ç—å state –≤ Redis + persistent store.

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã

- –¢–æ—Ä–≥–æ–≤–ª—è –ø—Ä–µ–¥–º–µ—Ç–æ–º –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ —Å –¥–≤–æ–π–Ω—ã–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –∏ –Ω–∞–ª–æ–≥–æ–º.
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Ç–æ—Ä–≥–æ–≤–ª—é —á–µ—Ä–µ–∑ friend list –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏ —Å –≤–∞–ª—é—Ç–æ–π.
- –û—Ç–∫—Ä—ã—Ç–∏–µ —Å–ø–æ—Ä–∞ –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã —Å–¥–µ–ª–∫–∏; —Å–≤—è–∑—å —Å support.
- GM –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ: –∑–∞–º–æ—Ä–æ–∑–∫–∞ —Å–¥–µ–ª–∫–∏ –∏ –≤–æ–∑–≤—Ä–∞—Ç –ø—Ä–µ–¥–º–µ—Ç–æ–≤.
- WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `item-added` —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π UI.

---

## üîó –°–≤—è–∑–Ω–æ—Å—Ç–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å inventory, economy, loot, notification, analytics, support, moderation.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è UI `TradeWindow`, push/notification –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö.
- –°–æ–±—ã—Ç–∏—è –≤–ª–∏—è—é—Ç –Ω–∞ achievements, quest objectives (trade tasks), economy dashboards.

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

1. `trade-system.yaml` –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ç–æ—Ä–≥–æ–≤–ª–∏, —Å–æ–±—ã—Ç–∏—è –∏ –æ—à–∏–±–∫–∏.
2. –ú–æ–¥–µ–ª–∏ –ø–æ–∫—Ä—ã–≤–∞—é—Ç –ø—Ä–µ–¥–º–µ—Ç—ã, –≤–∞–ª—é—Ç—É, –∏—Å—Ç–æ—Ä–∏—é, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è.
3. –ü—Ä–æ–ø–∏—Å–∞–Ω—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, anti-fraud, audit, GM –æ–ø–µ—Ä–∞—Ü–∏–∏.
4. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã, —Ç–µ—Å—Ç-–∫–µ–π—Å—ã, –≤—ã–ø–æ–ª–Ω–µ–Ω —á–µ–∫–ª–∏—Å—Ç.

---

## üìé Checklist

- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —à–∞–±–ª–æ–Ω `api-generation-task-template.md`
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å, UI –º–æ–¥—É–ª—å, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ —Å–æ–±—ã—Ç–∏—è –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –º–æ–¥–µ–ª–∏, –æ—à–∏–±–∫–∏, –ø—Ä–∏–º–µ—Ä—ã, –∫—Ä–∏—Ç–µ—Ä–∏–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `tasks/config/brain-mapping.yaml`

---

## ‚ùìFAQ

**Q:** –ï—Å—Ç—å –ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫—Ä–æ—Å—Å-—Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏?**
**A:** –í –ø–µ—Ä–≤–æ–π –≤–µ—Ä—Å–∏–∏ –Ω–µ—Ç; –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª–µ `shard` –∏ –æ–ø–∏—Å–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è. –í–æ–∑–º–æ–∂–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ.

**Q:** –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞–ª–æ–≥–∏ –∏ –∫–æ–º–∏—Å—Å–∏–∏?**
**A:** –≠–∫–æ–Ω–æ–º–∏–∫–∞ –∑–∞–¥–∞—ë—Ç –ø—Ä–∞–≤–∏–ª–∞; API –¥–æ–ª–∂–µ–Ω –ø–æ–∑–≤–æ–ª—è—Ç—å —É–∫–∞–∑—ã–≤–∞—Ç—å `fee/tax` –∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–∞–Ω–∏—è. –†–∞—Å—á—ë—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ economy-service.



### OpenAPI (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- –ó–∞–ø–æ–ª–Ω–∏ `info.x-microservice` (name, port, domain, base-path, package) –ø–æ –¥–∞–Ω–Ω—ã–º —Ü–µ–ª–µ–≤–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞.
- –í —Å–µ–∫—Ü–∏–∏ `servers` –æ—Å—Ç–∞–≤—å Production gateway `https://api.necp.game/v1` –∏ –ø—Ä–∏–º–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ `http://localhost:8080/api/v1`.
- WebSocket –º–∞—Ä—à—Ä—É—Ç—ã –ø—É–±–ª–∏–∫—É–π —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `wss://api.necp.game/v1/...`.

