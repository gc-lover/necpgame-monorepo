# Task ID: API-TASK-242
**–¢–∏–ø:** API Generation
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≤—ã—Å–æ–∫–∏–π
**–°—Ç–∞—Ç—É—Å:** queued
**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-07 16:53
**–°–æ–∑–¥–∞—Ç–µ–ª—å:** AI Agent (Brain Manager)
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** [API-TASK-241]

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å REST/WS API economy-service –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏ Market Stabilizer: –∑–∞–ø—É—Å–∫ –∏–Ω—Ç–µ—Ä–≤–µ–Ω—Ü–∏–π, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤–ª–∏—è–Ω–∏—è.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:** –°–æ–∑–¥–∞—Ç—å OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é `api/v1/economy/market/stabilizer.yaml` –Ω–∞ –æ—Å–Ω–æ–≤–µ world interaction –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ —ç–∫–æ–Ω–æ–º–∏–∫–∏.

---

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è

–û–±–µ—Å–ø–µ—á–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä—ã–Ω–æ—á–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä–≤–µ–Ω—Ü–∏—è–º–∏ (freeze, reserve, incentives) –¥–ª—è UI Market Stabilizer –∏ World Pulse.

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –†–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫–æ–Ω–æ–º–∏–∫–∏ –∏–≥—Ä–æ–∫–∞–º–∏ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏.
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SLA –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –∑–∞ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º–∏.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å World Pulse (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–∞—Ö).

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫
- `.BRAIN/06-tasks/active/CURRENT-WORK/active/2025-11-07-world-interaction-ui.md` (–≤–µ—Ä—Å. 1.0.0, –æ–±–Ω–æ–≤–ª–µ–Ω–æ 2025-11-07 16:53)
  - –†–∞–∑–¥–µ–ª—ã 2.5, 3.3, 5.5, 6, 7, 12.5, 13.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ
- `.BRAIN/02-gameplay/economy/economy-analytics.md`
- `.BRAIN/02-gameplay/economy/economy-events.md`
- `.BRAIN/02-gameplay/economy/economy-logistics.md`
- `.BRAIN/05-technical/global-state/global-state-operations.md`
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ OpenAPI: `api/v1/economy/market.yaml`, `api/v1/economy/currency-exchange.yaml` (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–µ–π).

---

## üìÅ –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API

- **–§–∞–π–ª:** `api/v1/economy/market/stabilizer.yaml`
- **–î–æ–ø. —Å—Ö–µ–º—ã:** `api/v1/economy/schemas/market-stabilizer.yaml`
- **Async —Å–æ–±—ã—Ç–∏—è:** –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ `api/v1/economy/channels/market-intervention-events.yaml`

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:** economy-service (8085)
- **Frontend –º–æ–¥—É–ª—å:** `modules/economy/market-terminal`
- **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** `MarketStabilizerConsole`, `InterventionCard`, `RiskMeter`
- **Security:** scopes `economy:interventions:read`, `economy:interventions:write`

---

## üìú –¢—Ä–µ–±—É–µ–º—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
1. `GET /api/v1/economy/market/overview`
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ —Ü–µ–Ω—ã, riskIndex, –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–µ–Ω—Ü–∏–∏.
2. `GET /api/v1/economy/market/interventions`
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏: `status`, `type`, `createdBy`, `page`, `size`.
3. `POST /api/v1/economy/market/interventions`
   - –ó–∞–ø—Ä–æ—Å –∑–∞–ø—É—Å–∫–∞ –∏–Ω—Ç–µ—Ä–≤–µ–Ω—Ü–∏–∏, –ø–æ–ª—è: `type`, `duration`, `budget`, `justification`.
   - –¢—Ä–µ–±—É–µ—Ç MFA (header `X-MFA-Token`) –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è world-service (—Å–º. –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏).
4. `GET /api/v1/economy/market/interventions/{id}`
   - –î–µ—Ç–∞–ª–∏ —Å—Ç–∞—Ç—É—Å–∞, –ø—Ä–æ–≥—Ä–µ—Å—Å, —ç—Ñ—Ñ–µ–∫—Ç—ã.
5. `POST /api/v1/economy/market/interventions/{id}/cancel`
   - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ (–ø—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ –∏–ª–∏ —Ä–µ—à–µ–Ω–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏).
6. `POST /api/v1/economy/market/interventions/{id}/confirm`
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ world-service smart contract (callback)
7. `GET /api/v1/economy/market/analytics`
   - –ì—Ä–∞—Ñ–∏–∫–∏ ¬´—Ü–µ–Ω–∞ vs –∏–Ω—Ç–µ—Ä–≤–µ–Ω—Ü–∏–∏¬ª, volatility, abuse detection.

### WebSocket —Å–æ–±—ã—Ç–∏—è
- `MARKET_INTERVENTION_STATUS`
- `MARKET_RISK_CHANGED`

---

## üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ö–µ–º—ã
- `MarketOverview`
- `MarketInterventionRequest`
- `MarketIntervention`
- `MarketInterventionEffect`
- `RiskIndex`
- `MfaVerification`
- `InterventionAnalytics`

---

## ‚úÖ Acceptance Criteria
1. –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –æ–ø–∏—Å–∞–Ω—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏.
2. –£–∫–∞–∑–∞–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ MFA –∏ idempotency (header).
3. –°—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—à–∏–±–æ–∫ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `shared/responses.yaml`.
4. –û–ø–∏—Å–∞–Ω—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: max 2 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–µ–Ω—Ü–∏–∏/—Ä–µ–≥–∏–æ–Ω, cooldown 8h.
5. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è SLA (execution ‚â§15s) –∏ –∞–≤—Ç—Ä–æ–æ–ª–±–µ–∫ —É—Å–ª–æ–≤–∏–π.
6. WebSocket —Å–æ–±—ã—Ç–∏—è –æ–ø–∏—Å–∞–Ω—ã —Å payload.
7. –û—Ç—Ä–∞–∂–µ–Ω—ã —Å–≤—è–∑–∏ —Å world-service (callback status).
8. –°—Ö–µ–º—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (‚â§400 —Å—Ç—Ä–æ–∫).
9. –ü—Ä–æ–ø–∏—Å–∞–Ω—ã security —Å—Ö–µ–º—ã (JWT + scope).
10. –î–æ–±–∞–≤–ª–µ–Ω–æ `x-target-architecture` –∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –º–æ–¥—É–ª—å.

---

## FAQ / –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
- –¢–∏–ø—ã –∏–Ω—Ç–µ—Ä–≤–µ–Ω—Ü–∏–π: `PRICE_FREEZE`, `STRATEGIC_RESERVE`, `TAX_INCENTIVE`.
- –î–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `simulate=true` (GET analytics?).
- –ü–∞—Ä–∞–º–µ—Ç—Ä `forecast` –≤ overview –¥–ª—è 24h –ø—Ä–æ–≥–Ω–æ–∑–∞.
- –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å audit trail (link –Ω–∞ `api/v1/admin/world/metrics`).

---

## Checklist
- [ ] –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- [ ] REST —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –æ–ø–∏—Å–∞–Ω—ã
- [ ] WS —Å–æ–±—ã—Ç–∏—è –æ–ø–∏—Å–∞–Ω—ã
- [ ] MFA/idempotency –æ—Ç—Ä–∞–∂–µ–Ω—ã
- [ ] SLA –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –°—Ö–µ–º—ã –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è lint
- [ ] –û–±–Ω–æ–≤–∏—Ç—å brain-mapping


### OpenAPI (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- –ó–∞–ø–æ–ª–Ω–∏ `info.x-microservice` (name, port, domain, base-path, package) –ø–æ –¥–∞–Ω–Ω—ã–º —Ü–µ–ª–µ–≤–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞.
- –í —Å–µ–∫—Ü–∏–∏ `servers` –æ—Å—Ç–∞–≤—å Production gateway `https://api.necp.game/v1` –∏ –ø—Ä–∏–º–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ `http://localhost:8080/api/v1`.
- WebSocket –º–∞—Ä—à—Ä—É—Ç—ã –ø—É–±–ª–∏–∫—É–π —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `wss://api.necp.game/v1/...`.

