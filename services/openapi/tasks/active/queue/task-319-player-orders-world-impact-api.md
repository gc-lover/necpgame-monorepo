# Task ID: API-TASK-319
**–¢–∏–ø:** API Generation  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≤—ã—Å–æ–∫–∏–π  
**–°—Ç–∞—Ç—É—Å:** completed  
**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-08 12:45  
**–°–æ–∑–¥–∞—Ç–µ–ª—å:** GPT-5 Codex  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** [API-TASK-317] ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤; [API-TASK-318] ‚Äì —Ä–µ–π—Ç–∏–Ω–≥–∏; [API-TASK-158] ‚Äì –±–∞–∑–æ–≤—ã–µ social/player-orders –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é `api/v1/world/player-orders/effects.yaml`, –æ–ø–∏—Å—ã–≤–∞—é—â—É—é –≤–ª–∏—è–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –∏–≥—Ä–æ–∫–æ–≤ –Ω–∞ –º–∏—Ä: —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –≥–æ—Ä–æ–¥–æ–≤, –∫—Ä–∏–∑–∏—Å—ã, —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:** –ù–∞ –æ—Å–Ω–æ–≤–µ `.BRAIN/02-gameplay/social/player-orders-world-impact-–¥–µ—Ç–∞–ª—å–Ω–æ.md` –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å REST API –∏ —Å–æ–±—ã—Ç–∏—è world-service/economy-service/social-service –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –∑–∞–∫–∞–∑–æ–≤.

---

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è

–û–±–µ—Å–ø–µ—á–∏—Ç—å world-service –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∑–∞–∫–∞–∑–æ–≤, —á—Ç–æ–±—ã —ç–∫–æ–Ω–æ–º–∏–∫–∏, –≥–æ—Ä–æ–¥–∞ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–ª–∏ –Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–∫–æ–≤.

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –ü–æ–∑–≤–æ–ª–∏—Ç—å world/economy —Å–µ—Ä–≤–∏—Å–∞–º –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è, –∫—Ä–∏–∑–∏—Å—ã –∏ –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–∫–∞–∑–æ–≤.
- –î–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞—Ä—Ç –≤–ª–∏—è–Ω–∏—è, –Ω–æ–≤–æ—Å—Ç–Ω—ã—Ö –ª–µ–Ω—Ç –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∞–Ω–µ–ª–µ–π.
- –°–≤—è–∑–∞—Ç—å —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–∏ —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ (–Ω–∞–ª–æ–≥–∏, —Å–∞–Ω–∫—Ü–∏–∏, —Å–ø—Ä–æ—Å –Ω–∞ —É—Å–ª—É–≥–∏).

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `.BRAIN`  
**–ü—É—Ç—å:** `.BRAIN/02-gameplay/social/player-orders-world-impact-–¥–µ—Ç–∞–ª—å–Ω–æ.md`  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-08 09:57  
**–°—Ç–∞—Ç—É—Å:** approved  

**–ö–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:**
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤–ª–∏—è–Ω–∏—è: —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã, —ç–∫–æ–Ω–æ–º–∏–∫–∞, –ø–æ–ª–∏—Ç–∏–∫–∞, –≥–æ—Ä–æ–¥–∞/–ª–æ–∫–∞—Ü–∏–∏, –≥–µ–π–º–ø–ª–µ–π.
- REST endpoints: —ç—Ñ—Ñ–µ–∫—Ç—ã –º–∏—Ä–∞, –ø–µ—Ä–µ—Å—á—ë—Ç batch, –∏–Ω–¥–µ–∫—Å—ã —ç–∫–æ–Ω–æ–º–∏–∫–∏, –Ω–æ–≤–æ—Å—Ç–∏, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è world events.
- JSON —Å—Ö–µ–º—ã: `PlayerOrderImpact`, `PlayerOrderEvent`, `PlayerOrderIndex`, `PlayerOrderNews`.
- Kafka —Å–æ–±—ã—Ç–∏—è: impact, crisis, economic index, news.
- UX —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è: –∫–∞—Ä—Ç–∞ –≤–ª–∏—è–Ω–∏—è, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

- `.BRAIN/02-gameplay/social/player-orders-system-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äì –æ–±—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–∫–∞–∑–æ–≤.
- `.BRAIN/02-gameplay/social/player-orders-creation-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äì –º–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è (–∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö).
- `.BRAIN/02-gameplay/social/player-orders-reputation-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äì —Ä–µ–π—Ç–∏–Ω–≥–∏, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ –∑–∞–∫–∞–∑–∞–º.
- `.BRAIN/02-gameplay/social/relationships-system-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äì –¥–æ–≤–µ—Ä–∏–µ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏.
- `.BRAIN/05-technical/content-generation/city-life-population-algorithm.md` ‚Äì –∂–∏–≤–æ—Å—Ç—å –≥–æ—Ä–æ–¥–æ–≤ –∏ –∏–Ω–¥–µ–∫—Å—ã.
- `visual-style-locations-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äì –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∞–∫—Ç–∏–≤—ã –¥–ª—è –∫–∞—Ä—Ç –≤–ª–∏—è–Ω–∏—è.

### –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

- `api/v1/social/player-orders.yaml` ‚Äì –ø–µ—Ä–≤–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–æ–≤.
- `api/v1/social/player-orders/ratings.yaml` ‚Äì —Ä–µ–π—Ç–∏–Ω–≥ –∏ —Ä–µ–ø—É—Ç–∞—Ü–∏—è.
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±—É–¥—É—â–∏–µ —Ñ–∞–π–ª—ã: `api/v1/economy/player-orders/index.yaml`, `api/v1/social/player-orders/news.yaml`.

---

## üìÅ –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API

### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `API-SWAGGER`

**–¶–µ–ª–µ–≤–æ–π —Ñ–∞–π–ª:** `api/v1/world/player-orders/effects.yaml`  
**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏):**
- `api/v1/world/player-orders-effects-components.yaml`
- `api/v1/economy/player-orders-index.yaml`
- `api/v1/social/player-orders-news.yaml`

**API –≤–µ—Ä—Å–∏—è:** v1  
**–¢–∏–ø:** OpenAPI 3.0.3 (YAML)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
API-SWAGGER/
‚îî‚îÄ‚îÄ api/
    ‚îî‚îÄ‚îÄ v1/
        ‚îî‚îÄ‚îÄ world/
            ‚îî‚îÄ‚îÄ player-orders/
                ‚îú‚îÄ‚îÄ effects.yaml          ‚Üê —Å–æ–∑–¥–∞—Ç—å
                ‚îú‚îÄ‚îÄ events.yaml           ‚Üê (–µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤—ã–¥–µ–ª–∏—Ç—å —Å–æ–±—ã—Ç–∏—è)
                ‚îî‚îÄ‚îÄ components.yaml       ‚Üê –≤—ã–Ω–µ—Å—Ç–∏ –æ–±—â–∏–µ —Å—Ö–µ–º—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –ï—Å–ª–∏ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã –∏ –Ω–æ–≤–æ—Å—Ç–∏ —Ç—Ä–µ–±—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, –æ–ø–∏—Å–∞—Ç—å –∏—Ö –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö.
- –†–∞–∑–º–µ—Ä –∫–∞–∂–¥–æ–≥–æ YAML ‚â§400 —Å—Ç—Ä–æ–∫; –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `$ref` –Ω–∞ –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (`shared/common`).

---

## üèóÔ∏è –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

### Backend (–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã)
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:** world-service  
  - –ü–æ—Ä—Ç: 8086  
  - API Base: `/api/v1/world/player-orders/*`  
  - –î–æ–º–µ–Ω: –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∏—Ä–∞, —ç—Ñ—Ñ–µ–∫—Ç—ã, –∫—Ä–∏–∑–∏—Å—ã  
  - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: social-service (–∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∑–∞–∫–∞–∑–æ–≤), economy-service (–∏–Ω–¥–µ–∫—Å—ã), factions-service (—Å–∞–Ω–∫—Ü–∏–∏), notification-service, telemetry-service
- **–°–æ—Å–µ–¥–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã:**  
  - economy-service (–ø–æ—Ä—Ç 8085) –¥–ª—è –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ reward adjustments  
  - social-service (–ø–æ—Ä—Ç 8084) –¥–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π –∏ social feed

### Frontend
- **–ú–æ–¥—É–ª—å:** `modules/world/player-orders-impact`  
- **State Store:** `useWorldStore` (`orderImpact`, `crisisFeed`, `economicIndexes`)  
- **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã @shared/ui:** `ImpactMap`, `CrisisTicker`, `EconomicIndexCard`, `NewsFeed`, `ImpactTimeline`  
- **–§–æ—Ä–º—ã @shared/forms:** `ImpactFilterForm`, `CrisisResolutionForm`  
- **Layouts @shared/layouts:** `WorldDashboardLayout`, `AnalyticsLayout`  
- **–•—É–∫–∏ @shared/hooks:** `useRealtime`, `useMap`, `useFilters`, `usePagination`, `useNotification`

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
–í –Ω–∞—á–∞–ª–µ `effects.yaml` –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π c –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–º, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, —Ñ—Ä–æ–Ω—Ç–æ–≤—ã–º –º–æ–¥—É–ª–µ–º, UI, —Ñ–æ—Ä–º–∞–º–∏, —Ö—É–∫–∞–º–∏, Kafka —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ –±–∞–∑–æ–≤—ã–º –ø—É—Ç—ë–º.

---

## ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω

### –®–∞–≥ 1: –°–±–æ—Ä —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
1. –ò–∑—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ (`player-orders.yaml`, `ratings.yaml`).
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–µ—Ä–µ—á–µ–Ω—å —Å—É—â–Ω–æ—Å—Ç–µ–π: —ç—Ñ—Ñ–µ–∫—Ç—ã, –∫—Ä–∏–∑–∏—Å—ã, –∏–Ω–¥–µ–∫—Å—ã, –Ω–æ–≤–æ—Å—Ç–∏.
3. –£—Ç–æ—á–Ω–∏—Ç—å, –∫–∞–∫–∏–µ —Å—Ö–µ–º—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç (OrderId, CityId, Pagination).
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** —Å–ø–∏—Å–æ–∫ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

### –®–∞–≥ 2: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ endpoints
1. –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å REST API:
   - `GET /world/player-orders/effects`
   - `GET /world/player-orders/effects/{effectId}`
   - `POST /world/player-orders/effects/recalculate`
   - `POST /world/player-orders/events`
   - `GET /economy/player-orders/index`
   - `GET /social/player-orders/news`
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Ñ–∏–ª—å—Ç—Ä—ã (cityId, effectType, severity, period).
3. –û–ø–∏—Å–∞—Ç—å –∫–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤ –∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ (rate limits, auth scopes).
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ endpoints.

### –®–∞–≥ 3: –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
1. –°–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—ã: `PlayerOrderImpact`, `ImpactMagnitude`, `Crisis`, `EconomicIndex`, `ServiceDemandIndex`, `OrderNewsItem`, `ImpactRecalculateRequest`, `ImpactBatchJob`.
2. –£–∫–∞–∑–∞—Ç—å —Å–≤—è–∑–∏ (orderId, cityId, factionId, severity).
3. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã (—É—Å–ø–µ—à–Ω—ã–µ –∏ –æ—à–∏–±–æ—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏).
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** —Ä–∞–∑–¥–µ–ª `components` —Å –ø–æ–ª–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º.

### –®–∞–≥ 4: –°–æ–±—ã—Ç–∏—è –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
1. –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å `x-kafka-topics` —Å payload –∏–∑ —Å—Ö–µ–º.
2. –û–ø–∏—Å–∞—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å economy/social/services (–∫—Ç–æ —á–∏—Ç–∞–µ—Ç/–ø–∏—à–µ—Ç).
3. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø—Ä–æ –∏–Ω–¥–µ–∫—Å—ã, –∫–∞–∫ —Ñ—Ä–æ–Ω—Ç –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç.
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –≥–æ—Ç–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª —Å–æ–±—ã—Ç–∏–π –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

### –®–∞–≥ 5: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è
1. –û–±–µ—Å–ø–µ—á–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `shared/common` (responses, pagination, security).
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞, –≤—ã–Ω–µ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å `npx swagger-cli validate api/v1/world/player-orders/effects.yaml`.
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ —á–µ–∫–ª–∏—Å—Ç—É (–∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, FAQ).
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –≤–∞–ª–∏–¥–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è, –≥–æ—Ç–æ–≤–∞—è –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.

---

## üõ£Ô∏è Endpoints (–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ)

1. **GET `/world/player-orders/effects`** ‚Äì —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (—Ñ–∏–ª—å—Ç—Ä—ã: cityId, effectType, severity, status, period; –≤–∫–ª—é—á–∞–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é).  
2. **GET `/world/player-orders/effects/{effectId}`** ‚Äì –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞, —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã, KPI.  
3. **POST `/world/player-orders/effects/recalculate`** ‚Äì –∑–∞–ø—É—Å–∫ batch –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –≤–ª–∏—è–Ω–∏—è (–∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤, —ç–∫–æ–Ω–æ–º–∏–∫–∏, –∑–∞–∫–∞–∑–æ–≤).  
4. **POST `/world/player-orders/events`** ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ world events (crisis/festival) –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞—Å—á—ë—Ç–æ–≤.  
5. **GET `/economy/player-orders/index`** ‚Äì —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è `OrderEconomicIndex`, `ServiceDemandIndex`, `MarketVolatility`.  
6. **GET `/social/player-orders/news`** ‚Äì –Ω–æ–≤–æ—Å—Ç–Ω–∞—è –ª–µ–Ω—Ç–∞ (headline, tags, severity, publishedAt).  

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: —Å—Ç–∞—Ç—É—Å batch –∑–∞–¥–∞—á `/world/player-orders/effects/jobs/{jobId}` (–≤–∫–ª—é—á–∏—Ç—å –ø—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏).

---

## üß± –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏

- **PlayerOrderImpact** (`effectId`, `orderId`, `cityId`, `effectType`, `magnitude`, `duration`, `status`, `createdAt`, `expiresAt`).  
- **ImpactMagnitude** (`economic`, `social`, `political`, `security`, —à–∫–∞–ª–∞ 0‚Äì1).  
- **ImpactRecalculateRequest** (`scope`, `cityIds[]`, `period`, `triggerSource`, `force`).  
- **ImpactBatchJob** (`jobId`, `status`, `processed`, `failed`, `startedAt`, `finishedAt`, `errors[]`).  
- **PlayerOrderCrisis** (`crisisId`, `cityId`, `severity`, `triggers[]`, `mitigation`, `status`).  
- **EconomicIndex** (`orderEconomicIndex`, `serviceDemandIndex`, `volatilityIndex`, `updatedAt`).  
- **PlayerOrderNewsItem** (`newsId`, `orderId`, `headline`, `summary`, `tags[]`, `publishedAt`, `source`).  

–î–ª—è –≤—Å–µ—Ö —Å—Ö–µ–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å `required`, `enum`, `format`, `minimum/maximum`, `example`.

---

## üìè –ü—Ä–∏–Ω—Ü–∏–ø—ã

- SOLID, DRY, KISS; –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `$ref` –Ω–∞ –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∏–∑–±–µ–≥–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç–æ–≤.  
- OpenAPI 3.0.3, —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è operationId.  
- –ù–µ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤/–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ ‚Äì –æ–ø–∏—Å—ã–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö.  
- –ó–∞—â–∏—Ç–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (`recalculate`, `events`) scopes `world:manage`.  
- –£–∫–∞–∑–∞—Ç—å —Å–≤—è–∑–∏ —Å rating/creation APIs –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Kafka –ø–æ—Ç–æ–∫–æ–≤.  
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ ‚â§400 —Å—Ç—Ä–æ–∫, —Ä–∞–∑–±–∏–≤–∞—Ç—å –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã

- **–°–ø–∏—Å–æ–∫ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤** ‚Äì –ø—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –≥–æ—Ä–æ–¥–∞–º–∏ –∏ severity.  
- **–î–µ—Ç–∞–ª–∏ –∫—Ä–∏–∑–∏—Å–∞** ‚Äì payload —Å triggers –∏ mitigation steps.  
- **–ó–∞–ø—É—Å–∫ –ø–µ—Ä–µ—Å—á—ë—Ç–∞** ‚Äì –∑–∞–ø—Ä–æ—Å –∏ –æ—Ç–≤–µ—Ç —Å `jobId`.  
- **–°—Ç–∞—Ç—É—Å batch** ‚Äì –ø—Ä–∏–º–µ—Ä `completed` –∏ `failed`.  
- **–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π –∏–Ω–¥–µ–∫—Å** ‚Äì –ø—Ä–∏–º–µ—Ä —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏.  
- **–ù–æ–≤–æ—Å—Ç–Ω–∞—è –ª–µ–Ω—Ç–∞** ‚Äì –ø—Ä–∏–º–µ—Ä –∏–∑ —Ç—Ä—ë—Ö –Ω–æ–≤–æ—Å—Ç–µ–π (festival, crisis, market shift).  
- **Kafka event** ‚Äì `world.player-orders.impact` –∏ `world.player-orders.crisis`.

---

## üîó –°–≤—è–∑–Ω–æ—Å—Ç–∏

- **social-service:** –∏—Å—Ç–æ—á–Ω–∏–∫ –∑–∞–∫–∞–∑–æ–≤, –Ω–æ–≤–æ—Å—Ç–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.  
- **economy-service:** —Ä–∞—Å—á—ë—Ç –∏–Ω–¥–µ–∫—Åo–≤, –∫–æ–º–∏—Å—Å–∏–π, –Ω–∞–ª–æ–≥–æ–≤, —Å–æ–±—ã—Ç–∏–µ `economy.player-orders.index`.  
- **factions-service:** —Å–∞–Ω–∫—Ü–∏–∏, –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.  
- **notification-service:** —Ä–∞—Å—Å—ã–ª–∫–∞ –∫—Ä–∏–∑–∏—Å–æ–≤/–Ω–æ–≤–æ—Å—Ç–µ–π.  
- **analytics-service:** –¥–∞—à–±–æ—Ä–¥—ã –≥–æ—Ä–æ–¥–æ–≤ –∏ —Ñ—Ä–∞–∫—Ü–∏–π.  
- **telemetry-service:** –∞—É–¥–∏—Ç –ø–µ—Ä–µ—Å—á—ë—Ç–æ–≤ –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π.

–û–ø–∏—Å–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–∞–∫ –≤ endpoints, —Ç–∞–∫ –∏ –≤ FAQ.

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ (–º–∏–Ω. 11)

1. –§–∞–π–ª `api/v1/world/player-orders/effects.yaml` —Å–æ–∑–¥–∞–Ω —Å –≤–µ—Ä—Å–∏–µ–π `1.0.0` –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º.  
2. –í—Å–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ endpoints –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç —Å –º–µ—Ç–æ–¥–∞–º–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, requestBody, responses –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏.  
3. –°—Ö–µ–º—ã —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, –∫—Ä–∏–∑–∏—Å–æ–≤, –∏–Ω–¥–µ–∫—Å–æ–≤, –Ω–æ–≤–æ—Å—Ç–µ–π –∏ batch –∑–∞–¥–∞—á –æ–ø–∏—Å–∞–Ω—ã –∏ —Å–≤—è–∑–∞–Ω—ã —á–µ—Ä–µ–∑ `$ref`.  
4. –ü—Ä–∏–º–µ—Ä—ã JSON –æ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç —É—Å–ø–µ—à–Ω—ã–µ –∏ –æ—à–∏–±–æ—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏.  
5. Kafka —Å–æ–±—ã—Ç–∏—è –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ `x-kafka-topics` —Å payload —Å—Ö–µ–º–∞–º–∏.  
6. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `responses.yaml`, `pagination.yaml`, `security.yaml`.  
7. –£–∫–∞–∑–∞–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞ social/economy/factions —Å–µ—Ä–≤–∏—Å—ã.  
8. –û–ø–∏—Å–∞–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞–¥–º–∏–Ω—Å–∫–∏–º –æ–ø–µ—Ä–∞—Ü–∏—è–º –∏ scopes.  
9. –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã –∫–æ–¥—ã 409/422/429 –¥–ª—è –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫, –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏.  
10. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç `npx swagger-cli validate api/v1/world/player-orders/effects.yaml`.  
11. –û–±—â–∏–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ ‚â§400 —Å—Ç—Ä–æ–∫ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã).  
12. Frontend –º–æ–¥—É–ª—å `modules/world/player-orders-impact` –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

---

## ‚ùì FAQ

**Q:** –ü–æ—á–µ–º—É —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã –æ–ø–∏—Å–∞–Ω—ã –≤ world —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏?  
**A:** world-service –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç economy-service –∏ social-service –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∫–∞—Ä—Ç—ã –≤–ª–∏—è–Ω–∏—è. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π `api/v1/economy/player-orders/index.yaml`, —É–∫–∞–∑–∞–Ω –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö.

**Q:** –ö—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç `POST /effects/recalculate`?  
**A:** –ê–¥–º–∏–Ω—Å–∫–∏–µ –ø–∞–Ω–µ–ª–∏ –∏–ª–∏ scheduled jobs world-service; –æ–ø–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç scope `world:manage`. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –∫–∞–∫ Kafka —Å–æ–±—ã—Ç–∏—è.

**Q:** –ö–∞–∫ —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∏–Ω–¥–µ–∫—Å—ã?  
**A:** –ó–Ω–∞—á–µ–Ω–∏—è –∫—ç—à–∏—Ä—É—é—Ç—Å—è, –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É–∫–∞–∑–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `updatedAt` –∏ `ttl`. Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `useRealtime` –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è.

**Q:** –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫—Ä–∏–∑–∏—Å–∞—Ö –≤ –≥–æ—Ä–æ–¥–µ?  
**A:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∫—Ä–∏–∑–∏—Å–æ–≤ —Å severity –∏ triggers. –ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è endpoint `events` –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ mitigation —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

**Q:** –ö–∞–∫ —Å–≤—è–∑–∞–Ω—ã –Ω–æ–≤–æ—Å—Ç–∏ –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏?  
**A:** –ù–æ–≤–æ—Å—Ç–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ `player-orders/ratings` –∏ `player-orders.yaml`. –†–µ–π—Ç–∏–Ω–≥–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, –Ω–æ–≤–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏—Ö –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏.

---

## üìå –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- 2025-11-08 ‚Äì —Å–æ–∑–¥–∞–Ω–æ –∑–∞–¥–∞–Ω–∏–µ –ø–æ `.BRAIN/02-gameplay/social/player-orders-world-impact-–¥–µ—Ç–∞–ª—å–Ω–æ.md`, —Å—Ç–∞—Ç—É—Å `queued`.
- 2025-11-08 ‚Äì –ê–ü–ò–¢–ê–°–ö –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª –∑–∞–¥–∞—á—É, –Ω–∞—á–∞–ª–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ OpenAPI `api/v1/world/player-orders/effects.yaml` (`status: in_progress`).
- 2025-11-08 ‚Äì –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –∏ –ø—Ä–æ–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è `api/v1/world/player-orders/effects.yaml`, –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ (`status: completed`).



### OpenAPI (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- –ó–∞–ø–æ–ª–Ω–∏ `info.x-microservice` (name, port, domain, base-path, package) –ø–æ –¥–∞–Ω–Ω—ã–º —Ü–µ–ª–µ–≤–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞.
- –í —Å–µ–∫—Ü–∏–∏ `servers` –æ—Å—Ç–∞–≤—å Production gateway `https://api.necp.game/v1` –∏ –ø—Ä–∏–º–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ `http://localhost:8080/api/v1`.
- WebSocket –º–∞—Ä—à—Ä—É—Ç—ã –ø—É–±–ª–∏–∫—É–π —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `wss://api.necp.game/v1/...`.

