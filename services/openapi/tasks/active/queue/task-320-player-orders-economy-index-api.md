# Task ID: API-TASK-320
**–¢–∏–ø:** API Generation  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≤—ã—Å–æ–∫–∏–π  
**–°—Ç–∞—Ç—É—Å:** queued  
**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-08 12:55  
**–°–æ–∑–¥–∞—Ç–µ–ª—å:** GPT-5 Codex  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** [API-TASK-319] ‚Äì world effects; [API-TASK-317] ‚Äì player orders core; [API-TASK-318] ‚Äì ratings/—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é `api/v1/economy/player-orders/index.yaml`, –æ–ø–∏—Å—ã–≤–∞—é—â—É—é —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é –∑–∞–∫–∞–∑–æ–≤ –∏–≥—Ä–æ–∫–æ–≤: OrderEconomicIndex, ServiceDemandIndex, MarketVolatility –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á—ë—Ç—ã.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:** –ù–∞ –æ—Å–Ω–æ–≤–µ `.BRAIN/02-gameplay/social/player-orders-world-impact-–¥–µ—Ç–∞–ª—å–Ω–æ.md` –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å REST API economy-service –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –º–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫ –∑–∞–∫–∞–∑–æ–≤ –∏–≥—Ä–æ–∫–æ–≤.

---

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–º—É —Å–µ—Ä–≤–∏—Å—É API –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤–ª–∏—è–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –º–∏—Ä–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å world/social —Å–µ—Ä–≤–∏—Å–∞–º–∏.

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –Ω–∞–ª–æ–≥–∏ –∏ –∫–æ–º–∏—Å—Å–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–¥–µ–∫—Å–æ–≤.
- –î–∞—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–æ–≤, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤.
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è —Å –º–∏—Ä–æ–≤—ã–º–∏ –∫—Ä–∏–∑–∏—Å–∞–º–∏ –∏ —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏ –∏–≥—Ä–æ–∫–æ–≤.

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `.BRAIN`  
**–î–æ–∫—É–º–µ–Ω—Ç:** `.BRAIN/02-gameplay/social/player-orders-world-impact-–¥–µ—Ç–∞–ª—å–Ω–æ.md`  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-11-08 09:57  
**–°—Ç–∞—Ç—É—Å:** approved  

**–ö–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:**
- –ú–∞–∫—Ä–æ–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã: `OrderEconomicIndex`, `ServiceDemandIndex`, `MarketVolatility`.
- –°–≤—è–∑—å —Å world events, –∫—Ä–∏–∑–∏—Å–∞–º–∏ –∏ –Ω–æ–≤–æ—Å—Ç—è–º–∏.
- JSON —Å—Ö–µ–º—ã –∏–Ω–¥–µ–∫—Å–æ–≤, –æ—Ç—á—ë—Ç–æ–≤, alerts.
- Kafka —Å–æ–±—ã—Ç–∏—è `economy.player-orders.index`.
- UX —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∞–Ω–µ–ª–µ–π –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

- `.BRAIN/02-gameplay/social/player-orders-system-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äì –æ–±—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö.
- `.BRAIN/02-gameplay/social/player-orders-reputation-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äì –≤–ª–∏—è–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –Ω–∞ –∏–Ω–¥–µ–∫—Å—ã.
- `.BRAIN/02-gameplay/social/player-orders-creation-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äì –±—é–¥–∂–µ—Ç—ã –∏ escrow.
- `.BRAIN/02-gameplay/social/relationships-system-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äì –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ç–∏, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ —Å–ø—Ä–æ—Å.
- `.BRAIN/05-technical/content-generation/city-life-population-algorithm.md` ‚Äì –±–∞–∑–æ–≤—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –¥–ª—è –≥–æ—Ä–æ–¥–æ–≤.
- `visual-style-locations-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äì –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è UI.

### –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

- `api/v1/world/player-orders/effects.yaml` ‚Äì –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å).
- `api/v1/social/player-orders.yaml` ‚Äì –ø–µ—Ä–≤–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–æ–≤.
- `api/v1/social/player-orders/ratings.yaml` ‚Äì —Ä–µ–π—Ç–∏–Ω–≥–∏ –∏ —Ä–µ–ø—É—Ç–∞—Ü–∏—è.

---

## üìÅ –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API

### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `API-SWAGGER`

**–¶–µ–ª–µ–≤–æ–π —Ñ–∞–π–ª:** `api/v1/economy/player-orders/index.yaml`  
**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è):**  
- `api/v1/economy/player-orders/index-components.yaml`  
- `api/v1/economy/player-orders/index-examples.yaml`

**API –≤–µ—Ä—Å–∏—è:** v1  
**–¢–∏–ø:** OpenAPI 3.0.3 (YAML)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
API-SWAGGER/
‚îî‚îÄ‚îÄ api/
    ‚îî‚îÄ‚îÄ v1/
        ‚îî‚îÄ‚îÄ economy/
            ‚îî‚îÄ‚îÄ player-orders/
                ‚îú‚îÄ‚îÄ index.yaml                ‚Üê —Å–æ–∑–¥–∞—Ç—å
                ‚îú‚îÄ‚îÄ index-components.yaml     ‚Üê –≤—ã–Ω–µ—Å—Ç–∏ —Å—Ö–µ–º—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
                ‚îî‚îÄ‚îÄ index-examples.yaml       ‚Üê –ø—Ä–∏–º–µ—Ä—ã (–µ—Å–ª–∏ >400 —Å—Ç—Ä–æ–∫)
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `$ref` –Ω–∞ `shared/common` (responses, pagination, security).

---

## üèóÔ∏è –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

### Backend
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:** economy-service  
- **–ü–æ—Ä—Ç:** 8085  
- **API Base Path:** `/api/v1/economy/player-orders/*`  
- **–î–æ–º–µ–Ω:** —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã, –º–∞–∫—Ä–æ–∞–Ω–∞–ª–∏–∑, –∫–æ–º–∏—Å—Å–∏–∏  
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** social-service (–∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∑–∞–∫–∞–∑–æ–≤), world-service (—ç—Ñ—Ñ–µ–∫—Ç—ã/–∫—Ä–∏–∑–∏—Å—ã), analytics-service, notification-service, telemetry-service

### Frontend
- **–ú–æ–¥—É–ª—å:** `modules/economy/player-orders`  
- **State Store:** `useEconomyStore` (`playerOrderIndexes`, `alerts`, `historicalTrends`)  
- **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã @shared/ui:** `EconomicIndexCard`, `DemandTrendChart`, `RiskHeatmap`, `AlertBanner`, `MarketForecastPanel`  
- **–§–æ—Ä–º—ã @shared/forms:** `IndexFilterForm`, `AlertSubscriptionForm`  
- **Layouts @shared/layouts:** `EconomyDashboardLayout`, `AnalyticsLayout`  
- **–•—É–∫–∏ @shared/hooks:** `useRealtime`, `useWebsocket`, `usePagination`, `useNotification`, `useDebounce`

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
–í –Ω–∞—á–∞–ª–µ `index.yaml` –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –º–æ–¥—É–ª—å, UI/—Ñ–æ—Ä–º—ã/—Ö—É–∫–∏, Kafka —Å–æ–±—ã—Ç–∏—è, –±–∞–∑–æ–≤—ã–π –ø—É—Ç—å.

---

## ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω

### –®–∞–≥ 1: –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
1. –ò–∑—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ (world effects, social orders).
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–Ω–¥–µ–∫—Å–æ–≤, –æ—Ç—á—ë—Ç–æ–≤ –∏ alerts, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å.
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (CityId, OrderType, Pagination).
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ø–µ—Ä–µ—á–µ–Ω—å —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –¥–∞–Ω–Ω—ã–º.

### –®–∞–≥ 2: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ endpoints
1. –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å REST —Ç–æ—á–∫–∏:
   - `GET /economy/player-orders/index/current`
   - `GET /economy/player-orders/index/history`
   - `GET /economy/player-orders/index/alerts`
   - `POST /economy/player-orders/index/recalculate`
   - `POST /economy/player-orders/index/alerts/subscribe`
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã (cityId, sector, orderType, period).
3. –û–ø–∏—Å–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –∏ –∫–æ–¥—ã –æ—à–∏–±–æ–∫ (400/401/403/404/409/422/429).
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ endpoints.

### –®–∞–≥ 3: –ú–æ–¥–µ–ª–∏ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
1. –°–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—ã: `PlayerOrderEconomicIndex`, `DemandSegment`, `MarketVolatility`, `IndexHistoryPoint`, `IndexAlert`, `IndexRecalculateRequest`, `IndexSubscriptionRequest`, `IndexJobStatus`.
2. –î–æ–±–∞–≤–∏—Ç—å enums (sectors, severity, alertType), –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è min/max.
3. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã (success/validation errors).
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** —Ä–∞–∑–¥–µ–ª `components` —Å –ø–æ–ª–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º.

### –®–∞–≥ 4: –°–æ–±—ã—Ç–∏—è –∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
1. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å `x-kafka-topics` (`economy.player-orders.index`, `economy.player-orders.alert.triggered`).
2. –£–∫–∞–∑–∞—Ç—å, –∫–∞–∫ –∏–Ω–¥–µ–∫—Å—ã –≤–ª–∏—è—é—Ç –Ω–∞ –∫–æ–º–∏—Å—Å–∏–∏, escrow, –Ω–∞–ª–æ–≥–∏.
3. –û–ø–∏—Å–∞—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å world-service (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫—Ä–∏–∑–∏—Å–æ–≤) –∏ social-service (—Ä–µ–π—Ç–∏–Ω–≥–∏).

### –®–∞–≥ 5: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è
1. –£–±–µ–¥–∏—Ç—å—Å—è –≤ —Å–æ–±–ª—é–¥–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ 400 —Å—Ç—Ä–æ–∫, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–Ω–µ—Å—Ç–∏ —Å—Ö–µ–º—ã.
2. –î–æ–±–∞–≤–∏—Ç—å `info.version` (1.0.0) –∏ —Å—Å—ã–ª–∫—É –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫.
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å `npx swagger-cli validate api/v1/economy/player-orders/index.yaml` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ –∫—Ä–∏—Ç–µ—Ä–∏—è—Ö).
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ–∫–ª–∏—Å—Ç (–ø—Ä–∏–º–µ—Ä—ã, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, FAQ).

---

## üõ£Ô∏è Endpoints (–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ)

1. **GET `/economy/player-orders/index/current`** ‚Äì —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤ –ø–æ –≥–æ—Ä–æ–¥–∞–º/—Å–µ–≥–º–µ–Ω—Ç–∞–º (—Ñ–∏–ª—å—Ç—Ä—ã: cityId, sector, orderType).  
2. **GET `/economy/player-orders/index/history`** ‚Äì –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã –∏–Ω–¥–µ–∫—Å–æ–≤, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏.  
3. **GET `/economy/player-orders/index/alerts`** ‚Äì –∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –ø—Ä–æ—à–ª—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (severity, trigger, impactedCities).  
4. **POST `/economy/player-orders/index/recalculate`** ‚Äì –∑–∞–ø—É—Å–∫ –ø–µ—Ä–µ—Å—á—ë—Ç–∞ (batch job) —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `scope`, `period`, `triggerSource`.  
5. **GET `/economy/player-orders/index/jobs/{jobId}`** ‚Äì —Å—Ç–∞—Ç—É—Å –ø–µ—Ä–µ—Å—á—ë—Ç–∞.  
6. **POST `/economy/player-orders/index/alerts/subscribe`** ‚Äì –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (players, factions, cities).  

–í—Å–µ endpoints –¥–æ–ª–∂–Ω—ã —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –æ–±—â–∏–µ –æ—Ç–≤–µ—Ç—ã (`responses.yaml`), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å BearerAuth, –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å rate limiting –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.

---

## üß± –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏

- **PlayerOrderEconomicIndex** (`orderEconomicIndex`, `serviceDemandIndex`, `marketVolatility`, `cityId`, `sector`, `timestamp`, `confidence`).  
- **IndexHistoryPoint** (`timestamp`, `value`, `delta`, `trend`, `events[]`).  
- **IndexAlert** (`alertId`, `severity`, `trigger`, `cityId`, `sector`, `description`, `recommendedActions`, `createdAt`, `expiresAt`).  
- **IndexRecalculateRequest** (`scope`, `cityIds[]`, `sectors[]`, `period`, `force`, `initiator`).  
- **IndexJobStatus** (`jobId`, `status`, `processed`, `failed`, `startedAt`, `finishedAt`, `errors[]`).  
- **IndexSubscriptionRequest** (`subscriberId`, `role`, `channel`, `thresholds`, `cities[]`, `sectors[]`).  
- **IndexForecast** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äì –ø—Ä–æ–≥–Ω–æ–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã.

–ö–∞–∂–¥–∞—è –º–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å `required`, `enum`, `format`, `minimum/maximum`, `example`.

---

## üìè –ü—Ä–∏–Ω—Ü–∏–ø—ã

- SOLID, DRY, KISS; –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `$ref` –¥–ª—è –æ–±—â–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä, –∏–∑–±–µ–≥–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç–æ–≤.  
- OpenAPI 3.0.3, RESTful –æ–ø–µ—Ä–∞—Ü–∏–∏, –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ `operationId`.  
- –ù–µ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã; –æ–ø–∏—Å—ã–≤–∞—Ç—å –∏—Ö –∫–∞–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é economy-service.  
- –£–∫–∞–∑–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç world/social —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ Kafka —Å–æ–±—ã—Ç–∏–π.  
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (BearerAuth + scopes `economy:read`, `economy:manage`).  
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ ‚â§400 —Å—Ç—Ä–æ–∫, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `components` —Ñ–∞–π–ª—ã –ø—Ä–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏.

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã

- **–¢–µ–∫—É—â–∏–π –∏–Ω–¥–µ–∫—Å –ø–æ –≥–æ—Ä–æ–¥—É** ‚Äì –≤—ã–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏–π, confidence, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π.  
- **–ò—Å—Ç–æ—Ä–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤** ‚Äì –º–∞—Å—Å–∏–≤ —Ç–æ—á–µ–∫ —Å –ø–µ—Ä–∏–æ–¥–æ–º –∏ —Ç—Ä–µ–Ω–¥–æ–º.  
- **Alert** ‚Äì –ø—Ä–∏–º–µ—Ä –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è severity=high —Å —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏.  
- **–ó–∞–ø—Ä–æ—Å –ø–µ—Ä–µ—Å—á—ë—Ç–∞** ‚Äì payload —Å `scope=city`, `cityIds`, `period`.  
- **–°—Ç–∞—Ç—É—Å job** ‚Äì `completed` –∏ `failed` –ø—Ä–∏–º–µ—Ä—ã.  
- **–ü–æ–¥–ø–∏—Å–∫–∞** ‚Äì –ø—Ä–∏–º–µ—Ä –ø–æ–¥–ø–∏—Å–∫–∏ –¥–ª—è faction —Å –∫–∞–Ω–∞–ª–æ–º `webhook`.  
- **Kafka payload** ‚Äì `economy.player-orders.index`.

---

## üîó –°–≤—è–∑–Ω–æ—Å—Ç–∏

- **world-service:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π –∏ –∫—Ä–∏–∑–∏—Å–æ–≤.  
- **social-service:** –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏, escrow, —Ä–µ–π—Ç–∏–Ω–≥–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–¥–µ–∫—Å–æ–≤.  
- **notification-service:** —Ä–∞—Å—Å—ã–ª–∞–µ—Ç alerts –∏–≥—Ä–æ–∫–∞–º –∏ –∫–ª–∞–Ω–∞–º.  
- **analytics-service:** —Å—Ç—Ä–æ–∏—Ç –¥–∞—à–±–æ—Ä–¥—ã –∏ –ø—Ä–æ–≥–Ω–æ–∑—ã.  
- **factions-service:** —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç –Ω–∞–ª–æ–≥–∏ –∏ —Å–∞–Ω–∫—Ü–∏–∏.  
- **telemetry-service:** —Ö—Ä–∞–Ω–∏—Ç –ª–æ–≥–∏ –ø–µ—Ä–µ—Å—á—ë—Ç–æ–≤ –∏ –∞–Ω–æ–º–∞–ª–∏–π.

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

1. –°–æ–∑–¥–∞–Ω `api/v1/economy/player-orders/index.yaml` —Å –≤–µ—Ä—Å–∏–µ–π `1.0.0` –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º.  
2. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –∑–∞—è–≤–ª–µ–Ω–Ω—ã–µ endpoints, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∑–∞–ø—Ä–æ—Å—ã, –æ—Ç–≤–µ—Ç—ã, –æ—à–∏–±–∫–∏.  
3. –û–ø–∏—Å–∞–Ω—ã —Å—Ö–µ–º—ã –∏–Ω–¥–µ–∫—Å–æ–≤, –∏—Å—Ç–æ—Ä–∏–∏, alerts, job —Å—Ç–∞—Ç—É—Å–∞, –ø–æ–¥–ø–∏—Å–æ–∫.  
4. –ü—Ä–∏–º–µ—Ä—ã JSON –ø–æ–∫—Ä—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ –æ—à–∏–±–∫–∏.  
5. Kafka —Å–æ–±—ã—Ç–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `x-kafka-topics`.  
6. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `responses.yaml`, `pagination.yaml`, `security.yaml`.  
7. –£–∫–∞–∑–∞–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç world/social —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞.  
8. –û–ø–∏—Å–∞–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (BearerAuth + scopes).  
9. `npx swagger-cli validate api/v1/economy/player-orders/index.yaml` –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ ‚Äî –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö.  
10. –†–∞–∑–º–µ—Ä –∫–∞–∂–¥–æ–≥–æ YAML —Ñ–∞–π–ª–∞ ‚â§400 —Å—Ç—Ä–æ–∫ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã).  
11. Frontend –º–æ–¥—É–ª—å `modules/economy/player-orders` –ø–æ–ª—É—á–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.  
12. –î–æ–±–∞–≤–ª–µ–Ω—ã FAQ —Å —Ç–∏–ø–∏—á–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏ (–ø–æ—Ä–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤, –ø—Ä–æ–≥–Ω–æ–∑—ã).

---

## ‚ùì FAQ

**Q:** –ö–∞–∫ —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∏–Ω–¥–µ–∫—Å—ã?  
**A:** –ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç) –∏–ª–∏ –ø—Ä–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞—Ö world/social —Å–æ–±—ã—Ç–∏–π. API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–µ `updatedAt` –∏ `ttl`.

**Q:** –ú–æ–∂–Ω–æ –ª–∏ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑—ã?  
**A:** –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω –æ–±—ä–µ–∫—Ç `IndexForecast`; –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`.  

**Q:** –ö–∞–∫ –∏–Ω–¥–µ–∫—Å—ã –≤–ª–∏—è—é—Ç –Ω–∞ –∫–æ–º–∏—Å—Å–∏–∏?  
**A:** economy-service –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –∫–æ–º–∏—Å—Å–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ç–µ–º –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è social-service –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∑–∞–∫–∞–∑–æ–≤. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ `relatedPolicies`.

**Q:** –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–æ–≤?  
**A:** –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è alert (severity high/critical), —Ä–∞—Å—Å—ã–ª–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ notification-service. –í –æ—Ç–≤–µ—Ç–µ `/alerts` —É–∫–∞–∑–∞–Ω—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è.

**Q:** –ß–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è NPC –∏ –∏–≥—Ä–æ–∫–æ–≤?  
**A:** –ü–∞—Ä–∞–º–µ—Ç—Ä `sector` (player, npc, corporate). –î–ª—è NPC –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∏–∑ `npc-hiring-system`.

---

## üìå –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- 2025-11-08 ‚Äì —Å–æ–∑–¥–∞–Ω–æ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ `.BRAIN/02-gameplay/social/player-orders-world-impact-–¥–µ—Ç–∞–ª—å–Ω–æ.md`, —Å—Ç–∞—Ç—É—Å `queued`.



### OpenAPI (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- –ó–∞–ø–æ–ª–Ω–∏ `info.x-microservice` (name, port, domain, base-path, package) –ø–æ –¥–∞–Ω–Ω—ã–º —Ü–µ–ª–µ–≤–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞.
- –í —Å–µ–∫—Ü–∏–∏ `servers` –æ—Å—Ç–∞–≤—å Production gateway `https://api.necp.game/v1` –∏ –ø—Ä–∏–º–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ `http://localhost:8080/api/v1`.
- WebSocket –º–∞—Ä—à—Ä—É—Ç—ã –ø—É–±–ª–∏–∫—É–π —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `wss://api.necp.game/v1/...`.

