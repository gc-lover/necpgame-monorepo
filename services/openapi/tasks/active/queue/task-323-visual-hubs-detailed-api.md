# Task ID: API-TASK-323
**–¢–∏–ø:** API Generation  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≤—ã—Å–æ–∫–∏–π  
**–°—Ç–∞—Ç—É—Å:** queued  
**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-08 16:22  
**–°–æ–∑–¥–∞—Ç–µ–ª—å:** AI Agent (–î–£–ê–ü–ò–¢–ê–°–ö)  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** API-TASK-322 (–¥–ª—è —Å—Å—ã–ª–æ–∫ –Ω–∞ –ª–æ–∫–∞—Ü–∏–∏)

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–û–ø–∏—Å–∞–Ω–∏–µ REST API –¥–ª—è –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ö–∞–±–æ–≤, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –º–∏—Ä–∞.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:** –°–æ–∑–¥–∞—Ç—å `api/v1/social/visuals/hubs-detailed.yaml`, –æ–±–µ—Å–ø–µ—á–∏–≤ –≤—ã–¥–∞—á—É –∫–∞—Ä—Ç–æ—á–µ–∫ Skyline Agora, Undermarket Bazaar, League Hub Conflux –∏ –¥—Ä—É–≥–∏—Ö —Ö–∞–±–æ–≤, –∞ —Ç–∞–∫–∂–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Å–≤—è–∑–µ–π —Å —Å–æ–±—ã—Ç–∏—è–º–∏.

---

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å social-service API, –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–µ–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Ö–∞–±–∞–º —Å —É—á—ë—Ç–æ–º —Ç—Ä–∞—Ñ–∏–∫–∞, NPC, –±–∏–∑–Ω–µ—Å-—Ñ—É–Ω–∫—Ü–∏–π –∏ —Å–≤—è–∑–µ–π —Å —Ä–µ–π–¥–∞–º–∏/–º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–º.

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- UI –º–æ–¥—É–ª—é `modules/social/hubs` –Ω—É–∂–Ω—ã –≥–æ—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞—Ä—Ç –∏ —Å–ø–∏—Å–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ö–∞–±–æ–≤.
- –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∏ matchmaking –¥–æ–ª–∂–Ω–∞ –∑–Ω–∞—Ç—å —Ç–µ–∫—É—â—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å —Ö–∞–±–æ–≤.
- –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –∏ –∏–≤–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –ø–ª–∞–Ω–∏—Ä—É—é—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –∫–∞–º–ø–∞–Ω–∏–∏.

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `.BRAIN`  
**–ü—É—Ç—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç—É:** `.BRAIN/03-lore/_03-lore/visual-guides/visual-style-locations-–¥–µ—Ç–∞–ª—å–Ω–æ.md`  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0.0  
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-11-08 11:06  
**–°—Ç–∞—Ç—É—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞:** approved

**–ß—Ç–æ –≤–∞–∂–Ω–æ –∏–∑ —ç—Ç–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞:**
- –û–ø–∏—Å–∞–Ω–∏—è Skyline Agora, Undermarket Bazaar, League Hub Conflux, Synth Faith Sanctum.
- –ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–æ—Å–≤–µ—â–µ–Ω–∏–µ, –º—É–∑—ã–∫—É, —Ç–æ–ª–ø—ã), —Ñ—É–Ω–∫—Ü–∏–∏ (VR-–ø–æ–¥–∏—É–º—ã, –ø–æ–¥–ø–æ–ª—å–Ω—ã–µ –∫–ª–∏–Ω–∏–∫–∏, —Å—Ç—Ä–∏–º–∏–Ω–≥ —Å—Ç—É–¥–∏–∏).
- –°–≤—è–∑—å —Å KPI: HubAmbienceRetention, EventVisualImpact.
- Kafka —Ç–æ–ø–∏–∫ `social.visuals.hub.activity`.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

- `.BRAIN/02-gameplay/social/social-overview.md` ‚Äî –æ–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∫.
- `.BRAIN/02-gameplay/social/npc-simulation.md` ‚Äî –¥–∞–Ω–Ω—ã–µ –æ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ NPC –∏ —Ç–∏–ø–∞—Ö –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
- `.BRAIN/02-gameplay/social/player-orders-creation-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ö–∞–±–æ–≤ –æ—Ç –∑–∞–∫–∞–∑–æ–≤ –∏ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ (–¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏).
- `API-SWAGGER/api/v1/social/npc/schedules.yaml` ‚Äî –ø—Ä–∏–º–µ—Ä—ã –º–æ–¥–µ–ª–µ–π social-service, –ø—Ä–∏–≥–æ–¥–Ω—ã—Ö –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `API-SWAGGER/tasks/active/queue/task-322-visual-locations-detailed-api.md` ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ —Å—Å—ã–ª–æ–∫ –Ω–∞ –ª–æ–∫–∞—Ü–∏–∏.
- `.BRAIN/05-technical/content-generation/city-life-population-algorithm.md` ‚Äî –¥–∞–Ω–Ω—ã–µ –æ –ø–æ—Ç–æ–∫–∞—Ö –∏ —Å–º–µ–Ω–∞—Ö NPC.

---

## üìÅ –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API

### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `API-SWAGGER`

**–¶–µ–ª–µ–≤–æ–π —Ñ–∞–π–ª:** `api/v1/social/visuals/hubs-detailed.yaml`  
**API –≤–µ—Ä—Å–∏—è:** v1  
**–¢–∏–ø —Ñ–∞–π–ª–∞:** OpenAPI 3.0.3 (YAML)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:**
```
API-SWAGGER/
‚îî‚îÄ‚îÄ api/
    ‚îî‚îÄ‚îÄ v1/
        ‚îî‚îÄ‚îÄ social/
            ‚îî‚îÄ‚îÄ visuals/
                ‚îú‚îÄ‚îÄ schemas/
                ‚îÇ   ‚îú‚îÄ‚îÄ visual-hub-detailed.yaml
                ‚îÇ   ‚îî‚îÄ‚îÄ hub-activity.yaml
                ‚îî‚îÄ‚îÄ hubs-detailed.yaml
```

–°–æ–∑–¥–∞—Ç—å README –≤ `api/v1/social/visuals/` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∏ —Å—Å—ã–ª–∫–æ–π –Ω–∞ world visuals.

---

## üèóÔ∏è –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

### Backend (–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å)
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:** social-service  
- **–ü–æ—Ä—Ç:** 8084  
- **API Base:** `/api/v1/social/visuals/*`  
- **–î–æ–º–µ–Ω:** —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ö–∞–±—ã, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞  
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** world-service (–¥–µ—Ç–∞–ª–∏ –ª–æ–∫–∞—Ü–∏–π), economy-service (—Ä—ã–Ω–∫–∏), marketing-service (–∫–∞–º–ø–∞–Ω–∏–∏), realtime-gateway (WebSocket push)

### OpenAPI (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- –ó–∞–ø–æ–ª–Ω–∏ `info.x-microservice` (name, port, domain, base-path, package) –ø–æ –¥–∞–Ω–Ω—ã–º —Ü–µ–ª–µ–≤–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞.
- –í —Å–µ–∫—Ü–∏–∏ `servers` –æ—Å—Ç–∞–≤—å Production gateway `https://api.necp.game/v1` –∏ –ø—Ä–∏–º–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ `http://localhost:8080/api/v1`.
- WebSocket –º–∞—Ä—à—Ä—É—Ç—ã –ø—É–±–ª–∏–∫—É–π —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `wss://api.necp.game/v1/...`.

### Frontend (–º–æ–¥—É–ª—å)
- **–ú–æ–¥—É–ª—å:** modules/social/hubs  
- **State Store:** useSocialStore (visualHubs, hubActivity, hubFilters)  
- **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (@shared/ui):** HubCard, CrowdMeter, ActivityTimeline, AmbientTagList, VendorList  
- **–§–æ—Ä–º—ã (@shared/forms):** HubFilterForm, EventSubscriptionForm  
- **Layouts:** SocialLayout, GameLayout  
- **–•—É–∫–∏:** useRealtime, usePolling, useSocialStoreFilters

### Kafka / Streams
- –ü–æ—Å—Ç–∞–≤—â–∏–∫: social-service ‚Üí `social.visuals.hub.activity`  
- –ü–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞: `{ hubId, activityLevel, featuredVendors[], ambienceTags[], updatedAt }`  
- –ü–æ–¥–ø–∏—Å—á–∏–∫–∏: ui-service, notification-service, analytics  
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ–ø–∏—Å–∞—Ç—å SLA –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–∫–∞–∂–¥—ã–µ 15—Å –¥–ª—è League Hub Conflux).

---

## üß≠ –ü–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–û—Ñ–æ—Ä–º–∏—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `social/visuals`** ‚Äî —Å–æ–∑–¥–∞—Ç—å README –∏ –ø–æ–¥–ø–∞–ø–∫—É `schemas`.
2. **–°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ–ª–∏** ‚Äî –≤—ã–Ω–µ—Å—Ç–∏ `VisualHubDetailedProfile`, `HubActivitySnapshot`, `VendorSpotlight`, `EventHighlight`.
3. **–û–ø–∏—Å–∞—Ç—å endpoints** ‚Äî –≤–∫–ª—é—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ö–∞–±–æ–≤, –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–∏, –ø–æ—Ç–æ–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Ñ–∏–ª—å—Ç—Ä—ã.
4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å world visuals** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ `locationId`, `worldVisualId`, –æ–ø–∏—Å–∞—Ç—å —Å–≤—è–∑–∏ –≤ schema.
5. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–π–Ω–æ—Å—Ç—å** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ Kafka —Ç–æ–ø–∏–∫–∞ –∏ webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞.
6. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ–∫–ª–∏—Å—Ç** ‚Äî —É–±–µ–¥–∏—Ç—å—Å—è –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ–±—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º versioning –∏ security.

---

## üîÄ Endpoints

### 1. GET `/api/v1/social/visuals/hubs/detailed`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ø–æ–ª—É—á–∏—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ö–∞–±–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ –≥–æ—Ä–æ–¥—É, —Ç–∏–ø—É, —É—Ä–æ–≤–Ω—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `cityId`, `hubType` (enum: commerce, nightlife, religious, esports, blackmarket), `activityLevel` (enum: calm, moderate, peak), `featured` (boolean), `page`, `size`.
- **–û—Ç–≤–µ—Ç 200:** `VisualHubDetailedCollection` (–¥–∞–Ω–Ω—ã–µ + –ø–∞–≥–∏–Ω–∞—Ü–∏—è).
- **–ì–æ–ª—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:** —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `data: []`.

### 2. GET `/api/v1/social/visuals/hubs/detailed/{hubId}`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –≤–µ—Ä–Ω—É—Ç—å –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É —Ö–∞–±–∞, –≤–∫–ª—é—á–∞—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏, NPC —Ä–æ–ª–∏, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.
- **–û—Ç–≤–µ—Ç 200:** `VisualHubDetailedProfile`.
- **–î–æ–ø. –ø–æ–ª—è:** `linkedLocationId`, `currentEvents`, `liveActivity`.
- **–û—à–∏–±–∫–∏:** 404 (–Ω–µ –Ω–∞–π–¥–µ–Ω), 423 (—Ö–∞–± –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–∫—Ä—ã—Ç ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Error —Å –∫–æ–¥–æ–º `BIZ_HUB_LOCKED`).

### 3. GET `/api/v1/social/visuals/hubs/detailed/{hubId}/activity`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** —Å—Ç—Ä–∏–º–∏–Ω–≥ –∏–ª–∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π —Å–Ω–∏–º–æ–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
- **Query:** `from`, `to`, `interval` (enum: realtime, 5m, 15m, 1h).
- **–û—Ç–≤–µ—Ç 200:** `HubActivityTimeline` (time series).
- **–ó–∞–≥–æ–ª–æ–≤–∫–∏:** `X-Realtime-Token` –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ —á–µ—Ä–µ–∑ WebSocket.

### 4. POST `/api/v1/social/visuals/hubs/subscriptions`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –æ—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏/–∞—Ç–º–æ—Å—Ñ–µ—Ä—ã –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ö–∞–±–æ–≤.
- **Body:** `HubSubscriptionRequest` (—É–ø–æ–º—è–Ω—É—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ 10 —Ö–∞–±–æ–≤).
- **–û—Ç–≤–µ—Ç 202:** `HubSubscriptionStatus` —Å `subscriptionId`, `status`, `callbackUrl`.
- **–û—à–∏–±–∫–∏:** 400 (–≤–∞–ª–∏–¥–∞—Ü–∏—è), 409 (–¥—É–±–ª–∏–∫–∞—Ç –ø–æ–¥–ø–∏—Å–∫–∏), 503 (realtime hub –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω).

---

## üß± –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

- **VisualHubDetailedProfile**
  - `hubId` (string) ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, `skyline-agora`).
  - `name` (string) ‚Äî –ª–æ–∫–∞–ª–∏–∑—É–µ–º–æ–µ –∏–º—è.
  - `locationId` (string) ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ world visual.
  - `hubType` (string, enum: commerce, nightlife, esports, religious, blackmarket, civic).
  - `ambienceTags` (array[string]) ‚Äî –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∏ —á—É–≤—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ (neon, ambient, clandestine).
  - `lightingProfile` (`HubLightingProfile`) ‚Äî –æ–ø–∏—Å–∞–Ω–∏—è —Å–≤–µ—Ç–∞, –≥–æ–ª–æ–≥—Ä–∞–º–º.
  - `audioPalette` (`AudioLayerReference`) ‚Äî —à—É–º—ã, –º—É–∑—ã–∫–∞, —Å–ø–µ—Ü—ç—Ñ—Ñ–µ–∫—Ç—ã.
  - `npcRoles` (array[`NpcRoleProfile`]) ‚Äî –∫–ª—é—á–µ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ NPC.
  - `services` (array[`HubServiceOffering`]) ‚Äî –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (Shadow Clinic, VR Pods).
  - `safetyLevel` (`HubSecurityProfile`) ‚Äî –æ—Ö—Ä–∞–Ω–∞, —Ä–∏—Å–∫ —Å–æ–±—ã—Ç–∏–π.
  - `activityLevel` (string, enum: calm, moderate, peak).
  - `featuredVendors` (array[`VendorSpotlight`]).
  - `currentEvents` (array[`EventHighlight`]).
  - `metrics` (`HubMetricSnapshot`) ‚Äî HubAmbienceRetention, EventVisualImpact.
  - `updatedAt` (date-time).

- **HubActivityTimeline**
  - `hubId` (string).
  - `timeframe` (`TimeRange`).
  - `granularity` (enum).
  - `points` (array[`HubActivityPoint`]) ‚Äî `timestamp`, `activityScore`, `crowdDensity`, `queueLength`.

- **HubSubscriptionRequest**
  - `hubIds` (array[string], minItems 1, maxItems 10).
  - `callbackUrl` (string, format uri).
  - `delivery` (enum: webhook, kafka).
  - `filters` (`HubSubscriptionFilters`) ‚Äî activity thresholds, ambience tags.

- **HubSubscriptionStatus**
  - `subscriptionId` (uuid).
  - `status` (enum: queued, active, paused).
  - `expiresAt` (date-time).

- **Shared components** (`schemas/visual-hub-detailed.yaml`):
  - `HubLightingProfile`
  - `AudioLayerReference` (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑ world schemas)
  - `NpcRoleProfile`
  - `HubServiceOffering`
  - `HubSecurityProfile`
  - `VendorSpotlight`
  - `EventHighlight`
  - `HubMetricSnapshot`
  - `HubActivityPoint`
  - `HubSubscriptionFilters`
  - `TimeRange`

–£—á–µ—Å—Ç—å –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è Skyline Agora (commerce, peak), Undermarket Bazaar (blackmarket, clandestine), League Hub Conflux (esports, peak).

---

## üìè –ü—Ä–∏–Ω—Ü–∏–ø—ã –∏ –ø—Ä–∞–≤–∏–ª–∞

- RESTful —Å—Ç–∏–ª—å, –µ–¥–∏–Ω–∞—è –º–æ–¥–µ–ª—å –æ—à–∏–±–æ–∫ `Error`; –∫–æ–¥—ã: `VAL_HUB_FILTER_INVALID`, `BIZ_HUB_LOCKED`, `INT_SOCIAL_STREAM_FAILED`.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `shared/common/pagination.yaml` –∏ `shared/common/responses.yaml`.
- –£–∫–∞–∑–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å BearerAuth + —Ç—Ä–µ–±—É–µ–º—ã–π scope `social.hubs.read` / `social.hubs.manage`.
- –†–∞–∑–º–µ—Ä –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ ‚â§400 —Å—Ç—Ä–æ–∫; –≤—ã–Ω–µ—Å—Ç–∏ —Å—Ö–µ–º—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π —Ñ–∞–π–ª.
- –î–æ–±–∞–≤–∏—Ç—å `x-realtime` –±–ª–æ–∫ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º WebSocket –∫–∞–Ω–∞–ª–∞ `/ws/social/visuals/hubs`.
- –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Player-Segment` –¥–ª—è —Ç–∞—Ä–≥–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

1. –í—Å–µ —á–µ—Ç—ã—Ä–µ endpoints –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ –æ—Ç–≤–µ—Ç–∞–º–∏.
2. `VisualHubDetailedProfile` –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Skyline Agora, Undermarket Bazaar, League Hub Conflux, Synth Faith Sanctum.
3. –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ —Ö–∞–±–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏ –∏–º–µ–µ—Ç –ø—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞.
4. –í –æ—Ç–≤–µ—Ç–∞—Ö —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å—Å—ã–ª–∫–∏ –Ω–∞ world visuals (`locationId`), –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å.
5. –ü–æ–¥–ø–∏—Å–∫–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –ø—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç 202.
6. –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ scopes.
7. Kafka —Ç–æ–ø–∏–∫ `social.visuals.hub.activity` –æ–ø–∏—Å–∞–Ω —Å payload –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º–∏.
8. README –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `social/visuals` –æ–±–Ω–æ–≤–ª—ë–Ω —Å –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ–º –∏ —Å—Å—ã–ª–∫–∞–º–∏.
9. –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ (enum, maxItems, pattern).
10. –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç League Hub Conflux –Ω–∞ –ø–∏–∫–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
11. –≠–Ω–¥–ø–æ–∏–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –≤—Ä–µ–º–µ–Ω–Ω—É—é —Å–µ—Ç–∫—É.
12. –õ–∏–Ω—Ç–µ—Ä `validate-swagger.ps1` –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫.

---

## ‚ùì FAQ

- **–ó–∞—á–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏?**  
  –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç UI –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å time series –±–µ–∑ –≤—ã—Ç—è–≥–∏–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ —Ö–∞–±–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π storage.

- **–ö–∞–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å world visuals?**  
  –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å —Å–æ–¥–µ—Ä–∂–∏—Ç `locationId`; –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö world-service –ø—É–±–ª–∏–∫—É–µ—Ç Kafka —Å–æ–±—ã—Ç–∏–µ, social-service –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ö–∞–±—ã.

- **–ù—É–∂–Ω–æ –ª–∏ –≤–∫–ª—é—á–∞—Ç—å –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏?**  
  –£–∫–∞–∂–∏—Ç–µ –ø–æ–ª–µ `campaigns` –≤–Ω—É—Ç—Ä–∏ `EventHighlight` —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ marketing-service; –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ –±—É–¥—É—Ç –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã –æ—Ç–¥–µ–ª—å–Ω—ã–º API.

- **–ö–∞–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –¥–Ω—é/–Ω–æ—á–∏?**  
  –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `timePhase` (optional) –∏ —É–∫–∞–∑–∞—Ç—å –µ–≥–æ –≤ schema `HubActivityPoint`.

- **–ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–º realtime?**  
  –í–æ–∑–≤—Ä–∞—â–∞—Ç—å `503` —Å –∫–æ–¥–æ–º `INT_SOCIAL_STREAM_FAILED` –∏ –æ–ø–∏—Å–∞—Ç—å fallback: polling endpoint `/activity`.

---



