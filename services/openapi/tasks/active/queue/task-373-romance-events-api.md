# Task ID: API-TASK-373
**–¢–∏–ø:** API Generation
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≤—ã—Å–æ–∫–∏–π
**–°—Ç–∞—Ç—É—Å:** queued
**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-08 19:55
**–°–æ–∑–¥–∞—Ç–µ–ª—å:** GPT-5 Codex (API Task Creator)
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** API-TASK-164, API-TASK-181

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–ù—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é `.BRAIN/05-technical/api-structures/romance-events-api-spec.yaml` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `API-SWAGGER` –∫–∞–∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç `api/v1/social/romance/events.yaml`, —Ä–∞–∑–ª–æ–∂–∏–≤ –≥—Ä–æ–º–æ–∑–¥–∫–∏–µ —Å—Ö–µ–º—ã –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –¥–æ–±–∞–≤–∏–≤ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:** –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `api/v1/social/romance/events.yaml` (–∏ –≤—ã–Ω–µ—Å—Ç–∏ —Å—Ö–µ–º—ã –≤ `api/v1/social/components/romance-events-schemas.yaml`, –µ—Å–ª–∏ —Ñ–∞–π–ª >400 —Å—Ç—Ä–æ–∫), –æ–ø–∏—Å–∞–≤ REST API —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π, —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤, –≤—ã–±–æ—Ä–æ–≤, –æ—Ç–Ω–æ—à–µ–Ω–∏–π –∏ –∫—É–ª—å—Ç—É—Ä–Ω–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ `social-service`.

---

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å social-service –∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É –º–æ–¥—É–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å, —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—å –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—è –±–æ–≥–∞—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤—ã–±–æ—Ä–∞, –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–≤—ã–∫–æ–≤ –∏ –∫—É–ª—å—Ç—É—Ä–Ω—É—é –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é.

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –î–∞—Ç—å –∏–≥—Ä–æ–≤–æ–º—É –∫–ª–∏–µ–Ω—Ç—É —Å—Ç–∞–±–∏–ª—å–Ω—ã–π REST API –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å 1500+ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏.
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—á—ë—Ç chemistry, —Ç—Ä–∏–≥–≥–µ—Ä—ã —Å–æ–±—ã—Ç–∏–π –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –∞—Ä–æ–∫ –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `.BRAIN`.
- –û–±–µ—Å–ø–µ—á–∏—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π, –æ–±—Ä–∞–±–æ—Ç–∫—É –≤—ã–±–æ—Ä–æ–≤ –∏ –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ —Å –µ–¥–∏–Ω—ã–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º.
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é —Å –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏ `API-SWAGGER` (security, shared responses, –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ `x-frontend`).

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç

- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `.BRAIN`
- **–ü—É—Ç—å:** `.BRAIN/05-technical/api-structures/romance-events-api-spec.yaml`
- **–í–µ—Ä—Å–∏—è:** 1.0.0
- **–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-11-08 12:20 (–ø–æ readiness)
- **–°—Ç–∞—Ç—É—Å:** ready, –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤

**–ß—Ç–æ –≤–∞–∂–Ω–æ:**
- –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä endpoints (`/romance/events`, `/romance/trigger`, `/romance/choice`, `/romance/history` –∏ —Ç.–¥.).
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å—Ö–µ–º—ã (`RomanceEvent`, `RomanceArc`, `RelationshipStatus`, `RomanceableNPC`) –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏.
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ä–µ–≥–∏–æ–Ω—É/–≥–æ—Ä–æ–¥—É, skill checks, –≤—ã–±–æ—Ä—É –∫—É–ª—å—Ç—É—Ä–Ω–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏.
- –ù–∞–ª–∏—á–∏–µ security (`BearerAuth`) –∏ production URL —á–µ—Ä–µ–∑ API Gateway.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

- `.BRAIN/04-narrative/quests/side/2025-11-07-quest-neon-ghosts.md` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π –≤ —Å—é–∂–µ—Ç–∞—Ö.
- `.BRAIN/02-gameplay/social/relationships-system-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äî –≤–∑–∞–∏–º–æ—Å–≤—è–∑—å —Å —Å–∏—Å—Ç–µ–º–æ–π –æ—Ç–Ω–æ—à–µ–Ω–∏–π.
- `API-SWAGGER/api/v1/social/npc-relationships/status.yaml` (–∑–∞–¥–∞—á–∏ API-TASK-352/353/354) ‚Äî —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Å –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏ –∏ –∏–≤–µ–Ω—Ç–∞–º–∏.
- `.BRAIN/02-gameplay/social/family-relationships-system-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äî –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–π.

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è

- `task-164-romance-system-complete-api.md` ‚Äî –æ–±—â–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã.
- `task-181-romance-event-engine-api.md` ‚Äî –¥–≤–∏–∂–æ–∫ —Å–æ–±—ã—Ç–∏–π, —Ä–∞—Å—á—ë—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π.
- `task-282-romance-judy-alvarez-api.md`, `task-281-romance-hanako-tanaka-api.md` ‚Äî –ø—Ä–∏–º–µ—Ä –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –∞—Ä–æ–∫.

---

## üìÅ –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API

### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `API-SWAGGER`

- **–¶–µ–ª–µ–≤–æ–π —Ñ–∞–π–ª:** `api/v1/social/romance/events.yaml`
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏):** `api/v1/social/components/romance-events-schemas.yaml`
- **API –≤–µ—Ä—Å–∏—è:** v1 (semantic 1.1.0 –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ –ø—Ä–æ–¥)
- **–¢–∏–ø:** OpenAPI 3.0.3

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π:**
```
API-SWAGGER/
‚îî‚îÄ‚îÄ api/
    ‚îî‚îÄ‚îÄ v1/
        ‚îî‚îÄ‚îÄ social/
            ‚îú‚îÄ‚îÄ romance/
            ‚îÇ   ‚îî‚îÄ‚îÄ events.yaml
            ‚îî‚îÄ‚îÄ components/
                ‚îî‚îÄ‚îÄ romance-events-schemas.yaml   (–µ—Å–ª–∏ –≤—ã–Ω–µ—Å–µ–Ω–∏–µ —Å—Ö–µ–º)
```
> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–ª–∏–Ω—É –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ ‚â§380 —Å—Ç—Ä–æ–∫. –ö—Ä—É–ø–Ω—ã–µ —Å—Ö–µ–º—ã (`RomanceArc`, `RomanceableNPC`, `RelationshipHistory`) –≤—ã–Ω–µ—Å—Ç–∏ –≤ `components` –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ `$ref`.

---

## üèóÔ∏è –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

### Backend (–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)

- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:** social-service
- **–ü–æ—Ä—Ç:** 8084
- **API Base Path:** `/api/v1/social/romance/*`
- **–î–æ–º–µ–Ω:** –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏, —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
  - character-service (–¥–∞–Ω–Ω—ã–µ NPC –∏ –∏–≥—Ä–æ–∫–æ–≤)
  - gameplay-service (skill check, combat/ability modifiers)
  - narrative-service (—Å—é–∂–µ—Ç–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è)
  - economy-service (–ø–æ–¥–∞—Ä–∫–∏, —Ä–∞—Å—Ö–æ–¥—ã, –Ω–∞–≥—Ä–∞–¥—ã)
  - analytics-service (—Å–±–æ—Ä —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –ø–æ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º —Å–æ–±—ã—Ç–∏—è–º)

### Frontend (–º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)

- **–ú–æ–¥—É–ª—å:** `modules/social/romance`
- **State Store:** `useSocialStore (romanceState)`
- **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (@shared/ui):** RomanceEventList, RomanceChoiceModal, ChemistryScorePanel, RelationshipStatusCard
- **–§–æ—Ä–º—ã (@shared/forms):** RomanceTriggerForm, RomanceChoiceForm, ChemistryCalculationForm
- **Layouts (@shared/layouts):** SocialDashboardLayout
- **Hooks (@shared/hooks):** useRealtime, useCharacter, useFormState

**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:** –î–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞—á–∞–ª–µ YAML –±–ª–æ–∫ —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π (–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å, –º–æ–¥—É–ª—å, UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, state store, API base path).

### OpenAPI / Security

- `info.x-microservice` –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (`social-service`, `port 8084`, `domain social`, `base-path /api/v1/social/romance`, `package com.necpgame.socialservice`).
- `servers`: —Ç–æ–ª—å–∫–æ `https://api.necp.game/v1` –∏ `http://localhost:8080/api/v1`.
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: `shared/common/security.yaml`, `shared/common/responses.yaml`, `shared/common/pagination.yaml`, `shared/common/sorting.yaml`.
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `security` (BearerAuth) –∏ —Ä–æ–ª–∏ `romance-view`, `romance-manage`.

---

## üì° –û—Å–Ω–æ–≤–Ω—ã–µ endpoints

- **GET `/social/romance/events`** ‚Äî —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (`relationship`, `category`, `region`, `npcId`, `playerId`) –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π. –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É, –ø—Ä–∏–º–µ—Ä—ã —É—Å–ø–µ—à–Ω–æ–≥–æ –∏ –æ—à–∏–±–æ—á–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–æ–≤.
- **GET `/social/romance/events/{eventId}`** ‚Äî –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ (–ø–æ–¥–∫–ª—é—á–∞–µ—Ç `RomanceEventDetailed`).
- **POST `/social/romance/trigger`** ‚Äî –∑–∞–ø—É—Å–∫ —Å–æ–±—ã—Ç–∏—è; –≤—Ö–æ–¥ `RomanceTriggerRequest`, –æ—Ç–≤–µ—Ç `EventOutcome`, –æ—à–∏–±–∫–∏ 400/403/409.
- **POST `/social/romance/choice`** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞; –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å skill checks, –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `ChoiceOutcome`.
- **GET `/social/romance/relationship/{npcId}`** ‚Äî —Å—Ç–∞—Ç—É—Å –æ—Ç–Ω–æ—à–µ–Ω–∏–π; –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–¥—ã 404 (NPC –Ω–µ –Ω–∞–π–¥–µ–Ω) –∏ 409 (–æ—Ç–Ω–æ—à–µ–Ω–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã).
- **POST `/social/romance/chemistry/calculate`** ‚Äî —Ä–∞—Å—á—ë—Ç –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è chemistry; –æ—Ç–≤–µ—Ç `ChemistryResult`.
- **POST `/social/romance/generate-arc`** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –∞—Ä–∫–∏; –¥–æ–±–∞–≤–∏—Ç—å throttling (429) –∏ —Å—Å—ã–ª–∫—É –Ω–∞ –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á.
- **GET `/social/romance/history/{npcId}`** ‚Äî –∏—Å—Ç–æ—Ä–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ `eventType`.
- **GET `/social/romance/npcs/available`** ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö NPC; –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ `region`, `sexualOrientation`, `faction`.
- **POST `/social/romance/cultural/adapt`** ‚Äî –∫—É–ª—å—Ç—É—Ä–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è; –æ–ø–∏—Å–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `CulturallyAdaptedEvent`.

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ–ø–∏—Å–∞—Ç—å –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ endpoints:
- **GET `/social/romance/events/{eventId}/choices`** ‚Äî —Å–ø–∏—Å–æ–∫ –≤—ã–±–æ—Ä–æ–≤ (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ UI).
- **GET `/social/romance/events/{eventId}/requirements`** ‚Äî —É—Å–ª–æ–≤–∏—è, –≤–∫–ª—é—á–∞—è skill checks –∏ —Ñ–ª–∞–≥–∏.

–í—Å–µ –º–µ—Ç–æ–¥—ã –¥–æ–ª–∂–Ω—ã —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ (`400`, `401`, `403`, `404`, `409`, `422`, `429`, `500`).

---

## üß© –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

- **RomanceEvent** ‚Äî –±–∞–∑–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å–æ–±—ã—Ç–∏—è (category, relationshipRange, triggers, choices, culturalTags).
- **RomanceEventDetailed** ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (dialogue, outcomes, culturalNotes, nextEventSuggestions).
- **EventTriggers** ‚Äî —É—Å–ª–æ–≤–∏—è –∑–∞–ø—É—Å–∫–æ–≤ (locations, time, season, relationship, chemistry, randomChance).
- **SkillCheck** ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —á–µ–∫–æ–≤ (type, dc, formula, modifiers).
- **EventChoice** ‚Äî –≤—ã–±–æ—Ä —Å –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º–∏, –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –∏ —Ñ–ª–∞–≥–∞–º–∏.
- **EventOutcome / ChoiceOutcome** ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (relationship, chemistry, rewards, achievements).
- **RelationshipStatus** ‚Äî —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π (scores, stages, flags, health, breakupRisk).
- **ChemistryResult** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã chemistry, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.
- **RomanceArc** ‚Äî —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä–∫–∞ (events[], conflicts, endGoal).
- **RelationshipHistory** ‚Äî –∏—Å—Ç–æ—Ä–∏—è —Ä–µ—à–µ–Ω–∏–π –∏ —Å–æ–±—ã—Ç–∏–π —Å timestamp.
- **RomanceableNPC / NPCPersonality** ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∞ NPC —Å –∫—É–ª—å—Ç—É—Ä–æ–π, –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–µ–π, –∏–Ω—Ç–µ—Ä–µ—Å–∞–º–∏, –ø–µ—Ä—Å–æ–Ω–æ–π.
- **CulturallyAdaptedEvent** ‚Äî –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å–æ–±—ã—Ç–∏—è, –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∫—É–ª—å—Ç—É—Ä—ã.

–°–¥–µ–ª–∞—Ç—å `required`, `description`, `example`, `enum`, `format` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è. –î–æ–±–∞–≤–∏—Ç—å `x-frontend` –∏ `x-analytics` (–∫–∞–∫–∏–µ –ø–∞–Ω–µ–ª–∏/–º–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–¥–µ–ª—å).

---

## ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω

### –®–∞–≥ 1: –ê—É–¥–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –°–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å `.BRAIN` –≤–µ—Ä—Å–∏—é —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏ `API-SWAGGER`.
- –í—ã—è–≤–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –±–ª–æ–∫–∏ (`servers`, `components/security`, `responses`, `pagination`).
- –†–∞–∑–º–µ—Ç–∏—Ç—å –º–æ–¥–µ–ª–∏ –¥–ª—è –≤—ã–Ω–µ—Å–µ–Ω–∏—è –≤ `components`.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** —Å–ø–∏—Å–æ–∫ –¥–æ—Ä–∞–±–æ—Ç–æ–∫ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤.

### –®–∞–≥ 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–æ–≤
- –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `api/v1/social/romance/` –∏ `api/v1/social/components/` (–µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç).
- –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –±–∞–∑–æ–≤—É—é —á–∞—Å—Ç—å (info, servers, security, paths) –≤ `events.yaml`.
- –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å `romance-events-schemas.yaml` –¥–ª—è –æ–±—ä—ë–º–Ω—ã—Ö —Å—Ö–µ–º.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** —Å–∫–µ–ª–µ—Ç —Ñ–∞–π–ª–æ–≤ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ `$ref`.

### –®–∞–≥ 3: –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è paths
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ endpoint –ø—Ä–æ–ø–∏—Å–∞—Ç—å:
  - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`query`, `path`, `headers`), –≤–∞–ª–∏–¥–∞—Ü–∏—é, –ø—Ä–∏–º–µ—Ä—ã.
  - `requestBody` —Å —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ —Å—Ö–µ–º—ã.
  - –æ—Ç–≤–µ—Ç—ã (—É—Å–ø–µ—Ö + –æ—à–∏–±–∫–∏), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `shared/common/responses.yaml`.
- –î–æ–±–∞–≤–∏—Ç—å `tags`, `operationId`, `x-permissions` (—Ç—Ä–µ–±—É–µ–º—ã–µ —Ä–æ–ª–∏).
- –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å rate limits, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–≥–¥–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ).

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ø–æ–ª–Ω—ã–π —Ä–∞–∑–¥–µ–ª `paths` —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏.

### –®–∞–≥ 4: –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ —Å—Ö–µ–º
- –ü—Ä–∏–≤–µ—Å—Ç–∏ —Å—Ö–µ–º—ã –∫ –µ–¥–∏–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É (`type`, `required`, `description`, `example`).
- –í—ã–Ω–µ—Å—Ç–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `RelationshipHistory.events[].choicesMade`) –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã.
- –î–æ–±–∞–≤–∏—Ç—å `x-frontend`, `x-storage` (PostgreSQL/Kafka topics), `x-ai` (–ø—Ä–∏–º–µ—Ä scoring) —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π `components` —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏.

### –®–∞–≥ 5: Security, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ —Å–æ–±—ã—Ç–∏—è
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `securitySchemes` —á–µ—Ä–µ–∑ `shared/common/security.yaml`.
- –î–æ–±–∞–≤–∏—Ç—å `x-events` (Kafka topics `social.romance.triggered`, `social.romance.completed`, `social.romance.blocked`).
- –û–ø–∏—Å–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å `character-service`, `narrative-service`, `analytics-service` (—á–µ—Ä–µ–∑ `x-integrations`).
- –£–∫–∞–∑–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ GDPR/consent –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç—Ä–∞–∂–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã.

### –®–∞–≥ 6: –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞
- –ó–∞–ø—É—Å—Ç–∏—Ç—å `scripts/validate-swagger.ps1 api/v1/social/romance/events.yaml`.
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ–∫–ª–∏—Å—Ç `tasks/config/checklist.md` (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, endpoints, –º–æ–¥–µ–ª–∏, FAQ).
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `events.yaml` ‚â§380 —Å—Ç—Ä–æ–∫ (–∏–Ω–∞—á–µ –≤—ã–Ω–µ—Å—Ç–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã).
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä–Ω—ã–µ payload'—ã –¥–ª—è QA (—É—Å–ø–µ—Ö, –æ—à–∏–±–∫–∏).

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –≤–∞–ª–∏–¥–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è, –≥–æ—Ç–æ–≤–∞—è –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

---

## üìè –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ (12)

1. –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `api/v1/social/romance/events.yaml`, –ø—Ä–æ—Ö–æ–¥–∏—Ç `scripts/validate-swagger.ps1` –±–µ–∑ –æ—à–∏–±–æ–∫.
2. –í `info.x-microservice` —É–∫–∞–∑–∞–Ω `social-service`, `port 8084`, `base-path /api/v1/social/romance`, `package com.necpgame.socialservice`.
3. `servers` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ gateway URLs (`https://api.necp.game/v1`, `http://localhost:8080/api/v1`).
4. Endpoint `GET /social/romance/events` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã, –ø–∞–≥–∏–Ω–∞—Ü–∏—é, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `RomanceEventListResponse` —Å `count`, `events`, `recommended`.
5. `POST /social/romance/trigger` –∏ `POST /social/romance/choice` –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ö–µ–º—ã `RomanceTriggerRequest`, `RomanceChoiceRequest`, –ø–æ–¥–∫–ª—é—á–∞—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ (400, 403, 409, 422).
6. `GET /social/romance/relationship/{npcId}` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `RelationshipStatus` –∏ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–æ–¥—ã 404/409.
7. `POST /social/romance/chemistry/calculate` –∏ `POST /social/romance/generate-arc` –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ —Å –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–µ–π chemistry –∏ –∞—Ä–æ–∫.
8. `GET /social/romance/history/{npcId}` –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (`shared/common/pagination.yaml`), —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ –¥–∞—Ç–∞–º –∏ —Ç–∏–ø—É —Å–æ–±—ã—Ç–∏—è.
9. –í—ã–Ω–µ—Å–µ–Ω—ã –∫—Ä—É–ø–Ω—ã–µ —Å—Ö–µ–º—ã –≤ `api/v1/social/components/romance-events-schemas.yaml` (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π —Ñ–∞–π–ª), –ø–æ–¥–∫–ª—é—á–µ–Ω—ã —á–µ—Ä–µ–∑ `$ref`.
10. –í—Å–µ –º–æ–¥–µ–ª–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç `required`, `description`, `example`, –∞ —Ç–∞–∫–∂–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è `x-frontend` –∏ `x-storage`.
11. –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è `x-events` (Kafka topics) –∏ `x-integrations` (—Å–≤—è–∑–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏), –∞ —Ç–∞–∫–∂–µ `x-governance` (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–æ–Ω—Ç–µ–Ω—Ç-–º–æ–¥–µ—Ä–∞—Ü–∏–∏).
12. –í —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–ø–∏—Å–∞–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (BearerAuth, —Ä–æ–ª–∏), –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ (consent, data retention) –∏ –∞—É–¥–∏—Ç (`x-audit` —Å –ø–æ–ª—è–º–∏ `createdBy`, `lastSyncedAt`).

---

## ‚ùì FAQ

**–í: –ü–æ—á–µ–º—É –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –∫—Ä—É–ø–Ω—ã–µ —Å—Ö–µ–º—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª?**  
–û: –ß—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—é ‚â§400 —Å—Ç—Ä–æ–∫. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏ –æ–±–ª–µ–≥—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É.

**–í: –ù—É–∂–Ω–æ –ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å WebSocket —Å–æ–±—ã—Ç–∏—è?**  
–û: –ü–æ–∫–∞ –Ω–µ—Ç. –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ ‚Äî REST + Kafka. –ï—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è realtime, –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –æ—Ç–¥–µ–ª—å–Ω—É—é AsyncAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é.

**–í: –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (chemistry, intimacy)?**  
–û: –î–æ–±–∞–≤–∏—Ç—å `x-privacy` —Å –ø–æ–º–µ—Ç–∫–æ–π `sensitive`, –æ–ø–∏—Å–∞—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º –∏ —Å—Ä–æ–∫ —Ä–µ—Ç–µ–Ω—Ü–∏–∏. –í –æ—Ç–≤–µ—Ç–∞—Ö –∏–∑–±–µ–≥–∞—Ç—å –ª–∏—à–Ω–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

**–í: –ö–∞–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –∫–≤–µ—Å—Ç–æ–≤ —Å —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏?**  
–û: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `x-integrations.narrative` —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–≤–µ—Å—Ç–æ–≤—ã–µ API. –î—É–±–ª–∏–∫–∞—Ç—ã —Å–æ–±—ã—Ç–∏–π —Ä–µ—à–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `eventId` –∏ `nextEventSuggestions`.

**–í: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ API –º–∞—Å—Å–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã?**  
–û: –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –≤—Ö–æ–¥—è—Ç –≤ MVP. –î–ª—è bulk-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–±–∏–Ω–∞—Ü–∏—é `events` + `history` + –æ—Ç–¥–µ–ª—å–Ω—ã–µ batch-–ø—Ä–æ—Ü–µ—Å—Å—ã (–±—É–¥—É—â–∏–µ –∑–∞–¥–∞—á–∏).

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–∏—Ç—å `brain-mapping.yaml` –∏ –æ—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ `readiness-tracker.yaml`, —á—Ç–æ–±—ã –¥—Ä—É–≥–∏–µ –ø–∞—Ä—Ç–∏–∏ –∑–Ω–∞–ª–∏ –æ –≥–æ—Ç–æ–≤–æ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ.

