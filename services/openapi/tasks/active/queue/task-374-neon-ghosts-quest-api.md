# Task ID: API-TASK-374
**–¢–∏–ø:** API Generation
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≤—ã—Å–æ–∫–∏–π
**–°—Ç–∞—Ç—É—Å:** queued
**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-08 20:15
**–°–æ–∑–¥–∞—Ç–µ–ª—å:** GPT-5 Codex (API Task Creator)
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** API-TASK-142, API-TASK-241, API-TASK-243

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å OpenAPI-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é `Neon Ghosts Side Quest` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞–¥–∏—è–º–∏, –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏, –Ω–∞–≥—Ä–∞–¥–∞–º–∏ –∏ –º–∏—Ä–æ–≤—ã–º–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –∫–≤–µ—Å—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ `.BRAIN/04-narrative/quests/side/2025-11-07-quest-neon-ghosts.md`.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:** –°–æ–∑–¥–∞—Ç—å `api/v1/narrative/quests/side/neon-ghosts.yaml`, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π REST API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–≤–µ—Å—Ç–∞, –ø—Ä–æ–≥—Ä–µ—Å—Å–∞, –≤–µ—Ç–æ–∫, –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–µ–ø—É—Ç–∞—Ü–∏–∏, world-state –∏ economy —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —Å —É—á–µ—Ç–æ–º –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è.

---

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å narrative-service —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –∏–≥—Ä–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–≤–µ—Å—Ç–æ–º ¬´Neon Ghosts¬ª, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è —Å —Å–æ—Ü–∏–∞–ª—å–Ω—ã–º–∏, –º–∏—Ä–æ–≤—ã–º–∏ –∏ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–º–∏ –ø–æ–¥—Å–∏—Å—Ç–µ–º–∞–º–∏.

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –ü–æ–∑–≤–æ–ª–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É –∏ –∏–≥—Ä–æ–≤–æ–º—É —Å–µ—Ä–≤–µ—Ä—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤–µ—Å—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å —É–∑–ª–æ–≤, –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ –≤–µ—Ç–æ–∫.
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏, world modifiers, –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π –±–µ–∑ —Ä—É—á–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.
- –û—Ç—Ä–∞–∑–∏—Ç—å –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (2-4 –∏–≥—Ä–æ–∫–∞) –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏.
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –¥–ª—è telemetry –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∫–≤–µ—Å—Ç–∞.

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç

- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `.BRAIN`
- **–ü—É—Ç—å:** `.BRAIN/04-narrative/quests/side/2025-11-07-quest-neon-ghosts.md`
- **–í–µ—Ä—Å–∏—è:** 1.0.0
- **–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-11-07
- **–°—Ç–∞—Ç—É—Å:** approved, `api-readiness: ready`

**–ß—Ç–æ –≤–∞–∂–Ω–æ:**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–∑–ª–æ–≤ (`intel-briefing`, `underlink-entry`, `ghost-confrontation`, `resolution`) —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ –∏ –∏—Å—Ö–æ–¥–∞–º–∏.
- –ú–µ—Ö–∞–Ω–∏–∫–∏ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏, world-state, economy, social resonance.
- API –∫–æ–Ω—Ç—É—Ä—ã: `/quests/side-neon-ghosts`, `/world/modifiers`, `/social/reputation/batch`, `/economy/contracts/activate`.
- –¢–∞–±–ª–∏—Ü—ã –Ω–∞–≥—Ä–∞–¥ –∏ –≤–µ—Ç–æ–∫ (ally, corporate, maelstrom).

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

- `.BRAIN/04-narrative/quests/raid/2025-11-07-raid-specter-surge.md` ‚Äî —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –ø–æ Underlink.
- `.BRAIN/02-gameplay/world/dungeons/dungeon-scenarios-catalog.md` ‚Äî Underlink –∑–æ–Ω–∞–ª—å–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏.
- `.BRAIN/02-gameplay/social/relationships-system-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äî –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–æ—Ü–∏–∞–ª—å–Ω—É—é —Ä–µ–ø—É—Ç–∞—Ü–∏—é.
- `API-SWAGGER/api/v1/world/world-interaction-suite.yaml` (API-TASK-241) ‚Äî world modifiers.
- `API-SWAGGER/api/v1/social/resonance.yaml` (API-TASK-243) ‚Äî resonance –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è.

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è

- `task-113-combat-session-backend-api.md` ‚Äî combat session lifecycle –¥–ª—è —à—É—Ç–µ—Ä–Ω—ã—Ö –º–∏—Å—Å–∏–π.
- `task-241-world-interaction-suite-api.md` ‚Äî –º–∏—Ä–æ–≤—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã.
- `task-243-social-resonance-api.md` ‚Äî —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏.

---

## üìÅ –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API

### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `API-SWAGGER`

- **–¶–µ–ª–µ–≤–æ–π —Ñ–∞–π–ª:** `api/v1/narrative/quests/side/neon-ghosts.yaml`
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** `api/v1/narrative/components/side-quest-schemas.yaml` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∑–ª—ã/–≤–µ—Ç–∫–∏)
- **API –≤–µ—Ä—Å–∏—è:** v1 (semantic 1.0.0)
- **–¢–∏–ø:** OpenAPI 3.0.3

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π:**
```
API-SWAGGER/
‚îî‚îÄ‚îÄ api/
    ‚îî‚îÄ‚îÄ v1/
        ‚îî‚îÄ‚îÄ narrative/
            ‚îú‚îÄ‚îÄ quests/
            ‚îÇ   ‚îî‚îÄ‚îÄ side/
            ‚îÇ       ‚îî‚îÄ‚îÄ neon-ghosts.yaml
            ‚îî‚îÄ‚îÄ components/
                ‚îî‚îÄ‚îÄ side-quest-schemas.yaml   (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–Ω–µ—Å—Ç–∏ –æ–±—â–∏–µ —Å—Ö–µ–º—ã)
```
> –ü—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞ >380 —Å—Ç—Ä–æ–∫ –≤—ã–Ω–µ—Å—Ç–∏ —Å—Ö–µ–º—ã `QuestNode`, `QuestBranch`, `ReputationEffect` –∏ —Ç.–ø. –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π —Ñ–∞–π–ª.

---

## üèóÔ∏è –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

### Backend (–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å)

- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:** narrative-service
- **–ü–æ—Ä—Ç:** 8087
- **API Base Path:** `/api/v1/narrative/quests/side/*`
- **–î–æ–º–µ–Ω:** –ù–∞—Ä—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–≤–µ—Å—Ç—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—é–∂–µ—Ç–æ–≤
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
  - gameplay-service (execution engine, skill checks, combat)
  - social-service (—Ä–µ–ø—É—Ç–∞—Ü–∏—è –∏ resonance)
  - economy-service (–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –Ω–∞–≥—Ä–∞–¥—ã)
  - world-service (world modifiers)
  - analytics-service (telemetry —Å–æ–±—ã—Ç–∏–π)

### Frontend (–º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)

- **–ú–æ–¥—É–ª—å:** `modules/quests/neon-ghosts`
- **State Store:** `useNarrativeStore (questState)`
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ:** questNodes, partyProgress, availableBranches, worldImpacts, rewards
- **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (@shared/ui):** QuestStageTimeline, DecisionMatrix, RewardPreviewCard, ReputationImpactPanel
- **–§–æ—Ä–º—ã (@shared/forms):** QuestProgressForm, BranchResolutionForm
- **Layouts (@shared/layouts):** QuestDetailLayout
- **Hooks (@shared/hooks):** useRealtime, useQuestState, usePartySync

**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:** –í –Ω–∞—á–∞–ª–µ YAML —É–∫–∞–∑–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –±–ª–æ–∫ (–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å, –º–æ–¥—É–ª—å, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, state).

### OpenAPI / Security

- `info.x-microservice`: `name: narrative-service`, `port: 8087`, `domain: narrative`, `base-path: /api/v1/narrative/quests/side`, `package: com.necpgame.narrativeservice`.
- `servers`: —Ç–æ–ª—å–∫–æ `https://api.necp.game/v1` –∏ `http://localhost:8080/api/v1`.
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å `shared/common/security.yaml`, `shared/common/responses.yaml`, `shared/common/pagination.yaml`.
- –†–æ–ª–∏: `quest-view`, `quest-manage`, `quest-analytics`.

---

## üì° –û—Å–Ω–æ–≤–Ω—ã–µ endpoints

- **GET `/narrative/quests/side/neon-ghosts`** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–≤–µ—Å—Ç–∞ (—ç—Ç–∞–ø—ã, —É–∑–ª—ã, –ø—Ä–æ–≤–µ—Ä–∫–∏, –≤–µ—Ç–∫–∏), –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `QuestStructure`.
- **POST `/narrative/quests/side/neon-ghosts/progress`** ‚Äî –∑–∞–ø–∏—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —É–∑–ª–∞, skill-check —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, party context, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `QuestProgressResult`.
- **POST `/narrative/quests/side/neon-ghosts/branch`** ‚Äî —Ñ–∏–∫—Å–∞—Ü–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–µ—Ç–∫–∏ (ally, corporate, maelstrom), –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `BranchResolution`.
- **POST `/narrative/quests/side/neon-ghosts/world-effects`** ‚Äî –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ world modifiers –∏ —Å–æ–±—ã—Ç–∏–π, –≤—ã–∑—ã–≤–∞–µ—Ç downstream world-service —á–µ—Ä–µ–∑ `x-integrations`.
- **POST `/narrative/quests/side/neon-ghosts/reputation`** ‚Äî batch-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ (ally/corporate/maelstrom), –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `ReputationBatchResult`.
- **POST `/narrative/quests/side/neon-ghosts/rewards`** ‚Äî –≤—ã–¥–∞—á–∞ –Ω–∞–≥—Ä–∞–¥ (xp, –ø—Ä–µ–¥–º–µ—Ç—ã, –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã), —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å economy-service.
- **GET `/narrative/quests/side/neon-ghosts/telemetry`** ‚Äî –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (branch distribution, completion rate).
- **GET `/narrative/quests/side/neon-ghosts/history`** ‚Äî –∏—Å—Ç–æ—Ä–∏—è —Ä–µ—à–µ–Ω–∏–π –ø–∞—Ä—Ç–∏–∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.
- **POST `/narrative/quests/side/neon-ghosts/state/sync`** ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–ª—è –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –≥—Ä—É–ø–ø—ã (party session id).

–ö–∞–∂–¥—ã–π endpoint –¥–æ–ª–∂–µ–Ω –æ–ø–∏—Å—ã–≤–∞—Ç—å:
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã (`partyId`, `playerIds`, `difficulty`, `timestamp`).
- –¢–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ (`QuestProgressRequest`, `BranchSelectionRequest`, `WorldEffectRequest`).
- –û—Ç–≤–µ—Ç—ã (`200 OK` + —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ 400, 401, 403, 404, 409, 422, 500).
- `x-integrations` —É–∫–∞–∑—ã–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä–≤–∏—Å (social, world, economy).

---

## üß© –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

- **QuestStructure** ‚Äî –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–≤–µ—Å—Ç–∞ (questId, title, synopsis, stages[], nodes[], branches[], requirements).
- **QuestStage** ‚Äî –ø–æ—Ä—è–¥–æ–∫, –æ–ø–∏—Å–∞–Ω–∏–µ, –ª–æ–∫–∞—Ü–∏—è, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã.
- **QuestNode** ‚Äî nodeId, label, entryCondition, options[], outcomes, checks (stat, dc, resource).
- **QuestOption / QuestOutcome** ‚Äî —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (resource, stat, flag), –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è (unlock_node, spawn_encounter, reputationChange, worldModifier).
- **QuestBranch** ‚Äî ally/corporate/maelstrom, –æ–ø–∏—Å–∞–Ω–∏–µ, —ç—Ñ—Ñ–µ–∫—Ç—ã (world modifiers, contracts, events).
- **QuestProgressRequest** ‚Äî partyId, nodeId, optionId, playerResults[], skillChecks[], timestamp.
- **QuestProgressResult** ‚Äî nextNodes, flags, reputationDelta, worldEffects, telemetryIds.
- **BranchSelectionRequest / BranchResolution** ‚Äî –≤—ã–±–æ—Ä –≤–µ—Ç–∫–∏, justification, resulting rewards.
- **WorldEffectRequest / WorldEffectResult** ‚Äî modifiers[], events[], expiration.
- **ReputationBatchRequest / Result** ‚Äî –º–∞—Å—Å–∏–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π (`target`, `value`, `reason`, `expiresAt`).
- **RewardPackage** ‚Äî xp, eddies, items[], contracts[], buffs[].
- **QuestTelemetry** ‚Äî completion rate, branch breakdown, average time, failure points.
- **QuestHistoryEntry** ‚Äî partyId, nodeId, decision, outcomes, timestamp, playerIds.

–î–æ–±–∞–≤–∏—Ç—å `x-frontend`, `x-analytics`, `x-storage` (PostgreSQL schema, Kafka topics `narrative.quest.events`) –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö —Å—Ö–µ–º.

---

## ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω

### –®–∞–≥ 1: –ê–Ω–∞–ª–∏–∑ –∫–≤–µ—Å—Ç–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü
- –†–∞—Å–ø–∏—Å–∞—Ç—å —ç—Ç–∞–ø—ã, —É–∑–ª—ã, –≤–µ—Ç–∫–∏ –∏–∑ `.BRAIN`.
- –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º (narrative orchestrates, social/economy/world downstream).
- –†–µ—à–∏—Ç—å, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –≤ narrative-service, —á—Ç–æ –æ—Ç–¥–∞—ë–º –≤ downstream API (—á–µ—Ä–µ–∑ `x-integrations`).

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¥–∏–∞–≥—Ä–∞–º–º–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Å–ø–∏—Å–æ–∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Å—Ö–µ–º.

### –®–∞–≥ 2: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- –û–ø–∏—Å–∞—Ç—å `QuestStructure`, `QuestNode`, `QuestBranch`, `QuestOption`, `QuestOutcome`.
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä—Ç–∏–π (`partyId`, `playerIds`, `role`, `vote`).
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (`OutcomeEffect`, `Requirement`, `WorldModifier`, `ReputationChange`).

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –≥–æ—Ç–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª `components/schemas` (–∏–ª–∏ –≤—ã–Ω–µ—Å–µ–Ω–Ω—ã–π —Ñ–∞–π–ª).

### –®–∞–≥ 3: –†–∞–∑–º–µ—Ç–∫–∞ endpoints
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ endpoint –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Ç–æ–¥—ã, –ø—É—Ç–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–æ–≤, –æ—Ç–≤–µ—Ç—ã.
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å `shared/common/pagination.yaml` —Ç–∞–º, –≥–¥–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Å–ø–∏—Å–∫–∏ (history, telemetry).
- –î–æ–±–∞–≤–∏—Ç—å `operationId`, `tags`, `summary`, `description`, –ø—Ä–∏–º–µ—Ä—ã payload'–æ–≤.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** —Ä–∞–∑–¥–µ–ª `paths` —Å –ø–æ–ª–Ω—ã–º–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º–∏.

### –®–∞–≥ 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- –î–ª—è world modifiers, reputation –∏ economy –¥–æ–±–∞–≤–∏—Ç—å `x-integrations` —Å target service, endpoint, –º–µ—Ç–æ–¥, SLA.
- –î–æ–±–∞–≤–∏—Ç—å Kafka —Å–æ–±—ã—Ç–∏—è (`narrative.quest.neonGhosts.completed`, `narrative.quest.neonGhosts.branchSelected`).
- –ü—Ä–æ–ø–∏—Å–∞—Ç—å `x-audit` (–∫—Ç–æ –∏ –∫–æ–≥–¥–∞ –∏–∑–º–µ–Ω–∏–ª —Å–æ—Å—Ç–æ—è–Ω–∏–µ), `x-telemetry` (metricIds).

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ telemetry.

### –®–∞–≥ 5: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–æ–ª–∏ (`quest-view`, `quest-manage`), scopes (`quests:read`, `quests:write`, `quests:resolve`).
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `partyToken`, rate limits, –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏ (409 –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏—è—Ö).
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (2 –∏–≥—Ä–æ–∫–∞, —Ä–∞–∑–¥–µ–ª—å–Ω—ã–µ skill checks).

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** security –∏ concurrency –æ–ø–∏—Å–∞–Ω—ã, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã.

### –®–∞–≥ 6: –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —á–µ–∫–ª–∏—Å—Ç
- –ü—Ä–æ–≥–Ω–∞—Ç—å `scripts/validate-swagger.ps1`.
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `tasks/config/checklist.md` (–≤—Å–µ –±–ª–æ–∫–∏, –∫—Ä–∏—Ç–µ—Ä–∏–∏, FAQ).
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ file size –≤ –Ω–æ—Ä–º–µ (–≤–Ω–æ—Å–∏—Ç—å —Å—Ö–µ–º—ã –≤ components –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏).

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –≤–∞–ª–∏–¥–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è, –≥–æ—Ç–æ–≤–∞—è –∫ —Ä–µ–≤—å—é.

---

## üìè –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ (12)

1. `api/v1/narrative/quests/side/neon-ghosts.yaml` —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç `scripts/validate-swagger.ps1` –±–µ–∑ –æ—à–∏–±–æ–∫.
2. –í `info.x-microservice` —É–∫–∞–∑–∞–Ω `narrative-service`, –ø–æ—Ä—Ç 8087, –±–∞–∑–æ–≤—ã–π –ø—É—Ç—å `/api/v1/narrative/quests/side`.
3. `GET /narrative/quests/side/neon-ghosts` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `QuestStructure` —Å —ç—Ç–∞–ø–∞–º–∏, —É–∑–ª–∞–º–∏, –≤–µ—Ç–∫–∞–º–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏.
4. `POST /narrative/quests/side/neon-ghosts/progress` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `QuestProgressRequest` (partyId, nodeId, optionId, skillChecks[]) –∏ –æ—Ç–¥–∞—ë—Ç `QuestProgressResult`.
5. `POST /narrative/quests/side/neon-ghosts/branch` –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤–µ—Ç–∫—É (ally/corporate/maelstrom) –∏ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç world/economy/social —ç—Ñ—Ñ–µ–∫—Ç—ã.
6. –û–ø–∏—Å–∞–Ω—ã endpoints –¥–ª—è world modifiers, reputation –∏ rewards, –∫–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç `x-integrations` —Å —Ü–µ–ª–µ–≤—ã–º —Å–µ—Ä–≤–∏—Å–æ–º –∏ SLA.
7. –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã –∫–æ–¥—ã –æ—à–∏–±–æ–∫ 400, 401, 403, 404, 409, 422, 500 –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø–∏—Å—ã–≤–∞—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
8. –°—Ö–µ–º—ã `QuestNode`, `QuestOption`, `QuestOutcome`, `QuestBranch`, `RewardPackage`, `QuestHistoryEntry` —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã, –∏–º–µ—é—Ç `required`, `description`, `example`.
9. –í —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Ç—Ä–∞–∂–µ–Ω—ã –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã partyId, playerIds, –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ) –∏ –ø—Ä–∏–º–µ—Ä—ã payload'–æ–≤.
10. –î–æ–±–∞–≤–ª–µ–Ω—ã Kafka —Å–æ–±—ã—Ç–∏—è (`narrative.quest.neonGhosts.*`) —á–µ—Ä–µ–∑ `x-events`, –∞ —Ç–∞–∫–∂–µ telemetry –º–µ—Ç—Ä–∏–∫–∏.
11. –§–∞–π–ª ‚â§380 —Å—Ç—Ä–æ–∫ –∏–ª–∏ –∫—Ä—É–ø–Ω—ã–µ —Å—Ö–µ–º—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ `api/v1/narrative/components/side-quest-schemas.yaml`.
12. –í–∫–ª—é—á–µ–Ω—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è `x-frontend`, `x-analytics`, `x-audit`, `x-governance` —Å —Ç—Ä–µ–±—É–µ–º—ã–º–∏ –ø–æ–ª—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç-—Ä–µ–≤—å—é –¥–ª—è –≤–µ—Ç–∫–∏ Maelstrom).

---

## ‚ùì FAQ

**–í: –ü–æ—á–µ–º—É narrative-service, –∞ –Ω–µ gameplay-service?**  
–û: narrative-service –≤—ã—Å—Ç—É–ø–∞–µ—Ç –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —Å—é–∂–µ—Ç–æ–≤, –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ —Ö—Ä–∞–Ω–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–≤–µ—Å—Ç–∞. Gameplay-service –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç runtime –º–µ—Ö–∞–Ω–∏–∫–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

**–í: –ö–∞–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è?**  
–û: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `QuestProgressRequest.partyId` –∏ `playerResults[]`. –ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 409 —Å –¥–µ—Ç–∞–ª—è–º–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–∏–Ω—è—Ç–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è.

**–í: –ù—É–∂–Ω–æ –ª–∏ —Ö—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Ä–µ—à–µ–Ω–∏–π —Ü–µ–ª–∏–∫–æ–º?**  
–û: –î–∞, `QuestHistoryEntry` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∏ world-service. –ü–∞–≥–∏–Ω–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.

**–í: –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è–º–∏?**  
–û: –î–æ–±–∞–≤–∏—Ç—å `runId` –∏–ª–∏ `attempt` –≤ `QuestProgressRequest` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –∏ –æ–ø–∏—Å–∞—Ç—å –≤ FAQ, —á—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —Ç—Ä–µ–±—É–µ—Ç —Å–±—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω—Å–∫–∏–π endpoint (–±—É–¥—É—â–∞—è –∑–∞–¥–∞—á–∞).

**–í: –ö–∞–∫ —É—á–∏—Ç—ã–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –≤–µ—Ç–æ–∫?**  
–û: –í `x-integrations.world` —É–∫–∞–∑–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `city.chaos.level`, `underlink.delivery.boost`. –ï—Å–ª–∏ –±–ª–æ–∫–µ—Ä—ã –∞–∫—Ç–∏–≤–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 409 —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–µ–π.

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–∏—Ç—å `brain-mapping.yaml` –∏ –≤–Ω–µ—Å—Ç–∏ –∑–∞–ø–∏—Å—å –≤ `current-status.md` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∞—Ä—Ç–∏–∏.

