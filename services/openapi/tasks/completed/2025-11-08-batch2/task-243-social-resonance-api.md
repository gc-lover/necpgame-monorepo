# Task ID: API-TASK-243
**–¢–∏–ø:** API Generation
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≤—ã—Å–æ–∫–∏–π
**–°—Ç–∞—Ç—É—Å:** completed
**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-07 16:53
**–°–æ–∑–¥–∞—Ç–µ–ª—å:** AI Agent (Brain Manager)
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** [API-TASK-241], [API-TASK-242]

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å API social-service –¥–ª—è –ø–∞–Ω–µ–ª–∏ Social Resonance: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–º –¥–æ–≤–µ—Ä–∏—è, –∫–∞–º–ø–∞–Ω–∏—è–º–∏, —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º–∏ –∏ –≥–∏–ª—å–¥–µ–π—Å–∫–∏–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:** –°–æ–∑–¥–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ `api/v1/social/resonance.yaml` –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è World Pulse.

---

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è UI `modules/social/resonance`, –æ—Ç—Ä–∞–∂–∞—é—â–∏–π —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏, —Å–≤—è–∑–∏ –∏ –∏—Ö –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –º–∏—Ä.

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–º –∏–Ω–¥–µ–∫—Å–æ–º.
- –°–≤—è–∑—å —Ä–æ–º–∞–Ω—Å/–∞–ª—å—è–Ω—Å–æ–≤ —Å –º–µ—Ö–∞–Ω–∏–∫–æ–π –º–∏—Ä–∞.
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ World Pulse –∏ Crisis —Å–∏—Å—Ç–µ–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π.

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏
- `.BRAIN/06-tasks/active/CURRENT-WORK/active/2025-11-07-world-interaction-ui.md` (–≤–µ—Ä—Å. 1.0.0, 2025-11-07 16:53) ‚Äî —Ä–∞–∑–¥–µ–ª—ã 2.6, 3.4, 5.6, 6, 7, 12.6, 13.
- `.BRAIN/02-gameplay/social/social-overview.md`
- `.BRAIN/02-gameplay/social/social-campaigns.md`
- `.BRAIN/04-narrative/romance-system/romance-framework.md`
- `.BRAIN/05-technical/ui/social/ui-social-core.md`

---

## üìÅ –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- `api/v1/social/resonance.yaml`
- `api/v1/social/schemas/resonance.yaml`
- `api/v1/social/channels/social-resonance-events.yaml`

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:** social-service (8084)
- **Frontend –º–æ–¥—É–ª—å:** `modules/social/resonance`
- **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** `ResonanceMeter`, `RelationshipGrid`, `CampaignCard`
- **State:** `useSocialStore` (resonanceSlice)

---

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã
1. `GET /api/v1/social/resonance`
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `trustIndex`, `moodState`, breakdown –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º.
2. `GET /api/v1/social/resonance/campaigns`
   - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, —Å—Ç–æ–∏–º–æ—Å—Ç—å, –æ–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç.
3. `POST /api/v1/social/resonance/campaigns`
   - –ó–∞–ø—É—Å–∫ –∫–∞–º–ø–∞–Ω–∏–∏. –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–æ–ª–∏ (`guild-leader`, `city-official`).
4. `GET /api/v1/social/resonance/relationships`
   - –°–≤–æ–¥–∫–∞ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö/–∞–ª—å—è–Ω—Å–Ω—ã—Ö —Å–≤—è–∑–µ–π –∏–≥—Ä–æ–∫–∞/–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏.
5. `POST /api/v1/social/resonance/relationships/{id}/update`
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–≤—è–∑–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–≥—Ä–µ—Å—Å —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –≤–µ—Ç–∫–∏).
6. `GET /api/v1/social/resonance/history`
   - –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ (time-series).
7. `GET /api/v1/social/resonance/forecasts`
   - –ü—Ä–æ–≥–Ω–æ–∑ –¥–æ–≤–µ—Ä–∏—è (24h/72h) —Å —É—á—ë—Ç–æ–º –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π.

### –°–æ–±—ã—Ç–∏—è
- `SOCIAL_INDEX_CHANGED`
- `SOCIAL_CAMPAIGN_STARTED`
- `SOCIAL_RELATIONSHIP_UPDATED`

---

## –ú–æ–¥–µ–ª–∏
- `SocialResonanceSnapshot`
- `SocialCampaign`
- `CampaignEffect`
- `RelationshipSummary`
- `TrustHistoryEntry`
- `TrustForecast`
- enums: `MoodState` (`HARMONY`, `NEUTRAL`, `UNREST`)

---

## Acceptance Criteria
1. –í—Å–µ REST —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ —Å–æ–±—ã—Ç–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏.
2. –ú–æ–¥–µ–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –ø–æ–ª—è–º –∏–∑ `.BRAIN` –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∏–Ω–¥–µ–∫—Å = 40/20/40 –≤–µ—Å–∞).
3. –ö–∞–º–ø–∞–Ω–∏–∏ –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: cooldown, —Å—Ç–æ–∏–º–æ—Å—Ç—å, —Ç—Ä–µ–±—É–µ–º—É—é —Ä–æ–ª—å.
4. –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `simulate=true` –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –∫–∞–º–ø–∞–Ω–∏–∏.
5. `trustIndex` –∏ `moodState` –≤–∫–ª—é—á–∞—é—Ç —Å–≤—è–∑—å —Å World Pulse.
6. –°–æ–±—ã—Ç–∏—è —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–ª—è `delta`, `reason`, `source`.
7. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (JWT + scopes `social:resonance:*`).
8. –û–ø–∏—Å–∞–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∫—Ä–∏–∑–∏—Å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π (–∞–≤—Ç–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ <20%).
9. –°—Ö–µ–º—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ `components/schemas` –∏–ª–∏ –ø–æ–¥–ø–∞–ø–∫—É, —Ñ–∞–π–ª ‚â§400 —Å—Ç—Ä–æ–∫.
10. –î–æ–±–∞–≤–ª–µ–Ω `x-target-architecture` (social-service / modules/social/resonance).

---

## FAQ
- –í–µ—Å–∞ –∏–Ω–¥–µ–∫—Å–∞: Reputation 40%, Romance 20%, Social Events 40% ‚Äî —É–∫–∞–∑–∞—Ç—å.
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–∞–º–ø–∞–Ω–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `campaignId`, `expectedDelta`, `duration`.
- –î–ª—è relationships –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –∏ —Ñ–∏–ª—å—Ç—Ä—ã (type, tier).
- –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å audit –ø–æ–ª–µ–π (`createdBy`, `approvedBy`).

---

## Checklist
- [ ] –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ –∏–∑—É—á–µ–Ω—ã
- [ ] REST + WS –æ–ø–∏—Å–∞–Ω—ã
- [ ] –°—Ö–µ–º—ã –∏ enums –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] Security —É–∫–∞–∑–∞–Ω–∞
- [ ] –ü—Ä–∏–º–µ—Ä—ã –≥–æ—Ç–æ–≤—ã
- [ ] –û–±–Ω–æ–≤–∏—Ç—å brain-mapping –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è


### OpenAPI (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

- –ó–∞–ø–æ–ª–Ω–∏ `info.x-microservice` (name, port, domain, base-path, package) –ø–æ –¥–∞–Ω–Ω—ã–º —Ü–µ–ª–µ–≤–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞.
- –í —Å–µ–∫—Ü–∏–∏ `servers` –æ—Å—Ç–∞–≤—å Production gateway `https://api.necp.game/v1` –∏ –ø—Ä–∏–º–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ `http://localhost:8080/api/v1`.
- WebSocket –º–∞—Ä—à—Ä—É—Ç—ã –ø—É–±–ª–∏–∫—É–π —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `wss://api.necp.game/v1/...`.

