// Package api provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package api

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
