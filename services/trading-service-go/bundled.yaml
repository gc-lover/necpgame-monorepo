openapi: 3.0.3
info:
  title: Trading Service API - Enterprise-Grade Domain Service
  description: '**Enterprise-Grade Player-to-Player Trading API for NECPGAME**

    This API manages all aspects of P2P trading between players, including trade sessions,
    item exchanges, transaction validation, and trade history tracking.

    ## Key Features

    - **Trade Sessions**: Secure trade session management with escrow protection -
    **Item Validation**: Real-time validation of item ownership and tradability -
    **Transaction Security**: Anti-fraud measures and transaction rollback capabilities
    - **Trade History**: Comprehensive trade history and analytics - **Real-time Updates**:
    WebSocket notifications for trade status changes - **Performance Optimized**:
    MMOFPS-grade performance with <50ms P99 latency

    ## Domain Purpose

    The Trading domain enables secure player-to-player commerce in Night City. Players
    can safely exchange items, currency, and resources with fraud protection and dispute
    resolution mechanisms.

    ## Performance Targets

    - P99 Latency: <50ms for trade operations - Memory: <30KB per active trade session
    - Concurrent users: 25,000+ simultaneous trades - Transaction throughput: 5,000+
    TPS

    '
  version: 1.0.0
  contact:
    name: NECPGAME API Support
    url: https://necpgame.com/support
    email: api@necpgame.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
servers:
- url: https://api.necpgame.com/v1/trading
  description: Production server
- url: https://staging-api.necpgame.com/v1/trading
  description: Staging server
- url: http://localhost:8080/api/v1/trading
  description: Local development server
security:
- BearerAuth: []
tags:
- name: Trading Operations
  description: Core trading operations and management
- name: Health Monitoring
  description: System health and performance monitoring
paths:
  /health:
    get:
      summary: Trading service health check
      description: '**Enterprise-grade health check endpoint**

        Provides real-time health status of the trading service microservice.

        Critical for service discovery, load balancing, and monitoring.

        **Performance:** <1ms response time, cached for 30 seconds'
      operationId: tradingServiceHealthCheck
      tags:
      - Health Monitoring
      parameters:
      - name: Accept-Encoding
        in: header
        schema:
          type: string
          enum:
          - gzip
          - deflate
          - br
      responses:
        '200':
          description: Service is healthy
          headers:
            Cache-Control:
              schema:
                type: string
                example: max-age=30, s-maxage=60
            ETag:
              schema:
                type: string
                example: '"trading-health-v1.0"'
          content:
            application/json:
              schema:
                type: object
                required:
                - status
                - timestamp
                properties:
                  status:
                    type: string
                    enum:
                    - healthy
                    - degraded
                    - unhealthy
                    example: healthy
                    maxLength: 255
                  domain:
                    type: string
                    example: service-name
                    maxLength: 255
                  timestamp:
                    type: string
                    format: date-time
                    example: '2025-12-28T10:00:00Z'
                    maxLength: 255
                  version:
                    type: string
                    example: 1.0.0
                    maxLength: 50
                  uptime_seconds:
                    type: integer
                    example: 3600
                    minimum: 0
                  active_connections:
                    type: integer
                    example: 1500
                    minimum: 0
                description: 'BACKEND NOTE: Fields ordered for struct alignment (large
                  → small). Expected memory savings: 30-50%.'
        '503':
          description: Service is unhealthy
          content:
            application/json:
              schema:
                type: object
                required:
                - status
                - timestamp
                properties:
                  status:
                    type: string
                    enum:
                    - healthy
                    - degraded
                    - unhealthy
                    example: healthy
                    maxLength: 255
                  domain:
                    type: string
                    example: service-name
                    maxLength: 255
                  timestamp:
                    type: string
                    format: date-time
                    example: '2025-12-28T10:00:00Z'
                    maxLength: 255
                  version:
                    type: string
                    example: 1.0.0
                    maxLength: 50
                  uptime_seconds:
                    type: integer
                    example: 3600
                    minimum: 0
                  active_connections:
                    type: integer
                    example: 1500
                    minimum: 0
                description: 'BACKEND NOTE: Fields ordered for struct alignment (large
                  → small). Expected memory savings: 30-50%.'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /trade-sessions:
    post:
      summary: Create new trade session
      description: '**Create secure P2P trade session with escrow protection**

        Initiates a new trade session between multiple players with automatic escrow
        handling and fraud prevention.

        **Security:** All trades are escrowed until both parties confirm **Performance:**
        <50ms P99 latency for trade creation'
      operationId: createTradeSession
      tags:
      - Trading Operations
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTradeSessionRequest'
      responses:
        '201':
          description: Trade session created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TradeSessionResponse'
        '400':
          description: Invalid trade session data
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '409':
          description: Trade session conflict (duplicate or invalid participants)
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
    get:
      summary: List trade sessions
      description: '**Get paginated list of trade sessions**

        Returns active trade sessions for the authenticated user with pagination and
        filtering support.

        **Performance:** Optimized with database indexes on status and timestamps'
      operationId: listTradeSessions
      tags:
      - Trading Operations
      parameters:
      - name: limit
        in: query
        schema:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          example: 20
        description: Number of items to return
      - name: offset
        in: query
        schema:
          type: integer
          minimum: 0
          default: 0
          example: 0
        description: Number of items to skip
      - name: status
        in: query
        schema:
          type: string
          enum:
          - negotiating
          - pending_confirmation
          - confirmed
          - completed
          - cancelled
          - disputed
        description: Filter by trade session status
      - name: participant_id
        in: query
        schema:
          type: string
          format: uuid
        description: Filter by participant UUID
      responses:
        '200':
          description: Trade sessions retrieved successfully
          content:
            application/json:
              schema:
                allOf:
                - $ref: '#/components/schemas/PaginatedResponse'
                - type: object
                  properties:
                    items:
                      type: array
                      items:
                        $ref: '#/components/schemas/TradeSessionResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /trade-sessions/{sessionId}:
    get:
      summary: Get trade session details
      description: '**Retrieve detailed trade session information**

        Returns complete trade session data including current offers, participants,
        and transaction history.

        **Security:** Only participants can view session details'
      operationId: getTradeSession
      tags:
      - Trading Operations
      parameters:
      - name: sessionId
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Trade session UUID
      responses:
        '200':
          description: Trade session details retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TradeSessionResponse'
        '404':
          description: Trade session not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '403':
          description: Access denied - not a participant
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
    put:
      summary: Update trade session
      description: '**Update trade session offer or status**

        Allows participants to modify trade offers, accept/reject terms, or update
        session status.

        **Concurrency:** Optimistic locking prevents race conditions'
      operationId: updateTradeSession
      tags:
      - Trading Operations
      parameters:
      - name: sessionId
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Trade session UUID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  enum:
                  - negotiating
                  - pending_confirmation
                  - confirmed
                  - cancelled
                  description: New session status
                current_offer:
                  type: object
                  description: Updated trade offer
                  properties:
                    offered_items:
                      type: array
                      items:
                        type: object
                        required:
                        - item_id
                        - quantity
                        properties:
                          item_id:
                            type: string
                            format: uuid
                            description: Universally Unique Identifier (UUID v4)
                            example: 123e4567-e89b-12d3-a456-426614174000
                            maxLength: 36
                          quantity:
                            type: integer
                            minimum: 1
                    requested_items:
                      type: array
                      items:
                        type: object
                        required:
                        - item_id
                        - quantity
                        properties:
                          item_id:
                            type: string
                            format: uuid
                            description: Universally Unique Identifier (UUID v4)
                            example: 123e4567-e89b-12d3-a456-426614174000
                            maxLength: 36
                          quantity:
                            type: integer
                            minimum: 1
                    offered_currency:
                      type: object
                      properties:
                        amount:
                          type: number
                          minimum: 0
                        currency_code:
                          type: string
                          pattern: ^[A-Z]{3}$
                    requested_currency:
                      type: object
                      properties:
                        amount:
                          type: number
                          minimum: 0
                        currency_code:
                          type: string
                          pattern: ^[A-Z]{3}$
      responses:
        '200':
          description: Trade session updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TradeSessionResponse'
        '400':
          description: Invalid update data
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '409':
          description: Optimistic locking conflict - session was modified
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /trade-sessions/{sessionId}/confirm:
    post:
      summary: Confirm trade session
      description: '**Confirm and execute trade session**

        Finalizes the trade session, executes item transfers and currency transactions
        through escrow system.

        **Atomicity:** All operations are executed in single transaction'
      operationId: confirmTradeSession
      tags:
      - Trading Operations
      parameters:
      - name: sessionId
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Trade session UUID
      responses:
        '200':
          description: Trade completed successfully
          content:
            application/json:
              schema:
                type: object
                required:
                - session
                - transactions
                properties:
                  session:
                    $ref: '#/components/schemas/TradeSessionResponse'
                  transactions:
                    type: array
                    items:
                      $ref: '#/components/schemas/TransactionEntity'
        '400':
          description: Trade cannot be confirmed (invalid state or items)
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /wallets/{walletId}:
    get:
      summary: Get wallet details
      description: '**Retrieve wallet information and balance**

        Returns wallet details including current balance, transaction history, and
        frozen status.

        **Security:** Only wallet owner can access details'
      operationId: getWallet
      tags:
      - Wallet Management
      parameters:
      - name: walletId
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Wallet UUID
      responses:
        '200':
          description: Wallet details retrieved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletEntity'
        '404':
          description: Wallet not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /wallets/{walletId}/transactions:
    get:
      summary: Get wallet transaction history
      description: '**Get paginated transaction history for wallet**

        Returns chronological list of all transactions for the specified wallet.

        **Performance:** Indexed queries with pagination optimization'
      operationId: getWalletTransactions
      tags:
      - Wallet Management
      parameters:
      - name: walletId
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Wallet UUID
      - name: limit
        in: query
        schema:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          example: 20
        description: Number of items to return
      - name: offset
        in: query
        schema:
          type: integer
          minimum: 0
          default: 0
          example: 0
        description: Number of items to skip
      - name: type
        in: query
        schema:
          type: string
          enum:
          - deposit
          - withdrawal
          - transfer
          - purchase
          - sale
          - refund
          - fee
          - reward
        description: Filter by transaction type
      - name: currency_code
        in: query
        schema:
          type: string
          pattern: ^[A-Z]{3}$
        description: Filter by currency code
      responses:
        '200':
          description: Transaction history retrieved
          content:
            application/json:
              schema:
                allOf:
                - $ref: '#/components/schemas/PaginatedResponse'
                - type: object
                  properties:
                    items:
                      type: array
                      items:
                        $ref: '#/components/schemas/TransactionEntity'
        '401':
          description: Unauthorized - authentication required for WebSocket
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '429':
          description: Too many requests - WebSocket connection limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 30
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /examples:
    get:
      summary: List examples with filtering and pagination
      description: '**Enterprise-grade listing endpoint**


        Supports complex filtering, sorting, and pagination patterns.

        Optimized for high-throughput scenarios with proper indexing.


        **Performance:** <10ms P95, supports 1000+ concurrent requests

        '
      operationId: listExamples
      tags:
      - Example Domain
      parameters:
      - name: page
        in: query
        schema:
          type: integer
          minimum: 1
          default: 1
        description: Page number for pagination
      - name: limit
        in: query
        schema:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
        description: Number of items per page
      - name: sort_by
        in: query
        schema:
          type: string
          enum:
          - created_at
          - name
          - priority
          default: created_at
        description: Sort field
      - name: sort_order
        in: query
        schema:
          type: string
          enum:
          - asc
          - desc
          default: desc
        description: Sort order
      - name: filter_status
        in: query
        schema:
          type: string
          enum:
          - active
          - inactive
          - pending
        description: Filter by status
      responses:
        '200':
          $ref: '#/components/responses/ExampleListSuccess'
        '400':
          description: Invalid request - malformed query parameters
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '422':
          description: Unprocessable entity - validation failed
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
    post:
      summary: Create new example
      description: '**Enterprise-grade creation endpoint**


        Validates business rules, applies security checks, and ensures data consistency.

        Supports optimistic locking for concurrent operations.


        **Performance:** <50ms P95, includes validation and business logic

        '
      operationId: createExample
      tags:
      - Example Domain
      security:
      - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateExampleRequest'
      responses:
        '201':
          $ref: '#/components/responses/ExampleCreated'
        '400':
          description: Invalid request - malformed or missing data
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '409':
          description: Conflict - example with this identifier already exists
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '422':
          description: Unprocessable entity - business rule validation failed
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '429':
          description: Too many requests - creation rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
  /examples/{example_id}:
    get:
      summary: Get specific example by ID
      description: '**Enterprise-grade retrieval endpoint**


        Optimized with proper caching strategies and database indexing.

        Supports conditional requests with ETags.


        **Performance:** <5ms P95 with Redis caching

        '
      operationId: getExample
      tags:
      - Example Domain
      parameters:
      - name: example_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Example unique identifier
      - name: include_related
        in: query
        schema:
          type: boolean
          default: false
        description: Include related data in response
      - name: If-None-Match
        in: header
        schema:
          type: string
        description: Conditional request - return 304 if ETag matches
      - name: If-Modified-Since
        in: header
        schema:
          type: string
          format: date-time
        description: Conditional request - return 304 if not modified since this time
      responses:
        '200':
          $ref: '#/components/responses/ExampleRetrieved'
        '304':
          description: Not modified - resource has not changed
          headers:
            ETag:
              schema:
                type: string
                example: '"example-123-v1"'
            Cache-Control:
              schema:
                type: string
                example: max-age=300, private
        '400':
          description: Invalid request - malformed example ID
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '404':
          description: Example not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '429':
          description: Too many requests - rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 30
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
    put:
      summary: Update existing example
      description: '**Enterprise-grade update endpoint**


        Supports partial updates, optimistic locking, and audit trails.

        Ensures data consistency with event sourcing patterns.


        **Performance:** <25ms P95, includes validation and conflict resolution

        '
      operationId: updateExample
      tags:
      - Example Domain
      security:
      - BearerAuth: []
      parameters:
      - name: example_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Example unique identifier
      - name: If-Match
        in: header
        schema:
          type: string
        description: ETag for optimistic locking - prevents concurrent updates
      - name: If-Unmodified-Since
        in: header
        schema:
          type: string
          format: date-time
        description: Conditional update - proceed only if not modified since this
          time
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateExampleRequest'
      responses:
        '200':
          $ref: '#/components/responses/ExampleUpdated'
        '400':
          description: Invalid request - malformed data or example ID
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '404':
          description: Example not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '409':
          description: Conflict - version conflict (optimistic locking) or precondition
            failed
          headers:
            ETag:
              schema:
                type: string
                example: '"example-123-v1"'
                description: Current entity tag
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '412':
          description: Precondition failed - If-Match or If-Unmodified-Since condition
            not met
          headers:
            ETag:
              schema:
                type: string
                example: '"example-123-v1"'
                description: Current entity tag
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '422':
          description: Unprocessable entity - business rule validation failed
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '429':
          description: Too many requests - update rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 30
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
    delete:
      summary: Delete example
      description: '**Enterprise-grade deletion endpoint**


        Supports soft deletes with audit trails and cleanup scheduling.

        Ensures referential integrity and cascading deletes.


        **Performance:** <15ms P95, includes cleanup operations

        '
      operationId: deleteExample
      tags:
      - Example Domain
      security:
      - BearerAuth: []
      parameters:
      - name: example_id
        in: path
        required: true
        schema:
          type: string
          format: uuid
        description: Example unique identifier
      responses:
        '204':
          $ref: '#/components/responses/ExampleDeleted'
        '400':
          description: Invalid request - malformed example ID
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '404':
          description: Example not found
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '409':
          description: Conflict - example cannot be deleted (referential integrity)
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        '429':
          description: Too many requests - deletion rate limit exceeded
          headers:
            Retry-After:
              schema:
                type: integer
                example: 60
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                type: object
                required:
                - code
                - message
                properties:
                  code:
                    type: integer
                    example: 500
                    format: int32
                    minimum: 100
                    maximum: 599
                  message:
                    type: string
                    example: Internal server error
                    maxLength: 1000
                  details:
                    type: object
                    description: Additional error details
                description: Standard error response format
components:
  responses:
    HealthBatchSuccess:
      description: Batch health results retrieved successfully
      headers:
        Cache-Control:
          schema:
            type: string
            example: no-cache
        X-Processing-Time:
          schema:
            type: integer
            example: 15
            description: Processing time in milliseconds
      content:
        application/json:
          schema:
            type: object
            required:
            - results
            - total_time_ms
            properties:
              results:
                type: array
                items:
                  HealthResponse:
                    type: object
                    required:
                    - status
                    - timestamp
                    properties:
                      status:
                        type: string
                        enum:
                        - healthy
                        - degraded
                        - unhealthy
                        example: healthy
                        maxLength: 255
                      domain:
                        type: string
                        example: service-name
                        maxLength: 255
                      timestamp:
                        type: string
                        format: date-time
                        example: '2025-12-28T10:00:00Z'
                        maxLength: 255
                      version:
                        type: string
                        example: 1.0.0
                        maxLength: 50
                      uptime_seconds:
                        type: integer
                        example: 3600
                        minimum: 0
                      active_connections:
                        type: integer
                        example: 1500
                        minimum: 0
                    description: 'BACKEND NOTE: Fields ordered for struct alignment
                      (large → small). Expected memory savings: 30-50%.'
                description: Health status for each requested service
              total_time_ms:
                type: integer
                description: Total processing time in milliseconds
    ExampleListSuccess:
      description: Examples retrieved successfully
      headers:
        Cache-Control:
          schema:
            type: string
            example: max-age=300, private
        X-Total-Count:
          schema:
            type: integer
            example: 150
            description: Total number of examples matching criteria
        X-Page-Count:
          schema:
            type: integer
            example: 8
            description: Total number of pages
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ExampleListResponse'
    ExampleCreated:
      description: Example created successfully
      headers:
        Location:
          schema:
            type: string
            example: /api/v1/examples/550e8400-e29b-41d4-a716-446655440000
            description: URL of the created example
        ETag:
          schema:
            type: string
            example: '"example-123-v1"'
            description: Entity tag for caching and optimistic locking
        Cache-Control:
          schema:
            type: string
            example: no-cache
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ExampleResponse'
    ExampleRetrieved:
      description: Example retrieved successfully
      headers:
        ETag:
          schema:
            type: string
            example: '"example-123-v1"'
            description: Entity tag for caching
        Cache-Control:
          schema:
            type: string
            example: max-age=300, private
            description: Cache control directives
        Last-Modified:
          schema:
            type: string
            format: date-time
            example: '2025-12-21T10:00:00Z'
            description: Last modification timestamp
        X-Processing-Time:
          schema:
            type: integer
            example: 5
            description: Processing time in milliseconds
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ExampleResponse'
    ExampleUpdated:
      description: Example updated successfully
      headers:
        ETag:
          schema:
            type: string
            example: '"example-123-v2"'
            description: New entity tag after update
        Last-Modified:
          schema:
            type: string
            format: date-time
            example: '2025-12-21T10:05:00Z'
            description: Last modification timestamp
        X-Processing-Time:
          schema:
            type: integer
            example: 25
            description: Processing time in milliseconds
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ExampleResponse'
    ExampleDeleted:
      description: Example deleted successfully
      headers:
        X-Processing-Time:
          schema:
            type: integer
            example: 15
            description: Processing time in milliseconds
    OK:
      description: Operation completed successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: true
              message:
                type: string
                example: Operation completed
    Created:
      description: Resource created successfully
      headers:
        Location:
          schema:
            type: string
            format: uri
          description: URI of the created resource
      content:
        application/json:
          schema:
            type: object
            properties:
              id:
                type: string
                format: uuid
                description: Unique identifier of created resource
              created_at:
                type: string
                format: date-time
                description: Creation timestamp
    BadRequest:
      description: Invalid request parameters
      content:
        application/json:
          schema:
            type: object
            required:
            - code
            - message
            properties:
              code:
                type: integer
                example: 500
                format: int32
                minimum: 100
                maximum: 599
              message:
                type: string
                example: Internal server error
                maxLength: 1000
              details:
                type: object
                description: Additional error details
            description: Standard error response format
    Unauthorized:
      description: Authentication required
      content:
        application/json:
          schema:
            type: object
            required:
            - code
            - message
            properties:
              code:
                type: integer
                example: 500
                format: int32
                minimum: 100
                maximum: 599
              message:
                type: string
                example: Internal server error
                maxLength: 1000
              details:
                type: object
                description: Additional error details
            description: Standard error response format
    Forbidden:
      description: Access denied
      content:
        application/json:
          schema:
            type: object
            required:
            - code
            - message
            properties:
              code:
                type: integer
                example: 500
                format: int32
                minimum: 100
                maximum: 599
              message:
                type: string
                example: Internal server error
                maxLength: 1000
              details:
                type: object
                description: Additional error details
            description: Standard error response format
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            type: object
            required:
            - code
            - message
            properties:
              code:
                type: integer
                example: 500
                format: int32
                minimum: 100
                maximum: 599
              message:
                type: string
                example: Internal server error
                maxLength: 1000
              details:
                type: object
                description: Additional error details
            description: Standard error response format
    Conflict:
      description: Resource conflict
      content:
        application/json:
          schema:
            type: object
            required:
            - code
            - message
            properties:
              code:
                type: integer
                example: 500
                format: int32
                minimum: 100
                maximum: 599
              message:
                type: string
                example: Internal server error
                maxLength: 1000
              details:
                type: object
                description: Additional error details
            description: Standard error response format
    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            type: object
            required:
            - code
            - message
            properties:
              code:
                type: integer
                example: 500
                format: int32
                minimum: 100
                maximum: 599
              message:
                type: string
                example: Internal server error
                maxLength: 1000
              details:
                type: object
                description: Additional error details
            description: Standard error response format
    HealthOK:
      description: Service is healthy
      content:
        application/json:
          schema:
            HealthResponse:
              type: object
              required:
              - status
              - timestamp
              properties:
                status:
                  type: string
                  enum:
                  - healthy
                  - degraded
                  - unhealthy
                  example: healthy
                  maxLength: 255
                domain:
                  type: string
                  example: service-name
                  maxLength: 255
                timestamp:
                  type: string
                  format: date-time
                  example: '2025-12-28T10:00:00Z'
                  maxLength: 255
                version:
                  type: string
                  example: 1.0.0
                  maxLength: 50
                uptime_seconds:
                  type: integer
                  example: 3600
                  minimum: 0
                active_connections:
                  type: integer
                  example: 1500
                  minimum: 0
              description: 'BACKEND NOTE: Fields ordered for struct alignment (large
                → small). Expected memory savings: 30-50%.'
  schemas:
    BaseEntity:
      type: object
      required:
      - id
      - created_at
      - updated_at
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier (UUID v4)
          example: 123e4567-e89b-12d3-a456-426614174000
          maxLength: 36
        created_at:
          type: string
          format: date-time
          description: Creation timestamp (ISO 8601)
          example: '2025-12-28T10:00:00Z'
          maxLength: 30
        updated_at:
          type: string
          format: date-time
          description: Last update timestamp (ISO 8601)
          example: '2025-12-28T10:00:00Z'
          maxLength: 30
    TradeSessionEntity:
      allOf:
      - allOf:
        - allOf:
          - $ref: '#/components/schemas/BaseEntity'
          - type: object
            required:
            - version
            properties:
              version:
                type: integer
                minimum: 1
                description: Optimistic locking version
                example: 1
          description: 'BACKEND NOTE: Extends BaseEntity with version control. Use
            for concurrent-safe updates.'
        - type: object
          required:
          - initiator_id
          - participants
          - status
          properties:
            initiator_id:
              type: string
              format: uuid
              description: Universally Unique Identifier (UUID v4)
              example: 123e4567-e89b-12d3-a456-426614174000
              maxLength: 36
            participants:
              type: array
              items:
                type: string
                format: uuid
                description: Universally Unique Identifier (UUID v4)
                example: 123e4567-e89b-12d3-a456-426614174000
                maxLength: 36
              minItems: 2
              maxItems: 10
              description: Users participating in trade
            status:
              type: string
              enum:
              - negotiating
              - pending_confirmation
              - confirmed
              - completed
              - cancelled
              - disputed
              description: Trade session status
              example: negotiating
            current_offer:
              type: object
              properties:
                offered_items:
                  type: array
                  items:
                    type: object
                    required:
                    - item_id
                    - quantity
                    properties:
                      item_id:
                        type: string
                        format: uuid
                        description: Universally Unique Identifier (UUID v4)
                        example: 123e4567-e89b-12d3-a456-426614174000
                        maxLength: 36
                      quantity:
                        type: integer
                        minimum: 1
                  description: Items offered in current trade
                requested_items:
                  type: array
                  items:
                    type: object
                    required:
                    - item_id
                    - quantity
                    properties:
                      item_id:
                        type: string
                        format: uuid
                        description: Universally Unique Identifier (UUID v4)
                        example: 123e4567-e89b-12d3-a456-426614174000
                        maxLength: 36
                      quantity:
                        type: integer
                        minimum: 1
                  description: Items requested in current trade
                offered_currency:
                  type: object
                  properties:
                    amount:
                      type: number
                      minimum: 0
                    currency_code:
                      type: string
                      pattern: ^[A-Z]{3}$
                  description: Currency offered
                requested_currency:
                  type: object
                  properties:
                    amount:
                      type: number
                      minimum: 0
                    currency_code:
                      type: string
                      pattern: ^[A-Z]{3}$
                  description: Currency requested
              description: Current trade offer details
            expires_at:
              type: string
              format: date-time
              description: ISO 8601 timestamp
              example: '2025-12-28T10:00:00Z'
              maxLength: 30
            confirmed_at:
              type: string
              format: date-time
              description: ISO 8601 timestamp
              example: '2025-12-28T10:00:00Z'
              maxLength: 30
            completed_at:
              type: string
              format: date-time
              description: ISO 8601 timestamp
              example: '2025-12-28T10:00:00Z'
              maxLength: 30
            transaction_ids:
              type: array
              items:
                type: string
                format: uuid
                description: Universally Unique Identifier (UUID v4)
                example: 123e4567-e89b-12d3-a456-426614174000
                maxLength: 36
              description: Resulting transaction IDs
        description: 'BACKEND NOTE: P2P trade sessions with escrow and validation.'
      - type: object
    TradeOfferEntity:
      allOf:
      - allOf:
        - allOf:
          - $ref: '#/components/schemas/BaseEntity'
          - type: object
            required:
            - version
            properties:
              version:
                type: integer
                minimum: 1
                description: Optimistic locking version
                example: 1
          description: 'BACKEND NOTE: Extends BaseEntity with version control. Use
            for concurrent-safe updates.'
        - type: object
          required:
          - initiator_id
          - recipient_id
          - offered_items
          - requested_items
          properties:
            initiator_id:
              type: string
              format: uuid
              description: Universally Unique Identifier (UUID v4)
              example: 123e4567-e89b-12d3-a456-426614174000
              maxLength: 36
            recipient_id:
              type: string
              format: uuid
              description: Universally Unique Identifier (UUID v4)
              example: 123e4567-e89b-12d3-a456-426614174000
              maxLength: 36
            offered_items:
              type: array
              items:
                type: object
                required:
                - item_id
                - quantity
                properties:
                  item_id:
                    type: string
                    format: uuid
                    description: Universally Unique Identifier (UUID v4)
                    example: 123e4567-e89b-12d3-a456-426614174000
                    maxLength: 36
                  quantity:
                    type: integer
                    minimum: 1
              description: Items offered by initiator
            requested_items:
              type: array
              items:
                type: object
                required:
                - item_id
                - quantity
                properties:
                  item_id:
                    type: string
                    format: uuid
                    description: Universally Unique Identifier (UUID v4)
                    example: 123e4567-e89b-12d3-a456-426614174000
                    maxLength: 36
                  quantity:
                    type: integer
                    minimum: 1
              description: Items requested from recipient
            offered_currency:
              type: object
              properties:
                amount:
                  type: number
                  minimum: 0
                currency_code:
                  type: string
                  pattern: ^[A-Z]{3}$
              description: Currency offered by initiator
            requested_currency:
              type: object
              properties:
                amount:
                  type: number
                  minimum: 0
                currency_code:
                  type: string
                  pattern: ^[A-Z]{3}$
              description: Currency requested from recipient
            status:
              type: string
              enum:
              - pending
              - accepted
              - rejected
              - cancelled
              - expired
              description: Trade offer status
              example: pending
            expires_at:
              type: string
              format: date-time
              description: ISO 8601 timestamp
              example: '2025-12-28T10:00:00Z'
              maxLength: 30
            accepted_at:
              type: string
              format: date-time
              description: ISO 8601 timestamp
              example: '2025-12-28T10:00:00Z'
              maxLength: 30
            transaction_id:
              type: string
              format: uuid
              description: Universally Unique Identifier (UUID v4)
              example: 123e4567-e89b-12d3-a456-426614174000
              maxLength: 36
        description: 'BACKEND NOTE: Legacy trade offers - prefer TradeSessionEntity
          for new implementations.'
      - type: object
    TransactionEntity:
      allOf:
      - allOf:
        - allOf:
          - $ref: '#/components/schemas/BaseEntity'
          - type: object
            properties:
              created_by:
                type: string
                format: uuid
                description: ID of user who created the entity
                example: 123e4567-e89b-12d3-a456-426614174001
                maxLength: 36
              updated_by:
                type: string
                format: uuid
                description: ID of user who last modified the entity
                example: 123e4567-e89b-12d3-a456-426614174002
                maxLength: 36
          description: 'BACKEND NOTE: Extends BaseEntity with audit trail. Use for
            admin-managed entities.'
        - type: object
          required:
          - type
          - amount
          - currency_code
          - status
          properties:
            type:
              type: string
              enum:
              - deposit
              - withdrawal
              - transfer
              - purchase
              - sale
              - refund
              - fee
              - reward
              description: Transaction type
              example: purchase
            amount:
              type: number
              description: Transaction amount
              example: 99.99
            currency_code:
              type: string
              pattern: ^[A-Z]{3}$
              description: Transaction currency
              example: EDY
            status:
              type: string
              enum:
              - pending
              - processing
              - completed
              - failed
              - cancelled
              - refunded
              description: Transaction status
              example: completed
            from_wallet_id:
              type: string
              format: uuid
              description: Universally Unique Identifier (UUID v4)
              example: 123e4567-e89b-12d3-a456-426614174000
              maxLength: 36
            to_wallet_id:
              type: string
              format: uuid
              description: Universally Unique Identifier (UUID v4)
              example: 123e4567-e89b-12d3-a456-426614174000
              maxLength: 36
            reference_id:
              type: string
              format: uuid
              description: Universally Unique Identifier (UUID v4)
              example: 123e4567-e89b-12d3-a456-426614174000
              maxLength: 36
            external_reference:
              type: string
              description: External system reference
              example: stripe_ch_1234567890
              maxLength: 100
            description:
              type: string
              description: Transaction description
              example: Purchase of Legendary Weapon Skin
              maxLength: 255
            metadata:
              type: object
              description: Additional transaction data
              properties:
                item_id:
                  type: string
                  format: uuid
                  description: Universally Unique Identifier (UUID v4)
                  example: 123e4567-e89b-12d3-a456-426614174000
                  maxLength: 36
                quantity:
                  type: integer
                  minimum: 1
                vendor_id:
                  type: string
                  format: uuid
                  description: Universally Unique Identifier (UUID v4)
                  example: 123e4567-e89b-12d3-a456-426614174000
                  maxLength: 36
            processed_at:
              type: string
              format: date-time
              description: ISO 8601 timestamp
              example: '2025-12-28T10:00:00Z'
              maxLength: 30
            failure_reason:
              type: string
              description: Failure reason if applicable
              example: Insufficient funds
              maxLength: 200
        description: 'BACKEND NOTE: Financial transactions with audit trail and metadata.'
      - type: object
    WalletEntity:
      allOf:
      - allOf:
        - allOf:
          - $ref: '#/components/schemas/BaseEntity'
          - type: object
            required:
            - version
            properties:
              version:
                type: integer
                minimum: 1
                description: Optimistic locking version
                example: 1
          description: 'BACKEND NOTE: Extends BaseEntity with version control. Use
            for concurrent-safe updates.'
        - type: object
          required:
          - owner_id
          - currency_code
          properties:
            owner_id:
              type: string
              format: uuid
              description: Universally Unique Identifier (UUID v4)
              example: 123e4567-e89b-12d3-a456-426614174000
              maxLength: 36
            currency_code:
              type: string
              pattern: ^[A-Z]{3}$
              description: Currency code
              example: EDY
            balance:
              type: number
              minimum: 0
              description: Current balance
              example: 1500.5
            reserved_balance:
              type: number
              minimum: 0
              description: Reserved for pending transactions
              example: 100.0
            available_balance:
              type: number
              minimum: 0
              description: Available for spending (balance - reserved)
              example: 1400.5
            is_frozen:
              type: boolean
              description: Whether wallet is frozen
              example: false
            freeze_reason:
              type: string
              description: Reason for freezing
              example: Suspicious activity
              maxLength: 200
            last_transaction_at:
              type: string
              format: date-time
              description: ISO 8601 timestamp
              example: '2025-12-28T10:00:00Z'
              maxLength: 30
        description: 'BACKEND NOTE: Player wallets with balance management and optimistic
          locking.'
      - type: object
    CreateTradeSessionRequest:
      allOf:
      - allOf:
        - $ref: '#/components/schemas/BaseEntity'
        - type: object
          properties:
            created_by:
              type: string
              format: uuid
              description: ID of user who created the entity
              example: 123e4567-e89b-12d3-a456-426614174001
              maxLength: 36
            updated_by:
              type: string
              format: uuid
              description: ID of user who last modified the entity
              example: 123e4567-e89b-12d3-a456-426614174002
              maxLength: 36
        description: 'BACKEND NOTE: Extends BaseEntity with audit trail. Use for admin-managed
          entities.'
      - type: object
        required:
        - participants
        - offer
        properties:
          participants:
            type: array
            items:
              type: string
              format: uuid
              description: Universally Unique Identifier (UUID v4)
              example: 123e4567-e89b-12d3-a456-426614174000
              maxLength: 36
            minItems: 2
            maxItems: 10
            description: Users participating in trade
          offer:
            type: object
            required:
            - offered_items
            - requested_items
            properties:
              offered_items:
                type: array
                items:
                  type: object
                  required:
                  - item_id
                  - quantity
                  properties:
                    item_id:
                      type: string
                      format: uuid
                      description: Universally Unique Identifier (UUID v4)
                      example: 123e4567-e89b-12d3-a456-426614174000
                      maxLength: 36
                    quantity:
                      type: integer
                      minimum: 1
                description: Items offered in trade
              requested_items:
                type: array
                items:
                  type: object
                  required:
                  - item_id
                  - quantity
                  properties:
                    item_id:
                      type: string
                      format: uuid
                      description: Universally Unique Identifier (UUID v4)
                      example: 123e4567-e89b-12d3-a456-426614174000
                      maxLength: 36
                    quantity:
                      type: integer
                      minimum: 1
                description: Items requested in trade
              offered_currency:
                type: object
                properties:
                  amount:
                    type: number
                    minimum: 0
                  currency_code:
                    type: string
                    pattern: ^[A-Z]{3}$
                description: Currency offered
              requested_currency:
                type: object
                properties:
                  amount:
                    type: number
                    minimum: 0
                  currency_code:
                    type: string
                    pattern: ^[A-Z]{3}$
                description: Currency requested
          expires_at:
            type: string
            format: date-time
            description: ISO 8601 timestamp
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%. Optimistic locking for concurrent trades.'
    TradeSessionResponse:
      allOf:
      - $ref: '#/components/schemas/TradeSessionEntity'
      - type: object
    TradeOfferResponse:
      allOf:
      - $ref: '#/components/schemas/TradeOfferEntity'
      - type: object
    HealthResponse:
      type: object
      required:
      - status
      - timestamp
      properties:
        status:
          type: string
          enum:
          - healthy
          - degraded
          - unhealthy
          example: healthy
          maxLength: 255
        domain:
          type: string
          example: service-name
          maxLength: 255
        timestamp:
          type: string
          format: date-time
          example: '2025-12-28T10:00:00Z'
          maxLength: 255
        version:
          type: string
          example: 1.0.0
          maxLength: 50
        uptime_seconds:
          type: integer
          example: 3600
          minimum: 0
        active_connections:
          type: integer
          example: 1500
          minimum: 0
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    Error:
      type: object
      required:
      - code
      - message
      properties:
        code:
          type: integer
          example: 500
          format: int32
          minimum: 100
          maximum: 599
        message:
          type: string
          example: Internal server error
          maxLength: 1000
        details:
          type: object
          description: Additional error details
      description: Standard error response format
    CreateExampleRequest:
      type: object
      required:
      - name
      - description
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: Desired example name
          example: My New Example
        description:
          type: string
          maxLength: 1000
          description: Example description
          example: A new example following enterprise-grade patterns.
        tags:
          type: array
          items:
            type: string
            maxLength: 50
          maxItems: 10
          description: Initial tags
        priority:
          type: integer
          minimum: 1
          maximum: 10
          default: 5
          description: Processing priority
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    UpdateExampleRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: New example name
          example: Updated Example Name
        description:
          type: string
          maxLength: 1000
          description: New description
        status:
          type: string
          enum:
          - active
          - inactive
          - pending
          - archived
          description: New status
        tags:
          type: array
          items:
            type: string
            maxLength: 50
          maxItems: 10
          description: Replace all tags
        is_active:
          type: boolean
          description: Update active status
        priority:
          type: integer
          minimum: 1
          maximum: 10
          description: New priority
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    Example:
      type: object
      required:
      - id
      - name
      - description
      - created_at
      - updated_at
      properties:
        id:
          type: string
          format: uuid
          description: Example unique identifier
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: Example name
        description:
          type: string
          maxLength: 500
          description: Example description
        created_at:
          type: string
          format: date-time
          description: Creation timestamp
        updated_at:
          type: string
          format: date-time
          description: Last update timestamp
      description: Example entity
    ExampleResponse:
      type: object
      required:
      - example
      properties:
        example:
          $ref: '#/components/schemas/Example'
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%.'
    ExampleListResponse:
      type: object
      required:
      - examples
      - total_count
      - has_more
      properties:
        examples:
          type: array
          items:
            $ref: '#/components/schemas/Example'
          description: List of examples
        has_more:
          type: boolean
          description: Whether there are more results available
          example: true
        total_count:
          type: integer
          description: Total number of examples matching criteria
          example: 150
        page:
          type: integer
          description: Current page number
          example: 1
        limit:
          type: integer
          description: Items per page
          example: 20
      description: 'BACKEND NOTE: Fields ordered for struct alignment (large → small).
        Expected memory savings: 30-50%. Paginated responses optimized for memory
        efficiency.'
    PaginationParams:
      type: object
      properties:
        limit:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
          example: 20
        offset:
          type: integer
          minimum: 0
          default: 0
          example: 0
    PaginatedResponse:
      type: object
      required:
      - items
      - total
      - limit
      - offset
      properties:
        items:
          type: array
          description: Array of items
        total:
          type: integer
          minimum: 0
          example: 100
          description: Total number of items
        limit:
          type: integer
          minimum: 1
          maximum: 100
          example: 20
          description: Items per page
        offset:
          type: integer
          minimum: 0
          example: 0
          description: Number of items to skip
    AuditableEntity:
      allOf:
      - $ref: '#/components/schemas/BaseEntity'
      - type: object
        properties:
          created_by:
            type: string
            format: uuid
            description: ID of user who created the entity
            example: 123e4567-e89b-12d3-a456-426614174001
            maxLength: 36
          updated_by:
            type: string
            format: uuid
            description: ID of user who last modified the entity
            example: 123e4567-e89b-12d3-a456-426614174002
            maxLength: 36
      description: 'BACKEND NOTE: Extends BaseEntity with audit trail. Use for admin-managed
        entities.'
    VersionedEntity:
      allOf:
      - $ref: '#/components/schemas/BaseEntity'
      - type: object
        required:
        - version
        properties:
          version:
            type: integer
            minimum: 1
            description: Optimistic locking version
            example: 1
      description: 'BACKEND NOTE: Extends BaseEntity with version control. Use for
        concurrent-safe updates.'
    SoftDeletableEntity:
      allOf:
      - $ref: '#/components/schemas/BaseEntity'
      - type: object
        properties:
          deleted_at:
            type: string
            format: date-time
            nullable: true
            description: Soft deletion timestamp (null if not deleted)
            example: null
            maxLength: 30
      description: 'BACKEND NOTE: Extends BaseEntity with soft delete capability.
        Use for recoverable deletions.'
    UpdateRequest:
      type: object
      required:
      - id
      description: Base schema for update operations with optimistic locking support.
      properties:
        id:
          $ref: '#/components/schemas/UUID'
        version:
          type: integer
          minimum: 1
          description: Current entity version for optimistic locking
        metadata:
          type: object
          properties:
            updated_by:
              $ref: '#/components/schemas/UUID'
            reason:
              type: string
              maxLength: 200
              description: Update reason for audit trail
    UUID:
      type: string
      format: uuid
      description: Universally Unique Identifier (UUID v4)
      example: 123e4567-e89b-12d3-a456-426614174000
      maxLength: 36
    Email:
      type: string
      format: email
      description: Email address
      example: user@necpgame.com
      maxLength: 255
    Timestamp:
      type: string
      format: date-time
      description: ISO 8601 timestamp
      example: '2025-12-28T10:00:00Z'
      maxLength: 30
    Version:
      type: string
      pattern: ^\d+\.\d+\.\d+$
      description: Semantic version (MAJOR.MINOR.PATCH)
      example: 1.0.0
      maxLength: 20
    ValidationResult:
      type: object
      required:
      - valid
      properties:
        valid:
          type: boolean
          description: Whether validation passed
          example: true
        errors:
          type: array
          items:
            type: string
          description: Validation error messages
          example:
          - Field is required
          - Invalid format
        warnings:
          type: array
          items:
            type: string
          description: Validation warnings
          example:
          - Deprecated field usage
    CurrencyEntity:
      allOf:
      - allOf:
        - $ref: '#/components/schemas/BaseEntity'
        - type: object
          properties:
            created_by:
              type: string
              format: uuid
              description: ID of user who created the entity
              example: 123e4567-e89b-12d3-a456-426614174001
              maxLength: 36
            updated_by:
              type: string
              format: uuid
              description: ID of user who last modified the entity
              example: 123e4567-e89b-12d3-a456-426614174002
              maxLength: 36
        description: 'BACKEND NOTE: Extends BaseEntity with audit trail. Use for admin-managed
          entities.'
      - type: object
        required:
        - code
        - name
        - symbol
        - type
        properties:
          code:
            type: string
            pattern: ^[A-Z]{3}$
            description: Currency code (ISO 4217)
            example: EDY
            maxLength: 3
          name:
            type: string
            description: Currency display name
            example: Eurodollar
            maxLength: 50
          symbol:
            type: string
            description: Currency symbol
            example: €$
            maxLength: 10
          type:
            type: string
            enum:
            - fiat
            - crypto
            - game_currency
            - premium_currency
            description: Currency category
            example: game_currency
          exchange_rate:
            type: number
            minimum: 0
            description: Exchange rate to base currency
            example: 1.0
          is_active:
            type: boolean
            description: Whether currency is currently tradable
            example: true
          decimal_places:
            type: integer
            minimum: 0
            maximum: 8
            description: Decimal precision
            example: 2
      description: 'BACKEND NOTE: Currency definitions with exchange rates.'
    MarketplaceListingEntity:
      allOf:
      - allOf:
        - $ref: '#/components/schemas/BaseEntity'
        - type: object
          properties:
            created_by:
              type: string
              format: uuid
              description: ID of user who created the entity
              example: 123e4567-e89b-12d3-a456-426614174001
              maxLength: 36
            updated_by:
              type: string
              format: uuid
              description: ID of user who last modified the entity
              example: 123e4567-e89b-12d3-a456-426614174002
              maxLength: 36
        description: 'BACKEND NOTE: Extends BaseEntity with audit trail. Use for admin-managed
          entities.'
      - type: object
        required:
        - seller_id
        - item_id
        - price
        - currency_code
        - status
        properties:
          seller_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          item_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          price:
            type: number
            minimum: 0.01
            description: Listing price
            example: 299.99
          currency_code:
            type: string
            pattern: ^[A-Z]{3}$
            description: Price currency
            example: EDY
          quantity:
            type: integer
            minimum: 1
            description: Items available
            example: 1
          status:
            type: string
            enum:
            - active
            - sold
            - cancelled
            - expired
            description: Listing status
            example: active
          listed_at:
            type: string
            format: date-time
            description: ISO 8601 timestamp
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          expires_at:
            type: string
            format: date-time
            description: ISO 8601 timestamp
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          sold_at:
            type: string
            format: date-time
            description: ISO 8601 timestamp
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          buyer_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          transaction_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
      - type: object
        required:
        - seller_id
        - item_id
        - price
        - currency_code
        - status
        properties:
          seller_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          item_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          item_details:
            type: object
            description: Cached item details for performance
            properties:
              name:
                type: string
                maxLength: 100
              rarity:
                type: string
                enum:
                - common
                - uncommon
                - rare
                - epic
                - legendary
                - unique
              category:
                type: string
                enum:
                - weapon
                - armor
                - consumable
                - material
                - cosmetic
          price:
            type: number
            minimum: 0.01
            description: Listing price
            example: 299.99
          currency_code:
            type: string
            pattern: ^[A-Z]{3}$
            description: Price currency
            example: EDY
          quantity:
            type: integer
            minimum: 1
            description: Items available
            example: 1
          status:
            type: string
            enum:
            - active
            - sold
            - cancelled
            - expired
            - suspended
            description: Listing status
            example: active
          listing_type:
            type: string
            enum:
            - fixed_price
            - auction
            - barter
            description: Type of marketplace listing
            example: fixed_price
          listed_at:
            type: string
            format: date-time
            description: ISO 8601 timestamp
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          expires_at:
            type: string
            format: date-time
            description: ISO 8601 timestamp
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          sold_at:
            type: string
            format: date-time
            description: ISO 8601 timestamp
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          buyer_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          transaction_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          views_count:
            type: integer
            minimum: 0
            description: Number of times listing was viewed
            example: 45
          favorite_count:
            type: integer
            minimum: 0
            description: Number of users who favorited this listing
            example: 12
      description: 'BACKEND NOTE: Marketplace item listings with analytics and seller
        management.'
    AuctionEntity:
      allOf:
      - allOf:
        - $ref: '#/components/schemas/BaseEntity'
        - type: object
          required:
          - version
          properties:
            version:
              type: integer
              minimum: 1
              description: Optimistic locking version
              example: 1
        description: 'BACKEND NOTE: Extends BaseEntity with version control. Use for
          concurrent-safe updates.'
      - type: object
        required:
        - seller_id
        - item_id
        - starting_price
        - currency_code
        - start_time
        - end_time
        properties:
          seller_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          item_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          starting_price:
            type: number
            minimum: 0.01
            description: Auction starting price
            example: 100.0
          currency_code:
            type: string
            pattern: ^[A-Z]{3}$
            description: Auction currency
            example: EDY
          current_bid:
            type: number
            minimum: 0
            description: Current highest bid
            example: 250.0
          current_bidder_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          bid_count:
            type: integer
            minimum: 0
            description: Total number of bids
            example: 12
          start_time:
            type: string
            format: date-time
            description: ISO 8601 timestamp
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          end_time:
            type: string
            format: date-time
            description: ISO 8601 timestamp
            example: '2025-12-28T10:00:00Z'
            maxLength: 30
          status:
            type: string
            enum:
            - scheduled
            - active
            - ended
            - cancelled
            description: Auction status
            example: active
          minimum_bid_increment:
            type: number
            minimum: 0.01
            description: Minimum bid increase
            example: 10.0
          buyout_price:
            type: number
            minimum: 0
            description: Optional buyout price
            example: 500.0
          winner_id:
            type: string
            format: uuid
            description: Universally Unique Identifier (UUID v4)
            example: 123e4567-e89b-12d3-a456-426614174000
            maxLength: 36
          final_price:
            type: number
            description: Winning bid amount
            example: 375.0
      description: 'BACKEND NOTE: Auction system with bid management and optimistic
        locking.'
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT Bearer token authentication
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: API Key authentication
    ServiceAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Service-to-service authentication token
