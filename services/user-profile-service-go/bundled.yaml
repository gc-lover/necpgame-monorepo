openapi: 3.0.3
info:
  title: User Profile Service API
  description: '**Enterprise-grade API for User Profile Management**


    ## Domain Purpose

    Comprehensive user profile management service providing social profiles, avatars,

    privacy controls, and personalization features for the NECPGAME platform.


    ## Business Value

    - Rich user profiles with customization

    - Privacy and visibility controls

    - Avatar and media management

    - Social discovery and networking

    - Profile analytics and insights


    ## Performance Targets

    - P99 Latency: <40ms for all endpoints

    - Storage per Profile: <100KB average

    - Concurrent Updates: 50,000+ supported

    - CDN Integration: For avatars and media


    ## Domain Inheritance

    This service inherits from social-entities.yaml providing:

    - UserProfileEntity for profile data structure

    - GuildEntity for social relationships

    - ChatMessageEntity for profile interactions

    - Optimistic locking for concurrent operations

    - Strict typing with validation rules

    '
  version: 1.0.0
  contact:
    name: NECPGAME API Team
    email: api@necpgame.com
  license:
    name: MIT
servers:
- url: https://api.necpgame.com/v1/user-profile-service
  description: Production environment
- url: https://staging-api.necpgame.com/v1/user-profile-service
  description: Staging environment
- url: http://localhost:8080/api/v1/user-profile-service
  description: Local development
security:
- BearerAuth: []
tags:
- name: Profile Management
  description: Core profile operations
- name: Privacy & Security
  description: Privacy controls and security settings
- name: Media Management
  description: Avatar and media operations
- name: Social Features
  description: Social discovery and networking
- name: Health Monitoring
  description: Service health and performance monitoring
paths:
  /health:
    $ref: ./paths/health.yaml#/paths/~1health
  /profiles:
    $ref: ./paths/profiles.yaml#/paths/~1profiles
  /profiles/{profileId}:
    $ref: ./paths/profiles-{profileId}.yaml#/paths/~1profiles~1{profileId}
  /profiles/{profileId}/avatar:
    $ref: ./paths/profiles-{profileId}-avatar.yaml#/paths/~1profiles~1{profileId}~1avatar
  /profiles/{profileId}/privacy:
    $ref: ./paths/profiles-{profileId}-privacy.yaml#/paths/~1profiles~1{profileId}~1privacy
  /profiles/search:
    $ref: ./paths/profiles-search.yaml#/paths/~1profiles~1search
  /profiles/{profileId}/statistics:
    $ref: ./paths/profiles-{profileId}-statistics.yaml#/paths/~1profiles~1{profileId}~1statistics
components:
  schemas:
    UserProfile:
      description: Complete user profile entity with social domain inheritance
      allOf:
      - $ref: ../common/schemas/social-entities.yaml#/UserProfileEntity
      - type: object
        properties:
          profile_slug:
            type: string
            pattern: ^[a-zA-Z0-9_-]+$
            description: URL-friendly profile identifier
          banner_url:
            type: string
            format: uri
            description: Profile banner image URL
          website_url:
            type: string
            format: uri
            description: Personal website URL
          social_links:
            type: object
            description: Social media links
            properties:
              discord:
                type: string
                description: Discord username
              twitter:
                type: string
                description: Twitter handle
              youtube:
                type: string
                description: YouTube channel
              twitch:
                type: string
                description: Twitch channel
          interests:
            type: array
            items:
              type: string
              maxLength: 50
            description: User interests and hobbies
          customization:
            $ref: '#/components/schemas/ProfileCustomization'
          statistics:
            $ref: '#/components/schemas/ProfileStatistics'
          privacy_settings:
            $ref: '#/components/schemas/PrivacySettings'
    PublicProfileSummary:
      description: Public profile summary for search and discovery
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Profile ID
        display_name:
          type: string
          description: Public display name
        profile_slug:
          type: string
          description: Profile URL slug
        avatar_url:
          type: string
          format: uri
          description: Avatar image URL
        location:
          type: string
          description: Public location
        last_seen:
          type: string
          format: date-time
          description: Last activity (if public)
        is_online:
          type: boolean
          description: Online status (if public)
        interests:
          type: array
          items:
            type: string
          description: Public interests
    ProfileCustomization:
      description: Profile visual customization settings
      type: object
      properties:
        theme:
          type: string
          enum:
          - default
          - cyberpunk
          - neon
          - dark
          - light
          description: Profile theme
        accent_color:
          type: string
          pattern: ^#[0-9A-Fa-f]{6}$
          description: Accent color in hex format
        background_pattern:
          type: string
          enum:
          - none
          - circuit
          - neon_lines
          - geometric
          description: Background pattern
        show_badges:
          type: boolean
          description: Whether to show achievement badges
        show_statistics:
          type: boolean
          description: Whether to show profile statistics
    ProfileStatistics:
      description: Profile statistics and metrics
      type: object
      properties:
        total_friends:
          type: integer
          description: Total friend connections
        profile_views:
          type: integer
          description: Profile view count
        posts_count:
          type: integer
          description: Total posts/messages
        games_played:
          type: integer
          description: Games participated in
        achievements_unlocked:
          type: integer
          description: Achievement count
        reputation_score:
          type: integer
          description: Community reputation
        join_date:
          type: string
          format: date-time
          description: Account creation date
        last_active:
          type: string
          format: date-time
          description: Last activity timestamp
    PrivacySettings:
      description: Profile privacy and visibility controls
      type: object
      properties:
        profile_visibility:
          type: string
          enum:
          - public
          - friends_only
          - private
          description: Overall profile visibility
        show_online_status:
          type: boolean
          description: Show online status to others
        show_last_seen:
          type: boolean
          description: Show last seen timestamp
        allow_friend_requests:
          type: boolean
          description: Allow others to send friend requests
        allow_messages:
          type: string
          enum:
          - everyone
          - friends_only
          - nobody
          description: Who can send messages
        show_location:
          type: boolean
          description: Show location information
        show_statistics:
          type: boolean
          description: Show profile statistics
        searchable:
          type: boolean
          description: Allow profile to appear in searches
    CreateProfileRequest:
      description: Request payload for creating a profile
      type: object
      required:
      - user_id
      - display_name
      properties:
        user_id:
          type: string
          format: uuid
          description: Associated user account ID
        display_name:
          type: string
          minLength: 1
          maxLength: 50
          description: Public display name
        bio:
          type: string
          maxLength: 500
          description: Profile biography
        location:
          type: string
          maxLength: 100
          description: User location
        website_url:
          type: string
          format: uri
          description: Personal website
        interests:
          type: array
          items:
            type: string
            maxLength: 50
          description: User interests
    UpdateProfileRequest:
      description: Request payload for updating a profile
      type: object
      properties:
        display_name:
          type: string
          minLength: 1
          maxLength: 50
          description: Public display name
        bio:
          type: string
          maxLength: 500
          description: Profile biography
        location:
          type: string
          maxLength: 100
          description: User location
        website_url:
          type: string
          format: uri
          description: Personal website
        interests:
          type: array
          items:
            type: string
            maxLength: 50
          description: User interests
        customization:
          $ref: '#/components/schemas/ProfileCustomization'
        version:
          type: integer
          minimum: 1
          description: Current version for optimistic locking
    UpdatePrivacyRequest:
      description: Request payload for updating privacy settings
      type: object
      properties:
        profile_visibility:
          type: string
          enum:
          - public
          - friends_only
          - private
          description: Overall profile visibility
        show_online_status:
          type: boolean
          description: Show online status to others
        show_last_seen:
          type: boolean
          description: Show last seen timestamp
        allow_friend_requests:
          type: boolean
          description: Allow others to send friend requests
        allow_messages:
          type: string
          enum:
          - everyone
          - friends_only
          - nobody
          description: Who can send messages
        show_location:
          type: boolean
          description: Show location information
        show_statistics:
          type: boolean
          description: Show profile statistics
        searchable:
          type: boolean
          description: Allow profile to appear in searches
  responses:
    OK:
      $ref: ../common/responses/success.yaml#/OK
    Created:
      $ref: ../common/responses/success.yaml#/Created
    Updated:
      $ref: ../common/responses/success.yaml#/Updated
    Deleted:
      $ref: ../common/responses/success.yaml#/Deleted
    BadRequest:
      $ref: ../common/responses/error.yaml#/BadRequest
    NotFound:
      $ref: ../common/responses/error.yaml#/NotFound
    Conflict:
      $ref: ../common/responses/error.yaml#/Conflict
  securitySchemes:
    BearerAuth:
      $ref: ../common/security/security.yaml#/BearerAuth
    ServiceAuth:
      $ref: ../common/security/security.yaml#/ServiceAuth
