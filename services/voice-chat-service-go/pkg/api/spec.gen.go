// Package api provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package api

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
