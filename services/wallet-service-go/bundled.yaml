openapi: 3.0.3
info:
  title: Wallet Service API
  description: 'Enterprise-grade Wallet Management System –¥–ª—è NECPGAME –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.


    ## üéØ **Wallet Service Overview**


    Wallet Service –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞–º–∏ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
    NECPGAME —Å enterprise-grade –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å—é.


    ### **–ö–ª—é—á–µ–≤—ã–µ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**

    - **Multi-Currency Support**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≤–∞–ª—é—Ç

    - **Wallet Creation**: –°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ—à–µ–ª—å–∫–æ–≤

    - **Balance Management**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞–º–∏

    - **Transaction History**: –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π


    ### **–¢–∏–ø—ã –ö–æ—à–µ–ª—å–∫–æ–≤**

    - **Primary Wallet**: –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ—à–µ–ª–µ–∫ –∏–≥—Ä–æ–∫–∞

    - **Currency-Specific**: –í–∞–ª—é—Ç–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏

    - **Bonus Wallets**: –ö–æ—à–µ–ª—å–∫–∏ –¥–ª—è –±–æ–Ω—É—Å–æ–≤

    - **Savings Wallets**: –°–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏


    ### **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**

    - **Auto-Conversion**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç

    - **Wallet Linking**: –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–æ–≤

    - **Security Features**: –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

    - **Analytics**: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –¥–æ—Ö–æ–¥–æ–≤


    ## üìä **Performance Targets**

    - **P99 Latency**: <20ms –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–æ—à–µ–ª—å–∫–∞–º–∏

    - **Throughput**: 150,000+ wallet operations/second

    - **Concurrent Users**: 500,000+ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

    - **Wallet Volume**: 5M+ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ—à–µ–ª—å–∫–æ–≤


    ## üîê **Security**

    - JWT RS256 –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

    - Rate limiting –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ø–∞–º–∞

    - Input validation –∏ sanitization

    - Audit logging –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

    '
  version: 1.0.0
  contact:
    name: NECPGAME Platform Team
    email: platform@necpgame.com
  license:
    name: Proprietary
    url: https://necpgame.com/license
servers:
- url: https://wallet.necpgame.com/api/v1
  description: Production Environment
- url: https://wallet-staging.necpgame.com/api/v1
  description: Staging Environment
- url: http://localhost:8080/api/v1
  description: Local Development
security:
- BearerAuth: []
tags:
- name: Wallet Management
  description: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞–º–∏
- name: Balance Operations
  description: –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–ª–∞–Ω—Å–∞–º–∏
- name: Transaction History
  description: –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- name: Currency Conversion
  description: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç
- name: Security
  description: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ—à–µ–ª—å–∫–æ–≤
- name: Analytics
  description: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–æ—à–µ–ª—å–∫–æ–≤
- name: Health
  description: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
paths:
  /health:
    get:
      summary: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
      operationId: healthCheck
      tags:
      - Health
      responses:
        '200':
          description: –°–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
        '503':
          description: –°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
  /health/batch:
    post:
      summary: –ü–∞–∫–µ—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
      operationId: healthBatchCheck
      tags:
      - Health
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HealthBatchRequest'
      responses:
        '200':
          description: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthBatchResponse'
        '400':
          description: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
  /health/ws:
    get:
      summary: WebSocket –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
      operationId: healthWebSocketCheck
      tags:
      - Health
      responses:
        '101':
          description: WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
        '503':
          description: WebSocket –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
  /wallets:
    post:
      summary: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
      operationId: createWallet
      tags:
      - Wallet Management
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWalletRequest'
      responses:
        '201':
          description: –ö–æ—à–µ–ª–µ–∫ —Å–æ–∑–¥–∞–Ω
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletResponse'
        '400':
          description: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: –ö–æ—à–µ–ª–µ–∫ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
    get:
      summary: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–æ—à–µ–ª—å–∫–æ–≤
      operationId: getWallets
      tags:
      - Wallet Management
      parameters:
      - name: ownerId
        in: query
        required: true
        schema:
          type: string
          format: uuid
      - name: type
        in: query
        schema:
          type: string
          enum:
          - primary
          - currency
          - bonus
          - savings
          - investment
      - name: currency
        in: query
        schema:
          type: string
          enum:
          - eddies
          - eurobucks
          - credits
      - name: status
        in: query
        schema:
          type: string
          enum:
          - active
          - frozen
          - closed
          default: active
      - name: limit
        in: query
        schema:
          type: integer
          minimum: 1
          maximum: 50
          default: 20
      - name: offset
        in: query
        schema:
          type: integer
          minimum: 0
          default: 0
      responses:
        '200':
          description: –°–ø–∏—Å–æ–∫ –∫–æ—à–µ–ª—å–∫–æ–≤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletListResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
  /wallets/{walletId}:
    get:
      summary: –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ—à–µ–ª—å–∫–µ
      operationId: getWallet
      tags:
      - Wallet Management
      parameters:
      - name: walletId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ—à–µ–ª—å–∫–µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletResponse'
        '404':
          description: –ö–æ—à–µ–ª–µ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
    put:
      summary: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
      operationId: updateWallet
      tags:
      - Wallet Management
      parameters:
      - name: walletId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateWalletRequest'
      responses:
        '200':
          description: –ö–æ—à–µ–ª–µ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletResponse'
        '403':
          description: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: –ö–æ—à–µ–ª–µ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
    delete:
      summary: –ó–∞–∫—Ä—ã—Ç–∏–µ –∫–æ—à–µ–ª—å–∫–∞
      operationId: closeWallet
      tags:
      - Wallet Management
      parameters:
      - name: walletId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: –ö–æ—à–µ–ª–µ–∫ –∑–∞–∫—Ä—ã—Ç
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletResponse'
        '403':
          description: –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –∫–æ—à–µ–ª–µ–∫
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: –ö–æ—à–µ–ª–µ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
  /wallets/{walletId}/balance:
    get:
      summary: –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∫–æ—à–µ–ª—å–∫–∞
      operationId: getWalletBalance
      tags:
      - Balance Operations
      parameters:
      - name: walletId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: –ë–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletBalanceResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
  /wallets/{walletId}/deposit:
    post:
      summary: –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
      operationId: depositToWallet
      tags:
      - Balance Operations
      parameters:
      - name: walletId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DepositRequest'
      responses:
        '200':
          description: –ö–æ—à–µ–ª–µ–∫ –ø–æ–ø–æ–ª–Ω–µ–Ω
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DepositResponse'
        '400':
          description: –û—à–∏–±–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
  /wallets/{walletId}/withdraw:
    post:
      summary: –°–Ω—è—Ç–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ —Å –∫–æ—à–µ–ª—å–∫–∞
      operationId: withdrawFromWallet
      tags:
      - Balance Operations
      parameters:
      - name: walletId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WithdrawRequest'
      responses:
        '200':
          description: –°—Ä–µ–¥—Å—Ç–≤–∞ —Å–Ω—è—Ç—ã
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WithdrawResponse'
        '400':
          description: –û—à–∏–±–∫–∞ —Å–Ω—è—Ç–∏—è
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
  /wallets/{walletId}/transfer:
    post:
      summary: –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É –∫–æ—à–µ–ª—å–∫–∞–º–∏
      operationId: transferBetweenWallets
      tags:
      - Balance Operations
      parameters:
      - name: walletId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransferRequest'
      responses:
        '200':
          description: –ü–µ—Ä–µ–≤–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransferResponse'
        '400':
          description: –û—à–∏–±–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
  /wallets/{walletId}/transactions:
    get:
      summary: –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∫–æ—à–µ–ª—å–∫–∞
      operationId: getWalletTransactions
      tags:
      - Transaction History
      parameters:
      - name: walletId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      - name: type
        in: query
        schema:
          type: string
          enum:
          - deposit
          - withdraw
          - transfer
          - conversion
          - fee
          - all
          default: all
      - name: startDate
        in: query
        schema:
          type: string
          format: date
      - name: endDate
        in: query
        schema:
          type: string
          format: date
      - name: limit
        in: query
        schema:
          type: integer
          minimum: 1
          maximum: 100
          default: 50
      - name: offset
        in: query
        schema:
          type: integer
          minimum: 0
          default: 0
      responses:
        '200':
          description: –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletTransactionHistoryResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
  /wallets/conversion:
    post:
      summary: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç
      operationId: convertCurrency
      tags:
      - Currency Conversion
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConversionRequest'
      responses:
        '200':
          description: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConversionResponse'
        '400':
          description: –û—à–∏–±–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
  /wallets/auto-conversion:
    post:
      summary: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ-–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
      operationId: setupAutoConversion
      tags:
      - Currency Conversion
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AutoConversionRequest'
      responses:
        '200':
          description: –ê–≤—Ç–æ-–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AutoConversionResponse'
        '400':
          description: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
  /wallets/{walletId}/link:
    post:
      summary: –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–æ–≤
      operationId: linkWallets
      tags:
      - Wallet Management
      parameters:
      - name: walletId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LinkWalletsRequest'
      responses:
        '200':
          description: –ö–æ—à–µ–ª—å–∫–∏ —Å–≤—è–∑–∞–Ω—ã
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LinkWalletsResponse'
        '400':
          description: –û—à–∏–±–∫–∞ —Å–≤—è–∑—ã–≤–∞–Ω–∏—è
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
  /wallets/{walletId}/security:
    get:
      summary: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∫–æ—à–µ–ª—å–∫–∞
      operationId: getWalletSecurity
      tags:
      - Security
      parameters:
      - name: walletId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletSecurityResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
    put:
      summary: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
      operationId: updateWalletSecurity
      tags:
      - Security
      parameters:
      - name: walletId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSecurityRequest'
      responses:
        '200':
          description: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WalletSecurityResponse'
        '400':
          description: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
  /players/{playerId}/wallets/summary:
    get:
      summary: –°–≤–æ–¥–∫–∞ –ø–æ –∫–æ—à–µ–ª—å–∫–∞–º –∏–≥—Ä–æ–∫–∞
      operationId: getPlayerWalletsSummary
      tags:
      - Wallet Management
      parameters:
      - name: playerId
        in: path
        required: true
        schema:
          type: string
          format: uuid
      responses:
        '200':
          description: –°–≤–æ–¥–∫–∞ –ø–æ –∫–æ—à–µ–ª—å–∫–∞–º
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlayerWalletsSummaryResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
  /wallets/analytics/spending:
    get:
      summary: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤
      operationId: getSpendingAnalytics
      tags:
      - Analytics
      parameters:
      - name: playerId
        in: query
        schema:
          type: string
          format: uuid
      - name: period
        in: query
        schema:
          type: string
          enum:
          - daily
          - weekly
          - monthly
          - yearly
          default: monthly
      - name: category
        in: query
        schema:
          type: string
          enum:
          - weapons
          - armor
          - cyberware
          - consumables
          - services
          - misc
      responses:
        '200':
          description: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpendingAnalyticsResponse'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: null
components:
  schemas:
    CharacterEntity:
      $ref: '#/components/schemas/BaseEntity'
    BaseEntity:
      $ref: '#/components/schemas/BaseEntity'
    OptimisticLock:
      $ref: '#/components/schemas/OptimisticLock'
    ErrorResponse:
      $ref: '#/components/schemas/ErrorResponse'
    HealthResponse:
      $ref: '#/components/schemas/HealthResponse'
    HealthBatchRequest:
      $ref: '#/components/schemas/HealthBatchRequest'
    HealthBatchResponse:
      $ref: '#/components/schemas/HealthBatchResponse'
    WalletEntity:
      type: object
      description: –°—É—â–Ω–æ—Å—Ç—å –∫–æ—à–µ–ª—å–∫–∞
      allOf:
      - $ref: '#/components/schemas/BaseEntity'
      - type: object
        required:
        - ownerId
        - type
        - currency
        properties:
          ownerId:
            type: string
            description: ID –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∫–æ—à–µ–ª—å–∫–∞
            format: uuid
            example: 123e4567-e89b-12d3-a456-426614174000
          type:
            type: string
            description: –¢–∏–ø –∫–æ—à–µ–ª—å–∫–∞
            enum:
            - primary
            - currency
            - bonus
            - savings
            - investment
            example: primary
          currency:
            type: string
            description: –í–∞–ª—é—Ç–∞ –∫–æ—à–µ–ª—å–∫–∞
            enum:
            - eddies
            - eurobucks
            - credits
            example: eddies
          balance:
            type: number
            description: –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
            minimum: 0
            example: 50000.5
          availableBalance:
            type: number
            description: Available balance
            minimum: 0
            example: 49500.5
          status:
            type: string
            description: Wallet status
            enum:
            - active
            - frozen
            - closed
            example: active
          linkedWallets:
            type: array
            description: –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏
            items:
              type: string
              format: uuid
          autoConversionEnabled:
            type: boolean
            description: –ê–≤—Ç–æ-–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∞
            default: false
          autoConversionSettings:
            type: object
            description: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ-–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
            properties:
              targetCurrency:
                type: string
                enum:
                - eddies
                - eurobucks
                - credits
              threshold:
                type: number
                minimum: 0
              convertAbove:
                type: boolean
                default: true
          securityLevel:
            type: string
            description: –£—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
            enum:
            - standard
            - enhanced
            - maximum
            example: standard
          dailyLimits:
            type: object
            description: –î–Ω–µ–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã
            properties:
              withdrawal:
                type: number
                minimum: 0
                example: 10000
              transfer:
                type: number
                minimum: 0
                example: 50000
          lastActivity:
            type: string
            description: Last activity timestamp
            format: date-time
          $ref: '#/components/schemas/OptimisticLock'
    WalletTransactionEntity:
      type: object
      description: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∫–æ—à–µ–ª—å–∫–∞
      allOf:
      - $ref: '#/components/schemas/BaseEntity'
      - type: object
        required:
        - walletId
        - type
        - amount
        - currency
        properties:
          walletId:
            type: string
            description: ID –∫–æ—à–µ–ª—å–∫–∞
            format: uuid
          type:
            type: string
            description: –¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
            enum:
            - deposit
            - withdraw
            - transfer
            - conversion
            - fee
            - bonus
            - purchase
            example: deposit
          amount:
            type: number
            description: –°—É–º–º–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
            example: 1000.0
          currency:
            type: string
            description: –í–∞–ª—é—Ç–∞
            enum:
            - eddies
            - eurobucks
            - credits
            example: eddies
          balanceBefore:
            type: number
            description: –ë–∞–ª–∞–Ω—Å –¥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
            minimum: 0
          balanceAfter:
            type: number
            description: –ë–∞–ª–∞–Ω—Å –ø–æ—Å–ª–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
            minimum: 0
          description:
            type: string
            description: –û–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
            maxLength: 255
            example: Purchase of cyberware upgrade
          referenceId:
            type: string
            description: –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–π ID (—Å–≤—è–∑–∞–Ω–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è)
            format: uuid
          category:
            type: string
            description: –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
            enum:
            - weapons
            - armor
            - cyberware
            - consumables
            - services
            - transfers
            - misc
            example: cyberware
          location:
            type: string
            description: –õ–æ–∫–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
            maxLength: 100
          processedAt:
            type: string
            description: –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
            format: date-time
          $ref: '#/components/schemas/OptimisticLock'
    CreateWalletRequest:
      type: object
      required:
      - ownerId
      - type
      - currency
      properties:
        ownerId:
          type: string
          format: uuid
        type:
          type: string
          enum:
          - primary
          - currency
          - bonus
          - savings
          - investment
        currency:
          type: string
          enum:
          - eddies
          - eurobucks
          - credits
        initialBalance:
          type: number
          minimum: 0
          default: 0
        autoConversionEnabled:
          type: boolean
          default: false
        securityLevel:
          type: string
          enum:
          - standard
          - enhanced
          - maximum
          default: standard
    UpdateWalletRequest:
      type: object
      properties:
        autoConversionEnabled:
          type: boolean
        autoConversionSettings:
          type: object
          properties:
            targetCurrency:
              type: string
              enum:
              - eddies
              - eurobucks
              - credits
            threshold:
              type: number
              minimum: 0
            convertAbove:
              type: boolean
        securityLevel:
          type: string
          enum:
          - standard
          - enhanced
          - maximum
        dailyLimits:
          type: object
          properties:
            withdrawal:
              type: number
              minimum: 0
            transfer:
              type: number
              minimum: 0
    WalletResponse:
      type: object
      properties:
        wallet:
          $ref: '#/components/schemas/WalletEntity'
        metadata:
          type: object
          properties:
            createdAt:
              type: string
              format: date-time
            lastTransaction:
              type: string
              format: date-time
    WalletListResponse:
      type: object
      properties:
        wallets:
          type: array
          items:
            $ref: '#/components/schemas/WalletEntity'
        summary:
          type: object
          properties:
            totalWallets:
              type: integer
              minimum: 0
            totalBalance:
              type: number
              minimum: 0
            currencies:
              type: object
              additionalProperties:
                type: number
                minimum: 0
        pagination:
          type: object
          properties:
            total:
              type: integer
              minimum: 0
            limit:
              type: integer
              minimum: 1
              maximum: 50
            offset:
              type: integer
              minimum: 0
            hasNext:
              type: boolean
    WalletBalanceResponse:
      type: object
      properties:
        walletId:
          type: string
          format: uuid
        balance:
          type: number
          minimum: 0
        availableBalance:
          type: number
          minimum: 0
        currency:
          type: string
        pendingTransactions:
          type: integer
          minimum: 0
        lastUpdated:
          type: string
          format: date-time
    DepositRequest:
      type: object
      required:
      - amount
      - source
      properties:
        amount:
          type: number
          minimum: 0.01
        source:
          type: string
          enum:
          - game_earnings
          - marketplace_sale
          - quest_reward
          - achievement_bonus
          - admin_credit
          - external_deposit
        description:
          type: string
          maxLength: 255
        referenceId:
          type: string
          format: uuid
    DepositResponse:
      type: object
      properties:
        walletId:
          type: string
          format: uuid
        depositedAmount:
          type: number
        newBalance:
          type: number
        transactionId:
          type: string
          format: uuid
        processedAt:
          type: string
          format: date-time
    WithdrawRequest:
      type: object
      required:
      - amount
      - destination
      properties:
        amount:
          type: number
          minimum: 0.01
        destination:
          type: string
          enum:
          - game_purchase
          - marketplace_buy
          - item_upgrade
          - service_payment
          - external_withdrawal
        description:
          type: string
          maxLength: 255
    WithdrawResponse:
      type: object
      properties:
        walletId:
          type: string
          format: uuid
        withdrawnAmount:
          type: number
        fee:
          type: number
          minimum: 0
        newBalance:
          type: number
        transactionId:
          type: string
          format: uuid
        processedAt:
          type: string
          format: date-time
    TransferRequest:
      type: object
      required:
      - toWalletId
      - amount
      properties:
        toWalletId:
          type: string
          format: uuid
        amount:
          type: number
          minimum: 0.01
        description:
          type: string
          maxLength: 255
    TransferResponse:
      type: object
      properties:
        fromWalletId:
          type: string
          format: uuid
        toWalletId:
          type: string
          format: uuid
        transferredAmount:
          type: number
        fee:
          type: number
          minimum: 0
        transactionId:
          type: string
          format: uuid
        processedAt:
          type: string
          format: date-time
    WalletTransactionHistoryResponse:
      type: object
      properties:
        walletId:
          type: string
          format: uuid
        transactions:
          type: array
          items:
            $ref: '#/components/schemas/WalletTransactionEntity'
        summary:
          type: object
          properties:
            totalTransactions:
              type: integer
              minimum: 0
            totalDeposits:
              type: number
              minimum: 0
            totalWithdrawals:
              type: number
              minimum: 0
            netChange:
              type: number
            periodStart:
              type: string
              format: date
            periodEnd:
              type: string
              format: date
        pagination:
          type: object
          properties:
            total:
              type: integer
              minimum: 0
            limit:
              type: integer
              minimum: 1
              maximum: 100
            offset:
              type: integer
              minimum: 0
            hasNext:
              type: boolean
    ConversionRequest:
      type: object
      required:
      - fromWalletId
      - toWalletId
      - amount
      properties:
        fromWalletId:
          type: string
          format: uuid
        toWalletId:
          type: string
          format: uuid
        amount:
          type: number
          minimum: 0.01
    ConversionResponse:
      type: object
      properties:
        fromWalletId:
          type: string
          format: uuid
        toWalletId:
          type: string
          format: uuid
        convertedAmount:
          type: number
        receivedAmount:
          type: number
        exchangeRate:
          type: number
        fee:
          type: number
          minimum: 0
        transactionId:
          type: string
          format: uuid
        processedAt:
          type: string
          format: date-time
    AutoConversionRequest:
      type: object
      required:
      - walletId
      - targetCurrency
      - threshold
      properties:
        walletId:
          type: string
          format: uuid
        targetCurrency:
          type: string
          enum:
          - eddies
          - eurobucks
          - credits
        threshold:
          type: number
          minimum: 0
        convertAbove:
          type: boolean
          default: true
    AutoConversionResponse:
      type: object
      properties:
        walletId:
          type: string
          format: uuid
        autoConversionEnabled:
          type: boolean
        settings:
          type: object
          properties:
            targetCurrency:
              type: string
            threshold:
              type: number
            convertAbove:
              type: boolean
        updatedAt:
          type: string
          format: date-time
    LinkWalletsRequest:
      type: object
      required:
      - linkedWalletId
      - linkType
      properties:
        linkedWalletId:
          type: string
          format: uuid
        linkType:
          type: string
          enum:
          - transfer
          - conversion
          - backup
          default: transfer
    LinkWalletsResponse:
      type: object
      properties:
        walletId:
          type: string
          format: uuid
        linkedWalletId:
          type: string
          format: uuid
        linkType:
          type: string
        linkedAt:
          type: string
          format: date-time
    WalletSecurityResponse:
      type: object
      properties:
        walletId:
          type: string
          format: uuid
        securityLevel:
          type: string
          enum:
          - standard
          - enhanced
          - maximum
        twoFactorEnabled:
          type: boolean
        dailyLimits:
          type: object
          properties:
            withdrawal:
              type: number
            transfer:
              type: number
        recentSecurityEvents:
          type: array
          items:
            type: object
            properties:
              eventType:
                type: string
                enum:
                - login
                - failed_login
                - limit_exceeded
                - suspicious_activity
              timestamp:
                type: string
                format: date-time
              details:
                type: string
    UpdateSecurityRequest:
      type: object
      properties:
        securityLevel:
          type: string
          enum:
          - standard
          - enhanced
          - maximum
        twoFactorEnabled:
          type: boolean
        dailyLimits:
          type: object
          properties:
            withdrawal:
              type: number
              minimum: 0
            transfer:
              type: number
              minimum: 0
    PlayerWalletsSummaryResponse:
      type: object
      properties:
        playerId:
          type: string
          format: uuid
        wallets:
          type: array
          items:
            $ref: '#/components/schemas/WalletEntity'
        totalBalance:
          type: object
          additionalProperties:
            type: number
            minimum: 0
        recentTransactions:
          type: array
          items:
            $ref: '#/components/schemas/WalletTransactionEntity'
          maxItems: 10
        walletStats:
          type: object
          properties:
            totalWallets:
              type: integer
              minimum: 0
            activeWallets:
              type: integer
              minimum: 0
            frozenWallets:
              type: integer
              minimum: 0
    SpendingAnalyticsResponse:
      type: object
      properties:
        playerId:
          type: string
          format: uuid
        period:
          type: string
          enum:
          - daily
          - weekly
          - monthly
          - yearly
        totalSpent:
          type: number
          minimum: 0
        totalEarned:
          type: number
          minimum: 0
        netChange:
          type: number
        spendingByCategory:
          type: object
          additionalProperties:
            type: number
            minimum: 0
        topSpendingCategories:
          type: array
          items:
            type: object
            properties:
              category:
                type: string
              amount:
                type: number
              percentage:
                type: number
                minimum: 0
                maximum: 100
        trends:
          type: object
          properties:
            spendingTrend:
              type: string
              enum:
              - increasing
              - decreasing
              - stable
            averageDailySpending:
              type: number
            comparisonToLastPeriod:
              type: number
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
