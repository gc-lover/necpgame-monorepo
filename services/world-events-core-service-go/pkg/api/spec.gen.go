// Package api provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package api

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
