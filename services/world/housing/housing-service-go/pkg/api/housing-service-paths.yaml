paths:
  /world/housing/apartments/available:
    get:
      tags:
        - Apartment Manager
      summary: Получить список доступных квартир
      operationId: getAvailableApartments
      parameters:
        - name: location
          in: query
          schema:
            type: string
        - name: apartment_type
          in: query
          schema:
            type: string
            enum:
              - studio
              - standard
              - penthouse
              - guild_hall
        - name: owner_id
          in: query
          schema:
            type: string
            format: uuid
        - name: owner_type
          in: query
          schema:
            type: string
        - name: is_public
          in: query
          schema:
            type: boolean
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        '200':
          description: Список доступных квартир
          content:
            application/json:
              schema:
                type: object
                properties:
                  apartments:
                    type: array
                    items:
                      $ref: '#/components/schemas/Apartment'
                  total:
                    type: integer
                  limit:
                    type: integer
                  offset:
                    type: integer
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/apartments/purchase:
    post:
      tags:
        - Apartment Manager
      summary: Купить квартиру
      operationId: purchaseApartment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PurchaseApartmentRequest'
      responses:
        '201':
          description: Квартира куплена
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Apartment'
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/apartments/{apartment_id}:
    get:
      tags:
        - Apartment Manager
      summary: Получить информацию о квартире
      operationId: getApartment
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Информация о квартире
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Apartment'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    patch:
      tags:
        - Apartment Manager
      summary: Обновить настройки квартиры
      operationId: updateApartment
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateApartmentRequest'
      responses:
        '200':
          description: Квартира обновлена
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Apartment'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/apartments/{apartment_id}/visit:
    post:
      tags:
        - Visit Manager
      summary: Посетить квартиру
      operationId: visitApartment
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - visitor_id
              properties:
                visitor_id:
                  type: string
                  format: uuid
      responses:
        '200':
          description: Посещение зарегистрировано
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Apartment'
        '400':
          $ref: '#/components/responses/BadRequest'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
  /world/housing/apartments/{apartment_id}/guests:
    get:
      tags:
        - Apartment Manager
      summary: Получить список гостей
      operationId: getApartmentGuests
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Список гостей
          content:
            application/json:
              schema:
                type: object
                properties:
                  guests:
                    type: array
                    items:
                      $ref: '#/components/schemas/Guest'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags:
        - Apartment Manager
      summary: Добавить гостя
      operationId: addGuest
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - character_id
              properties:
                character_id:
                  type: string
                  format: uuid
      responses:
        '200':
          description: Гость добавлен
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
        - Apartment Manager
      summary: Удалить гостя
      operationId: removeGuest
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: player_id
          in: query
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Гость удален
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
        '404':
          $ref: '#/components/responses/NotFound'
  /world/housing/furniture/shop:
    get:
      tags:
        - Furniture Manager
      summary: Получить каталог мебели
      operationId: getFurnitureShop
      parameters:
        - name: category
          in: query
          schema:
            type: string
            enum:
              - decorative
              - functional
              - comfort
              - storage
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 50
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        '200':
          description: Каталог мебели
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/FurnitureItem'
                  total:
                    type: integer
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/apartments/{apartment_id}/furniture:
    get:
      tags:
        - Furniture Manager
      summary: Получить размещенную мебель
      operationId: getPlacedFurniture
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Размещенная мебель
          content:
            application/json:
              schema:
                type: object
                properties:
                  furniture:
                    type: array
                    items:
                      $ref: '#/components/schemas/PlacedFurniture'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags:
        - Furniture Manager
      summary: Разместить мебель
      operationId: placeFurniture
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PlaceFurnitureRequest'
      responses:
        '201':
          description: Мебель размещена
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlacedFurniture'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/apartments/{apartment_id}/furniture/{furniture_id}:
    patch:
      tags:
        - Furniture Manager
      summary: Обновить позицию мебели
      operationId: updateFurniturePosition
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: furniture_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateFurniturePositionRequest'
      responses:
        '200':
          description: Позиция обновлена
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlacedFurniture'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags:
        - Furniture Manager
      summary: Удалить мебель
      operationId: removeFurniture
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: furniture_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Мебель удалена
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: success
        '404':
          $ref: '#/components/responses/NotFound'
  /world/housing/prestige/leaderboard:
    get:
      tags:
        - Prestige Calculator
      summary: Получить лидерборд престижа
      operationId: getPrestigeLeaderboard
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 50
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        '200':
          description: Лидерборд престижа
          content:
            application/json:
              schema:
                type: object
                properties:
                  entries:
                    type: array
                    items:
                      $ref: '#/components/schemas/PrestigeEntry'
                  total:
                    type: integer
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/apartments/{apartment_id}/settings:
    post:
      tags:
        - Apartment Manager
      summary: Обновить настройки доступа квартиры
      operationId: updateApartmentSettings
      security:
        - BearerAuth: [ ]
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateApartmentSettingsRequest'
      responses:
        '200':
          description: Настройки обновлены
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Apartment'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/furniture/catalog:
    get:
      tags:
        - Furniture Manager Manager
      summary: Получить каталог мебели
      operationId: getFurnitureCatalog
      security:
        - BearerAuth: [ ]
      parameters:
        - name: category
          in: query
          schema:
            type: string
            enum:
              - DECORATIVE
              - FUNCTIONAL
              - COMFORT
              - STORAGE
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 50
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        '200':
          description: Каталог мебели
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FurnitureCatalogResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/furniture/purchase:
    post:
      tags:
        - Furniture Manager Manager
      summary: Купить мебель
      operationId: purchaseFurniture
      security:
        - BearerAuth: [ ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PurchaseFurnitureRequest'
      responses:
        '200':
          description: Мебель куплена
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FurnitureItem'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/furniture/owned/{player_id}:
    get:
      tags:
        - Furniture Manager Manager
      summary: Получить мебель игрока
      operationId: getOwnedFurniture
      security:
        - BearerAuth: [ ]
      parameters:
        - name: player_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: category
          in: query
          schema:
            type: string
            enum:
              - DECORATIVE
              - FUNCTIONAL
              - COMFORT
              - STORAGE
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 50
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        '200':
          description: Мебель игрока
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OwnedFurnitureResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/apartments/{apartment_id}/furniture/{furniture_id}/move:
    post:
      tags:
        - Furniture Manager Placement
      summary: Переместить мебель в квартире
      operationId: moveFurniture
      security:
        - BearerAuth: [ ]
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: furniture_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MoveFurnitureRequest'
      responses:
        '200':
          description: Мебель перемещена
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlacedFurniture'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/apartments/{apartment_id}/prestige:
    get:
      tags:
        - Prestige Calculator Calculator
      summary: Получить престиж квартиры
      operationId: getApartmentPrestige
      security:
        - BearerAuth: [ ]
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Престиж квартиры
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApartmentPrestigeResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/apartments/{apartment_id}/bonuses:
    get:
      tags:
        - Functional Bonus Aggregator
      summary: Получить функциональные бонусы квартиры
      operationId: getApartmentBonuses
      security:
        - BearerAuth: [ ]
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Бонусы квартиры
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApartmentBonusesResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/player/{player_id}/bonuses:
    get:
      tags:
        - Functional Bonus Aggregator
      summary: Получить функциональные бонусы игрока
      operationId: getPlayerBonuses
      security:
        - BearerAuth: [ ]
      parameters:
        - name: player_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Бонусы игрока
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlayerBonusesResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/apartments/{apartment_id}/visits:
    get:
      tags:
        - Visit Manager
      summary: Получить историю посещений квартиры
      operationId: getApartmentVisits
      security:
        - BearerAuth: [ ]
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        '200':
          description: История посещений
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApartmentVisitsResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/player/{player_id}/visits:
    get:
      tags:
        - Visit Manager
      summary: Получить посещения игрока
      operationId: getPlayerVisits
      security:
        - BearerAuth: [ ]
      parameters:
        - name: player_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        '200':
          description: Посещения игрока
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PlayerVisitsResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/events/{apartment_id}:
    get:
      tags:
        - Housing Events
      summary: Получить события квартиры
      operationId: getHousingEvents
      security:
        - BearerAuth: [ ]
      parameters:
        - name: apartment_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: event_type
          in: query
          schema:
            type: string
            enum:
              - housing:apartment-purchased
              - housing:furniture-placed
              - housing:furniture-removed
              - housing:prestige-updated
              - housing:apartment-visited
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        '200':
          description: События квартиры
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HousingEventsResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/shop/catalog:
    get:
      tags:
        - Housing Shop Manager
      summary: Получить каталог магазина мебели
      operationId: getHousingShopCatalog
      security:
        - BearerAuth: [ ]
      parameters:
        - name: category
          in: query
          schema:
            type: string
            enum:
              - DECORATIVE
              - FUNCTIONAL
              - COMFORT
              - STORAGE
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 50
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        '200':
          description: Каталог магазина
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HousingShopCatalogResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/shop/furniture/{furniture_id}:
    get:
      tags:
        - Housing Shop Manager
      summary: Получить детали мебели в магазине
      operationId: getHousingShopFurnitureDetails
      security:
        - BearerAuth: [ ]
      parameters:
        - name: furniture_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Детали мебели
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FurnitureItem'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /world/housing/shop/purchase:
    post:
      tags:
        - Housing Shop Manager
      summary: Купить мебель из магазина
      operationId: purchaseFurnitureFromShop
      security:
        - BearerAuth: [ ]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PurchaseFurnitureRequest'
      responses:
        '200':
          description: Мебель куплена
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FurnitureItem'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
components:
