metadata:
  id: implementation-api-data-models-gameplay
  title: 'API Data Models — Gameplay'
  document_type: implementation
  category: api-data-models
  status: approved
  version: '1.0.0'
  last_updated: 2025-11-07T06:30:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-07T06:30:00Z
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - api
    - data-models
    - gameplay
  topics:
    - quests
    - combat
    - inventory
  related_systems:
    - quest-service
    - inventory-service
    - combat-service
  related_documents:
    - id: implementation-api-data-models-core
      relation: complements
    - id: implementation-api-data-models-social
      relation: complements
  source: shared/docs/knowledge/implementation/api-specs/data-models/gameplay-models.md
  visibility: internal
  audience:
    - concept
    - backend
    - api
  risk_level: medium
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: 'Игровые модели квестов, инвентаря и боя оставались в Markdown и не интегрировались в общий каталог знаний.'
  goal: 'Структурировать gameplay модели в YAML для последующей генерации контрактов и ревью Vision.'
  essence: 'Документ описывает Quest, Inventory и Combat модели, их связи и требования к API.'
  key_points:
    - 'Формализованы Quest и QuestProgress с типами, наградами и отслеживанием веток.'
    - 'InventoryItem и ItemTemplate зафиксированы с качеством, редкостью и дополнительными данными.'
    - 'CombatSession и CombatAction описывают логи, статусы и использование в боевых сервисах.'
content:
  sections:
    - id: overview
      title: 'Обзор'
      body: |
        Gameplay пакет охватывает квесты, инвентарь и боевые сессии.
        Модели служат контрактами для quest-service, combat-service и inventory-service, обеспечивая совместимость фронта и backend.
      mechanics_links: []
      assets: []
    - id: quests
      title: 'Квестовые модели'
      body: |
        Quest описывает идентификаторы, типы, награды и уровни, QuestProgress фиксирует состояние прохождения, выборы и ветки.
        Модели поддерживают extract-квесты, romance-линии и интеграцию с репутацией.
      mechanics_links:
        - content/quests/quests-master-list-2020-2093.yaml
        - mechanics/progression/progression-quests.yaml
      assets: []
    - id: inventory
      title: 'Инвентарь'
      body: |
        InventoryItem связывает персонажа с предметами, учитывает количество, экипировку, износ и пользовательские данные.
        ItemTemplate определяет тип, качество, уровень и статические характеристики, поддерживая экономику и крафт.
      mechanics_links:
        - mechanics/economy/equipment/equipment-iconic-timeline.yaml
      assets: []
    - id: combat
      title: 'Боевые данные'
      body: |
        CombatSession хранит состояние боя, ресурсы игрока и врага, исход и логи.
        CombatAction фиксирует каждое действие, выделяя тип, урон и эффекты, что требуется для аналитики и повторов.
      mechanics_links:
        - mechanics/combat/combat-system-expansion-summary.yaml
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: true
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-07
    author: ai_brain_manager
    changes: 'Игровые модели квестов, инвентаря и боя выделены в отдельный пакет.'
validation:
  checksum: ''
  schema_version: '1.0'

