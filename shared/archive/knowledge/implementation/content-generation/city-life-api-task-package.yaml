metadata:
  id: content-city-life-api-task-package
  title: 'City Life API Task Package'
  document_type: implementation
  category: backend
  status: draft
  version: '0.1.1'
  last_updated: 2025-11-08T09:37:00Z
  concept_approved: false
  concept_reviewed_at: ''
  owners:
    - role: api_task_coordinator
      contact: api@necp.game
  tags:
    - api
    - city-life
    - task-package
  topics:
    - swagger
    - content-generation
  related_systems:
    - world-service
    - social-service
    - economy-service
    - gameplay-service
  related_documents:
    - id: implementation-city-life-population-algorithm
      relation: references
    - id: content-city-life-simulation-plan
      relation: complements
  source: shared/docs/knowledge/implementation/content-generation/city-life-api-task-package.md
  visibility: internal
  audience:
    - api
    - live-ops
    - backend
  risk_level: medium
review:
  chain:
    - role: api_lead
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: Для внедрения алгоритма оживления городов необходим согласованный пакет задач для API-команд.
  goal: Определить целевые сервисы, эндпоинты, события и данные, которые должны быть реализованы через API Task Creator.
  essence: Пакет перечисляет baseline города, ER-сущности, REST и Kafka контракты и требования к карточкам задач.
  key_points:
    - Содержит baseline население и культурные рамки для четырёх районов.
    - Описывает основные таблицы и DTO, требуемые swagger-задачами.
    - Перечисляет REST и Kafka контуры для world/social/economy/gameplay сервисов.
    - Прилагает шаблон карточки для API Task Creator и ссылки на входные данные.
content:
  sections:
    - id: baselines
      title: 'Baseline и культурные рамки'
      body: |
        Таблица описывает население, фракции и культурные запреты для Watson, Westbrook, Shinjuku и Kreuzberg, согласованные с лором.
      mechanics_links: []
      assets: []
    - id: er_entities
      title: 'ER-сущности'
      body: |
        Перечислены ключевые таблицы: `city_districts`, `infrastructure_instances`, `npc_profiles`, `npc_schedules`, `world_events_bindings`, `player_impact_log`.
      mechanics_links: []
      assets: []
    - id: rest_endpoints
      title: 'REST и Kafka контракты'
      body: |
        Описаны эндпоинты world-, social-, economy-, gameplay-сервисов, пример payload snapshot и сообщения Kafka для синхронизации.
      mechanics_links: []
      assets: []
    - id: data_packages
      title: 'Пакеты данных'
      body: |
        Указаны baseline JSON, связанные алгоритмы и симуляционные планы, которые должны прилагаться к swagger-задачам.
      mechanics_links: []
      assets: []
    - id: task_template
      title: 'Шаблон задачи'
      body: |
        Представлен пример карточки для API Task Creator с целями, вложениями и шагами по интеграции сервисов.
      mechanics_links: []
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: true
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '0.1.1'
    date: 2025-11-08
    author: ai_brain_manager
    changes: 'Уточнены baseline и список целевых swagger-задач для пакета City Life.'
validation:
  checksum: ''
  schema_version: '1.0'


