metadata:
  id: faction-war-system
  title: Faction Wars System Overview
  document_type: implementation
  category: start-content
  status: draft
  version: '1.0.0'
  last_updated: 2025-11-07T05:05:00Z
  concept_approved: false
  concept_reviewed_at: ''
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - faction-war
    - branching
    - large-scale-combat
  topics:
    - systemic_narrative
    - world_impact
  related_systems:
    - narrative-service
    - combat-service
    - reputation-service
  related_documents:
    - id: quest-factionwar-am-01-border-skirmish
      relation: implements
    - id: quest-factionwar-gangs-01-turf-dispute
      relation: implements
  source: shared/docs/knowledge/implementation/start-content/faction-wars/faction-war-system.md
  visibility: internal
  audience:
    - concept
    - narrative
    - systems
  risk_level: high
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: Нужна целостная система массовых войн фракций с влиянием на мир и прогресс игроков.
  goal: Зафиксировать дизайн двух образцовых войн с поэтапным развитием и модулями выбора стороны.
  essence: Система предлагает пять стадий конфликта, выбор фракции, динамику репутации и мировые последствия.
  key_points:
    - Две проработанные войны: Arasaka против Militech и Valentinos против Maelstrom.
    - Каждая война состоит из пяти стадий с эскалацией сложности и наградами.
    - Выбор стороны и переключение влияют на репутацию, доступные квесты и состояние мира.
content:
  sections:
    - id: introduction
      title: 'Концепция'
      body: |
        Система Faction Wars вводит масштабные конфликты, в которых игрок выбирает сторону и влияет на баланс сил Night City. Пять стадий войны переводят конфликт от локальных стычек к решающим битвам, а результат отражается на локациях, NPC и экономике.
      mechanics_links:
        - mechanics/world/faction-influence.yaml
      assets: []
    - id: arasaka_militech
      title: 'Война: Arasaka vs Militech'
      body: |
        Конфликт корпораций охватывает эпоху 2060-2077. Игрок выбирает Arasaka или Militech и проходит пять стадий: пограничная стычка, рейд на склады, ликвидация офицера, контроль территории и решающая битва. Каждая стадия увеличивает число врагов и награды, а финал закрепляет контроль над Downtown и обновляет контент.
      mechanics_links:
        - mechanics/combat/encounter-scaling.yaml
      assets: []
    - id: valentinos_maelstrom
      title: 'Война: Valentinos vs Maelstrom'
      body: |
        Гангстерский конфликт 2045-2060 разворачивается в Watson. Стадии включают спор о территории, перехват оружейной сделки, дуэль лидеров, кульминационную перестрелку и последствия победы. Награды дают репутацию, снаряжение и изменяют уличную безопасность.
      mechanics_links:
        - mechanics/reputation/reputation-system.yaml
      assets: []
    - id: choice_system
      title: 'Выбор стороны и переключение'
      body: |
        Выбор фракции немедленно меняет репутацию, открывает уникальные квесты и блокирует противоположные. Существует нейтральная ветка с ограниченным вовлечением и возможность переметнуться до третьей стадии с серьёзным штрафом.
      mechanics_links:
        - mechanics/progression/faction-choice.yaml
      assets: []
    - id: world_impact
      title: 'Мировое влияние'
      body: |
        Победившая фракция меняет визуал улиц, состав торговцев, патрули и цены. Динамические события и случайные встречи адаптируются под состояние войны. Победа корпораций или банд отражается на отношениях союзников и уровне угрозы в районах.
      mechanics_links:
        - mechanics/world/dynamic-events.yaml
      assets: []
    - id: api_mapping
      title: 'Интеграция с API'
      body: |
        Базовые эндпоинты управляют выбором стороны (`POST /api/v1/faction-war/choose-side`), прогрессом стадии (`POST /api/v1/faction-war/stage-complete`), статусом войны (`GET /api/v1/faction-war/status`), состоянием мира (`GET /api/v1/faction-war/world-state`) и сменой стороны (`POST /api/v1/faction-war/switch-side`).
      mechanics_links:
        - services/backend/faction-war/api.yaml
      assets: []
    - id: ux_guidelines
      title: 'UX / UI ориентиры'
      body: |
        Экран выбора фракции содержит аргументы в пользу каждой стороны, визуальные акценты и вариант нейтралитета. Трекер прогресса отображает завершённые стадии, активную цель и показатели репутации, обеспечивая прозрачность участия.
      mechanics_links:
        - mechanics/ui/war-tracker.yaml
      assets: []
    - id: balancing
      title: 'Баланс и развитие'
      body: |
        Принципы баланса: симметричная ценность сторон, значимость выбора и ощутимая цена переключения. Сложность и количество врагов растут по мере прогресса, запланированы расширения с новыми войнами и сезонными событиями.
      mechanics_links:
        - mechanics/balance/combat-difficulty.yaml
      assets: []
appendix:
  glossary:
    - term: Faction War
      definition: Серия квестов и событий, в которых игрок участвует в конфликте фракций, влияя на состояние мира.
  references:
    - id: faction-war-data-model
      description: JSON-пример структуры данных войны фракций.
  decisions: []
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-07
    author: AI Brain Manager
    changes: Зафиксирован обзор системы Faction Wars с двумя конфликтами.
validation:
  checksum: ''
  schema_version: '1.0'

