metadata:
  id: quest-system
  title: 'Система квестов NECPGAME'
  document_type: mechanics
  category: quests
  status: approved
  version: '1.0.0'
  last_updated: 2025-11-10T00:00:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-06T18:15:00Z
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - quests
    - narrative
    - systems
  topics:
    - quest-design
    - dynamic-content
    - player-agency
  related_systems:
    - narrative-service
    - event-service
  related_documents:
    - id: branching-stories
      relation: references
    - id: dialogues
      relation: references
    - id: romances
      relation: references
    - id: combat-shooter-core
      relation: supports
  source: shared/docs/knowledge/mechanics/quests/quest-system.md
  visibility: internal
  audience:
    - concept
    - vision
    - narrative
    - systems
  risk_level: high
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: ''
      status: approved
  next_actions: []
summary:
  problem: Требовалась унифицированная система квестов, покрывающая сюжет, фракции, события и пользовательский контент в условиях постоянно меняющегося мира.
  goal: Определить гибридную модель квестов с поддержкой ветвления, интеграций и широкого набора наград для API и игровой реализации.
  essence: Гибридная система, объединяющая статические и динамические квесты, тесно связанную с фракциями, лигах и выбором игрока.
  key_points:
    - Десять типов квестов, включая пользовательские заказы.
    - Ветвление и необратимые последствия на всех ключевых уровнях.
    - Интеграция с фракциями, лигами и экономикой для динамических наград.
content:
  sections:
    - id: overview
      title: 'Обзор'
      body: |
        Система квестов управляет основными, побочными, событийными и пользовательскими сценариями. Ключевые фичи: гибридное ветвление, связь с временными лигами, динамическая экономическая адаптация наград и глубокая интеграция с системой выбора и последствий.
      mechanics_links:
        - mechanics/quests/branching-stories.md
      assets: []
    - id: quest_types
      title: 'Типы квестов'
      body: |
        Гибридный набор включает main, side, daily, weekly, faction, guild, dynamic, event, social и player-created quests. Игроки могут публиковать собственные задания на досках фиксеров; популярные сценарии становятся каноничными в будущих лигах.
      mechanics_links:
        - mechanics/quests/dialogues.md
      assets: []
    - id: main_structure
      title: 'Основные квесты'
      body: |
        Основные линии используют многопутевую структуру: стартовые истории, пересечения сюжетов и разные концовки зависят от класса, фракции и корпоративного выбора. Мир реагирует на решения, а лиги перезапускают историю, сохраняя канон.
      mechanics_links:
        - mechanics/quests/branching-stories.md
      assets: []
    - id: side_quests
      title: 'Побочные квесты'
      body: |
        Система сочетает статичные цепочки с динамическими и фракционными заданиями. Кланы формируют групповые активности, поддерживающие прогрессию и социальные связи.
      mechanics_links:
        - mechanics/social/npc-hiring-system.md
      assets: []
    - id: daily_weekly
      title: 'Ежедневные и еженедельные квесты'
      body: |
        Ежедневные квесты делятся на фиксированные и динамические, реагируя на события мира. Еженедельные сценарии синхронизированы с глобальными событиями лиг; эвентовые задания активируются при ключевых сюжетных триггерах.
      mechanics_links:
        - mechanics/meta/league-system-mechanics.md
      assets: []
    - id: rewards
      title: 'Награды'
      body: |
        Награды включают XP, валюту, предметы, репутацию, уникальные ачивки и прогресс систем. Их размер зависит от состояния экономики, стиля прохождения (включая стелс) и глобальных трендов.
      mechanics_links:
        - mechanics/economy/stock-exchange/stock-exchange-overview.md
      assets: []
    - id: choices
      title: 'Выборы и последствия'
      body: |
        Все ключевые квесты содержат выборы с каскадными последствиями: доступ к контенту, репутация, состояние мира и будущие ветки. Решения необратимы, обеспечивая уникальные прохождения и глубокую реактивность мира.
      mechanics_links:
        - mechanics/quests/branching-stories.md
      assets: []
    - id: factions
      title: 'Интеграция с фракциями и кланами'
      body: |
        Фракционные и клановые квесты развивают политические линии. Репутация влияет на доступ к ресурсам и сюжетным активам. Политика высших уровней опирается на действия игроков в кланах и фракциях.
      mechanics_links:
        - mechanics/social/npc-hiring-system-детально.md
      assets: []
    - id: league_integration
      title: 'Интеграция с лигами'
      body: |
        Каждая лига перезапускает прогресс, создавая новый сид мира. Базовые квесты доступны всегда, а временные сценарии возникают в зависимости от периода. Игроки вносят вклад в эволюцию канона через популярные пользовательские задания.
      mechanics_links:
        - mechanics/meta/league-system-mechanics.md
      assets: []
    - id: skill_tests
      title: 'Проверки и логирование'
      body: |
        Shooter/MMORPG проверки используют шкалу 0.0–1.0 с модификаторами имплантов, укрытий и погодных эффектов. Групповые проверки учитывают ассисты, а результаты логируются для аналитики и балансировки.
      mechanics_links:
        - mechanics/combat/combat-shooter-core.md
        - mechanics/progression/progression-attributes-matrix.md
      assets: []
    - id: inspirations
      title: 'Источники вдохновения'
      body: |
        Baldur's Gate 3, The Witcher 3, Oblivion/Skyrim и Cyberpunk 2077 задают стандарты глубины, ответвлений и киберпанк-атмосферы. Эти примеры направляют тон и качество квестового дизайна.
      mechanics_links:
        - mechanics/quests/quest-system.yaml
      assets: []
appendix:
  glossary:
    - term: player-created quest
      definition: Задание, сформированное игроками через доски фиксеров и доступное сообществу.
    - term: league reset
      definition: Перезапуск состояния мира и прогресса с началом новой лиги.
  references:
    - title: 'Quest branching design'
      path: 'shared/docs/knowledge/mechanics/quests/branching-stories.md'
    - title: 'Dialogue system'
      path: 'shared/docs/knowledge/mechanics/quests/dialogues.md'
    - title: 'Romance system'
      path: 'shared/docs/knowledge/mechanics/quests/romances.md'
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-03
    author: concept_director
    changes: 'Первичная фиксация гибридной квестовой системы и согласование API готовности.'
  - version: '1.0.1'
    date: 2025-11-10
    author: concept_director
    changes: 'Конвертация в YAML и детализация интеграции с лигами и логированием проверок.'
validation:
  checksum: ''
  schema_version: '1.0'

