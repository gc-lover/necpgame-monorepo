metadata:
  id: player-orders-system-detailed
  title: Система заказов от игроков — детально
  document_type: mechanics
  category: social
  status: approved
  version: '1.0.0'
  last_updated: 2025-11-08T09:51:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-08T09:51:00Z
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - social
    - player-orders
    - systems
  topics:
    - player-economy
    - social-systems
  related_systems:
    - social-service
    - economy-service
    - world-service
    - gameplay-service
  related_documents:
    - id: player-orders-types
      relation: references
    - id: player-orders-creation-detailed
      relation: complements
    - id: player-orders-reputation-detailed
      relation: complements
    - id: npc-hiring-system
      relation: references
  source: shared/docs/knowledge/mechanics/social/player-orders-system-детально.md
  visibility: internal
  audience:
    - concept
    - systems
    - economy
  risk_level: high
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: Детальное описание системы заказов находилось в Markdown и не обеспечивало структурированных ссылок.
  goal: Сформировать полную модель процессов, экономических связей и интеграций системы заказов.
  essence: Документ описывает типы заказов, жизненный цикл, каналы, экономику, рейтинги, роли NPC и интерфейсные требования.
  key_points:
    - Представлена многоуровневая структура ролей, слоёв и модулей.
    - Зафиксированы процессы создания, выполнения и арбитража заказов.
    - Определены экономические формулы, рейтинги и интеграции с внешними сервисами.
content:
  sections:
    - id: methodology
      title: Методика детализации
      body: |
        Система рассматривается по слоям: типы заказов, процесс, экономика, исполнители, рейтинги и арбитраж. Роли включают заказчика, исполнителя, брокера и наблюдателя, а модули social/economy/world/gameplay/npc/factions обеспечивают обработку данных и интерфейсы.
      mechanics_links:
        - mechanics/social/player-orders-types.yaml
      assets: []
    - id: extended_types
      title: Расширенный каталог типов
      body: |
        Каталог охватывает боевые, хакерские, логистические, политические, исследовательские, социальные, творческие и комбинированные заказы с параметрами сложности, риска и требований к репутации.
      mechanics_links:
        - mechanics/social/player-orders-types.yaml
      assets: []
    - id: lifecycle
      title: Жизненный цикл заказа
      body: |
        Процесс включает создание, настройку параметров, публикацию, отбор исполнителей, выполнение, сдачу результатов, расчёт наград, отзывы и арбитраж. Каждый этап синхронизируется с сервисами и журналируется.
      mechanics_links:
        - mechanics/social/player-orders-creation-detailed.yaml
        - mechanics/social/player-orders-execution.yaml
      assets: []
    - id: channels
      title: Контракты и каналы
      body: |
        Контракты распространяются через публичные доски, NPC-брокеров, фракционные каналы, прямые сделки и VR-конференции. Поддерживаются форматы публичных, отборных, закрытых, автоматизированных и аукционных заказов.
      mechanics_links:
        - mechanics/social/player-orders-via-npc.yaml
      assets: []
    - id: economics
      title: Экономика заказов
      body: |
        Описаны модели оплаты, депозитов, комиссий, бонусов и штрафов. Исторические данные и рекомендации формируют рыночные индексы для расчёта стоимости заказов.
      mechanics_links:
        - mechanics/social/player-orders-economy.yaml
      assets: []
    - id: ratings
      title: Рейтинги и репутация
      body: |
        Рейтинги исполнителей, заказчиков и фракций отображаются в UI, сопровождаются бейджами и санкциями. Применяются чёрные списки и ограничения доступа.
      mechanics_links:
        - mechanics/social/player-orders-reputation-detailed.yaml
      assets: []
    - id: npc_role
      title: Роль NPC
      body: |
        NPC выступают заказчиками, исполнителями, брокерами и арбитрами, поддерживая живость мира и баланс системы.
      mechanics_links:
        - mechanics/social/npc-hiring-system.yaml
      assets: []
    - id: world_impact
      title: Влияние на мир и системы
      body: |
        Заказы изменяют влияние фракций, экономику городов, социальные связи и контент. Связаны с алгоритмами City Life и визуальными гайдами локаций.
      mechanics_links:
        - mechanics/social/player-orders-world-impact.yaml
        - mechanics/social/player-orders-world-impact-detailed.yaml
      assets: []
    - id: ux_tools
      title: UX и инструменты
      body: |
        Определены требования к доске заказов, мастеру создания, трекеру прогресса, уведомлениям, журналу контрактов и VR-панелям. Макеты хранятся в Figma и поддерживаются UI-командой.
      mechanics_links:
        - mechanics/social/player-orders-creation-detailed.yaml
      assets: []
    - id: arbitration_security
      title: Арбитраж и безопасность
      body: |
        Описаны механики жалоб, доказательств, санкций и интеграции с security-service и escrow. Все действия логируются для аудита.
      mechanics_links:
        - mechanics/social/player-orders-reputation.yaml
      assets: []
    - id: api_kafka
      title: API и события
      body: |
        Список REST эндпоинтов social/economy/world сервисов и Kafka топиков `social.player-orders.*`, `economy.player-orders.*`, `world.player-orders.*`, их payload и назначение подписчиков.
      mechanics_links:
        - mechanics/social/player-orders-execution.yaml
        - mechanics/social/player-orders-creation-detailed.yaml
      assets: []
    - id: approvals
      title: Проверка и согласование
      body: |
        Веса, процессы, UX и интеграции подтверждены продуктом, UI, экономикой, безопасностью и QA. JSON схемы и Kafka контракты валидированы.
      mechanics_links:
        - mechanics/social/player-orders-reputation-detailed.yaml
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: true
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml#player-orders-system-detailed
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-08
    author: Concept Director Team
    changes: Детализировано ядро системы заказов, добавлены API, UX и интеграции.
validation:
  checksum: ''
  schema_version: '1.0'

