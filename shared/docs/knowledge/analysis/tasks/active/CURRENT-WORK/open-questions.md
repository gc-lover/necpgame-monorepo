# Открытые вопросы для проработки

**Последнее обновление:** 2025-11-09 12:49

---

## ⚡ СРОЧНО: Структура БД для ветвления квестов

### В работе:
- [x] **Анализ текущего состояния системы квестов** - ✅ **Завершено (2025-11-06)**
  - Детальный анализ в `CURRENT-WORK/active/2025-11-06-quest-branching-database-design.md`
  - ER-диаграмма в `CURRENT-WORK/active/2025-11-06-quest-branching-er-diagram.md`

### Результаты проверки (2025-11-09)

- [x] Стратегия партиционирования: `player_quest_choices` и `world_state_history` — RANGE по месяцам; `player_quest_consequences` — LIST по `is_active`; BRIN-индексы для `quest_progress`.
- [x] Кэширование: Redis cluster, TTL 5/2/0.5 минут, инвалидация через `POST /quests/{id}/sync` и pub/sub.
- [x] Синхронизация world_state: Kafka topic `world-state-events`, event sourcing, SLA < 3 секунд.
- [x] Миграция: этапы bootstrap → shadow-write → reprocess → cut-over → cleanup.
- [x] API endpoints: `GET /quests/{id}/graph`, `POST /quests/{id}/choices`, `GET /players/{characterId}/flags`, `GET /world-state/{serverId}`, `GET /analytics/quests/popularity`, `POST /quests/{id}/sync`.

### Требуется исполнение

1. **Liquibase миграции**
   - [x] Прогнать PoC миграций по плану `2025-11-09-quest-branching-poc-plan.md`.

2. **Импорт квестов**
   - [ ] Реализовать утилиту конвертации JSON → SQL.
   - [ ] Прогнать на 5 образцовых квестах.

3. **Нагрузочные тесты**
   - [ ] Конфигурация k6 (1k rps read, 250 rps write).
   - [ ] Метрики: latency, cache hit, Kafka lag.

4. **Документация**
   - [ ] Подготовить гайды для контент-мейкеров и API-разработчиков (после PoC).
   - [ ] Обновить `quest-system.md` best practices.

5. **Инструменты визуализации**
   - [ ] Решение для визуализации dialogue trees (Mermaid/Graphviz + web-viewer).

**Связанные документы:**
- `CURRENT-WORK/active/2025-11-06-quest-branching-database-design.md`
- `CURRENT-WORK/active/2025-11-06-quest-branching-er-diagram.md`
- `CURRENT-WORK/active/2025-11-09-quest-branching-validation.md`
- `CURRENT-WORK/active/2025-11-09-quest-branching-liquibase-plan.md`
- `04-narrative/quest-system.md`
- `04-narrative/quests/BRANCHING-QUESTS-SUMMARY.md`

---

## Боевая система

### ✅ Решено (первый брейншторм завершён):
- [x] Тип боевой системы и стиль стрельбы - **Решено:** MMORPG как основа + аркадная стрельба с элементами реализма (см. `combat-shooting.md`)
- [x] TTK (Time To Kill) - **Решено:** Зависит от зоны/режима + влияние развития персонажа (см. `combat-shooting.md`)
- [x] Система способностей (источники, типы, ограничения) - **Решено:** VALORANT структура + все источники (экипировка/импланты/прокачка) + комбинации (см. `combat-abilities.md`)
- [x] Типы хакерства и логика сетей - **Решено:** Все типы доступны, структура сетей зависит от типа (см. `combat-hacking.md`)
- [x] Киберпространство (тип, игровой процесс) - **Решено:** Детально проработано в `combat-hacking.md` и связанных файлах
- [x] Импланты (ограничения, киберпсихоз) - **Решено:** Базовые ограничения определены, киберпсихоз проработан (см. `combat-implants.md`)
- [x] Экстрактшутер: типы лута/редкость/источники/сложность - **Решено:** Детально проработано (см. `combat-extract.md`)
- [x] Паркур: интеграция с боем - **Решено:** Детально проработано (см. `combat-freerun.md`)
- [x] Стелс: система обнаружения - **Решено:** Детально проработано (см. `combat-stealth.md`)

### Отложено на детальную проработку:
- [x] Детали киберпсихоза (симптомы, прогрессия, управление) - ✅ **Завершено (v1.1.0)** - см. `combat-cyberpsychosis.md`
- [x] Детали экстрактшутера (время в зоне, сложность зон, динамическая сложность) - ✅ **Завершено (v1.3.0)** - см. `combat-extract.md`

**Связанные документы:** `02-gameplay/combat/`

---

## Система прокачки

### Отложено на детальную проработку:
- [x] Система перков (как работают, ограничения) - ✅ **Завершено (v1.0.0)** - см. `progression-perks.md`
- [x] Перерождения (нужны ли, как работают) - ✅ **Завершено (v1.0.0)** - см. `progression-rebirth.md`

**Связанные документы:** `02-gameplay/progression/classes-overview.md`

---

## Экономическая система

### TODO для дальнейшей проработки:
- [ ] Балансировка всех аспектов экономической системы
- [ ] Детальная проработка монетизации контента (ближе к релизу)
- [ ] Проработка инструментов для создания контента

**Связанные документы:** `02-gameplay/economy/economy-overview.md`

---

## Социальные механики

### TODO для дальнейшей проработки:
- [ ] Создание авторских социальных структур (банды, корпорации, организации, академии) для каждого континента и страны
- [ ] Балансировка всех механик социальных структур и взаимодействий

**Связанные документы:** `02-gameplay/social/`

---

## Новые темы для первого брейншторма

- [ ] Повествование (04-narrative/) - первый брейншторм
- [ ] Технические задания (05-technical/) - первый брейншторм

