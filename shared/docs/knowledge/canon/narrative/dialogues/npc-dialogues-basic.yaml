metadata:
  id: canon-narrative-dialogues-npc-basic
  title: 'Базовые диалоги NPC'
  document_type: canon
  category: narrative
  status: draft
  version: '1.0.0'
  last_updated: 2025-11-11T00:00:00Z
  concept_approved: false
  concept_reviewed_at: ''
  owners:
    - role: narrative_director
      contact: narrative@necp.game
  tags:
    - dialogue
    - npc
  topics:
    - narrative
    - systems
  related_systems:
    - narrative-service
    - social-service
  related_documents:
    - id: canon-narrative-dialogue-template
      relation: references
    - id: canon-narrative-dialogues-faction-social-lines
      relation: complements
  source: shared/docs/knowledge/canon/narrative/dialogues/npc-dialogues-basic.md
  visibility: internal
  audience:
    - narrative
    - systems-design
    - liveops
  risk_level: medium
review:
  chain:
    - role: narrative_director
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: Общее руководство по базовым диалогам NPC находилось в Markdown и не было синхронизировано с шаблоном знаний.
  goal: Систематизировать типы реплик, опции ветвления и зависимости от репутации для массовых NPC.
  essence: Документ описывает приветствия, бытовые и торговые ветки, а также параметры ветвления по репутации, выбору и классу.
  key_points:
    - Установлены шаблоны приветствий для первичного, повторного и репутационного взаимодействия.
    - Первичные ветки охватывают бытовые, торговые и квестовые диалоги с выбором ответов.
    - Ветвление основано на репутации, стиле выбора и классе персонажа.
content:
  sections:
    - id: overview
      title: Общее описание
      body: |
        Базовые диалоги формируют основу поведения NPC и комбинируются с уникальными ветками. Структура поддерживает
        гибридный подход: универсальные приветствия, стандартные блоки торговли, интеграция с квестами и реакция на
        состояние игрока.
      mechanics_links: []
      assets: []
    - id: greetings
      title: Приветствия
      body: |
        Для каждого NPC предусмотрены варианты первого контакта, стандартного обращения, реакций на высокую репутацию и
        недоверия. Сценарии адаптируются по истории взаимодействий и отношениям.
      mechanics_links: []
      assets: []
    - id: everyday_dialogues
      title: Обычные диалоги и ветвление
      body: |
        Блок описывает структуру опций, реплик и ветвления при обычном разговоре. Игрок выбирает тему, NPC отвечает
        контекстно, при необходимости открываются дополнительные ветви.
      mechanics_links: []
      assets: []
    - id: trade
      title: Диалоги торговли
      body: |
        Торговые ветки включают приветствия торговца, опции показа ассортимента, продажу, обсуждение товаров и обработку
        недостатка средств. Предусмотрены шаблонные ответы для покупки и продажи.
      mechanics_links: []
      assets: []
    - id: key_npc_examples
      title: Примеры ключевых NPC
      body: |
        Представлены каркасные диалоги для Марко «Фикса» Санчеса, Хосе «Тигра» Рамиреса и Хироши Танаки. Каждый пример
        фиксирует приветствия, опции и описания ответа для организации индивидуальных веток.
      mechanics_links: []
      assets: []
    - id: branching
      title: Механики ветвления
      body: |
        Обозначены направления ветвления по репутации, выбору стиля (мирный/агрессивный) и классу персонажа. Ветви
        влияют на доступные опции, бонусы и штрафы.
      mechanics_links: []
      assets: []
appendix:
  glossary: []
  references:
    - title: NPC Lore Index
      link: ../npc-lore/important-npcs-list.md
    - title: Quest Dialogues
      link: ./quest-dialogues.md
    - title: Branching Dialogues
      link: ./branching-dialogues.md
  decisions: []
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-11
    author: narrative_team
    changes: Конвертирован базовый набор диалогов NPC из Markdown в структурированный YAML.
validation:
  checksum: ''
  schema_version: '1.0'

