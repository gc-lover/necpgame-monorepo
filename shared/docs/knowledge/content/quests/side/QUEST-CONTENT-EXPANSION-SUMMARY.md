# Сводка расширения квестового контента 2020–2093

**Дата:** 2025-11-06  
**Версия:** 2.1.0  
**Статус:** Завершено

---

## Общая статистика

### Файлы JSON (обновлены)

| Период | Файл | Версия | Квесты | События | Лут-таблицы |
|--------|------|--------|---------|---------|-------------|
| 2020–2030 | `quests-expanded-2020-2030.json` | 2.0.0 | 7 | — | — |
| 2030–2045 | `quests-expanded-2030-2045.json` | 2.1.0 | 12 | 12 | 5 |
| 2045–2060 | `quests-expanded-2045-2060.json` | 2.1.0 | 12 | 12 | 7 |
| 2060–2077 | `quests-expanded-2060-2077.json` | 2.1.0 | 12 | 12 | 6 |
| 2078–2090 | `quests-expanded-2078-2090.json` | 2.1.0 | 12 | 12 | 8 |
| 2090–2093 | `quests-expanded-2090-2093.json` | 2.1.0 | 12 | 12 | 8 |

**Итого:**
- **Квестов:** 67 (с полными структурами)
- **Событий перемещений:** 60
- **Уникальных лут-таблиц:** 34

---

## Что добавлено

### 1. События перемещений (Random Encounters)

Для каждого периода создано **12 событий** с:
- **ID и названием** (например, `ev-2030-01`, `DAO-голосование в куполе`)
- **Триггерами** (условия появления: зоны, время, репутация)
- **Условиями** (требования к навыкам, репутации, времени суток)
- **Исходами** (награды, квесты, флаги, баффы/дебаффы)

**Примеры событий:**
- `DAO-голосование в куполе` (2030–2045)
- `Обвал рёбер` (2045–2060)
- `Серый сигнал` (2060–2077)
- `Ярмарка параметров` (2078–2090)
- `Аномалия перезапуска` (2090–2093)

---

### 2. Детальные лут-таблицы

Для всех типов противников и контейнеров добавлены подробные таблицы с:
- **Наименованием предмета** (например, `ammo_box_t2`, `deck_advanced_t3`)
- **Шансом дропа** (от 0.08 до 0.6)
- **Количеством** (диапазоны: `1`, `1-2`, `2-5`, `100-350`)

**Примеры лут-таблиц:**
- `CorpoGuard_T2`: патроны, пистолеты, броня, ключ-карты
- `Netwatch_T3`: модули деки, ICE-breakers, блокираторы трассировки
- `Archivist_T3`: редкие архивы, чипы истории, ключи куратора
- `Council_T3`: печати совета, уставы, токены влияния
- `Vault_T3`: ключ-карты хранилища, фрагменты реликвий, древние технологии

---

### 3. Развёрнутые диалоговые деревья

Добавлены **полные диалоги** (20+ узлов) для ключевых квестов каждого периода:

**Период 2030–2045:**
- **Голос Купола** (22 узла): установка сенсоров в куполе, взаимодействие с охраной и бандами
- **Картография Подмира** (13 узлов): сканирование тоннелей, обход ловушек
- **Нейроэтика 1.0** (7 узлов): работа с пациентом на грани киберпсихоза

**Период 2045–2060:**
- **Ребра Города** (14 узлов): стабилизация городской инфраструктуры, выбор между наймом мерков и скрытным подходом

**Период 2060–2077:**
- **Серые Театры** (11 узлов): расследование корпоративной пропаганды, выбор между переговорами, взломом и штурмом

---

## Структура диалога (пример)

```json
{
  "start": "n1",
  "nodes": [
    {
      "id": "n1",
      "speaker": "NPC",
      "text": "Текст реплики",
      "choices": [
        {
          "text": "Вариант ответа 1",
          "next": "n2"
        },
        {
          "text": "Вариант с проверкой навыка",
          "next": "n3",
          "skillCheck": {
            "attr": "INT",
            "skill": "Hacking",
            "threshold": 9,
            "success": "n3a",
            "fail": "n3b"
          }
        }
      ]
    }
  ]
}
```

---

## Структура события (пример)

```json
{
  "id": "ev-2030-01",
  "name": "DAO-голосование в куполе",
  "triggers": ["enter_dome"],
  "conditions": ["rep.DomeDAO>=10"],
  "outcomes": ["offer_sidequest", "discount_fees"]
}
```

---

## Структура лут-таблицы (пример)

```json
"CorpoGuard_T2": [
  {"item": "ammo_box_t2", "chance": 0.55, "qty": "1-2"},
  {"item": "pistol_t2", "chance": 0.18, "qty": "1"},
  {"item": "armor_plate_t2", "chance": 0.22, "qty": "1"},
  {"item": "keycard_corp", "chance": 0.12, "qty": "1"}
]
```

---

## Готовность к API

Все файлы обновлены в `readiness-tracker.yaml`:
- **Статус:** `ready`
- **Версия:** `2.1.0`
- **API Target:** `api/v1/quests/side/{period}.yaml`

Файлы готовы к созданию API эндпоинтов для:
- Получения квестов по периодам
- Генерации случайных событий
- Расчёта лута с учётом шансов

---

## Рекомендации к использованию

### 1. События перемещений
- Триггеры привязаны к зонам игрового мира (например, `enter_dome`, `net_hub`, `arena`)
- Условия проверяются на навыки и репутацию игрока
- Исходы влияют на прогресс, репутацию и предлагают контракты

### 2. Лут-таблицы
- Шансы балансируются по уровню сложности (T1/T2/T3)
- Редкие предметы (шанс <0.15) требуют дополнительных условий (например, убийство босса)
- Количество варьируется для расходников и валюты

### 3. Диалоги
- Узлы связаны по ID (`n1`, `n2`, `n3a`, `n3b`)
- Проверки навыков (`skillCheck`) ветвят диалог на успех/провал
- Завершающие узлы ведут к `end_success` или `end_fail`

---

## История изменений

### 2025-11-06 (v2.1.0)
- Добавлено 60 событий перемещений для периодов 2030–2093
- Созданы 34 детальные лут-таблицы с шансами и количествами
- Развёрнуты диалоговые деревья для ключевых квестов 2030–2077
- Обновлены версии JSON-файлов до 2.1.0
- Статус в `readiness-tracker.yaml` изменён на `ready`

### 2025-11-05 (v2.0.0)
- Созданы базовые JSON-структуры для всех периодов
- Добавлено 60 квестов-скелетов (по 12 на период)
- Версия 2.0.0

---

## Следующие шаги

1. **Расширить диалоги:** добавить полные деревья для оставшихся квестов
2. **Детализировать исходы событий:** описать механику награды/последствий
3. **Балансировка:** выверить шансы лута и пороги навыков
4. **Интеграция с API:** создать эндпоинты в `API-SWAGGER`

---

**Все файлы готовы к разработке API для текстового MMORPG NECPGAME.**

