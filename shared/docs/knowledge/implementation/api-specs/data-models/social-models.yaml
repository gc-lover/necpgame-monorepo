metadata:
  id: implementation-api-data-models-social
  title: 'API Data Models — Social'
  document_type: implementation
  category: api-data-models
  status: approved
  version: '1.0.0'
  last_updated: 2025-11-07T06:30:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-07T06:30:00Z
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - api
    - data-models
    - social
  topics:
    - parties
    - guilds
    - relationships
  related_systems:
    - party-service
    - guild-service
    - social-graph-service
  related_documents:
    - id: implementation-api-data-models-core
      relation: complements
    - id: implementation-api-data-models-gameplay
      relation: complements
  source: shared/docs/knowledge/implementation/api-specs/data-models/social-models.md
  visibility: internal
  audience:
    - concept
    - backend
    - api
  risk_level: medium
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: 'Социальные модели партии, гильдий и друзей хранились в Markdown и не синхронизировались с pipeline знаний.'
  goal: 'Привести social модели к единому YAML формату для интеграции с задачами Vision и API ревью.'
  essence: 'Документ описывает Party, Guild, Friend и NPC модели с ключевыми полями и ограничениями.'
  key_points:
    - 'Формализована структура Party с лидерством, режимами распределения лута и ограничением состава.'
    - 'Guild и GuildMember фиксируют ролями, уровнем и лимитом участников.'
    - 'Friend и NPC обеспечивают дружбу, блокировки и отношения с городами и судьбой персонажей.'
content:
  sections:
    - id: overview
      title: 'Обзор'
      body: |
        Social пакет поддерживает командные активности, гильдии, социальный граф и NPC отношения.
        Модели служат базой для matchmaking, live-ops и нарратива.
      mechanics_links: []
      assets: []
    - id: party_model
      title: 'Party'
      body: |
        Party хранит лидера, состав, максимальное количество участников и режим распределения лута.
        Модель нужна для кооперативных миссий, рейдов и matchmaking очередей.
      mechanics_links: []
      assets: []
    - id: guild_model
      title: 'Guild'
      body: |
        Guild описывает идентификаторы, тэг, уровень, ограничения по членству и лидерство.
        GuildMember хранит ранг, playerId и дату вступления, что необходимо для аудита и управления правами.
      mechanics_links: []
      assets: []
    - id: friend_npc
      title: 'Друзья и NPC'
      body: |
        Friend модель поддерживает статусы pending, accepted и blocked, фиксируя время создания.
        NPC описывает тип (vendor, quest_giver, romance), расположение, отношения и исход персонажа.
        Эти данные используются social-graph и контент-командами для персонализации.
      mechanics_links: []
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: true
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-07
    author: ai_brain_manager
    changes: 'Социальные модели вынесены в отдельный YAML пакет для партий, гильдий, друзей и NPC.'
validation:
  checksum: ''
  schema_version: '1.0'

