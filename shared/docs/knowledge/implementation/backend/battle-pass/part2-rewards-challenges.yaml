metadata:
  id: backend-battle-pass-part2-rewards
  title: "Battle Pass — Part 2: Rewards & Challenges"
  document_type: implementation
  category: backend
  status: approved
  version: '1.0.1'
  last_updated: 2025-11-08T00:12:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-07T02:41:00Z
  owners:
    - role: economy_lead
      contact: economy@necp.game
  tags:
    - battle-pass
    - rewards
    - challenges
  topics:
    - monetization
    - gameplay-infra
  related_systems:
    - economy-service
    - quest-service
    - achievement-service
  related_documents:
    - id: backend-battle-pass-part1-core
      relation: references
  source: shared/docs/knowledge/implementation/backend/battle-pass/part2-rewards-challenges.md
  visibility: internal
  audience:
    - backend
    - economy
  risk_level: high
review:
  chain:
    - role: economy_lead
      reviewer: ''
      reviewed_at: 2025-11-08T00:12:00Z
      status: approved
  next_actions: []
summary:
  problem: "Нужен формализованный процесс выдачи наград battle pass и генерации еженедельных испытаний."
  goal: "Задокументировать методы claimReward, weekly challenge service и перечень API для battle pass."
  essence: "Часть 2 охватывает выдачу наград, генерацию челленджей, API и типы наград/премиум преимуществ."
  key_points:
    - Java метод `claimReward` с проверками уровней и выдачей по трекам.
    - Сервис weekly challenges с генерацией и завершением.
    - Описаны API для текущего сезона, прогресса, покупок и челленджей.
    - Перечислены типы наград и преимущества премиум-подписки.
content:
  sections:
    - id: claim_rewards
      title: Claim Rewards
      body: |
        Метод `claimReward` проверяет разблокированные уровни, выдаёт бесплатные и премиум награды, обновляет прогресс и
        сохраняет состояние.
      mechanics_links: []
    - id: weekly_challenges
      title: Weekly Challenges
      body: |
        Сервис генерирует пять еженедельных испытаний, обрабатывает завершение, начисляет XP и обновляет достижения.
      mechanics_links: []
    - id: api
      title: API и ответы
      body: |
        Перечислены ключевые endpoints (`/current`, `/progress`, `/claim`, `/purchase-premium`, `/challenges/weekly`, `/rewards`)
        с примерами ответов.
      mechanics_links: []
    - id: reward_types
      title: Типы наград и премиум бонусы
      body: |
        Приведены структуры наград (currency, item, cosmetic, xp boost, title) и преимущества премиум трека (доп. награды,
        XP boost, эксклюзивные косметики).
      mechanics_links: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '1.0.1'
    date: 2025-11-07
    author: economy_lead
    changes: Добавлены методы выдачи наград, weekly challenges и API.
validation:
  checksum: ''
  schema_version: '1.0'

