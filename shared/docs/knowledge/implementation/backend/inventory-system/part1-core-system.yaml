metadata:
  id: backend-inventory-part1-core
  title: "Inventory System — Part 1: Core System"
  document_type: implementation
  category: backend
  status: approved
  version: '1.0.1'
  last_updated: 2025-11-09T01:30:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-09T01:30:00Z
  owners:
    - role: economy_lead
      contact: economy@necp.game
  tags:
    - inventory
    - core-system
    - economy
  topics:
    - gameplay-infra
    - item-management
  related_systems:
    - economy-service
    - character-service
  related_documents:
    - id: backend-inventory-system-overview
      relation: references
    - id: backend-inventory-part2-advanced
      relation: precedes
  source: shared/docs/knowledge/implementation/backend/inventory-system/part1-core-system.md
  visibility: internal
  audience:
    - backend
    - economy
  risk_level: high
review:
  chain:
    - role: economy_lead
      reviewer: ''
      reviewed_at: 2025-11-09T01:30:00Z
      status: approved
  next_actions: []
summary:
  problem: Требуется формализованное описание ядра системы инвентаря, включая хранение, экипировку и базовые операции.
  goal: Документировать архитектуру, схемы данных, логику подбора предметов и API для economy-service.
  essence: Рассматриваются структура инвентаря персонажа, таблицы `character_inventory`/`character_items` и процесс подбора.
  key_points:
    - Определена структура инвентаря, экипировки и банка.
    - Даны SQL схемы для хранения инвентаря и шаблонов предметов.
    - Приведён Java код подбора предметов с учётом веса, требований и стеков.
    - Документ связан с API задачей Inventory Core.
content:
  sections:
    - id: overview
      title: Краткое описание
      body: |
        Core System включает инвентарь, stacking, вес, экипировку, банк/стэш, передачу предметов и базовые операции.
      mechanics_links: []
    - id: architecture
      title: Архитектура системы
      body: |
        Описывает структуру инвентаря персонажа: backpack, equipment и bank/stash. Рассматриваются ограничения и примеры
        организации слотов.
      mechanics_links: []
    - id: database_schema
      title: Схемы базы данных
      body: |
        Приведены таблицы `character_inventory`, `character_items`, `item_templates` с индексами, хранением прочности,
        привязкой и модификаторами.
      mechanics_links: []
    - id: pickup_logic
      title: Логика подбора
      body: |
        Java пример `pickupItem` проверяет вес, требования, объединение стеков, поиск свободного слота и обновление веса
        персонажа, включая уведомления и привязку предметов.
      mechanics_links: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '1.0.1'
    date: 2025-11-07
    author: economy_lead
    changes: Фиксация Java логики подбора, схемы и API задач.
validation:
  checksum: ''
  schema_version: '1.0'

