metadata:
  id: backend-inventory-part2-advanced
  title: "Inventory System — Part 2: Advanced Features"
  document_type: implementation
  category: backend
  status: approved
  version: '1.0.1'
  last_updated: 2025-11-07T02:16:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-08T23:39:00Z
  owners:
    - role: economy_lead
      contact: economy@necp.game
  tags:
    - inventory
    - advanced-features
  topics:
    - gameplay-infra
    - item-management
  related_systems:
    - economy-service
  related_documents:
    - id: backend-inventory-part1-core
      relation: references
    - id: backend-loot-system-part1
      relation: references
  source: shared/docs/knowledge/implementation/backend/inventory-system/part2-advanced-features.md
  visibility: internal
  audience:
    - backend
    - economy
  risk_level: high
review:
  chain:
    - role: economy_lead
      reviewer: ''
      reviewed_at: 2025-11-08T23:39:00Z
      status: approved
  next_actions: []
summary:
  problem: "Требуется описание расширенных механик инвентаря: перегруз, автосортировка, качество предметов и лимиты."
  goal: "Документировать алгоритмы weight/encumbrance, auto-sort/auto-loot, quality tiers и API сводку."
  essence: "Фокус на продвинутых функциях инвентаря, включая оптимизацию производительности, автоподбор и апгрейды."
  key_points:
    - Определены уровни перегрузки и расчёт максимального веса.
    - Описаны алгоритмы auto-sort и auto-loot настроек.
    - Представлены quality tiers, апгрейды и ограничения по слотам.
    - Приведён список API операций и примеры оптимизации (кэширование, batch).
content:
  sections:
    - id: weight
      title: Weight & Encumbrance
      body: |
        Описаны пороги перегрузки и Java-функция вычисления максимального веса с учётом характеристик, перков и экипировки.
      mechanics_links: []
    - id: auto_features
      title: Auto-Sort и Auto-Loot
      body: |
        Приведены алгоритмы автосортировки инвентаря и настройки автоподбора предметов по редкости и типам.
      mechanics_links: []
    - id: quality
      title: Качество предметов
      body: |
        Таблица качеств (Damaged → Legendary) и код расчёта итоговых характеристик с учётом качеств, апгрейдов и зачарований.
      mechanics_links: []
    - id: limits_api
      title: Лимиты, API и оптимизация
      body: |
        Рассмотрены ограничения слотов, примеры API (`/inventory`, `/equipment`, `/bank`, `/transfer`) и оптимизации через
        кэширование и batch операции.
      mechanics_links: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '1.0.1'
    date: 2025-11-07
    author: economy_lead
    changes: Добавлены алгоритмы перегрузки, автосортировки и API summary.
validation:
  checksum: ''
  schema_version: '1.0'

