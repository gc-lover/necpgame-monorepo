metadata:
  id: content-city-life-simulation-plan
  title: 'City Life Simulation Plan'
  document_type: implementation
  category: backend
  status: draft
  version: '0.1.0'
  last_updated: 2025-11-07T20:45:00Z
  concept_approved: false
  concept_reviewed_at: ''
  owners:
    - role: liveops_lead
      contact: liveops@necp.game
  tags:
    - simulation
    - city-life
    - monitoring
  topics:
    - content-generation
    - load-testing
  related_systems:
    - world-service
    - social-service
    - economy-service
  related_documents:
    - id: content-city-life-baseline
      relation: references
  source: shared/docs/knowledge/implementation/content-generation/city-life-simulation-plan.md
  visibility: internal
  audience:
    - live-ops
    - content
    - analytics
  risk_level: high
review:
  chain:
    - role: liveops_lead
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: Нужно протестировать оживление городов и инфраструктуру перед запуском первой волны контента.
  goal: Описать подготовку, сценарии симуляции, мониторинг и отчётность для 24-часового теста.
  essence: План определяет окружение, метрики SLA, стресс-сценарии и требования к алертам для городской симуляции.
  key_points:
    - Подготовка включает импорт baseline, генерацию NPC расписаний и настройку Kafka тем.
    - Сценарии охватывают 24-часовую симуляцию, комбинированный стресс-тест и QA маршрутов.
    - Метрики SLA: плотность NPC, инфраструктурная нагрузка, доля динамических NPC и время реакции на события.
    - Настроены Grafana панели, алерты и требования к отчётности после симуляции.
content:
  sections:
    - id: preparation
      title: 'Подготовка данных и окружения'
      body: |
        Требуется импорт baseline JSON, генерация NPC расписаний, настройка Kafka тем и развёртывание мониторинга Grafana + Prometheus.
      mechanics_links: []
      assets: []
    - id: simulation_scenarios
      title: 'Сценарии симуляции'
      body: |
        Расписаны 24-часовая симуляция с тайм-слайсами, стресс-тест комбинированных событий и QA проверка маршрутов с целевыми метриками.
      mechanics_links: []
      assets: []
    - id: metrics_monitoring
      title: 'Метрики и мониторинг'
      body: |
        Определены панели Grafana, алерты по плотности NPC, queue lag и времени пересчёта. Описаны ключевые показатели SLA.
      mechanics_links: []
      assets: []
    - id: reporting
      title: 'Отчётность и анализ'
      body: |
        План требует собирать JSON лог симуляции, формировать отчёт по метрикам и готовить рекомендации для корректировки алгоритмов.
      mechanics_links: []
      assets: []
    - id: follow_up
      title: 'Дальнейшие шаги'
      body: |
        После симуляции необходимо обновить baseline, настройки алертов и подготовить автоматизацию запуска.
      mechanics_links: []
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: true
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '0.1.0'
    date: 2025-11-07
    author: ai_brain_manager
    changes: 'Первичный план симуляции городского окружения на 24 часа и стресс-сценарии.'
validation:
  checksum: ''
  schema_version: '1.0'


