metadata:
  id: ui-achievements-main
  title: Achievement System UI
  document_type: implementation
  category: ui
  status: approved
  version: '1.0.0'
  last_updated: 2025-11-08T00:28:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-08
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - ui
    - achievements
    - progression
  topics:
    - user-interface
    - player-engagement
  related_systems:
    - achievement-service
    - leaderboard-service
    - notification-service
  related_documents:
    - id: achievement-system-backend
      relation: references
    - id: ui-leaderboards
      relation: references
    - id: notification-system-overview
      relation: references
  source: shared/docs/knowledge/implementation/ui/achievements/ui-achievements-main.md
  visibility: internal
  audience:
    - concept
    - vision
    - frontend
    - backend
  risk_level: high
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: Игрокам нужна консистентная площадка для отслеживания достижений и мета-прогресса в режиме реального времени.
  goal: Описать основной экран достижений, пользовательские сценарии и интеграцию с сервисами прогрессии, уведомлений и лидербордов.
  essence: Модульный UI с фильтрами, карточками и реальным временем обновлений, поддерживающий достижение, статистику и социальные сравнения.
  key_points:
    - Главный экран объединяет прогресс, категории, приоритетные блоки и полный каталог достижений.
    - Компоненты карточек, фильтров и модальных окон работают на едином состоянии и поддерживают скрываемые награды.
    - Интеграции REST и WebSocket обеспечивают синхронизацию прогресса, уведомлений и таблицы лидеров.
content:
  sections:
    - id: overview
      title: Контекст и пользовательские роли
      body: |
        Экран Achievement System отображается после входа в игру и доступен из основного меню. Он предназначен для игроков, отслеживающих достижение целей, и поддерживает социальные функции через сравнение с сообществом.

        Основные роли:
        - Игрок управляет фильтрами, следит за прогрессом и принимает награды.
        - Социальные лидеры используют таблицу лидеров и статусы редких достижений.
        - Администраторы контента контролируют полноту каталогов и редкость наград.
      mechanics_links: []
      assets: []
    - id: main-screen-layout
      title: Макет главного экрана
      body: |
        Макет строится вокруг витрины прогресса, блоков приоритетных достижений и каталога. Верхняя панель выводит суммарный прогресс (выполненные достижения, очки, место в рейтинге) и быстрый доступ к поиску и настройкам.

        Центральные блоки:
        - Recent Unlocks показывает последние завершенные достижения с редкостью и временем получения.
        - Near Completion выводит элементы с высоким процентом прогресса и визуальными индикаторами.
        - Категориальная панель обеспечивает фильтрацию и адаптивно сворачивается на малых экранах.

        Нижний блок представляет каталог из карточек с переключением Grid/List. Каждая карточка демонстрирует статус, редкость, награды и динамический прогресс.
      mechanics_links: []
      assets: []
    - id: interactive-components
      title: Карточки и элементы управления
      body: |
        Achievement Card принимает данные достижения и прогресса игрока, подсвечивает состояние и отображает прогресс бар только при незавершенном статусе. Скрытые достижения замаскированы до момента разблокировки, но сохраняют наградные данные для аналитики.

        Фильтры управляют категориями, редкостью и статусом через локальное состояние. Мобильная версия сворачивает фильтры в выпадающее меню, настольная версия использует кнопку активного состояния.

        Детальное модальное окно раскрывает награды, статистику и историю прогресса. В зависимости от статуса компонент показывает дату разблокировки или текущий прогресс, а также выдаёт список наград (титулы, перки, внутриигровая валюта).
      mechanics_links: []
      assets: []
    - id: search-notifications
      title: Поиск, фильтры и уведомления
      body: |
        Поисковая панель поддерживает мгновенную фильтрацию по названию и описанию достижений. Фильтры по редкости и статусу позволяют быстро переключаться между коллекционными и активными целями.

        Уведомление о разблокировке отображается как всплывающий компонент с визуальными эффектами и кнопкой перехода на экран достижений. Компонент наследует цветовую тему редкости и выводит ключевую награду.

        Реализация учитывает доступность: кнопки фильтров имеют состояние фокуса и озвучиваются screen reader, прогресс-бары снабжены текстовыми альтернативами.
      mechanics_links: []
      assets: []
    - id: integrations
      title: Интеграции и данные
      body: |
        REST API:
        - GET /api/v1/achievements — каталог достижений с базовой информацией.
        - GET /api/v1/players/{playerId}/achievements — персональный прогресс игрока.
        - GET /api/v1/achievements/{achievementId}/stats — статистика редкости и времени получения.
        - GET /api/v1/achievements/leaderboard — топ охотников за достижениями.

        WebSocket канал wss://api.necp.game/v1/gameplay/achievements транслирует события achievement_unlocked и achievement_progress. При получении событий интерфейс обновляет локальные данные и показывает уведомления.

        Телеметрия охватывает просмотры карточек, изменение фильтров, открытие модального окна и переходы в лидерборд, что формирует тепловую карту взаимодействий.
      mechanics_links: []
      assets: []
    - id: technical-requirements
      title: Технические требования и производительность
      body: |
        Клиентская реализация использует React 18 с React Query для загрузки данных и синхронизации с WebSocket. Состояние фильтров хранится в локальном контексте экрана, глобальные уведомления публикуются через систему тостов.

        Производительность поддерживается виртуализацией списка карточек, мемоизацией компонентов карточки и ленивой загрузкой модального окна. Для адаптивности применяются CSS grid, layout switches для mobile и tablet, а также контроль плотности карточек.
      mechanics_links: []
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: true
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-08
    author: AI Brain Manager
    changes: Сконвертирован документ Achievement System UI из Markdown в структурированный формат.
validation:
  checksum: ''
  schema_version: '1.0'

