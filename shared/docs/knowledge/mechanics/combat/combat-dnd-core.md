---
**api-readiness:** needs-work  
**api-readiness-check-date:** 2025-11-09 15:20
**api-readiness-notes:** Устарело. Команда отказывается от D&D-проверок; требуется заменить на спецификацию шутерной боевой системы (TTK, баллистика, recoil).

**target-domain:** gameplay-combat  
**target-microservice:** gameplay-service (8083)  
**target-frontend-module:** modules/combat/mechanics
---

# [АРХИВ] D&D — Ядро системы проверок (кубики и DC)

**Статус:** deprecated  
**Версия:** 1.0.0  
**Дата создания:** 2025-11-05  
**Последнее обновление:** 2025-11-09 01:44  
**Приоритет:** высокий

> ⚠️ **Документ устарел.** Мы переходим на 3D-шутерную боевую модель (web-версия → UE5). Содержимое ниже хранится для истории и не должно использоваться в новых задачах. Необходимо подготовить новую спецификацию `combat-shooter-core.md`, описывающую оружие, баллистику, TTK, хитбоксы, anti-cheat и сетевую синхронизацию.

## Цель (устарело)
Дать формальное ядро системы проверок в стиле D&D для применения в квестах, диалогах, социальных и боевых взаимодействиях, а также в экономике, хакерстве и крафте. (не использовать)

## Словарь
- Проверка (Check): бросок кубика + модификаторы против Сложности (DC).
- DC (Difficulty Class): целевое значение, которое нужно достичь или превзойти.
- Атрибутный модификатор: функция от атрибута персонажа.
- Навыковый бонус: надбавка от прокачанного навыка.
- Ситуационные модификаторы: импланты, состояние, окружение, эффекты.

## Типы кубиков
- Базовый бросок: d20.
- Расширение: d100 для редких «таблиц исходов» и лут-брекетов (связь с экстрактзонами).
- Система преимуществ/помех: бросок 2d20, берём лучший/худший.

## Атрибуты и модификаторы (увязка с существующей системой)
Связь с текущими атрибутами: STR, AGI, REF, BODY, INT, TECH, EMP, WILL, COOL.
- Базовая формула модификатора: floor((ATTR - 10) / 2). Источник: дизайн в стиле D&D.
- Перенастройка допускается балансом (см. раздел Балансировка).

Примеры соответствий:
- Физические: STR, AGI, REF, BODY → ближний бой, уклонение, выносливость.
- Ментальные: INT, TECH, WILL → взлом, анализ, ремонт.
- Социальные: EMP, COOL → убеждение, обман, запугивание, харизма.

## Навыки и бонусы
Навыки из `02-gameplay/progression/classes-general-skills.md` дают навыковый бонус по рангу:
- Ранг Novice: +1
- Trained: +2
- Expert: +3
- Master: +4
- Legendary: +5
(Диапазон подлежит балансировке; стартовые значения для первой итерации.)

## Базовая формула проверки
- d20 + АтрибутныйМодификатор + НавыковыйБонус + СитуационныеМодификаторы >= DC
- Критический успех: натуральная 20 (всегда успех, дополнительные эффекты по контексту)
- Критический провал: натуральная 1 (всегда провал, риск негативных эффектов)

## Диапазоны DC (первичный ориентир)
- Лёгкая: 10
- Средняя: 15
- Сложная: 20
- Очень сложная: 25
- Экстремальная: 30+
Точные значения определяются контекстом зоны, качества имплантов, сложности цели.

## Ситуационные модификаторы (примеры)
- Импланты: от +1 до +3 к релевантным проверкам (с ограничениями, см. киберпсихоз).
- Окружение: освещение, шум, погода, укрытия: -2..+2.
- Состояния: ранения, стресс, киберпсихоз: -1..-3.
- Командные бафы (VALORANT-стиль способностей): +1..+3 на короткое время.

## Повторные попытки и исчерпание
- Повтор через время/ресурсы: каждая следующая попытка получает -2 к броску до смены условий.
- «Цена попытки»: ресурсы, внимание охраны, износ инструмента.

## Инициатива (опционально для событийных сцен)
- 1d20 + REF (или AGI) + модификаторы. Используется для пошаговых сцен, рейдов, диалоговых дуэлей.

## Классовые модификаторы и специализации

### Бонусы классов к проверкам
Каждый класс дает уникальные бонусы к определенным типам проверок:

**Solo (Боец):**
- +2 к проверкам Melee Combat, Gunplay, Defense
- Критический успех на атаке: двойной урон или дополнительный эффект

**Netrunner (Хакер):**
- +2 к проверкам Hacking, Cyberspace, Technology
- Преимущество на проверках взлома сетей

**Techie (Техник):**
- +2 к проверкам Repair, Crafting, Technology
- Преимущество на проверках ремонта/крафта

**Fixer (Фиксер):**
- +2 к проверкам Trading, Persuasion, Charisma
- Преимущество на проверках торговли и переговоров

**Rockerboy (Рокербой):**
- +2 к проверкам Charisma, Persuasion, Communication
- Уникальные социальные проверки для влияния на толпу

**Media (Медиа):**
- +2 к проверкам Analysis, Perception, Communication
- Преимущество на проверках обнаружения информации

**Nomad (Кочевник):**
- +2 к проверкам Driving, Survival, Scavenging
- Преимущество на проверках навигации и выживания

**Corpo (Корпоративный):**
- +2 к проверкам Persuasion, Charisma, Trading
- Бонусы при проверках с корпоративными NPC

**Lawman (Законохранитель):**
- +2 к проверкам Intimidation, Perception, Defense
- Преимущество на проверках расследования

**Medtech (Медик):**
- +2 к проверкам связанным с медициной, Survival
- Уникальные проверки лечения и восстановления

**Politician (Политик):**
- +2 к проверкам Persuasion, Charisma, Communication
- Уникальные проверки влияния на фракции

**Trader (Торговец):**
- +2 к проверкам Trading, Persuasion
- Преимущество на проверках торговли и оценки предметов

**Teacher (Учитель):**
- +2 к проверкам Communication, Persuasion
- Уникальные проверки обучения и менторства

### Подклассы и модификаторы
Подклассы могут давать дополнительные +1 к определенным проверкам или уникальные механики.

## Таблица соответствий: Атрибут → Навык → Тип проверки

### Физические проверки (STR, AGI, REF, BODY)

| Атрибут | Модификатор | Навык | Тип проверки | Примеры использования |
|---------|-------------|-------|--------------|---------------------|
| STR | floor((STR-10)/2) | Melee Combat, Scavenging | Физическая сила | Поднять тяжелый объект, проломить дверь, ближний бой |
| AGI | floor((AGI-10)/2) | Parkour, Stealth, Melee Combat | Ловкость | Паркур, скрытность, акробатические атаки |
| REF | floor((REF-10)/2) | Gunplay, Defense, Perception | Рефлексы | Стрельба, уклонение, реакция на угрозы |
| BODY | floor((BODY-10)/2) | Endurance, Survival, Swimming | Выносливость | Выживание, сопротивление урону, плавание |

### Ментальные проверки (INT, TECH, WILL)

| Атрибут | Модификатор | Навык | Тип проверки | Примеры использования |
|---------|-------------|-------|--------------|---------------------|
| INT | floor((INT-10)/2) | Hacking, Analysis, Cartography | Интеллект | Взлом, анализ данных, навигация |
| TECH | floor((TECH-10)/2) | Repair, Crafting, Technology | Технические способности | Ремонт, крафт, понимание технологий |
| WILL | floor((WILL-10)/2) | Communication, сопротивление психическим эффектам | Воля | Устойчивость к манипуляциям, фокус |

### Социальные проверки (EMP, COOL)

| Атрибут | Модификатор | Навык | Тип проверки | Примеры использования |
|---------|-------------|-------|--------------|---------------------|
| EMP | floor((EMP-10)/2) | Persuasion, Charisma, Trading, Communication | Эмпатия | Убеждение, торговля, чтение эмоций |
| COOL | floor((COOL-10)/2) | Intimidation, Deception, Stealth | Холоднокровие | Запугивание, обман, контроль эмоций |

## Групповые проверки (MMORPG контекст)

### Типы групповых проверок

**1. Кооперативная проверка (Cooperative Check):**
- Один активный исполнитель (лидер проверки)
- Остальные участники оказывают помощь (assist)
- Каждый помощник с успешной проверкой помощи (DC 10) дает +1 к основной проверке
- Максимум +3 от помощников

**Формула:** d20 + ЛидерМодификаторы + ПомощьБонус (до +3) >= DC

**2. Командная проверка (Team Check):**
- Все участники делают проверку независимо
- Успех определяется по большинству (например, 3 из 5 должны пройти)
- Или: средний результат группы должен превысить DC

**3. Ролевая проверка (Role Check):**
- Каждый участник выполняет свою роль
- Специализированные проверки для разных ролей
- Пример: хакер взламывает, скаут обнаруживает опасность, саппорт ремонтирует
- Успех зависит от успешного выполнения всех критических ролей

### Роли в групповых проверках

**Хакер (Netrunner):**
- Проверки взлома сетей, устройств
- DC обычно выше, но критически важны для прогресса

**Скаут (Solo/Nomad):**
- Проверки Perception, Stealth, Parkour
- Обнаружение опасностей, альтернативные маршруты

**Саппорт (Techie/Medtech):**
- Проверки Repair, Crafting, медицина
- Поддержка группы, восстановление ресурсов

**Лидер (Fixer/Corpo/Politician):**
- Проверки социальных навыков
- Координация группы, переговоры

**Штурм (Solo):**
- Проверки боевых навыков
- Обеспечение безопасности, прикрытие

### Бонусы от групповой работы

- **Синергия:** определенные комбинации классов дают дополнительные бонусы
- **Менторство:** более опытные игроки могут обучать новичков (временные бонусы)
- **Командные способности:** активные способности от VALORANT-стиля могут давать временные групповые бонусы

## Повторные попытки и ограничения

### Система повторных попыток

**Базовые правила:**
- Первая попытка: полный бонус
- Вторая попытка: -2 к броску
- Третья и последующие: -4 к броску (накопительный штраф)

**Сброс штрафов:**
- Изменение условий (например, использование другого инструмента)
- Помощь другого игрока (новый активный исполнитель)
- Использование способности/импланта
- Прохождение времени (зависит от контекста)

### Ограничения повторных попыток

**Критические проверки:**
- Некоторые проверки можно сделать только один раз
- Например: выбор диалога, ключевой момент сюжета

**Ресурсные ограничения:**
- Каждая попытка расходует ресурсы (энергия, расходники, внимание NPC)
- После исчерпания ресурсов повторная попытка невозможна

**Временные ограничения:**
- Некоторые проверки имеют таймер
- Повторная попытка может быть невозможна из-за времени

## Балансировка и источники расхождений
- Стартовые значения заданы «как ориентир». В баланс-проходе будут скорректированы веса имплантов, классовых бонусов, зон.
- DC могут корректироваться динамически в зависимости от:
  - Уровня игрока
  - Сложности зоны
  - Качества оборудования
  - Группового состава

## Связанные документы
- `combat-dnd-integration-shooter.md` — интеграция с шутер-боем
- `04-narrative/quest-dnd-checks.md` — проверки в квестах и диалогах
- `combat-dnd-mechanics-integration.md` — применение в механиках
- `02-gameplay/progression/classes-overview.md` — система классов
- `02-gameplay/progression/classes-general-skills.md` — общие навыки

## История изменений
- v0.1.0 (2025-11-05) — Создано ядро системы проверок
- v0.2.0 (2025-11-05) — Добавлены классовые модификаторы, таблица соответствий, групповые проверки, система повторных попыток

