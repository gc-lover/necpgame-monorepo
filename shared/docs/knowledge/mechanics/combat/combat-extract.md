# Боевая система - Экстрактшутер механики

**api-readiness:** ready  
**api-readiness-check-date:** 2025-11-09 03:18
**api-readiness-notes:** Перепроверено 2025-11-09 03:18: типы лута, рисковые уровни, страховка/восстановление и эвакуационные события подтверждены для формирования пакета API задач (v1.3.0).

**target-domain:** gameplay-combat  
**target-microservice:** gameplay-service (8083)  
**target-frontend-module:** modules/combat/extraction

**Статус:** approved - готов к созданию API задач  
**Приоритет:** Высокий  
**Дата создания:** 2025-11-03

---

- **Status:** approved
- **Last Updated:** 2025-11-09 02:47
---



## Концепция экстрактшутера

### Важность экстрактшутера

Экстрактшутер механики в NECPGAME создают высокие ставки и напряжение. Они интегрируются с экономической системой, социальными механиками и боевой системой.

**Вдохновение:** TARKOV, Hunt: Showdown, The Cycle: Frontier

**Уже определено из vision.md:**
- Выход в специальные зоны для добычи ресурсов
- Диверсии на чужие территории
- Фракционные события
- Клановые войны

---

## Определенные решения

### Количество игроков в экстракт-зонах

**Решение:** И соло, и небольшие команды, и крупные рейды
- Соло-проход для одиночных игроков
- Небольшие команды (2-4 игрока) для кооперативного прохождения
- Крупные рейды (10+ игроков) для сложного контента
- Гибкость в выборе формата прохождения

---

## Основные вопросы для проработки

### 1. Где проявляется экстрактшутер?

**Варианты:**

**Вариант А: Специальные экстракт-зоны (отдельные локации)**
- Постоянные локации для экстракций
- Только там работает экстракт-механика
- *Пример:* TARKOV - карты для рейдов
- *Плюсы:* Контролируемая механика
- *Минусы:* Ограниченный контент

**Вариант Б: Любые зоны могут стать экстракт-зонами временно**
- Динамическая система экстракт-зон
- Зоны меняются со временем
- *Пример:* The Cycle: Frontier - временные зоны
- *Плюсы:* Гибкость и разнообразие
- *Минусы:* Может быть непредсказуемо

**Вариант В: Специальные события делают зоны экстракт-зонами**
- Глобальные события создают экстракт-зоны
- Фракционные события
- Клановые войны
- *Плюсы:* Связь с миром и событиями
- *Минусы:* Зависимость от событий

**Вариант Г: Комбинация всех вариантов**
- Постоянные экстракт-зоны
- Временные экстракт-зоны
- Событийные экстракт-зоны
- *Плюсы:* Максимальное разнообразие
- *Минусы:* Сложнее балансировать

**Статус:** Требует решения

**Дополнительные вопросы:**
1. Сколько одновременно может быть активных экстракт-зон?
2. Могут ли игроки создавать свои экстракт-зоны?
3. Как часто появляются/меняются экстракт-зоны?

---

### 2. Риск потери при смерти

**✅ Решение:** Вариант Г (зависит от зоны/режима - разные зоны = разный риск)
- **Разные зоны = разный риск:**
  - **Высокий риск зоны:** Полная потеря всего при смерти (TARKOV стиль) - максимальный хардкор
  - **Средний риск зоны:** Частичная потеря (теряется часть экипировки/лута) - умеренный риск
  - **Низкий риск зона:** Минимальная потеря (только собранный лут, экипировка сохраняется) - минимальный риск
- **Режимы влияют на риск:**
  - **Нормальный режим:** Стандартный риск для зоны
  - **Хардкор режим:** Увеличенный риск (например, средний → высокий)
  - **Безопасный режим:** Минимальный риск (только для некоторых зон)
- **Результат:** Гибкая система рисков в зависимости от зоны и режима игры

**Статус:** Решено

**Дополнительные вопросы:**
1. Должна ли быть система страховки/восстановления лута?
2. Могут ли другие игроки забрать твой лут после смерти?
3. Есть ли безопасные места для хранения лута?

---

### 3. Экстракция (выход из зоны)

**✅ Решение:** Вариант Г (комбинация всех вариантов) - детальная проработка завершена

#### 3.1 Фиксированные точки экстракции

**✅ Решение:** Вариант Г (комбинация: базовые + специальные + фракционные)
- **Базовые точки:** Всегда доступны, в стандартных местах на карте
- **Специальные точки:** Требуют выполнения условий или ключей доступа
- **Фракционные точки:** Доступны только для членов определенных фракций
- **Расположение:** На краях карты или в стратегически важных местах
- **Доступность:** Могут быть заняты другими игроками (очередь или одновременное использование)
- **Требования:** Минимальные (базовые точки) или специальные (ключи, доступ)

#### 3.2 Динамические точки экстракции

**✅ Решение:** Вариант Г (комбинация: временные интервалы + события + действия игроков)
- **Временные интервалы:** Точки меняются каждые N минут
- **События:** Глобальные/фракционные события создают временные точки
- **Действия игроков:** Взлом систем, хакерство может открывать новые точки
- **Расположение:** Случайные или определенные места на карте
- **Частота изменений:** Зависит от зоны и режима

#### 3.3 Создаваемые точки экстракции

**✅ Решение:** Вариант Г (комбинация: все типы + разные требования)
- **Типы:** Личные, групповые, публичные точки
- **Требования:** Навыки, ресурсы, время установки
- **Время существования:** Временные (3-10 минут) или постоянные (до конца рейда)
- **Доступ:** Только создатель (личные), группа (групповые), все (публичные)
- **Важно:** В киберпространстве создаваемые точки = виртуальные порталы (только для Netrunner)

#### 3.4 Взаимодействие между типами точек

**✅ Решение:** Вариант Г (комбинация: приоритет + конфликты + блокировка)
- **Приоритет:** Созданные > динамические > фиксированные (для личных точек)
- **Конфликты:** Несколько точек в одном месте = выбор одной
- **Блокировка:** Игроки могут временно блокировать точки
- **Разрушение:** Игроки могут разрушать создаваемые точки

#### 3.5 Альтернативные способы экстракции

**✅ Решение:** Вариант Г (комбинация: хакерство + транспорт + другие)
- **Хакерство сетей:** Взлом транспортных систем для создания точки
- **Транспорт:** Использование транспорта для экстракции
- **Другие способы:** Специальные предметы, импланты, способности

#### 3.6 Время ожидания и помехи

**✅ Решение:** Вариант Г (комбинация: время ожидания + помехи + визуальное представление)
- **Время ожидания:** 5-15 секунд (зависит от типа точки и зоны)
- **Помехи:** Другие игроки могут прервать процесс экстракции
- **Визуальное представление:** Индикаторы прогресса, предупреждения о помехах
- **Защита:** Игроки могут защищать точки экстракции

**Статус:** Решено, детальная проработка завершена

**Дополнительные вопросы:**
1. Сколько времени нужно ждать на точке экстракции?
2. Могут ли другие игроки помешать экстракции?
3. Есть ли альтернативные способы экстракции? (например, через хакерство)

---

### 4. Что можно потерять/добыть в экстракт-зонах?

**✅ Решение:** Все типы лута + киберпанк специфика + воровство + лутингшутер

**Типы лута:**
- **Оружие:** пистолет, ПП, штурмовая, дробовик, снайперка, тяжёлое
- **Экипировка:** торс, голова, руки, ноги
- **Ресурсы:** металл, электроника, редкоземельные элементы, химикаты (для крафта/торговли)
- **Информация:** карты доступа (одноразовые/многоразовые, уровни допуска), базы данных, логи систем, чертежи (одноразовые/многоразовые)
- **Импланты:** кибервар, чипы, модификации (боевые/тактические/защитные/двигательные/OS)
- **Кибердеки:** quickhacks, ICE, червеи
- **Моды:** модификации ствола, прицелы, пластины, охлаждение

**Киберпанк специфика:**
- **Карты доступа:** одноразовые/многоразовые, уровни допуска (корп/военные/банковские)
- **Вирусные программы:** quickhacks, ICE, червеи (для взлома систем/оборудования)
- **Чипы данных:** рецепты крафта, чертежи имплантов, данные корпораций (для квестов/торговли)
- **Чертежи:** схемы оружия/имплантов/модов (разовые/многоразовые)
- **Доказательства:** фото/видео/логи (для шантажа, квестов, репутации)

**Дополнительные пути добычи:**
- **Воровство:** карманные кражи, взлом сейфов/контейнеров, похищение грузов (редкий лут: наличные, мелкие предметы, контрабанда)
- **Лутингшутер:** быстрое взятие лута с убитых врагов/игроков в бою (риск vs награда, ограниченное время)

**Интеграция:** `02-gameplay/economy/equipment-matrix.md`

**Статус:** Решено

---

### 5. Дополнительные механики экстрактшутера

#### 5.1 Время в зоне — ✅ Решение

**✅ Решение:** Вариант Г - Полная система времени (переменный лимит + динамические изменения + штрафы)

**Детализация:**
- **Базовый лимит:** Зависит от типа зоны
  - Легкие зоны (low risk): 45-60 минут
  - Средние зоны (medium risk): 30-45 минут
  - Сложные зоны (high risk): 15-30 минут
  - Экстремальные зоны (extreme risk): 10-20 минут

- **Динамические изменения:**
  - События могут изменять лимит (глобальные/фракционные события → ±10-15 минут)
  - Действия игроков влияют на время (взлом систем → +5 минут, массовые убийства → -5 минут)
  - Фракционный контроль влияет на лимит (контроль зоны своей фракцией → +10 минут для членов)

- **Штрафы за превышение:**
  - Превышение лимита 0-5 минут: увеличенный риск (больше врагов на 25%, меньше шанс на редкий лут на 10%)
  - Превышение лимита 5-10 минут: высокий риск (больше врагов на 50%, меньше шанс на редкий лут на 25%)
  - Превышение лимита >10 минут: критический риск (массовые волны врагов, форсированная экстракция через 2 минуты или смерть)

- **Визуальные индикаторы:**
  - Таймер с цветовой индикацией (зеленый → желтый → красный)
  - Предупреждения при 75%, 50%, 25%, 10% оставшегося времени
  - Критические предупреждения при превышении лимита

- **Тактическая глубина:**
  - Выбор между рискованным длительным пребыванием и быстрой экстракцией
  - Стратегия: дольше = больше лута, но выше риск
  - Интеграция с влиянием времени на редкость лута (дольше = выше шанс редкого лута, но больше риск)

**Статус:** ✅ Решено

#### 5.2 Сложность зон — ✅ Решение (обновлено)

**✅ Решение:** Полная динамическая система сложности (время + действия + события + фракции)

**Базовое влияние сложности на редкость лута:**
- Базовое влияние сложности (сложнее = реже лут) — соответствует equipment-matrix (rarityWeightsByZone)
- Примеры:
  - Легкая зона (low risk): common/uncommon
  - Средняя зона (medium risk): rare/epic
  - Сложная зона (high risk): legendary/artifact

**Динамическая сложность зон:**

**Время в зоне:**
- Базовое увеличение сложности каждые 10 минут (+10% к сложности)
- Волны врагов каждые 15-20 минут (увеличение количества и силы врагов)
- События появляются через определенные интервалы (динамические угрозы)

**Действия игроков:**
- Убийства боссов → увеличение сложности на 20% (но +50% к шансу редкого лута)
- Взлом систем → временное увеличение сложности на 15% (но открывает новые зоны/лут)
- Массовые убийства (5+ убийств за 5 минут) → эскалация (больше врагов на 30%, но больше лута)
- Выполнение задач → временное увеличение сложности на 10% (но +30% к шансу редкого лута)

**События:**
- Глобальные события изменяют сложность зон (±20% к сложности)
- Фракционные события создают временные бонусы/штрафы сложности (±15%)
- Лиги влияют на базовую сложность зон (поздние стадии лиги → +25% к базовой сложности)

**Фракционный контроль:**
- Контроль зоны своей фракцией → снижение сложности на 15% для членов фракции, увеличение на 15% для врагов
- Клановые войны → временное увеличение сложности на 25% в зоне конфликта

**Влияние на редкость лута:**
- Больше сложность = выше шанс редкого лута (линейная зависимость: +10% сложности = +5% к шансу редкого лута)
- Влияние времени (дольше = выше сложность → реже лут, но выше риск)
- Влияние действий (убийства боссов, взломы → повышают шанс редкого лута)
- Временные модификаторы весов редкости (ивенты, фракционные события, лиги)
- Фракционный контроль → модификаторы весов редкости
- Лига/стадия → поздние стадии лиги повышают потолок редкости и усиливают сигнатуры брендов
- Интеграция с `equipment-matrix.md` (динамическая сложность влияет на веса редкости `rarityWeightsByZone`)

**Визуальные индикаторы:**
- Индикатор сложности зоны (1-5 звезд или проценты)
- Предупреждения об эскалации сложности (визуальные/звуковые сигналы)
- Индикатор влияния действий на сложность

**Редкость лута:**
- Базовые уровни редкости: common, uncommon, rare, epic, legendary, artifact
- Под-уровни: rare+, rare++, epic-, epic+
- Специальные типы:
  - **Уникальный:** единичные экземпляры (прототипы, экспериментальные технологии)
  - **Артефактный:** легендарные артефакты (корпоративные секреты, реликвии из прошлого)
  - **Событийный:** временные редкости (ивенты, лиги, фракционные эксклюзивы)
  - **Культовые (Iconic):** уникальные предметы из лора Cyberpunk 2077/настольной игры/аниме "Бегущие по краю" — большое разнообразие, связаны с персонажами/корпорациями/событиями лора

**Источники редкого лута:**
- Специальные зоны, боссы, события
- **Альтернативные пути:**
  - Хакерство: взлом корпоративных сетей, киберпространство
  - Торговля: чёрные рынки, аукционы, контракты
  - Крафт: создание из компонентов (рецепты, чертежи)
  - Квесты: цепочки заданий, фракционные контракты
  - Дипломатия: фракционная репутация, доступ к эксклюзивным источникам
  - Воровство: карманные кражи, взлом сейфов, похищение грузов
  - Лутингшутер: быстрое взятие лута в бою

**Интеграция:** `02-gameplay/economy/equipment-matrix.md`

**Статус:** Решено

---

## TODO для дальнейшей проработки

**TODO:** Детальная проработка экстрактшутера:
- ✅ Определить конкретные решения для всех вопросов - **Завершено (v1.2.0)**
- ✅ Детализировать систему потери лута при смерти - **Завершено (v1.1.0)**
- ✅ Проработать систему экстракции (время ожидания, альтернативные способы) - **Завершено (v1.1.0)**
- ✅ Детализировать типы лута и их редкость - **Завершено (v1.2.0)**
- ✅ Определить время в зоне (лимиты времени) - **Завершено (v1.3.0)**
- ✅ Детализировать динамическую сложность зон - **Завершено (v1.3.0)**
- ✅ Интегрировать время и сложность - **Завершено (v1.3.0)**
- [ ] Проработать систему страховки/восстановления - **Отложено на детальную проработку**
- [ ] Балансировка всех значений будет сделана позже в процессе разработки

---

## История изменений

- v1.0.0 (2025-11-03) - Создан первый брейншторм экстрактшутера
  - Определено количество игроков: Соло, команды, рейды
  - Определены основные вопросы для проработки
  - Структурированы варианты решений
- v1.1.0 (2025-11-03) - Решены вопросы риска потери и экстракции
  - ✅ Риск потери: Зависит от зоны/режима (разные зоны = разный риск)
  - ✅ Система экстракции: Комбинация всех вариантов (фиксированные + динамические + создаваемые игроками)
- v1.2.0 (2025-11-03) - Решены вопросы типов лута, редкости, источников и влияния сложности зоны
  - ✅ Типы лута: Все типы + киберпанк специфика (карты доступа, вирусные программы, чипы данных, чертежи, доказательства) + воровство + лутингшутер
  - ✅ Редкость лута: Базовые уровни (common, uncommon, rare, epic, legendary, artifact) + под-уровни + спец-редкости (уникальный, артефактный, событийный, культовые Iconic)
  - ✅ Источники редкого лута: Зоны/боссы/события + альтернативные пути (хакерство, торговля, крафт, квесты, дипломатия, воровство, лутингшутер)
  - ✅ Влияние сложности зоны: Веса по зонам + все факторы (время, действия игрока, события, фракционный контроль, лига/стадия)
  - Интеграция: `02-gameplay/economy/equipment-matrix.md`
- v1.3.0 (2025-11-03) - Детализированы время в зоне и динамическая сложность
  - ✅ Время в зоне: Полная система (переменный лимит + динамические изменения + штрафы)
  - ✅ Динамическая сложность: Полная динамическая система (время + действия + события + фракции)
  - ✅ Интеграция времени и сложности: Полная интеграция (взаимное влияние + тактические решения)
