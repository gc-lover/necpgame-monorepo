# –ë–∏—Ä–∂–∞ –∞–∫—Ü–∏–π - –í–ª–∏—è–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –Ω–∞ —Ü–µ–Ω—ã

**–°—Ç–∞—Ç—É—Å:** approved  
**–í–µ—Ä—Å–∏—è:** 1.1.0  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-06  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-07 16:19  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≤—ã—Å–æ–∫–∏–π (Post-MVP)

**api-readiness:** ready  
**api-readiness-check-date:** 2025-11-09 11:21
**api-readiness-notes:** –ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 2025-11-09 11:21: —Ñ–æ—Ä–º—É–ª—ã, –ø–∞–π–ø–ª–∞–π–Ω –∏ API —Å–æ–±—ã—Ç–∏–π –æ—Å—Ç–∞—é—Ç—Å—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–º–∏, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–ª–∏—è–Ω–∏—è –ø–æ–∫—Ä—ã—Ç.

---

## –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–í–ª–∏—è–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π –Ω–∞ —Ü–µ–Ω—ã –∞–∫—Ü–∏–π –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–π.

**–ú–∏–∫—Ä–æ—Ñ–∏—á–∞:** Events ‚Üí Stock Prices (–∫–≤–µ—Å—Ç—ã, –≤–æ–π–Ω—ã, —Å–∫–∞–Ω–¥–∞–ª—ã)

---

## üéÆ –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π

### 1. Quest Events (–ö–≤–µ—Å—Ç–æ–≤—ã–µ)

**–ú–µ—Ö–∞–Ω–∏–∫–∞:** –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–æ–≤ –≤–ª–∏—è–µ—Ç –Ω–∞ –∞–∫—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä—ã:**
```
Quest: "Corpo Wars: Choose Arasaka"
Outcome: Arasaka wins territory
Impact: ARSK +15%, MLTC -10%

Quest: "Sabotage Militech Factory"
Outcome: Factory destroyed
Impact: MLTC -20%, KANG +8% (competitor benefits)

Quest: "Netrunner: Expose Arasaka Scandal"
Outcome: Scandal revealed
Impact: ARSK -25%, NTWT +5% (NetWatch investigates)
```

### 2. Faction Wars (–§—Ä–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –≤–æ–π–Ω—ã)

**–ú–µ—Ö–∞–Ω–∏–∫–∞:** –ò—Å—Ö–æ–¥ –≤–æ–π–Ω –≤–ª–∏—è–µ—Ç –Ω–∞ —Ü–µ–Ω—ã

**–ü—Ä–∏–º–µ—Ä:**
```
Corporate War: Arasaka vs Militech

Stage 1 (Start):
ARSK: -5% (uncertainty)
MLTC: -5% (uncertainty)

Stage 2 (Arasaka winning):
ARSK: +10%
MLTC: -15%

Stage 3 (Arasaka victory):
ARSK: +30% (total from start)
MLTC: -35% (major loss)

Related stocks:
KANG: +5% (sells weapons to both sides)
TRMA: +8% (medical services demand up)
```

### 3. Territory Control (–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å)

**–ú–µ—Ö–∞–Ω–∏–∫–∞:** –ö–æ–Ω—Ç—Ä–æ–ª—å —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π –≤–ª–∏—è–µ—Ç –Ω–∞ –∞–∫—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```
Watson district captured by Arasaka:
‚Üí ARSK: +5% (new territory)
‚Üí Revenue increase expected

Pacifica becomes autonomous:
‚Üí All corpo stocks: -2% (lost control)
‚Üí Nomad-aligned stocks: +5%
```

### 4. Corporate Scandals (–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–∫–∞–Ω–¥–∞–ª—ã)

**–ú–µ—Ö–∞–Ω–∏–∫–∞:** –°–∫–∞–Ω–¥–∞–ª—ã –æ–±—Ä—É—à–∏–≤–∞—é—Ç —Ü–µ–Ω—ã

**–ü—Ä–∏–º–µ—Ä—ã:**
```
Scandal: "Arasaka Data Breach" (quest outcome)
Severity: Major
Duration: 2 weeks

Impact:
Day 1: ARSK -15% (panic selling)
Week 1: ARSK -25% (investigation)
Week 2: ARSK -30% (lawsuits)
Recovery: +10% (crisis management)
Final: -20% net (lasting damage)

Opportunity:
Buy at -30% (bottom)
Sell when recovers to -10%
Profit: 20% swing
```

### 5. Technological Breakthroughs (–ü—Ä–æ—Ä—ã–≤—ã)

**–ú–µ—Ö–∞–Ω–∏–∫–∞:** –ù–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤–ª–∏—è—é—Ç –Ω–∞ —Å–µ–∫—Ç–æ—Ä

**–ü—Ä–∏–º–µ—Ä—ã:**
```
Event: "Zetatech announces new AI chip"
Impact:
ZETA: +40% (innovator)
IEC: -15% (competitor loses)
EUBM: -10% (competitor loses)

Event: "Raven Microcybernetics: new implant"
Impact:
RAVN: +25% (innovation)
ARSK: +5% (uses implants in products)
```

### 6. Economic Events (–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ)

**–ú–µ—Ö–∞–Ω–∏–∫–∞:** –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è

**–ü—Ä–∏–º–µ—Ä—ã:**
```
Event: "Economic Boom in Night City"
Impact: All stocks +5-10%

Event: "Recession"
Impact: All stocks -10-20%
Defensive stocks (TRMA, BIOT): -5% (less affected)
Cyclical stocks (PTRC, MLTC): -25% (more affected)

Event: "Energy Crisis"
Impact:
PTRC: +30% (oil demand up)
SVOL: +35%
TRMA: -5% (fuel costs up)
```

---

## üìâ –§–æ—Ä–º—É–ª—ã –≤–ª–∏—è–Ω–∏—è

### –ë–∞–∑–æ–≤–∞—è formula

```
new_price = current_price √ó (1 + event_impact_percent + modifiers)

event_impact_percent: –æ—Ç -50% –¥–æ +100% (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ–±—ã—Ç–∏—è)

modifiers:
- sector_alignment: –µ—Å–ª–∏ —Å–æ–±—ã—Ç–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ —Å–µ–∫—Ç–æ—Ä—É
- size_modifier: –∫—Ä—É–ø–Ω—ã–µ –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏ –º–µ–Ω—å—à–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ã
- player_actions: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤, –∑–∞–≤–µ—Ä—à–∏–≤—à–∏—Ö –∫–≤–µ—Å—Ç
```

### –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á–µ—Ç–∞

**Quest impact:**
```
Quest: "Destroy Militech Convoy"
Base impact: -10% –¥–ª—è MLTC

Modifiers:
- Only 10 players completed: √ó0.5 = -5%
- Militech controls 3 territories: √ó0.8 = -4%

Final: MLTC price -4%

If 1,000 players completed:
- Mass impact: √ó2.0 = -20%
```

**Faction War impact:**
```
Corporate War: Arasaka WINS

Arasaka:
Base impact: +30%
Won 5 territories: +10%
Killed enemy CEO: +15%
Total: +55%

Militech:
Base impact: -35%
Lost 5 territories: -10%
CEO killed: -20%
Total: -65% (massive crash!)
```

---

## ‚è±Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–ª–∏—è–Ω–∏—è

### Immediate (–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ)

**Trigger:** Quest completion, battle win  
**Duration:** Instant price change  
**Recovery:** May recover in days/weeks

**–ü—Ä–∏–º–µ—Ä:**
```
Quest completed: "Expose Arasaka"
‚Üí ARSK drops 15% in 1 minute
‚Üí Recovers 5% next day
‚Üí Stabilizes at -10% after 1 week
```

### Short-term (–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–µ)

**Trigger:** Minor events  
**Duration:** 1-7 days  
**Recovery:** Full recovery expected

**–ü—Ä–∏–º–µ—Ä:**
```
Event: "Petrochem pipeline leak"
Impact: PTRC -8%
Recovery: 7 days back to normal
```

### Long-term (–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ)

**Trigger:** Major events (wars, CEO death)  
**Duration:** Weeks to months  
**Recovery:** May never fully recover

**–ü—Ä–∏–º–µ—Ä:**
```
Event: "Corporate War - Militech LOSES"
Impact: MLTC -50%
Duration: Permanent (lasting damage)
Recovery: Slow rebuild over years
```

### Permanent (–ü–µ—Ä–º–∞–Ω–µ–Ω—Ç–Ω–æ–µ)

**Trigger:** Delisting, bankruptcy  
**Duration:** Forever  
**Recovery:** None

**–ü—Ä–∏–º–µ—Ä:**
```
Event: "Arasaka Bankrupt" (extreme quest outcome)
Impact: ARSK delisted, price ‚Üí 0
Recovery: None (corporation destroyed)
Players lose all investment
```

---

## üéØ Player Opportunities

### Buy the Dip

**Strategy:** –ü–æ–∫—É–ø–∞—Ç—å –ø–æ—Å–ª–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

**–ü—Ä–∏–º–µ—Ä:**
```
Scandal: Arasaka data breach
ARSK: 1,000 ‚Üí 700 (-30%)

Player analysis:
"Scandal is temporary, Arasaka will recover"

Action: Buy 100 ARSK @ 700 = 70,000 eddies

2 weeks later:
ARSK recovers to 900 (+29% from bottom)
Portfolio value: 90,000 eddies
Profit: 20,000 eddies (+29%)
```

### Sell Before Disaster

**Strategy:** –ü—Ä–æ–¥–∞–≤–∞—Ç—å –ø–µ—Ä–µ–¥ –ø–ª–æ—Ö–∏–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏

**–ü—Ä–∏–º–µ—Ä:**
```
Player doing quest: "Sabotage Militech"
Knows: Quest will hurt Militech stock

Action BEFORE quest completion:
Sell all MLTC shares @ 850

Quest completed:
MLTC drops to 680 (-20%)

Player avoided: 20% loss
Can buy back lower if wants
```

### Event Speculation

**Strategy:** –ü—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∏ –ø–æ–∫—É–ø–∞—Ç—å –∑–∞—Ä–∞–Ω–µ–µ

**–ü—Ä–∏–º–µ—Ä:**
```
Player notices:
- Corporate War starting (rumors)
- Arasaka likely to win (strong military)

Action: Buy ARSK @ 1,000 (before war starts)

War outcome: Arasaka wins
ARSK: +30% ‚Üí 1,300

Profit: 300 per share (+30%)
Risk: If wrong, may lose
```

---

## üìä Event Impact Table

| Event Type | Example | Impact Range | Duration |
|------------|---------|--------------|----------|
| **Quest (small)** | Minor mission | ¬±5% | 1-3 days |
| **Quest (major)** | Main questline | ¬±15% | 1-2 weeks |
| **Faction War** | Corporate war | ¬±30% | Weeks-Months |
| **Scandal** | Data breach | -25% to -40% | 2-4 weeks |
| **Tech Breakthrough** | New invention | +40% to +100% | Permanent |
| **CEO Death** | Assassination | -15% to -30% | 1-2 months |
| **Territory Gain** | Capture district | +5% to +10% | Permanent |
| **Economic Crisis** | Recession | -20% (all) | Months |
| **Delisting** | Bankruptcy | -100% | Permanent |

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```sql
CREATE TABLE stock_event_impacts (
    id UUID PRIMARY KEY,
    source_event_id UUID NOT NULL, -- links to economy events / quests
    corporation_id VARCHAR(100) NOT NULL,
    base_impact_percent DECIMAL(6,2) NOT NULL,
    duration_hours INTEGER NOT NULL,
    decay_curve VARCHAR(20) DEFAULT 'EXPONENTIAL',
    modifiers JSONB,
    applied_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE stock_event_modifiers (
    impact_id UUID REFERENCES stock_event_impacts(id) ON DELETE CASCADE,
    modifier_type VARCHAR(32) NOT NULL, -- SECTOR, PLAYER_COUNT, TERRITORY
    value JSONB NOT NULL,
    PRIMARY KEY (impact_id, modifier_type)
);
```

---

## üîÅ –ü–∞–π–ø–ª–∞–π–Ω –≤–ª–∏—è–Ω–∏—è

1. **Trigger:** —Å–æ–±—ã—Ç–∏–µ –∏–∑ `economy-events` –∏–ª–∏ –∫–≤–µ—Å—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `economy.events.*`.
2. **Mapping:** `event-impact-service` –∏—â–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏ –∏ –±–∞–∑–æ–≤—ã–π —ç—Ñ—Ñ–µ–∫—Ç.
3. **Modifiers:** —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Å–µ–∫—Ç–æ—Ä, —É—á–∞—Å—Ç–∏–µ –∏–≥—Ä–æ–∫–æ–≤, —Ä–µ–ø—É—Ç–∞—Ü–∏—è.
4. **Apply:** `pricing-engine` –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ü–µ–Ω—É, –ø–∏—à–µ—Ç –∑–∞–ø–∏—Å—å –≤ `stock_event_impacts`.
5. **Decay:** Job —Å–Ω–∏–∂–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º (–ª–∏–Ω–µ–π–Ω–æ/—ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ).
6. **Analytics:** —Å–æ–±—ã—Ç–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∞—Ö (–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏).

---

## üåê API

| Endpoint | –ú–µ—Ç–æ–¥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- | --- |
| `/stocks/events/impacts` | `GET` | –¢–µ–∫—É—â–∏–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ —Ä—ã–Ω–æ–∫ |
| `/stocks/events/history` | `GET` | –ò—Å—Ç–æ—Ä–∏—è —Å–æ–±—ã—Ç–∏–π –∏ —Ü–µ–Ω–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ |
| `/stocks/admin/events/mappings` | `POST/PATCH` | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–≤—è–∑–µ–π —Å–æ–±—ã—Ç–∏–µ ‚Üí –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏—è |
| `/stocks/admin/events/simulate` | `POST` | –ü—Ä–æ–≥–æ–Ω —Å–∏–º—É–ª—è—Ü–∏–∏ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è (what-if) |

**Event bus (`economy.stock_events.*`):** `impact_created`, `impact_updated`, `impact_expired`, `impact_reversed`.

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –ú–µ—Ç—Ä–∏–∫–∏: `ImpactLatency`, `MaxDrawdown`, `EventAppliedCount`.
- –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –∑–∞–¥–µ—Ä–∂–∫–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ > 30 —Å–µ–∫ –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ –æ—Ç –æ–∂–∏–¥–∞–µ–º–æ–≥–æ > ¬±10%.
- Audit trail: –≤—Å–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è.

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- `quest-service`: –ø–µ—Ä–µ–¥–∞—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–≤–µ—Å—Ç–æ–≤. 
- `economy-events`: –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –º–∞–∫—Ä–æ —Å–æ–±—ã—Ç–∏—è.
- `analytics-service`: –∞–Ω–Ω–æ—Ç–∏—Ä—É–µ—Ç –≥—Ä–∞—Ñ–∏–∫–∏ –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç—ã.
- `notification-service`: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤-–∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤.

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `stock-exchange-overview.md` - –û–±–∑–æ—Ä
- `stock-corporations.md` - –ö–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏
- `stock-trading.md` - –¢–æ—Ä–≥–æ–≤–ª—è
- `stock-integration.md` - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–≤–µ—Å—Ç–∞–º–∏

---

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

- v1.1.0 (2025-11-07 16:19) - –î–æ–±–∞–≤–ª–µ–Ω—ã –ë–î, –ø–∞–π–ø–ª–∞–π–Ω –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è, REST API, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- v1.0.0 (2025-11-06 21:45) - –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –æ –≤–ª–∏—è–Ω–∏–∏ —Å–æ–±—ã—Ç–∏–π, –±–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã –∏ —Ñ–æ—Ä–º—É–ª—ã

