metadata:
  id: stock-indices
  title: Биржа акций — Фондовые индексы
  document_type: mechanics
  category: economy
  status: approved
  version: '1.1.0'
  last_updated: 2025-11-07T16:19:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-09
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - stock-exchange
    - indices
    - analytics
  topics:
    - market_metrics
    - economy_reports
  related_systems:
    - economy-service
    - analytics-service
    - economy-events
    - guild-system
  related_documents:
    - id: stock-exchange-overview
      relation: references
    - id: stock-analytics
      relation: complements
  source: shared/docs/knowledge/mechanics/economy/stock-exchange/stock-indices.md
  visibility: internal
  audience:
    - concept
    - economy
    - analytics
  risk_level: medium
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: 2025-11-09
      status: approved
  next_actions: []
summary:
  problem: Требуется стандартизировать индексы для анализа рынка и фич вроде индексных фондов.
  goal: Описать состав, расчёт, хранение и API фондовых индексов NECPGAME.
  essence: Корпоративные, региональные и секторные индексы рассчитываются по весам, обновляются ребалансом и доступны через REST и событийную шину.
  key_points:
    - CORP100, NC50, ASIA25, EURO30 и секторные индексы формируют обзор рынка.
    - Таблицы истории и составов поддерживают аналитику и индексные фонды.
    - API и event bus публикуют значения и события ребаланса.
content:
  sections:
    - id: introduction
      title: Введение
      body: |
        Индексы фиксируют сводную динамику рынка для глобальных и региональных корпораций, а также отраслевых сегментов. Они применяются в аналитике, UI и инвестиционных продуктах.
      mechanics_links:
        - mechanics/economy/stock-exchange/stock-exchange-overview.yaml
      assets: []
    - id: index_catalog
      title: Каталог индексов
      body: |
        CORP100 агрегирует 100 крупнейших корпораций, NC50 отражает экономику Night City, ASIA25 и EURO30 покрывают региональные рынки, а секторные индексы (DEFENSE, TECH, ENERGY, MEDICAL, CYBER) показывают отраслевые тренды. Значения рассчитываются по взвешенной капитализации и публикуются в реальном времени.
      mechanics_links:
        - mechanics/economy/stock-exchange/stock-corporations-compact.yaml
      assets: []
    - id: usage
      title: Использование индексов
      body: |
        Индексы показывают рыночное настроение (bull/bear), служат основой для индексных фондов и сравнения инвестиционных стратегий. Игроки могут отслеживать доходность, хеджировать риск и анализировать региональные тренды.
      mechanics_links:
        - mechanics/economy/stock-exchange/stock-dividends.yaml
      assets: []
    - id: data_structures
      title: Структуры данных и ребаланс
      body: |
        Таблицы `stock_indices`, `stock_index_constituents` и `stock_index_history` фиксируют метаинформацию, состав и исторические значения. Ребаланс выполняется ежеквартально или при IPO/delisting, ограничивает веса и корректирует divisor для непрерывности.
      mechanics_links:
        - mechanics/economy/stock-exchange/stock-protection.yaml
      assets: []
    - id: api
      title: API и события
      body: |
        REST эндпоинты `/stocks/indices`, `/indices/{code}`, `/indices/{code}/history`, `/indices/{code}/constituents` и админские методы обеспечивают доступ к данным и управлению составом. Шина `economy.indices.*` публикует события ребаланса и изменения состава.
      mechanics_links:
        - mechanics/economy/stock-exchange/stock-integration.yaml
      assets: []
    - id: integrations
      title: Интеграции
      body: |
        Analytics-service строит графики и сравнения, economy-events вносит массовые корректировки, economy-investments использует индексы для фондов, guild-system формирует отчёты. UI показывает динамику и рейтинг индексов.
      mechanics_links:
        - mechanics/economy/stock-exchange/stock-analytics.yaml
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/vision/review.yaml#CON-2025-229
  blockers: []
history:
  - version: '1.1.0'
    date: 2025-11-07
    author: concept_director
    changes: Добавлены структуры данных, расписание ребаланса, REST API и события.
  - version: '1.0.0'
    date: 2025-11-06
    author: concept_director
    changes: Описан первоначальный набор фондовых индексов.
validation:
  checksum: ''
  schema_version: '1.0'

