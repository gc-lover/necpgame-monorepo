metadata:
  id: stock-integration
  title: Биржа акций — интеграция с игровыми системами
  document_type: mechanics
  category: economy
  status: approved
  version: '1.1.0'
  last_updated: 2025-11-07T16:19:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-09T11:21:00Z
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - stock-exchange
    - gameplay-integration
    - economy-events
  topics:
    - financial-markets
    - narrative-integration
  related_systems:
    - quest-service
    - faction-service
    - economy-events
    - news-feed
  related_documents:
    - id: stock-exchange-overview
      relation: references
    - id: quest-system
      relation: complements
    - id: stock-events
      relation: references
  source: shared/docs/knowledge/mechanics/economy/stock-exchange/stock-integration.md
  visibility: internal
  audience:
    - concept
    - economy
    - narrative
  risk_level: high
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: 2025-11-09T11:21:00Z
      status: approved
  next_actions: []
summary:
  problem: Необходима формализация влияния квестов, фракций и мировых событий на цены акций.
  goal: Описать конвейер взаимосвязей между игровыми событиями и биржей, включая API, шину событий и мэппинги.
  essence: Документ связывает результаты миссий, фракционные войны и мировые кризисы с изменением котировок и аналитикой рынка.
  key_points:
    - Квестовые исходы напрямую меняют цены акций и формируют инвестиционные сценарии.
    - Фракционные войны и события создают структурированные сигналы для фондового рынка.
    - REST и Kafka интерфейсы обеспечивают регистрацию источников и отслеживание эффекта.
content:
  sections:
    - id: quest-integration
      title: 'Квестовая интеграция'
      body: |
        Результаты сюжетных и побочных миссий корректируют цены акций, позволяя игрокам зарабатывать на корпоративных событиях и обучающим квестам по инвестициям.
      mechanics_links:
        - mechanics/narrative/quest-system.yaml
      assets: []
    - id: faction-impact
      title: 'Фракционное влияние'
      body: |
        Фракционные войны, репутация и эксклюзивные акции учитываются при расчёте курсов. Победы и поражения фракций меняют стоимость акций и привилегии инвесторов.
      mechanics_links:
        - mechanics/canon/factions-overview.yaml
      assets: []
    - id: world-events
      title: 'Мировые события'
      body: |
        Глобальные кризисы и технологические прорывы транслируются в индексы и тикеры через стандартизированные payload economy-events.
      mechanics_links:
        - mechanics/economy/stock-exchange/stock-events.yaml
      assets: []
    - id: event-bus
      title: 'Событийная шина'
      body: |
        Топик `economy.integration.events` распространяет данные о событиях между сервисами. Подписчики включают stock-events, currency-exchange, logistics и guild-system.
      mechanics_links:
        - mechanics/economy/stock-exchange/stock-protection.yaml
      assets: []
    - id: mapping
      title: 'Мэппинг событий'
      body: |
        Таблица `event_stock_mapping` хранит соответствие типов событий и корпораций, что позволяет дизайнерам быстро настраивать влияние.
      mechanics_links:
        - mechanics/economy/stock-exchange/stock-analytics.yaml
      assets: []
    - id: api
      title: 'API интеграций'
      body: |
        Эндпоинты регистрации источников событий, предпросмотра воздействия и журналирования взаимосвязей дают контроль над влиянием на биржу.
      mechanics_links:
        - mechanics/implementation/infrastructure/api-gateway-architecture.yaml
      assets: []
    - id: related-systems
      title: 'Связанные системы'
      body: |
        Quest-service, faction-service, economy-events и news-feed синхронизируют данные для единого информационного пространства.
      mechanics_links:
        - mechanics/economy/economy-events.yaml
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml#CON-2025-228
  blockers: []
history:
  - version: '1.1.0'
    date: 2025-11-07
    author: concept_director
    changes: Добавлены шина событий, REST API и расширенные мэппинги интеграции.
  - version: '1.0.0'
    date: 2025-11-06
    author: concept_director
    changes: Первичный документ связи биржи с квестами и фракциями.
validation:
  checksum: ''
  schema_version: '1.0'

