---
**api-readiness:** in-review  
**api-readiness-check-date:** 2025-11-05 17:09
**api-readiness-notes:** Спецификация shooter skill tests для квестов/диалогов: метрики, пороги, ветвления, UI.

**target-domain:** narrative  
**target-microservice:** narrative-service (port 8087)  
**target-frontend-module:** modules/narrative/quests
---
---

- **Status:** queued
- **Last Updated:** 2025-11-07 00:18
---



# Квесты и диалоги — Shooter skill tests

**Статус:** draft  
**Версия:** 0.1.0  
**Дата создания:** 2025-11-05  
**Приоритет:** высокий

## Цель
Определить, где и какие проверки применяются в квестах, как они влияют на ветвления и какие требования к UI.

## Категории проверок
- Социальные: `persuasion_threshold`, `deception_threshold`, `intimidation_threshold`, `influence_rating`
- Исследование: `perception_threshold`, `analysis_threshold`, `cartography_threshold`
- Тех/Хак: `tech_mastery`, `repair_efficiency`, `hacking_latency`
- Действия: `parkour_flow`, `stealth_rating`, `awareness_score`

## Схема проверки
- Проверка проходит, если `base_metric × модификаторы ≥ threshold`.
- Модификаторы: импланты, способности, окружение, временные эффекты (`modifier_sources`).
- Критические эффекты: `success_margin ≥ 0.10` → усиленный результат; `success_margin ≤ -0.10` → штраф.

## Диапазоны порогов для квестов (ориентиры)
- Социальные: 0.55 / 0.62 / 0.68 / 0.74 в зависимости от оппонента и контекста.
- Тех/Хак: 0.58 / 0.65 / 0.72 / 0.78 по уровню устройства/сети.
- Исследование: 0.54 / 0.60 / 0.66 с модификаторами окружения (±0.03).

## Ветвления квестов (узлы и исходы)
Каждая точка ветвления описывается структурой:
- Узел: id, описание, тип проверки, threshold, модификаторы
- Успех: последствия (новая ветка, награды, скрытая информация)
- Провал: последствия (альтернативный путь, штрафы, агро, тревога)
- Крит.успех: `success_margin ≥ 0.10` — сильный бонус/скрытая ветка
- Крит.провал: `success_margin ≤ -0.10` — усиливает риск/блокирует краткий путь

## UI-требования
- Показывать тип проверки и порог (или диапазон) с учётом сложности.
- Индикация активных модификаторов и их источников.
- История проверок/значений для коопа и аналитики.

## Врезки для основных квестов (пороговые значения)
- 1.1 «Первые шаги»:
  - Обучающие проверки: `perception ≥ 0.52`, `parkour ≥ 0.52`, `communication ≥ 0.52`
- 1.2 «Выбор пути»: 
  - Социальные проверки: `persuasion ≥ 0.60–0.66` в зависимости от фракции
- 1.3 «Развитие навыков»: 
  - Тех/Хак: `hacking ≥ 0.66–0.74`, `repair ≥ 0.62–0.68`
- 2.1 «Выбор стороны»:
  - Соц-проверки высокого уровня: 0.70–0.76, последствия на репутацию
- 4.2 «Взлом заслона»:
  - Слоистые проверки: `hacking ≥ 0.72 → 0.76 → 0.80` с нарастающим риском

## Связанные документы
- `02-gameplay/combat/combat-shooter-core.md`
- `04-narrative/quests/main-quests-outline.md`

## История изменений
- v0.1.0 (2025-11-05) — Добавлены категории проверок, узлы ветвления и требования к UI

