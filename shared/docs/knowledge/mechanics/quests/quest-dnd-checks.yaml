metadata:
  id: quest-dnd-checks
  title: Квесты и диалоги — Shooter Skill Tests
  document_type: mechanics
  category: quests
  status: draft
  version: '0.1.0'
  last_updated: 2025-11-07T00:18:00Z
  concept_approved: false
  concept_reviewed_at: ''
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - quests
    - narrative
    - skill-tests
  topics:
    - ветвления
    - проверки-навыков
  related_systems:
    - narrative-service
    - dialogue-system
  related_documents:
    - id: combat-shooter-core
      relation: references
    - id: main-quests-outline
      relation: references
  source: mechanics/quests/quest-dnd-checks.md
  visibility: internal
  audience:
    - concept
    - narrative
  risk_level: medium
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: Квесты и диалоги требуют единых правил проверки навыков, чтобы гарантировать предсказуемые ветвления и коммуникацию UI.
  goal: Определить категории проверок, формулу расчёта успеха и диапазоны порогов для ключевых этапов сюжета.
  essence: Структура shooter skill tests, использующая модификаторы, пороги и критические исходы для управления прогрессом квестов.
  key_points:
    - Категории охватывают социальные, исследовательские, техно-хакерские и физические проверки.
    - Формула успеха базируется на сравнении метрики игрока с порогом с учётом модификаторов и фиксирует критические исходы.
    - Диапазоны порогов определены для ключевых сюжетных актов и масштабируются по степени риска.
    - UI обязан отображать тип проверки, активные модификаторы и историю значений для кооперативного режима.
content:
  sections:
    - id: introduction
      title: Введение
      body: |
        Shooter skill tests обеспечивают ветвления квестов и диалогов, отражая подготовку персонажа в боевых и социальных ситуациях. Документ фиксирует минимальный набор правил для систем narrative-service и UI.
      mechanics_links:
        - mechanics/quests/quest-system.yaml
      assets: []
    - id: categories
      title: Категории проверок
      body: |
        Социальные проверки охватывают убеждение, обман, запугивание и влияние. Исследовательские тесты проверяют восприятие, анализ и навигацию. Техно-хакерские оценки измеряют мастерство техники, ремонт и задержку хакинга, а категории действий включают паркур, скрытность и внимание.
      mechanics_links:
        - mechanics/quests/quest-system.yaml
      assets: []
    - id: evaluation_model
      title: Модель расчёта
      body: |
        Проверка считается успешной, если произведение базовой метрики на сумму модификаторов достигает порога. Источниками модификаторов служат импланты, способности, окружение и временные эффекты. Критический успех фиксируется при запасе ≥ 0.10, критический провал — при дефиците ≤ -0.10.
      mechanics_links:
        - mechanics/combat/combat-shooter-core.yaml
      assets: []
    - id: thresholds
      title: Диапазоны порогов
      body: |
        Рекомендуемые значения: социальные проверки — 0.55–0.74, техно-хакерские — 0.58–0.78, исследовательские — 0.54–0.66 с поправками окружения. Эти ориентиры формируют баланс сложности и позволяют сценаристам планировать рост требований.
      mechanics_links:
        - mechanics/combat/combat-shooter-core.yaml
      assets: []
    - id: branching_structure
      title: Структура ветвлений
      body: |
        Каждый узел ветвления содержит идентификатор, описание, тип проверки, порог, модификаторы и определения исходов: успех, провал, критический успех и критический провал. Успех открывает новые ветки и награды, провал инициирует альтернативные пути или угрозы.
      mechanics_links:
        - content/quests/main/main-quests-outline.yaml
      assets: []
    - id: ui_requirements
      title: Требования к UI
      body: |
        Интерфейс должен отображать тип проверки, текущий порог, активные модификаторы и источники, а также сохранять историю результатов для кооперативных сессий и аналитики.
      mechanics_links:
        - implementation/ui/ui-kit-compact.yaml
      assets: []
    - id: storyline_inserts
      title: Пороговые значения сюжетных арок
      body: |
        Основные квесты используют прогрессию порогов: обучение — ~0.52, выбор фракции — 0.60–0.66, развитие навыков — 0.62–0.74, выбор стороны — до 0.76, сложные взломы — последовательность 0.72–0.80. Эти значения служат основой для настройки сценариев.
      mechanics_links:
        - content/quests/main/main-quests-outline.yaml
      assets: []
appendix:
  glossary:
    - term: Success Margin
      definition: Разница между результирующей метрикой и порогом проверки, используемая для определения критических исходов.
    - term: Modifier Source
      definition: Источник бонуса или штрафа к проверке, включая импланты, окружение и временные эффекты.
  references:
    - type: internal
      link: mechanics/combat/combat-shooter-core.yaml
    - type: internal
      link: content/quests/main/main-quests-outline.yaml
  decisions: []
implementation:
  needs_task: true
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml
  blockers: []
history:
  - version: '0.1.0'
    date: 2025-11-05
    author: concept_team
    changes: Зафиксированы категории проверок, формула расчёта и требования к UI для shooter skill tests.
validation:
  checksum: ''
  schema_version: '1.0'

