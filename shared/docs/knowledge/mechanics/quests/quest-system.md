# Система квестов NECPGAME

**Статус:** approved  
**Приоритет:** высокий

**api-readiness:** ready  
**api-readiness-check-date:** 2025-11-06 18:15
**api-readiness-notes:** Система квестов полностью проработана (10 типов, ветвление, последствия, интеграция с главным сюжетом 2090-2093). Готово для создания API задач.

**target-domain:** narrative  
**target-microservice:** narrative-service (port 8087)  
**target-frontend-module:** modules/narrative/quests

---

## Краткое описание

Система квестов для NECPGAME, включающая основные, побочные и ежедневные квесты с интеграцией системы выбора и последствий.

---

## Вопросы для проработки

### Q1: Типы квестов

**Вопрос:** Какие типы квестов должны быть в игре?

**OK Решение:** Вариант C (Гибридная система) + игроки могут создавать квесты на досках для фиксеров

- Основные квесты (main quests)
- Побочные квесты (side quests)
- Ежедневные квесты (daily quests)
- Еженедельные квесты (weekly quests)
- Квесты фракций (faction quests)
- Клановые квесты (guild quests)
- Динамические квесты (dynamic quests)
- Эвентовые квесты (event quests) - связанные с мировыми событиями
- Квесты социальных механик (social quests) - отношения, романсы, семья
- **Квесты от игроков (player-created quests)** - игроки могут создавать квесты на досках для фиксеров и т.д.

---

### Q2: Структура основных квестов

**Вопрос:** Как должны быть структурированы основные квесты (main quests)?

**OK Решение:** Вариант D (Гибридная система) - максимально широкая линия квестов для разных классов, стартовых историй, корпораций и т.д. Мир должен гибко развиваться

- Несколько основных сюжетных линий
- Каждая линия имеет ветвление
- Линии пересекаются и влияют друг на друга
- Разные концовки в зависимости от выборов
- Связь с системой лиг (каждая лига = новая история)
- **Разные стартовые истории** в зависимости от класса, фракции, корпорации
- **Гибкое развитие мира** - мир реагирует на действия игроков и развивается динамически
- **Максимальная широта** - квесты адаптируются под разные стили игры и выборы игроков

---

### Q3: Система побочных квестов

**Вопрос:** Как должны работать побочные квесты (side quests)?

**OK Решение:** Вариант C (Гибридная система)

- Базовые статичные побочные квесты
- Динамические побочные квесты на основе действий игрока
- Фракционные побочные квесты от фракций
- Клановые побочные квесты от кланов

---

### Q4: Ежедневные и еженедельные квесты

**Вопрос:** Как должны работать ежедневные и еженедельные квесты?

**OK Решение:** Вариант D (Гибридная система)

- Базовые ежедневные квесты (фиксированные)
- Динамические ежедневные квесты (на основе событий)
- Еженедельные квесты связаны с глобальными событиями
- Эвентовые квесты во время мировых событий

---

### Q5: Награды за квесты

**Вопрос:** Какие награды должны давать квесты?

**OK Решение:** Вариант C (Гибридная система) - награда должна быть реальной в данном квесте и зависеть от состояния экономики и мира в целом. Механика стелса - можно пройти квест так, что враги не заметят, и не будет штрафа к репутации. Разные ачивки (например, пройти без убийств и т.д.)

- Стандартные награды (XP, валюта, предметы, репутация)
- Уникальные награды (предметы, скины, доступ)
- Прогресс в системах (человечность, навыки)
- Влияние на мир (изменение доступности контента)
- **Реальные награды в контексте квеста** - награды зависят от состояния экономики и мира
- **Механика стелса** - можно пройти квест так, что враги не заметят трупы и игрока, нет штрафа к репутации у врага
- **Ачивки (achievements)** - разные награды за разные способы прохождения (без убийств, без обнаружения, и т.д.)
- **Динамические награды** - награды адаптируются к экономике и состоянию мира

---

### Q6: Интеграция с системой выбора и последствий

**Вопрос:** Как квесты должны интегрироваться с системой выбора и последствий?

**OK Решение:** Вариант D (Гибридная система) - действия игрока должны очень сильно влиять на дальнейшие события по аналогии с Baldur's Gate 3

- Основные квесты всегда имеют выборы
- Побочные квесты могут иметь выборы
- Ежедневные квесты обычно без выборов (кроме эвентовых)
- Выборы влияют на доступный контент, репутацию, мир
- Связь с системой ветвления сюжета
- **Глубокое влияние действий** - действия игрока очень сильно влияют на дальнейшие события
- **Каскадные последствия** - выборы влияют на другие выборы и события
- **Реальное изменение мира** - выборы открывают/закрывают контент, меняют NPC, влияют на фракции
- **Невозможность вернуться назад** - выборы необратимы, создают уникальный опыт
- **Аналогия с Baldur's Gate 3** - каждый выбор имеет вес и реальные последствия

---

### Q7: Интеграция с фракциями и кланами

**Вопрос:** Как квесты должны интегрироваться с фракциями и кланами?

**OK Решение:** Вариант C (Гибридная система)

- Отдельные квесты фракций (для репутации и наград)
- Интеграция выбора фракции в основные квесты
- Клановые квесты для совместного прохождения
- Влияние на политику фракций и кланов

**Примечание:** Везде будет гибридный подход - оригинальные вещи из вселенной Cyberpunk + MMORPG составляющие (из источников вдохновения) + возможные отсылки на реальный мир

---

### Q8: Интеграция с системой лиг

**Вопрос:** Как квесты должны интегрироваться с системой лиг (временная линия 2020-2090)?

**OK Решение:** Гибридная система с перезапуском каждой лиги

- Каждая лига перезапускает всё заново (полный ресет)
- Все создают персов заново
- Создается новый сид мира и начинается новая история
- Базовые квесты доступны всегда (но с новым сидом мира)
- Квесты временной линии появляются в зависимости от периода лиги
- Уникальные квесты для каждой лиги (связь с концепцией симуляции и раскрытием)
- **Квесты от игроков не переносятся** - нужно заново оформлять заказы
- **Популярные квесты от игроков** могут добавляться в игру как часть базовых квестов

---

## Shooter/MMORPG skill tests и групповые правила

- Проверки используют пороговые значения (`0.0–1.0`) для метрик: `accuracy`, `stealth_rating`, `tech_mastery`, `cool_resilience`, `psy_resistance`.
- Модификаторы: импланты, укрытия, состояния, погодные эффекты (указываются через `modifier_sources`).
- Групповые проверки: ассисты добавляют +0.03 к основному показателю (максимум +0.09) либо засчитывается успех по большинству.
- Логирование: все проверки фиксируются для кооперативных логов и аналитики.
- Пороговые значения масштабируются по фракции/зоне/уровню контента; рекомендованные диапазоны см. `quest-shooter-checks.md`.

Связанные:
- `04-narrative/quests/main/README.md` — индекс узлов
- `04-narrative/quest-shooter-checks.md`
- `02-gameplay/combat/combat-shooter-core.md`

---

## Источники вдохновения

- **BALDUR GATE 3** - система ветвления сюжета, выборы влияют на сюжет
- **The Witcher 3 Wild Hunt** - глубокая система квестов, побочные квесты высокого качества
- **OBLIVION/SKYRIM** - система квестов фракций, академий
- **CYBERPUNK 2077** - квесты в киберпанк сеттинге, выборы и последствия

---

## Связанные документы

- [Ветвление сюжета](./branching-stories.md) - система ветвления сюжета и последствий
- [Диалоги](./dialogues.md) - система диалогов
- [Романтические линии](./romances.md) - романтические линии

---

## История изменений

- v1.0.0 (2025-11-03) - Создание документа с вопросами для брейншторма
