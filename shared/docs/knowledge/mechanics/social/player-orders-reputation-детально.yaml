metadata:
  id: player-orders-reputation-detailed
  title: Система заказов — репутация и рейтинг (детально)
  document_type: mechanics
  category: social
  status: approved
  version: '1.0.0'
  last_updated: 2025-11-08T18:52:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-08T18:52:00Z
  owners:
    - role: social_lead
      contact: social@necp.game
  tags:
    - player-orders
    - reputation
  topics:
    - social-systems
    - ratings
  related_systems:
    - social-service
    - economy-service
    - world-service
    - factions-service
  related_documents:
    - id: player-orders-system-detailed
      relation: references
    - id: relationships-system-detailed
      relation: references
    - id: npc-hiring-system-detailed
      relation: references
    - id: visual-style-assets-detailed
      relation: references
  source: shared/docs/knowledge/mechanics/social/player-orders-reputation-детально.md
  visibility: internal
  audience:
    - concept
    - social
    - economy
  risk_level: medium
review:
  chain:
    - role: social_lead
      reviewer: ''
      reviewed_at: 2025-11-08T18:52:00Z
      status: approved
  next_actions: []
summary:
  problem: Требовалось формализовать рейтинги заказчиков и исполнителей для сервисов social и economy.
  goal: Определить метрики, формулы, категории, decay и интерфейсы репутации, включая REST/Kafka контракты и UX требования.
  essence: Документ описывает рейтинг с весовыми метриками, decay, категориями Bronze–Platinum, отзывами и арбитражом, обеспечивая готовность к реализации.
  key_points:
    - Метрики исполнителя и заказчика рассчитываются по весовым формулам с decay и роль-модификаторами.
    - Категории управляют привилегиями, санкциями и сезонными сбросами.
    - REST/JSON/Kafka контракты синхронизируют рейтинг с сервисами и UX.
content:
  sections:
    - id: overview
      title: Общая схема
      body: |
        Репутация состоит из двусторонних рейтингов исполнителей и заказчиков с диапазоном 0–100 и
        категориями Bronze, Silver, Gold, Platinum. Decay снижает показатели при бездействии.
      mechanics_links:
        - mechanics/social/player-orders-system.yaml
    - id: executor-metrics
      title: Метрики исполнителя
      body: |
        Completion Rate, Timeliness, Quality, Reliability, Complexity Bonus. Приведена формула со
        стандартными весами и коэффициентами decay.
      mechanics_links:
        - mechanics/social/player-orders-execution.yaml
    - id: client-metrics
      title: Метрики заказчика
      body: |
        Payment Reliability, Brief Quality, Dispute Rate, Reward Fairness, Repeat Business с примерными
        весами и штрафами при арбитраже.
      mechanics_links:
        - mechanics/social/player-orders-creation.yaml
    - id: feedback
      title: Отзывы и оценки
      body: |
        Отзывы содержат текст, оценки по качеству и коммуникации, флаги и проверки на токсичность.
        Жалобы запускают арбитраж и влияют на рейтинг.
      mechanics_links:
        - mechanics/social/player-orders-execution.yaml
    - id: categories
      title: Категории и привилегии
      body: |
        Bronze, Silver, Gold, Platinum и связанные бонусы, ограничения, сезонные сбросы и boosts.
      mechanics_links:
        - mechanics/social/player-orders-system.yaml
    - id: dynamics
      title: Динамика рейтинга
      body: |
        Decay, boosts, сезонные обновления, влияние фракций и требования к минимальному уровню.
      mechanics_links:
        - mechanics/social/player-orders-system.yaml
    - id: arbitration
      title: Арбитраж и безопасность
      body: |
        Dispute Handler, штрафы, санкции, escrow, логи и интеграция с economy-service.
      mechanics_links:
        - mechanics/social/player-orders-system.yaml
    - id: ux
      title: UX и визуализация
      body: |
        Профиль рейтинга, диаграммы, leaderboard, бейджи и уведомления при изменении категории.
      mechanics_links:
        - mechanics/social/player-orders-system.yaml
    - id: formulas
      title: Формулы и схемы
      body: |
        JSON схемы `player-order-rating`, `player-order-review`, `player-order-penalty`, `player-order-category`.
      mechanics_links:
        - mechanics/social/player-orders-system.yaml
    - id: rest
      title: REST API
      body: |
        `GET /social/player-orders/ratings/{playerId}`, `POST /social/player-orders/ratings/recalculate`,
        `/reviews`, `/penalties`, `/categories` с фильтрами и job-статусами.
      mechanics_links:
        - mechanics/social/player-orders-system.yaml
    - id: kafka
      title: Kafka события
      body: |
        `social.player-orders.rating.updated`, `social.player-orders.review.created`,
        `social.player-orders.penalty.applied`, `economy.player-orders.reward.adjusted` и подписчики UI,
        telemetry, factions и quest сервисов.
      mechanics_links:
        - mechanics/social/player-orders-system.yaml
appendix:
  glossary: []
  references:
    - title: JSON схема рейтинга заказа
      link: schemas/social/player-order-rating.schema.json
    - title: JSON схема отзыва
      link: schemas/social/player-order-review.schema.json
    - title: JSON схема санкций
      link: schemas/social/player-order-penalty.schema.json
  decisions: []
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml#player-orders-reputation-detailed
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-08
    author: social_team
    changes: Утверждены метрики, категории, decay, REST/Kafka события и UX требования для рейтингов.
validation:
  checksum: ''
  schema_version: '1.0'

