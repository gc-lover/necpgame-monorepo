metadata:
  id: player-orders-world-impact
  title: Система заказов — влияние на мир
  document_type: mechanics
  category: social
  status: approved
  version: '1.1.0'
  last_updated: 2025-11-08T10:05:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-08T10:05:00Z
  owners:
    - role: social_lead
      contact: social@necp.game
  tags:
    - player-orders
    - world-impact
    - economy
  topics:
    - social-systems
    - world-state
  related_systems:
    - world-service
    - economy-service
    - social-service
  related_documents:
    - id: player-orders-system-detailed
      relation: elaborates
    - id: player-orders-world-impact-detailed
      relation: elaborates
    - id: city-life-population-algorithm
      relation: references
  source: shared/docs/knowledge/mechanics/social/player-orders-world-impact.md
  visibility: internal
  audience:
    - concept
    - economy
    - social
    - world
  risk_level: medium
review:
  chain:
    - role: social_lead
      reviewer: ''
      reviewed_at: 2025-11-08T10:05:00Z
      status: approved
  next_actions: []
summary:
  problem: Требуется описать, как заказы игроков влияют на мировую экономику, социальные связи и политические процессы.
  goal: Зафиксировать индексы, события и интеграции, позволяющие world-service и сопряжённым доменам реагировать на активность заказов.
  essence: Документ определяет метрики, мировые события и REST/Kafka контуры для синхронизации влияния заказов с системами экономики и общества.
  key_points:
    - Индексы OrderEconomicIndex, ServiceDemandIndex, ConflictHeatMap и TrustDelta управляют изменениями мира.
    - События Economic Surge, Security Lockdown, Shadow Campaign и Reconstruction Drive задают динамику world-service.
    - REST и Kafka интерфейсы связывают economy-service, world-service и social-service.
content:
  sections:
    - id: introduction
      title: Введение
      body: |
        Система заказов влияет на экономику, социальные связи и политические процессы мегаполиса. Документ описывает ключевые индексы, мировые события и интеграции между сервисами для поддержки этического и стратегического геймплея.
      mechanics_links:
        - mechanics/social/player-orders-system-детально.md
      assets: []
    - id: key_effects
      title: Ключевые эффекты
      body: |
        Заказы перераспределяют капитал, формируют социальные напряжения, меняют дипломатию фракций и обновляют мировые события. Изменения отражаются в экономике, социальном доверии и статусе городов на heat-map.
      mechanics_links:
        - mechanics/social/player-orders-world-impact-детально.md
      assets: []
    - id: influence_indicators
      title: Индикаторы влияния
      body: |
        Индексы OrderEconomicIndex, ServiceDemandIndex, ConflictHeatMap и TrustDelta имеют пороги, запускающие инвестиции, кризисы и корректировки дипломатии. Метрики синхронизируются между world-service и economy-service каждые 15 минут.
      mechanics_links:
        - mechanics/social/player-orders-advanced.md
      assets: []
    - id: world_events
      title: События мирового состояния
      body: |
        Economic Surge повышает производство и торговлю, Security Lockdown ограничивает перемещение и повышает цены на охрану, Shadow Campaign влияет на дипломатические коэффициенты, а Reconstruction Drive инициирует восстановление инфраструктуры и использует данные population алгоритмов.
      mechanics_links:
        - mechanics/social/player-orders-world-impact-детально.md
        - mechanics/social/player-orders-types.md
      assets: []
    - id: regional_mechanics
      title: Региональное влияние
      body: |
        Города имеют веса по экономике, безопасности и медиа. Заказы корректируют веса, активируют модификаторы скидок, налогов и доступности редких заказов. Результаты передаются в UX сценарии и аналитические панели.
      mechanics_links:
        - mechanics/social/player-orders-system-детально.md
      assets: []
    - id: ux_analytics
      title: UX и аналитика
      body: |
        Карта влияния, новости, дайджесты и аналитические дашборды отображают метрики и прогнозы. REST интерфейсы `GET /world/player-orders/effects` и `GET /social/player-orders/news` обеспечивают данные для UI модулей.
      mechanics_links:
        - mechanics/social/player-orders-advanced.md
      assets: []
    - id: rest_json
      title: REST и JSON контуры
      body: |
        REST API включает эндпоинты для влияния, пересчёта индексов и выдачи мировых событий. JSON схемы фиксируют структуру `PlayerOrderImpact`, `PlayerOrderEvent` и `PlayerOrderIndex` и служат контрактом между доменами.
      mechanics_links:
        - mechanics/social/player-orders-system-детально.md
      assets: []
    - id: kafka_integrations
      title: Kafka и асинхронные интеграции
      body: |
        Топики `world.player-orders.impact`, `economy.player-orders.index` и `world.player-orders.crisis` доставляют эффекты, индексы и кризисы в telemetry, trading-service, factions-service и npc-ai. Все события журналируются для аналитики.
      mechanics_links:
        - mechanics/social/player-orders-advanced.md
      assets: []
appendix:
  glossary: []
  references:
    - title: Детальный разбор влияния заказов
      link: ./player-orders-world-impact-детально.md
    - title: Алгоритм распределения населения
      link: ../city-life-population-algorithm.md
    - title: Детальная система заказов
      link: ./player-orders-system-детально.md
  decisions: []
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml#player-orders-world-impact
  blockers: []
history:
  - version: '1.1.0'
    date: 2025-11-08
    author: social_team
    changes: Добавлены индексы, мировые события, REST и Kafka контуры, а также UX сценарии.
  - version: '1.0.0'
    date: 2025-11-03
    author: social_team
    changes: Выделено из player-orders-system как отдельный документ влияния.
validation:
  checksum: ''
  schema_version: '1.0'

