metadata:
  id: player-orders-world-impact
  title: Система заказов — влияние на мир
  document_type: mechanics
  category: social
  status: approved
  version: '1.1.0'
  last_updated: 2025-11-08T10:05:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-08T10:05:00Z
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - social
    - player-orders
    - world
  topics:
    - world-impact
    - player-economy
  related_systems:
    - world-service
    - economy-service
    - social-service
  related_documents:
    - id: player-orders-world-impact-detailed
      relation: elaborates
    - id: city-life-population-algorithm
      relation: references
    - id: player-orders-system-detailed
      relation: complements
  source: shared/docs/knowledge/mechanics/social/player-orders-world-impact.md
  visibility: internal
  audience:
    - concept
    - world
    - economy
  risk_level: medium
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: ''
      status: pending
  next_actions: []
summary:
  problem: Влияние контрактов на мир и экономику было описано в Markdown и не содержало структурированных ссылок.
  goal: Зафиксировать мировые эффекты системы заказов, индикаторы и интеграции с сервисами.
  essence: Документ описывает, как заказы изменяют экономику, социальные связи, политику и локации через индексы и события.
  key_points:
    - Определены ключевые эффекты для экономики, социума, политики и мира.
    - Заданы индикаторы влияния и события мирового состояния.
    - Указаны API, Kafka топики и UX сценарии для визуализации влияния.
content:
  sections:
    - id: key-effects
      title: Ключевые эффекты
      body: |
        Заказы влияют на экономику, социальные связи, политику и локации. Экономика перераспределяет капитал и стоимость ресурсов. Социальная сфера реагирует ростом доверия или конфликтов. Политика корректирует дипломатические отношения, а мир обновляет статус городов и маршрутов.
      mechanics_links:
        - mechanics/social/player-orders-system-detailed.yaml
      assets: []
    - id: impact-indicators
      title: Индикаторы влияния
      body: |
        Для мониторинга используются `OrderEconomicIndex`, `ServiceDemandIndex`, `ConflictHeatMap` и `TrustDelta`. Пороговые значения индексов активируют инвестиции, бонусные задания, кризисы или корректировку дипломатии.
      mechanics_links:
        - mechanics/social/player-orders-world-impact-detailed.yaml
      assets: []
    - id: world-events
      title: События мирового состояния
      body: |
        Экономические всплески, режимы безопасности, скрытые кампании и реконструкции запускаются при изменении индексов. События синхронизируются с мировыми сервисами и влиянием городов.
      mechanics_links:
        - mechanics/social/player-orders-world-impact-detailed.yaml
      assets: []
    - id: regional-mechanics
      title: Региональное влияние
      body: |
        Города получают веса по экономика/безопасность/медиа. Заказы обновляют веса каждые 15 минут и активируют модификаторы, такие как скидки, налоги или редкие контракты. Результаты передаются в детализированное знание.
      mechanics_links:
        - mechanics/social/player-orders-world-impact-detailed.yaml
      assets: []
    - id: ux-analytics
      title: UX и аналитика
      body: |
        Карта влияния и аналитические панели отображают индексы и прогнозы. Новости и дайджесты формируются через `GET /social/player-orders/news`, а dashboard показывает состояние `OrderEconomicIndex`, `ServiceDemandIndex`, `ConflictHeatMap` и `TrustDelta`.
      mechanics_links:
        - mechanics/social/player-orders-system-detailed.yaml
      assets: []
    - id: api-contracts
      title: REST и JSON контуры
      body: |
        Основные API: `GET /world/player-orders/effects`, `POST /world/player-orders/effects/recalculate`, `GET /economy/player-orders/index`, `GET /world/player-orders/events`. JSON схемы расположены в каталоге `schemas/world` и `schemas/economy`.
      mechanics_links:
        - mechanics/social/player-orders-world-impact-detailed.yaml
      assets: []
    - id: kafka-integration
      title: Kafka и асинхронные интеграции
      body: |
        Топики `world.player-orders.impact`, `economy.player-orders.index` и `world.player-orders.crisis` публикуют данные для telemetry, notification и quest-сервисов. Payload содержит идентификаторы эффектов, метрики и триггеры кризисов.
      mechanics_links:
        - mechanics/social/player-orders-world-impact-detailed.yaml
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: true
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml#player-orders-world-impact
  blockers: []
history:
  - version: '1.1.0'
    date: 2025-11-08
    author: Concept Director Team
    changes: Добавлены индексы, события и интеграции REST/Kafka.
  - version: '1.0.0'
    date: 2025-11-03
    author: Concept Director Team
    changes: Базовый обзор влияния заказов на мир.
validation:
  checksum: ''
  schema_version: '1.0'

