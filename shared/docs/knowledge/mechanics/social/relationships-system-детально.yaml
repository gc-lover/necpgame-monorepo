metadata:
  id: relationships-system-detailed
  title: Система отношений и репутации — детальная версия
  document_type: mechanics
  category: social
  status: approved
  version: '1.0.0'
  last_updated: 2025-11-10T00:00:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-09T01:28:00Z
  owners:
    - role: concept_director
      contact: concept@necp.game
  tags:
    - relationships
    - reputation
    - social-mechanics
  topics:
    - social-interactions
    - diplomacy
  related_systems:
    - social-service
    - world-service
    - economy-service
  related_documents:
    - id: relationships-system
      relation: references
    - id: player-orders-system-detailed
      relation: integrates_with
    - id: reputation-formulas
      relation: depends_on
  source: shared/docs/knowledge/mechanics/social/relationships-system-детально.md
  visibility: internal
  audience:
    - concept
    - social
    - economy
  risk_level: medium
review:
  chain:
    - role: concept_director
      reviewer: ''
      reviewed_at: 2025-11-09T01:28:00Z
      status: approved
  next_actions: []
summary:
  problem: Глубокая социальная система требует детализации шкал репутации, доверия и союзов.
  goal: Зафиксировать расширенные уровни отношений, договоров, рейтингов и их влияние на мир.
  essence: Документ задаёт комплексную модель отношений EVE-подобного уровня с каскадными эффектами и API.
  key_points:
    - Расширены шкалы репутации, доверия и союзов для игроков, кланов и фракций.
    - Определены договоры доверия, арбитраж, история взаимодействий и метрики.
    - Указаны интеграции с экономикай, миром, NPC и пользовательскими системами.
content:
  sections:
    - id: methodology
      title: Методика детализации
      body: |
        Раскрыты слои системы: шкалы, визуализация, события, микросервисы и логи. Указаны источники данных, интерфейсы и влияние на другие подсистемы.
      mechanics_links:
        - shared/docs/knowledge/mechanics/social/social-mechanics-overview.yaml
      assets: []
    - id: player_relationships
      title: Отношения между игроками
      body: |
        Описаны уровни Friends, Allies, Pact, Enemies и Nemesis с визуальными индикаторами, предупреждениями и арбитражом.
      mechanics_links:
        - shared/docs/knowledge/mechanics/social/player-orders-reputation.yaml
      assets: []
    - id: reputation_scales
      title: Шкалы репутации и влияние
      body: |
        Расширены сегменты Hostile, Unfriendly, Neutral, Friendly, Ally для игроков, кланов, фракций и городов, включая эффекты и UI.
      mechanics_links:
        - shared/docs/knowledge/mechanics/social/reputation-formulas.yaml
      assets: []
    - id: trust_system
      title: Система доверия
      body: |
        Уровни доверия, механики набора и договоры доверия описаны с действиями, арбитражом и штрафами.
      mechanics_links:
        - shared/docs/knowledge/mechanics/economy/economy-contracts.yaml
      assets: []
    - id: alliances
      title: Союзы и договоры
      body: |
        Типы союзов (боевой, торговый, клановый, фракционный) и их процесс создания, опции и последствия нарушения.
      mechanics_links:
        - shared/docs/knowledge/mechanics/social/npc-hiring-system.yaml
      assets: []
    - id: ratings
      title: Рейтинги и социальный капитал
      body: |
        Перечислены рейтинги (общий, боевой, торговый, надёжности, социального влияния), UI индикация и награды.
      mechanics_links:
        - shared/docs/knowledge/mechanics/social/player-orders-system-детально.yaml
      assets: []
    - id: history_arbitration
      title: История и арбитраж
      body: |
        Журналы взаимодействий, фильтры, отзывы и процесс арбитража social-service при жалобах.
      mechanics_links:
        - shared/docs/knowledge/implementation/backend/trade-system.yaml
      assets: []
    - id: factions_world
      title: Фракции, города и влияние
      body: |
        Раскрыто влияние репутации на фракции, города, события и интеграция с city-life и world-events.
      mechanics_links:
        - shared/docs/knowledge/mechanics/economy/economy-events.yaml
      assets: []
    - id: api_and_events
      title: API, события и метрики
      body: |
        Приведены REST маршруты, JSON схемы, Kafka события, метрики и QA/UX согласования.
      mechanics_links:
        - shared/docs/knowledge/implementation/backend/social-service.yaml
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml#relationships-system-detailed
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-10
    author: AI Brain Manager
    changes: Конвертация детального описания системы отношений в YAML.
validation:
  checksum: ''
  schema_version: '1.0'


