# Система отношений и репутации

**api-readiness:** ready  
**api-readiness-check-date:** 2025-11-03 01:55
**api-readiness-notes:** Документ готов к созданию API задач. Содержит детальные механики системы отношений и репутации. TODO блоки только по балансировке (не блокируют создание API).

**Статус:** review - проверка готовности к созданию API задач  
**Приоритет:** Высокий  
**Дата создания:** 2025-11-03

---

- **Status:** created
- **Last Updated:** 2025-11-07 00:55
---



## Концепция системы отношений

### Важность системы отношений

**Почему важны:**
- Глубокая социальная структура - один из основных столпов игры
- Сложные отношения создают живой мир с реальными последствиями
- Репутация влияет на доступ к контенту, ресурсам и взаимодействиям
- Полная система отношений как в EVE Online - золотой стандарт MMORPG

**Источники вдохновения:**
- **EVE Online** - полная система репутации (standing) между корпорациями, альянсами, фракциями
- **WOW** - система репутации с фракциями
- **Cyberpunk 2077** - система репутации с бандами и корпорациями
- **BALDUR GATE 3** - глубокие отношения с персонажами

---

## Система отношений между игроками

### 1. Базовые отношения (Friends/Enemies)

**Типы базовых отношений:**
- **Друзья (Friends)** - добавлены в список друзей
  - Видеть онлайн/оффлайн статус
  - Быстрое общение и координация
  - Совместные операции и рейды
  - Совместные ресурсы и база
- **Враги (Enemies)** - добавлены в список врагов
  - Предупреждения о встрече
  - Отметка на карте и в мире
  - Возможность нападения без последствий репутации
  - История конфликтов

### 2. Система репутации (Reputation System)

**Шкала репутации: -100 до +100**
- **-100 до -50: Враждебность (Hostile)**
  - Агрессивное поведение NPC и игроков
  - Ограниченный доступ к территориям
  - Высокие цены у торговцев
  - Блокировка некоторых квестов
- **-50 до -10: Неприязнь (Unfriendly)**
  - Отрицательное отношение
  - Ограничения на торговлю
  - Предупреждения при встрече
- **-10 до +10: Нейтралитет (Neutral)**
  - Нейтральное отношение
  - Стандартные цены и доступ
  - Базовые взаимодействия
- **+10 до +50: Дружелюбие (Friendly)**
  - Положительное отношение
  - Скидки у торговцев
  - Доступ к дополнительным квестам
- **+50 до +100: Союзник (Ally)**
  - Максимальное доверие
  - Максимальные скидки и бонусы
  - Доступ к эксклюзивному контенту
  - Совместные операции и рейды

**TODO:** Балансировка уровней репутации и их эффектов будет сделана позже:
- Точные пороговые значения для каждого уровня
- Конкретные бонусы и штрафы для каждого уровня
- Механика изменения репутации (точные значения за действия)
- Балансировка скорости изменения репутации

**Механика изменения репутации:**
- Выполнение квестов для игрока/клана/фракции
- Торговля и экономические операции
- Совместные боевые операции
- Помощь в опасных ситуациях
- Предательство и враждебные действия

### 3. Система доверия (Trust System)

**Уровни доверия: 0 до 100**
- **0-20: Нет доверия (No Trust)**
  - Невозможна торговля ценными предметами
  - Нет доступа к совместным ресурсам
  - Ограничения на контракты
- **21-40: Низкое доверие (Low Trust)**
  - Ограниченная торговля
  - Базовые контракты
  - Предоплата для операций
- **41-60: Умеренное доверие (Moderate Trust)**
  - Нормальная торговля
  - Расширенные контракты
  - Частичная оплата авансом
- **61-80: Высокое доверие (High Trust)**
  - Полная торговля
  - Сложные контракты
  - Совместные ресурсы
- **81-100: Полное доверие (Full Trust)**
  - Максимальная торговля
  - Совместный доступ к ресурсам
  - Совместные базы и операции

**TODO:** Балансировка уровней доверия и их эффектов будет сделана позже:
- Точные пороговые значения для каждого уровня
- Конкретные ограничения и возможности для каждого уровня
- Механика изменения доверия (точные значения за действия)
- Балансировка скорости набора и потери доверия

**Механика изменения доверия:**
- Успешные торговые операции
- Выполнение контрактов
- Совместные боевые операции без предательства
- Время дружественных взаимодействий
- Предательство снижает доверие до 0

### 4. Система союзников (Allies System)

**Типы союзов:**
- **Боевой союз (Combat Alliance)** - совместные боевые операции
- **Торговый союз (Trade Alliance)** - торговые операции и экономика
- **Клановый союз (Clan Alliance)** - объединение кланов
- **Фракционный союз (Faction Alliance)** - поддержка одной фракции

**Механика союзов:**
- Официальное объявление союза между игроками/кланами
- Взаимная поддержка в конфликтах
- Совместные ресурсы и базы
- Общая репутация с фракциями
- Автоматическая помощь в бою

### 5. Рейтинг игрока (Player Rating)

**Типы рейтингов:**
- **Общий рейтинг (Overall Rating)** - общая оценка игрока сообществом
- **Боевой рейтинг (Combat Rating)** - рейтинг в PvP и боевых операциях
- **Торговый рейтинг (Trade Rating)** - рейтинг в торговле и экономике
- **Рейтинг надежности (Reliability Rating)** - выполнение контрактов и обязательств
- **Социальный рейтинг (Social Rating)** - влияние и репутация в сообществе

**Механика рейтинга:**
- Оценка игроками после взаимодействий
- Успешные операции повышают рейтинг
- Неудачные операции и предательство снижают рейтинг
- Рейтинг влияет на доступ к контенту и контрактам
- Высокий рейтинг открывает эксклюзивные возможности

**TODO:** Балансировка системы рейтинга будет сделана позже:
- Конкретные формулы расчета рейтинга
- Веса различных действий для расчета рейтинга
- Влияние рейтинга на доступ к контенту
- Балансировка скорости изменения рейтинга

### 6. История взаимодействий (Interaction History)

**Типы записей:**
- **Торговые операции** - история всех торговых сделок
- **Боевые взаимодействия** - PvP, совместные операции, конфликты
- **Контракты** - выполнение и принятие контрактов
- **Квесты** - совместные квесты и операции
- **Предательства** - записи о предательстве и нарушении доверия

**Механика истории:**
- Полная запись всех взаимодействий
- Поиск по истории взаимодействий
- Статистика успешных/неудачных операций
- Отзывы и оценки после взаимодействий
- Публичный профиль с историей

---

## Система репутации между социальными структурами

### Иерархия репутации

**Уровни репутации:**
1. **Репутация между игроками** (Player-to-Player)
2. **Репутация игрока с кланом** (Player-to-Clan)
3. **Репутация клана с фракцией** (Clan-to-Faction)
4. **Репутация между фракциями** (Faction-to-Faction)
5. **Глобальная репутация** (Global Standing)

### 1. Репутация игрока с кланом (Player-Clan Reputation)

**Шкала: -100 до +100**
- **-100 до -50: Враг клана (Clan Enemy)**
  - Агрессия всех членов клана
  - Блокировка доступа к территориям клана
  - Боевые операции против клана
- **-50 до -10: Неприязнь клана (Clan Unfriendly)**
  - Отрицательное отношение членов клана
  - Ограничения на взаимодействие
- **-10 до +10: Нейтралитет (Neutral)**
  - Нейтральное отношение
  - Базовые взаимодействия
- **+10 до +50: Друг клана (Clan Friend)**
  - Положительное отношение
  - Доступ к некоторым ресурсам клана
- **+50 до +100: Союзник клана (Clan Ally)**
  - Максимальное доверие
  - Доступ к ресурсам и базам клана
  - Совместные операции

**TODO:** Балансировка репутации игрока с кланом будет сделана позже:
- Точные пороговые значения для каждого уровня
- Конкретные эффекты для каждого уровня
- Механика изменения репутации (точные значения за действия)

**Механика изменения:**
- Выполнение заданий клана
- Помощь клану в конфликтах
- Торговля с кланом
- Вражеские действия против клана

### 2. Репутация клана с фракцией (Clan-Faction Reputation)

**Шкала: -100 до +100**
- **-100 до -50: Враг фракции (Faction Enemy)**
  - Война с фракцией
  - Блокировка доступа к территориям
  - Агрессия NPC фракции
- **-50 до -10: Неприязнь (Unfriendly)**
  - Отрицательное отношение
  - Ограничения на взаимодействие
- **-10 до +10: Нейтралитет (Neutral)**
  - Нейтральное отношение
  - Базовые взаимодействия
- **+10 до +50: Дружелюбие (Friendly)**
  - Положительное отношение
  - Доступ к ресурсам фракции
  - Эксклюзивные квесты
- **+50 до +100: Союзник фракции (Faction Ally)**
  - Максимальное доверие
  - Полный доступ к ресурсам
  - Участие в фракционных операциях

**TODO:** Балансировка репутации клана с фракцией будет сделана позже:
- Точные пороговые значения для каждого уровня
- Конкретные эффекты для каждого уровня
- Механика влияния действий членов клана на репутацию клана
- Веса различных действий для расчета репутации клана
- Дипломатические модификаторы репутации

**Механика изменения:**
- Действия всех членов клана влияют на репутацию клана с фракцией
- Клановые операции для фракции
- Вражеские действия клана против фракции
- Дипломатические действия лидеров клана

### 3. Репутация между фракциями (Faction-Faction Reputation)

**Типы отношений:**
- **Война (War)** - -100 до -50
  - Полномасштабные военные действия
  - Блокировка всех взаимодействий
  - Территориальные конфликты
- **Враждебность (Hostility)** - -50 до -10
  - Агрессивные действия
  - Ограничения на взаимодействие
  - Спорные территории
- **Нейтралитет (Neutrality)** - -10 до +10
  - Нейтральные отношения
  - Минимальные взаимодействия
  - Возможность торговли
- **Дружба (Friendship)** - +10 до +50
  - Положительные отношения
  - Торговые соглашения
  - Совместные операции
- **Альянс (Alliance)** - +50 до +100
  - Союзнические отношения
  - Общие цели и операции
  - Совместная защита территорий
  - Торговые преференции

**TODO:** Балансировка репутации между фракциями будет сделана позже:
- Точные пороговые значения для каждого уровня отношений
- Конкретные эффекты для каждого уровня (доступ к территориям, торговля, войны)
- Механика влияния действий игроков и кланов на отношения фракций
- Веса различных действий для изменения отношений
- Балансировка дипломатических модификаторов

**Механика изменения:**
- Действия игроков и кланов влияют на отношения фракций
- Фракционные войны и конфликты
- Торговые соглашения и экономические операции
- Дипломатические миссии игроков (Politician класс)
- Глобальные события и войны

**Примеры отношений:**
- **Arasaka vs Militech** - вражда/война (корпоративные конфликты)
- **Maelstrom vs Valentinos** - вражда (территориальные конфликты)
- **Полиция vs Банды** - вражда (правовой конфликт)
- **Корпорации vs Независимые организации** - нейтралитет/вражда

### 4. Репутация игрока с фракцией (Player-Faction Reputation)

**Шкала: -100 до +100**
- **-100 до -50: Враг фракции (Faction Enemy)**
  - Агрессия всех NPC фракции
  - Блокировка доступа к территориям
  - Высокие цены у торговцев
  - Блокировка квестов
- **-50 до -10: Неприязнь (Unfriendly)**
  - Отрицательное отношение NPC
  - Ограничения на торговлю
  - Ограниченный доступ к квестам
- **-10 до +10: Нейтралитет (Neutral)**
  - Нейтральное отношение
  - Стандартные цены
  - Базовые квесты
- **+10 до +50: Дружелюбие (Friendly)**
  - Положительное отношение
  - Скидки у торговцев
  - Дополнительные квесты
  - Доступ к ресурсам
- **+50 до +100: Союзник фракции (Faction Ally)**
  - Максимальное доверие
  - Максимальные скидки
  - Эксклюзивные квесты
  - Доступ ко всем ресурсам
  - Возможность вступить во фракцию

**TODO:** Балансировка репутации игрока с фракцией будет сделана позже:
- Точные пороговые значения для каждого уровня
- Конкретные эффекты для каждого уровня (скидки, доступ к квестам, территориям)
- Механика изменения репутации (точные значения за каждое действие)
- Балансировка скорости изменения репутации
- Влияние на экономику и торговлю

**Механика изменения:**
- Выполнение квестов для фракции
- Помощь фракции в конфликтах
- Торговля с фракцией
- Вражеские действия против фракции
- Убийство членов фракции

### 5. Глобальная репутация (Global Standing)

**Типы глобальной репутации:**
- **Криминальная репутация (Criminal Reputation)** - репутация в криминальном мире
- **Корпоративная репутация (Corporate Reputation)** - репутация в корпоративном мире
- **Правительственная репутация (Government Reputation)** - репутация с правительством
- **Социальная репутация (Social Reputation)** - общая репутация в сообществе

**TODO:** Балансировка глобальной репутации будет сделана позже:
- Формула расчета глобальной репутации (комбинация репутаций)
- Веса различных типов репутации в глобальной репутации
- Влияние глобальной репутации на доступ к контенту
- Балансировка влияния на рейтинг игрока

**Механика глобальной репутации:**
- Комбинация репутации со всеми фракциями
- Влияет на доступ к глобальным событиям
- Открывает/закрывает доступ к контенту
- Влияет на рейтинг игрока

---

## Сложные взаимодействия системы репутации

### Каскадные эффекты

**TODO:** Балансировка каскадных эффектов будет сделана позже:
- Точные значения изменения репутации для каждого уровня иерархии
- Веса различных действий для каскадных эффектов
- Механика влияния на союзников и союзные структуры
- Балансировка скорости распространения эффектов
- Влияние на экономику и торговлю через каскадные эффекты

**Примеры каскадных эффектов:**
1. **Игрок убивает члена банды Maelstrom**
   - Репутация игрока с Maelstrom: -20 (TODO: балансировка значения)
   - Репутация клана игрока с Maelstrom: -5 (TODO: балансировка веса влияния)
   - Репутация Maelstrom с кланом игрока: -5 (TODO: балансировка)
   - Репутация Maelstrom с фракцией клана: -2 (TODO: балансировка веса)
   - Если Maelstrom в союзе с другой бандой → влияние на союзника (TODO: балансировка)

2. **Игрок помогает корпорации Arasaka**
   - Репутация игрока с Arasaka: +15 (TODO: балансировка значения)
   - Репутация игрока с Militech (враг Arasaka): -5 (TODO: балансировка веса вражды)
   - Репутация клана игрока с Arasaka: +3 (TODO: балансировка веса влияния)
   - Репутация Arasaka с кланом игрока: +3 (TODO: балансировка)

3. **Клан объявляет войну банде**
   - Репутация клана с бандой: -50 (война) (TODO: балансировка значения)
   - Все члены клана получают репутацию: -50 с бандой (TODO: балансировка)
   - Если банда в союзе → влияние на союзников (TODO: балансировка веса)
   - Фракция банды может вступить в конфликт (TODO: балансировка вероятности)

### Влияние на игровой мир

**TODO:** Балансировка влияния репутации на игровой мир будет сделана позже:
- Конкретные эффекты репутации на доступ к территориям (пороговые значения)
- Влияние на цены торговцев (точные проценты скидок/наценок)
- Влияние на доступность квестов и контрактов (критерии доступа)
- Механика влияния на поведение NPC (уровни агрессии, дружелюбия)
- Влияние на фракционные войны (пороговые значения для объявления войны)
- Влияние на экономику и торговлю (конкретные модификаторы)

**Механики влияния:**
- Репутация влияет на доступ к территориям
- Репутация влияет на цены торговцев
- Репутация влияет на доступность квестов и контрактов
- Репутация влияет на поведение NPC
- Репутация влияет на фракционные войны и конфликты
- Репутация влияет на экономику и торговлю

---

## Решения

### Система отношений на основе EVE Online

**Решение (2025-11-03):** Полная система отношений как в EVE Online
- **Между игроками:** Друзья/Враги, Репутация, Доверие, Союзники, Рейтинг, История
- **Между игроками и кланами:** Репутация игрока с кланом, влияние на клан
- **Между кланами и фракциями:** Репутация клана с фракцией, влияние на фракцию
- **Между фракциями:** Война, Враждебность, Нейтралитет, Дружба, Альянс
- **Глобальная репутация:** Криминальная, Корпоративная, Правительственная, Социальная

**Сложность системы:**
- Очень сложная социальная конструкция
- Каскадные эффекты между всеми уровнями
- Реальное влияние на игровой мир
- Глубокие последствия для всех действий

**TODO:** Полная балансировка всей системы будет сделана позже:
- Балансировка всех значений репутации, доверия, рейтинга
- Балансировка каскадных эффектов и их влияния
- Балансировка скорости изменения всех параметров
- Балансировка влияния на игровой мир (экономика, доступ, поведение NPC)
- Тестирование и итерации после реализации

---

## Вопросы для проработки

1. ✅ Как работают отношения между игроками? - **Определена полная система: Друзья/Враги, Репутация, Доверие, Союзники, Рейтинг, История**
2. ✅ Как работает система репутации с фракциями? - **Определена сложная система репутации между всеми уровнями**
3. ✅ Как работают отношения с NPC? - **Определена полная система: Базовые отношения, Репутация, Влияние класса и фракции, Типы отношений (Дружба, Романтика, Вражда, Специальные), Игроки как NPC, Наем NPC**
4. Как работает управление структурами игроками?
5. Как работают территориальные войны и контроль территорий?
6. Как работает дипломатия между структурами?
7. Как работает экономика в зависимости от репутации?

---

## История изменений

- v1.0.0 (2025-11-03) - Создан документ системы отношений и репутации
- v1.1.0 (2025-11-03) - Определена полная система отношений по аналогии с EVE Online
  - Система отношений между игроками (Друзья/Враги, Репутация, Доверие, Союзники, Рейтинг, История)
  - Система репутации между социальными структурами (Игрок-Клан, Клан-Фракция, Фракция-Фракция, Глобальная)
  - Сложные каскадные эффекты и влияние на игровой мир
- v1.2.0 (2025-11-03) - Добавлены TODO о балансировке всех аспектов системы
  - TODO по балансировке добавлены во все разделы системы отношений и репутации
  - Все конкретные значения и формулы будут определены позже в процессе балансировки
