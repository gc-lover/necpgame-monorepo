metadata:
  id: dungeon-scenarios-catalog
  title: 'Каталог подземелий — сценарии'
  document_type: mechanics
  category: world
  status: approved
  version: '1.0.0'
  last_updated: 2025-11-07T20:33:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-07T20:33:00Z
  owners:
    - role: world_lead
      contact: world@necp.game
  tags:
    - dungeons
    - instanced-content
    - gameplay
  topics:
    - dungeon-design
    - gameplay-world
  related_systems:
    - world-service
    - matchmaking-service
    - loot-service
  related_documents:
    - id: dungeon-bosses-catalog
      relation: complements
    - id: loot-hunt-system
      relation: references
    - id: quest-system
      relation: references
  source: shared/docs/knowledge/mechanics/world/dungeons/dungeon-scenarios-catalog.md
  visibility: internal
  audience:
    - concept
    - gameplay
    - live-ops
  risk_level: medium
review:
  chain:
    - role: world_lead
      reviewer: ''
      reviewed_at: 2025-11-07T20:33:00Z
      status: approved
  next_actions: []
summary:
  problem: Каталог сценариев подземелий находился в Markdown и не соответствовал требованиям schema-first подхода.
  goal: Формализовать типы подземелий, структуру сценария, примеры и API-контуры в формате YAML.
  essence: Документ описывает инстансовые активности на 4–10 игроков, их фазы, модификаторы, награды и интеграции.
  key_points:
    - Подземелья классифицированы по типам (Heist, Ritual, Overrun, Gauntlet, Escort).
    - Каждый сценарий содержит фазы Briefing→Extraction и привязан к лору и наградам.
    - Определены модификаторы, API, данные и связи с другими системами.
content:
  sections:
    - id: dungeon_types
      title: Типы подземелий
      body: |
        Каталог поддерживает Heist, Ritual, Overrun, Gauntlet и Escort сценарии. Для каждого формата указаны игровой акцент и лорные
        привязки (Arasaka, Cult of the Wave, Maelstrom и др.).
      mechanics_links:
        - mechanics/world/dungeons/dungeon-bosses-catalog.yaml
      assets: []
    - id: scenario_structure
      title: Структура сценария
      body: |
        Общий шаблон: Briefing (NPC, выбор модификаторов) → Infiltration (пазлы) → Core Encounter (боссы, волны, взломы) → Extraction
        (варианты завершения) → Debrief (награды, Hard Mode).
      mechanics_links:
        - mechanics/world/events/live-events-system.yaml
      assets: []
    - id: sample_scenarios
      title: Примеры сценариев
      body: |
        - Data Reliquary (Heist) — архив Arasaka, таймер тревоги, чертежи имплантов.
        - Blackwall Echo (Ritual) — NetWatch, AR-фазы, Blackwall Shards.
        - Substructure 77 (Overrun) — завод Biotechnica, токсичные модификаторы.
        - Neon Trials (Gauntlet) — арена Night City, зрительские эффекты.
        - Ghost Freight (Escort) — поезд через Badlands, инженерные задачи.
      mechanics_links:
        - mechanics/world/dungeons/dungeon-bosses-catalog.yaml
      assets: []
    - id: modifiers
      title: Модификаторы и трудности
      body: |
        Подземелья используют аффиксы `Cyber Surge`, `Biohazard`, `Glitched Reality`, `Corporate Audit` и шкалу сложностей Normal → Apex
        с уникальными механиками. Динамические эвенты (Night Shift, Corp Counter-Op) обновляют каталоги.
      mechanics_links:
        - mechanics/world/events/world-events-framework.yaml
      assets: []
    - id: rewards
      title: Награды и прогресс
      body: |
        Награды выдаются Dungeon Tokens, Blueprint Unlocks, Guild Progress и Lore Unlocks. Loot Hunt, Voice Lobby и Clan Wars получают
        бонусы, а Battle Pass добавляет задания.
      mechanics_links:
        - mechanics/economy/loot-tables.yaml
        - implementation/backend/battle-pass/README.yaml
      assets: []
    - id: api
      title: API и данные
      body: |
        REST-контуры: `GET /dungeons/catalog`, `POST /matchmaking/join`, `POST /instance/{id}/progress`, `GET /dungeons/rewards`.
        Данные хранятся в `dungeon_catalog`, `dungeon_instances`, `dungeon_rewards` с UUID и JSONB.
      mechanics_links:
        - mechanics/world/dungeons/dungeon-bosses-catalog.yaml
      assets: []
    - id: lore
      title: Лор и NPC
      body: |
        Кураторами выступают Viktor "Vault" Reyes, Sister Aurora, Dr. Elise Hahn и Captain Mira "Forge". Они определяют мотивацию,
        награды и дальнейшие сюжетные ветки.
      mechanics_links:
        - mechanics/world/events/live-events-system.yaml
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml#dungeon-scenarios-catalog
  blockers: []
history:
  - version: '1.0.0'
    date: 2025-11-07
    author: world_lead
    changes: Зафиксирован каталог подземелий, примеры, модификаторы и API-контуры.
validation:
  checksum: ''
  schema_version: '1.0'

