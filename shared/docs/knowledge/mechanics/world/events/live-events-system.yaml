metadata:
  id: live-events-system
  title: 'Live Events System — динамика Найт-Сити'
  document_type: mechanics
  category: world
  status: approved
  version: '1.1.0'
  last_updated: 2025-11-08T00:14:00Z
  concept_approved: true
  concept_reviewed_at: 2025-11-08T00:14:00Z
  owners:
    - role: world_lead
      contact: world@necp.game
  tags:
    - live-events
    - world
    - live-ops
  topics:
    - world-events
    - gameplay-world
  related_systems:
    - world-service
    - announcement-service
    - battle-pass-service
  related_documents:
    - id: combat-loadouts-system
      relation: complements
    - id: loot-hunt-system
      relation: references
    - id: arena-system
      relation: references
  source: shared/docs/knowledge/mechanics/world/events/live-events-system.md
  visibility: internal
  audience:
    - concept
    - live-ops
    - gameplay
  risk_level: medium
review:
  chain:
    - role: world_lead
      reviewer: ''
      reviewed_at: 2025-11-08T00:14:00Z
      status: approved
  next_actions: []
summary:
  problem: Описание live-events находилось в Markdown и не соответствовало знаниевой структуре для handoff в World-service.
  goal: Зафиксировать категории событий, жизненный цикл, модификаторы систем и интеграции в формате YAML.
  essence: Документ описывает фреймворк live-events, данные, примеры сценариев 2025–2026, взаимодействие с лодаутами и требования к аналитике.
  key_points:
    - Классифицированы категории событий и их жизненный цикл от планирования до архива.
    - Определены структуры данных и системные модификаторы для мира, экономики и боевых режимов.
    - Зафиксированы интеграции с Announcement, Battle Pass, Achievement и аналитическими метриками.
content:
  sections:
    - id: categories
      title: Категории и описание
      body: |
        Система поддерживает City-Wide Crisis, Corporate Ops, Social Festivals, Underground Alerts, Environmental Shifts и Season
        Specials. Каждая категория влияет на разные слои мира и задаёт приоритет для world-service.
      mechanics_links:
        - mechanics/world/events/world-events-framework.yaml
      assets: []
    - id: lifecycle
      title: Жизненный цикл события
      body: |
        Цикл включает Planning (запись в `live_events_plan`), Announcement (новости, UI, push), Active Phase (модификаторы, временные
        квесты), Resolution (награды, лор-флаги) и Archive. Жизненный цикл синхронизируется с календарём и кураторами NPC.
      mechanics_links:
        - mechanics/world/events/world-events-framework.yaml
      assets: []
    - id: data_model
      title: Данные и сервисы
      body: |
        Используются таблицы `live_events_plan`, `live_event_progress`, `live_event_effects` с UUID и JSONB полями. События
        транслируются через world-service, требуют интеграции с announcement-service и web-компаньоном.
      mechanics_links:
        - mechanics/implementation/backend/announcement/announcement-system.yaml
      assets: []
    - id: examples
      title: Примеры событий 2025–2026
      body: |
        Blackwall Surge добавляет редкие Shards и сетевые риски, Neon Bash Tournament активирует подпольный PvP, Corporate Divide
        разворачивает конфликт Arasaka vs Militech. Примеры показывают влияние на лор, экономику и социальные системы.
      mechanics_links:
        - mechanics/economy/stock-exchange/stock-events.yaml
      assets: []
    - id: system_modifiers
      title: Модификаторы систем
      body: |
        Live-events влияют на Arena System, Loot Hunt, Dungeons, Loadouts, экономику и социальные награды. Поддерживаются профили
        лодаутов (stormbreaker/safebearer/scout/stormrunner) и автоподбор комплектов для экспедиций ARC.
      mechanics_links:
        - mechanics/combat/combat-loadouts-system.yaml
        - mechanics/world/dungeons/dungeon-scenarios-catalog.yaml
      assets: []
    - id: integrations
      title: Интеграции и аналитика
      body: |
        Система связана с Announcement, Support Ticket, Maintenance Mode, Battle Pass, Achievement. Аналитика отслеживает participation
        rate, retention lift, economy impact и voice lobby activity.
      mechanics_links:
        - implementation/backend/battle-pass/README.yaml
      assets: []
appendix:
  glossary: []
  references: []
  decisions: []
implementation:
  needs_task: false
  queue_reference:
    - shared/trackers/queues/concept/queued.yaml#live-events-system
  blockers: []
history:
  - version: '1.1.0'
    date: 2025-11-08
    author: world_lead
    changes: Добавлены модификаторы для боевых лодаутов, ARC-экспедиций и уточнены интеграции.
  - version: '1.0.0'
    date: 2025-11-07
    author: world_lead
    changes: Базовое описание фреймворка live-events.
validation:
  checksum: ''
  schema_version: '1.0'

